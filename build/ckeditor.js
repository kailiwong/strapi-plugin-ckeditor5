/*! For license information please see ckeditor.js.LICENSE.txt */
!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.Editor=e():t.Editor=e()}(self,()=>(()=>{"use strict";var t={56:(t,e,n)=>{t.exports=function(t){var e=n.nc;e&&t.setAttribute("nonce",e)}},72:t=>{var e=[];function n(t){for(var n=-1,i=0;i<e.length;i++)if(e[i].identifier===t){n=i;break}return n}function i(t,i){for(var r={},s=[],a=0;a<t.length;a++){var l=t[a],c=i.base?l[0]+i.base:l[0],d=r[c]||0,u="".concat(c," ").concat(d);r[c]=d+1;var h=n(u),g={css:l[1],media:l[2],sourceMap:l[3],supports:l[4],layer:l[5]};if(-1!==h)e[h].references++,e[h].updater(g);else{var m=o(g,i);i.byIndex=a,e.splice(a,0,{identifier:u,updater:m,references:1})}s.push(u)}return s}function o(t,e){var n=e.domAPI(e);return n.update(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap&&e.supports===t.supports&&e.layer===t.layer)return;n.update(t=e)}else n.remove()}}t.exports=function(t,o){var r=i(t=t||[],o=o||{});return function(t){t=t||[];for(var s=0;s<r.length;s++){var a=n(r[s]);e[a].references--}for(var l=i(t,o),c=0;c<r.length;c++){var d=n(r[c]);0===e[d].references&&(e[d].updater(),e.splice(d,1))}r=l}}},74:t=>{t.exports="data:image/svg+xml;utf8,<svg width=%27120%27 height=%2712%27 xmlns=%27http://www.w3.org/2000/svg%27 ><text style=%27paint-order:stroke fill; clip-path: inset%28-3px%29%27 stroke=%27%23EAEAEA%27 stroke-width=%2713%27 dominant-baseline=%27middle%27 fill=%27black%27 x=%273%27 y=%277%27 font-size=%279px%27 font-family=%27Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace%27>HEADER</text></svg>"},83:t=>{t.exports="data:image/svg+xml;utf8,<svg width=%27120%27 height=%2712%27 xmlns=%27http://www.w3.org/2000/svg%27 ><text style=%27paint-order:stroke fill; clip-path: inset%28-3px%29%27 stroke=%27%23EAEAEA%27 stroke-width=%2713%27 dominant-baseline=%27middle%27 fill=%27black%27 x=%273%27 y=%277%27 font-size=%279px%27 font-family=%27Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace%27>ADDRESS</text></svg>"},84:t=>{t.exports="data:image/svg+xml;utf8,<svg width=%27120%27 height=%2712%27 xmlns=%27http://www.w3.org/2000/svg%27 ><text style=%27paint-order:stroke fill; clip-path: inset%28-3px%29%27 stroke=%27%23EAEAEA%27 stroke-width=%2713%27 dominant-baseline=%27middle%27 fill=%27black%27 x=%273%27 y=%277%27 font-size=%279px%27 font-family=%27Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace%27>FOOTER</text></svg>"},113:t=>{t.exports=function(t,e){if(e.styleSheet)e.styleSheet.cssText=t;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(t))}}},159:t=>{t.exports=function(t){var e=document.createElement("style");return t.setAttributes(e,t.attributes),t.insert(e,t.options),e}},206:t=>{t.exports="data:image/svg+xml;utf8,<svg width=%27120%27 height=%2712%27 xmlns=%27http://www.w3.org/2000/svg%27 ><text style=%27paint-order:stroke fill; clip-path: inset%28-3px%29%27 stroke=%27%23EAEAEA%27 stroke-width=%2713%27 dominant-baseline=%27middle%27 fill=%27black%27 x=%273%27 y=%277%27 font-size=%279px%27 font-family=%27Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace%27>PRE</text></svg>"},225:t=>{t.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz48c3ZnIHdpZHRoPSI1MDRweCIgaGVpZ2h0PSI1MDRweCIgdmlld0JveD0iMCAwIDUwNCA1MDQiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+ICAgICAgICA8dGl0bGU+Z2x5cGgtbG9nb19NYXkyMDE2PC90aXRsZT4gICAgPGRlc2M+Q3JlYXRlZCB3aXRoIFNrZXRjaC48L2Rlc2M+ICAgIDxkZWZzPiAgICAgICAgPHBvbHlnb24gaWQ9InBhdGgtMSIgcG9pbnRzPSIwIDAuMTU5IDUwMy44NDEgMC4xNTkgNTAzLjg0MSA1MDMuOTQgMCA1MDMuOTQiPjwvcG9seWdvbj4gICAgPC9kZWZzPiAgICA8ZyBpZD0iZ2x5cGgtbG9nb19NYXkyMDE2IiBzdHJva2U9Im5vbmUiIHN0cm9rZS13aWR0aD0iMSIgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj4gICAgICAgIDxnIGlkPSJHcm91cC0zIj4gICAgICAgICAgICA8bWFzayBpZD0ibWFzay0yIiBmaWxsPSJ3aGl0ZSI+ICAgICAgICAgICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI3BhdGgtMSI+PC91c2U+ICAgICAgICAgICAgPC9tYXNrPiAgICAgICAgICAgIDxnIGlkPSJDbGlwLTIiPjwvZz4gICAgICAgICAgICA8cGF0aCBkPSJNMjUxLjkyMSwwLjE1OSBDMTgzLjUwMywwLjE1OSAxNzQuOTI0LDAuNDQ5IDE0OC4wNTQsMS42NzUgQzEyMS4yNCwyLjg5OCAxMDIuOTI3LDcuMTU3IDg2LjkwMywxMy4zODUgQzcwLjMzNywxOS44MjIgNTYuMjg4LDI4LjQzNiA0Mi4yODIsNDIuNDQxIEMyOC4yNzcsNTYuNDQ3IDE5LjY2Myw3MC40OTYgMTMuMjI2LDg3LjA2MiBDNi45OTgsMTAzLjA4NiAyLjczOSwxMjEuMzk5IDEuNTE2LDE0OC4yMTMgQzAuMjksMTc1LjA4MyAwLDE4My42NjIgMCwyNTIuMDggQzAsMzIwLjQ5NyAwLjI5LDMyOS4wNzYgMS41MTYsMzU1Ljk0NiBDMi43MzksMzgyLjc2IDYuOTk4LDQwMS4wNzMgMTMuMjI2LDQxNy4wOTcgQzE5LjY2Myw0MzMuNjYzIDI4LjI3Nyw0NDcuNzEyIDQyLjI4Miw0NjEuNzE4IEM1Ni4yODgsNDc1LjcyMyA3MC4zMzcsNDg0LjMzNyA4Ni45MDMsNDkwLjc3NSBDMTAyLjkyNyw0OTcuMDAyIDEyMS4yNCw1MDEuMjYxIDE0OC4wNTQsNTAyLjQ4NCBDMTc0LjkyNCw1MDMuNzEgMTgzLjUwMyw1MDQgMjUxLjkyMSw1MDQgQzMyMC4zMzgsNTA0IDMyOC45MTcsNTAzLjcxIDM1NS43ODcsNTAyLjQ4NCBDMzgyLjYwMSw1MDEuMjYxIDQwMC45MTQsNDk3LjAwMiA0MTYuOTM4LDQ5MC43NzUgQzQzMy41MDQsNDg0LjMzNyA0NDcuNTUzLDQ3NS43MjMgNDYxLjU1OSw0NjEuNzE4IEM0NzUuNTY0LDQ0Ny43MTIgNDg0LjE3OCw0MzMuNjYzIDQ5MC42MTYsNDE3LjA5NyBDNDk2Ljg0Myw0MDEuMDczIDUwMS4xMDIsMzgyLjc2IDUwMi4zMjUsMzU1Ljk0NiBDNTAzLjU1MSwzMjkuMDc2IDUwMy44NDEsMzIwLjQ5NyA1MDMuODQxLDI1Mi4wOCBDNTAzLjg0MSwxODMuNjYyIDUwMy41NTEsMTc1LjA4MyA1MDIuMzI1LDE0OC4yMTMgQzUwMS4xMDIsMTIxLjM5OSA0OTYuODQzLDEwMy4wODYgNDkwLjYxNiw4Ny4wNjIgQzQ4NC4xNzgsNzAuNDk2IDQ3NS41NjQsNTYuNDQ3IDQ2MS41NTksNDIuNDQxIEM0NDcuNTUzLDI4LjQzNiA0MzMuNTA0LDE5LjgyMiA0MTYuOTM4LDEzLjM4NSBDNDAwLjkxNCw3LjE1NyAzODIuNjAxLDIuODk4IDM1NS43ODcsMS42NzUgQzMyOC45MTcsMC40NDkgMzIwLjMzOCwwLjE1OSAyNTEuOTIxLDAuMTU5IFogTTI1MS45MjEsNDUuNTUgQzMxOS4xODYsNDUuNTUgMzI3LjE1NCw0NS44MDcgMzUzLjcxOCw0Ny4wMTkgQzM3OC4yOCw0OC4xMzkgMzkxLjYxOSw1Mi4yNDMgNDAwLjQ5Niw1NS42OTMgQzQxMi4yNTUsNjAuMjYzIDQyMC42NDcsNjUuNzIyIDQyOS40NjIsNzQuNTM4IEM0MzguMjc4LDgzLjM1MyA0NDMuNzM3LDkxLjc0NSA0NDguMzA3LDEwMy41MDQgQzQ1MS43NTcsMTEyLjM4MSA0NTUuODYxLDEyNS43MiA0NTYuOTgxLDE1MC4yODIgQzQ1OC4xOTMsMTc2Ljg0NiA0NTguNDUsMTg0LjgxNCA0NTguNDUsMjUyLjA4IEM0NTguNDUsMzE5LjM0NSA0NTguMTkzLDMyNy4zMTMgNDU2Ljk4MSwzNTMuODc3IEM0NTUuODYxLDM3OC40MzkgNDUxLjc1NywzOTEuNzc4IDQ0OC4zMDcsNDAwLjY1NSBDNDQzLjczNyw0MTIuNDE0IDQzOC4yNzgsNDIwLjgwNiA0MjkuNDYyLDQyOS42MjEgQzQyMC42NDcsNDM4LjQzNyA0MTIuMjU1LDQ0My44OTYgNDAwLjQ5Niw0NDguNDY2IEMzOTEuNjE5LDQ1MS45MTYgMzc4LjI4LDQ1Ni4wMiAzNTMuNzE4LDQ1Ny4xNCBDMzI3LjE1OCw0NTguMzUyIDMxOS4xOTEsNDU4LjYwOSAyNTEuOTIxLDQ1OC42MDkgQzE4NC42NSw0NTguNjA5IDE3Ni42ODQsNDU4LjM1MiAxNTAuMTIzLDQ1Ny4xNCBDMTI1LjU2MSw0NTYuMDIgMTEyLjIyMiw0NTEuOTE2IDEwMy4zNDUsNDQ4LjQ2NiBDOTEuNTg2LDQ0My44OTYgODMuMTk0LDQzOC40MzcgNzQuMzc5LDQyOS42MjEgQzY1LjU2NCw0MjAuODA2IDYwLjEwNCw0MTIuNDE0IDU1LjUzNCw0MDAuNjU1IEM1Mi4wODQsMzkxLjc3OCA0Ny45OCwzNzguNDM5IDQ2Ljg2LDM1My44NzcgQzQ1LjY0OCwzMjcuMzEzIDQ1LjM5MSwzMTkuMzQ1IDQ1LjM5MSwyNTIuMDggQzQ1LjM5MSwxODQuODE0IDQ1LjY0OCwxNzYuODQ2IDQ2Ljg2LDE1MC4yODIgQzQ3Ljk4LDEyNS43MiA1Mi4wODQsMTEyLjM4MSA1NS41MzQsMTAzLjUwNCBDNjAuMTA0LDkxLjc0NSA2NS41NjMsODMuMzUzIDc0LjM3OSw3NC41MzggQzgzLjE5NCw2NS43MjIgOTEuNTg2LDYwLjI2MyAxMDMuMzQ1LDU1LjY5MyBDMTEyLjIyMiw1Mi4yNDMgMTI1LjU2MSw0OC4xMzkgMTUwLjEyMyw0Ny4wMTkgQzE3Ni42ODcsNDUuODA3IDE4NC42NTUsNDUuNTUgMjUxLjkyMSw0NS41NSBaIiBpZD0iRmlsbC0xIiBmaWxsPSIjRkZGRkZGIiBtYXNrPSJ1cmwoI21hc2stMikiPjwvcGF0aD4gICAgICAgIDwvZz4gICAgICAgIDxwYXRoIGQ9Ik0yNTEuOTIxLDMzNi4wNTMgQzIwNS41NDMsMzM2LjA1MyAxNjcuOTQ3LDI5OC40NTcgMTY3Ljk0NywyNTIuMDggQzE2Ny45NDcsMjA1LjcwMiAyMDUuNTQzLDE2OC4xMDYgMjUxLjkyMSwxNjguMTA2IEMyOTguMjk4LDE2OC4xMDYgMzM1Ljg5NCwyMDUuNzAyIDMzNS44OTQsMjUyLjA4IEMzMzUuODk0LDI5OC40NTcgMjk4LjI5OCwzMzYuMDUzIDI1MS45MjEsMzM2LjA1MyBaIE0yNTEuOTIxLDEyMi43MTUgQzE4MC40NzQsMTIyLjcxNSAxMjIuNTU2LDE4MC42MzMgMTIyLjU1NiwyNTIuMDggQzEyMi41NTYsMzIzLjUyNiAxODAuNDc0LDM4MS40NDQgMjUxLjkyMSwzODEuNDQ0IEMzMjMuMzY3LDM4MS40NDQgMzgxLjI4NSwzMjMuNTI2IDM4MS4yODUsMjUyLjA4IEMzODEuMjg1LDE4MC42MzMgMzIzLjM2NywxMjIuNzE1IDI1MS45MjEsMTIyLjcxNSBaIiBpZD0iRmlsbC00IiBmaWxsPSIjRkZGRkZGIj48L3BhdGg+ICAgICAgICA8cGF0aCBkPSJNNDE2LjYyNywxMTcuNjA0IEM0MTYuNjI3LDEzNC4zIDQwMy4wOTIsMTQ3LjgzNCAzODYuMzk2LDE0Ny44MzQgQzM2OS43MDEsMTQ3LjgzNCAzNTYuMTY2LDEzNC4zIDM1Ni4xNjYsMTE3LjYwNCBDMzU2LjE2NiwxMDAuOTA4IDM2OS43MDEsODcuMzczIDM4Ni4zOTYsODcuMzczIEM0MDMuMDkyLDg3LjM3MyA0MTYuNjI3LDEwMC45MDggNDE2LjYyNywxMTcuNjA0IiBpZD0iRmlsbC01IiBmaWxsPSIjRkZGRkZGIj48L3BhdGg+ICAgIDwvZz48L3N2Zz4="},228:t=>{t.exports="data:image/svg+xml;utf8,<svg width=%27120%27 height=%2712%27 xmlns=%27http://www.w3.org/2000/svg%27 ><text style=%27paint-order:stroke fill; clip-path: inset%28-3px%29%27 stroke=%27%23EAEAEA%27 stroke-width=%2713%27 dominant-baseline=%27middle%27 fill=%27black%27 x=%273%27 y=%277%27 font-size=%279px%27 font-family=%27Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace%27>DIV</text></svg>"},242:t=>{t.exports="data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIwIDAgMjAgMjAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZmlsbD0iI2ZmZiIgZD0ibTExLjA3NyAxNSAuOTkxLTEuNDE2YS43NS43NSAwIDEgMSAxLjIyOS44NmwtMS4xNDggMS42NGEuNzQ4Ljc0OCAwIDAgMS0uMjE3LjIwNiA1LjI1MSA1LjI1MSAwIDAgMS04LjUwMy01Ljk1NS43NDEuNzQxIDAgMCAxIC4xMi0uMjc0bDEuMTQ3LTEuNjM5YS43NS43NSAwIDEgMSAxLjIyOC44Nkw0LjkzMyAxMC43bC4wMDYuMDAzYTMuNzUgMy43NSAwIDAgMCA2LjEzMiA0LjI5NGwuMDA2LjAwNHptNS40OTQtNS4zMzVhLjc0OC43NDggMCAwIDEtLjEyLjI3NGwtMS4xNDcgMS42MzlhLjc1Ljc1IDAgMSAxLTEuMjI4LS44NmwuODYtMS4yM2EzLjc1IDMuNzUgMCAwIDAtNi4xNDQtNC4zMDFsLS44NiAxLjIyOWEuNzUuNzUgMCAwIDEtMS4yMjktLjg2bDEuMTQ4LTEuNjRhLjc0OC43NDggMCAwIDEgLjIxNy0uMjA2IDUuMjUxIDUuMjUxIDAgMCAxIDguNTAzIDUuOTU1em0tNC41NjMtMi41MzJhLjc1Ljc1IDAgMCAxIC4xODQgMS4wNDVsLTMuMTU1IDQuNTA1YS43NS43NSAwIDEgMS0xLjIyOS0uODZsMy4xNTUtNC41MDZhLjc1Ljc1IDAgMCAxIDEuMDQ1LS4xODR6Ii8+PC9zdmc+"},248:t=>{t.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz48c3ZnIHdpZHRoPSIxMDI0cHgiIGhlaWdodD0iMTAyNHB4IiB2aWV3Qm94PSIwIDAgMTAyNCAxMDI0IiB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPiAgICAgICAgPHRpdGxlPkZpbGwgMTwvdGl0bGU+ICAgIDxkZXNjPkNyZWF0ZWQgd2l0aCBTa2V0Y2guPC9kZXNjPiAgICA8ZGVmcz48L2RlZnM+ICAgIDxnIGlkPSJQYWdlLTEiIHN0cm9rZT0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIxIiBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPiAgICAgICAgPGcgaWQ9ImZMb2dvX1doaXRlIiBmaWxsPSIjRkZGRkZFIj4gICAgICAgICAgICA8cGF0aCBkPSJNOTY3LjQ4NCwwIEw1Ni41MTcsMCBDMjUuMzA0LDAgMCwyNS4zMDQgMCw1Ni41MTcgTDAsOTY3LjQ4MyBDMCw5OTguNjk0IDI1LjI5NywxMDI0IDU2LjUyMiwxMDI0IEw1NDcsMTAyNCBMNTQ3LDYyOCBMNDE0LDYyOCBMNDE0LDQ3MyBMNTQ3LDQ3MyBMNTQ3LDM1OS4wMjkgQzU0NywyMjYuNzY3IDYyNy43NzMsMTU0Ljc0NyA3NDUuNzU2LDE1NC43NDcgQzgwMi4yNjksMTU0Ljc0NyA4NTAuODQyLDE1OC45NTUgODY1LDE2MC44MzYgTDg2NSwyOTkgTDc4My4zODQsMjk5LjAzNyBDNzE5LjM5MSwyOTkuMDM3IDcwNywzMjkuNTI5IDcwNywzNzQuMjczIEw3MDcsNDczIEw4NjAuNDg3LDQ3MyBMODQwLjUwMSw2MjggTDcwNyw2MjggTDcwNywxMDI0IEw5NjcuNDg0LDEwMjQgQzk5OC42OTcsMTAyNCAxMDI0LDk5OC42OTcgMTAyNCw5NjcuNDg0IEwxMDI0LDU2LjUxNSBDMTAyNCwyNS4zMDMgOTk4LjY5NywwIDk2Ny40ODQsMCIgaWQ9IkZpbGwtMSI+PC9wYXRoPiAgICAgICAgPC9nPiAgICA8L2c+PC9zdmc+"},256:t=>{t.exports="data:image/svg+xml;utf8,<svg width=%27120%27 height=%2712%27 xmlns=%27http://www.w3.org/2000/svg%27 ><text style=%27paint-order:stroke fill; clip-path: inset%28-3px%29%27 stroke=%27%23EAEAEA%27 stroke-width=%2713%27 dominant-baseline=%27middle%27 fill=%27black%27 x=%273%27 y=%277%27 font-size=%279px%27 font-family=%27Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace%27>H5</text></svg>"},282:t=>{t.exports="data:image/svg+xml;utf8,<svg width=%27120%27 height=%2712%27 xmlns=%27http://www.w3.org/2000/svg%27 ><text style=%27paint-order:stroke fill; clip-path: inset%28-3px%29%27 stroke=%27%23EAEAEA%27 stroke-width=%2713%27 dominant-baseline=%27middle%27 fill=%27black%27 x=%273%27 y=%277%27 font-size=%279px%27 font-family=%27Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace%27>NAV</text></svg>"},287:(t,e)=>{var n=Symbol.for("react.element"),i=Symbol.for("react.portal"),o=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),g=Symbol.iterator,m={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},p=Object.assign,f={};function b(t,e,n){this.props=t,this.context=e,this.refs=f,this.updater=n||m}function k(){}function w(t,e,n){this.props=t,this.context=e,this.refs=f,this.updater=n||m}b.prototype.isReactComponent={},b.prototype.setState=function(t,e){if("object"!=typeof t&&"function"!=typeof t&&null!=t)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")},b.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")},k.prototype=b.prototype;var _=w.prototype=new k;_.constructor=w,p(_,b.prototype),_.isPureReactComponent=!0;var v=Array.isArray,y=Object.prototype.hasOwnProperty,C={current:null},x={key:!0,ref:!0,__self:!0,__source:!0};function A(t,e,i){var o,r={},s=null,a=null;if(null!=e)for(o in void 0!==e.ref&&(a=e.ref),void 0!==e.key&&(s=""+e.key),e)y.call(e,o)&&!x.hasOwnProperty(o)&&(r[o]=e[o]);var l=arguments.length-2;if(1===l)r.children=i;else if(1<l){for(var c=Array(l),d=0;d<l;d++)c[d]=arguments[d+2];r.children=c}if(t&&t.defaultProps)for(o in l=t.defaultProps)void 0===r[o]&&(r[o]=l[o]);return{$$typeof:n,type:t,key:s,ref:a,props:r,_owner:C.current}}function E(t){return"object"==typeof t&&null!==t&&t.$$typeof===n}var S=/\/+/g;function T(t,e){return"object"==typeof t&&null!==t&&null!=t.key?function(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(t){return e[t]})}(""+t.key):e.toString(36)}function I(t,e,o,r,s){var a=typeof t;"undefined"!==a&&"boolean"!==a||(t=null);var l=!1;if(null===t)l=!0;else switch(a){case"string":case"number":l=!0;break;case"object":switch(t.$$typeof){case n:case i:l=!0}}if(l)return s=s(l=t),t=""===r?"."+T(l,0):r,v(s)?(o="",null!=t&&(o=t.replace(S,"$&/")+"/"),I(s,e,o,"",function(t){return t})):null!=s&&(E(s)&&(s=function(t,e){return{$$typeof:n,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}(s,o+(!s.key||l&&l.key===s.key?"":(""+s.key).replace(S,"$&/")+"/")+t)),e.push(s)),1;if(l=0,r=""===r?".":r+":",v(t))for(var c=0;c<t.length;c++){var d=r+T(a=t[c],c);l+=I(a,e,o,d,s)}else if(d=function(t){return null===t||"object"!=typeof t?null:"function"==typeof(t=g&&t[g]||t["@@iterator"])?t:null}(t),"function"==typeof d)for(t=d.call(t),c=0;!(a=t.next()).done;)l+=I(a=a.value,e,o,d=r+T(a,c++),s);else if("object"===a)throw e=String(t),Error("Objects are not valid as a React child (found: "+("[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return l}function P(t,e,n){if(null==t)return t;var i=[],o=0;return I(t,i,"","",function(t){return e.call(n,t,o++)}),i}function M(t){if(-1===t._status){var e=t._result;(e=e()).then(function(e){0!==t._status&&-1!==t._status||(t._status=1,t._result=e)},function(e){0!==t._status&&-1!==t._status||(t._status=2,t._result=e)}),-1===t._status&&(t._status=0,t._result=e)}if(1===t._status)return t._result.default;throw t._result}var N={current:null},L={transition:null},V={ReactCurrentDispatcher:N,ReactCurrentBatchConfig:L,ReactCurrentOwner:C};function z(){throw Error("act(...) is not supported in production builds of React.")}e.Children={map:P,forEach:function(t,e,n){P(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return P(t,function(){e++}),e},toArray:function(t){return P(t,function(t){return t})||[]},only:function(t){if(!E(t))throw Error("React.Children.only expected to receive a single React element child.");return t}},e.Component=b,e.Fragment=o,e.Profiler=s,e.PureComponent=w,e.StrictMode=r,e.Suspense=d,e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=V,e.act=z,e.cloneElement=function(t,e,i){if(null==t)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var o=p({},t.props),r=t.key,s=t.ref,a=t._owner;if(null!=e){if(void 0!==e.ref&&(s=e.ref,a=C.current),void 0!==e.key&&(r=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(c in e)y.call(e,c)&&!x.hasOwnProperty(c)&&(o[c]=void 0===e[c]&&void 0!==l?l[c]:e[c])}var c=arguments.length-2;if(1===c)o.children=i;else if(1<c){l=Array(c);for(var d=0;d<c;d++)l[d]=arguments[d+2];o.children=l}return{$$typeof:n,type:t.type,key:r,ref:s,props:o,_owner:a}},e.createContext=function(t){return(t={$$typeof:l,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:a,_context:t},t.Consumer=t},e.createElement=A,e.createFactory=function(t){var e=A.bind(null,t);return e.type=t,e},e.createRef=function(){return{current:null}},e.forwardRef=function(t){return{$$typeof:c,render:t}},e.isValidElement=E,e.lazy=function(t){return{$$typeof:h,_payload:{_status:-1,_result:t},_init:M}},e.memo=function(t,e){return{$$typeof:u,type:t,compare:void 0===e?null:e}},e.startTransition=function(t){var e=L.transition;L.transition={};try{t()}finally{L.transition=e}},e.unstable_act=z,e.useCallback=function(t,e){return N.current.useCallback(t,e)},e.useContext=function(t){return N.current.useContext(t)},e.useDebugValue=function(){},e.useDeferredValue=function(t){return N.current.useDeferredValue(t)},e.useEffect=function(t,e){return N.current.useEffect(t,e)},e.useId=function(){return N.current.useId()},e.useImperativeHandle=function(t,e,n){return N.current.useImperativeHandle(t,e,n)},e.useInsertionEffect=function(t,e){return N.current.useInsertionEffect(t,e)},e.useLayoutEffect=function(t,e){return N.current.useLayoutEffect(t,e)},e.useMemo=function(t,e){return N.current.useMemo(t,e)},e.useReducer=function(t,e,n){return N.current.useReducer(t,e,n)},e.useRef=function(t){return N.current.useRef(t)},e.useState=function(t){return N.current.useState(t)},e.useSyncExternalStore=function(t,e,n){return N.current.useSyncExternalStore(t,e,n)},e.useTransition=function(){return N.current.useTransition()},e.version="18.3.1"},291:t=>{t.exports="data:image/svg+xml;utf8,<svg width=%27120%27 height=%2712%27 xmlns=%27http://www.w3.org/2000/svg%27 ><text style=%27paint-order:stroke fill; clip-path: inset%28-3px%29%27 stroke=%27%23EAEAEA%27 stroke-width=%2713%27 dominant-baseline=%27middle%27 fill=%27black%27 x=%273%27 y=%277%27 font-size=%279px%27 font-family=%27Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace%27>P</text></svg>"},309:t=>{t.exports="data:image/svg+xml;utf8,<svg width=%27120%27 height=%2712%27 xmlns=%27http://www.w3.org/2000/svg%27 ><text style=%27paint-order:stroke fill; clip-path: inset%28-3px%29%27 stroke=%27%23EAEAEA%27 stroke-width=%2713%27 dominant-baseline=%27middle%27 fill=%27black%27 x=%273%27 y=%277%27 font-size=%279px%27 font-family=%27Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace%27>DETAILS</text></svg>"},310:t=>{t.exports="data:image/svg+xml;utf8,<svg width=%27120%27 height=%2712%27 xmlns=%27http://www.w3.org/2000/svg%27 ><text style=%27paint-order:stroke fill; clip-path: inset%28-3px%29%27 stroke=%27%23EAEAEA%27 stroke-width=%2713%27 dominant-baseline=%27middle%27 fill=%27black%27 x=%273%27 y=%277%27 font-size=%279px%27 font-family=%27Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace%27>H3</text></svg>"},314:t=>{t.exports=function(t){var e=[];return e.toString=function(){return this.map(function(e){var n="",i=void 0!==e[5];return e[4]&&(n+="@supports (".concat(e[4],") {")),e[2]&&(n+="@media ".concat(e[2]," {")),i&&(n+="@layer".concat(e[5].length>0?" ".concat(e[5]):""," {")),n+=t(e),i&&(n+="}"),e[2]&&(n+="}"),e[4]&&(n+="}"),n}).join("")},e.i=function(t,n,i,o,r){"string"==typeof t&&(t=[[null,t,void 0]]);var s={};if(i)for(var a=0;a<this.length;a++){var l=this[a][0];null!=l&&(s[l]=!0)}for(var c=0;c<t.length;c++){var d=[].concat(t[c]);i&&s[d[0]]||(void 0!==r&&(void 0===d[5]||(d[1]="@layer".concat(d[5].length>0?" ".concat(d[5]):""," {").concat(d[1],"}")),d[5]=r),n&&(d[2]?(d[1]="@media ".concat(d[2]," {").concat(d[1],"}"),d[2]=n):d[2]=n),o&&(d[4]?(d[1]="@supports (".concat(d[4],") {").concat(d[1],"}"),d[4]=o):d[4]="".concat(o)),e.push(d))}},e}},371:(t,e,n)=>{n.d(e,{A:()=>lt});var i=n(601),o=n.n(i),r=n(314),s=n.n(r),a=n(417),l=n.n(a),c=new URL(n(242),n.b),d=new URL(n(691),n.b),u=new URL(n(248),n.b),h=new URL(n(225),n.b),g=new URL(n(911),n.b),m=new URL(n(83),n.b),p=new URL(n(923),n.b),f=new URL(n(436),n.b),b=new URL(n(309),n.b),k=new URL(n(228),n.b),w=new URL(n(84),n.b),_=new URL(n(524),n.b),v=new URL(n(757),n.b),y=new URL(n(310),n.b),C=new URL(n(599),n.b),x=new URL(n(256),n.b),A=new URL(n(921),n.b),E=new URL(n(74),n.b),S=new URL(n(490),n.b),T=new URL(n(282),n.b),I=new URL(n(206),n.b),P=new URL(n(772),n.b),M=new URL(n(510),n.b),N=new URL(n(291),n.b),L=new URL(n(656),n.b),V=new URL(n(767),n.b),z=s()(o()),O=l()(c),R=l()(d),D=l()(u),B=l()(h),F=l()(g),j=l()(m),H=l()(p),U=l()(f),$=l()(b),W=l()(k),q=l()(w),K=l()(_),G=l()(v),Q=l()(y),Y=l()(C),J=l()(x),Z=l()(A),X=l()(E),tt=l()(S),et=l()(T),nt=l()(I),it=l()(P),ot=l()(M),rt=l()(N),st=l()(L),at=l()(V);z.push([t.id,`/**\n * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n\n/* Reset */\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n:root {\n\t--ck-color-base-foreground: \t\t\t\t\t\t\t\thsl(0, 0%, 98%);\n\t--ck-color-base-background: \t\t\t\t\t\t\t\thsl(0, 0%, 100%);\n\t--ck-color-base-border: \t\t\t\t\t\t\t\t\thsl(220, 6%, 81%);\n\t--ck-color-base-action: \t\t\t\t\t\t\t\t\thsl(104, 50.2%, 42.5%);\n\t--ck-color-base-focus: \t\t\t\t\t\t\t\t\t\thsl(209, 92%, 70%);\n\t--ck-color-base-text: \t\t\t\t\t\t\t\t\t\thsl(0, 0%, 20%);\n\t--ck-color-base-active: \t\t\t\t\t\t\t\t\thsl(218.1, 100%, 58%);\n\t--ck-color-base-active-focus:\t\t\t\t\t\t\t\thsl(218.2, 100%, 52.5%);\n\t--ck-color-base-error:\t\t\t\t\t\t\t\t\t\thsl(15, 100%, 43%);\n\n\t/* -- Generic colors ------------------------------------------------------------------------ */\n\n\t--ck-color-focus-border-coordinates: \t\t\t\t\t\t218, 81.8%, 56.9%;\n\t--ck-color-focus-border: \t\t\t\t\t\t\t\t\thsl(var(--ck-color-focus-border-coordinates));\n\t--ck-color-focus-outer-shadow:\t\t\t\t\t\t\t\thsl(212.4, 89.3%, 89%);\n\t--ck-color-focus-disabled-shadow:\t\t\t\t\t\t\thsla(209, 90%, 72%,.3);\n\t--ck-color-focus-error-shadow:\t\t\t\t\t\t\t\thsla(9,100%,56%,.3);\n\t--ck-color-text: \t\t\t\t\t\t\t\t\t\t\tvar(--ck-color-base-text);\n\t--ck-color-shadow-drop: \t\t\t\t\t\t\t\t\thsla(0, 0%, 0%, 0.15);\n\t--ck-color-shadow-drop-active:\t\t\t\t\t\t\t\thsla(0, 0%, 0%, 0.2);\n\t--ck-color-shadow-inner: \t\t\t\t\t\t\t\t\thsla(0, 0%, 0%, 0.1);\n\n\t/* -- Buttons ------------------------------------------------------------------------------- */\n\n\t--ck-color-button-default-background: \t\t\t\t\t\ttransparent;\n\t--ck-color-button-default-hover-background: \t\t\t\thsl(0, 0%, 94.1%);\n\t--ck-color-button-default-active-background: \t\t\t\thsl(0, 0%, 94.1%);\n\t--ck-color-button-default-disabled-background: \t\t\t\ttransparent;\n\n\t--ck-color-button-on-background: \t\t\t\t\t\t\thsl(212, 100%, 97.1%);\n\t--ck-color-button-on-hover-background: \t\t\t\t\t\thsl(211.7, 100%, 92.9%);\n\t--ck-color-button-on-active-background: \t\t\t\t\thsl(211.7, 100%, 92.9%);\n\t--ck-color-button-on-disabled-background: \t\t\t\t\thsl(211, 15%, 95%);\n\t--ck-color-button-on-color:\t\t\t\t\t\t\t\t\thsl(218.1, 100%, 58%);\n\n\n\t--ck-color-button-action-background: \t\t\t\t\t\tvar(--ck-color-base-action);\n\t--ck-color-button-action-hover-background: \t\t\t\t\thsl(104, 53.2%, 40.2%);\n\t--ck-color-button-action-active-background: \t\t\t\thsl(104, 53.2%, 40.2%);\n\t--ck-color-button-action-disabled-background: \t\t\t\thsl(104, 44%, 58%);\n\t--ck-color-button-action-text: \t\t\t\t\t\t\t\tvar(--ck-color-base-background);\n\n\t--ck-color-button-save: \t\t\t\t\t\t\t\t\thsl(120, 100%, 27%);\n\t--ck-color-button-cancel: \t\t\t\t\t\t\t\t\thsl(15, 100%, 43%);\n\n\t--ck-color-switch-button-off-background:\t\t\t\t\thsl(0, 0%, 57.6%);\n\t--ck-color-switch-button-off-hover-background:\t\t\t\thsl(0, 0%, 49%);\n\t--ck-color-switch-button-on-background:\t\t\t\t\t\tvar(--ck-color-button-action-background);\n\t--ck-color-switch-button-on-hover-background:\t\t\t\thsl(104, 53.2%, 40.2%);\n\t--ck-color-switch-button-inner-background:\t\t\t\t\tvar(--ck-color-base-background);\n\t--ck-color-switch-button-inner-shadow:\t\t\t\t\t\thsla(0, 0%, 0%, 0.1);\n\n\t/* -- Dropdown ------------------------------------------------------------------------------ */\n\n\t--ck-color-dropdown-panel-background: \t\t\t\t\t\tvar(--ck-color-base-background);\n\t--ck-color-dropdown-panel-border: \t\t\t\t\t\t\tvar(--ck-color-base-border);\n\n\t/* -- Dialog -------------------------------------------------------------------------------- */\n\n\t--ck-color-dialog-background: \t\t\t\t\t\t\t\tvar(--ck-custom-background);\n\t--ck-color-dialog-form-header-border: \t\t\t\t\t\tvar(--ck-custom-border);\n\n\t/* -- Input --------------------------------------------------------------------------------- */\n\n\t--ck-color-input-background: \t\t\t\t\t\t\t\tvar(--ck-color-base-background);\n\t--ck-color-input-border: \t\t\t\t\t\t\t\t\tvar(--ck-color-base-border);\n\t--ck-color-input-error-border:\t\t\t\t\t\t\t\tvar(--ck-color-base-error);\n\t--ck-color-input-text: \t\t\t\t\t\t\t\t\t\tvar(--ck-color-base-text);\n\t--ck-color-input-disabled-background: \t\t\t\t\t\thsl(0, 0%, 95%);\n\t--ck-color-input-disabled-border: \t\t\t\t\t\t\tvar(--ck-color-base-border);\n\t--ck-color-input-disabled-text: \t\t\t\t\t\t\thsl(0, 0%, 46%);\n\n\t/* -- List ---------------------------------------------------------------------------------- */\n\n\t--ck-color-list-background: \t\t\t\t\t\t\t\tvar(--ck-color-base-background);\n\t--ck-color-list-button-hover-background: \t\t\t\t\tvar(--ck-color-button-default-hover-background);\n\t--ck-color-list-button-on-background: \t\t\t\t\t\tvar(--ck-color-button-on-color);\n\t--ck-color-list-button-on-background-focus: \t\t\t\tvar(--ck-color-button-on-color);\n\t--ck-color-list-button-on-text:\t\t\t\t\t\t\t\tvar(--ck-color-base-background);\n\n\t/* -- Panel --------------------------------------------------------------------------------- */\n\n\t--ck-color-panel-background: \t\t\t\t\t\t\t\tvar(--ck-color-base-background);\n\t--ck-color-panel-border: \t\t\t\t\t\t\t\t\tvar(--ck-color-base-border);\n\n\t/* -- Toolbar ------------------------------------------------------------------------------- */\n\n\t--ck-color-toolbar-background: \t\t\t\t\t\t\t\tvar(--ck-color-base-background);\n\t--ck-color-toolbar-border: \t\t\t\t\t\t\t\t\tvar(--ck-color-base-border);\n\n\t/* -- Tooltip ------------------------------------------------------------------------------- */\n\n\t--ck-color-tooltip-background: \t\t\t\t\t\t\t\tvar(--ck-color-base-text);\n\t--ck-color-tooltip-text: \t\t\t\t\t\t\t\t\tvar(--ck-color-base-background);\n\n\t/* -- Engine -------------------------------------------------------------------------------- */\n\n\t--ck-color-engine-placeholder-text: \t\t\t\t\t\thsl(0, 0%, 44%);\n\n\t/* -- Upload -------------------------------------------------------------------------------- */\n\n\t--ck-color-upload-bar-background:\t\t \t\t\t\t\thsl(209, 92%, 70%);\n\n\t/* -- Link -------------------------------------------------------------------------------- */\n\n\t--ck-color-link-default:\t\t\t\t\t\t\t\t\thsl(240, 100%, 47%);\n\t--ck-color-link-selected-background:\t\t\t\t\t\thsla(201, 100%, 56%, 0.1);\n\t--ck-color-link-fake-selection:\t\t\t\t\t\t\t\thsla(201, 100%, 56%, 0.3);\n\n\t/* -- Search result highlight ---------------------------------------------------------------- */\n\n\t--ck-color-highlight-background:\t\t\t\t\t\t\thsl(60, 100%, 50%);\n\n\t/* -- Generic colors ------------------------------------------------------------------------- */\n\n\t--ck-color-light-red:\t\t\t\t\t\t\t\t\t\thsl(0, 100%, 90%);\n}\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n:root {\n\t/**\n\t * An opacity value of disabled UI item.\n\t */\n\t--ck-disabled-opacity: .5;\n}\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n:root {\n\t/**\n\t * The geometry of the of focused element's outer shadow.\n\t */\n\t--ck-focus-outer-shadow-geometry: 0 0 0 3px;\n\n\t/**\n\t * A visual style of focused element's outer shadow.\n\t */\n\t--ck-focus-outer-shadow: var(--ck-focus-outer-shadow-geometry) var(--ck-color-focus-outer-shadow);\n\n\t/**\n\t * A visual style of focused element's outer shadow (when disabled).\n\t */\n\t--ck-focus-disabled-outer-shadow: var(--ck-focus-outer-shadow-geometry) var(--ck-color-focus-disabled-shadow);\n\n\t/**\n\t * A visual style of focused element's outer shadow (when has errors).\n\t */\n\t--ck-focus-error-outer-shadow: var(--ck-focus-outer-shadow-geometry) var(--ck-color-focus-error-shadow);\n\n\t/**\n\t * A visual style of focused element's border or outline.\n\t */\n\t--ck-focus-ring: 1px solid var(--ck-color-focus-border);\n}\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n:root {\n\t--ck-font-size-base: 13px;\n\t--ck-line-height-base: 1.84615;\n\t--ck-font-face: Helvetica, Arial, Tahoma, Verdana, Sans-Serif;\n\n\t--ck-font-size-tiny: 0.7em;\n\t--ck-font-size-small: 0.75em;\n\t--ck-font-size-normal: 1em;\n\t--ck-font-size-big: 1.4em;\n\t--ck-font-size-large: 1.8em;\n}\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n:root {\n\t/* This is super-important. This is **manually** adjusted so a button without an icon\n\tis never smaller than a button with icon, additionally making sure that text-less buttons\n\tare perfect squares. The value is also shared by other components which should stay "in-line"\n\twith buttons. */\n\t--ck-ui-component-min-height: 2.3em;\n}\n/**\n * Resets an element, ignoring its children.\n */\n.ck.ck-reset,\n.ck.ck-reset_all,\n.ck-reset_all *:not(.ck-reset_all-excluded *) {\n\tbox-sizing: border-box;\n\twidth: auto;\n\theight: auto;\n\tposition: static;\n\n\t/* Do not include inheritable rules here. */\n\tmargin: 0;\n\tpadding: 0;\n\tborder: 0;\n\tbackground: transparent;\n\ttext-decoration: none;\n\tvertical-align: middle;\n\ttransition: none;\n\n\t/* https://github.com/ckeditor/ckeditor5-theme-lark/issues/105 */\n\tword-wrap: break-word;\n}\n/**\n * Resets an element AND its children.\n */\n.ck.ck-reset_all,\n.ck-reset_all *:not(.ck-reset_all-excluded *) {\n\t/* These are rule inherited by all children elements. */\n\tborder-collapse: collapse;\n\tfont: normal normal normal var(--ck-font-size-base)/var(--ck-line-height-base) var(--ck-font-face);\n\tcolor: var(--ck-color-text);\n\ttext-align: left;\n\twhite-space: nowrap;\n\tcursor: auto;\n\tfloat: none;\n}\n.ck-reset_all .ck-rtl *:not(.ck-reset_all-excluded *) {\n\t\ttext-align: right;\n\t}\n.ck-reset_all iframe:not(.ck-reset_all-excluded *) {\n\t\t/* For IE */\n\t\tvertical-align: inherit;\n\t}\n.ck-reset_all textarea:not(.ck-reset_all-excluded *) {\n\t\twhite-space: pre-wrap;\n\t}\n.ck-reset_all textarea:not(.ck-reset_all-excluded *),\n\t.ck-reset_all input[type="text"]:not(.ck-reset_all-excluded *),\n\t.ck-reset_all input[type="password"]:not(.ck-reset_all-excluded *) {\n\t\tcursor: text;\n\t}\n.ck-reset_all textarea[disabled]:not(.ck-reset_all-excluded *),\n\t.ck-reset_all input[type="text"][disabled]:not(.ck-reset_all-excluded *),\n\t.ck-reset_all input[type="password"][disabled]:not(.ck-reset_all-excluded *) {\n\t\tcursor: default;\n\t}\n.ck-reset_all fieldset:not(.ck-reset_all-excluded *) {\n\t\tpadding: 10px;\n\t\tborder: 2px groove hsl(255, 7%, 88%);\n\t}\n.ck-reset_all button:not(.ck-reset_all-excluded *)::-moz-focus-inner {\n\t\t/* See http://stackoverflow.com/questions/5517744/remove-extra-button-spacing-padding-in-firefox */\n\t\tpadding: 0;\n\t\tborder: 0\n\t}\n/**\n * Default UI rules for RTL languages.\n */\n.ck[dir="rtl"],\n.ck[dir="rtl"] .ck {\n\ttext-align: right;\n}\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n/**\n * Default border-radius value.\n */\n:root{\n\t--ck-border-radius: 2px;\n}\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n:root {\n\t/**\n\t * A visual style of element's inner shadow (i.e. input).\n\t */\n\t--ck-inner-shadow: 2px 2px 3px var(--ck-color-shadow-inner) inset;\n\n\t/**\n\t * A visual style of element's drop shadow (i.e. panel).\n\t */\n\t--ck-drop-shadow: 0 1px 2px 1px var(--ck-color-shadow-drop);\n\n\t/**\n\t * A visual style of element's active shadow (i.e. comment or suggestion).\n\t */\n\t--ck-drop-shadow-active: 0 3px 6px 1px var(--ck-color-shadow-drop-active);\n}\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n:root {\n\t--ck-spacing-unit: \t\t\t\t\t\t0.6em;\n\t--ck-spacing-large: \t\t\t\t\tcalc(var(--ck-spacing-unit) * 1.5);\n\t--ck-spacing-standard: \t\t\t\t\tvar(--ck-spacing-unit);\n\t--ck-spacing-medium: \t\t\t\t\tcalc(var(--ck-spacing-unit) * 0.8);\n\t--ck-spacing-small: \t\t\t\t\tcalc(var(--ck-spacing-unit) * 0.5);\n\t--ck-spacing-tiny: \t\t\t\t\t\tcalc(var(--ck-spacing-unit) * 0.3);\n\t--ck-spacing-extra-tiny: \t\t\t\tcalc(var(--ck-spacing-unit) * 0.16);\n}\n\n/* Components */\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n/**\n * Implements rounded corner interface for .ck-rounded-corners class.\n *\n * @see $ck-border-radius\n */\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n/**\n * A helper to combine multiple shadows.\n */\n/**\n * Gives an element a drop shadow so it looks like a floating panel.\n */\n.ck.ck-autocomplete > .ck-search__results {\n\t\tborder-radius: 0;\n\n\t\tmax-height: 200px;\n\t\toverflow-y: auto;\n\t\tbackground: var(--ck-color-base-background);\n\t\tborder: 1px solid var(--ck-color-dropdown-panel-border);\n\t\tmin-width: auto;\n\t}\n.ck-rounded-corners .ck.ck-autocomplete > .ck-search__results,\n\t.ck.ck-autocomplete > .ck-search__results.ck-rounded-corners {\n\t\tborder-radius: var(--ck-border-radius);\n\t}\n.ck.ck-autocomplete > .ck-search__results {\n\t\tbox-shadow: var(--ck-drop-shadow), 0 0;\n\t}\n.ck.ck-autocomplete > .ck-search__results.ck-search__results_n {\n\t\t\tborder-bottom-left-radius: 0;\n\t\t\tborder-bottom-right-radius: 0;\n\n\t\t\t/* Prevent duplicated borders between the input and the results pane. */\n\t\t\tmargin-bottom: -1px;\n\t\t}\n.ck.ck-autocomplete > .ck-search__results.ck-search__results_s {\n\t\t\tborder-top-left-radius: 0;\n\t\t\tborder-top-right-radius: 0;\n\n\t\t\t/* Prevent duplicated borders between the input and the results pane. */\n\t\t\tmargin-top: -1px;\n\t\t}\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n/**\n * A visual style of focused element's border.\n */\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n/**\n * A helper to combine multiple shadows.\n */\n/**\n * Gives an element a drop shadow so it looks like a floating panel.\n */\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n/**\n * A class which indicates that an element holding it is disabled.\n */\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n/**\n * Implements rounded corner interface for .ck-rounded-corners class.\n *\n * @see $ck-border-radius\n */\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n/**\n * Implements a button of given background color.\n *\n * @param {String} $background - Background color of the button.\n * @param {String} $border - Border color of the button.\n */\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n.ck.ck-button,\na.ck.ck-button {\n\tbackground: var(--ck-color-button-default-background);\n\tborder-radius: 0;\n\n\twhite-space: nowrap;\n\tcursor: default;\n\tvertical-align: middle;\n\tpadding: var(--ck-spacing-tiny);\n\ttext-align: center;\n\n\t/* A very important piece of styling. Go to variable declaration to learn more. */\n\tmin-width: var(--ck-ui-component-min-height);\n\tmin-height: var(--ck-ui-component-min-height);\n\n\t/* Normalize the height of the line. Removing this will break consistent height\n\tamong text and text-less buttons (with icons). */\n\tline-height: 1;\n\n\t/* Enable font size inheritance, which allows fluid UI scaling. */\n\tfont-size: inherit;\n\n\t/* Avoid flickering when the foucs border shows up. */\n\tborder: 1px solid transparent;\n\n\t/* Apply some smooth transition to the box-shadow and border. */\n\ttransition: box-shadow .2s ease-in-out, border .2s ease-in-out;\n\n\t/* https://github.com/ckeditor/ckeditor5-theme-lark/issues/189 */\n\t-webkit-appearance: none;\n}\n.ck.ck-button:not(.ck-disabled):hover, a.ck.ck-button:not(.ck-disabled):hover {\n\t\t\tbackground: var(--ck-color-button-default-hover-background);\n\t\t}\n.ck.ck-button:not(.ck-disabled):active, a.ck.ck-button:not(.ck-disabled):active {\n\t\t\tbackground: var(--ck-color-button-default-active-background);\n\t\t}\n/* https://github.com/ckeditor/ckeditor5-theme-lark/issues/98 */\n.ck.ck-button.ck-disabled, a.ck.ck-button.ck-disabled {\n\t\tbackground: var(--ck-color-button-default-disabled-background);\n\t}\n.ck-rounded-corners .ck.ck-button,\n\t.ck-rounded-corners a.ck.ck-button,\n\t.ck.ck-button.ck-rounded-corners,\n\ta.ck.ck-button.ck-rounded-corners {\n\t\tborder-radius: var(--ck-border-radius);\n\t}\n@media (prefers-reduced-motion: reduce) {\n.ck.ck-button,\na.ck.ck-button {\n\t\ttransition: none;\n}\n\t}\n.ck.ck-button:active,\n\ta.ck.ck-button:active,\n\t.ck.ck-button:focus,\n\ta.ck.ck-button:focus {\n\t\t/* Disable native outline. */\n\t\toutline: none;\n\t\tborder: var(--ck-focus-ring);\n\t\tbox-shadow: var(--ck-focus-outer-shadow), 0 0;\n\t}\n/* Allow icon coloring using the text "color" property. */\n.ck.ck-button .ck-button__icon use,\n\t\ta.ck.ck-button .ck-button__icon use,\n\t\t.ck.ck-button .ck-button__icon use *,\n\t\ta.ck.ck-button .ck-button__icon use * {\n\t\t\tcolor: inherit;\n\t\t}\n.ck.ck-button .ck-button__label, a.ck.ck-button .ck-button__label {\n\t\t/* Enable font size inheritance, which allows fluid UI scaling. */\n\t\tfont-size: inherit;\n\t\tfont-weight: inherit;\n\t\tcolor: inherit;\n\t\tcursor: inherit;\n\n\t\t/* Must be consistent with .ck-icon's vertical align. Otherwise, buttons with and\n\t\twithout labels (but with icons) have different sizes in Chrome */\n\t\tvertical-align: middle;\n\t}\n[dir="ltr"] .ck.ck-button .ck-button__label, [dir="ltr"] a.ck.ck-button .ck-button__label {\n\t\t\ttext-align: left;\n\t}\n[dir="rtl"] .ck.ck-button .ck-button__label, [dir="rtl"] a.ck.ck-button .ck-button__label {\n\t\t\ttext-align: right;\n\t}\n.ck.ck-button .ck-button__keystroke, a.ck.ck-button .ck-button__keystroke {\n\t\tcolor: inherit;\n\n\t\topacity: .5;\n\t}\n[dir="ltr"] .ck.ck-button .ck-button__keystroke, [dir="ltr"] a.ck.ck-button .ck-button__keystroke {\n\t\t\tmargin-left: var(--ck-spacing-large);\n\t}\n[dir="rtl"] .ck.ck-button .ck-button__keystroke, [dir="rtl"] a.ck.ck-button .ck-button__keystroke {\n\t\t\tmargin-right: var(--ck-spacing-large);\n\t}\n/* https://github.com/ckeditor/ckeditor5-theme-lark/issues/70 */\n.ck.ck-button.ck-disabled:active,\n\t\ta.ck.ck-button.ck-disabled:active,\n\t\t.ck.ck-button.ck-disabled:focus,\n\t\ta.ck.ck-button.ck-disabled:focus {\n\t\t\t/* The disabled button should have a slightly less visible shadow when focused. */\n\t\t\tbox-shadow: var(--ck-focus-disabled-outer-shadow), 0 0;\n\t\t}\n.ck.ck-button.ck-disabled .ck-button__icon, a.ck.ck-button.ck-disabled .ck-button__icon {\n\t\t\topacity: var(--ck-disabled-opacity);\n\t\t}\n/* https://github.com/ckeditor/ckeditor5-theme-lark/issues/98 */\n.ck.ck-button.ck-disabled .ck-button__label, a.ck.ck-button.ck-disabled .ck-button__label {\n\t\t\topacity: var(--ck-disabled-opacity);\n\t\t}\n.ck.ck-button.ck-disabled .ck-button__keystroke, a.ck.ck-button.ck-disabled .ck-button__keystroke {\n\t\t\topacity: .3;\n\t\t}\n.ck.ck-button.ck-button_with-text, a.ck.ck-button.ck-button_with-text {\n\t\tpadding: var(--ck-spacing-tiny) var(--ck-spacing-standard);\n\n\t\t/* stylelint-disable-next-line no-descending-specificity */\n\t}\n[dir="ltr"] .ck.ck-button.ck-button_with-text .ck-button__icon, [dir="ltr"] a.ck.ck-button.ck-button_with-text .ck-button__icon {\n\t\t\t\tmargin-right: var(--ck-spacing-medium);\n\t}\n[dir="rtl"] .ck.ck-button.ck-button_with-text .ck-button__icon, [dir="rtl"] a.ck.ck-button.ck-button_with-text .ck-button__icon {\n\t\t\t\tmargin-left: var(--ck-spacing-medium);\n\t}\n/* stylelint-disable-next-line no-descending-specificity */\n.ck.ck-button.ck-button_with-keystroke .ck-button__label, a.ck.ck-button.ck-button_with-keystroke .ck-button__label {\n\t\t\tflex-grow: 1;\n\t\t}\n/* A style of the button which is currently on, e.g. its feature is active. */\n.ck.ck-button.ck-on, a.ck.ck-button.ck-on {\n\t\tbackground: var(--ck-color-button-on-background);\n\n\t\tcolor: var(--ck-color-button-on-color);\n\t}\n.ck.ck-button.ck-on:not(.ck-disabled):hover, a.ck.ck-button.ck-on:not(.ck-disabled):hover {\n\t\t\tbackground: var(--ck-color-button-on-hover-background);\n\t\t}\n.ck.ck-button.ck-on:not(.ck-disabled):active, a.ck.ck-button.ck-on:not(.ck-disabled):active {\n\t\t\tbackground: var(--ck-color-button-on-active-background);\n\t\t}\n/* https://github.com/ckeditor/ckeditor5-theme-lark/issues/98 */\n.ck.ck-button.ck-on.ck-disabled, a.ck.ck-button.ck-on.ck-disabled {\n\t\tbackground: var(--ck-color-button-on-disabled-background);\n\t}\n.ck.ck-button.ck-button-save, a.ck.ck-button.ck-button-save {\n\t\tcolor: var(--ck-color-button-save);\n\t}\n.ck.ck-button.ck-button-cancel, a.ck.ck-button.ck-button-cancel {\n\t\tcolor: var(--ck-color-button-cancel);\n\t}\n/* A style of the button which handles the primary action. */\n.ck.ck-button-action,\na.ck.ck-button-action {\n\tbackground: var(--ck-color-button-action-background);\n\n\tcolor: var(--ck-color-button-action-text);\n}\n.ck.ck-button-action:not(.ck-disabled):hover, a.ck.ck-button-action:not(.ck-disabled):hover {\n\t\t\tbackground: var(--ck-color-button-action-hover-background);\n\t\t}\n.ck.ck-button-action:not(.ck-disabled):active, a.ck.ck-button-action:not(.ck-disabled):active {\n\t\t\tbackground: var(--ck-color-button-action-active-background);\n\t\t}\n/* https://github.com/ckeditor/ckeditor5-theme-lark/issues/98 */\n.ck.ck-button-action.ck-disabled, a.ck.ck-button-action.ck-disabled {\n\t\tbackground: var(--ck-color-button-action-disabled-background);\n\t}\n.ck.ck-button-bold,\na.ck.ck-button-bold {\n\tfont-weight: bold;\n}\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n/**\n * Implements rounded corner interface for .ck-rounded-corners class.\n *\n * @see $ck-border-radius\n */\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n/**\n * A class which indicates that an element holding it is disabled.\n */\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n/* Note: To avoid rendering issues (aliasing) but to preserve the responsive nature\nof the component, floating–point numbers have been used which, for the default font size\n(see: --ck-font-size-base), will generate simple integers. */\n:root {\n\t/* 34px at 13px font-size */\n\t--ck-switch-button-toggle-width: 2.6153846154em;\n\t/* 14px at 13px font-size */\n\t--ck-switch-button-toggle-inner-size: calc(1.0769230769em + 1px);\n\t--ck-switch-button-translation: calc(\n\t\tvar(--ck-switch-button-toggle-width) -\n\t\tvar(--ck-switch-button-toggle-inner-size) -\n\t\t2px /* Border */\n\t);\n\t--ck-switch-button-inner-hover-shadow: 0 0 0 5px var(--ck-color-switch-button-inner-shadow);\n}\n/* Unlike a regular button, the switch button text color and background should never change.\n\t * Changing toggle switch (background, outline) is enough to carry the information about the\n\t * state of the entire component (https://github.com/ckeditor/ckeditor5/issues/12519)\n\t */\n.ck.ck-button.ck-switchbutton, .ck.ck-button.ck-switchbutton:hover, .ck.ck-button.ck-switchbutton:focus, .ck.ck-button.ck-switchbutton:active, .ck.ck-button.ck-switchbutton.ck-on:hover, .ck.ck-button.ck-switchbutton.ck-on:focus, .ck.ck-button.ck-switchbutton.ck-on:active {\n\t\tcolor: inherit;\n\t\tbackground: transparent;\n\t}\n[dir="ltr"] .ck.ck-button.ck-switchbutton .ck-button__label {\n\t\t\t/* Separate the label from the switch */\n\t\t\tmargin-right: calc(2 * var(--ck-spacing-large));\n\t}\n[dir="rtl"] .ck.ck-button.ck-switchbutton .ck-button__label {\n\t\t\t/* Separate the label from the switch */\n\t\t\tmargin-left: calc(2 * var(--ck-spacing-large));\n\t}\n.ck.ck-button.ck-switchbutton .ck-button__toggle {\n\t\tborder-radius: 0;\n\n\t\t/* Apply some smooth transition to the box-shadow and border. */\n\t\t/* Gently animate the background color of the toggle switch */\n\t\ttransition: background 400ms ease, box-shadow .2s ease-in-out, outline .2s ease-in-out;\n\t\tborder: 1px solid transparent;\n\t\twidth: var(--ck-switch-button-toggle-width);\n\t\tbackground: var(--ck-color-switch-button-off-background);\n\t}\n.ck-rounded-corners .ck.ck-button.ck-switchbutton .ck-button__toggle,\n\t.ck.ck-button.ck-switchbutton .ck-button__toggle.ck-rounded-corners {\n\t\tborder-radius: var(--ck-border-radius);\n\t}\n[dir="ltr"] .ck.ck-button.ck-switchbutton .ck-button__toggle {\n\t\t\t/* Make sure the toggle is always to the right as far as possible. */\n\t\t\tmargin-left: auto;\n\t}\n[dir="rtl"] .ck.ck-button.ck-switchbutton .ck-button__toggle {\n\t\t\t/* Make sure the toggle is always to the left as far as possible. */\n\t\t\tmargin-right: auto;\n\t}\n.ck.ck-button.ck-switchbutton .ck-button__toggle .ck-button__toggle__inner {\n\t\t\tborder-radius: 0;\n\n\t\t\twidth: var(--ck-switch-button-toggle-inner-size);\n\t\t\theight: var(--ck-switch-button-toggle-inner-size);\n\t\t\tbackground: var(--ck-color-switch-button-inner-background);\n\n\t\t\t/* Gently animate the inner part of the toggle switch */\n\t\t\ttransition: all 300ms ease;\n\t\t}\n.ck-rounded-corners .ck.ck-button.ck-switchbutton .ck-button__toggle .ck-button__toggle__inner,\n\t.ck.ck-button.ck-switchbutton .ck-button__toggle .ck-button__toggle__inner.ck-rounded-corners {\n\t\tborder-radius: var(--ck-border-radius);\n\t\t\t\tborder-radius: calc(.5 * var(--ck-border-radius));\n\t}\n@media (prefers-reduced-motion: reduce) {\n.ck.ck-button.ck-switchbutton .ck-button__toggle .ck-button__toggle__inner {\n\t\t\t\ttransition: none;\n\t\t}\n\t\t\t}\n.ck.ck-button.ck-switchbutton .ck-button__toggle:hover {\n\t\t\tbackground: var(--ck-color-switch-button-off-hover-background);\n\t\t}\n.ck.ck-button.ck-switchbutton .ck-button__toggle:hover .ck-button__toggle__inner {\n\t\t\t\tbox-shadow: var(--ck-switch-button-inner-hover-shadow);\n\t\t\t}\n.ck.ck-button.ck-switchbutton.ck-disabled .ck-button__toggle {\n\t\topacity: var(--ck-disabled-opacity);\n\t}\n/* Overriding default .ck-button:focus styles + an outline around the toogle */\n.ck.ck-button.ck-switchbutton:focus {\n\t\tborder-color: transparent;\n\t\toutline: none;\n\t\tbox-shadow: none;\n\t}\n.ck.ck-button.ck-switchbutton:focus .ck-button__toggle {\n\t\t\tbox-shadow: 0 0 0 1px var(--ck-color-base-background), 0 0 0 5px var(--ck-color-focus-outer-shadow);\n\t\t\toutline-offset: 1px;\n\t\t\toutline: var(--ck-focus-ring);\n\t\t}\n/* stylelint-disable-next-line no-descending-specificity */\n.ck.ck-button.ck-switchbutton.ck-on .ck-button__toggle {\n\t\t\tbackground: var(--ck-color-switch-button-on-background);\n\t\t}\n.ck.ck-button.ck-switchbutton.ck-on .ck-button__toggle:hover {\n\t\t\t\tbackground: var(--ck-color-switch-button-on-hover-background);\n\t\t\t}\n/*\n\t\t\t\t* Move the toggle switch to the right. It will be animated.\n\t\t\t\t*/\n[dir="ltr"] .ck.ck-button.ck-switchbutton.ck-on .ck-button__toggle .ck-button__toggle__inner {\n\t\t\t\t\ttransform: translateX( var( --ck-switch-button-translation ) );\n\t}\n[dir="rtl"] .ck.ck-button.ck-switchbutton.ck-on .ck-button__toggle .ck-button__toggle__inner {\n\t\t\t\t\ttransform: translateX( calc( -1 * var( --ck-switch-button-translation ) ) );\n\t}\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n.ck.ck-button.ck-list-item-button {\n\tpadding: var(--ck-spacing-tiny) calc(2 * var(--ck-spacing-standard));\n}\n.ck.ck-button.ck-list-item-button,\n\t.ck.ck-button.ck-list-item-button.ck-on {\n\t\tbackground: var(--ck-color-list-background);\n\t\tcolor: var(--ck-color-text);\n\t}\n[dir="ltr"] .ck.ck-button.ck-list-item-button:has(.ck-list-item-button__check-holder) {\n\t\t\tpadding-left: var(--ck-spacing-small);\n\t}\n[dir="rtl"] .ck.ck-button.ck-list-item-button:has(.ck-list-item-button__check-holder) {\n\t\t\tpadding-right: var(--ck-spacing-small);\n\t}\n/*\n\t * \`.ck-on\` class and background styling is overridden for \`ck-button\` in many places.\n\t * This is a workaround to make sure that the background is not overridden and uses similar\n\t * selector specificity as the other overrides.\n\t */\n.ck.ck-button.ck-list-item-button:hover:not(.ck-disabled),\n\t.ck.ck-button.ck-list-item-button.ck-button.ck-on:hover,\n\t.ck.ck-button.ck-list-item-button.ck-on:not(.ck-list-item-button_toggleable),\n\t.ck.ck-button.ck-list-item-button.ck-on:hover {\n\t\tbackground: var(--ck-color-list-button-hover-background);\n\t}\n.ck.ck-button.ck-list-item-button:hover:not(.ck-disabled):not(.ck-disabled), .ck.ck-button.ck-list-item-button.ck-button.ck-on:hover:not(.ck-disabled), .ck.ck-button.ck-list-item-button.ck-on:not(.ck-list-item-button_toggleable):not(.ck-disabled), .ck.ck-button.ck-list-item-button.ck-on:hover:not(.ck-disabled) {\n\t\t\tcolor: var(--ck-color-text);\n\t\t}\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n:root {\n\t--ck-collapsible-arrow-size: calc(0.5 * var(--ck-icon-size));\n}\n.ck.ck-collapsible > .ck.ck-button {\n\t\twidth: 100%;\n\t\tfont-weight: bold;\n\t\tborder-radius: 0;\n\t\tcolor: inherit;\n\t}\n.ck.ck-collapsible > .ck.ck-button:focus {\n\t\t\tbackground: transparent;\n\t\t}\n.ck.ck-collapsible > .ck.ck-button:active, .ck.ck-collapsible > .ck.ck-button:not(:focus), .ck.ck-collapsible > .ck.ck-button:hover:not(:focus) {\n\t\t\tbackground: transparent;\n\t\t\tborder-color: transparent;\n\t\t\tbox-shadow: none;\n\t\t}\n.ck.ck-collapsible > .ck.ck-button > .ck-icon {\n\t\t\tmargin-right: var(--ck-spacing-medium);\n\t\t\twidth: var(--ck-collapsible-arrow-size);\n\t\t}\n.ck.ck-collapsible > .ck-collapsible__children {\n\t\tpadding: var(--ck-spacing-medium) var(--ck-spacing-large) var(--ck-spacing-large);\n\t}\n.ck.ck-collapsible.ck-collapsible_collapsed > .ck.ck-button .ck-icon {\n\t\t\ttransform: rotate(-90deg);\n\t\t}\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n/**\n * Implements rounded corner interface for .ck-rounded-corners class.\n *\n * @see $ck-border-radius\n */\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n:root {\n\t--ck-color-grid-tile-size: 24px;\n\n\t/* Not using global colors here because these may change but some colors in a pallette\n\t * require special treatment. For instance, this ensures no matter what the UI text color is,\n\t * the check icon will look good on the black color tile. */\n\t--ck-color-color-grid-check-icon: hsl(212, 81%, 46%);\n}\n.ck.ck-color-grid {\n\tgrid-gap: 5px;\n\tpadding: 8px;\n}\n.ck.ck-color-grid__tile {\n\ttransition: .2s ease box-shadow;\n}\n@media (forced-colors: none) {\n\t\t.ck.ck-color-grid__tile {\n\t\twidth: var(--ck-color-grid-tile-size);\n\t\theight: var(--ck-color-grid-tile-size);\n\t\tmin-width: var(--ck-color-grid-tile-size);\n\t\tmin-height: var(--ck-color-grid-tile-size);\n\t\tpadding: 0;\n\t\tborder: 0;\n\t\t}\n\n\t\t.ck.ck-color-grid__tile.ck-on,\n\t\t.ck.ck-color-grid__tile:focus:not( .ck-disabled ),\n\t\t.ck.ck-color-grid__tile:hover:not( .ck-disabled ) {\n\t\t\t/* Disable the default .ck-button's border ring. */\n\t\t\tborder: 0;\n\t\t}\n\n\t\t.ck.ck-color-grid__tile.ck-color-selector__color-tile_bordered {\n\t\t\tbox-shadow: 0 0 0 1px var(--ck-color-base-border);\n\t\t}\n\n\t\t.ck.ck-color-grid__tile.ck-on {\n\t\t\tbox-shadow: inset 0 0 0 1px var(--ck-color-base-background), 0 0 0 2px var(--ck-color-base-text);\n\t\t}\n\n\t\t.ck.ck-color-grid__tile:focus:not( .ck-disabled ),\n\t\t.ck.ck-color-grid__tile:hover:not( .ck-disabled ) {\n\t\t\tbox-shadow: inset 0 0 0 1px var(--ck-color-base-background), 0 0 0 2px var(--ck-color-focus-border);\n\t\t}\n\t}\n/*\n\t * In high contrast mode, the colors are replaced with text labels.\n\t * See https://github.com/ckeditor/ckeditor5/issues/14907.\n\t */\n@media (forced-colors: active) {\n\t\t.ck.ck-color-grid__tile {\n\t\twidth: unset;\n\t\theight: unset;\n\t\tmin-width: unset;\n\t\tmin-height: unset;\n\t\tpadding: 0 var(--ck-spacing-small);\n\t\t}\n\n\t\t.ck.ck-color-grid__tile .ck-button__label {\n\t\t\tdisplay: inline-block;\n\t\t}\n\t}\n@media (prefers-reduced-motion: reduce) {\n.ck.ck-color-grid__tile {\n\t\ttransition: none;\n}\n\t}\n.ck.ck-color-grid__tile.ck-disabled {\n\t\tcursor: unset;\n\t\ttransition: unset;\n\t}\n.ck.ck-color-grid__tile .ck.ck-icon {\n\t\tdisplay: none;\n\t\tcolor: var(--ck-color-color-grid-check-icon);\n\t}\n.ck.ck-color-grid__tile.ck-on .ck.ck-icon {\n\t\t\tdisplay: block;\n\t\t}\n.ck.ck-color-grid__label {\n\tpadding: 0 var(--ck-spacing-standard);\n}\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n/* View fragment with color grids. */\n.ck.ck-color-selector .ck-color-grids-fragment .ck-button.ck-color-selector__remove-color,\n\t\t.ck.ck-color-selector .ck-color-grids-fragment .ck-button.ck-color-selector__color-picker {\n\t\t\twidth: 100%;\n\t\t}\n.ck.ck-color-selector .ck-color-grids-fragment .ck-button.ck-color-selector__color-picker {\n\t\t\tpadding: calc(var(--ck-spacing-standard) / 2) var(--ck-spacing-standard);\n\t\t\tborder-bottom-left-radius: 0;\n\t\t\tborder-bottom-right-radius: 0;\n\t\t}\n.ck.ck-color-selector .ck-color-grids-fragment .ck-button.ck-color-selector__color-picker:not(:focus) {\n\t\t\t\tborder-top: 1px solid var(--ck-color-base-border);\n\t\t\t}\n[dir="ltr"] .ck.ck-color-selector .ck-color-grids-fragment .ck-button.ck-color-selector__color-picker .ck.ck-icon {\n\t\t\t\t\tmargin-right: var(--ck-spacing-standard);\n\t}\n[dir="rtl"] .ck.ck-color-selector .ck-color-grids-fragment .ck-button.ck-color-selector__color-picker .ck.ck-icon {\n\t\t\t\t\tmargin-left: var(--ck-spacing-standard);\n\t}\n.ck.ck-color-selector .ck-color-grids-fragment label.ck.ck-color-grid__label {\n\t\t\tfont-weight: unset;\n\t\t}\n/* View fragment with a color picker. */\n.ck.ck-color-selector .ck-color-picker-fragment .ck.ck-color-picker {\n\t\t\tpadding: 8px;\n\t\t}\n.ck.ck-color-selector .ck-color-picker-fragment .ck.ck-color-picker .hex-color-picker {\n\t\t\t\theight: 100px;\n\t\t\t\tmin-width: 180px;\n\t\t\t}\n.ck.ck-color-selector .ck-color-picker-fragment .ck.ck-color-picker .hex-color-picker::part(saturation) {\n\t\t\t\t\tborder-radius: var(--ck-border-radius) var(--ck-border-radius) 0 0;\n\t\t\t\t}\n.ck.ck-color-selector .ck-color-picker-fragment .ck.ck-color-picker .hex-color-picker::part(hue) {\n\t\t\t\t\tborder-radius: 0 0 var(--ck-border-radius) var(--ck-border-radius);\n\t\t\t\t}\n.ck.ck-color-selector .ck-color-picker-fragment .ck.ck-color-picker .hex-color-picker::part(saturation-pointer),\n\t\t\t\t.ck.ck-color-selector .ck-color-picker-fragment .ck.ck-color-picker .hex-color-picker::part(hue-pointer) {\n\t\t\t\t\twidth: 15px;\n\t\t\t\t\theight: 15px;\n\t\t\t\t}\n.ck.ck-color-selector .ck-color-picker-fragment .ck.ck-color-selector_action-bar {\n\t\t\tpadding: 0 8px 8px;\n\t\t}\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n/**\n * Implements rounded corner interface for .ck-rounded-corners class.\n *\n * @see $ck-border-radius\n */\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n/**\n * A helper to combine multiple shadows.\n */\n/**\n * Gives an element a drop shadow so it looks like a floating panel.\n */\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n:root {\n\t--ck-dialog-overlay-background-color: hsla( 0, 0%, 0%, .5 );\n\t--ck-dialog-drop-shadow: 0px 0px 6px 2px hsl(0deg 0% 0% / 15%);\n\t--ck-dialog-max-width: 100vw;\n\t--ck-dialog-max-height: 90vh;\n\t--ck-color-dialog-background: var(--ck-color-base-background);\n\t--ck-color-dialog-form-header-border: var(--ck-color-base-border);\n}\n.ck.ck-dialog-overlay {\n\tanimation: ck-dialog-fade-in .3s;\n\tbackground: var(--ck-dialog-overlay-background-color);\n\tz-index: var(--ck-z-dialog);\n}\n.ck.ck-dialog {\n\tborder-radius: 0;\n\n\t--ck-drop-shadow: var(--ck-dialog-drop-shadow);\n\n\tbackground: var(--ck-color-dialog-background);\n\tmax-height: var(--ck-dialog-max-height);\n\tmax-width: var(--ck-dialog-max-width);\n\tborder: 1px solid var(--ck-color-base-border);\n\toverscroll-behavior: contain;\n}\n.ck-rounded-corners .ck.ck-dialog,\n\t.ck.ck-dialog.ck-rounded-corners {\n\t\tborder-radius: var(--ck-border-radius);\n\t}\n.ck.ck-dialog {\n\tbox-shadow: var(--ck-drop-shadow), 0 0;\n}\n.ck.ck-dialog .ck.ck-form__header {\n\t\tborder-bottom: 1px solid var(--ck-color-dialog-form-header-border);\n\t}\n.ck-dialog-scroll-locked {\n\toverflow: hidden;\n}\n@keyframes ck-dialog-fade-in {\n\t0% {\n\t\tbackground: hsla( 0, 0%, 0%, 0 );\n\t}\n\n\t100% {\n\t\tbackground: var(--ck-dialog-overlay-background-color);\n\t}\n}\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n.ck.ck-dialog .ck.ck-dialog__actions {\n\t\tpadding: var(--ck-spacing-large);\n\t}\n.ck.ck-dialog .ck.ck-dialog__actions > * + * {\n\t\t\tmargin-left: var(--ck-spacing-large);\n\t\t}\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n/**\n * Implements rounded corner interface for .ck-rounded-corners class.\n *\n * @see $ck-border-radius\n */\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n/**\n * A class which indicates that an element holding it is disabled.\n */\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n/**\n * A helper to combine multiple shadows.\n */\n/**\n * Gives an element a drop shadow so it looks like a floating panel.\n */\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n:root {\n\t--ck-dropdown-arrow-size: calc(0.5 * var(--ck-icon-size));\n}\n.ck.ck-dropdown {\n\t/* Enable font size inheritance, which allows fluid UI scaling. */\n\tfont-size: inherit;\n}\n.ck.ck-dropdown .ck-dropdown__arrow {\n\t\twidth: var(--ck-dropdown-arrow-size);\n\t}\n[dir="ltr"] .ck.ck-dropdown .ck-dropdown__arrow {\n\t\t\tright: var(--ck-spacing-standard);\n\n\t\t\t/* A space to accommodate the triangle. */\n\t\t\tmargin-left: var(--ck-spacing-standard);\n\t\t}\n[dir="rtl"] .ck.ck-dropdown .ck-dropdown__arrow {\n\t\t\tleft: var(--ck-spacing-standard);\n\n\t\t\t/* A space to accommodate the triangle. */\n\t\t\tmargin-right: var(--ck-spacing-small);\n\t\t}\n.ck.ck-dropdown.ck-disabled .ck-dropdown__arrow {\n\t\topacity: var(--ck-disabled-opacity);\n\t}\n[dir="ltr"] .ck.ck-dropdown .ck-button.ck-dropdown__button:not(.ck-button_with-text) {\n\t\t\t\t/* Make sure dropdowns with just an icon have the right inner spacing */\n\t\t\t\tpadding-left: var(--ck-spacing-small);\n\t\t\t}\n[dir="rtl"] .ck.ck-dropdown .ck-button.ck-dropdown__button:not(.ck-button_with-text) {\n\t\t\t\t/* Make sure dropdowns with just an icon have the right inner spacing */\n\t\t\t\tpadding-right: var(--ck-spacing-small);\n\t\t\t}\n/* #23 */\n.ck.ck-dropdown .ck-button.ck-dropdown__button .ck-button__label {\n\t\t\twidth: 7em;\n\t\t\toverflow: hidden;\n\t\t\ttext-overflow: ellipsis;\n\t\t}\n/* https://github.com/ckeditor/ckeditor5-theme-lark/issues/70 */\n.ck.ck-dropdown .ck-button.ck-dropdown__button.ck-disabled .ck-button__label {\n\t\t\topacity: var(--ck-disabled-opacity);\n\t\t}\n/* https://github.com/ckeditor/ckeditor5/issues/816 */\n.ck.ck-dropdown .ck-button.ck-dropdown__button.ck-on {\n\t\t\tborder-bottom-left-radius: 0;\n\t\t\tborder-bottom-right-radius: 0;\n\t\t}\n.ck.ck-dropdown .ck-button.ck-dropdown__button.ck-dropdown__button_label-width_auto .ck-button__label {\n\t\t\twidth: auto;\n\t\t}\n/* https://github.com/ckeditor/ckeditor5/issues/8699 */\n.ck.ck-dropdown .ck-button.ck-dropdown__button.ck-off:active,\n\t\t.ck.ck-dropdown .ck-button.ck-dropdown__button.ck-on:active {\n\t\t\tbox-shadow: none;\n\t\t}\n.ck.ck-dropdown .ck-button.ck-dropdown__button.ck-off:active:focus, .ck.ck-dropdown .ck-button.ck-dropdown__button.ck-on:active:focus {\n\t\t\t\tbox-shadow: var(--ck-focus-outer-shadow), 0 0;\n\t\t\t}\n.ck.ck-dropdown__panel {\n\tborder-radius: 0;\n\n\tbackground: var(--ck-color-dropdown-panel-background);\n\tborder: 1px solid var(--ck-color-dropdown-panel-border);\n\tbottom: 0;\n\n\t/* Make sure the panel is at least as wide as the drop-down's button. */\n\tmin-width: 100%;\n}\n.ck-rounded-corners .ck.ck-dropdown__panel,\n\t.ck.ck-dropdown__panel.ck-rounded-corners {\n\t\tborder-radius: var(--ck-border-radius);\n\t}\n.ck.ck-dropdown__panel {\n\tbox-shadow: var(--ck-drop-shadow), 0 0;\n\n\t/* Disabled corner border radius to be consistent with the .dropdown__button\n\thttps://github.com/ckeditor/ckeditor5/issues/816 */\n}\n.ck.ck-dropdown__panel.ck-dropdown__panel_se {\n\t\tborder-top-left-radius: 0;\n\t}\n.ck.ck-dropdown__panel.ck-dropdown__panel_sw {\n\t\tborder-top-right-radius: 0;\n\t}\n.ck.ck-dropdown__panel.ck-dropdown__panel_ne {\n\t\tborder-bottom-left-radius: 0;\n\t}\n.ck.ck-dropdown__panel.ck-dropdown__panel_nw {\n\t\tborder-bottom-right-radius: 0;\n\t}\n.ck.ck-dropdown__panel:focus {\n\t\toutline: none;\n\t}\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n/**\n * Implements rounded corner interface for .ck-rounded-corners class.\n *\n * @see $ck-border-radius\n */\n.ck.ck-dropdown > .ck-dropdown__panel > .ck-list {\n\t/* Disabled radius of top-left border to be consistent with .dropdown__button\n\thttps://github.com/ckeditor/ckeditor5/issues/816 */\n\tborder-radius: 0;\n}\n.ck-rounded-corners .ck.ck-dropdown > .ck-dropdown__panel > .ck-list,\n\t.ck.ck-dropdown > .ck-dropdown__panel > .ck-list.ck-rounded-corners {\n\t\tborder-radius: var(--ck-border-radius);\n\t\tborder-top-left-radius: 0;\n\t}\n/* Make sure the button belonging to the first/last child of the list goes well with the\n\tborder radius of the entire panel. */\n.ck.ck-dropdown > .ck-dropdown__panel > .ck-list .ck-list__item:first-child > .ck-button {\n\t\t\tborder-radius: 0;\n\t\t}\n.ck-rounded-corners .ck.ck-dropdown > .ck-dropdown__panel > .ck-list .ck-list__item:first-child > .ck-button,\n\t.ck.ck-dropdown > .ck-dropdown__panel > .ck-list .ck-list__item:first-child > .ck-button.ck-rounded-corners {\n\t\tborder-radius: var(--ck-border-radius);\n\t\t\t\tborder-top-left-radius: 0;\n\t\t\t\tborder-bottom-left-radius: 0;\n\t\t\t\tborder-bottom-right-radius: 0;\n\t}\n.ck.ck-dropdown > .ck-dropdown__panel > .ck-list .ck-list__item:last-child > .ck-button {\n\t\t\tborder-radius: 0;\n\t\t}\n.ck-rounded-corners .ck.ck-dropdown > .ck-dropdown__panel > .ck-list .ck-list__item:last-child > .ck-button,\n\t.ck.ck-dropdown > .ck-dropdown__panel > .ck-list .ck-list__item:last-child > .ck-button.ck-rounded-corners {\n\t\tborder-radius: var(--ck-border-radius);\n\t\t\t\tborder-top-left-radius: 0;\n\t\t\t\tborder-top-right-radius: 0;\n\t}\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n/**\n * Implements rounded corner interface for .ck-rounded-corners class.\n *\n * @see $ck-border-radius\n */\n:root {\n\t--ck-color-split-button-hover-background: hsl(0, 0%, 92%);\n\t--ck-color-split-button-hover-border: hsl(0, 0%, 70%);\n}\n/*\n\t * Note: ck-rounded and ck-dir mixins don't go together (because they both use @nest).\n\t */\n[dir="ltr"] .ck.ck-splitbutton:hover > .ck-splitbutton__action, [dir="ltr"] .ck.ck-splitbutton.ck-splitbutton_open > .ck-splitbutton__action {\n\t\t\t/* Don't round the action button on the right side */\n\t\t\tborder-top-right-radius: unset;\n\t\t\tborder-bottom-right-radius: unset;\n\t\t}\n[dir="rtl"] .ck.ck-splitbutton:hover > .ck-splitbutton__action, [dir="rtl"] .ck.ck-splitbutton.ck-splitbutton_open > .ck-splitbutton__action {\n\t\t\t/* Don't round the action button on the left side */\n\t\t\tborder-top-left-radius: unset;\n\t\t\tborder-bottom-left-radius: unset;\n\t\t}\n.ck.ck-splitbutton > .ck-splitbutton__arrow {\n\t\t/* It's a text-less button and since the icon is positioned absolutely in such situation,\n\t\tit must get some arbitrary min-width. */\n\t\tmin-width: unset;\n\t}\n[dir="ltr"] .ck.ck-splitbutton > .ck-splitbutton__arrow {\n\t\t\t/* Don't round the arrow button on the left side */\n\t\t\tborder-top-left-radius: unset;\n\t\t\tborder-bottom-left-radius: unset;\n\t\t}\n[dir="rtl"] .ck.ck-splitbutton > .ck-splitbutton__arrow {\n\t\t\t/* Don't round the arrow button on the right side */\n\t\t\tborder-top-right-radius: unset;\n\t\t\tborder-bottom-right-radius: unset;\n\t\t}\n.ck.ck-splitbutton > .ck-splitbutton__arrow svg {\n\t\t\twidth: var(--ck-dropdown-arrow-size);\n\t\t}\n/* Make sure the divider stretches 100% height of the button\n\thttps://github.com/ckeditor/ckeditor5/issues/10936 */\n.ck.ck-splitbutton > .ck-splitbutton__arrow:not(:focus) {\n\t\tborder-top-width: 0px;\n\t\tborder-bottom-width: 0px;\n\t}\n/* Don't round the bottom left and right corners of the buttons when "open"\n\thttps://github.com/ckeditor/ckeditor5/issues/816 */\n.ck.ck-splitbutton.ck-splitbutton_open {\n\t\tborder-radius: 0;\n\t}\n.ck-rounded-corners .ck.ck-splitbutton.ck-splitbutton_open,\n\t.ck.ck-splitbutton.ck-splitbutton_open.ck-rounded-corners {\n\t\tborder-radius: var(--ck-border-radius);\n\t}\n.ck-rounded-corners .ck.ck-splitbutton.ck-splitbutton_open > .ck-splitbutton__action, .ck.ck-splitbutton.ck-splitbutton_open.ck-rounded-corners > .ck-splitbutton__action {\n\t\t\t\tborder-bottom-left-radius: 0;\n\t\t\t}\n.ck-rounded-corners .ck.ck-splitbutton.ck-splitbutton_open > .ck-splitbutton__arrow, .ck.ck-splitbutton.ck-splitbutton_open.ck-rounded-corners > .ck-splitbutton__arrow {\n\t\t\t\tborder-bottom-right-radius: 0;\n\t\t\t}\n/* When the split button is "open" (the arrow is on) or being hovered, it should get some styling\n\tas a whole. The background of both buttons should stand out and there should be a visual\n\tseparation between both buttons. */\n/* When the split button hovered as a whole, not as individual buttons. */\n.ck.ck-splitbutton.ck-splitbutton_open > .ck-button:not(.ck-on):not(.ck-disabled):not(:hover), .ck.ck-splitbutton:hover > .ck-button:not(.ck-on):not(.ck-disabled):not(:hover) {\n\t\t\tbackground: var(--ck-color-split-button-hover-background);\n\t\t}\n/* Splitbutton separator needs to be set with the ::after pseudoselector\n\t\tto display properly the borders on focus */\n.ck.ck-splitbutton.ck-splitbutton_open > .ck-splitbutton__arrow:not(.ck-disabled)::after, .ck.ck-splitbutton:hover > .ck-splitbutton__arrow:not(.ck-disabled)::after {\n\t\t\tcontent: '';\n\t\t\tposition: absolute;\n\t\t\twidth: 1px;\n\t\t\theight: 100%;\n\t\t\tbackground-color: var(--ck-color-split-button-hover-border);\n\t\t}\n/* Make sure the divider between the buttons looks fine when the button is focused */\n.ck.ck-splitbutton.ck-splitbutton_open > .ck-splitbutton__arrow:focus::after, .ck.ck-splitbutton:hover > .ck-splitbutton__arrow:focus::after {\n\t\t\t--ck-color-split-button-hover-border: var(--ck-color-focus-border);\n\t\t}\n[dir="ltr"] .ck.ck-splitbutton.ck-splitbutton_open > .ck-splitbutton__arrow:not(.ck-disabled)::after, [dir="ltr"] .ck.ck-splitbutton:hover > .ck-splitbutton__arrow:not(.ck-disabled)::after {\n\t\t\t\tleft: -1px;\n\t\t\t}\n[dir="rtl"] .ck.ck-splitbutton.ck-splitbutton_open > .ck-splitbutton__arrow:not(.ck-disabled)::after, [dir="rtl"] .ck.ck-splitbutton:hover > .ck-splitbutton__arrow:not(.ck-disabled)::after {\n\t\t\t\tright: -1px;\n\t\t\t}\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n.ck.ck-toolbar-dropdown .ck-toolbar {\n\tborder: 0;\n}\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n/**\n * A class which indicates that an element holding it is disabled.\n */\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n/**\n * Implements a button of given background color.\n *\n * @param {String} $background - Background color of the button.\n * @param {String} $border - Border color of the button.\n */\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n/*\n * All menu buttons.\n */\n.ck.ck-button.ck-dropdown-menu-list__nested-menu__button {\n\twidth: 100%;\n\tpadding: var(--ck-spacing-tiny) calc(2 * var(--ck-spacing-standard));\n\tborder-radius: 0;\n}\n.ck.ck-button.ck-dropdown-menu-list__nested-menu__button:focus {\n\t\tborder-color: transparent;\n\t\tbox-shadow: none;\n\t}\n.ck.ck-button.ck-dropdown-menu-list__nested-menu__button:focus:not(.ck-on) {\n\t\t\tbackground: var(--ck-color-button-default-hover-background);\n\t\t}\n.ck.ck-button.ck-dropdown-menu-list__nested-menu__button > .ck-button__label {\n\t\tflex-grow: 1;\n\t\toverflow: hidden;\n\t\ttext-overflow: ellipsis;\n\t}\n.ck.ck-button.ck-dropdown-menu-list__nested-menu__button.ck-disabled > .ck-button__label {\n\t\topacity: var(--ck-disabled-opacity);\n\t}\n/* Spacing in buttons that miss the icon. */\n.ck.ck-button.ck-dropdown-menu-list__nested-menu__button.ck-icon-spacing:not(:has(.ck-button__icon)) > .ck-button__label {\n\t\tmargin-left: calc(var(--ck-icon-size) - var(--ck-spacing-small));\n\t}\n.ck.ck-button.ck-dropdown-menu-list__nested-menu__button > .ck-dropdown-menu-list__nested-menu__button__arrow {\n\t\twidth: var(--ck-dropdown-arrow-size);\n\t}\n[dir="ltr"] .ck.ck-button.ck-dropdown-menu-list__nested-menu__button > .ck-dropdown-menu-list__nested-menu__button__arrow {\n\t\t\ttransform: rotate(-90deg);\n\n\t\t\t/* Nudge the arrow gently to the right because its center of gravity is to the left */\n\t\t\tmargin-right: calc(-1 * var(--ck-spacing-small));\n\t}\n[dir="rtl"] .ck.ck-button.ck-dropdown-menu-list__nested-menu__button > .ck-dropdown-menu-list__nested-menu__button__arrow {\n\t\t\ttransform: rotate(90deg);\n\n\t\t\t/* Nudge the arrow gently to the left because its center of gravity is to the right (after rotation). */\n\t\t\tmargin-left: calc(-1 * var(--ck-spacing-small));\n\t}\n.ck.ck-button.ck-dropdown-menu-list__nested-menu__button.ck-disabled > .ck-dropdown-menu-list__nested-menu__button__arrow {\n\t\topacity: var(--ck-disabled-opacity);\n\t}\n[dir="ltr"] .ck.ck-button.ck-dropdown-menu-list__nested-menu__button:not(.ck-button_with-text) {\n\t\t\tpadding-left: var(--ck-spacing-small);\n\t\t}\n[dir="ltr"] .ck.ck-button.ck-dropdown-menu-list__nested-menu__button > .ck-dropdown-menu-list__nested-menu__button__arrow {\n\t\t\tright: var(--ck-spacing-standard);\n\n\t\t\t/* A space to accommodate the triangle. */\n\t\t\tmargin-left: var(--ck-spacing-standard);\n\t\t}\n[dir="rtl"] .ck.ck-button.ck-dropdown-menu-list__nested-menu__button:not(.ck-button_with-text) {\n\t\t\tpadding-right: var(--ck-spacing-small);\n\t\t}\n[dir="rtl"] .ck.ck-button.ck-dropdown-menu-list__nested-menu__button > .ck-dropdown-menu-list__nested-menu__button__arrow {\n\t\t\tleft: var(--ck-spacing-standard);\n\n\t\t\t/* A space to accommodate the triangle. */\n\t\t\tmargin-right: var(--ck-spacing-small);\n\t\t}\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n:root {\n\t--ck-dropdown-menu-menu-item-min-width: 18em;\n}\n.ck.ck-dropdown-menu-list__nested-menu__item {\n\tmin-width: var(--ck-dropdown-menu-menu-item-min-width);\n}\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n/*\n * List item buttons.\n */\n.ck-button.ck-dropdown-menu-list__nested-menu__item__button {\n\tborder-radius: 0;\n}\n.ck-button.ck-dropdown-menu-list__nested-menu__item__button > .ck-spinner-container,\n\t.ck-button.ck-dropdown-menu-list__nested-menu__item__button > .ck-spinner-container .ck-spinner {\n\t\t/* These styles correspond to .ck-icon so that the spinner seamlessly replaces the icon. */\n\t\t--ck-toolbar-spinner-size: 20px;\n\t}\n.ck-button.ck-dropdown-menu-list__nested-menu__item__button > .ck-spinner-container {\n\t\t/* These margins are the same as for .ck-icon. */\n\t\tmargin-left: calc(-1 * var(--ck-spacing-small));\n\t\tmargin-right: var(--ck-spacing-small);\n\t}\n/*\n\t * Hovered items automatically get focused. Default focus styles look odd\n\t * while moving across a huge list of items so let's get rid of them\n\t */\n.ck-button.ck-dropdown-menu-list__nested-menu__item__button:focus {\n\t\tborder-color: transparent;\n\t\tbox-shadow: none;\n\t}\n.ck-button.ck-dropdown-menu-list__nested-menu__item__button:focus:not(.ck-on) {\n\t\t\tbackground: var(--ck-color-button-default-hover-background);\n\t\t}\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n/**\n * Implements rounded corner interface for .ck-rounded-corners class.\n *\n * @see $ck-border-radius\n */\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n/**\n * A helper to combine multiple shadows.\n */\n/**\n * Gives an element a drop shadow so it looks like a floating panel.\n */\n:root {\n\t--ck-dropdown-menu-menu-panel-max-width: 75vw;\n}\n.ck.ck-balloon-panel.ck-dropdown-menu__nested-menu__panel {\n\tbox-shadow: var(--ck-drop-shadow), 0 0;\n\n\tbackground: var(--ck-color-dropdown-panel-background);\n\tborder: 1px solid var(--ck-color-dropdown-panel-border);\n\tbottom: 0;\n\theight: fit-content;\n\tmax-width: var(--ck-dropdown-menu-menu-panel-max-width);\n\n\t/* Reset balloon styling */\n}\n.ck.ck-balloon-panel.ck-dropdown-menu__nested-menu__panel::after,\n\t.ck.ck-balloon-panel.ck-dropdown-menu__nested-menu__panel::before {\n\t\tdisplay: none;\n\t}\n/* Corner border radius consistent with the button. */\n.ck.ck-balloon-panel.ck-dropdown-menu__nested-menu__panel.ck-balloon-panel_es,\n\t.ck.ck-balloon-panel.ck-dropdown-menu__nested-menu__panel.ck-balloon-panel_se {\n\t\tborder-top-left-radius: 0;\n\t}\n.ck.ck-balloon-panel.ck-dropdown-menu__nested-menu__panel.ck-balloon-panel_ws,\n\t.ck.ck-balloon-panel.ck-dropdown-menu__nested-menu__panel.ck-balloon-panel_sw {\n\t\tborder-top-right-radius: 0;\n\t}\n.ck.ck-balloon-panel.ck-dropdown-menu__nested-menu__panel.ck-balloon-panel_en,\n\t.ck.ck-balloon-panel.ck-dropdown-menu__nested-menu__panel.ck-balloon-panel_ne {\n\t\tborder-bottom-left-radius: 0;\n\t}\n.ck.ck-balloon-panel.ck-dropdown-menu__nested-menu__panel.ck-balloon-panel_wn,\n\t.ck.ck-balloon-panel.ck-dropdown-menu__nested-menu__panel.ck-balloon-panel_nw {\n\t\tborder-bottom-right-radius: 0;\n\t}\n.ck.ck-balloon-panel.ck-dropdown-menu__nested-menu__panel:focus {\n\t\toutline: none;\n\t}\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n/**\n * A visual style of focused element's border.\n */\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n/**\n * A helper to combine multiple shadows.\n */\n/**\n * Gives an element a drop shadow so it looks like a floating panel.\n */\n:root {\n\t--ck-accessibility-help-dialog-max-width: 600px;\n\t--ck-accessibility-help-dialog-max-height: 400px;\n\t--ck-accessibility-help-dialog-border-color: hsl(220, 6%, 81%);\n\t--ck-accessibility-help-dialog-code-background-color: hsl(0deg 0% 92.94%);\n\t--ck-accessibility-help-dialog-kbd-shadow-color: hsl(0deg 0% 61%);\n}\n.ck.ck-accessibility-help-dialog .ck-accessibility-help-dialog__content {\n\tpadding: var(--ck-spacing-large);\n\tmax-width: var(--ck-accessibility-help-dialog-max-width);\n\tmax-height: var(--ck-accessibility-help-dialog-max-height);\n\toverflow: auto;\n\tuser-select: text;\n\n\tborder: 1px solid transparent;\n}\n.ck.ck-accessibility-help-dialog .ck-accessibility-help-dialog__content:focus {\n\t\t/* Disable native outline. */\n\t\toutline: none;\n\t\tborder: var(--ck-focus-ring);\n\t\tbox-shadow: var(--ck-focus-outer-shadow), 0 0;\n\t}\n.ck.ck-accessibility-help-dialog .ck-accessibility-help-dialog__content * {\n\t\twhite-space: normal;\n\t}\n/* Hide the main label of the content container. */\n.ck.ck-accessibility-help-dialog .ck-accessibility-help-dialog__content .ck-label {\n\t\tdisplay: none;\n\t}\n.ck.ck-accessibility-help-dialog .ck-accessibility-help-dialog__content h3 {\n\t\tfont-weight: bold;\n\t\tfont-size: 1.2em;\n\t}\n.ck.ck-accessibility-help-dialog .ck-accessibility-help-dialog__content h4 {\n\t\tfont-weight: bold;\n\t\tfont-size: 1em;\n\t}\n.ck.ck-accessibility-help-dialog .ck-accessibility-help-dialog__content p,\n\t.ck.ck-accessibility-help-dialog .ck-accessibility-help-dialog__content h3,\n\t.ck.ck-accessibility-help-dialog .ck-accessibility-help-dialog__content h4,\n\t.ck.ck-accessibility-help-dialog .ck-accessibility-help-dialog__content table {\n\t\tmargin: 1em 0;\n\t}\n.ck.ck-accessibility-help-dialog .ck-accessibility-help-dialog__content dl {\n\t\tdisplay: grid;\n\t\tgrid-template-columns: 2fr 1fr;\n\t\tborder-top: 1px solid var(--ck-accessibility-help-dialog-border-color);\n\t\tborder-bottom: none;\n\t}\n.ck.ck-accessibility-help-dialog .ck-accessibility-help-dialog__content dl dt, .ck.ck-accessibility-help-dialog .ck-accessibility-help-dialog__content dl dd {\n\t\t\tborder-bottom: 1px solid var(--ck-accessibility-help-dialog-border-color);\n\t\t\tpadding: .4em 0;\n\t\t}\n.ck.ck-accessibility-help-dialog .ck-accessibility-help-dialog__content dl dt {\n\t\t\tgrid-column-start: 1;\n\t\t}\n.ck.ck-accessibility-help-dialog .ck-accessibility-help-dialog__content dl dd {\n\t\t\tgrid-column-start: 2;\n\t\t\ttext-align: right;\n\t\t}\n.ck.ck-accessibility-help-dialog .ck-accessibility-help-dialog__content kbd, .ck.ck-accessibility-help-dialog .ck-accessibility-help-dialog__content code {\n\t\tdisplay: inline-block;\n\t\tbackground: var(--ck-accessibility-help-dialog-code-background-color);\n\t\tpadding: .4em;\n\t\tvertical-align: middle;\n\t\tline-height: 1;\n\t\tborder-radius: 2px;\n\t\ttext-align: center;\n\t\tfont-size: .9em;\n\t}\n.ck.ck-accessibility-help-dialog .ck-accessibility-help-dialog__content code {\n\t\tfont-family: monospace;\n\t}\n.ck.ck-accessibility-help-dialog .ck-accessibility-help-dialog__content kbd {\n\t\tmin-width: 1.8em;\n\t\tbox-shadow: 0px 1px 1px var(--ck-accessibility-help-dialog-kbd-shadow-color);\n\t\tmargin: 0 1px;\n\t}\n.ck.ck-accessibility-help-dialog .ck-accessibility-help-dialog__content kbd + kbd {\n\t\t\tmargin-left: 2px;\n\t\t}\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n/**\n * Implements rounded corner interface for .ck-rounded-corners class.\n *\n * @see $ck-border-radius\n */\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n/**\n * A class which indicates that an element holding it is disabled.\n */\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n/**\n * A helper to combine multiple shadows.\n */\n/**\n * Gives an element a drop shadow so it looks like a floating panel.\n */\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n/**\n * A visual style of focused element's border.\n */\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n/**\n * Implements a button of given background color.\n *\n * @param {String} $background - Background color of the button.\n * @param {String} $border - Border color of the button.\n */\n:root {\n\t--ck-color-editable-blur-selection: hsl(0, 0%, 85%);\n}\n.ck.ck-editor__editable:not(.ck-editor__nested-editable) {\n\tborder-radius: 0;\n}\n.ck-rounded-corners .ck.ck-editor__editable:not(.ck-editor__nested-editable),\n\t.ck.ck-editor__editable.ck-rounded-corners:not(.ck-editor__nested-editable) {\n\t\tborder-radius: var(--ck-border-radius);\n\t}\n.ck.ck-editor__editable.ck-focused:not(.ck-editor__nested-editable) {\n\t\t/* Disable native outline. */\n\t\toutline: none;\n\t\tborder: var(--ck-focus-ring);\n\t\tbox-shadow: var(--ck-inner-shadow), 0 0;\n\t}\n.ck.ck-editor__editable_inline {\n\toverflow: auto;\n\tpadding: 0 var(--ck-spacing-standard);\n\tborder: 1px solid transparent;\n}\n.ck.ck-editor__editable_inline[dir="ltr"] {\n\t\ttext-align: left;\n\t}\n.ck.ck-editor__editable_inline[dir="rtl"] {\n\t\ttext-align: right;\n\t}\n/* https://github.com/ckeditor/ckeditor5-theme-lark/issues/116 */\n.ck.ck-editor__editable_inline > *:first-child {\n\t\tmargin-top: var(--ck-spacing-large);\n\t}\n/* https://github.com/ckeditor/ckeditor5/issues/847 */\n.ck.ck-editor__editable_inline > *:last-child {\n\t\t/*\n\t\t * This value should match with the default margins of the block elements (like .media or .image)\n\t\t * to avoid a content jumping when the fake selection container shows up (See https://github.com/ckeditor/ckeditor5/issues/9825).\n\t\t */\n\t\tmargin-bottom: var(--ck-spacing-large);\n\t}\n/* https://github.com/ckeditor/ckeditor5/issues/6517 */\n.ck.ck-editor__editable_inline.ck-blurred ::selection {\n\t\tbackground: var(--ck-color-editable-blur-selection);\n\t}\n/* https://github.com/ckeditor/ckeditor5-theme-lark/issues/111 */\n.ck.ck-balloon-panel.ck-toolbar-container[class*="arrow_n"]::after {\n\t\tborder-bottom-color: var(--ck-color-panel-background);\n\t}\n.ck.ck-balloon-panel.ck-toolbar-container[class*="arrow_s"]::after {\n\t\tborder-top-color: var(--ck-color-panel-background);\n\t}\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n:root {\n\t--ck-form-header-height: 44px;\n}\n.ck.ck-form__header {\n\tpadding: var(--ck-spacing-small) var(--ck-spacing-large);\n\theight: var(--ck-form-header-height);\n\tline-height: var(--ck-form-header-height);\n\tborder-bottom: 1px solid var(--ck-color-base-border);\n}\n[dir="ltr"] .ck.ck-form__header > .ck-icon {\n\t\t\tmargin-right: var(--ck-spacing-medium);\n\t}\n[dir="rtl"] .ck.ck-form__header > .ck-icon {\n\t\t\tmargin-left: var(--ck-spacing-medium);\n\t}\n.ck.ck-form__header .ck-form__header__label {\n\t\t--ck-font-size-base: 15px;\n\t\tfont-weight: bold;\n\t}\n/* Padding when back button is hidden */\n.ck.ck-form__header:has(.ck-button-back.ck-hidden) {\n\t\tpadding-inline: var(--ck-spacing-large) var(--ck-spacing-large);\n\t}\n/* Padding when back button is visible */\n.ck.ck-form__header:has(.ck-button-back:not(.ck-hidden)) {\n\t\tpadding-inline: var(--ck-spacing-small) var(--ck-spacing-small);\n\t}\n.ck.ck-form__header > .ck-button-back {\n\t\tmargin-inline-end: var(--ck-spacing-small);\n\t}\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n:root {\n\t--ck-icon-size: calc(var(--ck-line-height-base) * var(--ck-font-size-normal));\n\t--ck-icon-font-size: .8333350694em;\n}\n.ck.ck-icon {\n\twidth: var(--ck-icon-size);\n\theight: var(--ck-icon-size);\n\n\t/* Multiplied by the height of the line in "px" should give SVG "viewport" dimensions */\n\tfont-size: var(--ck-icon-font-size);\n\n\t/* Inherit cursor style (#5). */\n\tcursor: inherit;\n}\n.ck.ck-icon * {\n\t\t/* Inherit cursor style (#5). */\n\t\tcursor: inherit;\n\t}\n/* Allows dynamic coloring of an icon by inheriting its color from the parent. */\n.ck.ck-icon.ck-icon_inherit-color {\n\t\tcolor: inherit;\n\t}\n.ck.ck-icon.ck-icon_inherit-color * {\n\t\t\tcolor: inherit;\n\t\t}\n.ck.ck-icon.ck-icon_inherit-color *:not([fill]) {\n\t\t\t\t/* Needed by FF. */\n\t\t\t\tfill: currentColor;\n\t\t\t}\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n/**\n * Implements rounded corner interface for .ck-rounded-corners class.\n *\n * @see $ck-border-radius\n */\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n/**\n * A visual style of focused element's border.\n */\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n/**\n * A helper to combine multiple shadows.\n */\n/**\n * Gives an element a drop shadow so it looks like a floating panel.\n */\n:root {\n\t--ck-input-width: 18em;\n\n\t/* Backward compatibility. */\n\t--ck-input-text-width: var(--ck-input-width);\n}\n.ck.ck-input {\n\tborder-radius: 0;\n\n\tbackground: var(--ck-color-input-background);\n\tborder: 1px solid var(--ck-color-input-border);\n\tpadding: var(--ck-spacing-extra-tiny) var(--ck-spacing-medium);\n\tmin-width: var(--ck-input-width);\n\n\t/* This is important to stay of the same height as surrounding buttons */\n\tmin-height: var(--ck-ui-component-min-height);\n\n\t/* Apply some smooth transition to the box-shadow and border. */\n\ttransition: box-shadow .1s ease-in-out, border .1s ease-in-out;\n}\n.ck-rounded-corners .ck.ck-input,\n\t.ck.ck-input.ck-rounded-corners {\n\t\tborder-radius: var(--ck-border-radius);\n\t}\n@media (prefers-reduced-motion: reduce) {\n.ck.ck-input {\n\t\ttransition: none;\n}\n\t}\n.ck.ck-input:focus {\n\t\t/* Disable native outline. */\n\t\toutline: none;\n\t\tborder: var(--ck-focus-ring);\n\t\tbox-shadow: var(--ck-focus-outer-shadow), 0 0;\n\t}\n.ck.ck-input[readonly] {\n\t\tborder: 1px solid var(--ck-color-input-disabled-border);\n\t\tbackground: var(--ck-color-input-disabled-background);\n\t\tcolor: var(--ck-color-input-disabled-text);\n\t}\n.ck.ck-input[readonly]:focus {\n\t\t\t/* The read-only input should have a slightly less visible shadow when focused. */\n\t\t\tbox-shadow: var(--ck-focus-disabled-outer-shadow), 0 0;\n\t\t}\n.ck.ck-input.ck-error {\n\t\tborder-color: var(--ck-color-input-error-border);\n\t\tanimation: ck-input-shake .3s ease both;\n\t}\n@media (prefers-reduced-motion: reduce) {\n.ck.ck-input.ck-error {\n\t\t\tanimation: none;\n\t}\n\t\t}\n.ck.ck-input.ck-error:focus {\n\t\t\tbox-shadow: var(--ck-focus-error-outer-shadow), 0 0;\n\t\t}\n@keyframes ck-input-shake {\n\t20% {\n\t\ttransform: translateX(-2px);\n\t}\n\n\t40% {\n\t\ttransform: translateX(2px);\n\t}\n\n\t60% {\n\t\ttransform: translateX(-1px);\n\t}\n\n\t80% {\n\t\ttransform: translateX(1px);\n\t}\n}\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n.ck.ck-label {\n\tfont-weight: bold;\n}\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n/**\n * Implements rounded corner interface for .ck-rounded-corners class.\n *\n * @see $ck-border-radius\n */\n:root {\n\t--ck-labeled-field-view-transition: .1s cubic-bezier(0, 0, 0.24, 0.95);\n\t--ck-labeled-field-empty-unfocused-max-width: 100% - 2 * var(--ck-spacing-medium);\n\t--ck-labeled-field-label-default-position-x: var(--ck-spacing-medium);\n\t--ck-labeled-field-label-default-position-y: calc(0.6 * var(--ck-font-size-base));\n\t--ck-color-labeled-field-label-background: var(--ck-color-base-background);\n}\n.ck.ck-labeled-field-view {\n\tborder-radius: 0;\n}\n.ck-rounded-corners .ck.ck-labeled-field-view,\n\t.ck.ck-labeled-field-view.ck-rounded-corners {\n\t\tborder-radius: var(--ck-border-radius);\n\t}\n.ck.ck-labeled-field-view > .ck.ck-labeled-field-view__input-wrapper {\n\t\twidth: 100%;\n\t}\n.ck.ck-labeled-field-view > .ck.ck-labeled-field-view__input-wrapper > .ck.ck-label {\n\t\t\ttop: 0px;\n\n\t\t\tpointer-events: none;\n\n\t\t\tbackground: var(--ck-color-labeled-field-label-background);\n\t\t\tpadding: 0 calc(.5 * var(--ck-font-size-tiny));\n\t\t\tline-height: initial;\n\t\t\tfont-weight: normal;\n\n\t\t\t/* Prevent overflow when the label is longer than the input */\n\t\t\ttext-overflow: ellipsis;\n\t\t\toverflow: hidden;\n\n\t\t\tmax-width: 100%;\n\n\t\t\ttransition:\n\t\t\t\ttransform var(--ck-labeled-field-view-transition),\n\t\t\t\tpadding var(--ck-labeled-field-view-transition),\n\t\t\t\tbackground var(--ck-labeled-field-view-transition);\n\t\t}\n[dir="ltr"] .ck.ck-labeled-field-view > .ck.ck-labeled-field-view__input-wrapper > .ck.ck-label {\n\t\t\t\tleft: 0px;\n\t\t\t\ttransform-origin: 0 0;\n\t\t\t\t/* By default, display the label scaled down above the field. */\n\t\t\t\ttransform: translate(var(--ck-spacing-medium), -6px) scale(.75);\n\t}\n[dir="rtl"] .ck.ck-labeled-field-view > .ck.ck-labeled-field-view__input-wrapper > .ck.ck-label {\n\t\t\t\tright: 0px;\n\t\t\t\ttransform-origin: 100% 0;\n\t\t\t\ttransform: translate(calc(-1 * var(--ck-spacing-medium)), -6px) scale(.75);\n\t}\n@media (prefers-reduced-motion: reduce) {\n.ck.ck-labeled-field-view > .ck.ck-labeled-field-view__input-wrapper > .ck.ck-label {\n\t\t\t\ttransition: none;\n\t\t}\n\t\t\t}\n.ck.ck-labeled-field-view.ck-error > .ck.ck-labeled-field-view__input-wrapper > .ck.ck-label {\n\t\t\tcolor: var(--ck-color-base-error);\n\t\t}\n.ck.ck-labeled-field-view.ck-error .ck-input:not([readonly]) + .ck.ck-label {\n\t\t\tcolor: var(--ck-color-base-error);\n\t\t}\n.ck.ck-labeled-field-view .ck-labeled-field-view__status {\n\t\tfont-size: var(--ck-font-size-small);\n\t\tmargin-top: var(--ck-spacing-small);\n\n\t\t/* Let the info wrap to the next line to avoid stretching the layout horizontally.\n\t\tThe status could be very long. */\n\t\twhite-space: normal;\n\t}\n.ck.ck-labeled-field-view .ck-labeled-field-view__status.ck-labeled-field-view__status_error {\n\t\t\tcolor: var(--ck-color-base-error);\n\t\t}\n/* Disabled fields and fields that have no focus should fade out. */\n.ck.ck-labeled-field-view.ck-disabled > .ck.ck-labeled-field-view__input-wrapper > .ck.ck-label,\n\t.ck.ck-labeled-field-view.ck-labeled-field-view_empty:not(.ck-labeled-field-view_focused) > .ck.ck-labeled-field-view__input-wrapper > .ck.ck-label {\n\t\tcolor: var(--ck-color-input-disabled-text);\n\t}\n/* Fields that are disabled or not focused and without a placeholder should have full-sized labels. */\n/* stylelint-disable-next-line no-descending-specificity */\n.ck.ck-labeled-field-view.ck-disabled.ck-labeled-field-view_empty:not(.ck-labeled-field-view_placeholder) > .ck.ck-labeled-field-view__input-wrapper > .ck.ck-label,\n\t.ck.ck-labeled-field-view.ck-labeled-field-view_empty:not(.ck-labeled-field-view_focused):not(.ck-labeled-field-view_placeholder):not(.ck-error) > .ck.ck-labeled-field-view__input-wrapper > .ck.ck-label {\n\n\t\t/* Compensate for the default translate position. */\n\t\tmax-width: calc(var(--ck-labeled-field-empty-unfocused-max-width));\n\n\t\tbackground: transparent;\n\t\tpadding: 0;\n\t}\n[dir="ltr"] .ck.ck-labeled-field-view.ck-disabled.ck-labeled-field-view_empty:not(.ck-labeled-field-view_placeholder) > .ck.ck-labeled-field-view__input-wrapper > .ck.ck-label, [dir="ltr"] .ck.ck-labeled-field-view.ck-labeled-field-view_empty:not(.ck-labeled-field-view_focused):not(.ck-labeled-field-view_placeholder):not(.ck-error) > .ck.ck-labeled-field-view__input-wrapper > .ck.ck-label {\n\t\t\ttransform: translate(var(--ck-labeled-field-label-default-position-x), var(--ck-labeled-field-label-default-position-y)) scale(1);\n\t}\n[dir="rtl"] .ck.ck-labeled-field-view.ck-disabled.ck-labeled-field-view_empty:not(.ck-labeled-field-view_placeholder) > .ck.ck-labeled-field-view__input-wrapper > .ck.ck-label, [dir="rtl"] .ck.ck-labeled-field-view.ck-labeled-field-view_empty:not(.ck-labeled-field-view_focused):not(.ck-labeled-field-view_placeholder):not(.ck-error) > .ck.ck-labeled-field-view__input-wrapper > .ck.ck-label {\n\t\t\ttransform: translate(calc(-1 * var(--ck-labeled-field-label-default-position-x)), var(--ck-labeled-field-label-default-position-y)) scale(1);\n\t}\n/*------ DropdownView integration ----------------------------------------------------------------------------------- */\n/* Make sure dropdown' background color in any of dropdown's state does not collide with labeled field. */\n.ck.ck-labeled-field-view > .ck.ck-labeled-field-view__input-wrapper > .ck-dropdown > .ck.ck-button {\n\t\tbackground: transparent;\n\t}\n/* When the dropdown is "empty", the labeled field label replaces its label. */\n.ck.ck-labeled-field-view.ck-labeled-field-view_empty > .ck.ck-labeled-field-view__input-wrapper > .ck-dropdown > .ck-button > .ck-button__label {\n\t\topacity: 0;\n\t}\n/* Make sure the label of the empty, unfocused input does not cover the dropdown arrow. */\n.ck.ck-labeled-field-view.ck-labeled-field-view_empty:not(.ck-labeled-field-view_focused):not(.ck-labeled-field-view_placeholder) > .ck.ck-labeled-field-view__input-wrapper > .ck-dropdown + .ck-label {\n\t\tmax-width: calc(var(--ck-labeled-field-empty-unfocused-max-width) - var(--ck-dropdown-arrow-size) - var(--ck-spacing-standard));\n\t}\n.ck.ck-labeled-field-view.ck-labeled-field-view_full-width {\n\t\tflex-grow: 1;\n\t}\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n.ck.ck-labeled-input .ck-labeled-input__status {\n\tfont-size: var(--ck-font-size-small);\n\tmargin-top: var(--ck-spacing-small);\n\n\t/* Let the info wrap to the next line to avoid stretching the layout horizontally.\n\tThe status could be very long. */\n\twhite-space: normal;\n}\n.ck.ck-labeled-input .ck-labeled-input__status_error {\n\tcolor: var(--ck-color-base-error);\n}\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n/**\n * A class which indicates that an element holding it is disabled.\n */\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n/**\n * Implements rounded corner interface for .ck-rounded-corners class.\n *\n * @see $ck-border-radius\n */\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n/**\n * A helper to combine multiple shadows.\n */\n/**\n * Gives an element a drop shadow so it looks like a floating panel.\n */\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n.ck.ck-list {\n\tborder-radius: 0;\n\n\tlist-style-type: none;\n\tbackground: var(--ck-color-list-background);\n\n\t/* A spacing at the beginning and end of the list */\n\tpadding: var(--ck-spacing-small) 0;\n}\n.ck-rounded-corners .ck.ck-list,\n\t.ck.ck-list.ck-rounded-corners {\n\t\tborder-radius: var(--ck-border-radius);\n\t}\n.ck.ck-list__item {\n\tcursor: default;\n\n\t/* Almost as wide as menu bar items. */\n\tmin-width: 15em;\n}\n.ck.ck-list__item > .ck-button:not(.ck-list-item-button) {\n\t\tpadding: var(--ck-spacing-tiny) calc(2 * var(--ck-spacing-standard));\n\t\tmin-height: unset;\n\t\twidth: 100%;\n\t\tborder-radius: 0;\n\t}\n[dir="ltr"] .ck.ck-list__item > .ck-button:not(.ck-list-item-button) {\n\t\t\ttext-align: left;\n\t}\n[dir="rtl"] .ck.ck-list__item > .ck-button:not(.ck-list-item-button) {\n\t\t\ttext-align: right;\n\t}\n.ck.ck-list__item > .ck-button:not(.ck-list-item-button) .ck-button__label {\n\t\t\t/* https://github.com/ckeditor/ckeditor5-heading/issues/63 */\n\t\t\tline-height: calc(var(--ck-line-height-base) * var(--ck-font-size-base));\n\t\t}\n.ck.ck-list__item > .ck-button:not(.ck-list-item-button):active {\n\t\t\tbox-shadow: none;\n\t\t}\n.ck.ck-list__item > .ck-button.ck-on:not(.ck-list-item-button) {\n\t\t\tbackground: var(--ck-color-list-button-on-background);\n\t\t\tcolor: var(--ck-color-list-button-on-text);\n\t\t}\n.ck.ck-list__item > .ck-button.ck-on:not(.ck-list-item-button):active {\n\t\t\t\tbox-shadow: none;\n\t\t\t}\n.ck.ck-list__item > .ck-button.ck-on:not(.ck-list-item-button):hover:not(.ck-disabled) {\n\t\t\t\tbackground: var(--ck-color-list-button-on-background-focus);\n\t\t\t}\n.ck.ck-list__item > .ck-button.ck-on:not(.ck-list-item-button):focus:not(.ck-disabled) {\n\t\t\t\tborder-color: var(--ck-color-base-background);\n\t\t\t}\n.ck.ck-list__item > .ck-button:not(.ck-list-item-button):hover:not(.ck-disabled) {\n\t\t\tbackground: var(--ck-color-list-button-hover-background);\n\t\t}\n/* It's unnecessary to change the background/text of a switch toggle; it has different ways\n\tof conveying its state (like the switcher) */\n.ck.ck-list__item > .ck-button.ck-switchbutton.ck-on {\n\t\t\tbackground: var(--ck-color-list-background);\n\t\t\tcolor: inherit;\n\t\t}\n.ck.ck-list__item > .ck-button.ck-switchbutton.ck-on:hover:not(.ck-disabled) {\n\t\t\t\tbackground: var(--ck-color-list-button-hover-background);\n\t\t\t\tcolor: inherit;\n\t\t\t}\n.ck-list .ck-list__group {\n\tpadding-top: var(--ck-spacing-medium);\n\n\t/* Lists come with an inner vertical padding. Don't duplicate it. */\n}\n.ck-list .ck-list__group:first-child {\n\t\tpadding-top: 0;\n\t}\n/* The group should have a border when it's not the first item. */\n*:not(.ck-hidden) ~ .ck-list .ck-list__group {\n\t\tborder-top: 1px solid var(--ck-color-base-border);\n\t}\n.ck-list .ck-list__group > .ck-label {\n\t\tfont-size: 11px;\n\t\tfont-weight: bold;\n\t\tpadding: var(--ck-spacing-medium) var(--ck-spacing-large) 0;\n\t}\n.ck.ck-list__separator {\n\theight: 1px;\n\twidth: 100%;\n\tbackground: var(--ck-color-base-border);\n\n\t/* Give the separator some air */\n\tmargin: var(--ck-spacing-small) 0;\n}\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n.ck.ck-menu-bar {\n\tdisplay: flex;\n\tflex-wrap: wrap;\n\tjustify-content: flex-start;\n\tbackground: var(--ck-color-base-background);\n\tpadding: var(--ck-spacing-small);\n\tgap: var(--ck-spacing-small);\n\tborder: 1px solid var(--ck-color-toolbar-border);\n\twidth: 100%;\n}\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n.ck.ck-menu-bar__menu {\n\t/* Enable font size inheritance, which allows fluid UI scaling. */\n\tfont-size: inherit;\n}\n.ck.ck-menu-bar__menu.ck-menu-bar__menu_top-level {\n\t\tmax-width: 100%;\n\t}\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n/**\n * A class which indicates that an element holding it is disabled.\n */\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n/**\n * Implements a button of given background color.\n *\n * @param {String} $background - Background color of the button.\n * @param {String} $border - Border color of the button.\n */\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n/*\n\t * All menu buttons.\n\t */\n.ck.ck-menu-bar__menu > .ck-menu-bar__menu__button {\n\t\twidth: 100%;\n\t}\n.ck.ck-menu-bar__menu > .ck-menu-bar__menu__button > .ck-button__label {\n\t\t\tflex-grow: 1;\n\t\t\toverflow: hidden;\n\t\t\ttext-overflow: ellipsis;\n\t\t}\n.ck.ck-menu-bar__menu > .ck-menu-bar__menu__button.ck-disabled > .ck-button__label {\n\t\t\topacity: var(--ck-disabled-opacity);\n\t\t}\n[dir="ltr"] .ck.ck-menu-bar__menu > .ck-menu-bar__menu__button:not(.ck-button_with-text) {\n\t\t\t\tpadding-left: var(--ck-spacing-small);\n\t\t\t}\n[dir="rtl"] .ck.ck-menu-bar__menu > .ck-menu-bar__menu__button:not(.ck-button_with-text) {\n\t\t\t\tpadding-right: var(--ck-spacing-small);\n\t\t\t}\n/*\n\t * Top-level menu buttons only.\n\t */\n.ck.ck-menu-bar__menu.ck-menu-bar__menu_top-level > .ck-menu-bar__menu__button {\n\t\tpadding: var(--ck-spacing-small) var(--ck-spacing-medium);\n\t\tmin-height: unset;\n\t}\n.ck.ck-menu-bar__menu.ck-menu-bar__menu_top-level > .ck-menu-bar__menu__button .ck-button__label {\n\t\t\twidth: unset;\n\t\t\tline-height: unset;\n\n\t\t\t/*\n\t\t\t * Top-level buttons don't use ellipsis and overflow: hidden clips descenders.\n\t\t\t *  See https://github.com/ckeditor/ckeditor5/issues/17422.\n\t\t\t */\n\t\t\toverflow: visible;\n\t\t}\n.ck.ck-menu-bar__menu.ck-menu-bar__menu_top-level > .ck-menu-bar__menu__button.ck-on {\n\t\t\tborder-bottom-left-radius: 0;\n\t\t\tborder-bottom-right-radius: 0;\n\t\t}\n.ck.ck-menu-bar__menu.ck-menu-bar__menu_top-level > .ck-menu-bar__menu__button .ck-icon {\n\t\t\tdisplay: none;\n\t\t}\n/*\n\t * Sub-menu buttons.\n\t */\n.ck.ck-menu-bar__menu:not(.ck-menu-bar__menu_top-level) .ck-menu-bar__menu__button {\n\t\tborder-radius: 0;\n\t}\n.ck.ck-menu-bar__menu:not(.ck-menu-bar__menu_top-level) .ck-menu-bar__menu__button > .ck-menu-bar__menu__button__arrow {\n\t\t\twidth: var(--ck-dropdown-arrow-size);\n\t\t}\n[dir="ltr"] .ck.ck-menu-bar__menu:not(.ck-menu-bar__menu_top-level) .ck-menu-bar__menu__button > .ck-menu-bar__menu__button__arrow {\n\t\t\t\ttransform: rotate(-90deg);\n\n\t\t\t\t/* A space to accommodate the triangle. */\n\t\t\t\tmargin-left: var(--ck-spacing-standard);\n\n\t\t\t\t/* Nudge the arrow gently to the right because its center of gravity is to the left */\n\t\t\t\tmargin-right: calc(-1 * var(--ck-spacing-small));\n\t}\n[dir="rtl"] .ck.ck-menu-bar__menu:not(.ck-menu-bar__menu_top-level) .ck-menu-bar__menu__button > .ck-menu-bar__menu__button__arrow {\n\t\t\t\ttransform: rotate(90deg);\n\n\t\t\t\tleft: var(--ck-spacing-standard);\n\n\t\t\t\t/* A space to accommodate the triangle. */\n\t\t\t\tmargin-right: var(--ck-spacing-small);\n\n\t\t\t\t/* Nudge the arrow gently to the left because its center of gravity is to the right (after rotation). */\n\t\t\t\tmargin-left: calc(-1 * var(--ck-spacing-small));\n\t}\n.ck.ck-menu-bar__menu:not(.ck-menu-bar__menu_top-level) .ck-menu-bar__menu__button.ck-disabled > .ck-menu-bar__menu__button__arrow {\n\t\t\topacity: var(--ck-disabled-opacity);\n\t\t}\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n:root {\n\t--ck-menu-bar-menu-item-min-width: 18em;\n}\n.ck.ck-menu-bar__menu .ck.ck-menu-bar__menu__item {\n\tmin-width: var(--ck-menu-bar-menu-item-min-width);\n}\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n/*\n\t * List item buttons.\n\t */\n.ck.ck-menu-bar__menu .ck-button.ck-menu-bar__menu__item__button {\n\t\tborder-radius: 0;\n\t}\n.ck.ck-menu-bar__menu .ck-button.ck-menu-bar__menu__item__button > .ck-spinner-container,\n\t\t.ck.ck-menu-bar__menu .ck-button.ck-menu-bar__menu__item__button > .ck-spinner-container .ck-spinner {\n\t\t\t/* These styles correspond to .ck-icon so that the spinner seamlessly replaces the icon. */\n\t\t\t--ck-toolbar-spinner-size: 20px;\n\t\t}\n.ck.ck-menu-bar__menu .ck-button.ck-menu-bar__menu__item__button > .ck-spinner-container {\n\t\t\t/* This ensures margins corresponding to the .ck-icon. */\n\t\t\tfont-size: var(--ck-icon-font-size);\n\t\t}\n[dir="ltr"] .ck.ck-menu-bar__menu .ck-button.ck-menu-bar__menu__item__button > .ck-spinner-container {\n\t\t\t\tmargin-right: var(--ck-spacing-medium);\n\t}\n[dir="rtl"] .ck.ck-menu-bar__menu .ck-button.ck-menu-bar__menu__item__button > .ck-spinner-container {\n\t\t\t\tmargin-left: var(--ck-spacing-medium);\n\t}\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n/**\n * Implements rounded corner interface for .ck-rounded-corners class.\n *\n * @see $ck-border-radius\n */\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n/**\n * A helper to combine multiple shadows.\n */\n/**\n * Gives an element a drop shadow so it looks like a floating panel.\n */\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n/**\n * A visual style of focused element's border.\n */\n:root {\n\t--ck-menu-bar-menu-panel-max-width: 75vw;\n}\n.ck.ck-menu-bar__menu > .ck.ck-menu-bar__menu__panel {\n\tborder-radius: 0;\n\n\tbackground: var(--ck-color-dropdown-panel-background);\n\tborder: 1px solid var(--ck-color-dropdown-panel-border);\n\tbottom: 0;\n\theight: fit-content;\n\tmax-width: var(--ck-menu-bar-menu-panel-max-width);\n}\n.ck-rounded-corners .ck.ck-menu-bar__menu > .ck.ck-menu-bar__menu__panel,\n\t.ck.ck-menu-bar__menu > .ck.ck-menu-bar__menu__panel.ck-rounded-corners {\n\t\tborder-radius: var(--ck-border-radius);\n\t}\n.ck.ck-menu-bar__menu > .ck.ck-menu-bar__menu__panel {\n\tbox-shadow: var(--ck-drop-shadow), 0 0;\n\n\t/* Corner border radius consistent with the button. */\n}\n.ck.ck-menu-bar__menu > .ck.ck-menu-bar__menu__panel.ck-menu-bar__menu__panel_position_es,\n\t.ck.ck-menu-bar__menu > .ck.ck-menu-bar__menu__panel.ck-menu-bar__menu__panel_position_se {\n\t\tborder-top-left-radius: 0;\n\t}\n.ck.ck-menu-bar__menu > .ck.ck-menu-bar__menu__panel.ck-menu-bar__menu__panel_position_ws,\n\t.ck.ck-menu-bar__menu > .ck.ck-menu-bar__menu__panel.ck-menu-bar__menu__panel_position_sw {\n\t\tborder-top-right-radius: 0;\n\t}\n.ck.ck-menu-bar__menu > .ck.ck-menu-bar__menu__panel.ck-menu-bar__menu__panel_position_en,\n\t.ck.ck-menu-bar__menu > .ck.ck-menu-bar__menu__panel.ck-menu-bar__menu__panel_position_ne {\n\t\tborder-bottom-left-radius: 0;\n\t}\n.ck.ck-menu-bar__menu > .ck.ck-menu-bar__menu__panel.ck-menu-bar__menu__panel_position_wn,\n\t.ck.ck-menu-bar__menu > .ck.ck-menu-bar__menu__panel.ck-menu-bar__menu__panel_position_nw {\n\t\tborder-bottom-right-radius: 0;\n\t}\n.ck.ck-menu-bar__menu > .ck.ck-menu-bar__menu__panel:focus {\n\t\toutline: none;\n\t}\n.ck.ck-menu-bar .ck-list-item-button:focus,\n\t\t.ck.ck-menu-bar .ck-list-item-button:active {\n\t\t\tborder-color: transparent;\n\t\t\tbox-shadow: none;\n\t\t}\n.ck.ck-menu-bar.ck-menu-bar_focus-border-enabled .ck-list-item-button:focus,\n\t\t.ck.ck-menu-bar.ck-menu-bar_focus-border-enabled .ck-list-item-button:active {\n\t\t\t/* Fix truncated shadows due to rendering order. */\n\t\t\tposition: relative;\n\t\t\tz-index: 2;\n\n\t\t\t/* Disable native outline. */\n\n\t\t\toutline: none;\n\n\t\t\tborder: var(--ck-focus-ring);\n\t\t\tbox-shadow: var(--ck-focus-outer-shadow), 0 0;\n\t\t}\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n/**\n * Implements rounded corner interface for .ck-rounded-corners class.\n *\n * @see $ck-border-radius\n */\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n/**\n * A helper to combine multiple shadows.\n */\n/**\n * Gives an element a drop shadow so it looks like a floating panel.\n */\n:root {\n\t--ck-balloon-border-width: 1px;\n\t--ck-balloon-arrow-offset: 2px;\n\t--ck-balloon-arrow-height: 10px;\n\t--ck-balloon-arrow-half-width: 8px;\n\t--ck-balloon-arrow-drop-shadow: 0 2px 2px var(--ck-color-shadow-drop);\n}\n.ck.ck-balloon-panel {\n\tborder-radius: 0;\n\n\tmin-height: 15px;\n\n\tbackground: var(--ck-color-panel-background);\n\tborder: var(--ck-balloon-border-width) solid var(--ck-color-panel-border);\n}\n.ck-rounded-corners .ck.ck-balloon-panel,\n\t.ck.ck-balloon-panel.ck-rounded-corners {\n\t\tborder-radius: var(--ck-border-radius);\n\t}\n.ck.ck-balloon-panel {\n\tbox-shadow: var(--ck-drop-shadow), 0 0;\n}\n.ck.ck-balloon-panel.ck-balloon-panel_with-arrow::before,\n\t\t.ck.ck-balloon-panel.ck-balloon-panel_with-arrow::after {\n\t\t\twidth: 0;\n\t\t\theight: 0;\n\t\t\tborder-style: solid;\n\t\t}\n.ck.ck-balloon-panel[class*="arrow_n"]::before,\n\t\t.ck.ck-balloon-panel[class*="arrow_n"]::after {\n\t\t\tborder-width: 0 var(--ck-balloon-arrow-half-width) var(--ck-balloon-arrow-height) var(--ck-balloon-arrow-half-width);\n\t\t}\n.ck.ck-balloon-panel[class*="arrow_n"]::before {\n\t\t\tborder-color: transparent transparent var(--ck-color-panel-border) transparent;\n\t\t\tmargin-top: calc( -1 * var(--ck-balloon-border-width) );\n\t\t}\n.ck.ck-balloon-panel[class*="arrow_n"]::after {\n\t\t\tborder-color: transparent transparent var(--ck-color-panel-background) transparent;\n\t\t\tmargin-top: calc( var(--ck-balloon-arrow-offset) - var(--ck-balloon-border-width) );\n\t\t}\n.ck.ck-balloon-panel[class*="arrow_s"]::before,\n\t\t.ck.ck-balloon-panel[class*="arrow_s"]::after {\n\t\t\tborder-width: var(--ck-balloon-arrow-height) var(--ck-balloon-arrow-half-width) 0 var(--ck-balloon-arrow-half-width);\n\t\t}\n.ck.ck-balloon-panel[class*="arrow_s"]::before {\n\t\t\tborder-color: var(--ck-color-panel-border) transparent transparent;\n\t\t\tfilter: drop-shadow(var(--ck-balloon-arrow-drop-shadow));\n\t\t\tmargin-bottom: calc( -1 * var(--ck-balloon-border-width) );\n\t\t}\n.ck.ck-balloon-panel[class*="arrow_s"]::after {\n\t\t\tborder-color: var(--ck-color-panel-background) transparent transparent transparent;\n\t\t\tmargin-bottom: calc( var(--ck-balloon-arrow-offset) - var(--ck-balloon-border-width) );\n\t\t}\n.ck.ck-balloon-panel[class*="arrow_e"]::before,\n\t\t.ck.ck-balloon-panel[class*="arrow_e"]::after {\n\t\t\tborder-width: var(--ck-balloon-arrow-half-width) 0 var(--ck-balloon-arrow-half-width) var(--ck-balloon-arrow-height);\n\t\t}\n.ck.ck-balloon-panel[class*="arrow_e"]::before {\n\t\t\tborder-color: transparent transparent transparent var(--ck-color-panel-border);\n\t\t\tmargin-right: calc( -1 * var(--ck-balloon-border-width) );\n\t\t}\n.ck.ck-balloon-panel[class*="arrow_e"]::after {\n\t\t\tborder-color: transparent transparent transparent var(--ck-color-panel-background);\n\t\t\tmargin-right: calc( var(--ck-balloon-arrow-offset) - var(--ck-balloon-border-width) );\n\t\t}\n.ck.ck-balloon-panel[class*="arrow_w"]::before,\n\t\t.ck.ck-balloon-panel[class*="arrow_w"]::after {\n\t\t\tborder-width: var(--ck-balloon-arrow-half-width) var(--ck-balloon-arrow-height) var(--ck-balloon-arrow-half-width) 0;\n\t\t}\n.ck.ck-balloon-panel[class*="arrow_w"]::before {\n\t\t\tborder-color: transparent var(--ck-color-panel-border) transparent transparent;\n\t\t\tmargin-left: calc( -1 * var(--ck-balloon-border-width) );\n\t\t}\n.ck.ck-balloon-panel[class*="arrow_w"]::after {\n\t\t\tborder-color: transparent var(--ck-color-panel-background) transparent transparent;\n\t\t\tmargin-left: calc( var(--ck-balloon-arrow-offset) - var(--ck-balloon-border-width) );\n\t\t}\n.ck.ck-balloon-panel.ck-balloon-panel_arrow_n::before,\n\t\t.ck.ck-balloon-panel.ck-balloon-panel_arrow_n::after {\n\t\t\tleft: 50%;\n\t\t\tmargin-left: calc(-1 * var(--ck-balloon-arrow-half-width));\n\t\t\ttop: calc(-1 * var(--ck-balloon-arrow-height));\n\t\t}\n.ck.ck-balloon-panel.ck-balloon-panel_arrow_nw::before,\n\t\t.ck.ck-balloon-panel.ck-balloon-panel_arrow_nw::after {\n\t\t\tleft: calc(2 * var(--ck-balloon-arrow-half-width));\n\t\t\ttop: calc(-1 * var(--ck-balloon-arrow-height));\n\t\t}\n.ck.ck-balloon-panel.ck-balloon-panel_arrow_ne::before,\n\t\t.ck.ck-balloon-panel.ck-balloon-panel_arrow_ne::after {\n\t\t\tright: calc(2 * var(--ck-balloon-arrow-half-width));\n\t\t\ttop: calc(-1 * var(--ck-balloon-arrow-height));\n\t\t}\n.ck.ck-balloon-panel.ck-balloon-panel_arrow_s::before,\n\t\t.ck.ck-balloon-panel.ck-balloon-panel_arrow_s::after {\n\t\t\tleft: 50%;\n\t\t\tmargin-left: calc(-1 * var(--ck-balloon-arrow-half-width));\n\t\t\tbottom: calc(-1 * var(--ck-balloon-arrow-height));\n\t\t}\n.ck.ck-balloon-panel.ck-balloon-panel_arrow_sw::before,\n\t\t.ck.ck-balloon-panel.ck-balloon-panel_arrow_sw::after {\n\t\t\tleft: calc(2 * var(--ck-balloon-arrow-half-width));\n\t\t\tbottom: calc(-1 * var(--ck-balloon-arrow-height));\n\t\t}\n.ck.ck-balloon-panel.ck-balloon-panel_arrow_se::before,\n\t\t.ck.ck-balloon-panel.ck-balloon-panel_arrow_se::after {\n\t\t\tright: calc(2 * var(--ck-balloon-arrow-half-width));\n\t\t\tbottom: calc(-1 * var(--ck-balloon-arrow-height));\n\t\t}\n.ck.ck-balloon-panel.ck-balloon-panel_arrow_sme::before,\n\t\t.ck.ck-balloon-panel.ck-balloon-panel_arrow_sme::after {\n\t\t\tright: 25%;\n\t\t\tmargin-right: calc(2 * var(--ck-balloon-arrow-half-width));\n\t\t\tbottom: calc(-1 * var(--ck-balloon-arrow-height));\n\t\t}\n.ck.ck-balloon-panel.ck-balloon-panel_arrow_smw::before,\n\t\t.ck.ck-balloon-panel.ck-balloon-panel_arrow_smw::after {\n\t\t\tleft: 25%;\n\t\t\tmargin-left: calc(2 * var(--ck-balloon-arrow-half-width));\n\t\t\tbottom: calc(-1 * var(--ck-balloon-arrow-height));\n\t\t}\n.ck.ck-balloon-panel.ck-balloon-panel_arrow_nme::before,\n\t\t.ck.ck-balloon-panel.ck-balloon-panel_arrow_nme::after {\n\t\t\tright: 25%;\n\t\t\tmargin-right: calc(2 * var(--ck-balloon-arrow-half-width));\n\t\t\ttop: calc(-1 * var(--ck-balloon-arrow-height));\n\t\t}\n.ck.ck-balloon-panel.ck-balloon-panel_arrow_nmw::before,\n\t\t.ck.ck-balloon-panel.ck-balloon-panel_arrow_nmw::after {\n\t\t\tleft: 25%;\n\t\t\tmargin-left: calc(2 * var(--ck-balloon-arrow-half-width));\n\t\t\ttop: calc(-1 * var(--ck-balloon-arrow-height));\n\t\t}\n.ck.ck-balloon-panel.ck-balloon-panel_arrow_e::before,\n\t\t.ck.ck-balloon-panel.ck-balloon-panel_arrow_e::after {\n\t\t\tright: calc(-1 * var(--ck-balloon-arrow-height));\n\t\t\tmargin-top: calc(-1 * var(--ck-balloon-arrow-half-width));\n\t\t\ttop: 50%;\n\t\t}\n.ck.ck-balloon-panel.ck-balloon-panel_arrow_w::before,\n\t\t.ck.ck-balloon-panel.ck-balloon-panel_arrow_w::after {\n\t\t\tleft: calc(-1 * var(--ck-balloon-arrow-height));\n\t\t\tmargin-top: calc(-1 * var(--ck-balloon-arrow-half-width));\n\t\t\ttop: 50%;\n\t\t}\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n.ck .ck-balloon-rotator__navigation {\n\tbackground: var(--ck-color-toolbar-background);\n\tborder-bottom: 1px solid var(--ck-color-toolbar-border);\n\tpadding: 0 var(--ck-spacing-small);\n\n\t/* Let's keep similar appearance to \`ck-toolbar\`. */\n}\n.ck .ck-balloon-rotator__navigation > * {\n\t\tmargin-right: var(--ck-spacing-small);\n\t\tmargin-top: var(--ck-spacing-small);\n\t\tmargin-bottom: var(--ck-spacing-small);\n\t}\n/* Gives counter more breath than buttons. */\n.ck .ck-balloon-rotator__navigation .ck-balloon-rotator__counter {\n\t\tmargin-right: var(--ck-spacing-standard);\n\n\t\t/* We need to use smaller margin because of previous button's right margin. */\n\t\tmargin-left: var(--ck-spacing-small);\n\t}\n/* Disable default annotation shadow inside rotator with fake panels. */\n.ck .ck-balloon-rotator__content .ck.ck-annotation-wrapper {\n\t\tbox-shadow: none;\n\t}\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n/**\n * A helper to combine multiple shadows.\n */\n/**\n * Gives an element a drop shadow so it looks like a floating panel.\n */\n:root {\n\t--ck-balloon-fake-panel-offset-horizontal: 6px;\n\t--ck-balloon-fake-panel-offset-vertical: 6px;\n}\n/* Let's use \`.ck-balloon-panel\` appearance. See: balloonpanel.css. */\n.ck .ck-fake-panel div {\n\tbox-shadow: var(--ck-drop-shadow), 0 0;\n\n\tmin-height: 15px;\n\n\tbackground: var(--ck-color-panel-background);\n\tborder: 1px solid var(--ck-color-panel-border);\n\tborder-radius: var(--ck-border-radius);\n\n\twidth: 100%;\n\theight: 100%;\n}\n.ck .ck-fake-panel div:nth-child( 1 ) {\n\tmargin-left: var(--ck-balloon-fake-panel-offset-horizontal);\n\tmargin-top: var(--ck-balloon-fake-panel-offset-vertical);\n}\n.ck .ck-fake-panel div:nth-child( 2 ) {\n\tmargin-left: calc(var(--ck-balloon-fake-panel-offset-horizontal) * 2);\n\tmargin-top: calc(var(--ck-balloon-fake-panel-offset-vertical) * 2);\n}\n.ck .ck-fake-panel div:nth-child( 3 ) {\n\tmargin-left: calc(var(--ck-balloon-fake-panel-offset-horizontal) * 3);\n\tmargin-top: calc(var(--ck-balloon-fake-panel-offset-vertical) * 3);\n}\n/* If balloon is positioned above element, we need to move fake panel to the top. */\n.ck .ck-balloon-panel_arrow_s + .ck-fake-panel,\n.ck .ck-balloon-panel_arrow_se + .ck-fake-panel,\n.ck .ck-balloon-panel_arrow_sw + .ck-fake-panel {\n\t--ck-balloon-fake-panel-offset-vertical: -6px;\n}\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n/**\n * A helper to combine multiple shadows.\n */\n/**\n * Gives an element a drop shadow so it looks like a floating panel.\n */\n.ck.ck-sticky-panel .ck-sticky-panel__content_sticky {\n\t\tbox-shadow: var(--ck-drop-shadow), 0 0;\n\n\t\tborder-width: 0 1px 1px;\n\t\tborder-top-left-radius: 0;\n\t\tborder-top-right-radius: 0;\n\t}\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n.ck-vertical-form > .ck-button:nth-last-child(2)::after {\n\tborder-right: 1px solid var(--ck-color-base-border);\n}\n.ck.ck-responsive-form {\n\tpadding: var(--ck-spacing-large);\n}\n.ck.ck-responsive-form:focus {\n\t\t/* See: https://github.com/ckeditor/ckeditor5/issues/4773 */\n\t\toutline: none;\n\t}\n[dir="ltr"] .ck.ck-responsive-form > :not(:first-child) {\n\t\t\tmargin-left: var(--ck-spacing-standard);\n\t\t}\n[dir="rtl"] .ck.ck-responsive-form > :not(:last-child) {\n\t\t\tmargin-left: var(--ck-spacing-standard);\n\t\t}\n@media screen and (max-width: 600px) {\n.ck.ck-responsive-form {\n\t\tpadding: 0;\n\t\twidth: calc(.8 * var(--ck-input-width));\n}\n\n\t\t.ck.ck-responsive-form .ck-labeled-field-view {\n\t\t\tmargin: var(--ck-spacing-large) var(--ck-spacing-large) 0;\n\t\t}\n\n\t\t\t.ck.ck-responsive-form .ck-labeled-field-view .ck-input-text,\n\t\t\t.ck.ck-responsive-form .ck-labeled-field-view .ck-input-number {\n\t\t\t\tmin-width: 0;\n\t\t\t\twidth: 100%;\n\t\t\t}\n\n\t\t\t/* Let the long error messages wrap in the narrow form. */\n\t\t\t.ck.ck-responsive-form .ck-labeled-field-view .ck-labeled-field-view__error {\n\t\t\t\twhite-space: normal;\n\t\t\t}\n\n\t\t/* Styles for two last buttons in the form (save&cancel, edit&unlink, etc.). */\n\t\t\t.ck.ck-responsive-form > .ck-button:nth-last-child(2)::after {\n\t\t\t\tborder-right: 1px solid var(--ck-color-base-border);\n\t\t\t}\n\n\t\t.ck.ck-responsive-form > .ck-button:nth-last-child(1),\n\t\t.ck.ck-responsive-form > .ck-button:nth-last-child(2) {\n\t\t\tpadding: var(--ck-spacing-standard);\n\t\t\tmargin-top: var(--ck-spacing-large);\n\t\t\tborder-radius: 0;\n\t\t}\n\n\t\t\t.ck.ck-responsive-form > .ck-button:nth-last-child(1):not(:focus), .ck.ck-responsive-form > .ck-button:nth-last-child(2):not(:focus) {\n\t\t\t\tborder-top: 1px solid var(--ck-color-base-border);\n\t\t\t}\n\n\t\t\t[dir="ltr"] .ck.ck-responsive-form > .ck-button:nth-last-child(1), [dir="ltr"] .ck.ck-responsive-form > .ck-button:nth-last-child(2) {\n\t\t\t\tmargin-left: 0;\n\t}\n\n\t\t\t[dir="rtl"] .ck.ck-responsive-form > .ck-button:nth-last-child(1), [dir="rtl"] .ck.ck-responsive-form > .ck-button:nth-last-child(2) {\n\t\t\t\tmargin-left: 0;\n\t}\n\n\t\t\t\t[dir="rtl"] .ck.ck-responsive-form > .ck-button:nth-last-child(1):last-of-type, [dir="rtl"] .ck.ck-responsive-form > .ck-button:nth-last-child(2):last-of-type {\n\t\t\t\t\tborder-right: 1px solid var(--ck-color-base-border);\n\t\t\t\t}\n\t}\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n:root {\n\t--ck-search-field-view-horizontal-spacing: calc(var(--ck-icon-size) + var(--ck-spacing-medium));\n}\n.ck.ck-search > .ck-labeled-field-view .ck-input {\n\t\t\twidth: 100%;\n\t\t}\n.ck.ck-search > .ck-labeled-field-view.ck-search__query_with-icon {\n\t\t\t--ck-labeled-field-label-default-position-x: var(--ck-search-field-view-horizontal-spacing);\n\t\t}\n.ck.ck-search > .ck-labeled-field-view.ck-search__query_with-icon > .ck-labeled-field-view__input-wrapper > .ck-icon {\n\t\t\t\topacity: .5;\n\t\t\t\tpointer-events: none;\n\t\t\t}\n.ck.ck-search > .ck-labeled-field-view.ck-search__query_with-icon .ck-input {\n\t\t\t\twidth: 100%;\n\t\t\t}\n[dir="ltr"] .ck.ck-search > .ck-labeled-field-view.ck-search__query_with-icon .ck-input {\n\t\t\t\t\tpadding-left: var(--ck-search-field-view-horizontal-spacing);\n\t}\n[dir="rtl"] .ck.ck-search > .ck-labeled-field-view.ck-search__query_with-icon .ck-input:not(.ck-input-text_empty) {\n\t\t\t\t\t\tpadding-left: var(--ck-search-field-view-horizontal-spacing);\n\t\t\t\t\t}\n.ck.ck-search > .ck-labeled-field-view.ck-search__query_with-reset {\n\t\t\t--ck-labeled-field-empty-unfocused-max-width: 100% - 2 * var(--ck-search-field-view-horizontal-spacing);\n\t\t}\n.ck.ck-search > .ck-labeled-field-view.ck-search__query_with-reset.ck-labeled-field-view_empty {\n\t\t\t\t--ck-labeled-field-empty-unfocused-max-width: 100% - var(--ck-search-field-view-horizontal-spacing) - var(--ck-spacing-medium);\n\t\t\t}\n.ck.ck-search > .ck-labeled-field-view.ck-search__query_with-reset .ck-search__reset {\n\t\t\t\tmin-width: auto;\n\t\t\t\tmin-height: auto;\n\n\t\t\t\tbackground: none;\n\t\t\t\topacity: .5;\n\t\t\t\tpadding: 0;\n\t\t\t}\n[dir="ltr"] .ck.ck-search > .ck-labeled-field-view.ck-search__query_with-reset .ck-search__reset {\n\t\t\t\t\tright: var(--ck-spacing-medium);\n\t}\n[dir="rtl"] .ck.ck-search > .ck-labeled-field-view.ck-search__query_with-reset .ck-search__reset {\n\t\t\t\t\tleft: var(--ck-spacing-medium);\n\t}\n.ck.ck-search > .ck-labeled-field-view.ck-search__query_with-reset .ck-search__reset:hover {\n\t\t\t\t\topacity: 1;\n\t\t\t\t}\n.ck.ck-search > .ck-labeled-field-view.ck-search__query_with-reset .ck-input {\n\t\t\t\twidth: 100%;\n\t\t\t}\n[dir="ltr"] .ck.ck-search > .ck-labeled-field-view.ck-search__query_with-reset .ck-input:not(.ck-input-text_empty) {\n\t\t\t\t\t\tpadding-right: var(--ck-search-field-view-horizontal-spacing);\n\t\t\t\t\t}\n[dir="rtl"] .ck.ck-search > .ck-labeled-field-view.ck-search__query_with-reset .ck-input {\n\t\t\t\t\tpadding-right: var(--ck-search-field-view-horizontal-spacing);\n\t}\n.ck.ck-search > .ck-search__results {\n\t\tmin-width: 100%;\n\t}\n.ck.ck-search > .ck-search__results > .ck-search__info {\n\t\t\twidth: 100%;\n\t\t\tpadding: var(--ck-spacing-medium) var(--ck-spacing-large);\n\t\t}\n.ck.ck-search > .ck-search__results > .ck-search__info * {\n\t\t\t\twhite-space: normal;\n\t\t\t}\n.ck.ck-search > .ck-search__results > .ck-search__info > span:first-child {\n\t\t\t\tfont-weight: bold;\n\t\t\t}\n.ck.ck-search > .ck-search__results > .ck-search__info > span:last-child {\n\t\t\t\tmargin-top: var(--ck-spacing-medium);\n\t\t\t}\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n:root {\n\t--ck-toolbar-spinner-size: 18px;\n}\n.ck.ck-spinner-container {\n\twidth: var(--ck-toolbar-spinner-size);\n\theight: var(--ck-toolbar-spinner-size);\n\tanimation: 1.5s infinite ck-spinner-rotate linear;\n}\n@media (prefers-reduced-motion: reduce) {\n.ck.ck-spinner-container {\n\t\tanimation-duration: 3s;\n}\n\t}\n.ck.ck-spinner {\n\twidth: var(--ck-toolbar-spinner-size);\n\theight: var(--ck-toolbar-spinner-size);\n\tborder-radius: 50%;\n\tborder: 2px solid var(--ck-color-text);\n\tborder-top-color: transparent;\n}\n@keyframes ck-spinner-rotate {\n\tto {\n\t\ttransform: rotate(360deg)\n\t}\n}\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n/*\n * This fixes a problem in Firefox when the initial height of the complement does not match the number of rows.\n * This bug is especially visible when rows=1.\n */\n.ck-textarea {\n\toverflow-x: hidden\n}\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n:root {\n\t--ck-color-block-toolbar-button: var(--ck-color-text);\n\t--ck-block-toolbar-button-size: var(--ck-font-size-normal);\n}\n.ck.ck-block-toolbar-button {\n\tcolor: var(--ck-color-block-toolbar-button);\n\tfont-size: var(--ck-block-toolbar-size);\n}\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n/**\n * Implements rounded corner interface for .ck-rounded-corners class.\n *\n * @see $ck-border-radius\n */\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n.ck.ck-toolbar {\n\tborder-radius: 0;\n\n\tbackground: var(--ck-color-toolbar-background);\n\tpadding: 0 var(--ck-spacing-small);\n\tborder: 1px solid var(--ck-color-toolbar-border);\n}\n.ck-rounded-corners .ck.ck-toolbar,\n\t.ck.ck-toolbar.ck-rounded-corners {\n\t\tborder-radius: var(--ck-border-radius);\n\t}\n.ck.ck-toolbar .ck.ck-toolbar__separator {\n\t\theight: var(--ck-icon-size);\n\t\twidth: 1px;\n\t\tmin-width: 1px;\n\t\tbackground: var(--ck-color-toolbar-border);\n\n\t\t/*\n\t\t * These margins make the separators look better in balloon toolbars (when aligned with the "tip").\n\t\t * See https://github.com/ckeditor/ckeditor5/issues/7493.\n\t\t */\n\t\tmargin-top: var(--ck-spacing-small);\n\t\tmargin-bottom: var(--ck-spacing-small);\n\t}\n.ck.ck-toolbar .ck-toolbar__line-break {\n\t\theight: 0;\n\t}\n.ck.ck-toolbar > .ck-toolbar__items > *:not(.ck-toolbar__line-break) {\n\t\t\t/* (#11) Separate toolbar items. */\n\t\t\tmargin-right: var(--ck-spacing-small);\n\t\t}\n/* Don't display a separator after an empty items container, for instance,\n\t\twhen all items were grouped */\n.ck.ck-toolbar > .ck-toolbar__items:empty + .ck.ck-toolbar__separator {\n\t\t\tdisplay: none;\n\t\t}\n.ck.ck-toolbar > .ck-toolbar__items > *:not(.ck-toolbar__line-break),\n\t.ck.ck-toolbar > .ck.ck-toolbar__grouped-dropdown {\n\t\t/* Make sure items wrapped to the next line have v-spacing */\n\t\tmargin-top: var(--ck-spacing-small);\n\t\tmargin-bottom: var(--ck-spacing-small);\n\t}\n.ck.ck-toolbar.ck-toolbar_vertical {\n\t\t/* Items in a vertical toolbar span the entire width. */\n\t\tpadding: 0;\n\n\t\t/* Specificity matters here. See https://github.com/ckeditor/ckeditor5-theme-lark/issues/168. */\n\t}\n.ck.ck-toolbar.ck-toolbar_vertical > .ck-toolbar__items > .ck {\n\t\t\t/* Items in a vertical toolbar should span the horizontal space. */\n\t\t\twidth: 100%;\n\n\t\t\t/* Items in a vertical toolbar should have no margin. */\n\t\t\tmargin: 0;\n\n\t\t\t/* Items in a vertical toolbar span the entire width so rounded corners are pointless. */\n\t\t\tborder-radius: 0;\n\t\t}\n.ck.ck-toolbar.ck-toolbar_compact {\n\t\t/* No spacing around items. */\n\t\tpadding: 0;\n\t}\n.ck.ck-toolbar.ck-toolbar_compact > .ck-toolbar__items > * {\n\t\t\t/* Compact toolbar items have no spacing between them. */\n\t\t\tmargin: 0;\n\n\t\t\t/* "Middle" children should have no rounded corners. */\n\t\t}\n.ck.ck-toolbar.ck-toolbar_compact > .ck-toolbar__items > *:not(:first-child):not(:last-child) {\n\t\t\t\tborder-radius: 0;\n\t\t\t}\n/*\n\t\t * Dropdown button has asymmetric padding to fit the arrow.\n\t\t * This button has no arrow so let's revert that padding back to normal.\n\t\t */\n.ck.ck-toolbar > .ck.ck-toolbar__grouped-dropdown > .ck.ck-button.ck-dropdown__button {\n\t\t\tpadding-left: var(--ck-spacing-tiny);\n\t\t}\n/* A drop-down containing the nested toolbar with configured items. */\n/* Prevent empty space in the panel when the dropdown label is visible and long but the toolbar has few items. */\n.ck.ck-toolbar .ck-toolbar__nested-toolbar-dropdown > .ck-dropdown__panel {\n\t\t\tmin-width: auto;\n\t\t}\n.ck.ck-toolbar .ck-toolbar__nested-toolbar-dropdown > .ck-button > .ck-button__label {\n\t\t\tmax-width: 7em;\n\t\t\twidth: auto;\n\t\t}\n.ck.ck-toolbar:focus {\n\t\toutline: none;\n\t}\n.ck-toolbar-container .ck.ck-toolbar {\n\t\tborder: 0;\n\t}\n/* stylelint-disable */\n/*\n * Styles for RTL toolbars.\n *\n * Note: In some cases (e.g. a decoupled editor), the toolbar has its own "dir"\n * because its parent is not controlled by the editor framework.\n */\n[dir="rtl"] .ck.ck-toolbar > .ck-toolbar__items > .ck, .ck.ck-toolbar[dir="rtl"] > .ck-toolbar__items > .ck {\n\t\tmargin-right: 0;\n\t}\n[dir="rtl"] .ck.ck-toolbar:not(.ck-toolbar_compact) > .ck-toolbar__items > .ck, .ck.ck-toolbar[dir="rtl"]:not(.ck-toolbar_compact) > .ck-toolbar__items > .ck {\n\t\t/* (#11) Separate toolbar items. */\n\t\tmargin-left: var(--ck-spacing-small);\n\t}\n[dir="rtl"] .ck.ck-toolbar > .ck-toolbar__items > .ck:last-child, .ck.ck-toolbar[dir="rtl"] > .ck-toolbar__items > .ck:last-child {\n\t\tmargin-left: 0;\n\t}\n/* No rounded corners on the right side of the first child. */\n[dir="rtl"] .ck.ck-toolbar.ck-toolbar_compact > .ck-toolbar__items > .ck:first-child, .ck.ck-toolbar.ck-toolbar_compact[dir="rtl"] > .ck-toolbar__items > .ck:first-child {\n\t\t\tborder-top-left-radius: 0;\n\t\t\tborder-bottom-left-radius: 0;\n\t\t}\n/* No rounded corners on the left side of the last child. */\n[dir="rtl"] .ck.ck-toolbar.ck-toolbar_compact > .ck-toolbar__items > .ck:last-child, .ck.ck-toolbar.ck-toolbar_compact[dir="rtl"] > .ck-toolbar__items > .ck:last-child {\n\t\t\tborder-top-right-radius: 0;\n\t\t\tborder-bottom-right-radius: 0;\n\t\t}\n/* Separate the the separator form the grouping dropdown when some items are grouped. */\n[dir="rtl"] .ck.ck-toolbar > .ck.ck-toolbar__separator, .ck.ck-toolbar[dir="rtl"] > .ck.ck-toolbar__separator {\n\t\tmargin-left: var(--ck-spacing-small);\n\t}\n/* Some spacing between the items and the separator before the grouped items dropdown. */\n[dir="rtl"] .ck.ck-toolbar.ck-toolbar_grouping > .ck-toolbar__items:not(:empty):not(:only-child), .ck.ck-toolbar.ck-toolbar_grouping[dir="rtl"] > .ck-toolbar__items:not(:empty):not(:only-child) {\n\t\tmargin-left: var(--ck-spacing-small);\n\t}\n/*\n * Styles for LTR toolbars.\n *\n * Note: In some cases (e.g. a decoupled editor), the toolbar has its own "dir"\n * because its parent is not controlled by the editor framework.\n */\n[dir="ltr"] .ck.ck-toolbar > .ck-toolbar__items > .ck:last-child, .ck.ck-toolbar[dir="ltr"] > .ck-toolbar__items > .ck:last-child {\n\t\tmargin-right: 0;\n\t}\n/* No rounded corners on the right side of the first child. */\n[dir="ltr"] .ck.ck-toolbar.ck-toolbar_compact > .ck-toolbar__items > .ck:first-child, .ck.ck-toolbar.ck-toolbar_compact[dir="ltr"] > .ck-toolbar__items > .ck:first-child {\n\t\t\tborder-top-right-radius: 0;\n\t\t\tborder-bottom-right-radius: 0;\n\t\t}\n/* No rounded corners on the left side of the last child. */\n[dir="ltr"] .ck.ck-toolbar.ck-toolbar_compact > .ck-toolbar__items > .ck:last-child, .ck.ck-toolbar.ck-toolbar_compact[dir="ltr"] > .ck-toolbar__items > .ck:last-child {\n\t\t\tborder-top-left-radius: 0;\n\t\t\tborder-bottom-left-radius: 0;\n\t\t}\n/* Separate the the separator form the grouping dropdown when some items are grouped. */\n[dir="ltr"] .ck.ck-toolbar > .ck.ck-toolbar__separator, .ck.ck-toolbar[dir="ltr"] > .ck.ck-toolbar__separator {\n\t\tmargin-right: var(--ck-spacing-small);\n\t}\n/* Some spacing between the items and the separator before the grouped items dropdown. */\n[dir="ltr"] .ck.ck-toolbar.ck-toolbar_grouping > .ck-toolbar__items:not(:empty):not(:only-child), .ck.ck-toolbar.ck-toolbar_grouping[dir="ltr"] > .ck-toolbar__items:not(:empty):not(:only-child) {\n\t\tmargin-right: var(--ck-spacing-small);\n\t}\n/* stylelint-enable */\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n/**\n * Implements rounded corner interface for .ck-rounded-corners class.\n *\n * @see $ck-border-radius\n */\n.ck.ck-balloon-panel.ck-tooltip {\n\t--ck-balloon-border-width: 0px;\n\t--ck-balloon-arrow-offset: 0px;\n\t--ck-balloon-arrow-half-width: 4px;\n\t--ck-balloon-arrow-height: 4px;\n\t--ck-tooltip-text-padding: 4px;\n\t--ck-color-panel-background: var(--ck-color-tooltip-background);\n\n\tpadding: 0 var(--ck-spacing-medium);\n\n\t/* Reset balloon panel styles */\n\tbox-shadow: none;\n}\n.ck.ck-balloon-panel.ck-tooltip .ck-tooltip__text {\n\t\tfont-size: .9em;\n\t\tline-height: 1.5;\n\t\tcolor: var(--ck-color-tooltip-text);\n\t}\n.ck.ck-balloon-panel.ck-tooltip.ck-tooltip_multi-line .ck-tooltip__text {\n\t\twhite-space: break-spaces;\n\t\tdisplay: inline-block;\n\t\tpadding: var(--ck-tooltip-text-padding) 0;\n\t\tmax-width: 200px;\n\t}\n/* Hide the default shadow of the .ck-balloon-panel tip */\n.ck.ck-balloon-panel.ck-tooltip::before {\n\t\tdisplay: none;\n\t}\n\n/* Editor */\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n/**\n * Implements rounded corner interface for .ck-rounded-corners class.\n *\n * @see $ck-border-radius\n */\n.ck.ck-editor__top .ck-sticky-panel .ck-sticky-panel__content {\n\t\t\tborder-radius: 0;\n\n\t\t\tborder: 1px solid var(--ck-color-base-border);\n\t\t\tborder-bottom-width: 0;\n\t\t}\n.ck-rounded-corners .ck.ck-editor__top .ck-sticky-panel .ck-sticky-panel__content,\n\t.ck.ck-editor__top .ck-sticky-panel .ck-sticky-panel__content.ck-rounded-corners {\n\t\tborder-radius: var(--ck-border-radius);\n\t\t\t\tborder-bottom-left-radius: 0;\n\t\t\t\tborder-bottom-right-radius: 0;\n\t}\n.ck.ck-editor__top .ck-sticky-panel .ck-sticky-panel__content.ck-sticky-panel__content_sticky {\n\t\t\t\tborder-bottom-width: 1px;\n\t\t\t}\n.ck.ck-editor__top .ck-sticky-panel .ck-sticky-panel__content .ck-menu-bar {\n\t\t\t\tborder: 0;\n\t\t\t\tborder-bottom: 1px solid var(--ck-color-base-border);\n\t\t\t}\n.ck.ck-editor__top .ck-sticky-panel .ck-sticky-panel__content .ck-toolbar {\n\t\t\t\tborder: 0;\n\t\t\t}\n/* Note: Use ck-editor__main to make sure these styles don't apply to other editor types */\n.ck.ck-editor__main > .ck-editor__editable {\n\t/* https://github.com/ckeditor/ckeditor5-theme-lark/issues/113 */\n\tbackground: var(--ck-color-base-background);\n\n\tborder-radius: 0;\n}\n.ck-rounded-corners .ck.ck-editor__main > .ck-editor__editable,\n\t.ck.ck-editor__main > .ck-editor__editable.ck-rounded-corners {\n\t\tborder-radius: var(--ck-border-radius);\n\t\tborder-top-left-radius: 0;\n\t\tborder-top-right-radius: 0;\n\t}\n.ck.ck-editor__main > .ck-editor__editable:not(.ck-focused) {\n\t\tborder-color: var(--ck-color-base-border);\n\t}\n\n/* Plugins */\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n:root {\n\t--ck-bookmark-icon-hover-fill-color: var(--ck-color-widget-hover-border);\n\t--ck-bookmark-icon-selected-fill-color: var(--ck-color-focus-border);\n\t--ck-bookmark-icon-animation-duration: var(--ck-widget-handler-animation-duration);\n\t--ck-bookmark-icon-animation-curve: var(--ck-widget-handler-animation-curve);\n}\n.ck .ck-bookmark.ck-widget {\n\t\tdisplay: inline-block;\n\t\toutline: none;\n\t}\n.ck .ck-bookmark.ck-widget .ck-bookmark__icon .ck-icon__fill {\n\t\t\ttransition: fill var(--ck-bookmark-icon-animation-duration) var(--ck-bookmark-icon-animation-curve);\n\t\t}\n.ck .ck-bookmark.ck-widget:hover .ck-bookmark__icon .ck-icon__fill {\n\t\t\t\tfill: var(--ck-bookmark-icon-hover-fill-color);\n\t\t\t}\n.ck .ck-bookmark.ck-widget.ck-widget_selected .ck-bookmark__icon .ck-icon__fill {\n\t\t\t\tfill: var(--ck-bookmark-icon-selected-fill-color);\n\t\t\t}\n.ck .ck-bookmark.ck-widget.ck-widget_selected,\n\t\t.ck .ck-bookmark.ck-widget.ck-widget_selected:hover {\n\t\t\toutline: none;\n\t\t}\n.ck .ck-bookmark.ck-widget .ck-bookmark__icon {\n\t\t\tposition: relative;\n\t\t\tdisplay: block;\n\t\t\t/* To make it align with text baseline. */\n\t\t\ttop: -0.1em;\n\t\t}\n.ck .ck-bookmark.ck-widget .ck-bookmark__icon .ck-icon {\n\t\t\t\theight: 1.2em;\n\t\t\t\twidth: auto;\n\t\t\t\tvertical-align: middle;\n\t\t\t}\n/*\n * Classes used by the "fake visual selection" displayed in the content when an input\n * in the bookmark UI has focus (the browser does not render the native selection in this state).\n */\n.ck .ck-fake-bookmark-selection {\n\tbackground: var(--ck-color-link-fake-selection);\n}\n/* A collapsed fake visual selection. */\n.ck .ck-fake-bookmark-selection_collapsed {\n\theight: 100%;\n\tborder-right: 1px solid var(--ck-color-base-text);\n\tmargin-right: -1px;\n\toutline: solid 1px hsla(0, 0%, 100%, .5);\n}\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n:root {\n\t--ck-bookmark-form-width: 340px;\n}\n@media screen and (max-width: 600px) {\n\t:root {\n\t\t--ck-bookmark-form-width: 300px;\n\t}\n\t}\n.ck.ck-bookmark-form {\n\twidth: var(--ck-bookmark-form-width);\n}\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n/**\n * Makes element unselectable.\n */\n.ck.ck-bookmark-balloon .ck.ck-toolbar > .ck-toolbar__items {\n\t\t\tflex-wrap: nowrap;\n\t\t}\n.ck.ck-bookmark-toolbar__preview {\n\tpadding: 0 var(--ck-spacing-medium);\n\tmax-width: var(--ck-input-width);\n\tmin-width: 3em;\n\tfont-weight: normal;\n\ttext-overflow: ellipsis;\n\ttext-align: center;\n\toverflow: hidden;\n\n\t-moz-user-select: none;\n\n\t-webkit-user-select: none;\n\n\t-ms-user-select: none;\n\n\tuser-select: none;\n\tcursor: default;\n}\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n:root {\n\t--ck-clipboard-drop-target-dot-width: 12px;\n\t--ck-clipboard-drop-target-dot-height: 8px;\n\t--ck-clipboard-drop-target-color: var(--ck-color-focus-border);\n}\n/*\n\t * Vertical drop target (in text).\n\t */\n.ck.ck-editor__editable .ck.ck-clipboard-drop-target-position span {\n\t\t\tbottom: calc(-.5 * var(--ck-clipboard-drop-target-dot-height));\n\t\t\ttop: calc(-.5 * var(--ck-clipboard-drop-target-dot-height));\n\t\t\tborder: 1px solid var(--ck-clipboard-drop-target-color);\n\t\t\tbackground: var(--ck-clipboard-drop-target-color);\n\t\t\tmargin-left: -1px;\n\n\t\t\t/* The triangle above the marker */\n\t\t}\n.ck.ck-editor__editable .ck.ck-clipboard-drop-target-position span::after {\n\t\t\t\tcontent: '';\n\t\t\t\twidth: 0;\n\t\t\t\theight: 0;\n\n\t\t\t\tdisplay: block;\n\t\t\t\tposition: absolute;\n\t\t\t\tleft: 50%;\n\t\t\t\ttop: calc(-.5 * var(--ck-clipboard-drop-target-dot-height));\n\n\t\t\t\ttransform: translateX(-50%);\n\t\t\t\tborder-color: var(--ck-clipboard-drop-target-color) transparent transparent transparent;\n\t\t\t\tborder-width: calc(var(--ck-clipboard-drop-target-dot-height)) calc(.5 * var(--ck-clipboard-drop-target-dot-width)) 0 calc(.5 * var(--ck-clipboard-drop-target-dot-width));\n\t\t\t\tborder-style: solid;\n\t\t\t}\n/*\n\t * Styles of the widget that it a drop target.\n\t */\n.ck.ck-editor__editable .ck-widget.ck-clipboard-drop-target-range {\n\t\toutline: var(--ck-widget-outline-thickness) solid var(--ck-clipboard-drop-target-color) !important;\n\t}\n/*\n\t * Styles of the widget being dragged (its preview).\n\t */\n.ck.ck-editor__editable .ck-widget:-webkit-drag {\n\t\tzoom: 0.6;\n\t\toutline: none !important;\n\t}\n.ck.ck-clipboard-drop-target-line {\n\theight: 0;\n\tborder: 1px solid var(--ck-clipboard-drop-target-color);\n\tbackground: var(--ck-clipboard-drop-target-color);\n\tmargin-top: -1px;\n}\n.ck.ck-clipboard-drop-target-line::before {\n\t\tcontent: '';\n\t\tposition: absolute;\n\t\ttop: calc(-.5 * var(--ck-clipboard-drop-target-dot-width));\n\t\twidth: 0;\n\t\theight: 0;\n\t\tborder-style: solid;\n\t}\n[dir="ltr"] .ck.ck-clipboard-drop-target-line::before {\n\t\t\tleft: -1px;\n\n\t\t\tborder-width: calc(.5 * var(--ck-clipboard-drop-target-dot-width)) 0 calc(.5 * var(--ck-clipboard-drop-target-dot-width)) var(--ck-clipboard-drop-target-dot-height);\n\t\t\tborder-color: transparent transparent transparent var(--ck-clipboard-drop-target-color);\n\t}\n[dir="rtl"] .ck.ck-clipboard-drop-target-line::before {\n\t\t\tright: -1px;\n\n\t\t\tborder-width:calc(.5 * var(--ck-clipboard-drop-target-dot-width)) var(--ck-clipboard-drop-target-dot-height) calc(.5 * var(--ck-clipboard-drop-target-dot-width)) 0;\n\t\t\tborder-color: transparent var(--ck-clipboard-drop-target-color) transparent transparent;\n\t}\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n:root {\n\t--ck-color-code-block-label-background: hsl(0, 0%, 46%);\n}\n.ck.ck-editor__editable pre[data-language]::after {\n\ttop: -1px;\n\tright: 10px;\n\tbackground: var(--ck-color-code-block-label-background);\n\n\tfont-size: 10px;\n\tfont-family: var(--ck-font-face);\n\tline-height: 16px;\n\tpadding: var(--ck-spacing-tiny) var(--ck-spacing-medium);\n\tcolor: hsl(0, 0%, 100%);\n\twhite-space: nowrap;\n}\n.ck.ck-code-block-dropdown .ck-dropdown__panel {\n\t/* There could be dozens of languages available. Use scroll to prevent a 10e6px dropdown. */\n\tmax-height: 250px;\n\toverflow-y: auto;\n\toverflow-x: hidden;\n}\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n/* See ckeditor/ckeditor5#936. */\n@media (forced-colors: active) {\n\t\t.ck.ck-placeholder, .ck .ck-placeholder {\n\t\t/*\n\t\t * This is needed for Edge on Windows to use the right color for the placeholder content (::before).\n\t\t * See https://github.com/ckeditor/ckeditor5/issues/14907.\n\t\t */\n\t\tforced-color-adjust: preserve-parent-color;\n\t\t}\n\t}\n.ck.ck-placeholder::before, .ck .ck-placeholder::before {\n\t\tcursor: text;\n\t}\n@media (forced-colors: none) {\n\t\t.ck.ck-placeholder::before, .ck .ck-placeholder::before {\n\t\t\tcolor: var(--ck-color-engine-placeholder-text);\n\t\t}\n\t}\n@media (forced-colors: active) {\n\t\t.ck.ck-placeholder::before, .ck .ck-placeholder::before {\n\t\t\t/*\n\t\t\t * In the high contrast mode there is no telling between regular and placeholder text. Using\n\t\t\t * italic text to address that issue. See https://github.com/ckeditor/ckeditor5/issues/14907.\n\t\t\t */\n\t\t\tfont-style: italic;\n\n\t\t\t/*\n\t\t\t * Without this margin, the caret will not show up and blink when the user puts the selection\n\t\t\t * in the placeholder (Edge on Windows). See https://github.com/ckeditor/ckeditor5/issues/14907.\n\t\t\t */\n\t\t\tmargin-left: 1px;\n\t\t}\n\t}\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n.ck.ck-find-and-replace-form {\n\twidth: 400px;\n\n\t/*\n\t * The <form> needs tabindex="-1" for proper Esc handling after being clicked\n\t * but the side effect is that this creates a nasty focus outline in some browsers.\n\t */\n}\n.ck.ck-find-and-replace-form:focus {\n\t\toutline: none;\n\t}\n/* Generic styles for the form inputs and actions. */\n.ck.ck-find-and-replace-form .ck-find-and-replace-form__inputs,\n\t.ck.ck-find-and-replace-form .ck-find-and-replace-form__actions {\n\t\tflex: 1 1 auto;\n\t\tflex-direction: row;\n\t\tflex-wrap: wrap;\n\t\talign-items: center;\n\t\talign-content: stretch;\n\n\t\tpadding: var(--ck-spacing-large);\n\t\tmargin: 0;\n\n\t}\n.ck.ck-find-and-replace-form .ck-find-and-replace-form__inputs > .ck-button, .ck.ck-find-and-replace-form .ck-find-and-replace-form__actions > .ck-button {\n\t\t\tflex: 0 0 auto;\n\t\t}\n[dir="ltr"] .ck.ck-find-and-replace-form .ck-find-and-replace-form__inputs > * + *, [dir="ltr"] .ck.ck-find-and-replace-form .ck-find-and-replace-form__actions > * + * {\n\t\t\t\tmargin-left: var(--ck-spacing-standard);\n\t\t\t}\n[dir="rtl"] .ck.ck-find-and-replace-form .ck-find-and-replace-form__inputs > * + *, [dir="rtl"] .ck.ck-find-and-replace-form .ck-find-and-replace-form__actions > * + * {\n\t\t\t\tmargin-right: var(--ck-spacing-standard);\n\t\t\t}\n.ck.ck-find-and-replace-form .ck-find-and-replace-form__inputs .ck-labeled-field-view, .ck.ck-find-and-replace-form .ck-find-and-replace-form__actions .ck-labeled-field-view {\n\t\t\tflex: 1 1 auto;\n\t\t}\n.ck.ck-find-and-replace-form .ck-find-and-replace-form__inputs .ck-labeled-field-view .ck-input, .ck.ck-find-and-replace-form .ck-find-and-replace-form__actions .ck-labeled-field-view .ck-input {\n\t\t\t\twidth: 100%;\n\t\t\t\tmin-width: 50px;\n\t\t\t}\n/* Styles specific for inputs area. */\n.ck.ck-find-and-replace-form .ck-find-and-replace-form__inputs {\n\t\t/* To display all controls in line when there's an error under the input */\n\t\talign-items: flex-start;\n\t}\n.ck.ck-find-and-replace-form .ck-find-and-replace-form__inputs > .ck-button-prev > .ck-icon {\n\t\t\ttransform: rotate(90deg);\n\t\t}\n.ck.ck-find-and-replace-form .ck-find-and-replace-form__inputs > .ck-button-next > .ck-icon {\n\t\t\ttransform: rotate(-90deg);\n\t\t}\n.ck.ck-find-and-replace-form .ck-find-and-replace-form__inputs .ck-results-counter {\n\t\t\ttop: 50%;\n\t\t\ttransform: translateY(-50%);\n\n\t\t\tcolor: var(--ck-color-base-border);\n\t\t}\n[dir="ltr"] .ck.ck-find-and-replace-form .ck-find-and-replace-form__inputs .ck-results-counter {\n\t\t\t\tright: var(--ck-spacing-standard);\n\t}\n[dir="rtl"] .ck.ck-find-and-replace-form .ck-find-and-replace-form__inputs .ck-results-counter {\n\t\t\t\tleft: var(--ck-spacing-standard);\n\t}\n.ck.ck-find-and-replace-form .ck-find-and-replace-form__inputs > .ck-labeled-field-replace {\n\t\t\tflex: 0 0 100%;\n\t\t\tpadding-top: var(--ck-spacing-standard);\n\t\t}\n[dir="ltr"] .ck.ck-find-and-replace-form .ck-find-and-replace-form__inputs > .ck-labeled-field-replace {\n\t\t\t\tmargin-left: 0;\n\t}\n[dir="rtl"] .ck.ck-find-and-replace-form .ck-find-and-replace-form__inputs > .ck-labeled-field-replace {\n\t\t\t\tmargin-right: 0;\n\t}\n/* Styles specific for actions area. */\n.ck.ck-find-and-replace-form .ck-find-and-replace-form__actions {\n\t\tflex-wrap: wrap;\n\t\tjustify-content: flex-end;\n\t\tmargin-top: calc( -1 * var(--ck-spacing-large) );\n\t}\n.ck.ck-find-and-replace-form .ck-find-and-replace-form__actions > .ck-button-find {\n\t\t\tfont-weight: bold;\n\n\t\t\t/* Beef the find button up a little. It's the main action button in the form */\n\t\t}\n.ck.ck-find-and-replace-form .ck-find-and-replace-form__actions > .ck-button-find .ck-button__label {\n\t\t\t\tpadding-left: var(--ck-spacing-large);\n\t\t\t\tpadding-right: var(--ck-spacing-large);\n\t\t\t}\n.ck.ck-find-and-replace-form .ck-switchbutton {\n\t\twidth: 100%;\n\t\tdisplay: flex;\n\t\tflex-direction: row;\n\t\tflex-wrap: nowrap;\n\t\tjustify-content: space-between;\n\t\talign-items: center;\n\t}\n@media screen and (max-width: 600px) {\n\t.ck.ck-find-and-replace-form {\n\t\twidth: 300px;\n\n\t\t/* Don't let the form overflow from the dialog (https://github.com/ckeditor/ckeditor5-commercial/issues/5913) */\n\t\tmax-width: 100%;\n\n\t\t/* Styles specific for inputs area. */\n\t}\n\t\t.ck.ck-find-and-replace-form.ck-find-and-replace-form__input {\n\t\t\tflex-wrap: wrap;\n\t\t}\n\n\t\t\t.ck.ck-find-and-replace-form.ck-find-and-replace-form__input .ck-labeled-field-view {\n\t\t\t\tflex: 1 0 auto;\n\t\t\t\twidth: 100%;\n\t\t\t\tmargin-bottom: var(--ck-spacing-standard);\n\t\t\t}\n\n\t\t\t.ck.ck-find-and-replace-form.ck-find-and-replace-form__input > .ck-button {\n\t\t\t\ttext-align: center;\n\t\t\t}\n\n\t\t\t\t.ck.ck-find-and-replace-form.ck-find-and-replace-form__input > .ck-button:first-of-type {\n\t\t\t\t\tflex: 1 1 auto;\n\t\t\t\t}\n\n\t\t\t\t\t[dir="ltr"] .ck.ck-find-and-replace-form.ck-find-and-replace-form__input > .ck-button:first-of-type {\n\t\t\t\t\t\tmargin-left: 0;\n\t}\n\n\t\t\t\t\t[dir="rtl"] .ck.ck-find-and-replace-form.ck-find-and-replace-form__input > .ck-button:first-of-type {\n\t\t\t\t\t\tmargin-right: 0;\n\t}\n\n\t\t\t\t\t.ck.ck-find-and-replace-form.ck-find-and-replace-form__input > .ck-button:first-of-type .ck-button__label {\n\t\t\t\t\t\twidth: 100%;\n\t\t\t\t\t\ttext-align: center;\n\t\t\t\t\t}\n\n\t\t/* Styles specific for actions area. */\n\t\t.ck.ck-find-and-replace-form.ck-find-and-replace-form__actions > :not(.ck-labeled-field-view) {\n\t\t\tflex-wrap: wrap;\n\t\t\tflex: 1 1 auto;\n\t\t}\n\n\t\t\t.ck.ck-find-and-replace-form.ck-find-and-replace-form__actions > :not(.ck-labeled-field-view) > .ck-button {\n\t\t\t\ttext-align: center;\n\t\t\t}\n\n\t\t\t\t.ck.ck-find-and-replace-form.ck-find-and-replace-form__actions > :not(.ck-labeled-field-view) > .ck-button:first-of-type {\n\t\t\t\t\tflex: 1 1 auto;\n\t\t\t\t}\n\n\t\t\t\t\t[dir="ltr"] .ck.ck-find-and-replace-form.ck-find-and-replace-form__actions > :not(.ck-labeled-field-view) > .ck-button:first-of-type {\n\t\t\t\t\t\tmargin-left: 0;\n\t}\n\n\t\t\t\t\t[dir="rtl"] .ck.ck-find-and-replace-form.ck-find-and-replace-form__actions > :not(.ck-labeled-field-view) > .ck-button:first-of-type {\n\t\t\t\t\t\tmargin-right: 0;\n\t}\n\n\t\t\t\t.ck.ck-find-and-replace-form.ck-find-and-replace-form__actions > :not(.ck-labeled-field-view) > .ck-button .ck-button__label {\n\t\t\t\t\twidth: 100%;\n\t\t\t\t\ttext-align: center;\n\t\t\t\t}\n\t}\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n/* Resize dropdown's button label. */\n.ck.ck-dropdown.ck-heading-dropdown .ck-dropdown__button .ck-button__label {\n\t\twidth: 8em;\n\t}\n.ck.ck-dropdown.ck-heading-dropdown .ck-dropdown__panel .ck-list__item {\n\t\tmin-width: 18em;\n\t}\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n/*\n * Note: This file should contain the wireframe styles only. But since there are no such styles,\n * it acts as a message to the builder telling that it should look for the corresponding styles\n * **in the theme** when compiling the editor.\n */\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n:root {\n\t--ck-html-embed-content-width: calc(100% - 1.5 * var(--ck-icon-size));\n\t--ck-html-embed-source-height: 10em;\n\t--ck-html-embed-unfocused-outline-width: 1px;\n\t--ck-html-embed-content-min-height: calc(var(--ck-icon-size) + var(--ck-spacing-standard));\n\n\t--ck-html-embed-source-disabled-background: var(--ck-color-base-foreground);\n\t--ck-html-embed-source-disabled-color: hsl(0deg 0% 45%);\n}\n/* The feature container. */\n.ck-widget.raw-html-embed {\n\tfont-size: var(--ck-font-size-base);\n\tbackground-color: var(--ck-color-base-foreground);\n}\n.ck-widget.raw-html-embed:not(.ck-widget_selected):not(:hover) {\n\t\toutline: var(--ck-html-embed-unfocused-outline-width) dashed var(--ck-color-widget-blurred-border);\n\t}\n/* HTML embed widget itself should respect UI language direction */\n.ck-widget.raw-html-embed[dir="ltr"] {\n\t\ttext-align: left;\n\t}\n.ck-widget.raw-html-embed[dir="rtl"] {\n\t\ttext-align: right;\n\t}\n/* ----- Embed label in the upper left corner ----------------------------------------------- */\n.ck-widget.raw-html-embed::before {\n\t\tcontent: attr(data-html-embed-label);\n\t\ttop: calc(-1 * var(--ck-html-embed-unfocused-outline-width));\n\t\tleft: var(--ck-spacing-standard);\n\t\tbackground: hsl(0deg 0% 60%);\n\t\ttransition: background var(--ck-widget-handler-animation-duration) var(--ck-widget-handler-animation-curve);\n\t\tpadding: calc(var(--ck-spacing-tiny) + var(--ck-html-embed-unfocused-outline-width)) var(--ck-spacing-small) var(--ck-spacing-tiny);\n\t\tborder-radius: 0 0 var(--ck-border-radius) var(--ck-border-radius);\n\t\tcolor: var(--ck-color-base-background);\n\t\tfont-size: var(--ck-font-size-tiny);\n\t\tfont-family: var(--ck-font-face);\n\t}\n.ck-widget.raw-html-embed[dir="rtl"]::before {\n\t\tleft: auto;\n\t\tright: var(--ck-spacing-standard);\n\t}\n/* Make space for label but it only collides in LTR languages */\n.ck-widget.raw-html-embed[dir="ltr"] .ck-widget__type-around .ck-widget__type-around__button.ck-widget__type-around__button_before {\n\t\tmargin-left: 50px;\n\t}\n.ck.ck-editor__editable.ck-blurred .ck-widget.raw-html-embed.ck-widget_selected::before {\n\t\ttop: 0px;\n\t\tpadding: var(--ck-spacing-tiny) var(--ck-spacing-small);\n\t}\n.ck.ck-editor__editable:not(.ck-blurred) .ck-widget.raw-html-embed.ck-widget_selected::before {\n\t\ttop: 0;\n\t\tpadding: var(--ck-spacing-tiny) var(--ck-spacing-small);\n\t\tbackground: var(--ck-color-focus-border);\n\t}\n.ck.ck-editor__editable .ck-widget.raw-html-embed:not(.ck-widget_selected):hover::before {\n\t\ttop: 0px;\n\t\tpadding: var(--ck-spacing-tiny) var(--ck-spacing-small);\n\t}\n/* ----- Emebed internals --------------------------------------------------------------------- */\n.ck-widget.raw-html-embed .raw-html-embed__content-wrapper {\n\t\tpadding: var(--ck-spacing-standard);\n\t}\n/* The switch mode button wrapper. */\n.ck-widget.raw-html-embed .raw-html-embed__buttons-wrapper {\n\t\ttop: var(--ck-spacing-standard);\n\t\tright: var(--ck-spacing-standard);\n\t}\n.ck-widget.raw-html-embed .raw-html-embed__buttons-wrapper .ck-button.raw-html-embed__save-button {\n\t\t\tcolor: var(--ck-color-button-save);\n\t\t}\n.ck-widget.raw-html-embed .raw-html-embed__buttons-wrapper .ck-button.raw-html-embed__cancel-button {\n\t\t\tcolor: var(--ck-color-button-cancel);\n\t\t}\n.ck-widget.raw-html-embed .raw-html-embed__buttons-wrapper .ck-button:not(:first-child) {\n\t\t\tmargin-top: var(--ck-spacing-small);\n\t\t}\n.ck-widget.raw-html-embed[dir="rtl"] .raw-html-embed__buttons-wrapper {\n\t\tleft: var(--ck-spacing-standard);\n\t\tright: auto;\n\t}\n/* The edit source element. */\n.ck-widget.raw-html-embed .raw-html-embed__source {\n\t\tbox-sizing: border-box;\n\t\theight: var(--ck-html-embed-source-height);\n\t\twidth: var(--ck-html-embed-content-width);\n\t\tresize: none;\n\t\tmin-width: 0;\n\t\tpadding: var(--ck-spacing-standard);\n\n\t\tfont-family: monospace;\n\t\ttab-size: 4;\n\t\twhite-space: pre-wrap;\n\t\tfont-size: var(--ck-font-size-base); /* Safari needs this. */\n\n\t\t/* HTML code is direction–agnostic. */\n\t\ttext-align: left;\n\t\tdirection: ltr;\n\t}\n.ck-widget.raw-html-embed .raw-html-embed__source[disabled] {\n\t\t\tbackground: var(--ck-html-embed-source-disabled-background);\n\t\t\tcolor: var(--ck-html-embed-source-disabled-color);\n\n\t\t\t/* Safari needs this for the proper text color in disabled input (https://github.com/ckeditor/ckeditor5/issues/8320). */\n\t\t\t-webkit-text-fill-color: var(--ck-html-embed-source-disabled-color);\n\t\t\topacity: 1;\n\t\t}\n/* The preview data container. */\n.ck-widget.raw-html-embed .raw-html-embed__preview {\n\t\tmin-height: var(--ck-html-embed-content-min-height);\n\t\twidth: var(--ck-html-embed-content-width);\n\n\t\t/* Disable all mouse interaction as long as the editor is not read–only. */\n\t}\n.ck-editor__editable:not(.ck-read-only) .ck-widget.raw-html-embed .raw-html-embed__preview {\n\t\t\tpointer-events: none;\n\t\t}\n.ck-widget.raw-html-embed .raw-html-embed__preview-content {\n\t\tbox-sizing: border-box;\n\t\tbackground-color: var(--ck-color-base-foreground);\n\t}\n.ck-widget.raw-html-embed .raw-html-embed__preview-content > * {\n\t\t\tmargin-left: auto;\n\t\t\tmargin-right: auto;\n\t\t}\n.ck-widget.raw-html-embed .raw-html-embed__preview-placeholder {\n\t\tcolor: var(--ck-html-embed-source-disabled-color)\n\t}\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n:root {\n\t--ck-image-insert-insert-by-url-width: 250px;\n}\n.ck.ck-image-insert-url {\n\t--ck-input-width: 100%;\n}\n.ck.ck-image-insert-url .ck-image-insert-url__action-row {\n\t\tgrid-column-gap: var(--ck-spacing-large);\n\t\tmargin-top: var(--ck-spacing-large);\n\t}\n.ck.ck-image-insert-url .ck-image-insert-url__action-row .ck-button-save,\n\t\t.ck.ck-image-insert-url .ck-image-insert-url__action-row .ck-button-cancel {\n\t\t\tjustify-content: center;\n\t\t\tmin-width: auto;\n\t\t}\n.ck.ck-image-insert-url .ck-image-insert-url__action-row .ck-button .ck-button__label {\n\t\t\tcolor: var(--ck-color-text);\n\t\t}\n.ck.ck-image-insert-form > .ck.ck-button {\n\t\tdisplay: block;\n\t\twidth: 100%;\n\t}\n[dir="ltr"] .ck.ck-image-insert-form > .ck.ck-button {\n\t\t\ttext-align: left;\n\t}\n[dir="rtl"] .ck.ck-image-insert-form > .ck.ck-button {\n\t\t\ttext-align: right;\n\t}\n.ck.ck-image-insert-form > .ck.ck-collapsible {\n\n\t\tmin-width: var(--ck-image-insert-insert-by-url-width);\n\t}\n.ck.ck-image-insert-form > .ck.ck-collapsible:not(:first-child) {\n\t\t\tborder-top: 1px solid var(--ck-color-base-border);\n\t\t}\n.ck.ck-image-insert-form > .ck.ck-collapsible:not(:last-child) {\n\t\t\tborder-bottom: 1px solid var(--ck-color-base-border);\n\t\t}\n/* This is the case when there are no other integrations configured than insert by URL */\n.ck.ck-image-insert-form > .ck.ck-image-insert-url {\n\t\tmin-width: var(--ck-image-insert-insert-by-url-width);\n\t\tpadding: var(--ck-spacing-large);\n\t}\n.ck.ck-image-insert-form:focus {\n\t\toutline: none;\n\t}\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n:root {\n\t--ck-color-image-upload-icon: hsl(0, 0%, 100%);\n\t--ck-color-image-upload-icon-background: hsl(120, 100%, 27%);\n\n\t/* Match the icon size with the linked image indicator brought by the link image feature. */\n\t--ck-image-upload-icon-size: 20;\n\t--ck-image-upload-icon-width: 2px;\n\t--ck-image-upload-icon-is-visible: clamp(0px, 100% - 50px, 1px);\n}\n.ck-image-upload-complete-icon {\n\topacity: 0;\n\tbackground: var(--ck-color-image-upload-icon-background);\n\tanimation-name: ck-upload-complete-icon-show, ck-upload-complete-icon-hide;\n\tanimation-fill-mode: forwards, forwards;\n\tanimation-duration: 500ms, 500ms;\n\n\t/* To make animation scalable. */\n\tfont-size: calc(1px * var(--ck-image-upload-icon-size));\n\n\t/* Hide completed upload icon after 3 seconds. */\n\tanimation-delay: 0ms, 3000ms;\n\n\t/*\n\t * Use CSS math to simulate container queries.\n\t * https://css-tricks.com/the-raven-technique-one-step-closer-to-container-queries/#what-about-showing-and-hiding-things\n\t */\n\toverflow: hidden;\n\twidth: calc(var(--ck-image-upload-icon-is-visible) * var(--ck-image-upload-icon-size));\n\theight: calc(var(--ck-image-upload-icon-is-visible) * var(--ck-image-upload-icon-size));\n\n\t/* This is check icon element made from border-width mixed with animations. */\n}\n.ck-image-upload-complete-icon::after {\n\t\t/* Because of border transformation we need to "hard code" left position. */\n\t\tleft: 25%;\n\n\t\ttop: 50%;\n\t\topacity: 0;\n\t\theight: 0;\n\t\twidth: 0;\n\n\t\ttransform: scaleX(-1) rotate(135deg);\n\t\ttransform-origin: left top;\n\t\tborder-top: var(--ck-image-upload-icon-width) solid var(--ck-color-image-upload-icon);\n\t\tborder-right: var(--ck-image-upload-icon-width) solid var(--ck-color-image-upload-icon);\n\n\t\tanimation-name: ck-upload-complete-icon-check;\n\t\tanimation-duration: 500ms;\n\t\tanimation-delay: 500ms;\n\t\tanimation-fill-mode: forwards;\n\n\t\t/* #1095. While reset is not providing proper box-sizing for pseudoelements, we need to handle it. */\n\t\tbox-sizing: border-box;\n\t}\n@media (prefers-reduced-motion: reduce) {\n.ck-image-upload-complete-icon {\n\t\tanimation-duration: 0ms;\n}\n\n\t\t.ck-image-upload-complete-icon::after {\n\t\t\tanimation: none;\n\t\t\topacity: 1;\n\t\t\twidth: 0.3em;\n\t\t\theight: 0.45em;\n\t\t}\n\t}\n@keyframes ck-upload-complete-icon-show {\n\tfrom {\n\t\topacity: 0;\n\t}\n\n\tto {\n\t\topacity: 1;\n\t}\n}\n@keyframes ck-upload-complete-icon-hide {\n\tfrom {\n\t\topacity: 1;\n\t}\n\n\tto {\n\t\topacity: 0;\n\t}\n}\n@keyframes ck-upload-complete-icon-check {\n\t0% {\n\t\topacity: 1;\n\t\twidth: 0;\n\t\theight: 0;\n\t}\n\t33% {\n\t\twidth: 0.3em;\n\t\theight: 0;\n\t}\n\t100% {\n\t\topacity: 1;\n\t\twidth: 0.3em;\n\t\theight: 0.45em;\n\t}\n}\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n:root {\n\t--ck-color-upload-placeholder-loader: hsl(0, 0%, 70%);\n\t--ck-upload-placeholder-loader-size: 32px;\n\t--ck-upload-placeholder-image-aspect-ratio: 2.8;\n}\n.ck .ck-image-upload-placeholder {\n\t/* We need to control the full width of the SVG gray background. */\n\twidth: 100%;\n\tmargin: 0;\n}\n.ck .ck-image-upload-placeholder.image-inline {\n\t\twidth: calc( 2 * var(--ck-upload-placeholder-loader-size) * var(--ck-upload-placeholder-image-aspect-ratio) );\n\t}\n.ck .ck-image-upload-placeholder img {\n\t\t/*\n\t\t * This is an arbitrary aspect for a 1x1 px GIF to display to the user. Not too tall, not too short.\n\t\t * There's nothing special about this number except that it should make the image placeholder look like\n\t\t * a real image during this short period after the upload started and before the image was read from the\n\t\t * file system (and a rich preview was loaded).\n\t\t */\n\t\taspect-ratio: var(--ck-upload-placeholder-image-aspect-ratio);\n\t}\n.ck .ck-upload-placeholder-loader {\n\twidth: 100%;\n\theight: 100%;\n}\n.ck .ck-upload-placeholder-loader::before {\n\t\twidth: var(--ck-upload-placeholder-loader-size);\n\t\theight: var(--ck-upload-placeholder-loader-size);\n\t\tborder-radius: 50%;\n\t\tborder-top: 3px solid var(--ck-color-upload-placeholder-loader);\n\t\tborder-right: 2px solid transparent;\n\t\tanimation: ck-upload-placeholder-loader 1s linear infinite;\n\t}\n@keyframes ck-upload-placeholder-loader {\n\tto {\n\t\ttransform: rotate( 360deg );\n\t}\n}\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n/* Showing animation. */\n.ck.ck-editor__editable .image.ck-appear, .ck.ck-editor__editable .image-inline.ck-appear {\n\t\t\tanimation: fadeIn 700ms;\n\t\t}\n@media (prefers-reduced-motion: reduce) {\n.ck.ck-editor__editable .image.ck-appear, .ck.ck-editor__editable .image-inline.ck-appear {\n\t\t\t\topacity: 1;\n\t\t\t\tanimation: none;\n\t\t}\n\t\t\t}\n/* Upload progress bar. */\n.ck.ck-editor__editable .image .ck-progress-bar,\n\t.ck.ck-editor__editable .image-inline .ck-progress-bar {\n\t\theight: 2px;\n\t\twidth: 0;\n\t\tbackground: var(--ck-color-upload-bar-background);\n\t\ttransition: width 100ms;\n\t}\n@keyframes fadeIn {\n\tfrom { opacity: 0; }\n\tto   { opacity: 1; }\n}\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n:root {\n\t--ck-text-alternative-form-width: 340px;\n}\n@media screen and (max-width: 600px) {\n\t:root {\n\t\t--ck-text-alternative-form-width: 300px;\n\t}\n\t}\n.ck.ck-text-alternative-form.ck-responsive-form {\n\t\twidth: var(--ck-text-alternative-form-width);\n\t}\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n:root {\n\t--ck-image-custom-resize-form-width: 340px;\n}\n@media screen and (max-width: 600px) {\n\t:root {\n\t\t--ck-image-custom-resize-form-width: 300px;\n\t}\n\t}\n.ck.ck-image-custom-resize-form.ck-responsive-form {\n\t\twidth: var(--ck-image-custom-resize-form-width);\n\t}\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n/* Class added to span element surrounding currently selected link. */\n.ck .ck-link_selected {\n\tbackground: var(--ck-color-link-selected-background);\n\n\t/* Give linked inline images some outline to let the user know they are also part of the link. */\n}\n.ck .ck-link_selected span.image-inline {\n\t\toutline: var(--ck-widget-outline-thickness) solid var(--ck-color-link-selected-background);\n\t}\n/*\n * Classes used by the "fake visual selection" displayed in the content when an input\n * in the link UI has focus (the browser does not render the native selection in this state).\n */\n.ck .ck-fake-link-selection {\n\tbackground: var(--ck-color-link-fake-selection);\n}\n/* A collapsed fake visual selection. */\n.ck .ck-fake-link-selection_collapsed {\n\theight: 100%;\n\tborder-right: 1px solid var(--ck-color-base-text);\n\tmargin-right: -1px;\n\toutline: solid 1px hsla(0, 0%, 100%, .5);\n}\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n:root {\n\t--ck-link-bookmark-icon-size: calc( var(--ck-icon-size) * 0.7); /* 0.7 = 14/20 cause default the icon size is 20px */\n}\n.ck.ck-toolbar.ck-link-toolbar > .ck-toolbar__items {\n\t\tflex-wrap: nowrap;\n\t}\na.ck.ck-button.ck-link-toolbar__preview {\n\tpadding: 0 var(--ck-spacing-medium);\n\tcolor: var(--ck-color-link-default);\n\tcursor: pointer;\n\tjustify-content: center;\n}\na.ck.ck-button.ck-link-toolbar__preview .ck.ck-button__label {\n\t\ttext-overflow: ellipsis;\n\n\t\t/* Match the box model of the link editor form's input so the balloon\n\t\tdoes not change width when moving between actions and the form. */\n\t\tmax-width: var(--ck-input-width);\n\t}\na.ck.ck-button.ck-link-toolbar__preview,\n\ta.ck.ck-button.ck-link-toolbar__preview:hover,\n\ta.ck.ck-button.ck-link-toolbar__preview:focus,\n\ta.ck.ck-button.ck-link-toolbar__preview:active {\n\t\tbackground: none;\n\t}\na.ck.ck-button.ck-link-toolbar__preview:active {\n\t\tbox-shadow: none;\n\t}\na.ck.ck-button.ck-link-toolbar__preview:hover,\n\ta.ck.ck-button.ck-link-toolbar__preview:focus {\n\t\ttext-decoration: underline;\n\t}\na.ck.ck-button.ck-link-toolbar__preview.ck-button_with-text .ck.ck-icon.ck-button__icon {\n\t\twidth: var(--ck-link-bookmark-icon-size);\n\t\theight: var(--ck-link-bookmark-icon-size);\n\t}\n[dir="ltr"] a.ck.ck-button.ck-link-toolbar__preview.ck-button_with-text .ck.ck-icon.ck-button__icon {\n\t\t\tmargin-right: var(--ck-spacing-tiny);\n\t\t\tmargin-left: var(--ck-spacing-small);\n\t}\n[dir="rtl"] a.ck.ck-button.ck-link-toolbar__preview.ck-button_with-text .ck.ck-icon.ck-button__icon {\n\t\t\tmargin-left: var(--ck-spacing-tiny);\n\t\t\tmargin-right: var(--ck-spacing-small);\n\t}\na.ck.ck-button.ck-link-toolbar__preview:has( .ck-icon ) {\n\t\tpadding-left: var(--ck-spacing-extra-tiny );\n\t}\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n:root {\n\t--ck-link-panel-width: 340px;\n\t/* The height of the text inside the link providers list button. */\n\t--ck-link-provider-list-item-text-height: calc(var(--ck-line-height-base) * var(--ck-font-size-base));\n\t/* The height of the link providers list item contained paddings. */\n\t--ck-link-provider-list-item-height: calc(var(--ck-link-provider-list-item-text-height) + var(--ck-spacing-small) + var(--ck-spacing-small));\n}\n@media screen and (max-width: 600px) {\n\t:root {\n\t\t--ck-link-panel-width: 300px;\n\t}\n\t}\n/* Generic class that wraps each link balloon view. */\n.ck.ck-form.ck-link-form {\n\twidth: var(--ck-link-panel-width);\n\tpadding-bottom: 0;\n}\n@media screen and (max-width: 600px) {\n.ck.ck-form.ck-link-form.ck-responsive-form .ck-labeled-field-view {\n\t\t\t\tmargin: 0;\n\t\t}\n\t}\n.ck.ck-form.ck-link-form .ck-link-form__providers-list {\n\t\tborder-top: 1px solid var(--ck-color-base-border);\n\n\t\t/* The list should be scrollable when there are more than 4 items. */\n\t}\n.ck.ck-form.ck-link-form .ck-link-form__providers-list:has(.ck-list__item:nth-child(n + 5)) {\n\t\t\toverflow: auto;\n\t\t\t/* Scroll should appear when there are more than 5 item on the list.\n\t\t\t* var(--ck-spacing-large) - is a form padding.\n\t\t\t* 1px - is a border width. */\n\t\t\tmax-height: calc(var(--ck-link-provider-list-item-height) * 4 + var(--ck-spacing-large) + 1px);\n\t\t}\n.ck.ck-form.ck-link-form .ck-link-form__providers-list .ck-link__button {\n\t\t\tpadding: var(--ck-spacing-small) var(--ck-spacing-large);\n\t\t\tborder-radius: 0;\n\t\t}\n.ck.ck-form.ck-link-form .ck-link-form__providers-list .ck-link__button > .ck-button__label {\n\t\t\t\toverflow: hidden;\n\t\t\t\ttext-overflow: ellipsis;\n\t\t\t}\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n:root {\n\t/* Match the icon size with the upload indicator brought by the image upload feature. */\n\t--ck-link-image-indicator-icon-size: 20;\n\t--ck-link-image-indicator-icon-is-visible: clamp(0px, 100% - 50px, 1px);\n}\n/* Linked image indicator */\n.ck.ck-editor__editable figure.image > a::after, .ck.ck-editor__editable a span.image-inline::after {\n\t\t\tcontent: "";\n\n\t\t\t/*\n\t\t\t * Smaller images should have the icon closer to the border.\n\t\t\t * Match the icon position with the upload indicator brought by the image upload feature.\n\t\t\t */\n\t\t\ttop: min(var(--ck-spacing-medium), 6%);\n\t\t\tright: min(var(--ck-spacing-medium), 6%);\n\n\t\t\tbackground-color: hsla(0, 0%, 0%, .4);\n\t\t\tbackground-image: url(${O});\n\t\t\tbackground-size: 14px;\n\t\t\tbackground-repeat: no-repeat;\n\t\t\tbackground-position: center;\n\t\t\tborder-radius: 100%;\n\n\t\t\t/*\n\t\t\t* Use CSS math to simulate container queries.\n\t\t\t* https://css-tricks.com/the-raven-technique-one-step-closer-to-container-queries/#what-about-showing-and-hiding-things\n\t\t\t*/\n\t\t\toverflow: hidden;\n\t\t\twidth: calc(var(--ck-link-image-indicator-icon-is-visible) * var(--ck-link-image-indicator-icon-size));\n\t\t\theight: calc(var(--ck-link-image-indicator-icon-is-visible) * var(--ck-link-image-indicator-icon-size));\n\t\t}\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n:root {\n\t--ck-link-properties-width: 340px;\n}\n@media screen and (max-width: 600px) {\n\t:root {\n\t\t--ck-link-properties-width: 300px;\n\t}\n\t}\n.ck.ck-link-properties {\n\twidth: var(--ck-link-properties-width);\n}\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n:root {\n\t--ck-link-providers-width: 340px;\n\t--ck-link-list-view-max-height: 240px;\n\t--ck-link-list-view-icon-size: calc( var(--ck-icon-size) * 0.8); /* 0.8 = 16/20 cause default the icon size is 20px */\n}\n@media screen and (max-width: 600px) {\n\t:root {\n\t\t--ck-link-providers-width: 300px;\n\t}\n\t}\n.ck.ck-link-providers {\n\twidth: var(--ck-link-providers-width);\n}\n.ck.ck-link-providers .ck-form__header__label {\n\t\toverflow: hidden;\n\t\ttext-overflow: ellipsis;\n\t}\n.ck.ck-link-providers > .ck-link-providers__list {\n\t\tmax-height: min( var(--ck-link-list-view-max-height), 40vh );\n\t}\n.ck.ck-link-providers > .ck-link-providers__list .ck-button > .ck-icon {\n\t\t\t\twidth: var(--ck-link-list-view-icon-size);\n\t\t\t\theight: var(--ck-link-list-view-icon-size);\n\t\t\t}\n.ck.ck-link-providers > .ck-link-providers__list .ck-button > .ck-button__label {\n\t\t\t\toverflow: hidden;\n\t\t\t\ttext-overflow: ellipsis;\n\t\t\t\twhite-space: nowrap;\n\t\t\t}\n.ck.ck-link-providers .ck-link__empty-list-info {\n\t\tpadding: calc( 2 * var(--ck-spacing-large) ) var(--ck-spacing-medium);\n\t\ttext-align: center;\n\t\tfont-style: italic;\n\t}\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n/* When there are no list styles and there is no collapsible. */\n.ck.ck-list-properties.ck-list-properties_without-styles {\n\t\tpadding: var(--ck-spacing-large);\n\t}\n.ck.ck-list-properties.ck-list-properties_without-styles > * {\n\t\t\tmin-width: 14em;\n\t\t}\n.ck.ck-list-properties.ck-list-properties_without-styles > * + * {\n\t\t\t\tmargin-top: var(--ck-spacing-standard);\n\t\t\t}\n/*\n\t * When the numbered list property fields (start at, reversed) should be displayed,\n\t * more horizontal space is needed. Reconfigure the style grid to create that space.\n\t */\n.ck.ck-list-properties.ck-list-properties_with-numbered-properties > .ck-list-styles-list {\n\t\t\tgrid-template-columns: repeat( 4, auto );\n\t\t}\n/* When list styles are rendered and property fields are in a collapsible. */\n.ck.ck-list-properties.ck-list-properties_with-numbered-properties > .ck-collapsible {\n\t\t\tborder-top: 1px solid var(--ck-color-base-border);\n\t\t}\n.ck.ck-list-properties.ck-list-properties_with-numbered-properties > .ck-collapsible > .ck-collapsible__children > * {\n\t\t\t\t\twidth: 100%;\n\t\t\t\t}\n.ck.ck-list-properties.ck-list-properties_with-numbered-properties > .ck-collapsible > .ck-collapsible__children > * + * {\n\t\t\t\t\t\tmargin-top: var(--ck-spacing-standard);\n\t\t\t\t\t}\n.ck.ck-list-properties .ck.ck-numbered-list-properties__start-index .ck-input {\n\t\tmin-width: auto;\n\t\twidth: 100%;\n\t}\n.ck.ck-list-properties .ck.ck-numbered-list-properties__reversed-order {\n\t\tbackground: transparent;\n\t\tpadding-left: 0;\n\t\tpadding-right: 0;\n\t\tmargin-bottom: calc(-1 * var(--ck-spacing-tiny));\n\t}\n.ck.ck-list-properties .ck.ck-numbered-list-properties__reversed-order:active, .ck.ck-list-properties .ck.ck-numbered-list-properties__reversed-order:hover {\n\t\t\tbox-shadow: none;\n\t\t\tborder-color: transparent;\n\t\t\tbackground: none;\n\t\t}\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n:root {\n\t--ck-list-style-button-size: 44px;\n}\n.ck.ck-list-styles-list {\n\tgrid-template-columns: repeat( 3, auto );\n\trow-gap: var(--ck-spacing-medium);\n\tcolumn-gap: var(--ck-spacing-medium);\n\tpadding: var(--ck-spacing-large);\n}\n.ck.ck-list-styles-list .ck-button {\n\t\t/* Make the button look like a thumbnail (the icon "takes it all"). */\n\t\twidth: var(--ck-list-style-button-size);\n\t\theight: var(--ck-list-style-button-size);\n\t\tpadding: 0;\n\n\t\t/*\n\t\t * Buttons are aligned by the grid so disable default button margins to not collide with the\n\t\t * gaps in the grid.\n\t\t */\n\t\tmargin: 0;\n\n\t\t/*\n\t\t * Make sure the button border (which is displayed on focus, BTW) does not steal pixels\n\t\t * from the button dimensions and, as a result, decrease the size of the icon\n\t\t * (which becomes blurry as it scales down).\n\t\t */\n\t\tbox-sizing: content-box;\n\t}\n.ck.ck-list-styles-list .ck-button .ck-icon {\n\t\t\twidth: var(--ck-list-style-button-size);\n\t\t\theight: var(--ck-list-style-button-size);\n\t\t}\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n:root {\n\t--ck-media-embed-placeholder-icon-size: 3em;\n\n\t--ck-color-media-embed-placeholder-url-text: hsl(0, 0%, 46%);\n\t--ck-color-media-embed-placeholder-url-text-hover: var(--ck-color-base-text);\n}\n.ck-media__wrapper {\n\tmargin: 0 auto;\n}\n.ck-media__wrapper .ck-media__placeholder {\n\t\tpadding: calc( 3 * var(--ck-spacing-standard) );\n\t\tbackground: var(--ck-color-base-foreground);\n\t}\n.ck-media__wrapper .ck-media__placeholder .ck-media__placeholder__icon {\n\t\t\tmin-width: var(--ck-media-embed-placeholder-icon-size);\n\t\t\theight: var(--ck-media-embed-placeholder-icon-size);\n\t\t\tmargin-bottom: var(--ck-spacing-large);\n\t\t\tbackground-position: center;\n\t\t\tbackground-size: cover;\n\t\t}\n.ck-media__wrapper .ck-media__placeholder .ck-media__placeholder__icon .ck-icon {\n\t\t\t\twidth: 100%;\n\t\t\t\theight: 100%;\n\t\t\t}\n.ck-media__wrapper .ck-media__placeholder .ck-media__placeholder__url__text {\n\t\t\tcolor: var(--ck-color-media-embed-placeholder-url-text);\n\t\t\twhite-space: nowrap;\n\t\t\ttext-align: center;\n\t\t\tfont-style: italic;\n\t\t\ttext-overflow: ellipsis;\n\t\t}\n.ck-media__wrapper .ck-media__placeholder .ck-media__placeholder__url__text:hover {\n\t\t\t\tcolor: var(--ck-color-media-embed-placeholder-url-text-hover);\n\t\t\t\tcursor: pointer;\n\t\t\t\ttext-decoration: underline;\n\t\t\t}\n.ck-media__wrapper[data-oembed-url*="open.spotify.com"] {\n\t\tmax-width: 300px;\n\t\tmax-height: 380px;\n\t}\n.ck-media__wrapper[data-oembed-url*="google.com/maps"] .ck-media__placeholder__icon,\n\t.ck-media__wrapper[data-oembed-url*="goo.gl/maps"] .ck-media__placeholder__icon,\n\t.ck-media__wrapper[data-oembed-url*="maps.google.com"] .ck-media__placeholder__icon,\n\t.ck-media__wrapper[data-oembed-url*="maps.app.goo.gl"] .ck-media__placeholder__icon {\n\t\tbackground-image: url(${R});\n\t}\n.ck-media__wrapper[data-oembed-url*="facebook.com"] .ck-media__placeholder {\n\t\tbackground: hsl(220, 46%, 48%);\n\t}\n.ck-media__wrapper[data-oembed-url*="facebook.com"] .ck-media__placeholder .ck-media__placeholder__icon {\n\t\t\tbackground-image: url(${D});\n\t\t}\n.ck-media__wrapper[data-oembed-url*="facebook.com"] .ck-media__placeholder .ck-media__placeholder__url__text {\n\t\t\tcolor: hsl(220, 100%, 90%);\n\t\t}\n.ck-media__wrapper[data-oembed-url*="facebook.com"] .ck-media__placeholder .ck-media__placeholder__url__text:hover {\n\t\t\t\tcolor: hsl(0, 0%, 100%);\n\t\t\t}\n.ck-media__wrapper[data-oembed-url*="instagram.com"] .ck-media__placeholder {\n\t\tbackground: linear-gradient(-135deg,hsl(246, 100%, 39%),hsl(302, 100%, 36%),hsl(0, 100%, 48%));\n\t}\n.ck-media__wrapper[data-oembed-url*="instagram.com"] .ck-media__placeholder .ck-media__placeholder__icon {\n\t\t\tbackground-image: url(${B});\n\t\t}\n/* stylelint-disable-next-line no-descending-specificity */\n.ck-media__wrapper[data-oembed-url*="instagram.com"] .ck-media__placeholder .ck-media__placeholder__url__text {\n\t\t\tcolor: hsl(302, 100%, 94%);\n\t\t}\n.ck-media__wrapper[data-oembed-url*="instagram.com"] .ck-media__placeholder .ck-media__placeholder__url__text:hover {\n\t\t\t\tcolor: hsl(0, 0%, 100%);\n\t\t\t}\n.ck-media__wrapper[data-oembed-url*="twitter.com"] .ck.ck-media__placeholder {\n\t\t/* Use gradient to contrast with focused widget (ckeditor/ckeditor5-media-embed#22). */\n\t\tbackground: linear-gradient( to right, hsl(201, 85%, 70%), hsl(201, 85%, 35%) );\n\t}\n.ck-media__wrapper[data-oembed-url*="twitter.com"] .ck.ck-media__placeholder .ck-media__placeholder__icon {\n\t\t\tbackground-image: url(${F});\n\t\t}\n.ck-media__wrapper[data-oembed-url*="twitter.com"] .ck.ck-media__placeholder .ck-media__placeholder__url__text {\n\t\t\tcolor: hsl(201, 100%, 86%);\n\t\t}\n.ck-media__wrapper[data-oembed-url*="twitter.com"] .ck.ck-media__placeholder .ck-media__placeholder__url__text:hover {\n\t\t\t\tcolor: hsl(0, 0%, 100%);\n\t\t\t}\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n:root {\n\t--ck-content-color-mention-background: hsla(341, 100%, 30%, 0.1);\n\t--ck-content-color-mention-text: hsl(341, 100%, 30%);\n}\n.ck-content .mention {\n\tbackground: var(--ck-content-color-mention-background);\n\tcolor: var(--ck-content-color-mention-text);\n}\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n:root {\n\t--ck-color-restricted-editing-exception-background: hsla(31, 100%, 65%, .2);\n\t--ck-color-restricted-editing-exception-hover-background: hsla(31, 100%, 65%, .35);\n\t--ck-color-restricted-editing-exception-brackets: hsla(31, 100%, 40%, .4);\n\t--ck-color-restricted-editing-selected-exception-background: hsla(31, 100%, 65%, .5);\n\t--ck-color-restricted-editing-selected-exception-brackets: hsla(31, 100%, 40%, .6);\n}\n.ck-editor__editable .restricted-editing-exception {\n\ttransition: .2s ease-in-out background;\n\tbackground-color: var(--ck-color-restricted-editing-exception-background);\n\tborder: 1px solid;\n\tborder-image: linear-gradient(\n\t\tto right,\n\t\tvar(--ck-color-restricted-editing-exception-brackets) 0%,\n\t\tvar(--ck-color-restricted-editing-exception-brackets) 5px,\n\t\thsla(0, 0%, 0%, 0) 6px,\n\t\thsla(0, 0%, 0%, 0) calc(100% - 6px),\n\t\tvar(--ck-color-restricted-editing-exception-brackets) calc(100% - 5px),\n\t\tvar(--ck-color-restricted-editing-exception-brackets) 100%\n\t) 1;\n}\n@media (prefers-reduced-motion: reduce) {\n.ck-editor__editable .restricted-editing-exception {\n\t\ttransition: none;\n}\n\t}\n.ck-editor__editable .restricted-editing-exception.restricted-editing-exception_selected {\n\t\tbackground-color: var(--ck-color-restricted-editing-selected-exception-background);\n\t\tborder-image: linear-gradient(\n\t\t\tto right,\n\t\t\tvar(--ck-color-restricted-editing-selected-exception-brackets) 0%,\n\t\t\tvar(--ck-color-restricted-editing-selected-exception-brackets) 5px,\n\t\t\tvar(--ck-color-restricted-editing-selected-exception-brackets) calc(100% - 5px),\n\t\t\tvar(--ck-color-restricted-editing-selected-exception-brackets) 100%\n\t\t) 1;\n\t}\n.ck-editor__editable .restricted-editing-exception.restricted-editing-exception_collapsed {\n\t\t/* Empty exception should have the same width as exception with at least 1 char */\n\t\tpadding-left: 1ch;\n\t}\n.ck-restricted-editing_mode_restricted {\n\tcursor: default;\n\n\t/* We also have to override all elements inside the restricted editable to prevent cursor switching between default and text\n\tduring the pointer movement. */\n}\n.ck-restricted-editing_mode_restricted * {\n\t\tcursor: default;\n\t}\n.ck-restricted-editing_mode_restricted .restricted-editing-exception {\n\t\tcursor: text;\n\t}\n.ck-restricted-editing_mode_restricted .restricted-editing-exception * {\n\t\t\tcursor: text;\n\t\t}\n.ck-restricted-editing_mode_restricted .restricted-editing-exception:hover {\n\t\t\tbackground: var(--ck-color-restricted-editing-exception-hover-background);\n\t\t}\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n/**\n * Implements rounded corner interface for .ck-rounded-corners class.\n *\n * @see $ck-border-radius\n */\n:root {\n\t--ck-character-grid-tile-size: 24px;\n}\n.ck.ck-character-grid {\n\toverflow-y: auto;\n\toverflow-x: hidden;\n}\n.ck.ck-character-grid .ck-character-grid__tiles {\n\t\tgrid-template-columns: repeat(auto-fill, minmax(var(--ck-character-grid-tile-size), 1fr));\n\t\tmargin: var(--ck-spacing-standard) var(--ck-spacing-large);\n\t\tgrid-gap: var(--ck-spacing-standard);\n\t}\n.ck.ck-character-grid .ck-character-grid__tile {\n\t\twidth: var(--ck-character-grid-tile-size);\n\t\theight: var(--ck-character-grid-tile-size);\n\t\tmin-width: var(--ck-character-grid-tile-size);\n\t\tmin-height: var(--ck-character-grid-tile-size);\n\t\tfont-size: 1.5em;\n\t\tpadding: 0;\n\t\ttransition: .2s ease box-shadow;\n\t\tborder: 0;\n\t}\n@media (prefers-reduced-motion: reduce) {\n.ck.ck-character-grid .ck-character-grid__tile {\n\t\t\ttransition: none;\n\t}\n\t\t}\n.ck.ck-character-grid .ck-character-grid__tile:focus:not( .ck-disabled ),\n\t\t.ck.ck-character-grid .ck-character-grid__tile:hover:not( .ck-disabled ) {\n\t\t\t/* Disable the default .ck-button's border ring. */\n\t\t\tborder: 0;\n\t\t\tbox-shadow: inset 0 0 0 1px var(--ck-color-base-background), 0 0 0 2px var(--ck-color-focus-border);\n\t\t}\n/* Make sure the glyph is rendered in the center of the button */\n.ck.ck-character-grid .ck-character-grid__tile .ck-button__label {\n\t\t\tline-height: var(--ck-character-grid-tile-size);\n\t\t\twidth: 100%;\n\t\t\ttext-align: center;\n\t\t}\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n.ck.ck-character-info {\n\tpadding: var(--ck-spacing-small) var(--ck-spacing-large);\n\tborder-top: 1px solid var(--ck-color-base-border);\n}\n.ck.ck-character-info > * {\n\t\ttext-transform: uppercase;\n\t\tfont-size: var(--ck-font-size-small);\n\t}\n.ck.ck-character-info .ck-character-info__name {\n\t\tmax-width: 280px;\n\t\ttext-overflow: ellipsis;\n\t\toverflow: hidden;\n\t}\n.ck.ck-character-info .ck-character-info__code {\n\t\topacity: .6;\n\t}\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n.ck.ck-special-characters-navigation > .ck-label {\n\t\tmax-width: 160px;\n\t\ttext-overflow: ellipsis;\n\t\toverflow: hidden;\n\t}\n.ck.ck-special-characters-navigation > .ck-dropdown .ck-dropdown__panel {\n\t\t/* There could be dozens of categories available. Use scroll to prevent a 10e6px dropdown. */\n\t\tmax-height: 250px;\n\t\toverflow-y: auto;\n\t\toverflow-x: hidden;\n\t}\n@media screen and (max-width: 600px) {\n.ck.ck-special-characters-navigation {\n\t\tmax-width: 190px;\n}\n\n\t\t.ck.ck-special-characters-navigation > .ck-form__header__label {\n\t\t\ttext-overflow: ellipsis;\n\t\t\toverflow: hidden;\n\t\t}\n\t}\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n.ck.ck-dropdown.ck-style-dropdown.ck-style-dropdown_multiple-active > .ck-button > .ck-button__label {\n\tfont-style: italic;\n}\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n:root {\n\t--ck-style-panel-button-width: 120px;\n\t--ck-style-panel-button-height: 80px;\n\t--ck-style-panel-button-label-background: hsl(0, 0%, 94.1%);\n\t--ck-style-panel-button-hover-label-background: hsl(0, 0%, 92.1%);\n\t--ck-style-panel-button-hover-border-color: hsl(0, 0%, 70%);\n}\n.ck.ck-style-panel .ck-style-grid {\n\trow-gap: var(--ck-spacing-large);\n\tcolumn-gap: var(--ck-spacing-large);\n}\n.ck.ck-style-panel .ck-style-grid .ck-style-grid__button {\n\t\t--ck-color-button-default-hover-background: var(--ck-color-base-background);\n\t\t--ck-color-button-default-active-background: var(--ck-color-base-background);\n\n\t\tpadding: 0;\n\t\twidth: var(--ck-style-panel-button-width);\n\t\theight: var(--ck-style-panel-button-height);\n\n\t\t/* Let default .ck-button :focus styles apply */\n\t}\n.ck.ck-style-panel .ck-style-grid .ck-style-grid__button:not(:focus) {\n\t\t\tborder: 1px solid var(--ck-color-base-border);\n\t\t}\n.ck.ck-style-panel .ck-style-grid .ck-style-grid__button .ck-button__label {\n\t\t\theight: 22px;\n\t\t\tline-height: 22px;\n\t\t\twidth: 100%;\n\t\t\tpadding: 0 var(--ck-spacing-medium);\n\t\t\toverflow: hidden;\n\t\t\ttext-overflow: ellipsis;\n\t\t\tflex-shrink: 0;\n\t\t}\n.ck.ck-style-panel .ck-style-grid .ck-style-grid__button .ck-style-grid__button__preview {\n\t\t\twidth: 100%;\n\t\t\toverflow: hidden;\n\t\t\topacity: .9;\n\n\t\t\tpadding: var(--ck-spacing-medium);\n\t\t\tbackground: var(--ck-color-base-background);\n\t\t\tborder: 2px solid var(--ck-color-base-background);\n\t\t}\n.ck.ck-style-panel .ck-style-grid .ck-style-grid__button.ck-disabled {\n\t\t\t--ck-color-button-default-disabled-background: var(--ck-color-base-foreground);\n\n\t\t\t/* Let default .ck-button :focus styles apply */\n\t\t}\n.ck.ck-style-panel .ck-style-grid .ck-style-grid__button.ck-disabled:not(:focus) {\n\t\t\t\tborder-color: var(--ck-style-panel-button-label-background);\n\t\t\t}\n.ck.ck-style-panel .ck-style-grid .ck-style-grid__button.ck-disabled .ck-style-grid__button__preview {\n\t\t\t\topacity: .4;\n\n\t\t\t\tborder-color: var(--ck-color-base-foreground);\n\t\t\t\tfilter: saturate(.3);\n\t\t\t}\n.ck.ck-style-panel .ck-style-grid .ck-style-grid__button.ck-on {\n\t\t\tborder-color: var(--ck-color-base-active);\n\t\t}\n.ck.ck-style-panel .ck-style-grid .ck-style-grid__button.ck-on .ck-button__label {\n\t\t\t\tbox-shadow: 0 -1px 0 var(--ck-color-base-active);\n\t\t\t\tz-index: 1; /* Stay on top of the preview with the shadow. */\n\t\t\t}\n.ck.ck-style-panel .ck-style-grid .ck-style-grid__button.ck-on:hover {\n\t\t\t\tborder-color: var(--ck-color-base-active-focus);\n\t\t\t}\n.ck.ck-style-panel .ck-style-grid .ck-style-grid__button:not(.ck-on) .ck-button__label {\n\t\t\t\tbackground: var(--ck-style-panel-button-label-background);\n\t\t\t}\n.ck.ck-style-panel .ck-style-grid .ck-style-grid__button:not(.ck-on):hover .ck-button__label {\n\t\t\t\tbackground: var(--ck-style-panel-button-hover-label-background);\n\t\t\t}\n.ck.ck-style-panel .ck-style-grid .ck-style-grid__button:hover:not(.ck-disabled):not(.ck-on) {\n\t\t\tborder-color: var(--ck-style-panel-button-hover-border-color);\n\t\t}\n.ck.ck-style-panel .ck-style-grid .ck-style-grid__button:hover:not(.ck-disabled):not(.ck-on) .ck-style-grid__button__preview {\n\t\t\t\topacity: 1;\n\t\t\t}\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n.ck.ck-style-panel .ck-style-panel__style-group > .ck-label {\n\t\tmargin: var(--ck-spacing-large) 0;\n\t}\n.ck.ck-style-panel .ck-style-panel__style-group:first-child > .ck-label {\n\t\t\tmargin-top: 0;\n\t\t}\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n:root {\n\t--ck-style-panel-max-height: 470px;\n}\n.ck.ck-style-panel {\n\tpadding: var(--ck-spacing-large);\n\toverflow-y: auto;\n\tmax-height: var(--ck-style-panel-max-height);\n}\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n/**\n * Implements rounded corner interface for .ck-rounded-corners class.\n *\n * @see $ck-border-radius\n */\n[dir="ltr"] .ck.ck-input-color > .ck.ck-input-text {\n\t\t\tborder-top-right-radius: 0;\n\t\t\tborder-bottom-right-radius: 0;\n\t}\n[dir="rtl"] .ck.ck-input-color > .ck.ck-input-text {\n\t\t\tborder-top-left-radius: 0;\n\t\t\tborder-bottom-left-radius: 0;\n\t}\n/* Make sure the focused input is always on top of the dropdown button so its\n\t\t   outline and border are never cropped (also when the input is read-only). */\n.ck.ck-input-color > .ck.ck-input-text:focus {\n\t\t\tz-index: 0;\n\t\t}\n.ck.ck-input-color > .ck.ck-dropdown > .ck.ck-button.ck-input-color__button {\n\t\t\tpadding: 0;\n\t\t}\n[dir="ltr"] .ck.ck-input-color > .ck.ck-dropdown > .ck.ck-button.ck-input-color__button {\n\t\t\t\tborder-top-left-radius: 0;\n\t\t\t\tborder-bottom-left-radius: 0;\n\t}\n[dir="ltr"] .ck.ck-input-color > .ck.ck-dropdown > .ck.ck-button.ck-input-color__button:not(:focus) {\n\t\t\t\t\tborder-left: 1px solid transparent;\n\t\t\t\t}\n[dir="rtl"] .ck.ck-input-color > .ck.ck-dropdown > .ck.ck-button.ck-input-color__button {\n\t\t\t\tborder-top-right-radius: 0;\n\t\t\t\tborder-bottom-right-radius: 0;\n\t}\n[dir="rtl"] .ck.ck-input-color > .ck.ck-dropdown > .ck.ck-button.ck-input-color__button:not(:focus) {\n\t\t\t\t\tborder-right: 1px solid transparent;\n\t\t\t\t}\n.ck.ck-input-color > .ck.ck-dropdown > .ck.ck-button.ck-input-color__button.ck-disabled {\n\t\t\t\tbackground: var(--ck-color-input-disabled-background);\n\t\t\t}\n.ck.ck-input-color > .ck.ck-dropdown > .ck.ck-button.ck-input-color__button > .ck.ck-input-color__button__preview {\n\t\t\t\tborder-radius: 0;\n\n\t\t\t\twidth: 20px;\n\t\t\t\theight: 20px;\n\t\t\t\tborder: 1px solid var(--ck-color-input-border);\n\t\t\t}\n.ck-rounded-corners .ck.ck-input-color > .ck.ck-dropdown > .ck.ck-button.ck-input-color__button > .ck.ck-input-color__button__preview,\n\t.ck.ck-input-color > .ck.ck-dropdown > .ck.ck-button.ck-input-color__button > .ck.ck-input-color__button__preview.ck-rounded-corners {\n\t\tborder-radius: var(--ck-border-radius);\n\t}\n.ck.ck-input-color > .ck.ck-dropdown > .ck.ck-button.ck-input-color__button > .ck.ck-input-color__button__preview > .ck.ck-input-color__button__preview__no-color-indicator {\n\t\t\t\t\ttop: -30%;\n\t\t\t\t\tleft: 50%;\n\t\t\t\t\theight: 150%;\n\t\t\t\t\twidth: 8%;\n\t\t\t\t\tbackground: hsl(0, 100%, 50%);\n\t\t\t\t\tborder-radius: 2px;\n\t\t\t\t\ttransform: rotate(45deg);\n\t\t\t\t\ttransform-origin: 50%;\n\t\t\t\t}\n.ck.ck-input-color .ck.ck-input-color__remove-color {\n\t\twidth: 100%;\n\t\tpadding: calc(var(--ck-spacing-standard) / 2) var(--ck-spacing-standard);\n\n\t\tborder-bottom-left-radius: 0;\n\t\tborder-bottom-right-radius: 0;\n\t}\n.ck.ck-input-color .ck.ck-input-color__remove-color:not(:focus) {\n\t\t\tborder-bottom: 1px solid var(--ck-color-input-border);\n\t\t}\n[dir="ltr"] .ck.ck-input-color .ck.ck-input-color__remove-color {\n\t\t\tborder-top-right-radius: 0;\n\t}\n[dir="rtl"] .ck.ck-input-color .ck.ck-input-color__remove-color {\n\t\t\tborder-top-left-radius: 0;\n\t}\n.ck.ck-input-color .ck.ck-input-color__remove-color .ck.ck-icon {\n\t\t\tmargin-right: var(--ck-spacing-standard);\n\t\t}\n[dir="rtl"] .ck.ck-input-color .ck.ck-input-color__remove-color .ck.ck-icon {\n\t\t\t\tmargin-right: 0;\n\t\t\t\tmargin-left: var(--ck-spacing-standard);\n\t}\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n/* Ignore labels that work as fieldset legends */\n.ck.ck-form__row > *:not(.ck-label) + * {\n\t\t\tmargin-inline-start: var(--ck-spacing-large);\n\t\t}\n.ck.ck-form__row > .ck-label {\n\t\twidth: 100%;\n\t\tmin-width: 100%;\n\t}\n.ck.ck-form__row.ck-table-form__action-row {\n\t\tmargin-top: var(--ck-spacing-large);\n\t}\n.ck.ck-form__row.ck-table-form__action-row .ck-button .ck-button__label {\n\t\t\tcolor: var(--ck-color-text);\n\t\t}\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n:root {\n\t--ck-insert-table-dropdown-padding: 10px;\n\t--ck-insert-table-dropdown-box-height: 11px;\n\t--ck-insert-table-dropdown-box-width: 12px;\n\t--ck-insert-table-dropdown-box-margin: 1px;\n}\n.ck .ck-insert-table-dropdown__grid {\n\t/* The width of a container should match 10 items in a row so there will be a 10x10 grid. */\n\twidth: calc(var(--ck-insert-table-dropdown-box-width) * 10 + var(--ck-insert-table-dropdown-box-margin) * 20 + var(--ck-insert-table-dropdown-padding) * 2);\n\tpadding: var(--ck-insert-table-dropdown-padding) var(--ck-insert-table-dropdown-padding) 0;\n}\n.ck .ck-insert-table-dropdown__label,\n.ck[dir=rtl] .ck-insert-table-dropdown__label {\n\ttext-align: center;\n}\n.ck .ck-insert-table-dropdown-grid-box {\n\tmin-width: var(--ck-insert-table-dropdown-box-width);\n\tmin-height: var(--ck-insert-table-dropdown-box-height);\n\tmargin: var(--ck-insert-table-dropdown-box-margin);\n\tborder: 1px solid var(--ck-color-base-border);\n\tborder-radius: 1px;\n\toutline: none;\n\ttransition: none;\n}\n@media (prefers-reduced-motion: reduce) {\n.ck .ck-insert-table-dropdown-grid-box {\n\t\ttransition: none;\n}\n\t}\n.ck .ck-insert-table-dropdown-grid-box:focus {\n\t\tbox-shadow: none;\n\t}\n.ck .ck-insert-table-dropdown-grid-box.ck-on {\n\t\tborder-color: var(--ck-color-focus-border);\n\t\tbackground: var(--ck-color-focus-outer-shadow);\n\t}\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n.ck.ck-table-cell-properties-form {\n\twidth: 320px;\n}\n.ck.ck-table-cell-properties-form .ck-form__row.ck-table-cell-properties-form__padding-row {\n\t\t\talign-self: flex-end;\n\t\t\tpadding: 0;\n\t\t\twidth: 25%;\n\t\t}\n.ck.ck-table-cell-properties-form .ck-form__row.ck-table-cell-properties-form__alignment-row .ck.ck-toolbar {\n\t\t\t\tbackground: none;\n\n\t\t\t\t/* Compensate for missing input label that would push the margin (toolbar has no inputs). */\n\t\t\t\tmargin-top: var(--ck-spacing-standard);\n\t\t\t}\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n:root {\n\t--ck-color-table-focused-cell-background: hsla(212, 90%, 80%, .3);\n\t--ck-table-content-default-border-color: hsl(0, 0%, 83%);\n}\n/* Dashed outline for table without any border. */\n.ck-widget.table table[style*="border:none"],\n\t.ck-widget.table table[style*="border-style:none"] {\n\t\toutline: var(--ck-table-content-default-border-color) 1px dashed;\n\t}\n/**\n\t\t * While setting outline is fine, the border should not be modified here\n\t\t * because it overrides the default table cell border color which is not expected.\n\t\t * So do not use \`@mixin ck-focus-ring;\` here, or any other border styles.\n\t\t * See more: https://github.com/ckeditor/ckeditor5/issues/16979\n\t\t */\n.ck-widget.table td.ck-editor__nested-editable, .ck-widget.table th.ck-editor__nested-editable {\n\t\t\toutline: unset;\n\t\t}\n.ck-widget.table td.ck-editor__nested-editable.ck-editor__nested-editable_focused:not(.ck-editor__editable_selected),\n\t\t\t\t.ck-widget.table th.ck-editor__nested-editable.ck-editor__nested-editable_focused:not(.ck-editor__editable_selected),\n\t\t\t\t.ck-widget.table td.ck-editor__nested-editable:not(.ck-editor__editable_selected):focus,\n\t\t\t\t.ck-widget.table th.ck-editor__nested-editable:not(.ck-editor__editable_selected):focus {\n\t\t\t\t\t/* A very slight background to highlight the focused cell */\n\t\t\t\t\tbackground: var(--ck-color-table-focused-cell-background);\n\t\t\t\t\toutline: 1px solid var(--ck-color-focus-border);\n\t\t\t\t\toutline-offset: -1px; /* progressive enhancement - no IE support */\n\t\t\t\t}\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n/**\n * Implements rounded corner interface for .ck-rounded-corners class.\n *\n * @see $ck-border-radius\n */\n:root {\n\t--ck-table-properties-error-arrow-size: 6px;\n\t--ck-table-properties-min-error-width: 150px;\n}\n.ck.ck-table-form .ck-form__row.ck-table-form__border-row .ck-labeled-field-view > .ck-label {\n\t\t\t\t\tfont-size: var(--ck-font-size-tiny);\n\t\t\t\t\ttext-align: center;\n\t\t\t\t}\n.ck.ck-table-form .ck-form__row.ck-table-form__border-row .ck-table-form__border-style,\n\t\t\t.ck.ck-table-form .ck-form__row.ck-table-form__border-row .ck-table-form__border-width {\n\t\t\t\twidth: 80px;\n\t\t\t\tmin-width: 80px;\n\t\t\t\tmax-width: 80px;\n\t\t\t}\n.ck.ck-table-form .ck-form__row.ck-table-form__dimensions-row {\n\t\t\tpadding: 0;\n\t\t}\n.ck.ck-table-form .ck-form__row.ck-table-form__dimensions-row .ck-table-form__dimensions-row__width,\n\t\t\t.ck.ck-table-form .ck-form__row.ck-table-form__dimensions-row .ck-table-form__dimensions-row__height {\n\t\t\t\tmargin: 0\n\t\t\t}\n.ck.ck-table-form .ck-form__row.ck-table-form__dimensions-row .ck-table-form__dimension-operator {\n\t\t\t\talign-self: flex-end;\n\t\t\t\tdisplay: inline-block;\n\t\t\t\theight: var(--ck-ui-component-min-height);\n\t\t\t\tline-height: var(--ck-ui-component-min-height);\n\t\t\t\tmargin: 0 var(--ck-spacing-small);\n\t\t\t}\n.ck.ck-table-form .ck.ck-labeled-field-view {\n\t\tpadding-top: var(--ck-spacing-standard);\n\t}\n.ck.ck-table-form .ck.ck-labeled-field-view .ck.ck-labeled-field-view__status {\n\t\t\tborder-radius: 0;\n\n\t\t\tbackground: var(--ck-color-base-error);\n\t\t\tcolor: var(--ck-color-base-background);\n\t\t\tpadding: var(--ck-spacing-small) var(--ck-spacing-medium);\n\t\t\tmin-width: var(--ck-table-properties-min-error-width);\n\t\t\ttext-align: center;\n\n\t\t\tanimation: ck-table-form-labeled-view-status-appear .15s ease both;\n\t\t}\n.ck-rounded-corners .ck.ck-table-form .ck.ck-labeled-field-view .ck.ck-labeled-field-view__status,\n\t.ck.ck-table-form .ck.ck-labeled-field-view .ck.ck-labeled-field-view__status.ck-rounded-corners {\n\t\tborder-radius: var(--ck-border-radius);\n\t}\n/* The arrow pointing towards the field. */\n.ck.ck-table-form .ck.ck-labeled-field-view .ck.ck-labeled-field-view__status::after {\n\t\t\t\tborder-color: transparent transparent var(--ck-color-base-error) transparent;\n\t\t\t\tborder-width: 0 var(--ck-table-properties-error-arrow-size) var(--ck-table-properties-error-arrow-size) var(--ck-table-properties-error-arrow-size);\n\t\t\t\tborder-style: solid;\n\t\t\t}\n@media (prefers-reduced-motion: reduce) {\n.ck.ck-table-form .ck.ck-labeled-field-view .ck.ck-labeled-field-view__status {\n\t\t\t\tanimation: none;\n\t\t}\n\t\t\t}\n/* Hide the error balloon when the field is blurred. Makes the experience much more clear. */\n.ck.ck-table-form .ck.ck-labeled-field-view .ck-input.ck-error:not(:focus) + .ck.ck-labeled-field-view__status {\n\t\t\tdisplay: none;\n\t\t}\n@keyframes ck-table-form-labeled-view-status-appear {\n\t0% {\n\t\topacity: 0;\n\t}\n\n\t100% {\n\t\topacity: 1;\n\t}\n}\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n.ck.ck-table-properties-form {\n\twidth: 320px;\n}\n.ck.ck-table-properties-form .ck-form__row.ck-table-properties-form__alignment-row {\n\t\t\talign-self: flex-end;\n\t\t\tpadding: 0;\n\t\t}\n.ck.ck-table-properties-form .ck-form__row.ck-table-properties-form__alignment-row .ck.ck-toolbar {\n\t\t\t\tbackground: none;\n\n\t\t\t\t/* Compensate for missing input label that would push the margin (toolbar has no inputs). */\n\t\t\t\tmargin-top: var(--ck-spacing-standard);\n\t\t\t}\n.ck.ck-table-properties-form .ck-form__row.ck-table-properties-form__alignment-row .ck.ck-toolbar .ck-toolbar__items > * {\n\t\t\t\t\twidth: 40px;\n\t\t\t\t}\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n:root {\n\t--ck-table-selected-cell-background: hsla(208, 90%, 80%, .3);\n}\n.ck.ck-editor__editable .table table td.ck-editor__editable_selected,\n\t.ck.ck-editor__editable .table table th.ck-editor__editable_selected {\n\t\tposition: relative;\n\t\tcaret-color: transparent;\n\t\tbox-shadow: unset;\n\n\t\t/* https://github.com/ckeditor/ckeditor5/issues/6446 */\n\t}\n.ck.ck-editor__editable .table table td.ck-editor__editable_selected:after, .ck.ck-editor__editable .table table th.ck-editor__editable_selected:after {\n\t\t\tcontent: '';\n\t\t\tpointer-events: none;\n\t\t\tbackground-color: var(--ck-table-selected-cell-background);\n\t\t\tposition: absolute;\n\t\t\ttop: 0;\n\t\t\tleft: 0;\n\t\t\tright: 0;\n\t\t\tbottom: 0;\n\t\t}\n.ck.ck-editor__editable .table table td.ck-editor__editable_selected ::selection,\n\t\t.ck.ck-editor__editable .table table th.ck-editor__editable_selected ::selection,\n\t\t.ck.ck-editor__editable .table table td.ck-editor__editable_selected:focus,\n\t\t.ck.ck-editor__editable .table table th.ck-editor__editable_selected:focus {\n\t\t\tbackground-color: transparent;\n\t\t}\n/*\n\t\t * To reduce the amount of noise, all widgets in the table selection have no outline and no selection handle.\n\t\t * See https://github.com/ckeditor/ckeditor5/issues/9491.\n\t\t */\n.ck.ck-editor__editable .table table td.ck-editor__editable_selected .ck-widget, .ck.ck-editor__editable .table table th.ck-editor__editable_selected .ck-widget {\n\t\t\toutline: unset;\n\t\t}\n.ck.ck-editor__editable .table table td.ck-editor__editable_selected .ck-widget > .ck-widget__selection-handle, .ck.ck-editor__editable .table table th.ck-editor__editable_selected .ck-widget > .ck-widget__selection-handle {\n\t\t\t\tdisplay: none;\n\t\t\t}\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n:root {\n\t--ck-table-layout-widget-type-around-button-size: 16px;\n\t--ck-table-layout-widget-type-around-icon-width: 10px;\n\t--ck-table-layout-widget-type-around-icon-height: 8px;\n\t--ck-table-layout-widget-handler-icon-size: 10px;\n\t--ck-table-layout-default-border-color: hsl(0, 0%, 83%);\n\n}\n.ck-editor__editable .table.layout-table > table {\n\t\t\twidth: 100%;\n\t\t\theight: 100%;\n\n\t\t\t/* Resetting \`border-collapse\` property to the user agent styles. */\n\t\t\tborder-collapse: revert;\n\n\t\t\t/* The default table layout style in the editing view when the border is unset. */\n\t\t}\n.ck-editor__editable .table.layout-table > table:not(\n\t\t\t[style*="border:"],\n\t\t\t[style*="border-top"],\n\t\t\t[style*="border-bottom"],\n\t\t\t[style*="border-left"],\n\t\t\t[style*="border-right"],\n\t\t\t[style*="border-width"],\n\t\t\t[style*="border-style"],\n\t\t\t[style*="border-color"]) {\n\t\t\t\tborder-color: transparent;\n\t\t\t\tborder-width: 0;\n\t\t\t\toutline: none;\n\t\t\t}\n.ck-editor__editable .table.layout-table > table > tbody > tr > td {\n\t\t\tbox-shadow: revert;\n\t\t\tpadding: revert;\n\t\t\tmin-width: 2em;\n\t\t\t/* To make the caret visible. */\n\t\t\ttext-indent: 1px;\n\n\t\t\t/* Resets the \`min-width\` style attribute that was added by the content table style. */\n\t\t}\n.ck-editor__editable .table.layout-table > table > tbody > tr > td[style^="width:"],\n\t\t\t.ck-editor__editable .table.layout-table > table > tbody > tr > td[style*=" width:"],\n\t\t\t.ck-editor__editable .table.layout-table > table > tbody > tr > td[style*=";width:"],\n\t\t\t.ck-editor__editable .table.layout-table > table > tbody > tr > td[style*="'width:"] {\n\t\t\t\tmin-width: auto;\n\t\t\t}\n/* Remove the default background color from the focused table cell. */\n.ck-editor__editable .table.layout-table > table > tbody > tr > td:focus {\n\t\t\t\tbackground-color: transparent;\n\t\t\t}\n/* The default table layout cell style in the editing view when the border is unset.\n\t\t\tBut it need to be more strict cause of style attributes like \`border-collapse\`, \`border-spacing\`, etc. */\n.ck-editor__editable .table.layout-table > table > tbody > tr > td:not(\n\t\t\t[style*="border:"],\n\t\t\t[style*="border-top"],\n\t\t\t[style*="border-bottom"],\n\t\t\t[style*="border-left"],\n\t\t\t[style*="border-right"],\n\t\t\t[style*="border-width"],\n\t\t\t[style*="border-style"],\n\t\t\t[style*="border-color"]) {\n\t\t\t\tborder-color: transparent;\n\t\t\t\t/* Resetting \`border-width\` property to the user agent styles. */\n\t\t\t\tborder-width: 0;\n\t\t\t\toutline: var(--ck-table-layout-default-border-color) 1px dashed;\n\t\t\t\toutline-offset: -1px;\n\t\t\t}\n.ck-editor__editable .table.layout-table > table > tbody > tr > td:not(\n\t\t\t[style*="border:"],\n\t\t\t[style*="border-top"],\n\t\t\t[style*="border-bottom"],\n\t\t\t[style*="border-left"],\n\t\t\t[style*="border-right"],\n\t\t\t[style*="border-width"],\n\t\t\t[style*="border-style"],\n\t\t\t[style*="border-color"]):focus {\n\t\t\t\t\toutline: var(--ck-color-focus-border) 1px solid;\n\t\t\t\t}\n/* Reset the \`width\` and \`text-indent\` of the bogus paragraph because <td> has 1px text indent. */\n.ck-editor__editable .table.layout-table > table > tbody > tr > td > .ck-table-bogus-paragraph {\n\t\t\t\twidth: calc(100% - 1px);\n\t\t\t\ttext-indent: 0;\n\t\t\t}\n/* Widget type around overrides. */\n.ck-editor__editable .table.layout-table.ck-widget > .ck-widget__type-around {\n\t\t\t\t--ck-widget-type-around-button-size: var(--ck-table-layout-widget-type-around-button-size);\n\t\t\t}\n.ck-editor__editable .table.layout-table.ck-widget > .ck-widget__type-around > .ck-widget__type-around__button.ck-widget__type-around__button_before,\n\t\t\t\t\t.ck-editor__editable .table.layout-table.ck-widget > .ck-widget__type-around > .ck-widget__type-around__button.ck-widget__type-around__button_after {\n\t\t\t\t\t\ttransform: translateY(0);\n\t\t\t\t\t\t/* Same value as inline-image widget because it is after the inline-image in HTML structure */\n\t\t\t\t\t\tz-index: 2;\n\t\t\t\t\t}\n.ck-editor__editable .table.layout-table.ck-widget > .ck-widget__type-around > .ck-widget__type-around__button.ck-widget__type-around__button_before {\n\t\t\t\t\t\tmargin-left: var(--ck-table-layout-widget-type-around-button-size);\n\t\t\t\t\t\tleft: min(10%, 30px);\n\t\t\t\t\t\tborder-radius: 0 0 100px 100px;\n\t\t\t\t\t}\n.ck-editor__editable .table.layout-table.ck-widget > .ck-widget__type-around > .ck-widget__type-around__button.ck-widget__type-around__button_before::after {\n\t\t\t\t\t\t\tborder-radius: 0 0 100px 100px;\n\t\t\t\t\t\t}\n.ck-editor__editable .table.layout-table.ck-widget > .ck-widget__type-around > .ck-widget__type-around__button.ck-widget__type-around__button_after {\n\t\t\t\t\t\tborder-radius: 100px 100px 0 0;\n\t\t\t\t\t}\n.ck-editor__editable .table.layout-table.ck-widget > .ck-widget__type-around > .ck-widget__type-around__button.ck-widget__type-around__button_after::after {\n\t\t\t\t\t\t\tborder-radius: 100px 100px 0 0;\n\t\t\t\t\t\t}\n.ck-editor__editable .table.layout-table.ck-widget > .ck-widget__type-around > .ck-widget__type-around__button svg {\n\t\t\t\t\t\twidth: var(--ck-table-layout-widget-type-around-icon-width);\n\t\t\t\t\t\theight: var(--ck-table-layout-widget-type-around-icon-height);\n\t\t\t\t\t}\n.ck-editor__editable .table.layout-table.ck-widget.ck-widget_with-selection-handle > .ck-widget__selection-handle {\n\t\t\t\t\t--ck-widget-handler-icon-size: var(--ck-table-layout-widget-handler-icon-size);\n\n\t\t\t\t\ttransform: translateY(calc(0px - var(--ck-widget-outline-thickness)));\n\t\t\t\t\t/* Value increased by 1 as in selected inline-image widget\n\t\t\t\t\tbecause it is before the inline-image in HTML structure. */\n\t\t\t\t\tz-index: 3;\n\t\t\t\t}\n/* Show fake caret on border not above. */\n.ck-editor__editable .table.layout-table.ck-widget.ck-widget_type-around_show-fake-caret_before > .ck-widget__type-around > .ck-widget__type-around__fake-caret {\n\t\t\t\t\t\ttop: 0;\n\t\t\t\t\t}\n/* Show fake caret on border not below. */\n.ck-editor__editable .table.layout-table.ck-widget.ck-widget_type-around_show-fake-caret_after > .ck-widget__type-around > .ck-widget__type-around__fake-caret {\n\t\t\t\t\t\tbottom: 0;\n\t\t\t\t\t}\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n/**\n * A visual style of focused element's border.\n */\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n/**\n * A helper to combine multiple shadows.\n */\n/**\n * Gives an element a drop shadow so it looks like a floating panel.\n */\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n:root {\n\t--ck-widget-outline-thickness: 3px;\n\t--ck-widget-handler-icon-size: 16px;\n\t--ck-widget-handler-animation-duration: 200ms;\n\t--ck-widget-handler-animation-curve: ease;\n\n\t--ck-color-widget-blurred-border: hsl(0, 0%, 87%);\n\t--ck-color-widget-hover-border: hsl(43, 100%, 62%);\n\t--ck-color-widget-editable-focus-background: var(--ck-color-base-background);\n\t--ck-color-widget-drag-handler-icon-color: var(--ck-color-base-background);\n}\n.ck .ck-widget {\n\toutline-width: var(--ck-widget-outline-thickness);\n\toutline-style: solid;\n\toutline-color: transparent;\n\ttransition: outline-color var(--ck-widget-handler-animation-duration) var(--ck-widget-handler-animation-curve);\n}\n@media (prefers-reduced-motion: reduce) {\n.ck .ck-widget {\n\t\ttransition: none;\n}\n\t}\n.ck .ck-widget.ck-widget_selected,\n\t.ck .ck-widget.ck-widget_selected:hover {\n\t\toutline: var(--ck-widget-outline-thickness) solid var(--ck-color-focus-border);\n\t}\n.ck .ck-widget:hover {\n\t\toutline-color: var(--ck-color-widget-hover-border);\n\t}\n.ck .ck-editor__nested-editable {\n\tborder: 1px solid transparent;\n\n\t/* The :focus style is applied before .ck-editor__nested-editable_focused class is rendered in the view.\n\tThese styles show a different border for a blink of an eye, so \`:focus\` need to have same styles applied. */\n}\n.ck .ck-editor__nested-editable.ck-editor__nested-editable_focused,\n\t.ck .ck-editor__nested-editable:focus {\n\t\tbox-shadow: var(--ck-inner-shadow), 0 0;\n\t}\n@media (forced-colors: none) {\n\t\t.ck .ck-editor__nested-editable.ck-editor__nested-editable_focused, .ck .ck-editor__nested-editable:focus {\n\t\t\tbackground-color: var(--ck-color-widget-editable-focus-background);\n\t\t}\n\t}\n/**\n\t\t * Focus border should not be applied to table cells because it overrides the default table cell border color.\n\t\t * In other words - in some scenarios, the part of the table cell border has focus color style, which is not expected behavior\n\t\t * because it should be the same as the table cell border color.\n\t\t */\n.ck .ck-editor__nested-editable.ck-editor__nested-editable_focused:not(td, th), .ck .ck-editor__nested-editable:focus:not(td, th) {\n\t\t\t/* Disable native outline. */\n\t\t\toutline: none;\n\t\t\tborder: var(--ck-focus-ring);\n\t\t}\n.ck .ck-widget.ck-widget_with-selection-handle .ck-widget__selection-handle {\n\t\tpadding: 4px;\n\t\tbox-sizing: border-box;\n\n\t\t/* Background and opacity will be animated as the handler shows up or the widget gets selected. */\n\t\tbackground-color: transparent;\n\t\topacity: 0;\n\n\t\t/* Transition:\n\t\t   * background-color for the .ck-widget_selected state change,\n\t\t   * visibility for hiding the handler,\n\t\t   * opacity for the proper look of the icon when the handler disappears. */\n\t\ttransition:\n\t\t\tbackground-color var(--ck-widget-handler-animation-duration) var(--ck-widget-handler-animation-curve),\n\t\t\tvisibility var(--ck-widget-handler-animation-duration) var(--ck-widget-handler-animation-curve),\n\t\t\topacity var(--ck-widget-handler-animation-duration) var(--ck-widget-handler-animation-curve);\n\n\t\t/* Make only top corners round. */\n\t\tborder-radius: var(--ck-border-radius) var(--ck-border-radius) 0 0;\n\n\t\t/* Place the drag handler outside the widget wrapper. */\n\t\ttransform: translateY(-100%);\n\t\tleft: calc(0px - var(--ck-widget-outline-thickness));\n\t\ttop: 0;\n\t}\n@media (prefers-reduced-motion: reduce) {\n.ck .ck-widget.ck-widget_with-selection-handle .ck-widget__selection-handle {\n\t\t\ttransition: none;\n\t}\n\t\t}\n.ck .ck-widget.ck-widget_with-selection-handle .ck-widget__selection-handle .ck-icon {\n\t\t\t/* Make sure the dimensions of the icon are independent of the fon-size of the content. */\n\t\t\twidth: var(--ck-widget-handler-icon-size);\n\t\t\theight: var(--ck-widget-handler-icon-size);\n\t\t\tcolor: var(--ck-color-widget-drag-handler-icon-color);\n\n\t\t\t/* The "selected" part of the icon is invisible by default */\n\t\t}\n.ck .ck-widget.ck-widget_with-selection-handle .ck-widget__selection-handle .ck-icon .ck-icon__selected-indicator {\n\t\t\t\topacity: 0;\n\n\t\t\t\t/* Note: The animation is longer on purpose. Simply feels better. */\n\t\t\t\ttransition: opacity 300ms var(--ck-widget-handler-animation-curve);\n\t\t\t}\n@media (prefers-reduced-motion: reduce) {\n.ck .ck-widget.ck-widget_with-selection-handle .ck-widget__selection-handle .ck-icon .ck-icon__selected-indicator {\n\t\t\t\t\ttransition: none;\n\t\t\t}\n\t\t\t\t}\n/* Advertise using the look of the icon that once clicked the handler, the widget will be selected. */\n.ck .ck-widget.ck-widget_with-selection-handle .ck-widget__selection-handle:hover .ck-icon .ck-icon__selected-indicator {\n\t\t\topacity: 1;\n\t\t}\n/* Show the selection handler on mouse hover over the widget, but not for nested widgets. */\n.ck .ck-widget.ck-widget_with-selection-handle:hover > .ck-widget__selection-handle {\n\t\topacity: 1;\n\t\tbackground-color: var(--ck-color-widget-hover-border);\n\t}\n/* Show the selection handler when the widget is selected, but not for nested widgets. */\n.ck .ck-widget.ck-widget_with-selection-handle.ck-widget_selected > .ck-widget__selection-handle, .ck .ck-widget.ck-widget_with-selection-handle.ck-widget_selected:hover > .ck-widget__selection-handle {\n\t\t\topacity: 1;\n\t\t\tbackground-color: var(--ck-color-focus-border);\n\n\t\t\t/* When the widget is selected, notify the user using the proper look of the icon. */\n\t\t}\n.ck .ck-widget.ck-widget_with-selection-handle.ck-widget_selected > .ck-widget__selection-handle .ck-icon .ck-icon__selected-indicator, .ck .ck-widget.ck-widget_with-selection-handle.ck-widget_selected:hover > .ck-widget__selection-handle .ck-icon .ck-icon__selected-indicator {\n\t\t\t\topacity: 1;\n\t\t\t}\n/* In a RTL environment, align the selection handler to the right side of the widget */\n/* stylelint-disable-next-line no-descending-specificity */\n.ck[dir="rtl"] .ck-widget.ck-widget_with-selection-handle .ck-widget__selection-handle {\n\tleft: auto;\n\tright: calc(0px - var(--ck-widget-outline-thickness));\n}\n/* https://github.com/ckeditor/ckeditor5/issues/6415 */\n.ck.ck-editor__editable.ck-read-only .ck-widget {\n\t/* Prevent the :hover outline from showing up because of the used outline-color transition. */\n\ttransition: none;\n}\n.ck.ck-editor__editable.ck-read-only .ck-widget:not(.ck-widget_selected) {\n\t\t/* Disable visual effects of hover/active widget when CKEditor is in readOnly mode.\n\t\t * See: https://github.com/ckeditor/ckeditor5/issues/1261\n\t\t *\n\t\t * Leave the unit because this custom property is used in calc() by other features.\n\t\t * See: https://github.com/ckeditor/ckeditor5/issues/6775\n\t\t */\n\t\t--ck-widget-outline-thickness: 0px;\n\t}\n.ck.ck-editor__editable.ck-read-only .ck-widget.ck-widget_with-selection-handle .ck-widget__selection-handle,\n\t\t.ck.ck-editor__editable.ck-read-only .ck-widget.ck-widget_with-selection-handle .ck-widget__selection-handle:hover {\n\t\t\tbackground: var(--ck-color-widget-blurred-border);\n\t\t}\n/*\n* Hide the outline of all widget parents when the widget is being hovered.\n*/\n.ck .ck-widget:has( .ck-widget.table:hover ) {\n\toutline-color: transparent;\n}\n/* Hide the selection handle on mouse hover over the widget of all the widget parents. */\n.ck .ck-widget.ck-widget_with-selection-handle:has( .ck-widget.table:hover ) > .ck-widget__selection-handle {\n\topacity: 0;\n\tvisibility: hidden;\n}\n/* Style the widget when it's selected but the editable it belongs to lost focus. */\n/* stylelint-disable-next-line no-descending-specificity */\n.ck.ck-editor__editable.ck-blurred .ck-widget.ck-widget_selected,\n\t.ck.ck-editor__editable.ck-blurred .ck-widget.ck-widget_selected:hover {\n\t\toutline-color: var(--ck-color-widget-blurred-border);\n\t}\n.ck.ck-editor__editable.ck-blurred .ck-widget.ck-widget_selected.ck-widget_with-selection-handle > .ck-widget__selection-handle,\n\t\t\t.ck.ck-editor__editable.ck-blurred .ck-widget.ck-widget_selected.ck-widget_with-selection-handle:hover > .ck-widget__selection-handle,\n\t\t\t.ck.ck-editor__editable.ck-blurred .ck-widget.ck-widget_selected.ck-widget_with-selection-handle > .ck-widget__selection-handle:hover,\n\t\t\t.ck.ck-editor__editable.ck-blurred .ck-widget.ck-widget_selected.ck-widget_with-selection-handle:hover > .ck-widget__selection-handle:hover {\n\t\t\t\tbackground: var(--ck-color-widget-blurred-border);\n\t\t\t}\n.ck.ck-editor__editable:not(.ck-pagination-view) > .ck-widget.ck-widget_with-selection-handle:first-child,\n.ck.ck-editor__editable:not(.ck-pagination-view) blockquote > .ck-widget.ck-widget_with-selection-handle:first-child {\n\t/* Do not crop selection handler if a widget is a first-child in the blockquote or in the root editable.\n\tIn fact, anything with overflow: hidden.\n\thttps://github.com/ckeditor/ckeditor5-block-quote/issues/28\n\thttps://github.com/ckeditor/ckeditor5-widget/issues/44\n\thttps://github.com/ckeditor/ckeditor5-widget/issues/66 */\n\tmargin-top: calc(1em + var(--ck-widget-handler-icon-size));\n}\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n:root {\n\t--ck-resizer-size: 10px;\n\n\t/* Set the resizer with a 50% offset. */\n\t--ck-resizer-offset: calc( ( var(--ck-resizer-size) / -2 ) - 2px);\n\t--ck-resizer-border-width: 1px;\n}\n.ck .ck-widget__resizer {\n\toutline: 1px solid var(--ck-color-resizer);\n}\n.ck .ck-widget__resizer__handle {\n\twidth: var(--ck-resizer-size);\n\theight: var(--ck-resizer-size);\n\tbackground: var(--ck-color-focus-border);\n\tborder: var(--ck-resizer-border-width) solid hsl(0, 0%, 100%);\n\tborder-radius: var(--ck-resizer-border-radius);\n}\n.ck .ck-widget__resizer__handle.ck-widget__resizer__handle-top-left {\n\t\ttop: var(--ck-resizer-offset);\n\t\tleft: var(--ck-resizer-offset);\n\t}\n.ck .ck-widget__resizer__handle.ck-widget__resizer__handle-top-right {\n\t\ttop: var(--ck-resizer-offset);\n\t\tright: var(--ck-resizer-offset);\n\t}\n.ck .ck-widget__resizer__handle.ck-widget__resizer__handle-bottom-right {\n\t\tbottom: var(--ck-resizer-offset);\n\t\tright: var(--ck-resizer-offset);\n\t}\n.ck .ck-widget__resizer__handle.ck-widget__resizer__handle-bottom-left {\n\t\tbottom: var(--ck-resizer-offset);\n\t\tleft: var(--ck-resizer-offset);\n\t}\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n:root {\n\t--ck-widget-type-around-button-size: 20px;\n\t--ck-color-widget-type-around-button-active: var(--ck-color-focus-border);\n\t--ck-color-widget-type-around-button-hover: var(--ck-color-widget-hover-border);\n\t--ck-color-widget-type-around-button-blurred-editable: var(--ck-color-widget-blurred-border);\n\t--ck-color-widget-type-around-button-radar-start-alpha: 0;\n\t--ck-color-widget-type-around-button-radar-end-alpha: .3;\n\t--ck-color-widget-type-around-button-icon: var(--ck-color-base-background);\n}\n/*\n\t * Styles of the type around buttons\n\t */\n.ck .ck-widget .ck-widget__type-around__button {\n\t\twidth: var(--ck-widget-type-around-button-size);\n\t\theight: var(--ck-widget-type-around-button-size);\n\t\tbackground: var(--ck-color-widget-type-around-button);\n\t\tborder-radius: 100px;\n\t\ttransition: opacity var(--ck-widget-handler-animation-duration) var(--ck-widget-handler-animation-curve), background var(--ck-widget-handler-animation-duration) var(--ck-widget-handler-animation-curve);\n\n\t\topacity: 0;\n\n\t\tpointer-events: none;\n\t}\n@media (prefers-reduced-motion: reduce) {\n.ck .ck-widget .ck-widget__type-around__button {\n\t\t\ttransition: none;\n\t}\n\t\t}\n.ck .ck-widget .ck-widget__type-around__button svg {\n\t\t\twidth: 10px;\n\t\t\theight: 8px;\n\t\t\ttransform: translate(-50%,-50%);\n\t\t\ttransition: transform .5s ease;\n\t\t\tmargin-top: 1px;\n\t\t}\n@media (prefers-reduced-motion: reduce) {\n.ck .ck-widget .ck-widget__type-around__button svg {\n\t\t\t\ttransition: none;\n\t\t}\n\t\t\t}\n.ck .ck-widget .ck-widget__type-around__button svg * {\n\t\t\t\tstroke-dasharray: 10;\n\t\t\t\tstroke-dashoffset: 0;\n\n\t\t\t\tfill: none;\n\t\t\t\tstroke: var(--ck-color-widget-type-around-button-icon);\n\t\t\t\tstroke-width: 1.5px;\n\t\t\t\tstroke-linecap: round;\n\t\t\t\tstroke-linejoin: round;\n\t\t\t}\n.ck .ck-widget .ck-widget__type-around__button svg line {\n\t\t\t\tstroke-dasharray: 7;\n\t\t\t}\n.ck .ck-widget .ck-widget__type-around__button:hover {\n\t\t\t/*\n\t\t\t * Display the "sonar" around the button when hovered.\n\t\t\t */\n\t\t\tanimation: ck-widget-type-around-button-sonar 1s ease infinite;\n\n\t\t\t/*\n\t\t\t * Animate active button's icon.\n\t\t\t */\n\t\t}\n.ck .ck-widget .ck-widget__type-around__button:hover svg polyline {\n\t\t\t\t\tanimation: ck-widget-type-around-arrow-dash 2s linear;\n\t\t\t\t}\n.ck .ck-widget .ck-widget__type-around__button:hover svg line {\n\t\t\t\t\tanimation: ck-widget-type-around-arrow-tip-dash 2s linear;\n\t\t\t\t}\n@media (prefers-reduced-motion: reduce) {\n.ck .ck-widget .ck-widget__type-around__button:hover {\n\t\t\t\tanimation: none;\n\t\t}\n\t\t\t\t\t.ck .ck-widget .ck-widget__type-around__button:hover svg polyline {\n\t\t\t\t\t\tanimation: none;\n\t\t\t\t\t}\n\n\t\t\t\t\t.ck .ck-widget .ck-widget__type-around__button:hover svg line {\n\t\t\t\t\t\tanimation: none;\n\t\t\t\t\t}\n\t\t\t}\n/*\n\t * Show type around buttons when the widget is being hovered.\n\t */\n.ck .ck-widget:hover > .ck-widget__type-around > .ck-widget__type-around__button {\n\t\t\topacity: 1;\n\t\t\tpointer-events: auto;\n\t\t}\n/*\n\t * Styles for the buttons when the widget is NOT selected (but the buttons are visible\n\t * and still can be hovered).\n\t */\n.ck .ck-widget:not(.ck-widget_selected) > .ck-widget__type-around > .ck-widget__type-around__button {\n\t\tbackground: var(--ck-color-widget-type-around-button-hover);\n\t}\n/*\n\t * Styles for the buttons when:\n\t * - the widget is selected,\n\t * - or the button is being hovered (regardless of the widget state).\n\t */\n.ck .ck-widget.ck-widget_selected > .ck-widget__type-around > .ck-widget__type-around__button,\n\t.ck .ck-widget > .ck-widget__type-around > .ck-widget__type-around__button:hover {\n\t\tbackground: var(--ck-color-widget-type-around-button-active);\n\t}\n.ck .ck-widget.ck-widget_selected > .ck-widget__type-around > .ck-widget__type-around__button::after, .ck .ck-widget > .ck-widget__type-around > .ck-widget__type-around__button:hover::after {\n\t\t\twidth: calc(var(--ck-widget-type-around-button-size) - 2px);\n\t\t\theight: calc(var(--ck-widget-type-around-button-size) - 2px);\n\t\t\tborder-radius: 100px;\n\t\t\tbackground: linear-gradient(135deg, hsla(0,0%,100%,0) 0%, hsla(0,0%,100%,.3) 100%);\n\t\t}\n/*\n\t\t* Styles of the widget when the "fake caret" is blinking (e.g. upon keyboard navigation).\n\t\t* Despite the widget being physically selected in the model, its outline should disappear.\n\t\t*/\n.ck .ck-widget.ck-widget_selected.ck-widget_type-around_show-fake-caret_before,\n\t\t.ck .ck-widget.ck-widget_selected.ck-widget_type-around_show-fake-caret_after {\n\t\t\toutline-color: transparent;\n\t\t}\n/*\n\t\t* Show type around buttons when the widget gets selected.\n\t\t*/\n.ck .ck-widget.ck-widget_selected > .ck-widget__type-around > .ck-widget__type-around__button {\n\t\t\topacity: 1;\n\t\t\tpointer-events: auto;\n\t\t}\n/*\n\t * Styles for the "before" button when the widget has a selection handle. Because some space\n\t * is consumed by the handle, the button must be moved slightly to the right to let it breathe.\n\t */\n.ck .ck-widget.ck-widget_with-selection-handle > .ck-widget__type-around > .ck-widget__type-around__button_before {\n\t\tmargin-left: 20px;\n\t}\n/*\n\t * Styles for the horizontal "fake caret" which is displayed when the user navigates using the keyboard.\n\t */\n.ck .ck-widget .ck-widget__type-around__fake-caret {\n\t\tpointer-events: none;\n\t\theight: 1px;\n\t\tanimation: ck-widget-type-around-fake-caret-pulse linear 1s infinite normal forwards;\n\n\t\t/*\n\t\t * The semi-transparent-outline+background combo improves the contrast\n\t\t * when the background underneath the fake caret is dark.\n\t\t */\n\t\toutline: solid 1px hsla(0, 0%, 100%, .5);\n\t\tbackground: var(--ck-color-base-text);\n\t}\n/*\n\t\t * When the "fake caret" is visible we simulate that the widget is not selected\n\t\t * (despite being physically selected), so the outline color should be for the\n\t\t * unselected widget.\n\t\t */\n.ck .ck-widget.ck-widget_type-around_show-fake-caret_before.ck-widget_selected:hover, .ck .ck-widget.ck-widget_type-around_show-fake-caret_after.ck-widget_selected:hover {\n\t\t\toutline-color: var(--ck-color-widget-hover-border);\n\t\t}\n/*\n\t\t * Styles of the type around buttons when the "fake caret" is blinking (e.g. upon keyboard navigation).\n\t\t * In this state, the type around buttons would collide with the fake carets so they should disappear.\n\t\t */\n.ck .ck-widget.ck-widget_type-around_show-fake-caret_before > .ck-widget__type-around > .ck-widget__type-around__button, .ck .ck-widget.ck-widget_type-around_show-fake-caret_after > .ck-widget__type-around > .ck-widget__type-around__button {\n\t\t\topacity: 0;\n\t\t\tpointer-events: none;\n\t\t}\n/*\n\t\t * Fake horizontal caret integration with the selection handle. When the caret is visible, simply\n\t\t * hide the handle because it intersects with the caret (and does not make much sense anyway).\n\t\t */\n.ck .ck-widget.ck-widget_type-around_show-fake-caret_before.ck-widget_with-selection-handle.ck-widget_selected > .ck-widget__selection-handle, .ck .ck-widget.ck-widget_type-around_show-fake-caret_after.ck-widget_with-selection-handle.ck-widget_selected > .ck-widget__selection-handle, .ck .ck-widget.ck-widget_type-around_show-fake-caret_before.ck-widget_with-selection-handle.ck-widget_selected:hover > .ck-widget__selection-handle, .ck .ck-widget.ck-widget_type-around_show-fake-caret_after.ck-widget_with-selection-handle.ck-widget_selected:hover > .ck-widget__selection-handle {\n\t\t\t\t\topacity: 0\n\t\t\t\t}\n/*\n\t\t * Fake horizontal caret integration with the resize UI. When the caret is visible, simply\n\t\t * hide the resize UI because it creates too much noise. It can be visible when the user\n\t\t * hovers the widget, though.\n\t\t */\n.ck .ck-widget.ck-widget_type-around_show-fake-caret_before.ck-widget_selected.ck-widget_with-resizer > .ck-widget__resizer, .ck .ck-widget.ck-widget_type-around_show-fake-caret_after.ck-widget_selected.ck-widget_with-resizer > .ck-widget__resizer {\n\t\t\topacity: 0\n\t\t}\n/*\n * Styles for the "before" button when the widget has a selection handle in an RTL environment.\n * The selection handler is aligned to the right side of the widget so there is no need to create\n * additional space for it next to the "before" button.\n */\n.ck[dir="rtl"] .ck-widget.ck-widget_with-selection-handle .ck-widget__type-around > .ck-widget__type-around__button_before {\n\tmargin-left: 0;\n\tmargin-right: 20px;\n}\n/*\n * Hide type around buttons when the widget is selected as a child of a selected\n * nested editable (e.g. mulit-cell table selection).\n *\n * See https://github.com/ckeditor/ckeditor5/issues/7263.\n */\n/* stylelint-disable-next-line no-descending-specificity */\n.ck-editor__nested-editable.ck-editor__editable_selected .ck-widget.ck-widget_selected > .ck-widget__type-around > .ck-widget__type-around__button, .ck-editor__nested-editable.ck-editor__editable_selected .ck-widget:hover > .ck-widget__type-around > .ck-widget__type-around__button {\n\t\t\t\topacity: 0;\n\t\t\t\tpointer-events: none;\n\t\t\t}\n/*\n * Hide type around buttons of all widget parents when the widget is being hovered.\n */\n.ck .ck-widget:has( .ck-widget.table:hover ) > .ck-widget__type-around > .ck-widget__type-around__button {\n\t\topacity: 0;\n\t\tpointer-events: none;\n\t}\n/*\n * Styles for the buttons when the widget is selected but the user clicked outside of the editor (blurred the editor).\n */\n.ck-editor__editable.ck-blurred .ck-widget.ck-widget_selected > .ck-widget__type-around > .ck-widget__type-around__button:not(:hover) {\n\tbackground: var(--ck-color-widget-type-around-button-blurred-editable);\n}\n.ck-editor__editable.ck-blurred .ck-widget.ck-widget_selected > .ck-widget__type-around > .ck-widget__type-around__button:not(:hover) svg * {\n\t\tstroke: hsl(0,0%,60%);\n\t}\n@keyframes ck-widget-type-around-arrow-dash {\n\t0% {\n\t\tstroke-dashoffset: 10;\n\t}\n\t20%, 100% {\n\t\tstroke-dashoffset: 0;\n\t}\n}\n@keyframes ck-widget-type-around-arrow-tip-dash {\n\t0%, 20% {\n\t\tstroke-dashoffset: 7;\n\t}\n\t40%, 100% {\n\t\tstroke-dashoffset: 0;\n\t}\n}\n@keyframes ck-widget-type-around-button-sonar {\n\t0% {\n\t\tbox-shadow: 0 0 0 0 hsla(var(--ck-color-focus-border-coordinates), var(--ck-color-widget-type-around-button-radar-start-alpha));\n\t}\n\t50% {\n\t\tbox-shadow: 0 0 0 5px hsla(var(--ck-color-focus-border-coordinates), var(--ck-color-widget-type-around-button-radar-end-alpha));\n\t}\n\t100% {\n\t\tbox-shadow: 0 0 0 5px hsla(var(--ck-color-focus-border-coordinates), var(--ck-color-widget-type-around-button-radar-start-alpha));\n\t}\n}\n@keyframes ck-widget-type-around-fake-caret-pulse {\n\t0% {\n\t\topacity: 1;\n\t}\n\t49% {\n\t\topacity: 1;\n\t}\n\t50% {\n\t\topacity: 0;\n\t}\n\t99% {\n\t\topacity: 0;\n\t}\n\t100% {\n\t\topacity: 1;\n\t}\n}\n\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n\n.ck-content code {\n\tbackground-color: hsla(0, 0%, 78%, 0.3);\n\tpadding: .15em;\n\tborder-radius: 2px;\n}\n\n.ck.ck-editor__editable .ck-code_selected  {\n\tbackground-color: hsla(0, 0%, 78%, 0.5);\n}\n\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n\n.ck-content blockquote {\n\t/* See #12 */\n\toverflow: hidden;\n\n\t/* https://github.com/ckeditor/ckeditor5-block-quote/issues/15 */\n\tpadding-right: 1.5em;\n\tpadding-left: 1.5em;\n\n\tmargin-left: 0;\n\tmargin-right: 0;\n\tfont-style: italic;\n\tborder-left: solid 5px hsl(0, 0%, 80%);\n}\n\n.ck-content[dir="rtl"] blockquote {\n\tborder-left: 0;\n\tborder-right: solid 5px hsl(0, 0%, 80%);\n}\n\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n\n:root {\n\t/* Based on default CKBox theme colors */\n\t--ck-image-processing-highlight-color: hsl(220, 10%, 98%);\n\t--ck-image-processing-background-color: hsl(220, 10%, 90%);\n}\n\n.ck.ck-editor__editable .image.image-processing {\n\t\t\tposition: relative;\n\t\t}\n\n.ck.ck-editor__editable .image.image-processing:before {\n\t\t\t\tcontent: '';\n\n\t\t\t\tposition: absolute;\n\t\t\t\ttop: 0;\n\t\t\t\tleft: 0;\n\t\t\t\tz-index: 1;\n\n\t\t\t\theight: 100%;\n\t\t\t\twidth: 100%;\n\n\t\t\t\tbackground: linear-gradient(\n\t\t\t\t\t90deg,\n\t\t\t\t\tvar(--ck-image-processing-background-color),\n\t\t\t\t\tvar(--ck-image-processing-highlight-color),\n\t\t\t\t\tvar(--ck-image-processing-background-color)\n\t\t\t\t);\n\t\t\t\tbackground-size: 200% 100%;\n\n\t\t\t\tanimation: ck-image-processing-animation 2s linear infinite;\n\t\t\t}\n\n.ck.ck-editor__editable .image.image-processing img {\n\t\t\t\theight: 100%;\n\t\t\t}\n\n@keyframes ck-image-processing-animation {\n\t0% {\n\t\tbackground-position: 200% 0;\n\t}\n\t100% {\n\t\tbackground-position: -200% 0;\n\t}\n}\n\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n\n/*\n\t * Vertical drop target (in text).\n\t */\n\n.ck.ck-editor__editable .ck.ck-clipboard-drop-target-position {\n\t\tdisplay: inline;\n\t\tposition: relative;\n\t\tpointer-events: none;\n\t}\n\n.ck.ck-editor__editable .ck.ck-clipboard-drop-target-position span {\n\t\t\tposition: absolute;\n\t\t\twidth: 0;\n\t\t}\n\n/*\n\t * Styles of the widget being dragged (its preview).\n\t */\n\n.ck.ck-editor__editable .ck-widget:-webkit-drag > .ck-widget__selection-handle {\n\t\t\tdisplay: none;\n\t\t}\n\n.ck.ck-editor__editable .ck-widget:-webkit-drag > .ck-widget__type-around {\n\t\t\tdisplay: none;\n\t\t}\n\n.ck.ck-clipboard-drop-target-line {\n\tposition: absolute;\n\tz-index: var(--ck-z-default);\n\tpointer-events: none;\n}\n\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n\n.ck-content pre {\n\tpadding: 1em;\n\tcolor: hsl(0, 0%, 20.8%);\n\tbackground: hsla(0, 0%, 78%, 0.3);\n\tborder: 1px solid hsl(0, 0%, 77%);\n\tborder-radius: 2px;\n\n\t/* Code block are language direction–agnostic. */\n\ttext-align: left;\n\tdirection: ltr;\n\n\ttab-size: 4;\n\twhite-space: pre-wrap;\n\n\t/* Don't inherit the style, e.g. when in a block quote. */\n\tfont-style: normal;\n\n\t/* Don't let the code be squashed e.g. when in a table cell. */\n\tmin-width: 200px;\n}\n\n.ck-content pre code {\n\t\tbackground: unset;\n\t\tpadding: 0;\n\t\tborder-radius: 0;\n\t}\n\n.ck.ck-editor__editable pre {\n\tposition: relative;\n}\n\n.ck.ck-editor__editable pre[data-language]::after {\n\t\tcontent: attr(data-language);\n\t\tposition: absolute;\n\t}\n\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n\n:root {\n\t--ck-content-font-family: Helvetica, Arial, Tahoma, Verdana, Sans-Serif;\n\t--ck-content-font-size: medium;\n\t/* stylelint-disable-next-line declaration-property-value-disallowed-list */\n\t--ck-content-font-color: #000;\n\t--ck-content-line-height: 1.5;\n\t--ck-content-word-break: break-word;\n}\n\n.ck-content {\n\tfont-family: var(--ck-content-font-family);\n\tfont-size: var(--ck-content-font-size);\n\tcolor: var(--ck-content-font-color);\n\tline-height: var(--ck-content-line-height);\n\tword-break: var(--ck-content-word-break);\n}\n\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n\n.ck.ck-editor {\n\t/* All the elements within \`.ck-editor\` are positioned relatively to it.\n\t If any element needs to be positioned with respect to the <body>, etc.,\n\t it must land outside of the \`.ck-editor\` in DOM. */\n\tposition: relative;\n}\n\n.ck.ck-editor .ck-editor__top .ck-sticky-panel .ck-toolbar {\n\t\t/* https://github.com/ckeditor/ckeditor5-editor-classic/issues/62 */\n\t\tz-index: var(--ck-z-panel);\n\t}\n\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n\n.ck.ck-menu-bar {\n\tborder: none;\n\tborder-bottom: 1px solid var(--ck-color-toolbar-border);\n}\n\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n\n.ck.ck-emoji {\n\twidth: 320px;\n}\n\n.ck .ck.ck-emoji__search {\n\tdisplay: flex;\n\tpadding: var(--ck-spacing-large);\n\tpadding-bottom: var(--ck-spacing-medium);\n\tjustify-content: space-between;\n\talign-items: center;\n}\n\n.ck .ck.ck-emoji__search > .ck.ck-search {\n\t\tflex: 1;\n\t}\n\n/*\n * Classes used by the "fake visual selection" displayed in the content when an input\n * in the emoji picker UI has focus (the browser does not render the native selection in this state).\n */\n.ck .ck-fake-emoji-selection {\n\tbackground: var(--ck-color-link-fake-selection);\n}\n\n/* A collapsed fake visual selection. */\n.ck .ck-fake-emoji-selection_collapsed {\n\theight: 100%;\n\tborder-right: 1px solid var(--ck-color-base-text);\n\tmargin-right: -1px;\n\toutline: solid 1px hsla(0, 0%, 100%, .5);\n}\n\ndiv.ck.ck-balloon-panel.ck-emoji-picker-balloon {\n\tz-index: calc( var( --ck-z-dialog ) + 1 );\n}\n\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n\n.ck.ck-emoji__categories-list {\n\tdisplay: flex;\n\tjustify-content: space-between;\n\tmargin: 0 var(--ck-spacing-large);\n}\n\n.ck.ck-emoji__categories-list > .ck.ck-button.ck-button_with-text {\n\t\tborder-width: 0;\n\t\tborder-bottom-width: 2px;\n\t\tborder-bottom-style: solid;\n\t\tborder-bottom-color: transparent;\n\t\tpadding: 0;\n\t\tfont-size: var(--ck-font-size-big);\n\t\tmin-width: var(--ck-font-size-big);\n\t\tmin-height: var(--ck-font-size-big);\n\t}\n\n.ck.ck-emoji__categories-list > .ck.ck-button.ck-button_with-text.ck-emoji__category-item.ck-on {\n\t\t\tborder-bottom-color: var(--ck-color-base-active);\n\t\t}\n\n.ck.ck-emoji__categories-list > .ck.ck-button.ck-button_with-text > span {\n\t\t\tmargin: auto;\n\t\t}\n\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n\n:root {\n\t--ck-emoji-grid-tile-size: 27px;\n}\n\n.ck.ck-emoji .ck.ck-emoji__tiles {\n\t\tmax-width: 100%;\n\t\tmax-height: min(265px, 40vh);\n\n\t\toverflow-y: auto;\n\t\toverflow-x: hidden;\n\t\tborder-top: 1px solid var(--ck-color-base-border);\n\t}\n\n.ck.ck-emoji .ck.ck-emoji__tiles .ck-emoji__grid {\n\t\t\tdisplay: grid;\n\t\t\tgrid-template-columns: repeat(auto-fill, minmax(var(--ck-emoji-grid-tile-size), 1fr));\n\t\t\tmargin: var(--ck-spacing-standard) var(--ck-spacing-large);\n\t\t\tgrid-gap: var(--ck-spacing-small);\n\t\t}\n\n.ck.ck-emoji .ck.ck-emoji__tiles .ck-emoji__tile {\n\t\t\twidth: var(--ck-emoji-grid-tile-size);\n\t\t\theight: var(--ck-emoji-grid-tile-size);\n\t\t\tmin-width: var(--ck-emoji-grid-tile-size);\n\t\t\tmin-height: var(--ck-emoji-grid-tile-size);\n\t\t\tfont-size: 1.5em;\n\t\t\tpadding: 0;\n\t\t\ttransition: .2s ease box-shadow;\n\t\t\tborder: 0;\n\t\t}\n\n@media (prefers-reduced-motion: reduce) {\n\n.ck.ck-emoji .ck.ck-emoji__tiles .ck-emoji__tile {\n\t\t\t\ttransition: none;\n\t\t}\n\t\t\t}\n\n.ck.ck-emoji .ck.ck-emoji__tiles .ck-emoji__tile:focus:not(.ck-disabled),\n\t\t\t.ck.ck-emoji .ck.ck-emoji__tiles .ck-emoji__tile:hover:not(.ck-disabled) {\n\t\t\t\t/* Disable the default .ck-button's border ring. */\n\t\t\t\tborder: 0;\n\t\t\t\tbox-shadow: inset 0 0 0 1px var(--ck-color-base-background), 0 0 0 2px var(--ck-color-focus-border);\n\t\t\t}\n\n/* Make sure the glyph is rendered in the center of the button */\n\n.ck.ck-emoji .ck.ck-emoji__tiles .ck-emoji__tile .ck-button__label {\n\t\t\t\tline-height: var(--ck-emoji-grid-tile-size);\n\t\t\t\twidth: 100%;\n\t\t\t\ttext-align: center;\n\t\t\t}\n\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n\n.ck.ck-form.ck-emoji-picker-form {\n\tpadding-bottom: 0;\n\n\t/*\n\t * \`.ck-form\` overrides styling of all dropdowns by adding border around them.\n\t * The border is not needed in the emoji picker form so try to remove it keeping\n\t * specificity high enough to override the form styling.\n\t */\n}\n\n.ck.ck-form.ck-emoji-picker-form .ck.ck-dropdown .ck-dropdown__button:not(:focus) {\n\t\tborder-color: transparent;\n\t}\n\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n\n.ck.ck-emoji__skin-tone {\n\tmargin-left: var(--ck-spacing-standard);\n}\n\n.ck.ck-emoji__skin-tone > .ck.ck-dropdown .ck.ck-list__item {\n\t\t\tmin-width: 1em;\n\t\t}\n\n.ck.ck-emoji__skin-tone > .ck.ck-dropdown .ck-button.ck-dropdown__button .ck-button__label {\n\t\t\t\twidth: initial;\n\t\t\t}\n\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n\n/* See ckeditor/ckeditor5#936. */\n.ck.ck-placeholder,\n.ck .ck-placeholder {\n\tposition: relative;\n}\n.ck.ck-placeholder::before, .ck .ck-placeholder::before {\n\t\tposition: absolute;\n\t\tleft: 0;\n\t\tright: 0;\n\t\tcontent: attr(data-placeholder);\n\n\t\t/* See ckeditor/ckeditor5#469. */\n\t\tpointer-events: none;\n\t}\n\n/* See ckeditor/ckeditor5#1987. */\n.ck.ck-read-only .ck-placeholder::before {\n\t\tdisplay: none;\n\t}\n\n/*\n * Rules for the \`ck-placeholder\` are loaded before the rules for \`ck-reset_all\` in the base CKEditor 5 DLL build.\n * This fix overwrites the incorrectly set \`position: static\` from \`ck-reset_all\`.\n * See https://github.com/ckeditor/ckeditor5/issues/11418.\n */\n.ck.ck-reset_all .ck-placeholder {\n\tposition: relative;\n}\n\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n\n/* Elements marked by the Renderer as hidden should be invisible in the editor. */\n.ck.ck-editor__editable span[data-ck-unsafe-element] {\n\tdisplay: none;\n}\n\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n\n.ck-find-result {\n\tbackground: var(--ck-color-highlight-background);\n\tcolor: var(--ck-color-text);\n}\n\n.ck-find-result_selected {\n\tbackground: hsl(29, 100%, 60%);\n}\n\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n\n.ck.ck-find-and-replace-form {\n\tmax-width: 100%;\n}\n\n.ck.ck-find-and-replace-form .ck-find-and-replace-form__inputs, .ck.ck-find-and-replace-form .ck-find-and-replace-form__actions {\n\t\tdisplay: flex;\n\n\t\t/* The inputs area styles */\n\t}\n\n.ck.ck-find-and-replace-form .ck-find-and-replace-form__inputs.ck-find-and-replace-form__inputs .ck-results-counter, .ck.ck-find-and-replace-form .ck-find-and-replace-form__actions.ck-find-and-replace-form__inputs .ck-results-counter {\n\t\t\tposition: absolute;\n\t\t}\n\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n\n/* The values should be synchronized with the "FONT_SIZE_PRESET_UNITS" object in the "/src/fontsize/utils.js" file. */\n\n:root {\n\t--ck-content-font-size-tiny: 0.7em;\n\t--ck-content-font-size-small: 0.85em;\n\t--ck-content-font-size-big: 1.4em;\n\t--ck-content-font-size-huge: 1.8em;\n}\n\n/* Styles should be prefixed with the \`.ck-content\` class.\nSee https://github.com/ckeditor/ckeditor5/issues/6636 */\n.ck-content .text-tiny {\n\t\tfont-size: var(--ck-content-font-size-tiny);\n\t}\n.ck-content .text-small {\n\t\tfont-size: var(--ck-content-font-size-small);\n\t}\n.ck-content .text-big {\n\t\tfont-size: var(--ck-content-font-size-big);\n\t}\n.ck-content .text-huge {\n\t\tfont-size: var(--ck-content-font-size-huge);\n\t}\n\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n\n/* Increase z-index of everything to make sure nothing sticks in front of the editor.\nDisable scrollbars that can be present due to the rest of the website content. */\nhtml.ck-fullscreen,\nbody.ck-fullscreen {\n\t--ck-z-fullscreen: 10000;\n\n\toverflow: hidden;\n\n\t--ck-z-default: calc(var(--ck-z-fullscreen) + 1);\n\t--ck-z-panel: calc(var(--ck-z-default) + 999);\n\t--ck-z-dialog: 100000;\n\n\t/* CKBox wrappers have z-index of 9999, let's bump them over the dialog's to ensure visibility like outside fullscreen mode. */\n}\nhtml.ck-fullscreen .ckbox-reset:not(#n)>.ckbox--dialog, body.ck-fullscreen .ckbox-reset:not(#n)>.ckbox--dialog {\n\t\t--ckbox-z-index-root: calc(var(--ck-z-dialog) + 1);\n\t}\nhtml.ck-fullscreen .ckbox:not(#n) .ckbox-img-editor, body.ck-fullscreen .ckbox:not(#n) .ckbox-img-editor {\n\t\t--ckbox-z-index-preview: calc(var(--ck-z-dialog) + 1);\n\t}\nhtml.ck-fullscreen .ck-pagination-view-line, body.ck-fullscreen .ck-pagination-view-line {\n\t\tz-index: calc(var(--ck-z-fullscreen) + 1);\n\t}\nhtml.ck-fullscreen .page-break__label, body.ck-fullscreen .page-break__label {\n\t\t/* Needs to be higher than for .ck-pagination-view-line to be displayed on top of the line. */\n\t\tz-index: calc(var(--ck-z-fullscreen) + 2);\n\t}\n\n/*\nFullscreen layout:\n\n<div class="ck ck-fullscreen__main-wrapper">\n\t<div class="ck ck-fullscreen__top-wrapper ck-reset_all">\n\t\t<div class="ck ck-fullscreen__menu-bar" data-ck-fullscreen="menu-bar"></div>\n\t\t<div class="ck ck-fullscreen__toolbar" data-ck-fullscreen="toolbar"></div>\n\t</div>\n\t<div class="ck ck-fullscreen__editable-wrapper">\n\t\t<div class="ck ck-fullscreen__sidebar ck-fullscreen__left-sidebar" data-ck-fullscreen="left-sidebar"></div>\n\t\t<div class="ck ck-fullscreen__editable" data-ck-fullscreen="editable"></div>\n\t\t<div class="ck ck-fullscreen__sidebar ck-fullscreen__right-sidebar" data-ck-fullscreen="right-sidebar"></div>\n\t</div>\n\t<div class="ck ck-fullscreen__bottom-wrapper">\n\t\t<div class="ck ck-fullscreen__body-wrapper" data-ck-fullscreen="body-wrapper"></div>\n\t</div>\n</div>\n*/\n\n.ck.ck-fullscreen__main-wrapper {\n\t/* \`position: fixed\` prevents the overscroll on macos that would happen with \`position: absolute\`. */\n\tposition: fixed;\n\ttop: 0;\n\tleft: 0;\n\twidth: 100%;\n\theight: 100%;\n\tz-index: var(--ck-z-fullscreen);\n\tbackground: var(--ck-color-base-foreground);\n\tdisplay: flex;\n\tflex-direction: column;\n}\n\n.ck.ck-fullscreen__main-wrapper .ck.ck-revision-history-ui__changes-navigation {\n\t\tmargin-top: 0px;\n\t\tmargin-bottom: 0px;\n\t}\n\n/* If the fullscreen container is not directly in the body, we need to make sure it's positioned absolutely. */\n:not(body> .ck-fullscreen__main-wrapper).ck-fullscreen__main-wrapper {\n\tposition: absolute;\n}\n.ck-fullscreen__main-wrapper:not(body> .ck-fullscreen__main-wrapper) .ck-fullscreen__top-wrapper {\n\t\tborder-top: 1px solid var(--ck-color-base-border);\n\t\tborder-left: 1px solid var(--ck-color-base-border);\n\t\tborder-right: 1px solid var(--ck-color-base-border);\n\t\tborder-radius: var(--ck-border-radius) 0;\n\t}\n\n.ck-fullscreen__menu-bar .ck.ck-menu-bar {\n\tborder: none;\n}\n\n.ck.ck-fullscreen__toolbar .ck-toolbar {\n\tborder-left: 0;\n\tborder-right: 0;\n\tborder-radius: 0;\n}\n\n.ck-fullscreen__main-wrapper .ck-fullscreen__editable-wrapper {\n\t--ck-fullscreen-editor-top-margin: 28px;\n\t--ck-fullscreen-editor-bottom-margin: 28px;\n\tdisplay: flex;\n\tjustify-content: flex-start;\n\toverflow: auto;\n\tmax-height: 100%;\n}\n\n.ck-fullscreen__main-wrapper .ck-fullscreen__editable {\n\tmargin-top: var(--ck-fullscreen-editor-top-margin);\n\theight: 100%;\n\tmargin-left: auto;\n}\n\n.ck-fullscreen__main-wrapper .ck-fullscreen__editable::after {\n\t\tcontent: '';\n\t\tdisplay: block;\n\t\theight: var(--ck-fullscreen-editor-bottom-margin);\n\t}\n\n.ck-fullscreen__main-wrapper .ck-fullscreen__editable .ck.ck-editor__editable:not(.ck-editor__nested-editable) {\n\tbox-sizing: border-box;\n\t/* Make sure the border is taken into account. */\n\twidth: calc(210mm + 2px);\n\t/* Make sure the border is taken into account. */\n\tmax-width: calc(210mm + 2px);\n\tmin-height: 297mm;\n\theight: fit-content;\n\t/* Reset margins that may be present on editable. We add them in other places. */\n\tmargin: 0;\n\tpadding: 20mm 12mm;\n\tborder: 1px var(--ck-color-base-border) solid;\n\tbackground: hsl(0, 0%, 100%);\n\tbox-shadow: 0 2px 3px hsla(0, 0%, 0%, 0.078);\n}\n\n.ck-fullscreen__main-wrapper .ck-fullscreen__editable .ck-source-editing-area {\n\twidth: calc(210mm + 2px);\n}\n\n.ck-fullscreen__sidebar {\n\twidth: 300px;\n\tmargin-top: var(--ck-fullscreen-editor-top-margin);\n\tmargin-left: 10px;\n}\n\n.ck-fullscreen__left-sidebar {\n\tfont-family: Helvetica, Arial, sans-serif;\n\t--ck-user-avatar-size: 28px;\n\tposition: sticky;\n\talign-self: flex-start;\n\ttop: 0;\n\theight: 100%;\n\tbackground-color: transparent;\n\tmargin-top: 0px;\n\tbox-sizing: border-box;\n\tdisplay: flex;\n\tflex-direction: column;\n}\n\n.ck-fullscreen__left-sidebar > :first-child {\n\t\t/* Set minimal width if there is any item in the sidebar. */\n\t\tmin-width: 300px;\n\t\t/* We have to use padding-top instead of margin-top because margin is scrollable. */\n\t\tpadding-top: var(--ck-fullscreen-editor-top-margin);\n\t}\n\n.ck-fullscreen__left-sidebar .ck.ck-presence-list--collapsed {\n\t--ck-user-avatar-size: 32px;\n}\n\n.ck-fullscreen__left-sidebar .ck-user {\n\tfont-size: 0.85em;\n}\n\n.ck-fullscreen__left-sidebar .ck-presence-list__users-counter__text {\n\tfont-size: 0.85em;\n}\n\n.ck-fullscreen__left-sidebar-item {\n\tpadding: var(--ck-spacing-medium);\n\tmargin-bottom: var(--ck-spacing-medium);\n\n\t/* First header should not have top padding. */\n}\n\n.ck-fullscreen__left-sidebar-item:first-child {\n\t\tpadding-top: 0;\n\t}\n\n.ck-fullscreen__left-sidebar-item:last-child {\n\t\tmargin-bottom: 0;\n\t}\n\n.ck-fullscreen__left-sidebar-header {\n\t--ck-fullscreen-presence-list-header-font-size: 0.875em;\n\tfont-size: var(--ck-fullscreen-presence-list-header-font-size);\n\tfont-weight: bold;\n\tcolor: var(--ck-document-outline-item-default-color);\n\twhite-space: nowrap;\n\ttext-overflow: ellipsis;\n\toverflow: hidden;\n}\n\n.ck-fullscreen__left-sidebar--sticky {\n\tposition: sticky;\n\ttop: 0;\n}\n\n.ck-fullscreen__left-sidebar--sticky > :first-child {\n\t\tpadding-top: 0;\n\t}\n\n.ck-fullscreen__presence-list {\n\tmargin-top: var(--ck-spacing-medium);\n}\n\n.ck-fullscreen__left-sidebar-item--no-margin {\n\tmargin: 0;\n}\n\n.ck-fullscreen__left-sidebar .ck.ck-document-outline {\n\tpadding-top: 0;\n\tpadding-left: 0;\n\tpadding-right: 0;\n}\n\n.ck-fullscreen__document-outline-wrapper {\n\tpadding-top: 0;\n\toverflow-y: auto;\n}\n\n.ck-fullscreen__sidebar.ck-fullscreen__right-sidebar {\n\tmargin-top: var(--ck-fullscreen-editor-top-margin);\n\tmargin-right: auto;\n}\n\n.ck-fullscreen__sidebar.ck-fullscreen__right-sidebar> :first-child {\n\t\t/* Set minimal width if there is any item in the sidebar. */\n\t\tmin-width: 300px;\n\t}\n\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n\n.ck.ck-heading_heading1 .ck-button__label {\n\tfont-size: 20px;\n}\n\n.ck.ck-heading_heading2 .ck-button__label {\n\tfont-size: 17px;\n}\n\n.ck.ck-heading_heading3 .ck-button__label {\n\tfont-size: 14px;\n}\n\n.ck[class*="ck-heading_heading"] {\n\tfont-weight: bold;\n}\n\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n\n:root {\n\t--ck-content-highlight-marker-yellow: hsl(60, 97%, 73%);\n\t--ck-content-highlight-marker-green: hsl(120, 93%, 68%);\n\t--ck-content-highlight-marker-pink: hsl(345, 96%, 73%);\n\t--ck-content-highlight-marker-blue: hsl(201, 97%, 72%);\n\t--ck-content-highlight-pen-red: hsl(0, 85%, 49%);\n\t--ck-content-highlight-pen-green: hsl(112, 100%, 27%);\n}\n\n.ck-content .marker-yellow {\n\t\tbackground-color: var(--ck-content-highlight-marker-yellow);\n\t}\n.ck-content .marker-green {\n\t\tbackground-color: var(--ck-content-highlight-marker-green);\n\t}\n.ck-content .marker-pink {\n\t\tbackground-color: var(--ck-content-highlight-marker-pink);\n\t}\n.ck-content .marker-blue {\n\t\tbackground-color: var(--ck-content-highlight-marker-blue);\n\t}\n\n.ck-content .pen-red {\n\t\tcolor: var(--ck-content-highlight-pen-red);\n\n\t\t/* Override default yellow background of \`<mark>\` from user agent stylesheet */\n\t\tbackground-color: transparent;\n\t}\n.ck-content .pen-green {\n\t\tcolor: var(--ck-content-highlight-pen-green);\n\n\t\t/* Override default yellow background of \`<mark>\` from user agent stylesheet */\n\t\tbackground-color: transparent;\n\t}\n\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n\n\n.ck-editor__editable .ck-horizontal-line {\n\t/* Necessary to render properly next to floated objects, e.g. side image case. */\n\tdisplay: flow-root;\n}\n\n.ck-content hr {\n\tmargin: 15px 0;\n\theight: 4px;\n\tbackground: hsl(0, 0%, 87%);\n\tborder: 0;\n}\n\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n\n/* The feature container. */\n.ck-widget.raw-html-embed {\n\t/* Give the embed some air. */\n\t/* The first value should be equal to --ck-spacing-large variable if used in the editor context\n\tto avoid the content jumping (See https://github.com/ckeditor/ckeditor5/issues/9825). */\n\tmargin: 0.9em auto;\n\tposition: relative;\n\tdisplay: flow-root;\n\n\t/* Give the html embed some minimal width in the content to prevent them\n\tfrom being "squashed" in tight spaces, e.g. in table cells (https://github.com/ckeditor/ckeditor5/issues/8331) */\n\tmin-width: 15em;\n\n\t/* Don't inherit the style, e.g. when in a block quote. */\n\tfont-style: normal;\n\n\t/* ----- Emebed label in the upper left corner ----------------------------------------------- */\n}\n.ck-widget.raw-html-embed::before {\n\t\tposition: absolute;\n\n\t\t/* Make sure the content does not cover the label. */\n\t\tz-index: 1;\n\t}\n/* ----- Emebed internals --------------------------------------------------------------------- */\n/* The switch mode button wrapper. */\n.ck-widget.raw-html-embed .raw-html-embed__buttons-wrapper {\n\t\tposition: absolute;\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t}\n.ck-widget.raw-html-embed .raw-html-embed__preview {\n\t\tposition: relative;\n\t\toverflow: hidden;\n\t\tdisplay: flex;\n\t}\n.ck-widget.raw-html-embed .raw-html-embed__preview-content {\n\t\twidth: 100%;\n\t\tposition: relative;\n\t\tmargin: auto;\n\n\t\t/* Gives spacing to the small renderable elements, so they always cover the placeholder. */\n\t\tdisplay: table;\n\t\tborder-collapse: separate;\n\t\tborder-spacing: 7px;\n\t}\n.ck-widget.raw-html-embed .raw-html-embed__preview-placeholder {\n\t\tposition: absolute;\n\t\tleft: 0;\n\t\ttop: 0;\n\t\tright: 0;\n\t\tbottom: 0;\n\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tjustify-content: center;\n\t}\n\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n\n:root {\n\t--ck-html-object-embed-unfocused-outline-width: 1px;\n}\n\n.ck-widget.html-object-embed {\n\tfont-size: var(--ck-font-size-base);\n\tbackground-color: var(--ck-color-base-foreground);\n\tpadding: var(--ck-spacing-small);\n\t/* Leave space for label */\n\tpadding-top: calc(var(--ck-font-size-tiny) + var(--ck-spacing-large));\n\tmin-width: calc(76px + var(--ck-spacing-standard));\n}\n\n.ck-widget.html-object-embed:not(.ck-widget_selected):not(:hover) {\n\t\toutline: var(--ck-html-object-embed-unfocused-outline-width) dashed var(--ck-color-widget-blurred-border);\n\t}\n\n.ck-widget.html-object-embed::before {\n\t\tfont-weight: normal;\n\t\tfont-style: normal;\n\t\tposition: absolute;\n\t\tcontent: attr(data-html-object-embed-label);\n\t\ttop: 0;\n\t\tleft: var(--ck-spacing-standard);\n\t\tbackground: hsl(0deg 0% 60%);\n\t\ttransition: background var(--ck-widget-handler-animation-duration) var(--ck-widget-handler-animation-curve);\n\t\tpadding: calc(var(--ck-spacing-tiny) + var(--ck-html-object-embed-unfocused-outline-width)) var(--ck-spacing-small) var(--ck-spacing-tiny);\n\t\tborder-radius: 0 0 var(--ck-border-radius) var(--ck-border-radius);\n\t\tcolor: var(--ck-color-base-background);\n\t\tfont-size: var(--ck-font-size-tiny);\n\t\tfont-family: var(--ck-font-face);\n\t}\n\n/* Make space for label. */\n\n.ck-widget.html-object-embed .ck-widget__type-around .ck-widget__type-around__button.ck-widget__type-around__button_before {\n\t\tmargin-left: 50px;\n\t}\n\n.ck-widget.html-object-embed .html-object-embed__content {\n\t\t/* Disable user interaction with embed content */\n\t\tpointer-events: none;\n\t}\n\ndiv.ck-widget.html-object-embed {\n\tmargin: 1em auto;\n}\n\nspan.ck-widget.html-object-embed {\n\tdisplay: inline-block;\n}\n\n\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n\n:root {\n\t--ck-content-color-image-caption-background: hsl(0, 0%, 97%);\n\t--ck-content-color-image-caption-text: hsl(0, 0%, 20%);\n\t--ck-color-image-caption-highlighted-background: hsl(52deg 100% 50%);\n}\n\n/* Content styles */\n.ck-content .image > figcaption {\n\tdisplay: table-caption;\n\tcaption-side: bottom;\n\tword-break: normal;\n\toverflow-wrap: anywhere;\n\tbreak-before: avoid;\n\tcolor: var(--ck-content-color-image-caption-text);\n\tbackground-color: var(--ck-content-color-image-caption-background);\n\tpadding: .6em;\n\tfont-size: .75em;\n\toutline-offset: -1px;\n\n\t/* Improve placeholder rendering in high-constrast mode (https://github.com/ckeditor/ckeditor5/issues/14907). */\n}\n@media (forced-colors: active) {\n.ck-content .image > figcaption {\n\t\tbackground-color: unset;\n\t\tcolor: unset;\n}\n\t}\n\n/* Editing styles */\n@media (forced-colors: none) {\n\t\t.ck.ck-editor__editable .image > figcaption.image__caption_highlighted {\n\t\tanimation: ck-image-caption-highlight .6s ease-out;\n\t\t}\n\t}\n@media (prefers-reduced-motion: reduce) {\n.ck.ck-editor__editable .image > figcaption.image__caption_highlighted {\n\t\tanimation: none;\n}\n\t}\n\n@keyframes ck-image-caption-highlight {\n\t0% {\n\t\tbackground-color: var(--ck-color-image-caption-highlighted-background);\n\t}\n\n\t100% {\n\t\tbackground-color: var(--ck-content-color-image-caption-background);\n\t}\n}\n\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n\n/* Preserve aspect ratio of the resized image after introducing image height attribute. */\n.ck-content img.image_resized {\n\theight: auto;\n}\n\n.ck-content .image.image_resized {\n\tmax-width: 100%;\n\t/*\n\tThe \`<figure>\` element for resized images must not use \`display:table\` as browsers do not support \`max-width\` for it well.\n\tSee https://stackoverflow.com/questions/4019604/chrome-safari-ignoring-max-width-in-table/14420691#14420691 for more.\n\tFortunately, since we control the width, there is no risk that the image will look bad.\n\t*/\n\tdisplay: block;\n\tbox-sizing: border-box;\n}\n\n.ck-content .image.image_resized img {\n\t\t/* For resized images it is the \`<figure>\` element that determines the image width. */\n\t\twidth: 100%;\n\t}\n\n.ck-content .image.image_resized > figcaption {\n\t\t/* The \`<figure>\` element uses \`display:block\`, so \`<figcaption>\` also has to. */\n\t\tdisplay: block;\n\t}\n\n/* The resized inline image nested in the table should respect its parent size.\n\tSee https://github.com/ckeditor/ckeditor5/issues/9117. */\n\n.ck.ck-editor__editable td .image-inline.image_resized img, .ck.ck-editor__editable th .image-inline.image_resized img {\n\t\t\tmax-width: 100%;\n\t\t}\n\n[dir="ltr"] .ck.ck-button.ck-button_with-text.ck-resize-image-button .ck-button__icon {\n\tmargin-right: var(--ck-spacing-standard);\n}\n\n[dir="rtl"] .ck.ck-button.ck-button_with-text.ck-resize-image-button .ck-button__icon {\n\tmargin-left: var(--ck-spacing-standard);\n}\n\n.ck.ck-dropdown .ck-button.ck-resize-image-button .ck-button__label {\n\twidth: 4em;\n}\n\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n\n:root {\n\t--ck-content-image-style-spacing: 1.5em;\n\t--ck-content-inline-image-style-spacing: calc(var(--ck-content-image-style-spacing) / 2);\n}\n\n/* See: https://github.com/ckeditor/ckeditor5/issues/16317 */\n\n/* Provides a minimal side margin for the left and right aligned images, so that the user has a visual feedback\n\t\tconfirming successful application of the style if image width exceeds the editor's size.\n\t\tSee https://github.com/ckeditor/ckeditor5/issues/9342 */\n\n.ck-content .image.image-style-block-align-left,\n\t\t.ck-content .image.image-style-block-align-right {\n\t\t\tmax-width: calc(100% - var(--ck-content-image-style-spacing));\n\t\t}\n\n/* Allows displaying multiple floating images in the same line.\n\t\tSee https://github.com/ckeditor/ckeditor5/issues/9183#issuecomment-804988132 */\n\n.ck-content .image.image-style-align-left,\n\t\t.ck-content .image.image-style-align-right {\n\t\t\tclear: none;\n\t\t}\n\n.ck-content .image.image-style-side {\n\t\t\tfloat: right;\n\t\t\tmargin-left: var(--ck-content-image-style-spacing);\n\t\t\tmax-width: 50%;\n\t\t}\n\n.ck-content .image.image-style-align-left {\n\t\t\tfloat: left;\n\t\t\tmargin-right: var(--ck-content-image-style-spacing);\n\t\t}\n\n.ck-content .image.image-style-align-right {\n\t\t\tfloat: right;\n\t\t\tmargin-left: var(--ck-content-image-style-spacing);\n\t\t}\n\n.ck-content .image.image-style-block-align-right {\n\t\t\tmargin-right: 0;\n\t\t\tmargin-left: auto;\n\t\t}\n\n.ck-content .image.image-style-block-align-left {\n\t\t\tmargin-left: 0;\n\t\t\tmargin-right: auto;\n\t\t}\n\n.ck-content .image-style-align-center {\n\t\tmargin-left: auto;\n\t\tmargin-right: auto;\n\t}\n\n.ck-content .image-style-align-left {\n\t\tfloat: left;\n\t\tmargin-right: var(--ck-content-image-style-spacing);\n\t}\n\n.ck-content .image-style-align-right {\n\t\tfloat: right;\n\t\tmargin-left: var(--ck-content-image-style-spacing);\n\t}\n\n/* Simulates margin collapsing with the preceding paragraph, which does not work for the floating elements. */\n\n.ck-content p + .image.image-style-align-left,\n\t.ck-content p + .image.image-style-align-right,\n\t.ck-content p + .image.image-style-side {\n\t\tmargin-top: 0;\n\t}\n\n.ck-content .image-inline.image-style-align-left,\n\t\t.ck-content .image-inline.image-style-align-right {\n\t\t\tmargin-top: var(--ck-content-inline-image-style-spacing);\n\t\t\tmargin-bottom: var(--ck-content-inline-image-style-spacing);\n\t\t}\n\n.ck-content .image-inline.image-style-align-left {\n\t\t\tmargin-right: var(--ck-content-inline-image-style-spacing);\n\t\t}\n\n.ck-content .image-inline.image-style-align-right {\n\t\t\tmargin-left: var(--ck-content-inline-image-style-spacing);\n\t\t}\n\n/* The button should display as a regular drop-down if the action button\n\tis forced to fire the same action as the arrow button. */\n\n.ck.ck-splitbutton.ck-splitbutton_flatten:hover > .ck-splitbutton__action:not(.ck-disabled),\n\t\t\t.ck.ck-splitbutton.ck-splitbutton_flatten.ck-splitbutton_open > .ck-splitbutton__action:not(.ck-disabled),\n\t\t\t.ck.ck-splitbutton.ck-splitbutton_flatten:hover > .ck-splitbutton__arrow:not(.ck-disabled),\n\t\t\t.ck.ck-splitbutton.ck-splitbutton_flatten.ck-splitbutton_open > .ck-splitbutton__arrow:not(.ck-disabled),\n\t\t\t.ck.ck-splitbutton.ck-splitbutton_flatten:hover > .ck-splitbutton__arrow:not(.ck-disabled):not(:hover),\n\t\t\t.ck.ck-splitbutton.ck-splitbutton_flatten.ck-splitbutton_open > .ck-splitbutton__arrow:not(.ck-disabled):not(:hover) {\n\t\t\t\tbackground-color: var(--ck-color-button-on-background);\n\t\t\t}\n\n.ck.ck-splitbutton.ck-splitbutton_flatten:hover > .ck-splitbutton__action:not(.ck-disabled)::after, .ck.ck-splitbutton.ck-splitbutton_flatten.ck-splitbutton_open > .ck-splitbutton__action:not(.ck-disabled)::after, .ck.ck-splitbutton.ck-splitbutton_flatten:hover > .ck-splitbutton__arrow:not(.ck-disabled)::after, .ck.ck-splitbutton.ck-splitbutton_flatten.ck-splitbutton_open > .ck-splitbutton__arrow:not(.ck-disabled)::after, .ck.ck-splitbutton.ck-splitbutton_flatten:hover > .ck-splitbutton__arrow:not(.ck-disabled):not(:hover)::after, .ck.ck-splitbutton.ck-splitbutton_flatten.ck-splitbutton_open > .ck-splitbutton__arrow:not(.ck-disabled):not(:hover)::after {\n\t\t\t\t\tdisplay: none;\n\t\t\t\t}\n\n.ck.ck-splitbutton.ck-splitbutton_flatten.ck-splitbutton_open:hover > .ck-splitbutton__action:not(.ck-disabled),\n\t\t\t.ck.ck-splitbutton.ck-splitbutton_flatten.ck-splitbutton_open:hover > .ck-splitbutton__arrow:not(.ck-disabled),\n\t\t\t.ck.ck-splitbutton.ck-splitbutton_flatten.ck-splitbutton_open:hover > .ck-splitbutton__arrow:not(.ck-disabled):not(:hover) {\n\t\t\t\tbackground-color: var(--ck-color-button-on-hover-background);\n\t\t\t}\n\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n\n.ck.ck-editor__editable .image,\n\t.ck.ck-editor__editable .image-inline {\n\t\tposition: relative;\n\t}\n\n/* Upload progress bar. */\n\n.ck.ck-editor__editable .image .ck-progress-bar,\n\t.ck.ck-editor__editable .image-inline .ck-progress-bar {\n\t\tposition: absolute;\n\t\ttop: 0;\n\t\tleft: 0;\n\t}\n\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n\n.ck-image-upload-complete-icon {\n\tdisplay: block;\n\tposition: absolute;\n\n\t/*\n\t * Smaller images should have the icon closer to the border.\n\t * Match the icon position with the linked image indicator brought by the link image feature.\n\t */\n\ttop: min(var(--ck-spacing-medium), 6%);\n\tright: min(var(--ck-spacing-medium), 6%);\n\tborder-radius: 50%;\n\tz-index: 1;\n}\n\n.ck-image-upload-complete-icon::after {\n\t\tcontent: "";\n\t\tposition: absolute;\n\t}\n\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n\n.ck .ck-upload-placeholder-loader {\n\tposition: absolute;\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: center;\n\ttop: 0;\n\tleft: 0;\n}\n\n.ck .ck-upload-placeholder-loader::before {\n\t\tcontent: '';\n\t\tposition: relative;\n\t}\n\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n\n.ck-content .image {\n\t\tdisplay: table;\n\t\tclear: both;\n\t\ttext-align: center;\n\n\t\t/* Make sure there is some space between the content and the image. Center image by default. */\n\t\t/* The first value should be equal to --ck-spacing-large variable if used in the editor context\n\t \tto avoid the content jumping (See https://github.com/ckeditor/ckeditor5/issues/9825). */\n\t\tmargin: 0.9em auto;\n\n\t\t/* Make sure the caption will be displayed properly (See: https://github.com/ckeditor/ckeditor5/issues/1870). */\n\t\tmin-width: 50px;\n\t}\n\n.ck-content .image img {\n\t\t\t/* Prevent unnecessary margins caused by line-height (see #44). */\n\t\t\tdisplay: block;\n\n\t\t\t/* Center the image if its width is smaller than the content's width. */\n\t\t\tmargin: 0 auto;\n\n\t\t\t/* Make sure the image never exceeds the size of the parent container (ckeditor/ckeditor5-ui#67). */\n\t\t\tmax-width: 100%;\n\n\t\t\t/* Make sure the image is never smaller than the parent container (See: https://github.com/ckeditor/ckeditor5/issues/9300). */\n\t\t\tmin-width: 100%;\n\n\t\t\t/* Keep proportions of the block image if the height is set and the image is wider than the editor width.\n\t\t\tSee https://github.com/ckeditor/ckeditor5/issues/14542. */\n\t\t\theight: auto;\n\t\t}\n\n.ck-content .image-inline {\n\t\t/*\n\t\t * Normally, the .image-inline would have "display: inline-block" and "img { width: 100% }" (to follow the wrapper while resizing).\n\t\t * Unfortunately, together with "srcset", it gets automatically stretched up to the width of the editing root.\n\t\t * This strange behavior does not happen with inline-flex.\n\t\t */\n\t\tdisplay: inline-flex;\n\n\t\t/* While being resized, don't allow the image to exceed the width of the editing root. */\n\t\tmax-width: 100%;\n\n\t\t/* This is required by Safari to resize images in a sensible way. Without this, the browser breaks the ratio. */\n\t\talign-items: flex-start;\n\n\t\t/* When the picture is present it must act as a flex container to let the img resize properly */\n\t}\n\n.ck-content .image-inline picture {\n\t\t\tdisplay: flex;\n\t\t}\n\n/* When the picture is present, it must act like a resizable img. */\n\n.ck-content .image-inline picture,\n\t\t.ck-content .image-inline img {\n\t\t\t/* This is necessary for the img to span the entire .image-inline wrapper and to resize properly. */\n\t\t\tflex-grow: 1;\n\t\t\tflex-shrink: 1;\n\n\t\t\t/* Prevents overflowing the editing root boundaries when an inline image is very wide. */\n\t\t\tmax-width: 100%;\n\t\t}\n\n/*\n\t * Inhertit the content styles padding of the <figcaption> in case the integration overrides \`text-align: center\`\n\t * of \`.image\` (e.g. to the left/right). This ensures the placeholder stays at the padding just like the native\n\t * caret does, and not at the edge of <figcaption>.\n\t */\n\n.ck.ck-editor__editable .image > figcaption.ck-placeholder::before {\n\t\tpadding-left: inherit;\n\t\tpadding-right: inherit;\n\n\t\t/*\n\t\t * Make sure the image caption placeholder doesn't overflow the placeholder area.\n\t\t * See https://github.com/ckeditor/ckeditor5/issues/9162.\n\t\t */\n\t\twhite-space: nowrap;\n\t\toverflow: hidden;\n\t\ttext-overflow: ellipsis;\n\t}\n\n/*\n\t * See https://github.com/ckeditor/ckeditor5/issues/15115.\n\t */\n\n.ck.ck-editor__editable .image {\n\t\tz-index: 1;\n\n\t\t/*\n\t\t * Make sure the selected image always stays on top of its siblings.\n\t\t * See https://github.com/ckeditor/ckeditor5/issues/9108.\n\t\t */\n\t}\n\n.ck.ck-editor__editable .image.ck-widget_selected {\n\t\t\tz-index: 2;\n\t\t}\n\n/*\n\t * See https://github.com/ckeditor/ckeditor5/issues/15115.\n\t */\n\n.ck.ck-editor__editable .image-inline {\n\t\tz-index: 1;\n\n\t\t/*\n\t\t * Make sure the selected inline image always stays on top of its siblings.\n\t\t * See https://github.com/ckeditor/ckeditor5/issues/9108.\n\t\t */\n\t}\n\n.ck.ck-editor__editable .image-inline.ck-widget_selected {\n\t\t\tz-index: 2;\n\n\t\t\t/*\n\t\t\t * Make sure the native browser selection style is not displayed.\n\t\t\t * Inline image widgets have their own styles for the selected state and\n\t\t\t * leaving this up to the browser is asking for a visual collision.\n\t\t\t */\n\t\t}\n\n.ck.ck-editor__editable .image-inline.ck-widget_selected ::selection {\n\t\t\t\tdisplay: none;\n\t\t\t}\n\n/* Keep proportions of the inline image if the height is set and the image is wider than the editor width.\n\tSee https://github.com/ckeditor/ckeditor5/issues/14542. */\n\n.ck.ck-editor__editable .image-inline img {\n\t\theight: auto;\n\t}\n\n/* The inline image nested in the table should have its original size if not resized.\n\tSee https://github.com/ckeditor/ckeditor5/issues/9117. */\n\n.ck.ck-editor__editable td .image-inline img, .ck.ck-editor__editable th .image-inline img {\n\t\t\tmax-width: none;\n\t\t}\n\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n\n.ck.ck-editor__editable img.image_placeholder {\n\t\tbackground-size: 100% 100%;\n\t}\n\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n\n.ck.ck-image-insert-url {\n\twidth: 400px;\n\tpadding: var(--ck-spacing-large) var(--ck-spacing-large) 0;\n}\n\n.ck.ck-image-insert-url .ck-image-insert-url__action-row {\n\t\tdisplay: grid;\n\t\tgrid-template-columns: repeat(2, 1fr);\n\t}\n\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n\n.ck.ck-link-toolbar__preview {\n\tdisplay: inline-block;\n}\n\n.ck.ck-link-toolbar__preview .ck-button__label {\n\t\toverflow: hidden;\n\t}\n\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n\n/* Linked image indicator */\n\n.ck.ck-editor__editable figure.image > a::after, .ck.ck-editor__editable a span.image-inline::after {\n\t\t\tdisplay: block;\n\t\t\tposition: absolute;\n\t\t}\n\n\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n\n/* Generic class that wraps each link balloon view. */\n.ck.ck-link-form .ck-link-form__providers-list {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t}\n.ck.ck-link-form .ck-link-form__providers-list .ck-link__button > .ck-button__label {\n\t\t\t\tflex-grow: 1;\n\t\t\t}\n.ck.ck-link-form .ck-link__items:empty {\n\t\tdisplay: none;\n\t}\n\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n\n.ck.ck-link-providers > .ck-link-providers__list {\n\t\toverflow-x: hidden;\n\t\toverflow-y: auto;\n\t\toverscroll-behavior: contain;\n\t}\n\n.ck.ck-link-providers > .ck-link-providers__list .ck-button > .ck-icon {\n\t\t\t\tflex-shrink: 0;\n\t\t\t}\n\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n\n.ck-editor__editable .ck-list-bogus-paragraph {\n\tdisplay: block;\n}\n\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n\n.ck.ck-list-styles-list {\n\tdisplay: grid;\n}\n\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n\n:root {\n\t--ck-content-list-marker-color: var(--ck-content-font-color);\n\t--ck-content-list-marker-font-family: var(--ck-content-font-family);\n\t--ck-content-list-marker-font-size: var(--ck-content-font-size);\n}\n\n/* Opinionated list content styling: prevents content shift\n\t * when a list becomes multi-block (Enter + Backspace scenario).\n\t * See: https://github.com/ckeditor/ckeditor5/pull/18801\n\t */\n\n.ck-content li > p:first-of-type {\n\t\tmargin-top: 0;\n\t}\n\n/* Prevents margins from appearing when a bogus paragraph\n\t * receives line height or text alignment.\n\t * Ensures a consistent experience with the first paragraph.\n\t * See: https://github.com/ckeditor/ckeditor5/pull/18801\n\t */\n\n.ck-content li > p:only-of-type {\n\t\tmargin-top: 0;\n\t\tmargin-bottom: 0;\n\t}\n\n.ck-content li.ck-list-marker-bold::marker {\n\t\tfont-weight: bold;\n\t}\n\n.ck-content li.ck-list-marker-italic::marker {\n\t\tfont-style: italic;\n\t}\n\n.ck-content li.ck-list-marker-color::marker {\n\t\tcolor: var(--ck-content-list-marker-color);\n\t}\n\n.ck-content li.ck-list-marker-font-family::marker {\n\t\tfont-family: var(--ck-content-list-marker-font-family);\n\t}\n\n.ck-content li.ck-list-marker-font-size::marker {\n\t\tfont-size: var(--ck-content-list-marker-font-size);\n\t}\n\n.ck-content li.ck-list-marker-font-size-tiny::marker {\n\t\tfont-size: var(--ck-content-font-size-tiny);\n\t}\n\n.ck-content li.ck-list-marker-font-size-small::marker {\n\t\tfont-size: var(--ck-content-font-size-small);\n\t}\n\n.ck-content li.ck-list-marker-font-size-big::marker {\n\t\tfont-size: var(--ck-content-font-size-big);\n\t}\n\n.ck-content li.ck-list-marker-font-size-huge::marker {\n\t\tfont-size: var(--ck-content-font-size-huge);\n\t}\n\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n\n.ck-content ol {\n\tlist-style-type: decimal;\n}\n\n.ck-content ol ol {\n\t\tlist-style-type: lower-latin;\n\t}\n\n.ck-content ol ol ol {\n\t\t\tlist-style-type: lower-roman;\n\t\t}\n\n.ck-content ol ol ol ol {\n\t\t\t\tlist-style-type: upper-latin;\n\t\t\t}\n\n.ck-content ol ol ol ol ol {\n\t\t\t\t\tlist-style-type: upper-roman;\n\t\t\t\t}\n\n.ck-content ul {\n\tlist-style-type: disc;\n}\n\n.ck-content ul ul {\n\t\tlist-style-type: circle;\n\t}\n\n.ck-content ul ul ul {\n\t\t\tlist-style-type: square;\n\t\t}\n\n.ck-content ul ul ul ul {\n\t\t\t\tlist-style-type: square;\n\t\t\t}\n\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n\n:root {\n\t--ck-content-todo-list-checkmark-size: 16px;\n}\n\n/*\n * To-do list content styles.\n */\n.ck-content .todo-list {\n\tlist-style: none;\n}\n.ck-content .todo-list li {\n\t\tposition: relative;\n\t\tmargin-bottom: 5px;\n\t}\n.ck-content .todo-list li .todo-list {\n\t\t\tmargin-top: 5px;\n\t\t}\n.ck-content .todo-list .todo-list__label > input {\n\t\t\t-webkit-appearance: none;\n\t\t\tdisplay: inline-block;\n\t\t\tposition: relative;\n\t\t\twidth: var(--ck-content-todo-list-checkmark-size);\n\t\t\theight: var(--ck-content-todo-list-checkmark-size);\n\t\t\tvertical-align: middle;\n\t\t\t/* Needed on iOS */\n\t\t\tborder: 0;\n\t\t\t/* LTR styles */\n\t\t\tleft: -25px;\n\t\t\tmargin-right: -15px;\n\t\t\tright: 0;\n\t\t\tmargin-left: 0;\n\t\t\t/* RTL styles */\n\t\t}\n.ck-content[dir=rtl] .todo-list .todo-list__label > input {\n\t\tleft: 0;\n\t\tmargin-right: 0;\n\t\tright: -25px;\n\t\tmargin-left: -15px;\n\t}\n.ck-content .todo-list .todo-list__label > input::before {\n\t\tdisplay: block;\n\t\tposition: absolute;\n\t\tbox-sizing: border-box;\n\t\tcontent: '';\n\t\twidth: 100%;\n\t\theight: 100%;\n\t\tborder: 1px solid hsl(0, 0%, 20%);\n\t\tborder-radius: 2px;\n\t\ttransition: 250ms ease-in-out box-shadow;\n\t}\n@media (prefers-reduced-motion: reduce) {\n.ck-content .todo-list .todo-list__label > input::before {\n\t\t\ttransition: none;\n\t}\n\t\t}\n.ck-content .todo-list .todo-list__label > input::after {\n\t\tdisplay: block;\n\t\tposition: absolute;\n\t\tbox-sizing: content-box;\n\t\tpointer-events: none;\n\t\tcontent: '';\n\n\t\t/* Calculate tick position, size and border-width proportional to the checkmark size. */\n\t\tleft: calc( var(--ck-content-todo-list-checkmark-size) / 3 );\n\t\ttop: calc( var(--ck-content-todo-list-checkmark-size) / 5.3 );\n\t\twidth: calc( var(--ck-content-todo-list-checkmark-size) / 5.3 );\n\t\theight: calc( var(--ck-content-todo-list-checkmark-size) / 2.6 );\n\t\tborder-style: solid;\n\t\tborder-color: transparent;\n\t\tborder-width: 0 calc( var(--ck-content-todo-list-checkmark-size) / 8 ) calc( var(--ck-content-todo-list-checkmark-size) / 8 ) 0;\n\t\ttransform: rotate(45deg);\n\t}\n.ck-content .todo-list .todo-list__label > input[checked]::before {\n\t\t\tbackground: hsl(126, 64%, 41%);\n\t\t\tborder-color: hsl(126, 64%, 41%);\n\t\t}\n.ck-content .todo-list .todo-list__label > input[checked]::after {\n\t\t\tborder-color: hsl(0, 0%, 100%);\n\t\t}\n.ck-content .todo-list .todo-list__label .todo-list__label__description {\n\t\t\tvertical-align: middle;\n\t\t}\n.ck-content .todo-list .todo-list__label.todo-list__label_without-description input[type=checkbox] {\n\t\t\tposition: absolute;\n\t\t}\n\n/*\n * To-do list editing view styles.\n */\n/*\n\t * To-do list should be interactive only during the editing\n\t * (https://github.com/ckeditor/ckeditor5/issues/2090).\n\t */\n.ck-editor__editable.ck-content .todo-list .todo-list__label > input,\n\t.ck-editor__editable.ck-content .todo-list .todo-list__label > span[contenteditable=false] > input {\n\t\tcursor: pointer;\n\t}\n.ck-editor__editable.ck-content .todo-list .todo-list__label > input:hover::before, .ck-editor__editable.ck-content .todo-list .todo-list__label > span[contenteditable=false] > input:hover::before {\n\t\t\tbox-shadow: 0 0 0 5px hsla(0, 0%, 0%, 0.1);\n\t\t}\n/*\n\t * Document Lists - editing view has an additional span around checkbox.\n\t */\n.ck-editor__editable.ck-content .todo-list .todo-list__label > span[contenteditable=false] > input {\n\t\t-webkit-appearance: none;\n\t\tdisplay: inline-block;\n\t\tposition: relative;\n\t\twidth: var(--ck-content-todo-list-checkmark-size);\n\t\theight: var(--ck-content-todo-list-checkmark-size);\n\t\tvertical-align: middle;\n\t\t/* Needed on iOS */\n\t\tborder: 0;\n\t\t/* LTR styles */\n\t\tleft: -25px;\n\t\tmargin-right: -15px;\n\t\tright: 0;\n\t\tmargin-left: 0;\n\t\t/* RTL styles */\n\t}\n.ck-editor__editable.ck-content[dir=rtl] .todo-list .todo-list__label > span[contenteditable=false] > input {\n\t\tleft: 0;\n\t\tmargin-right: 0;\n\t\tright: -25px;\n\t\tmargin-left: -15px;\n\t}\n.ck-editor__editable.ck-content .todo-list .todo-list__label > span[contenteditable=false] > input::before {\n\t\tdisplay: block;\n\t\tposition: absolute;\n\t\tbox-sizing: border-box;\n\t\tcontent: '';\n\t\twidth: 100%;\n\t\theight: 100%;\n\t\tborder: 1px solid hsl(0, 0%, 20%);\n\t\tborder-radius: 2px;\n\t\ttransition: 250ms ease-in-out box-shadow;\n\t}\n@media (prefers-reduced-motion: reduce) {\n.ck-editor__editable.ck-content .todo-list .todo-list__label > span[contenteditable=false] > input::before {\n\t\t\ttransition: none;\n\t}\n\t\t}\n.ck-editor__editable.ck-content .todo-list .todo-list__label > span[contenteditable=false] > input::after {\n\t\tdisplay: block;\n\t\tposition: absolute;\n\t\tbox-sizing: content-box;\n\t\tpointer-events: none;\n\t\tcontent: '';\n\n\t\t/* Calculate tick position, size and border-width proportional to the checkmark size. */\n\t\tleft: calc( var(--ck-content-todo-list-checkmark-size) / 3 );\n\t\ttop: calc( var(--ck-content-todo-list-checkmark-size) / 5.3 );\n\t\twidth: calc( var(--ck-content-todo-list-checkmark-size) / 5.3 );\n\t\theight: calc( var(--ck-content-todo-list-checkmark-size) / 2.6 );\n\t\tborder-style: solid;\n\t\tborder-color: transparent;\n\t\tborder-width: 0 calc( var(--ck-content-todo-list-checkmark-size) / 8 ) calc( var(--ck-content-todo-list-checkmark-size) / 8 ) 0;\n\t\ttransform: rotate(45deg);\n\t}\n.ck-editor__editable.ck-content .todo-list .todo-list__label > span[contenteditable=false] > input[checked]::before {\n\t\t\tbackground: hsl(126, 64%, 41%);\n\t\t\tborder-color: hsl(126, 64%, 41%);\n\t\t}\n.ck-editor__editable.ck-content .todo-list .todo-list__label > span[contenteditable=false] > input[checked]::after {\n\t\t\tborder-color: hsl(0, 0%, 100%);\n\t\t}\n.ck-editor__editable.ck-content .todo-list .todo-list__label.todo-list__label_without-description input[type=checkbox] {\n\t\t\tposition: absolute;\n\t\t}\n\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n\n.ck-content .media {\n\t/* Don't allow floated content overlap the media.\n\thttps://github.com/ckeditor/ckeditor5-media-embed/issues/53 */\n\tclear: both;\n\n\t/* Make sure there is some space between the content and the media. */\n\t/* The first value should be equal to --ck-spacing-large variable if used in the editor context\n\tto avoid the content jumping (See https://github.com/ckeditor/ckeditor5/issues/9825). */\n\tmargin: 0.9em 0;\n\n\t/* Make sure media is not overriden with Bootstrap default \`flex\` value.\n\tSee: https://github.com/ckeditor/ckeditor5/issues/1373. */\n\tdisplay: block;\n\n\t/* Give the media some minimal width in the content to prevent them\n\tfrom being "squashed" in tight spaces, e.g. in table cells (#44) */\n\tmin-width: 15em;\n}\n\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n\n.ck-media__wrapper .ck-media__placeholder {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\talign-items: center;\n\t}\n\n.ck-media__wrapper .ck-media__placeholder .ck-media__placeholder__url {\n\t\t\t/* Otherwise the URL will overflow when the content is very narrow. */\n\t\t\tmax-width: 100%;\n\n\t\t\tposition: relative;\n\t\t}\n\n.ck-media__wrapper .ck-media__placeholder .ck-media__placeholder__url .ck-media__placeholder__url__text {\n\t\t\t\toverflow: hidden;\n\t\t\t\tdisplay: block;\n\t\t\t}\n\n.ck-media__wrapper[data-oembed-url*="twitter.com"] .ck-media__placeholder__icon *, .ck-media__wrapper[data-oembed-url*="google.com/maps"] .ck-media__placeholder__icon *, .ck-media__wrapper[data-oembed-url*="goo.gl/maps"] .ck-media__placeholder__icon *, .ck-media__wrapper[data-oembed-url*="maps.google.com"] .ck-media__placeholder__icon *, .ck-media__wrapper[data-oembed-url*="maps.app.goo.gl"] .ck-media__placeholder__icon *, .ck-media__wrapper[data-oembed-url*="facebook.com"] .ck-media__placeholder__icon *, .ck-media__wrapper[data-oembed-url*="instagram.com"] .ck-media__placeholder__icon * {\n\t\t\tdisplay: none;\n\t\t}\n\n/* Disable all mouse interaction as long as the editor is not read–only.\n   https://github.com/ckeditor/ckeditor5-media-embed/issues/58 */\n.ck-editor__editable:not(.ck-read-only) .ck-media__wrapper > *:not(.ck-media__placeholder) {\n\tpointer-events: none;\n}\n\n/* Disable all mouse interaction when the widget is not selected (e.g. to avoid opening links by accident).\n   https://github.com/ckeditor/ckeditor5-media-embed/issues/18 */\n.ck-editor__editable:not(.ck-read-only) .ck-widget:not(.ck-widget_selected) .ck-media__placeholder {\n\tpointer-events: none;\n}\n\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n\n.ck-vertical-form .ck-button::after {\n\t\tcontent: "";\n\t\twidth: 0;\n\t\tposition: absolute;\n\t\tright: -1px;\n\t\ttop: -1px;\n\t\tbottom: -1px;\n\t\tz-index: 1;\n\t}\n\n.ck-vertical-form .ck-button:focus::after {\n\t\tdisplay: none;\n\t}\n\n@media screen and (max-width: 600px) {\n\t\t\t.ck.ck-responsive-form .ck-button::after {\n\t\t\t\tcontent: "";\n\t\t\t\twidth: 0;\n\t\t\t\tposition: absolute;\n\t\t\t\tright: -1px;\n\t\t\t\ttop: -1px;\n\t\t\t\tbottom: -1px;\n\t\t\t\tz-index: 1;\n\t\t\t}\n\n\t\t\t.ck.ck-responsive-form .ck-button:focus::after {\n\t\t\t\tdisplay: none;\n\t\t\t}\n\t}\n\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n\n.ck.ck-media-form {\n\tdisplay: flex;\n\talign-items: flex-start;\n\tflex-direction: row;\n\tflex-wrap: nowrap;\n\twidth: 400px;\n}\n\n.ck.ck-media-form .ck-labeled-field-view {\n\t\tdisplay: inline-block;\n\t\twidth: 100%;\n\t}\n\n.ck.ck-media-form .ck-label {\n\t\tdisplay: none;\n\t}\n\n.ck.ck-media-form .ck-input {\n\t\twidth: 100%;\n\t}\n\n@media screen and (max-width: 600px) {\n\n.ck.ck-media-form {\n\t\tflex-wrap: wrap;\n}\n\n\t\t.ck.ck-media-form .ck-labeled-field-view {\n\t\t\tflex-basis: 100%;\n\t\t}\n\n\t\t.ck.ck-media-form .ck-button {\n\t\t\tflex-basis: 50%;\n\t\t}\n\t}\n\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n\n:root {\n\t--ck-mention-list-max-height: 300px;\n}\n\n.ck.ck-mentions {\n\tmax-height: var(--ck-mention-list-max-height);\n\n\toverflow-y: auto;\n\n\t/* Prevent unnecessary horizontal scrollbar in Safari\n\thttps://github.com/ckeditor/ckeditor5-mention/issues/41 */\n\toverflow-x: hidden;\n\n\toverscroll-behavior: contain;\n\n\t/* Prevent unnecessary vertical scrollbar in Safari\n\thttps://github.com/ckeditor/ckeditor5-mention/issues/41 */\n}\n\n.ck.ck-mentions > .ck-list__item {\n\t\toverflow: hidden;\n\t\tflex-shrink: 0;\n\t}\n\ndiv.ck.ck-balloon-panel.ck-mention-balloon {\n\tz-index: calc( var( --ck-z-dialog ) + 1 );\n}\n\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n\n:root {\n\t--ck-color-minimap-tracker-background: 208, 0%, 51%;\n\t--ck-color-minimap-iframe-outline: hsl(0deg 0% 75%);\n\t--ck-color-minimap-iframe-shadow: hsl(0deg 0% 0% / 11%);\n\t--ck-color-minimap-progress-background: hsl(0,0%,40%);\n}\n\n.ck.ck-minimap {\n\tposition: absolute;\n\tuser-select: none;\n\tbackground: var(--ck-color-base-background);\n}\n\n.ck.ck-minimap,\n\t.ck.ck-minimap iframe {\n\t\twidth: 100%;\n\t\theight: 100%;\n\t}\n\n.ck.ck-minimap iframe {\n\t\tborder: 0;\n\t\tpointer-events: none;\n\t\tposition: relative;\n\t\toutline: 1px solid var(--ck-color-minimap-iframe-outline);\n\t\tbox-shadow: 0 2px 5px var(--ck-color-minimap-iframe-shadow);\n\t\tmargin: 0;\n\t}\n\n.ck.ck-minimap .ck.ck-minimap__position-tracker {\n\t\tposition: absolute;\n\t\twidth: 100%;\n\t\ttop: 0;\n\t\tbackground: hsla( var(--ck-color-minimap-tracker-background), .2 );\n\t\tz-index: 1;\n\t\ttransition: background 100ms ease-in-out;\n\t}\n\n@media (prefers-reduced-motion: reduce) {\n\n.ck.ck-minimap .ck.ck-minimap__position-tracker {\n\t\t\ttransition: none;\n\t}\n\t\t}\n\n.ck.ck-minimap .ck.ck-minimap__position-tracker:hover {\n\t\t\tbackground:hsla( var(--ck-color-minimap-tracker-background), .3 );\n\t\t}\n\n.ck.ck-minimap .ck.ck-minimap__position-tracker.ck-minimap__position-tracker_dragging,\n\t\t.ck.ck-minimap .ck.ck-minimap__position-tracker.ck-minimap__position-tracker_dragging:hover {\n\t\t\tbackground:hsla( var(--ck-color-minimap-tracker-background), .4 );\n\t\t}\n\n.ck.ck-minimap .ck.ck-minimap__position-tracker.ck-minimap__position-tracker_dragging::after, .ck.ck-minimap .ck.ck-minimap__position-tracker.ck-minimap__position-tracker_dragging:hover::after {\n\t\t\t\topacity: 1;\n\t\t\t}\n\n.ck.ck-minimap .ck.ck-minimap__position-tracker::after {\n\t\t\tcontent: attr(data-progress) "%";\n\t\t\tposition: absolute;\n\t\t\ttop: 5px;\n\t\t\tright: 5px;\n\t\t\tbackground: var(--ck-color-minimap-progress-background);\n\t\t\tcolor: var(--ck-color-base-background);\n\t\t\tborder: 1px solid var(--ck-color-base-background);\n\t\t\tpadding: 2px 4px;\n\t\t\tfont-size: 10px;\n\t\t\tborder-radius: 3px;\n\t\t\topacity: 0;\n\t\t\ttransition: opacity 100ms ease-in-out;\n\t\t}\n\n@media (prefers-reduced-motion: reduce) {\n\n.ck.ck-minimap .ck.ck-minimap__position-tracker::after {\n\t\t\t\ttransition: none;\n\t\t}\n\t\t\t}\n\n\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n\n.ck-content .page-break {\n\tposition: relative;\n\tclear: both;\n\tpadding: 5px 0;\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: center;\n}\n\n.ck-content .page-break::after {\n\t\tcontent: '';\n\t\tposition: absolute;\n\t\tborder-bottom: 2px dashed hsl(0, 0%, 77%);\n\t\twidth: 100%;\n\t}\n\n.ck-content .page-break__label {\n\tposition: relative;\n\tz-index: 1;\n\tpadding: .3em .6em;\n\tdisplay: block;\n\ttext-transform: uppercase;\n\tborder: 1px solid hsl(0, 0%, 77%);\n\tborder-radius: 2px;\n\tfont-size: 0.75em;\n\tfont-weight: bold;\n\tcolor: hsl(0, 0%, 20%);\n\tbackground: hsl(0, 0%, 100%);\n\tbox-shadow: 2px 2px 1px hsla(0, 0%, 0%, 0.15);\n\n\t/* Disable the possibility to select the label text by the user. */\n\t-webkit-user-select: none;\n\t-moz-user-select: none;\n\t-ms-user-select: none;\n\tuser-select: none;\n}\n\n/* Do not show the page break element inside the print preview window. */\n@media print {\n\t.ck-content .page-break {\n\t\tpadding: 0;\n\t}\n\n\t\t.ck-content .page-break::after {\n\t\t\tdisplay: none;\n\t\t}\n\n\t/*\n\t * From time to time placing page-break directly after a block element with margin causes appending a new blank page in pagination mode.\n\t * Removing margin-bottom from the block element fixes that issue and the margin is not being moved to the next blank page.\n\t *\n\t * Keep this in sync with the pagination plugins.\n\t */\n\t.ck-content *:has(+ .page-break) {\n\t\tmargin-bottom: 0;\n\t}\n}\n\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n\n:root {\n\t--ck-show-blocks-border-color: hsl(0, 0%, 46%);\n}\n\n.ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) address {\n\t\tbackground-repeat: no-repeat;\n\t\tpadding-top: 15px;\n\t\t/* Fix for Multi-root editor\n\thttps://github.com/ckeditor/ckeditor5/issues/15969 */\n\t}\n\n[dir=ltr] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) address {\n\t\tbackground-image: url(${j});\n\t\tbackground-position: 1px 1px;\n\t}\n\n[dir=rtl] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) address {\n\t\tbackground-image: url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px); transform:translate(-2px, 0)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='100%' text-anchor='end' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>ADDRESS</text></svg>");\n\t\tbackground-position: calc(100% - 1px) 1px;\n\t}\n\n.ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) address:not(.ck-widget_selected):not(.ck-widget:hover) {\n\t\toutline: 1px dashed var(--ck-show-blocks-border-color);\n\t}\n\n[dir="ltr"] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) address {\n\t\tbackground-image: url(${j});\n\t\tbackground-position: 1px 1px;\n\t}\n\n[dir="rtl"] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) address {\n\t\tbackground-image: url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px); transform:translate(-2px, 0)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='100%' text-anchor='end' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>ADDRESS</text></svg>");\n\t\tbackground-position: calc(100% - 1px) 1px;\n\t}\n\n.ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) aside {\n\t\tbackground-repeat: no-repeat;\n\t\tpadding-top: 15px;\n\t\t/* Fix for Multi-root editor\n\thttps://github.com/ckeditor/ckeditor5/issues/15969 */\n\t}\n\n[dir=ltr] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) aside {\n\t\tbackground-image: url(${H});\n\t\tbackground-position: 1px 1px;\n\t}\n\n[dir=rtl] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) aside {\n\t\tbackground-image: url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px); transform:translate(-2px, 0)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='100%' text-anchor='end' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>ASIDE</text></svg>");\n\t\tbackground-position: calc(100% - 1px) 1px;\n\t}\n\n.ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) aside:not(.ck-widget_selected):not(.ck-widget:hover) {\n\t\toutline: 1px dashed var(--ck-show-blocks-border-color);\n\t}\n\n[dir="ltr"] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) aside {\n\t\tbackground-image: url(${H});\n\t\tbackground-position: 1px 1px;\n\t}\n\n[dir="rtl"] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) aside {\n\t\tbackground-image: url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px); transform:translate(-2px, 0)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='100%' text-anchor='end' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>ASIDE</text></svg>");\n\t\tbackground-position: calc(100% - 1px) 1px;\n\t}\n\n.ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) blockquote {\n\t\tbackground-repeat: no-repeat;\n\t\tpadding-top: 15px;\n\t\t/* Fix for Multi-root editor\n\thttps://github.com/ckeditor/ckeditor5/issues/15969 */\n\t}\n\n[dir=ltr] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) blockquote {\n\t\tbackground-image: url(${U});\n\t\tbackground-position: 1px 1px;\n\t}\n\n[dir=rtl] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) blockquote {\n\t\tbackground-image: url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px); transform:translate(-2px, 0)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='100%' text-anchor='end' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>BLOCKQUOTE</text></svg>");\n\t\tbackground-position: calc(100% - 1px) 1px;\n\t}\n\n.ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) blockquote:not(.ck-widget_selected):not(.ck-widget:hover) {\n\t\toutline: 1px dashed var(--ck-show-blocks-border-color);\n\t}\n\n[dir="ltr"] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) blockquote {\n\t\tbackground-image: url(${U});\n\t\tbackground-position: 1px 1px;\n\t}\n\n[dir="rtl"] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) blockquote {\n\t\tbackground-image: url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px); transform:translate(-2px, 0)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='100%' text-anchor='end' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>BLOCKQUOTE</text></svg>");\n\t\tbackground-position: calc(100% - 1px) 1px;\n\t}\n\n.ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) details {\n\t\tbackground-repeat: no-repeat;\n\t\tpadding-top: 15px;\n\t\t/* Fix for Multi-root editor\n\thttps://github.com/ckeditor/ckeditor5/issues/15969 */\n\t}\n\n[dir=ltr] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) details {\n\t\tbackground-image: url(${$});\n\t\tbackground-position: 1px 1px;\n\t}\n\n[dir=rtl] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) details {\n\t\tbackground-image: url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px); transform:translate(-2px, 0)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='100%' text-anchor='end' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>DETAILS</text></svg>");\n\t\tbackground-position: calc(100% - 1px) 1px;\n\t}\n\n.ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) details:not(.ck-widget_selected):not(.ck-widget:hover) {\n\t\toutline: 1px dashed var(--ck-show-blocks-border-color);\n\t}\n\n[dir="ltr"] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) details {\n\t\tbackground-image: url(${$});\n\t\tbackground-position: 1px 1px;\n\t}\n\n[dir="rtl"] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) details {\n\t\tbackground-image: url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px); transform:translate(-2px, 0)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='100%' text-anchor='end' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>DETAILS</text></svg>");\n\t\tbackground-position: calc(100% - 1px) 1px;\n\t}\n\n.ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) div:not(.ck-widget, .ck-widget *) {\n\t\tbackground-repeat: no-repeat;\n\t\tpadding-top: 15px;\n\t\t/* Fix for Multi-root editor\n\thttps://github.com/ckeditor/ckeditor5/issues/15969 */\n\t}\n\n[dir=ltr] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) div:not(.ck-widget, .ck-widget *) {\n\t\tbackground-image: url(${W});\n\t\tbackground-position: 1px 1px;\n\t}\n\n[dir=rtl] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) div:not(.ck-widget, .ck-widget *) {\n\t\tbackground-image: url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px); transform:translate(-2px, 0)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='100%' text-anchor='end' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>DIV</text></svg>");\n\t\tbackground-position: calc(100% - 1px) 1px;\n\t}\n\n.ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) div:not(.ck-widget, .ck-widget *):not(.ck-widget_selected):not(.ck-widget:hover) {\n\t\toutline: 1px dashed var(--ck-show-blocks-border-color);\n\t}\n\n[dir="ltr"] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) div:not(.ck-widget, .ck-widget *) {\n\t\tbackground-image: url(${W});\n\t\tbackground-position: 1px 1px;\n\t}\n\n[dir="rtl"] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) div:not(.ck-widget, .ck-widget *) {\n\t\tbackground-image: url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px); transform:translate(-2px, 0)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='100%' text-anchor='end' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>DIV</text></svg>");\n\t\tbackground-position: calc(100% - 1px) 1px;\n\t}\n\n.ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) footer {\n\t\tbackground-repeat: no-repeat;\n\t\tpadding-top: 15px;\n\t\t/* Fix for Multi-root editor\n\thttps://github.com/ckeditor/ckeditor5/issues/15969 */\n\t}\n\n[dir=ltr] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) footer {\n\t\tbackground-image: url(${q});\n\t\tbackground-position: 1px 1px;\n\t}\n\n[dir=rtl] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) footer {\n\t\tbackground-image: url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px); transform:translate(-2px, 0)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='100%' text-anchor='end' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>FOOTER</text></svg>");\n\t\tbackground-position: calc(100% - 1px) 1px;\n\t}\n\n.ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) footer:not(.ck-widget_selected):not(.ck-widget:hover) {\n\t\toutline: 1px dashed var(--ck-show-blocks-border-color);\n\t}\n\n[dir="ltr"] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) footer {\n\t\tbackground-image: url(${q});\n\t\tbackground-position: 1px 1px;\n\t}\n\n[dir="rtl"] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) footer {\n\t\tbackground-image: url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px); transform:translate(-2px, 0)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='100%' text-anchor='end' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>FOOTER</text></svg>");\n\t\tbackground-position: calc(100% - 1px) 1px;\n\t}\n\n.ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) h1 {\n\t\tbackground-repeat: no-repeat;\n\t\tpadding-top: 15px;\n\t\t/* Fix for Multi-root editor\n\thttps://github.com/ckeditor/ckeditor5/issues/15969 */\n\t}\n\n[dir=ltr] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) h1 {\n\t\tbackground-image: url(${K});\n\t\tbackground-position: 1px 1px;\n\t}\n\n[dir=rtl] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) h1 {\n\t\tbackground-image: url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px); transform:translate(-2px, 0)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='100%' text-anchor='end' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>H1</text></svg>");\n\t\tbackground-position: calc(100% - 1px) 1px;\n\t}\n\n.ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) h1:not(.ck-widget_selected):not(.ck-widget:hover) {\n\t\toutline: 1px dashed var(--ck-show-blocks-border-color);\n\t}\n\n[dir="ltr"] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) h1 {\n\t\tbackground-image: url(${K});\n\t\tbackground-position: 1px 1px;\n\t}\n\n[dir="rtl"] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) h1 {\n\t\tbackground-image: url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px); transform:translate(-2px, 0)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='100%' text-anchor='end' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>H1</text></svg>");\n\t\tbackground-position: calc(100% - 1px) 1px;\n\t}\n\n.ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) h2 {\n\t\tbackground-repeat: no-repeat;\n\t\tpadding-top: 15px;\n\t\t/* Fix for Multi-root editor\n\thttps://github.com/ckeditor/ckeditor5/issues/15969 */\n\t}\n\n[dir=ltr] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) h2 {\n\t\tbackground-image: url(${G});\n\t\tbackground-position: 1px 1px;\n\t}\n\n[dir=rtl] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) h2 {\n\t\tbackground-image: url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px); transform:translate(-2px, 0)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='100%' text-anchor='end' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>H2</text></svg>");\n\t\tbackground-position: calc(100% - 1px) 1px;\n\t}\n\n.ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) h2:not(.ck-widget_selected):not(.ck-widget:hover) {\n\t\toutline: 1px dashed var(--ck-show-blocks-border-color);\n\t}\n\n[dir="ltr"] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) h2 {\n\t\tbackground-image: url(${G});\n\t\tbackground-position: 1px 1px;\n\t}\n\n[dir="rtl"] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) h2 {\n\t\tbackground-image: url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px); transform:translate(-2px, 0)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='100%' text-anchor='end' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>H2</text></svg>");\n\t\tbackground-position: calc(100% - 1px) 1px;\n\t}\n\n.ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) h3 {\n\t\tbackground-repeat: no-repeat;\n\t\tpadding-top: 15px;\n\t\t/* Fix for Multi-root editor\n\thttps://github.com/ckeditor/ckeditor5/issues/15969 */\n\t}\n\n[dir=ltr] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) h3 {\n\t\tbackground-image: url(${Q});\n\t\tbackground-position: 1px 1px;\n\t}\n\n[dir=rtl] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) h3 {\n\t\tbackground-image: url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px); transform:translate(-2px, 0)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='100%' text-anchor='end' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>H3</text></svg>");\n\t\tbackground-position: calc(100% - 1px) 1px;\n\t}\n\n.ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) h3:not(.ck-widget_selected):not(.ck-widget:hover) {\n\t\toutline: 1px dashed var(--ck-show-blocks-border-color);\n\t}\n\n[dir="ltr"] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) h3 {\n\t\tbackground-image: url(${Q});\n\t\tbackground-position: 1px 1px;\n\t}\n\n[dir="rtl"] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) h3 {\n\t\tbackground-image: url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px); transform:translate(-2px, 0)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='100%' text-anchor='end' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>H3</text></svg>");\n\t\tbackground-position: calc(100% - 1px) 1px;\n\t}\n\n.ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) h4 {\n\t\tbackground-repeat: no-repeat;\n\t\tpadding-top: 15px;\n\t\t/* Fix for Multi-root editor\n\thttps://github.com/ckeditor/ckeditor5/issues/15969 */\n\t}\n\n[dir=ltr] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) h4 {\n\t\tbackground-image: url(${Y});\n\t\tbackground-position: 1px 1px;\n\t}\n\n[dir=rtl] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) h4 {\n\t\tbackground-image: url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px); transform:translate(-2px, 0)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='100%' text-anchor='end' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>H4</text></svg>");\n\t\tbackground-position: calc(100% - 1px) 1px;\n\t}\n\n.ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) h4:not(.ck-widget_selected):not(.ck-widget:hover) {\n\t\toutline: 1px dashed var(--ck-show-blocks-border-color);\n\t}\n\n[dir="ltr"] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) h4 {\n\t\tbackground-image: url(${Y});\n\t\tbackground-position: 1px 1px;\n\t}\n\n[dir="rtl"] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) h4 {\n\t\tbackground-image: url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px); transform:translate(-2px, 0)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='100%' text-anchor='end' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>H4</text></svg>");\n\t\tbackground-position: calc(100% - 1px) 1px;\n\t}\n\n.ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) h5 {\n\t\tbackground-repeat: no-repeat;\n\t\tpadding-top: 15px;\n\t\t/* Fix for Multi-root editor\n\thttps://github.com/ckeditor/ckeditor5/issues/15969 */\n\t}\n\n[dir=ltr] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) h5 {\n\t\tbackground-image: url(${J});\n\t\tbackground-position: 1px 1px;\n\t}\n\n[dir=rtl] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) h5 {\n\t\tbackground-image: url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px); transform:translate(-2px, 0)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='100%' text-anchor='end' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>H5</text></svg>");\n\t\tbackground-position: calc(100% - 1px) 1px;\n\t}\n\n.ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) h5:not(.ck-widget_selected):not(.ck-widget:hover) {\n\t\toutline: 1px dashed var(--ck-show-blocks-border-color);\n\t}\n\n[dir="ltr"] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) h5 {\n\t\tbackground-image: url(${J});\n\t\tbackground-position: 1px 1px;\n\t}\n\n[dir="rtl"] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) h5 {\n\t\tbackground-image: url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px); transform:translate(-2px, 0)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='100%' text-anchor='end' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>H5</text></svg>");\n\t\tbackground-position: calc(100% - 1px) 1px;\n\t}\n\n.ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) h6 {\n\t\tbackground-repeat: no-repeat;\n\t\tpadding-top: 15px;\n\t\t/* Fix for Multi-root editor\n\thttps://github.com/ckeditor/ckeditor5/issues/15969 */\n\t}\n\n[dir=ltr] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) h6 {\n\t\tbackground-image: url(${Z});\n\t\tbackground-position: 1px 1px;\n\t}\n\n[dir=rtl] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) h6 {\n\t\tbackground-image: url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px); transform:translate(-2px, 0)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='100%' text-anchor='end' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>H6</text></svg>");\n\t\tbackground-position: calc(100% - 1px) 1px;\n\t}\n\n.ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) h6:not(.ck-widget_selected):not(.ck-widget:hover) {\n\t\toutline: 1px dashed var(--ck-show-blocks-border-color);\n\t}\n\n[dir="ltr"] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) h6 {\n\t\tbackground-image: url(${Z});\n\t\tbackground-position: 1px 1px;\n\t}\n\n[dir="rtl"] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) h6 {\n\t\tbackground-image: url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px); transform:translate(-2px, 0)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='100%' text-anchor='end' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>H6</text></svg>");\n\t\tbackground-position: calc(100% - 1px) 1px;\n\t}\n\n.ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) header {\n\t\tbackground-repeat: no-repeat;\n\t\tpadding-top: 15px;\n\t\t/* Fix for Multi-root editor\n\thttps://github.com/ckeditor/ckeditor5/issues/15969 */\n\t}\n\n[dir=ltr] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) header {\n\t\tbackground-image: url(${X});\n\t\tbackground-position: 1px 1px;\n\t}\n\n[dir=rtl] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) header {\n\t\tbackground-image: url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px); transform:translate(-2px, 0)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='100%' text-anchor='end' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>HEADER</text></svg>");\n\t\tbackground-position: calc(100% - 1px) 1px;\n\t}\n\n.ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) header:not(.ck-widget_selected):not(.ck-widget:hover) {\n\t\toutline: 1px dashed var(--ck-show-blocks-border-color);\n\t}\n\n[dir="ltr"] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) header {\n\t\tbackground-image: url(${X});\n\t\tbackground-position: 1px 1px;\n\t}\n\n[dir="rtl"] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) header {\n\t\tbackground-image: url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px); transform:translate(-2px, 0)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='100%' text-anchor='end' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>HEADER</text></svg>");\n\t\tbackground-position: calc(100% - 1px) 1px;\n\t}\n\n.ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) main {\n\t\tbackground-repeat: no-repeat;\n\t\tpadding-top: 15px;\n\t\t/* Fix for Multi-root editor\n\thttps://github.com/ckeditor/ckeditor5/issues/15969 */\n\t}\n\n[dir=ltr] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) main {\n\t\tbackground-image: url(${tt});\n\t\tbackground-position: 1px 1px;\n\t}\n\n[dir=rtl] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) main {\n\t\tbackground-image: url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px); transform:translate(-2px, 0)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='100%' text-anchor='end' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>MAIN</text></svg>");\n\t\tbackground-position: calc(100% - 1px) 1px;\n\t}\n\n.ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) main:not(.ck-widget_selected):not(.ck-widget:hover) {\n\t\toutline: 1px dashed var(--ck-show-blocks-border-color);\n\t}\n\n[dir="ltr"] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) main {\n\t\tbackground-image: url(${tt});\n\t\tbackground-position: 1px 1px;\n\t}\n\n[dir="rtl"] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) main {\n\t\tbackground-image: url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px); transform:translate(-2px, 0)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='100%' text-anchor='end' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>MAIN</text></svg>");\n\t\tbackground-position: calc(100% - 1px) 1px;\n\t}\n\n.ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) nav {\n\t\tbackground-repeat: no-repeat;\n\t\tpadding-top: 15px;\n\t\t/* Fix for Multi-root editor\n\thttps://github.com/ckeditor/ckeditor5/issues/15969 */\n\t}\n\n[dir=ltr] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) nav {\n\t\tbackground-image: url(${et});\n\t\tbackground-position: 1px 1px;\n\t}\n\n[dir=rtl] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) nav {\n\t\tbackground-image: url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px); transform:translate(-2px, 0)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='100%' text-anchor='end' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>NAV</text></svg>");\n\t\tbackground-position: calc(100% - 1px) 1px;\n\t}\n\n.ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) nav:not(.ck-widget_selected):not(.ck-widget:hover) {\n\t\toutline: 1px dashed var(--ck-show-blocks-border-color);\n\t}\n\n[dir="ltr"] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) nav {\n\t\tbackground-image: url(${et});\n\t\tbackground-position: 1px 1px;\n\t}\n\n[dir="rtl"] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) nav {\n\t\tbackground-image: url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px); transform:translate(-2px, 0)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='100%' text-anchor='end' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>NAV</text></svg>");\n\t\tbackground-position: calc(100% - 1px) 1px;\n\t}\n\n.ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) pre {\n\t\tbackground-repeat: no-repeat;\n\t\tpadding-top: 15px;\n\t\t/* Fix for Multi-root editor\n\thttps://github.com/ckeditor/ckeditor5/issues/15969 */\n\t}\n\n[dir=ltr] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) pre {\n\t\tbackground-image: url(${nt});\n\t\tbackground-position: 1px 1px;\n\t}\n\n[dir=rtl] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) pre {\n\t\tbackground-image: url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px); transform:translate(-2px, 0)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='100%' text-anchor='end' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>PRE</text></svg>");\n\t\tbackground-position: calc(100% - 1px) 1px;\n\t}\n\n.ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) pre:not(.ck-widget_selected):not(.ck-widget:hover) {\n\t\toutline: 1px dashed var(--ck-show-blocks-border-color);\n\t}\n\n[dir="ltr"] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) pre {\n\t\tbackground-image: url(${nt});\n\t\tbackground-position: 1px 1px;\n\t}\n\n[dir="rtl"] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) pre {\n\t\tbackground-image: url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px); transform:translate(-2px, 0)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='100%' text-anchor='end' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>PRE</text></svg>");\n\t\tbackground-position: calc(100% - 1px) 1px;\n\t}\n\n.ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) ol {\n\t\tbackground-repeat: no-repeat;\n\t\tpadding-top: 15px;\n\t\t/* Fix for Multi-root editor\n\thttps://github.com/ckeditor/ckeditor5/issues/15969 */\n\t}\n\n[dir=ltr] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) ol {\n\t\tbackground-image: url(${it});\n\t\tbackground-position: 1px 1px;\n\t}\n\n[dir=rtl] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) ol {\n\t\tbackground-image: url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px); transform:translate(-2px, 0)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='100%' text-anchor='end' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>OL</text></svg>");\n\t\tbackground-position: calc(100% - 1px) 1px;\n\t}\n\n.ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) ol:not(.ck-widget_selected):not(.ck-widget:hover) {\n\t\toutline: 1px dashed var(--ck-show-blocks-border-color);\n\t}\n\n[dir="ltr"] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) ol {\n\t\tbackground-image: url(${it});\n\t\tbackground-position: 1px 1px;\n\t}\n\n[dir="rtl"] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) ol {\n\t\tbackground-image: url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px); transform:translate(-2px, 0)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='100%' text-anchor='end' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>OL</text></svg>");\n\t\tbackground-position: calc(100% - 1px) 1px;\n\t}\n\n.ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) ul {\n\t\tbackground-repeat: no-repeat;\n\t\tpadding-top: 15px;\n\t\t/* Fix for Multi-root editor\n\thttps://github.com/ckeditor/ckeditor5/issues/15969 */\n\t}\n\n[dir=ltr] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) ul {\n\t\tbackground-image: url(${ot});\n\t\tbackground-position: 1px 1px;\n\t}\n\n[dir=rtl] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) ul {\n\t\tbackground-image: url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px); transform:translate(-2px, 0)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='100%' text-anchor='end' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>UL</text></svg>");\n\t\tbackground-position: calc(100% - 1px) 1px;\n\t}\n\n.ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) ul:not(.ck-widget_selected):not(.ck-widget:hover) {\n\t\toutline: 1px dashed var(--ck-show-blocks-border-color);\n\t}\n\n[dir="ltr"] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) ul {\n\t\tbackground-image: url(${ot});\n\t\tbackground-position: 1px 1px;\n\t}\n\n[dir="rtl"] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) ul {\n\t\tbackground-image: url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px); transform:translate(-2px, 0)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='100%' text-anchor='end' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>UL</text></svg>");\n\t\tbackground-position: calc(100% - 1px) 1px;\n\t}\n\n.ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) p {\n\t\tbackground-repeat: no-repeat;\n\t\tpadding-top: 15px;\n\t\t/* Fix for Multi-root editor\n\thttps://github.com/ckeditor/ckeditor5/issues/15969 */\n\t}\n\n[dir=ltr] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) p {\n\t\tbackground-image: url(${rt});\n\t\tbackground-position: 1px 1px;\n\t}\n\n[dir=rtl] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) p {\n\t\tbackground-image: url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px); transform:translate(-2px, 0)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='100%' text-anchor='end' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>P</text></svg>");\n\t\tbackground-position: calc(100% - 1px) 1px;\n\t}\n\n.ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) p:not(.ck-widget_selected):not(.ck-widget:hover) {\n\t\toutline: 1px dashed var(--ck-show-blocks-border-color);\n\t}\n\n[dir="ltr"] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) p {\n\t\tbackground-image: url(${rt});\n\t\tbackground-position: 1px 1px;\n\t}\n\n[dir="rtl"] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) p {\n\t\tbackground-image: url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px); transform:translate(-2px, 0)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='100%' text-anchor='end' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>P</text></svg>");\n\t\tbackground-position: calc(100% - 1px) 1px;\n\t}\n\n.ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) section {\n\t\tbackground-repeat: no-repeat;\n\t\tpadding-top: 15px;\n\t\t/* Fix for Multi-root editor\n\thttps://github.com/ckeditor/ckeditor5/issues/15969 */\n\t}\n\n[dir=ltr] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) section {\n\t\tbackground-image: url(${st});\n\t\tbackground-position: 1px 1px;\n\t}\n\n[dir=rtl] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) section {\n\t\tbackground-image: url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px); transform:translate(-2px, 0)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='100%' text-anchor='end' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>SECTION</text></svg>");\n\t\tbackground-position: calc(100% - 1px) 1px;\n\t}\n\n.ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) section:not(.ck-widget_selected):not(.ck-widget:hover) {\n\t\toutline: 1px dashed var(--ck-show-blocks-border-color);\n\t}\n\n[dir="ltr"] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) section {\n\t\tbackground-image: url(${st});\n\t\tbackground-position: 1px 1px;\n\t}\n\n[dir="rtl"] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) section {\n\t\tbackground-image: url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px); transform:translate(-2px, 0)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='100%' text-anchor='end' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>SECTION</text></svg>");\n\t\tbackground-position: calc(100% - 1px) 1px;\n\t}\n\n.ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) :where(figure.image, figure.table) figcaption {\n\t\tbackground-repeat: no-repeat;\n\t\tpadding-top: 15px;\n\t\t/* Fix for Multi-root editor\n\thttps://github.com/ckeditor/ckeditor5/issues/15969 */\n\t}\n\n[dir=ltr] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) :where(figure.image, figure.table) figcaption {\n\t\tbackground-image: url(${at});\n\t\tbackground-position: 1px 1px;\n\t}\n\n[dir=rtl] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) :where(figure.image, figure.table) figcaption {\n\t\tbackground-image: url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px); transform:translate(-2px, 0)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='100%' text-anchor='end' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>FIGCAPTION</text></svg>");\n\t\tbackground-position: calc(100% - 1px) 1px;\n\t}\n\n.ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) :where(figure.image, figure.table) figcaption:not(.ck-widget_selected):not(.ck-widget:hover) {\n\t\toutline: 1px dashed var(--ck-show-blocks-border-color);\n\t}\n\n[dir="ltr"] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) :where(figure.image, figure.table) figcaption {\n\t\tbackground-image: url(${at});\n\t\tbackground-position: 1px 1px;\n\t}\n\n[dir="rtl"] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) :where(figure.image, figure.table) figcaption {\n\t\tbackground-image: url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px); transform:translate(-2px, 0)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='100%' text-anchor='end' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>FIGCAPTION</text></svg>");\n\t\tbackground-position: calc(100% - 1px) 1px;\n\t}\n\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n\n/**\n * Implements rounded corner interface for .ck-rounded-corners class.\n *\n * @see $ck-border-radius\n */\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n/**\n * A visual style of focused element's border.\n */\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n/**\n * A helper to combine multiple shadows.\n */\n/**\n * Gives an element a drop shadow so it looks like a floating panel.\n */\n\n.ck-source-editing-area {\n\tposition: relative;\n\toverflow: hidden;\n}\n\n.ck-source-editing-area::after,\n.ck-source-editing-area textarea {\n\tpadding: var(--ck-spacing-large);\n\tmargin: 0;\n\tborder: 1px solid transparent;\n\tline-height: var(--ck-line-height-base);\n\tfont-size: var(--ck-font-size-normal);\n\tfont-family: monospace;\n\twhite-space: pre-wrap;\n}\n\n.ck-source-editing-area::after {\n\tcontent: attr(data-value) " ";\n\tvisibility: hidden;\n\tdisplay: block;\n}\n\n.ck-source-editing-area textarea {\n\tposition: absolute;\n\twidth: 100%;\n\theight: 100%;\n\tresize: none;\n\toutline: none;\n\toverflow: hidden;\n\tbox-sizing: border-box;\n\n\tborder-color: var(--ck-color-base-border);\n\n\tborder-radius: 0;\n}\n\n.ck-rounded-corners .ck-source-editing-area textarea,\n\t.ck-source-editing-area textarea.ck-rounded-corners {\n\t\tborder-radius: var(--ck-border-radius);\n\t\tborder-top-left-radius: 0;\n\t\tborder-top-right-radius: 0;\n\t}\n\n.ck-source-editing-area textarea:not([readonly]):focus {\n\t\t/* Disable native outline. */\n\t\toutline: none;\n\t\tborder: var(--ck-focus-ring);\n\t\tbox-shadow: var(--ck-inner-shadow), 0 0;\n\t}\n\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n\n/*\n * Note: This file should contain the wireframe styles only. But since there are no such styles,\n * it acts as a message to the builder telling that it should look for the corresponding styles\n * **in the theme** when compiling the editor.\n */\n\n.ck.ck-special-characters > .ck-dialog__content > div {\n\t\twidth: 350px;\n\t\tmax-width: 100%;\n\t\theight: 100%;\n\n\t\tdisplay: grid;\n\t\tgrid-column-gap: 0px;\n\t\tgrid-row-gap: 0px;\n\t\tgrid-template-columns: 1fr;\n\t\tgrid-template-rows: auto 1fr auto;\n\t}\n\n.ck.ck-special-characters > .ck-dialog__content > div > .ck-character-categories {\n\t\t\tgrid-area: 1 / 1 / 2 / 2;\n\t\t\tpadding: var(--ck-spacing-medium) var(--ck-spacing-large);\n\t\t}\n\n.ck.ck-special-characters > .ck-dialog__content > div > .ck-character-categories > .ck-labeled-field-view {\n\t\t\t\tpadding-top: var(--ck-spacing-standard);\n\t\t\t\twidth: 100%;\n\t\t\t}\n\n.ck.ck-special-characters > .ck-dialog__content > div > .ck-character-categories > .ck-labeled-field-view .ck.ck-labeled-field-view__status {\n\t\t\t\t\tbackground: var(--ck-color-base-error);\n\t\t\t\t\tcolor: var(--ck-color-base-background);\n\t\t\t\t\tpadding: var(--ck-spacing-small) var(--ck-spacing-medium);\n\t\t\t\t\tmin-width: var(--ck-table-properties-min-error-width);\n\t\t\t\t\ttext-align: center;\n\n\t\t\t\t\tanimation: ck-table-form-labeled-view-status-appear .15s ease both;\n\n\t\t\t\t\t/* The arrow pointing towards the field. */\n\t\t\t\t}\n\n.ck.ck-special-characters > .ck-dialog__content > div > .ck-character-categories > .ck-labeled-field-view .ck.ck-labeled-field-view__status::after {\n\t\t\t\t\t\tborder-color: transparent transparent var(--ck-color-base-error) transparent;\n\t\t\t\t\t\tborder-width: 0 var(--ck-table-properties-error-arrow-size) var(--ck-table-properties-error-arrow-size) var(--ck-table-properties-error-arrow-size);\n\t\t\t\t\t\tborder-style: solid;\n\t\t\t\t\t}\n\n@media (prefers-reduced-motion: reduce) {\n\n.ck.ck-special-characters > .ck-dialog__content > div > .ck-character-categories > .ck-labeled-field-view .ck.ck-labeled-field-view__status {\n\t\t\t\t\t\tanimation: none;\n\t\t\t\t}\n\t\t\t\t\t}\n\n/* Hide the error balloon when the field is blurred. Makes the experience much more clear. */\n\n.ck.ck-special-characters > .ck-dialog__content > div > .ck-character-categories > .ck-labeled-field-view .ck-input.ck-error:not(:focus) + .ck.ck-labeled-field-view__status {\n\t\t\t\t\tdisplay: none;\n\t\t\t\t}\n\n.ck.ck-special-characters > .ck-dialog__content > div > .ck-character-categories > .ck-labeled-field-view > .ck-label {\n\t\t\t\t\tfont-size: var(--ck-font-size-tiny);\n\t\t\t\t\ttext-align: center;\n\t\t\t\t}\n\n.ck.ck-special-characters > .ck-dialog__content > div > .ck-character-categories .ck-dropdown {\n\t\t\t\tdisplay: block;\n\t\t\t\twidth: 100%;\n\t\t\t}\n\n.ck.ck-special-characters > .ck-dialog__content > div > .ck-character-categories .ck-dropdown > button:not(:focus) {\n\t\t\t\t\t\tborder: 1px solid var(--ck-color-base-border);\n\t\t\t\t\t}\n\n.ck.ck-special-characters > .ck-dialog__content > div > .ck-character-categories .ck-dropdown > button > span {\n\t\t\t\t\t\twidth: 100%;\n\t\t\t\t\t}\n\n.ck.ck-special-characters > .ck-dialog__content > div > .ck-character-grid {\n\t\t\tgrid-area: 2 / 1 / 3 / 2;\n\t\t\tmax-height: 200px;\n\t\t}\n\n.ck.ck-special-characters > .ck-dialog__content > div > .ck-character-info {\n\t\t\tgrid-area: 3 / 1 / 4 / 2;\n\t\t}\n\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n\n.ck.ck-character-grid {\n\tmax-width: 100%;\n}\n\n.ck.ck-character-grid .ck-character-grid__tiles {\n\t\tdisplay: grid;\n\t}\n\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n\n.ck.ck-character-info {\n\tdisplay: flex;\n\tjustify-content: space-between;\n}\n\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n\n:root {\n\t--ck-style-panel-columns: 3;\n}\n\n.ck.ck-style-panel .ck-style-grid {\n\tdisplay: grid;\n\tgrid-template-columns: repeat(var(--ck-style-panel-columns),auto);\n\tjustify-content: start;\n}\n\n.ck.ck-style-panel .ck-style-grid .ck-style-grid__button {\n\t\tdisplay: flex;\n\t\tjustify-content: space-between;\n\t\tflex-direction: column;\n\t}\n\n.ck.ck-style-panel .ck-style-grid .ck-style-grid__button .ck-style-grid__button__preview {\n\t\t\tdisplay: flex;\n\t\t\talign-content: center;\n\t\t\tjustify-content: flex-start;\n\t\t\talign-items: center;\n\t\t\tflex-grow: 1;\n\t\t\tflex-basis: 100%;\n\t\t}\n\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n\n/* Text alignment of the table header should match the editor settings and override the native browser styling,\n\twhen content is available outside the editor. See https://github.com/ckeditor/ckeditor5/issues/6638 */\n\n.ck-content[dir="rtl"] .table th {\n\t\ttext-align: right;\n\t}\n\n.ck-content[dir="ltr"] .table th {\n\t\ttext-align: left;\n\t}\n\n.ck-content figure.table:not(.layout-table) {\n\t\tdisplay: table;\n\t}\n\n.ck-content figure.table:not(.layout-table) > table {\n\t\t\twidth: 100%;\n\t\t\theight: 100%;\n\t\t}\n\n.ck-content .table:not(.layout-table) {\n\t\t/* Give the table widget some air and center it horizontally */\n\t\t/* The first value should be equal to --ck-spacing-large variable if used in the editor context\n\t\tto avoid the content jumping (See https://github.com/ckeditor/ckeditor5/issues/9825). */\n\t\tmargin: 0.9em auto;\n\t}\n\n.ck-content table.table:not(.layout-table),\n\t.ck-content figure.table:not(.layout-table) > table {\n\t\t/* The table cells should have slight borders */\n\t\tborder-collapse: collapse;\n\t\tborder-spacing: 0;\n\n\t\t/* The outer border of the table should be slightly darker than the inner lines.\n\t\tAlso see https://github.com/ckeditor/ckeditor5-table/issues/50. */\n\t\tborder: 1px double hsl(0, 0%, 70%);\n\t}\n\n/* The linter is disabled here because linter is confused when resolving the \`table.table:not(.layout-table)\`\n\t\t\tand \`figure.table:not(.layout-table) > table\` selectors combined with below selectors.\n\t\t\tThere is no need to split it into two large structures with same code just to make linter happy. */\n\n/* stylelint-disable no-descending-specificity */\n\n.ck-content table.table:not(.layout-table) > thead > tr > th, .ck-content figure.table:not(.layout-table) > table > thead > tr > th, .ck-content table.table:not(.layout-table) > tbody > tr > th, .ck-content figure.table:not(.layout-table) > table > tbody > tr > th {\n\t\t\t\t\tfont-weight: bold;\n\t\t\t\t\tbackground: hsla(0, 0%, 0%, 5%);\n\t\t\t\t}\n\n.ck-content table.table:not(.layout-table) > thead > tr > td,\n\t\t\t\t.ck-content figure.table:not(.layout-table) > table > thead > tr > td,\n\t\t\t\t.ck-content table.table:not(.layout-table) > tbody > tr > td,\n\t\t\t\t.ck-content figure.table:not(.layout-table) > table > tbody > tr > td,\n\t\t\t\t.ck-content table.table:not(.layout-table) > thead > tr > th,\n\t\t\t\t.ck-content figure.table:not(.layout-table) > table > thead > tr > th,\n\t\t\t\t.ck-content table.table:not(.layout-table) > tbody > tr > th,\n\t\t\t\t.ck-content figure.table:not(.layout-table) > table > tbody > tr > th {\n\n\t\t\t\t\tmin-width: 2em;\n\t\t\t\t\tpadding: 0.4em;\n\n\t\t\t\t\t/* The border is inherited from .ck-editor__nested-editable styles, so theoretically it's not necessary here.\n\t\t\t\t\tHowever, the border is a content style, so it should use .ck-content (so it works outside the editor).\n\t\t\t\t\tHence, the duplication. See https://github.com/ckeditor/ckeditor5/issues/6314 */\n\t\t\t\t\tborder: 1px solid hsl(0, 0%, 75%);\n\t\t\t\t\t/* Opinionated table content styling: prevents content from shifting\n\t\t\t\t\t * when Enter is pressed in the first cell.\n\t\t\t\t\t * See: https://github.com/ckeditor/ckeditor5/pull/18801\n\t\t\t\t\t */\n\t\t\t\t}\n\n.ck-content table.table:not(.layout-table) > thead > tr > td > p:first-of-type, .ck-content figure.table:not(.layout-table) > table > thead > tr > td > p:first-of-type, .ck-content table.table:not(.layout-table) > tbody > tr > td > p:first-of-type, .ck-content figure.table:not(.layout-table) > table > tbody > tr > td > p:first-of-type, .ck-content table.table:not(.layout-table) > thead > tr > th > p:first-of-type, .ck-content figure.table:not(.layout-table) > table > thead > tr > th > p:first-of-type, .ck-content table.table:not(.layout-table) > tbody > tr > th > p:first-of-type, .ck-content figure.table:not(.layout-table) > table > tbody > tr > th > p:first-of-type {\n\t\t\t\t\t\tmargin-top: 0;\n\t\t\t\t\t}\n\n/* Mirrors the rule above for the last paragraph to keep the\n\t\t\t\t\t * experience consistent with the first paragraph.\n\t\t\t\t\t *\n\t\t\t\t\t * Together, these rules prevent margins from appearing when a\n\t\t\t\t\t * bogus paragraph becomes a real paragraph after it receives line\n\t\t\t\t\t * height, text alignment, or other block style.\n\t\t\t\t\t *\n\t\t\t\t\t * See: https://github.com/ckeditor/ckeditor5/pull/18801\n\t\t\t\t\t */\n\n.ck-content table.table:not(.layout-table) > thead > tr > td > p:last-of-type, .ck-content figure.table:not(.layout-table) > table > thead > tr > td > p:last-of-type, .ck-content table.table:not(.layout-table) > tbody > tr > td > p:last-of-type, .ck-content figure.table:not(.layout-table) > table > tbody > tr > td > p:last-of-type, .ck-content table.table:not(.layout-table) > thead > tr > th > p:last-of-type, .ck-content figure.table:not(.layout-table) > table > thead > tr > th > p:last-of-type, .ck-content table.table:not(.layout-table) > tbody > tr > th > p:last-of-type, .ck-content figure.table:not(.layout-table) > table > tbody > tr > th > p:last-of-type {\n\t\t\t\t\t\tmargin-bottom: 0;\n\t\t\t\t\t}\n\n@media print {\n\t\t/**\n\t\t * Expanding the table to the full height of the parent container is necessary because tables\n\t\t * are rendered inside <figure> elements, which is kinda buggy in table height calculation.\n\t\t * While setting \`height: 100%\` fixes the issue in the editing mode described here:\n\t\t * https://github.com/ckeditor/ckeditor5/issues/6186\n\t\t *\n\t\t * it's causing another issue with the table height in the print preview mode here:\n\t\t * https://github.com/ckeditor/ckeditor5/issues/16856\n\t\t *\n\t\t * For now, resetting the height to \`initial\` in the print mode works as a workaround.\n\t\t */\n\t\t.ck-content figure.table:not(.layout-table) > table {\n\t\t\theight: initial;\n\t\t}\n}\n\n.ck-editor__editable .ck-table-bogus-paragraph {\n\t/*\n\t * Use display:inline-block to force Chrome/Safari to limit text mutations to this element.\n\t * See https://github.com/ckeditor/ckeditor5/issues/6062.\n\t */\n\tdisplay: inline-block;\n\n\t/*\n\t * Inline HTML elements nested in the span should always be dimensioned in relation to the whole cell width.\n\t * See https://github.com/ckeditor/ckeditor5/issues/9117.\n\t */\n\twidth: 100%;\n}\n\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n\n.ck.ck-table-cell-properties-form .ck-form__row.ck-table-cell-properties-form__alignment-row {\n\t\t\tflex-wrap: wrap;\n\t\t}\n\n.ck.ck-table-cell-properties-form .ck-form__row.ck-table-cell-properties-form__alignment-row .ck.ck-toolbar:first-of-type {\n\t\t\t\t\t/* 4 buttons out of 7 (h-alignment + v-alignment) = 0.57 */\n\t\t\t\t\tflex-grow: 0.57;\n\t\t\t\t}\n\n.ck.ck-table-cell-properties-form .ck-form__row.ck-table-cell-properties-form__alignment-row .ck.ck-toolbar:last-of-type {\n\t\t\t\t\t/* 3 buttons out of 7 (h-alignment + v-alignment) = 0.43 */\n\t\t\t\t\tflex-grow: 0.43;\n\t\t\t\t}\n\n.ck.ck-table-cell-properties-form .ck-form__row.ck-table-cell-properties-form__alignment-row .ck.ck-toolbar .ck-button {\n\t\t\t\t\tflex-grow: 1;\n\t\t\t\t}\n\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n\n.ck-editor__editable.ck-editor__editable_inline > .ck-widget.ck-widget_with-selection-handle.layout-table:first-child {\n\t\t\t\tmargin-top: var(--ck-spacing-large);\n\t\t\t}\n\n/*\n\t\t\t* This value should match with the default margins of the block elements (like .media, .image or .table)\n\t\t\t* to avoid a content jumping when the fake selection container shows up (See https://github.com/ckeditor/ckeditor5/issues/9825).\n\t\t\t*/\n\n.ck-editor__editable.ck-editor__editable_inline > .ck-widget.ck-widget_with-selection-handle.layout-table:last-child,\n\t\t\t\n\t\t\t.ck-editor__editable.ck-editor__editable_inline > .ck-widget.ck-widget_with-selection-handle.layout-table:nth-last-child(2):has( + .ck-fake-selection-container) {\n\t\t\t\tmargin-bottom: var(--ck-spacing-large);\n\t\t\t}\n\n.ck-editor__editable .table.layout-table {\n\t\tdisplay: table;\n\t\tmargin: 0;\n\n\t\t/* Widget type around overrides. */\n\t}\n\n.ck-editor__editable .table.layout-table.ck-widget:hover {\n\t\t\t\t/* To prevent the widget outline from being cut off at the bottom\n\t\t\t\twhen the next cell or table has a background color, for example. */\n\t\t\t\tz-index: var(--ck-z-default);\n\t\t\t}\n\n.ck-editor__editable .table.layout-table.ck-widget:hover > .ck-widget__selection-handle {\n\t\t\t\topacity: 0.75;\n\t\t\t\tvisibility: visible;\n\t\t\t}\n\n.ck-editor__editable .table.layout-table.ck-widget:hover > .ck-widget__selection-handle:hover {\n\t\t\t\t\topacity: 1;\n\t\t\t\t}\n\n/* Because of setting the opacity to 0.75 to the selection handle for the layout table,\n\t\t\tit overrides the similar selector in widget (specificity is higher),\n\t\t\tthats why we must override it here also. */\n\n.ck-editor__editable .table.layout-table.ck-widget:has( .ck-widget.table:hover ) > .ck-widget__selection-handle {\n\t\t\t\topacity: 0;\n\t\t\t\tvisibility: hidden;\n\t\t\t}\n\n.ck-editor__editable .table.layout-table.ck-widget.ck-widget_selected {\n\t\t\t\t/* To prevent the widget outline from being cut off at the bottom\n\t\t\t\twhen the next cell or table has a background color, for example. */\n\t\t\t\tz-index: var(--ck-z-default);\n\t\t\t}\n\n.ck-content table.table.layout-table,\n\t.ck-content figure.table.layout-table {\n\t\t/* Do not reserve space above and below the layout table. */\n\t\tmargin-top: 0;\n\t\tmargin-bottom: 0;\n\t}\n\n.ck-content table.table.layout-table,\n\t.ck-content figure.table.layout-table > table {\n\t\tborder-spacing: 0;\n\t}\n\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n\n:root {\n\t--ck-form-default-width: 340px;\n}\n\n.ck.ck-form {\n\tpadding: 0 0 var(--ck-spacing-large);\n}\n\n.ck.ck-form.ck-form_default-width {\n\t\twidth: var(--ck-form-default-width);\n\t}\n\n.ck.ck-form:focus {\n\t\toutline: none;\n\t}\n\n.ck.ck-form .ck.ck-input-text,\n\t.ck.ck-form .ck.ck-input-number {\n\t\tmin-width: 100%;\n\t\twidth: 0;\n\t}\n\n.ck.ck-form .ck.ck-dropdown {\n\t\tmin-width: 100%;\n\t}\n\n.ck.ck-form .ck.ck-dropdown .ck-dropdown__button:not(:focus) {\n\t\t\t\tborder: 1px solid var(--ck-color-base-border);\n\t\t\t}\n\n.ck.ck-form .ck.ck-dropdown .ck-dropdown__button .ck-button__label {\n\t\t\t\twidth: 100%;\n\t\t\t}\n\n/* Default \`ck-responsive-form\` customization when it lies next to \`ck-form\` class */\n\n@media screen and (max-width: 600px) {\n\n.ck.ck-form.ck-responsive-form .ck.ck-form__row.ck-form__row_with-submit {\n\t\t\t\t\tflex-direction: column;\n\t\t\t\t\talign-items: stretch;\n\t\t\t\t\tpadding: 0;\n\t\t\t}\n\t}\n\n@media screen and (max-width: 600px) {\n\n.ck.ck-form.ck-responsive-form .ck.ck-form__row.ck-form__row_with-submit > .ck {\n\t\t\t\t\t\tmargin: var(--ck-spacing-large) var(--ck-spacing-large) 0;\n\t\t\t\t}\n\t}\n\n@media screen and (max-width: 600px) {\n\n.ck.ck-form.ck-responsive-form .ck.ck-form__row.ck-form__row_with-submit .ck-button_with-text {\n\t\t\t\t\t\tjustify-content: center;\n\t\t\t\t}\n\t}\n\n@media screen and (max-width: 600px) {\n\n.ck.ck-form.ck-responsive-form .ck.ck-form__row.ck-form__row_large-bottom-padding {\n\t\t\t\t\tpadding-bottom: var(--ck-spacing-large);\n\t\t\t}\n\t}\n\n[dir="ltr"] .ck.ck-form.ck-responsive-form > :not(:first-child) {\n\t\t\t\tmargin-left: 0;\n\t\t\t}\n\n[dir="rtl"] .ck.ck-form.ck-responsive-form > :not(:last-child) {\n\t\t\t\tmargin-left: 0;\n\t\t\t}\n\n/* End of \`ck-responsive-form\` customization */\n\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n\n.ck.ck-form__row.ck-table-form__action-row .ck-button-save,\n\t\t.ck.ck-form__row.ck-table-form__action-row .ck-button-cancel {\n\t\t\tjustify-content: center;\n\t\t}\n\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n\n.ck.ck-table-form .ck-form__row.ck-table-form__border-row {\n\t\t\tflex-wrap: wrap;\n\t\t}\n\n.ck.ck-table-form .ck-form__row.ck-table-form__background-row {\n\t\t\tflex-wrap: wrap;\n\t\t}\n\n.ck.ck-table-form .ck-form__row.ck-table-form__dimensions-row {\n\t\t\tflex-wrap: wrap;\n\t\t\talign-items: center;\n\t\t}\n\n.ck.ck-table-form .ck-form__row.ck-table-form__dimensions-row .ck-labeled-field-view {\n\t\t\t\tdisplay: flex;\n\t\t\t\tflex-direction: column-reverse;\n\t\t\t\talign-items: center;\n\t\t\t}\n\n.ck.ck-table-form .ck-form__row.ck-table-form__dimensions-row .ck-labeled-field-view .ck.ck-dropdown {\n\t\t\t\t\tflex-grow: 0;\n\t\t\t\t}\n\n.ck.ck-table-form .ck-form__row.ck-table-form__dimensions-row .ck-table-form__dimension-operator {\n\t\t\t\tflex-grow: 0;\n\t\t\t}\n\n/* Ignore labels that work as fieldset legends */\n\n/* Fallback for table dimension operator */\n\n.ck.ck-table-form .ck-form__row > *:not(.ck-label, .ck-table-form__dimension-operator) {\n\t\t\tflex-grow: 1;\n\t\t}\n\n.ck.ck-table-form .ck.ck-labeled-field-view {\n\t\t/* Allow absolute positioning of the status (error) balloons. */\n\t\tposition: relative;\n\t}\n\n.ck.ck-table-form .ck.ck-labeled-field-view .ck.ck-labeled-field-view__status {\n\t\t\tposition: absolute;\n\t\t\tleft: 50%;\n\t\t\tbottom: calc( -1 * var(--ck-table-properties-error-arrow-size) );\n\t\t\ttransform: translate(-50%,100%);\n\n\t\t\t/* Make sure the balloon status stays on top of other form elements. */\n\t\t\tz-index: 1;\n\n\t\t\t/* The arrow pointing towards the field. */\n\t\t}\n\n.ck.ck-table-form .ck.ck-labeled-field-view .ck.ck-labeled-field-view__status::after {\n\t\t\t\tcontent: "";\n\t\t\t\tposition: absolute;\n\t\t\t\ttop: calc( -1 * var(--ck-table-properties-error-arrow-size) );\n\t\t\t\tleft: 50%;\n\t\t\t\ttransform: translateX( -50% );\n\t\t\t}\n\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n\n.ck.ck-table-properties-form .ck-form__row.ck-table-properties-form__alignment-row {\n\t\t\tflex-wrap: wrap;\n\t\t\tflex-basis: 0;\n\t\t\talign-content: baseline;\n\t\t}\n\n.ck.ck-table-properties-form .ck-form__row.ck-table-properties-form__alignment-row .ck.ck-toolbar .ck-toolbar__items {\n\t\t\t\tflex-wrap: nowrap;\n\t\t\t}\n\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n\n:root {\n\t--ck-content-color-table-caption-background: hsl(0, 0%, 97%);\n\t--ck-content-color-table-caption-text: hsl(0, 0%, 20%);\n\t--ck-color-table-caption-highlighted-background: hsl(52deg 100% 50%);\n}\n\n/* Content styles */\n.ck-content .table > figcaption {\n\tdisplay: table-caption;\n\tcaption-side: top;\n\tword-break: normal;\n\toverflow-wrap: anywhere;\n\ttext-align: center;\n\tcolor: var(--ck-content-color-table-caption-text);\n\tbackground-color: var(--ck-content-color-table-caption-background);\n\tpadding: .6em;\n\tfont-size: .75em;\n\toutline-offset: -1px;\n\n\t/* Improve placeholder rendering in high-constrast mode (https://github.com/ckeditor/ckeditor5/issues/14907). */\n}\n@media (forced-colors: active) {\n\t\t.ck-content .table > figcaption {\n\t\tbackground-color: unset;\n\t\tcolor: unset;\n\t\t}\n\t}\n\n/* Editing styles */\n@media (forced-colors: none) {\n\t\t.ck.ck-editor__editable .table > figcaption.table__caption_highlighted {\n\t\t\tanimation: ck-table-caption-highlight .6s ease-out;\n\t\t}\n\t}\n.ck.ck-editor__editable .table > figcaption.ck-placeholder::before {\n\t\tpadding-left: inherit;\n\t\tpadding-right: inherit;\n\n\t\t/*\n\t\t * Make sure the table caption placeholder doesn't overflow the placeholder area.\n\t\t * See https://github.com/ckeditor/ckeditor5/issues/9162.\n\t\t */\n\t\twhite-space: nowrap;\n\t\toverflow: hidden;\n\t\ttext-overflow: ellipsis;\n\t}\n\n@keyframes ck-table-caption-highlight {\n\t0% {\n\t\tbackground-color: var(--ck-color-table-caption-highlighted-background);\n\t}\n\n\t100% {\n\t\tbackground-color: var(--ck-content-color-table-caption-background);\n\t}\n}\n\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n\n:root {\n\t--ck-color-table-column-resizer-hover: var(--ck-color-base-active);\n\t--ck-table-column-resizer-width: 7px;\n\n\t/* The offset used for absolute positioning of the resizer element, so that it is placed exactly above the cell border.\n\t   The value is: minus half the width of the resizer decreased additionaly by the half the width of the border (0.5px). */\n\t--ck-table-column-resizer-position-offset: calc(var(--ck-table-column-resizer-width) * -0.5 - 0.5px);\n}\n\n.ck-content .table .ck-table-resized {\n\ttable-layout: fixed;\n}\n\n.ck-content .table td,\n.ck-content .table th {\n\t/* To prevent text overflowing beyond its cell when columns are resized by resize handler\n\t(https://github.com/ckeditor/ckeditor5/pull/14379#issuecomment-1589460978). */\n\toverflow-wrap: break-word;\n}\n\n.ck.ck-editor__editable .table td,\n.ck.ck-editor__editable .table th {\n\t/* The resizer element is placed inside each cell, so it must be positioned relatively to the cell. */\n\tposition: relative;\n}\n\n.ck.ck-editor__editable .table .ck-table-column-resizer {\n\tposition: absolute;\n\ttop: 0;\n\tbottom: 0;\n\tright: var(--ck-table-column-resizer-position-offset);\n\twidth: var(--ck-table-column-resizer-width);\n\tcursor: col-resize;\n\tuser-select: none;\n\tz-index: var(--ck-z-default);\n}\n\n.ck.ck-editor__editable.ck-column-resize_disabled .table .ck-table-column-resizer {\n\tdisplay: none;\n}\n\n/* The resizer elements, which are extended to an extremely high height, break the drag & drop feature in Chrome. To make it work again,\n   all resizers must be hidden while the table is dragged. */\n.ck.ck-editor__editable .table[draggable] .ck-table-column-resizer {\n\tdisplay: none;\n}\n\n.ck.ck-editor__editable .table .ck-table-column-resizer:hover,\n.ck.ck-editor__editable .table .ck-table-column-resizer__active {\n\tbackground-color: var(--ck-color-table-column-resizer-hover);\n\topacity: 0.25;\n}\n\n.ck.ck-editor__editable[dir=rtl] .table .ck-table-column-resizer {\n\tleft: var(--ck-table-column-resizer-position-offset);\n\tright: unset;\n}\n\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n\n.ck.ck-input-color {\n\twidth: 100%;\n\tdisplay: flex;\n\tflex-direction: row-reverse;\n}\n\n.ck.ck-input-color > input.ck.ck-input-text {\n\t\tmin-width: auto;\n\t\tflex-grow: 1;\n\t}\n\n.ck.ck-input-color > div.ck.ck-dropdown {\n\t\tmin-width: auto;\n\n\t\t/* This dropdown has no arrow but a color preview instead. */\n\t}\n\n.ck.ck-input-color > div.ck.ck-dropdown > .ck-input-color__button .ck-dropdown__arrow {\n\t\t\tdisplay: none;\n\t\t}\n\n.ck.ck-input-color .ck.ck-input-color__button {\n\t\t/* Resolving issue with misaligned buttons on Safari (see #10589) */\n\t\tdisplay: flex;\n\t}\n\n.ck.ck-input-color .ck.ck-input-color__button .ck.ck-input-color__button__preview {\n\t\t\tposition: relative;\n\t\t\toverflow: hidden;\n\t\t}\n\n.ck.ck-input-color .ck.ck-input-color__button .ck.ck-input-color__button__preview > .ck.ck-input-color__button__preview__no-color-indicator {\n\t\t\t\tposition: absolute;\n\t\t\t\tdisplay: block;\n\t\t\t}\n\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n\n.ck .ck-insert-table-dropdown__grid {\n\tdisplay: flex;\n\tflex-direction: row;\n\tflex-wrap: wrap;\n}\n\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n\n/**\n * A class which hides an element in DOM.\n */\n\n.ck-hidden {\n\t/* Override selector specificity. Otherwise, all elements with some display\n\tstyle defined will override this one, which is not a desired result. */\n\tdisplay: none !important;\n}\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n:root {\n\t--ck-z-default: 1;\n\t--ck-z-panel: calc( var(--ck-z-default) + 999 );\n\t--ck-z-dialog: 9999;\n}\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n/**\n * A class that disables all transitions of the element and its children.\n */\n.ck-transitions-disabled,\n.ck-transitions-disabled * {\n\ttransition: none !important;\n}\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n:root {\n\t/* where 7.5(px) is the font size of the powered by label and 13(px) is the base font size. */\n\t--ck-powered-by-font-size: calc(var(--ck-font-size-base) * 7.5 / 13);\n\t/* where 10(px) is the line height of the powered by label and 13(px) is the base font size. */\n\t--ck-powered-by-line-height: calc(var(--ck-font-size-base) * 10 / 13);\n\t/* where -0.2(px) is the letter spacing of the powered by label and 13(px) is the base font size. */\n\t--ck-powered-by-letter-spacing: calc(var(--ck-font-size-base) * -0.2 / 13);\n\t--ck-powered-by-padding-vertical: 2px;\n\t--ck-powered-by-padding-horizontal: 4px;\n\t--ck-powered-by-text-color: hsl(0, 0%, 31%);\n\t--ck-powered-by-border-radius: var(--ck-border-radius);\n\t--ck-powered-by-background: hsl(0, 0%, 100%);\n\t--ck-powered-by-border-color: var(--ck-color-focus-border);\n\n\t--ck-powered-by-svg-width: 53;\n\t--ck-powered-by-svg-height: 10;\n\t--ck-powered-by-icon-width: calc(var(--ck-font-size-base) * var(--ck-powered-by-svg-width) / 13);\n\t--ck-powered-by-icon-height: calc(var(--ck-font-size-base) * var(--ck-powered-by-svg-height) / 13);\n}\n.ck.ck-balloon-panel.ck-powered-by-balloon {\n\t--ck-border-radius: var(--ck-powered-by-border-radius);\n\n\tbox-shadow: none;\n\tbackground: var(--ck-powered-by-background);\n\tmin-height: unset;\n\tz-index: calc( var(--ck-z-panel) - 1 );\n}\n.ck.ck-balloon-panel.ck-powered-by-balloon .ck.ck-powered-by {\n\t\tline-height: var(--ck-powered-by-line-height);\n\t}\n.ck.ck-balloon-panel.ck-powered-by-balloon .ck.ck-powered-by a {\n\t\t\tcursor: pointer;\n\t\t\tdisplay: flex;\n\t\t\talign-items: center;\n\t\t\topacity: .66;\n\t\t\tfilter: grayscale(80%);\n\t\t\tline-height: var(--ck-powered-by-line-height);\n\t\t\tpadding: var(--ck-powered-by-padding-vertical) var(--ck-powered-by-padding-horizontal);\n\t\t}\n.ck.ck-balloon-panel.ck-powered-by-balloon .ck.ck-powered-by .ck-powered-by__label {\n\t\t\tfont-size: var(--ck-powered-by-font-size);\n\t\t\tletter-spacing: var(--ck-powered-by-letter-spacing);\n\t\t\tpadding-left: 2px;\n\t\t\ttext-transform: uppercase;\n\t\t\tfont-weight: bold;\n\t\t\tmargin-right: 4px;\n\t\t\tcursor: pointer;\n\t\t\tline-height: normal;\n\t\t\tcolor: var(--ck-powered-by-text-color);\n\n\t\t}\n.ck.ck-balloon-panel.ck-powered-by-balloon .ck.ck-powered-by .ck-icon {\n\t\t\tdisplay: block;\n\t\t\tcursor: pointer;\n\t\t\twidth: var(--ck-powered-by-icon-width);\n\t\t\theight: var(--ck-powered-by-icon-height);\n\t\t}\n.ck.ck-balloon-panel.ck-powered-by-balloon .ck.ck-powered-by:hover a {\n\t\t\t\tfilter: grayscale(0%);\n\t\t\t\topacity: 1;\n\t\t\t}\n.ck.ck-balloon-panel.ck-powered-by-balloon[class*="position_inside"] {\n\t\tborder-color: transparent;\n\t}\n.ck.ck-balloon-panel.ck-powered-by-balloon[class*="position_border"] {\n\t\tborder: var(--ck-focus-ring);\n\t\tborder-color: var(--ck-powered-by-border-color);\n\t}\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n:root {\n\t/* where 7.5(px) is the font size of the evaluation badge label and 13(px) is the base font size. */\n\t--ck-evaluation-badge-font-size: calc(var(--ck-font-size-base) * 7.5 / 13);\n\t/* where 7.5(px) is the line height of the evaluation badge label and 13(px) is the base font size. */\n\t--ck-evaluation-badge-line-height: calc(var(--ck-font-size-base) * 7.5 / 13);\n\t/* where -0.2(px) is the letter spacing of the evaluation badge label and 13(px) is the base font size. */\n\t--ck-evaluation-badge-letter-spacing: calc(var(--ck-font-size-base) * -0.2 / 13);\n\t--ck-evaluation-badge-padding-vertical: 2px;\n\t--ck-evaluation-badge-padding-horizontal: 4px;\n\t--ck-evaluation-badge-text-color: hsl(0, 0%, 31%);\n\t--ck-evaluation-badge-border-radius: var(--ck-border-radius);\n\t--ck-evaluation-badge-background: hsl(0, 0%, 100%);\n\t--ck-evaluation-badge-border-color: var(--ck-color-focus-border);\n}\n.ck.ck-balloon-panel.ck-evaluation-badge-balloon {\n\t--ck-border-radius: var(--ck-evaluation-badge-border-radius);\n\n\tbox-shadow: none;\n\tbackground: var(--ck-evaluation-badge-background);\n\tmin-height: unset;\n\tz-index: calc( var(--ck-z-panel) - 1 );\n}\n.ck.ck-balloon-panel.ck-evaluation-badge-balloon .ck.ck-evaluation-badge {\n\t\tline-height: var(--ck-evaluation-badge-line-height);\n\t\tpadding: var(--ck-evaluation-badge-padding-vertical) var(--ck-evaluation-badge-padding-horizontal);\n\t}\n.ck.ck-balloon-panel.ck-evaluation-badge-balloon .ck.ck-evaluation-badge .ck-evaluation-badge__label {\n\t\t\tdisplay: block;\n\t\t\tpadding: 0 2px;\n\t\t\tfont-size: var(--ck-evaluation-badge-font-size);\n\t\t\tletter-spacing: var(--ck-evaluation-badge-letter-spacing);\n\t\t\tfont-weight: bold;\n\t\t\tline-height: normal;\n\t\t\ttext-transform: uppercase;\n\t\t\tcolor: var(--ck-evaluation-badge-text-color);\n\t\t}\n.ck.ck-balloon-panel.ck-evaluation-badge-balloon[class*="position_inside"] {\n\t\tborder-color: transparent;\n\t}\n.ck.ck-balloon-panel.ck-evaluation-badge-balloon[class*="position_border"] {\n\t\tborder: var(--ck-focus-ring);\n\t\tborder-color: var(--ck-evaluation-badge-border-color);\n\t}\n\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n\n.ck.ck-aria-live-announcer {\n\tposition: absolute;\n\tleft: -10000px;\n\ttop: -10000px;\n}\n\n.ck.ck-aria-live-region-list {\n\tlist-style-type: none;\n}\n\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n\n/**\n * Makes element unselectable.\n */\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n\n.ck.ck-button,\na.ck.ck-button {\n\t-moz-user-select: none;\n\t-webkit-user-select: none;\n\t-ms-user-select: none;\n\tuser-select: none;\n\n\tposition: relative;\n\tdisplay: inline-flex;\n\talign-items: center;\n}\n\n[dir="ltr"] .ck.ck-button, [dir="ltr"] a.ck.ck-button {\n\t\tjustify-content: left;\n\t}\n\n[dir="rtl"] .ck.ck-button, [dir="rtl"] a.ck.ck-button {\n\t\tjustify-content: right;\n\t}\n\n.ck.ck-button .ck-button__label, a.ck.ck-button .ck-button__label {\n\t\tdisplay: none;\n\t}\n\n.ck.ck-button.ck-button_with-text .ck-button__label, a.ck.ck-button.ck-button_with-text .ck-button__label {\n\t\t\tdisplay: inline-block;\n\t\t}\n\n/* Center the icon horizontally in a button without text. */\n\n.ck.ck-button:not(.ck-button_with-text),  a.ck.ck-button:not(.ck-button_with-text)  {\n\t\tjustify-content: center;\n\t}\n\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n\n.ck.ck-button.ck-switchbutton .ck-button__toggle {\n\t\tdisplay: block;\n\t}\n\n.ck.ck-button.ck-switchbutton .ck-button__toggle .ck-button__toggle__inner {\n\t\t\tdisplay: block;\n\t\t}\n\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n\n.ck.ck-list-item-button {\n\tmin-height: unset;\n\twidth: 100%;\n\tborder-radius: 0;\n}\n\n[dir="ltr"] .ck.ck-list-item-button {\n\t\ttext-align: left;\n\t}\n\n[dir="rtl"] .ck.ck-list-item-button {\n\t\ttext-align: right;\n\t}\n\n[dir="ltr"] .ck.ck-list-item-button.ck-list-item-button_toggleable {\n\t\t\tpadding-left: var(--ck-spacing-small);\n\t}\n\n[dir="rtl"] .ck.ck-list-item-button.ck-list-item-button_toggleable {\n\t\t\tpadding-right: var(--ck-spacing-small);\n\t}\n\n.ck.ck-list-item-button .ck-list-item-button__check-holder {\n\t\tdisplay: inline-flex;\n\t\twidth: .9em;\n\t\theight: .9em;\n\t}\n\n[dir="ltr"] .ck.ck-list-item-button .ck-list-item-button__check-holder {\n\t\t\tmargin-right: var(--ck-spacing-small);\n\t}\n\n[dir="rtl"] .ck.ck-list-item-button .ck-list-item-button__check-holder {\n\t\t\tmargin-left: var(--ck-spacing-small);\n\t}\n\n.ck.ck-list-item-button .ck-list-item-button__check-icon {\n\t\theight: 100%;\n\t}\n\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n\n.ck.ck-collapsible.ck-collapsible_collapsed > .ck-collapsible__children {\n\t\tdisplay: none;\n\t}\n\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n\n.ck.ck-color-grid {\n\tdisplay: grid;\n}\n\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n\n.color-picker-hex-input {\n\twidth: max-content;\n}\n\n.color-picker-hex-input .ck.ck-input {\n\t\tmin-width: unset;\n\t}\n\n.ck.ck-color-picker__row {\n\tdisplay: flex;\n\tflex-direction: row;\n\tflex-wrap: nowrap;\n\tjustify-content: space-between;\n\tmargin: var(--ck-spacing-large) 0 0;\n\twidth: unset;\n}\n\n.ck.ck-color-picker__row .ck.ck-labeled-field-view {\n\t\tpadding-top: unset;\n\t}\n\n.ck.ck-color-picker__row .ck.ck-input-text {\n\t\twidth: unset;\n\t}\n\n.ck.ck-color-picker__row .ck-color-picker__hash-view {\n\t\tpadding-top: var(--ck-spacing-tiny);\n\t\tpadding-right: var(--ck-spacing-medium);\n\t}\n\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n\n/* View fragment with color grids. */\n\n.ck.ck-color-selector .ck-color-grids-fragment .ck-button.ck-color-selector__remove-color,\n\t\t.ck.ck-color-selector .ck-color-grids-fragment .ck-button.ck-color-selector__color-picker {\n\t\t\tdisplay: flex;\n\t\t\talign-items: center;\n\t\t}\n\n[dir="rtl"] .ck.ck-color-selector .ck-color-grids-fragment .ck-button.ck-color-selector__remove-color, [dir="rtl"] .ck.ck-color-selector .ck-color-grids-fragment .ck-button.ck-color-selector__color-picker {\n\t\t\t\tjustify-content: flex-start;\n\t}\n\n/* View fragment with a color picker. */\n\n.ck.ck-color-selector .ck-color-picker-fragment .ck.ck-color-selector_action-bar {\n\t\t\tdisplay: flex;\n\t\t\tflex-direction: row;\n\t\t\tjustify-content: space-around;\n\t\t}\n\n.ck.ck-color-selector .ck-color-picker-fragment .ck.ck-color-selector_action-bar .ck-button-save,\n\t\t\t.ck.ck-color-selector .ck-color-picker-fragment .ck.ck-color-selector_action-bar .ck-button-cancel {\n\t\t\t\tflex: 1\n\t\t\t}\n\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n\n.ck.ck-dialog-overlay {\n\tuser-select: none;\n\toverscroll-behavior: none;\n\n\tposition: fixed;\n\tbottom: 0;\n\tleft: 0;\n\tright: 0;\n\ttop: 0;\n}\n\n.ck.ck-dialog-overlay.ck-dialog-overlay__transparent {\n\t\tpointer-events: none;\n\t\tanimation: none;\n\t\tbackground: none;\n\t}\n\n.ck.ck-dialog {\n\toverscroll-behavior: none;\n\twidth: fit-content;\n\tposition: absolute;\n}\n\n.ck.ck-dialog .ck.ck-form__header  {\n\t\tflex-shrink: 0;\n\t}\n\n/* Modals should not be draggable. */\n\n.ck.ck-dialog:not(.ck-dialog_modal) .ck.ck-form__header .ck-form__header__label {\n\t\t\tcursor: grab;\n\t\t}\n\n.ck.ck-dialog-overlay.ck-dialog-overlay__transparent .ck.ck-dialog {\n\t\tpointer-events: all;\n\t}\n\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n\n.ck.ck-dialog .ck.ck-dialog__actions {\n\t\tdisplay: flex;\n\t\tjustify-content: flex-end;\n\t}\n\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n\n:root {\n\t--ck-dropdown-max-width: 75vw;\n}\n\n.ck.ck-dropdown {\n\tdisplay: inline-block;\n\tposition: relative;\n}\n\n.ck.ck-dropdown .ck-dropdown__arrow {\n\t\tpointer-events: none;\n\t\tz-index: var(--ck-z-default);\n\t}\n\n/* Dropdown button should span horizontally, e.g. in vertical toolbars */\n\n.ck.ck-dropdown .ck-button.ck-dropdown__button {\n\t\twidth: 100%;\n\t}\n\n.ck.ck-dropdown .ck-dropdown__panel {\n\t\tdisplay: none;\n\t\tz-index: var(--ck-z-panel);\n\t\tmax-width: var(--ck-dropdown-max-width);\n\n\t\tposition: absolute;\n\t}\n\n.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel-visible {\n\t\t\tdisplay: inline-block;\n\t\t}\n\n.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_ne,\n\t\t.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_nw,\n\t\t.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_n,\n\t\t.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_nmw,\n\t\t.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_nme {\n\t\t\tbottom: 100%;\n\t\t}\n\n.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_se,\n\t\t.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_sw,\n\t\t.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_smw,\n\t\t.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_sme,\n\t\t.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_s {\n\t\t\t/*\n\t\t\t * Using transform: translate3d( 0, 100%, 0 ) causes blurry dropdown on Chrome 67-78+ on non-retina displays.\n\t\t\t * See https://github.com/ckeditor/ckeditor5/issues/1053.\n\t\t\t */\n\t\t\ttop: 100%;\n\t\t\tbottom: auto;\n\t\t}\n\n.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_ne,\n\t\t.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_se {\n\t\t\tleft: 0px;\n\t\t}\n\n.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_nw,\n\t\t.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_sw {\n\t\t\tright: 0px;\n\t\t}\n\n.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_s,\n\t\t.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_n {\n\t\t\t/* Positioning panels relative to the center of the button */\n\t\t\tleft: 50%;\n\t\t\ttransform: translateX(-50%);\n\t\t}\n\n.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_nmw,\n\t\t.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_smw {\n\t\t\t/* Positioning panels relative to the middle-west of the button */\n\t\t\tleft: 75%;\n\t\t\ttransform: translateX(-75%);\n\t\t}\n\n.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_nme,\n\t\t.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_sme {\n\t\t\t/* Positioning panels relative to the middle-east of the button */\n\t\t\tleft: 25%;\n\t\t\ttransform: translateX(-25%);\n\t\t}\n\n/*\n * Toolbar dropdown panels should be always above the UI (eg. other dropdown panels) from the editor's content.\n * See https://github.com/ckeditor/ckeditor5/issues/7874\n */\n.ck.ck-toolbar .ck-dropdown__panel {\n\tz-index: calc( var(--ck-z-panel) + 1 );\n}\n\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n\n.ck.ck-splitbutton {\n\t/* Enable font size inheritance, which allows fluid UI scaling. */\n\tfont-size: inherit;\n}\n\n.ck.ck-splitbutton .ck-splitbutton__action:focus {\n\t\tz-index: calc(var(--ck-z-default) + 1);\n\t}\n\n\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n\n:root {\n\t--ck-toolbar-dropdown-max-width: 60vw;\n}\n\n.ck.ck-toolbar-dropdown > .ck-dropdown__panel {\n\t/* https://github.com/ckeditor/ckeditor5/issues/5586 */\n\twidth: max-content;\n\tmax-width: var(--ck-toolbar-dropdown-max-width);\n}\n\n.ck.ck-toolbar-dropdown > .ck-dropdown__panel .ck-button:focus {\n\t\t\tz-index: calc(var(--ck-z-default) + 1);\n\t\t}\n\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n\n.ck.ck-dropdown-menu-list__nested-menu {\n\tdisplay: block;\n}\n\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n\n.ck.ck-dropdown-menu-list__nested-menu__button > .ck-dropdown-menu-list__nested-menu__button__arrow {\n\tpointer-events: none;\n\tz-index: var(--ck-z-default);\n}\n\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n\n.ck.ck-balloon-panel.ck-dropdown-menu__nested-menu__panel {\n\tposition: absolute;\n\tmax-height: 314px; /* With the default settings, this is equal to 10 menu items. */\n\toverflow-y: auto;\n\tz-index: calc(var(--ck-z-panel) + 1);\n}\n\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n\n.ck.ck-form__row {\n\tdisplay: flex;\n\tflex-direction: row;\n\tjustify-content: space-between;\n\talign-items: flex-start;\n\tpadding: var(--ck-spacing-standard) var(--ck-spacing-large) 0;\n}\n\n.ck.ck-form__row.ck-form__row_large-top-padding {\n\t\tpadding-top: var(--ck-spacing-large);\n\t}\n\n.ck.ck-form__row.ck-form__row_large-bottom-padding {\n\t\tpadding-bottom: var(--ck-spacing-large);\n\t}\n\n.ck.ck-form__row.ck-form__row_with-submit {\n\t\tflex-wrap: nowrap;\n\t}\n\n.ck.ck-form__row.ck-form__row_with-submit > *:not(:first-child) {\n\t\t\tmargin-inline-start: var(--ck-spacing-standard);\n\t\t}\n\n.ck.ck-form__row > .ck.ck-form__row {\n\t\tpadding: 0;\n\t}\n\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n\n.ck.ck-form__header {\n\tdisplay: flex;\n\tflex-direction: row;\n\tflex-wrap: nowrap;\n\talign-items: center;\n\tjustify-content: space-between;\n}\n\n.ck.ck-form__header h2.ck-form__header__label {\n\t\tflex-grow: 1;\n\t}\n\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n\n.ck.ck-icon {\n\tvertical-align: middle;\n}\n\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n\n.ck.ck-label {\n\tdisplay: block;\n}\n\n.ck.ck-voice-label {\n\tdisplay: none;\n}\n\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n\n.ck.ck-labeled-field-view > .ck.ck-labeled-field-view__input-wrapper {\n\t\tdisplay: flex;\n\t\tposition: relative;\n\t}\n\n.ck.ck-labeled-field-view .ck.ck-label {\n\t\tdisplay: block;\n\t\tposition: absolute;\n\t}\n\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n\n/**\n * Makes element unselectable.\n */\n\n.ck.ck-list {\n\t-moz-user-select: none;\n\t-webkit-user-select: none;\n\t-ms-user-select: none;\n\tuser-select: none;\n\n\tdisplay: flex;\n\tflex-direction: column;\n}\n\n.ck.ck-list .ck-list__item,\n\t.ck.ck-list .ck-list__separator {\n\t\tdisplay: block;\n\t}\n\n/* Make sure that whatever child of the list item gets focus, it remains on the\n\ttop. Thanks to that, styles like box-shadow, outline, etc. are not masked by\n\tadjacent list items. */\n\n.ck.ck-list .ck-list__item > *:focus {\n\t\tposition: relative;\n\t\tz-index: var(--ck-z-default);\n\t}\n\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n\n:root {\n\t/* Make sure the balloon arrow does not float over its children. */\n\t--ck-balloon-panel-arrow-z-index: calc(var(--ck-z-default) - 3);\n}\n\n.ck.ck-balloon-panel {\n\tdisplay: none;\n\tposition: absolute;\n\n\tz-index: var(--ck-z-panel);\n}\n\n.ck.ck-balloon-panel.ck-balloon-panel_with-arrow::before,\n\t\t.ck.ck-balloon-panel.ck-balloon-panel_with-arrow::after {\n\t\t\tcontent: "";\n\t\t\tposition: absolute;\n\t\t}\n\n.ck.ck-balloon-panel.ck-balloon-panel_with-arrow::before {\n\t\t\tz-index: var(--ck-balloon-panel-arrow-z-index);\n\t\t}\n\n.ck.ck-balloon-panel.ck-balloon-panel_with-arrow::after {\n\t\t\tz-index: calc(var(--ck-balloon-panel-arrow-z-index) + 1);\n\t\t}\n\n.ck.ck-balloon-panel[class*="arrow_n"]::before {\n\t\t\tz-index: var(--ck-balloon-panel-arrow-z-index);\n\t\t}\n\n.ck.ck-balloon-panel[class*="arrow_n"]::after {\n\t\t\tz-index: calc(var(--ck-balloon-panel-arrow-z-index) + 1);\n\t\t}\n\n.ck.ck-balloon-panel[class*="arrow_s"]::before {\n\t\t\tz-index: var(--ck-balloon-panel-arrow-z-index);\n\t\t}\n\n.ck.ck-balloon-panel[class*="arrow_s"]::after {\n\t\t\tz-index: calc(var(--ck-balloon-panel-arrow-z-index) + 1);\n\t\t}\n\n.ck.ck-balloon-panel.ck-balloon-panel_visible {\n\t\tdisplay: block;\n\t}\n\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n\n.ck .ck-balloon-rotator__navigation {\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: center;\n}\n\n/* Buttons inside a toolbar should be centered when rotator bar is wider.\n * See: https://github.com/ckeditor/ckeditor5-ui/issues/495\n */\n.ck .ck-balloon-rotator__content .ck-toolbar {\n\tjustify-content: center;\n}\n\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n\n.ck .ck-fake-panel {\n\tposition: absolute;\n\n\t/* Fake panels should be placed under main balloon content. */\n\tz-index: calc(var(--ck-z-panel) - 1);\n}\n\n.ck .ck-fake-panel div {\n\tposition: absolute;\n}\n\n.ck .ck-fake-panel div:nth-child( 1 ) {\n\tz-index: 2;\n}\n\n.ck .ck-fake-panel div:nth-child( 2 ) {\n\tz-index: 1;\n}\n\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n\n.ck.ck-sticky-panel .ck-sticky-panel__content_sticky {\n\t\tz-index: var(--ck-z-panel); /* #315 */\n\t\tposition: fixed;\n\t\ttop: 0;\n\t}\n\n.ck.ck-sticky-panel .ck-sticky-panel__content_sticky_bottom-limit {\n\t\ttop: auto;\n\t\tposition: absolute;\n\t}\n\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n\n.ck.ck-autocomplete {\n\tposition: relative;\n}\n\n.ck.ck-autocomplete > .ck-search__results {\n\t\tposition: absolute;\n\t\tz-index: var(--ck-z-panel);\n\t}\n\n.ck.ck-autocomplete > .ck-search__results.ck-search__results_n {\n\t\t\tbottom: 100%;\n\t\t}\n\n.ck.ck-autocomplete > .ck-search__results.ck-search__results_s {\n\t\t\ttop: 100%;\n\t\t\tbottom: auto;\n\t\t}\n\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n\n.ck.ck-search > .ck-labeled-field-view > .ck-labeled-field-view__input-wrapper > .ck-icon {\n\t\t\tposition: absolute;\n\t\t\ttop: 50%;\n\t\t\ttransform: translateY(-50%);\n\t\t}\n\n[dir="ltr"] .ck.ck-search > .ck-labeled-field-view > .ck-labeled-field-view__input-wrapper > .ck-icon {\n\t\t\t\tleft: var(--ck-spacing-medium);\n\t}\n\n[dir="rtl"] .ck.ck-search > .ck-labeled-field-view > .ck-labeled-field-view__input-wrapper > .ck-icon {\n\t\t\t\tright: var(--ck-spacing-medium);\n\t}\n\n.ck.ck-search > .ck-labeled-field-view .ck-search__reset {\n\t\t\tposition: absolute;\n\t\t\ttop: 50%;\n\t\t\ttransform: translateY(-50%);\n\t\t}\n\n.ck.ck-search > .ck-search__results > .ck-search__info > span:first-child {\n\t\t\t\tdisplay: block;\n\t\t\t}\n\n/* Hide the filtered view when nothing was found */\n\n.ck.ck-search > .ck-search__results > .ck-search__info:not(.ck-hidden) ~ * {\n\t\t\t\tdisplay: none;\n\t\t\t}\n\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n\n.ck.ck-highlighted-text mark {\n\tbackground: var(--ck-color-highlight-background);\n\tvertical-align: initial;\n\tfont-weight: inherit;\n\tline-height: inherit;\n\tfont-size: inherit;\n}\n\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n\n/**\n * Makes element unselectable.\n */\n\n.ck.ck-balloon-panel.ck-tooltip {\n\t-moz-user-select: none;\n\t-webkit-user-select: none;\n\t-ms-user-select: none;\n\tuser-select: none;\n\n\tz-index: calc( var(--ck-z-dialog) + 100 );\n}\n\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n\n:root {\n\t--ck-toolbar-spinner-size: 18px;\n}\n\n.ck.ck-spinner-container {\n\tdisplay: block;\n\tposition: relative;\n}\n\n.ck.ck-spinner {\n\tposition: absolute;\n\ttop: 50%;\n\tleft: 0;\n\tright: 0;\n\tmargin: 0 auto;\n\ttransform: translateY(-50%);\n\tz-index: 1;\n}\n\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n\n/**\n * Makes element unselectable.\n */\n\n.ck.ck-toolbar {\n\t-moz-user-select: none;\n\t-webkit-user-select: none;\n\t-ms-user-select: none;\n\tuser-select: none;\n\n\tdisplay: flex;\n\tflex-flow: row nowrap;\n\talign-items: center;\n}\n\n.ck.ck-toolbar > .ck-toolbar__items {\n\t\tdisplay: flex;\n\t\tflex-flow: row wrap;\n\t\talign-items: center;\n\t\tflex-grow: 1;\n\n\t}\n\n.ck.ck-toolbar .ck.ck-toolbar__separator {\n\t\tdisplay: inline-block;\n\n\t\t/*\n\t\t * A leading or trailing separator makes no sense (separates from nothing on one side).\n\t\t * For instance, it can happen when toolbar items (also separators) are getting grouped one by one and\n\t\t * moved to another toolbar in the dropdown.\n\t\t */\n\t}\n\n.ck.ck-toolbar .ck.ck-toolbar__separator:first-child,\n\t\t.ck.ck-toolbar .ck.ck-toolbar__separator:last-child {\n\t\t\tdisplay: none;\n\t\t}\n\n.ck.ck-toolbar .ck-toolbar__line-break {\n\t\tflex-basis: 100%;\n\t}\n\n.ck.ck-toolbar.ck-toolbar_grouping > .ck-toolbar__items {\n\t\tflex-wrap: nowrap;\n\t}\n\n.ck.ck-toolbar.ck-toolbar_vertical > .ck-toolbar__items {\n\t\tflex-direction: column;\n\t}\n\n.ck.ck-toolbar.ck-toolbar_floating > .ck-toolbar__items {\n\t\tflex-wrap: nowrap;\n\t}\n\n.ck.ck-toolbar > .ck.ck-toolbar__grouped-dropdown > .ck-dropdown__button .ck-dropdown__arrow {\n\t\t\tdisplay: none;\n\t\t}\n\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n\n.ck.ck-block-toolbar-button {\n\tposition: absolute;\n\tz-index: var(--ck-z-default);\n}\n\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n\n.ck.ck-menu-bar__menu > .ck-menu-bar__menu__button > .ck-menu-bar__menu__button__arrow {\n\t\tpointer-events: none;\n\t\tz-index: var(--ck-z-default);\n\t}\n\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n\n:root {\n\t--ck-menu-bar-menu-max-width: 75vw;\n\t--ck-menu-bar-nested-menu-horizontal-offset: 5px;\n}\n\n.ck.ck-menu-bar__menu > .ck.ck-menu-bar__menu__panel {\n\tz-index: var(--ck-z-panel);\n\tmax-width: var(--ck-menu-bar-menu-max-width);\n\tposition: absolute;\n}\n\n.ck.ck-menu-bar__menu > .ck.ck-menu-bar__menu__panel.ck-menu-bar__menu__panel_position_ne,\n\t.ck.ck-menu-bar__menu > .ck.ck-menu-bar__menu__panel.ck-menu-bar__menu__panel_position_nw {\n\t\tbottom: 100%;\n\t}\n\n.ck.ck-menu-bar__menu > .ck.ck-menu-bar__menu__panel.ck-menu-bar__menu__panel_position_se,\n\t.ck.ck-menu-bar__menu > .ck.ck-menu-bar__menu__panel.ck-menu-bar__menu__panel_position_sw {\n\t\ttop: 100%;\n\t\tbottom: auto;\n\t}\n\n.ck.ck-menu-bar__menu > .ck.ck-menu-bar__menu__panel.ck-menu-bar__menu__panel_position_ne,\n\t.ck.ck-menu-bar__menu > .ck.ck-menu-bar__menu__panel.ck-menu-bar__menu__panel_position_se {\n\t\tleft: 0px;\n\t}\n\n.ck.ck-menu-bar__menu > .ck.ck-menu-bar__menu__panel.ck-menu-bar__menu__panel_position_nw,\n\t.ck.ck-menu-bar__menu > .ck.ck-menu-bar__menu__panel.ck-menu-bar__menu__panel_position_sw {\n\t\tright: 0px;\n\t}\n\n.ck.ck-menu-bar__menu > .ck.ck-menu-bar__menu__panel.ck-menu-bar__menu__panel_position_es,\n\t.ck.ck-menu-bar__menu > .ck.ck-menu-bar__menu__panel.ck-menu-bar__menu__panel_position_en {\n\t\tleft: calc( 100% - var(--ck-menu-bar-nested-menu-horizontal-offset) );\n\t}\n\n.ck.ck-menu-bar__menu > .ck.ck-menu-bar__menu__panel.ck-menu-bar__menu__panel_position_es {\n\t\ttop: 0px;\n\t}\n\n.ck.ck-menu-bar__menu > .ck.ck-menu-bar__menu__panel.ck-menu-bar__menu__panel_position_en {\n\t\tbottom: 0px;\n\t}\n\n.ck.ck-menu-bar__menu > .ck.ck-menu-bar__menu__panel.ck-menu-bar__menu__panel_position_ws,\n\t.ck.ck-menu-bar__menu > .ck.ck-menu-bar__menu__panel.ck-menu-bar__menu__panel_position_wn {\n\t\tright: calc( 100% - var(--ck-menu-bar-nested-menu-horizontal-offset) );\n\t}\n\n.ck.ck-menu-bar__menu > .ck.ck-menu-bar__menu__panel.ck-menu-bar__menu__panel_position_ws {\n\t\ttop: 0px;\n\t}\n\n.ck.ck-menu-bar__menu > .ck.ck-menu-bar__menu__panel.ck-menu-bar__menu__panel_position_wn {\n\t\tbottom: 0px;\n\t}\n\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n\n.ck.ck-menu-bar__menu {\n\tdisplay: block;\n\tposition: relative;\n}\n\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n\n:root {\n\t--ck-color-resizer: var(--ck-color-focus-border);\n\t--ck-color-resizer-tooltip-background: hsl(0, 0%, 15%);\n\t--ck-color-resizer-tooltip-text: hsl(0, 0%, 95%);\n\n\t--ck-resizer-border-radius: var(--ck-border-radius);\n\t--ck-resizer-tooltip-offset: 10px;\n\t--ck-resizer-tooltip-height: calc(var(--ck-spacing-small) * 2 + 10px);\n}\n\n.ck .ck-widget {\n\t/* This is neccessary for type around UI to be positioned properly. */\n\tposition: relative;\n}\n\n.ck .ck-widget.ck-widget_with-selection-handle {\n\t/* Make the widget wrapper a relative positioning container for the drag handle. */\n\tposition: relative;\n}\n\n.ck .ck-widget.ck-widget_with-selection-handle .ck-widget__selection-handle {\n\t\tposition: absolute;\n\t}\n\n.ck .ck-widget.ck-widget_with-selection-handle .ck-widget__selection-handle .ck-icon {\n\t\t\t/* Make sure the icon in not a subject to font-size or line-height to avoid\n\t\t\tunnecessary spacing around it. */\n\t\t\tdisplay: block;\n\t\t}\n\n/* Show the selection handle on mouse hover over the widget, but not for nested widgets. */\n\n.ck .ck-widget.ck-widget_with-selection-handle:hover > .ck-widget__selection-handle {\n\t\tvisibility: visible;\n\t}\n\n/* Show the selection handle when the widget is selected, but not for nested widgets. */\n\n.ck .ck-widget.ck-widget_with-selection-handle.ck-widget_selected > .ck-widget__selection-handle {\n\t\tvisibility: visible;\n\t}\n\n.ck .ck-size-view {\n\tbackground: var(--ck-color-resizer-tooltip-background);\n\tcolor: var(--ck-color-resizer-tooltip-text);\n\tborder: 1px solid var(--ck-color-resizer-tooltip-text);\n\tborder-radius: var(--ck-resizer-border-radius);\n\tfont-size: var(--ck-font-size-tiny);\n\tdisplay: block;\n\tpadding: 0 var(--ck-spacing-small);\n\theight: var(--ck-resizer-tooltip-height);\n\tline-height: var(--ck-resizer-tooltip-height);\n}\n\n.ck .ck-size-view.ck-orientation-top-left,\n\t.ck .ck-size-view.ck-orientation-top-right,\n\t.ck .ck-size-view.ck-orientation-bottom-right,\n\t.ck .ck-size-view.ck-orientation-bottom-left,\n\t.ck .ck-size-view.ck-orientation-above-center {\n\t\tposition: absolute;\n\t}\n\n.ck .ck-size-view.ck-orientation-top-left {\n\t\ttop: var(--ck-resizer-tooltip-offset);\n\t\tleft: var(--ck-resizer-tooltip-offset);\n\t}\n\n.ck .ck-size-view.ck-orientation-top-right {\n\t\ttop: var(--ck-resizer-tooltip-offset);\n\t\tright: var(--ck-resizer-tooltip-offset);\n\t}\n\n.ck .ck-size-view.ck-orientation-bottom-right {\n\t\tbottom: var(--ck-resizer-tooltip-offset);\n\t\tright: var(--ck-resizer-tooltip-offset);\n\t}\n\n.ck .ck-size-view.ck-orientation-bottom-left {\n\t\tbottom: var(--ck-resizer-tooltip-offset);\n\t\tleft: var(--ck-resizer-tooltip-offset);\n\t}\n\n/* Class applied if the widget is too small to contain the size label */\n\n.ck .ck-size-view.ck-orientation-above-center {\n\t\ttop: calc(var(--ck-resizer-tooltip-height) * -1);\n\t\tleft: 50%;\n\t\ttransform: translate(-50%);\n\t}\n\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n\n.ck .ck-widget_with-resizer {\n\t/* Make the widget wrapper a relative positioning container for the drag handle. */\n\tposition: relative;\n}\n\n.ck .ck-widget__resizer {\n\tdisplay: none;\n\tposition: absolute;\n\n\t/* The wrapper itself should not interfere with the pointer device, only the handles should. */\n\tpointer-events: none;\n\n\tleft: 0;\n\ttop: 0;\n}\n\n.ck-focused .ck-widget_with-resizer.ck-widget_selected > .ck-widget__resizer {\n\t\tdisplay: block;\n\t}\n\n.ck .ck-widget__resizer__handle {\n\tposition: absolute;\n\n\t/* Resizers are the only UI elements that should interfere with a pointer device. */\n\tpointer-events: all;\n}\n\n.ck .ck-widget__resizer__handle.ck-widget__resizer__handle-top-left,\n\t.ck .ck-widget__resizer__handle.ck-widget__resizer__handle-bottom-right {\n\t\tcursor: nwse-resize;\n\t}\n\n.ck .ck-widget__resizer__handle.ck-widget__resizer__handle-top-right,\n\t.ck .ck-widget__resizer__handle.ck-widget__resizer__handle-bottom-left {\n\t\tcursor: nesw-resize;\n\t}\n\n/*\n * Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n\n/*\n\t * Styles of the type around buttons\n\t */\n\n.ck .ck-widget .ck-widget__type-around__button {\n\t\tdisplay: block;\n\t\tposition: absolute;\n\t\toverflow: hidden;\n\t\tz-index: var(--ck-z-default);\n\t}\n\n.ck .ck-widget .ck-widget__type-around__button svg {\n\t\t\tposition: absolute;\n\t\t\ttop: 50%;\n\t\t\tleft: 50%;\n\t\t\tz-index: calc(var(--ck-z-default) + 2);\n\t\t}\n\n.ck .ck-widget .ck-widget__type-around__button.ck-widget__type-around__button_before {\n\t\t\t/* Place it in the middle of the outline */\n\t\t\ttop: calc(-0.5 * var(--ck-widget-outline-thickness));\n\t\t\tleft: min(10%, 30px);\n\n\t\t\ttransform: translateY(-50%);\n\t\t}\n\n.ck .ck-widget .ck-widget__type-around__button.ck-widget__type-around__button_after {\n\t\t\t/* Place it in the middle of the outline */\n\t\t\tbottom: calc(-0.5 * var(--ck-widget-outline-thickness));\n\t\t\tright: min(10%, 30px);\n\n\t\t\ttransform: translateY(50%);\n\t\t}\n\n/*\n\t * Styles for the buttons when:\n\t * - the widget is selected,\n\t * - or the button is being hovered (regardless of the widget state).\n\t */\n\n.ck .ck-widget.ck-widget_selected > .ck-widget__type-around > .ck-widget__type-around__button::after, .ck .ck-widget > .ck-widget__type-around > .ck-widget__type-around__button:hover::after {\n\t\t\tcontent: "";\n\t\t\tdisplay: block;\n\t\t\tposition: absolute;\n\t\t\ttop: 1px;\n\t\t\tleft: 1px;\n\t\t\tz-index: calc(var(--ck-z-default) + 1);\n\t\t}\n\n/*\n\t * Styles for the horizontal "fake caret" which is displayed when the user navigates using the keyboard.\n\t */\n\n.ck .ck-widget > .ck-widget__type-around > .ck-widget__type-around__fake-caret {\n\t\tdisplay: none;\n\t\tposition: absolute;\n\t\tleft: 0;\n\t\tright: 0;\n\t}\n\n/*\n\t * When the widget is hovered the "fake caret" would normally be narrower than the\n\t * extra outline displayed around the widget. Let's extend the "fake caret" to match\n\t * the full width of the widget.\n\t */\n\n.ck .ck-widget:hover > .ck-widget__type-around > .ck-widget__type-around__fake-caret {\n\t\tleft: calc( -1 * var(--ck-widget-outline-thickness) );\n\t\tright: calc( -1 * var(--ck-widget-outline-thickness) );\n\t}\n\n/*\n\t * Styles for the horizontal "fake caret" when it should be displayed before the widget (backward keyboard navigation).\n\t */\n\n.ck .ck-widget.ck-widget_type-around_show-fake-caret_before > .ck-widget__type-around > .ck-widget__type-around__fake-caret {\n\t\ttop: calc( -1 * var(--ck-widget-outline-thickness) - 1px );\n\t\tdisplay: block;\n\t}\n\n/*\n\t * Styles for the horizontal "fake caret" when it should be displayed after the widget (forward keyboard navigation).\n\t */\n\n.ck .ck-widget.ck-widget_type-around_show-fake-caret_after > .ck-widget__type-around > .ck-widget__type-around__fake-caret {\n\t\tbottom: calc( -1 * var(--ck-widget-outline-thickness) - 1px );\n\t\tdisplay: block;\n\t}\n\n/*\n * Integration with the read-only mode of the editor.\n */\n.ck.ck-editor__editable.ck-read-only .ck-widget__type-around {\n\tdisplay: none;\n}\n\n/*\n * Integration with the restricted editing mode (feature) of the editor.\n */\n.ck.ck-editor__editable.ck-restricted-editing_mode_restricted .ck-widget__type-around {\n\tdisplay: none;\n}\n\n/*\n * Integration with the #isEnabled property of the WidgetTypeAround plugin.\n */\n.ck.ck-editor__editable.ck-widget__type-around_disabled .ck-widget__type-around {\n\tdisplay: none;\n}`,""]);const lt=z},417:t=>{t.exports=function(t,e){return e||(e={}),t?(t=String(t.__esModule?t.default:t),/^['"].*['"]$/.test(t)&&(t=t.slice(1,-1)),e.hash&&(t+=e.hash),/["'() \t\n]|(%20)/.test(t)||e.needQuotes?'"'.concat(t.replace(/"/g,'\\"').replace(/\n/g,"\\n"),'"'):t):t}},436:t=>{t.exports="data:image/svg+xml;utf8,<svg width=%27120%27 height=%2712%27 xmlns=%27http://www.w3.org/2000/svg%27 ><text style=%27paint-order:stroke fill; clip-path: inset%28-3px%29%27 stroke=%27%23EAEAEA%27 stroke-width=%2713%27 dominant-baseline=%27middle%27 fill=%27black%27 x=%273%27 y=%277%27 font-size=%279px%27 font-family=%27Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace%27>BLOCKQUOTE</text></svg>"},490:t=>{t.exports="data:image/svg+xml;utf8,<svg width=%27120%27 height=%2712%27 xmlns=%27http://www.w3.org/2000/svg%27 ><text style=%27paint-order:stroke fill; clip-path: inset%28-3px%29%27 stroke=%27%23EAEAEA%27 stroke-width=%2713%27 dominant-baseline=%27middle%27 fill=%27black%27 x=%273%27 y=%277%27 font-size=%279px%27 font-family=%27Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace%27>MAIN</text></svg>"},510:t=>{t.exports="data:image/svg+xml;utf8,<svg width=%27120%27 height=%2712%27 xmlns=%27http://www.w3.org/2000/svg%27 ><text style=%27paint-order:stroke fill; clip-path: inset%28-3px%29%27 stroke=%27%23EAEAEA%27 stroke-width=%2713%27 dominant-baseline=%27middle%27 fill=%27black%27 x=%273%27 y=%277%27 font-size=%279px%27 font-family=%27Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace%27>UL</text></svg>"},524:t=>{t.exports="data:image/svg+xml;utf8,<svg width=%27120%27 height=%2712%27 xmlns=%27http://www.w3.org/2000/svg%27 ><text style=%27paint-order:stroke fill; clip-path: inset%28-3px%29%27 stroke=%27%23EAEAEA%27 stroke-width=%2713%27 dominant-baseline=%27middle%27 fill=%27black%27 x=%273%27 y=%277%27 font-size=%279px%27 font-family=%27Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace%27>H1</text></svg>"},540:(t,e,n)=>{t.exports=n(287)},599:t=>{t.exports="data:image/svg+xml;utf8,<svg width=%27120%27 height=%2712%27 xmlns=%27http://www.w3.org/2000/svg%27 ><text style=%27paint-order:stroke fill; clip-path: inset%28-3px%29%27 stroke=%27%23EAEAEA%27 stroke-width=%2713%27 dominant-baseline=%27middle%27 fill=%27black%27 x=%273%27 y=%277%27 font-size=%279px%27 font-family=%27Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace%27>H4</text></svg>"},601:t=>{t.exports=function(t){return t[1]}},626:(t,e,n)=>{n.d(e,{A:()=>a});var i=n(601),o=n.n(i),r=n(314),s=n.n(r)()(o());s.push([t.id,"@import url(https://fonts.googleapis.com/css2?family=Lato:ital,wght@0,400;0,700;1,400;1,700&display=swap);"]),s.push([t.id,"@media print {\n\tbody {\n\t\tmargin: 0 !important;\n\t}\n}\n\n:root {\n\t--ck-content-font-family: 'Lato';\n}\n\n.main-container {\n\tfont-family: var(--ck-content-font-family);\n\twidth: fit-content;\n\tmargin-left: auto;\n\tmargin-right: auto;\n}\n\n.editor-container_classic-editor .editor-container__editor {\n\tmin-width: 795px;\n\tmax-width: 795px;\n}\n",""]);const a=s},656:t=>{t.exports="data:image/svg+xml;utf8,<svg width=%27120%27 height=%2712%27 xmlns=%27http://www.w3.org/2000/svg%27 ><text style=%27paint-order:stroke fill; clip-path: inset%28-3px%29%27 stroke=%27%23EAEAEA%27 stroke-width=%2713%27 dominant-baseline=%27middle%27 fill=%27black%27 x=%273%27 y=%277%27 font-size=%279px%27 font-family=%27Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace%27>SECTION</text></svg>"},659:t=>{var e={};t.exports=function(t,n){var i=function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(t){n=null}e[t]=n}return e[t]}(t);if(!i)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");i.appendChild(n)}},691:t=>{t.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNTAuMzc4IiBoZWlnaHQ9IjI1NC4xNjciIHZpZXdCb3g9IjAgMCA2Ni4yNDYgNjcuMjQ4Ij48ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMTcyLjUzMSAtMjE4LjQ1NSkgc2NhbGUoLjk4MDEyKSI+PHJlY3Qgcnk9IjUuMjM4IiByeD0iNS4yMzgiIHk9IjIzMS4zOTkiIHg9IjE3Ni4wMzEiIGhlaWdodD0iNjAuMDk5IiB3aWR0aD0iNjAuMDk5IiBmaWxsPSIjMzRhNjY4IiBwYWludC1vcmRlcj0ibWFya2VycyBzdHJva2UgZmlsbCIvPjxwYXRoIGQ9Ik0yMDYuNDc3IDI2MC45bC0yOC45ODcgMjguOTg3YTUuMjE4IDUuMjE4IDAgMCAwIDMuNzggMS42MWg0OS42MjFjMS42OTQgMCAzLjE5LS43OTggNC4xNDYtMi4wMzd6IiBmaWxsPSIjNWM4OGM1Ii8+PHBhdGggZD0iTTIyNi43NDIgMjIyLjk4OGMtOS4yNjYgMC0xNi43NzcgNy4xNy0xNi43NzcgMTYuMDE0LjAwNyAyLjc2Mi42NjMgNS40NzQgMi4wOTMgNy44NzUuNDMuNzAzLjgzIDEuNDA4IDEuMTkgMi4xMDcuMzMzLjUwMi42NSAxLjAwNS45NSAxLjUwOC4zNDMuNDc3LjY3My45NTcuOTg4IDEuNDQgMS4zMSAxLjc2OSAyLjUgMy41MDIgMy42MzcgNS4xNjguNzkzIDEuMjc1IDEuNjgzIDIuNjQgMi40NjYgMy45OSAyLjM2MyA0LjA5NCA0LjAwNyA4LjA5MiA0LjYgMTMuOTE0di4wMTJjLjE4Mi40MTIuNTE2LjY2Ni44NzkuNjY3LjQwMy0uMDAxLjc2OC0uMzE0LjkzLS43OTkuNjAzLTUuNzU2IDIuMjM4LTkuNzI5IDQuNTg1LTEzLjc5NC43ODItMS4zNSAxLjY3My0yLjcxNSAyLjQ2NS0zLjk5IDEuMTM3LTEuNjY2IDIuMzI4LTMuNCAzLjYzOC01LjE2OS4zMTUtLjQ4Mi42NDUtLjk2Mi45ODgtMS40MzkuMy0uNTAzLjYxNy0xLjAwNi45NS0xLjUwOC4zNTktLjcuNzYtMS40MDQgMS4xOS0yLjEwNyAxLjQyNi0yLjQwMiAyLTUuMTE0IDIuMDA0LTcuODc1IDAtOC44NDQtNy41MTEtMTYuMDE0LTE2Ljc3Ni0xNi4wMTR6IiBmaWxsPSIjZGQ0YjNlIiBwYWludC1vcmRlcj0ibWFya2VycyBzdHJva2UgZmlsbCIvPjxlbGxpcHNlIHJ5PSI1LjU2NCIgcng9IjUuODI4IiBjeT0iMjM5LjAwMiIgY3g9IjIyNi43NDIiIGZpbGw9IiM4MDJkMjciIHBhaW50LW9yZGVyPSJtYXJrZXJzIHN0cm9rZSBmaWxsIi8+PHBhdGggZD0iTTE5MC4zMDEgMjM3LjI4M2MtNC42NyAwLTguNDU3IDMuODUzLTguNDU3IDguNjA2czMuNzg2IDguNjA3IDguNDU3IDguNjA3YzMuMDQzIDAgNC44MDYtLjk1OCA2LjMzNy0yLjUxNiAxLjUzLTEuNTU3IDIuMDg3LTMuOTEzIDIuMDg3LTYuMjkgMC0uMzYyLS4wMjMtLjcyMi0uMDY0LTEuMDc5aC04LjI1N3YzLjA0M2g0Ljg1Yy0uMTk3Ljc1OS0uNTMxIDEuNDUtMS4wNTggMS45ODYtLjk0Mi45NTgtMi4wMjggMS41NDgtMy45MDEgMS41NDgtMi44NzYgMC01LjIwOC0yLjM3Mi01LjIwOC01LjI5OSAwLTIuOTI2IDIuMzMyLTUuMjk5IDUuMjA4LTUuMjk5IDEuMzk5IDAgMi42MTguNDA3IDMuNTg0IDEuMjkzbDIuMzgxLTIuMzhjMC0uMDAyLS4wMDMtLjAwNC0uMDA0LS4wMDUtMS41ODgtMS41MjQtMy42Mi0yLjIxNS01Ljk1NS0yLjIxNXptNC40MyA1LjY2bC4wMDMuMDA2di0uMDAzeiIgZmlsbD0iI2ZmZiIgcGFpbnQtb3JkZXI9Im1hcmtlcnMgc3Ryb2tlIGZpbGwiLz48cGF0aCBkPSJNMjE1LjE4NCAyNTEuOTI5bC03Ljk4IDcuOTc5IDI4LjQ3NyAyOC40NzVjLjI4Ny0uNjQ5LjQ0OS0xLjM2Ni40NDktMi4xMjN2LTMxLjE2NWMtLjQ2OS42NzUtLjkzNCAxLjM0OS0xLjM4MiAyLjAwNS0uNzkyIDEuMjc1LTEuNjgyIDIuNjQtMi40NjUgMy45OS0yLjM0NyA0LjA2NS0zLjk4MiA4LjAzOC00LjU4NSAxMy43OTQtLjE2Mi40ODUtLjUyNy43OTgtLjkzLjc5OS0uMzYzLS4wMDEtLjY5Ny0uMjU1LS44NzktLjY2N3YtLjAxMmMtLjU5My01LjgyMi0yLjIzNy05LjgyLTQuNi0xMy45MTQtLjc4My0xLjM1LTEuNjczLTIuNzE1LTIuNDY2LTMuOTktMS4xMzctMS42NjYtMi4zMjctMy40LTMuNjM3LTUuMTY5bC0uMDAyLS4wMDN6IiBmaWxsPSIjYzNjM2MzIi8+PHBhdGggZD0iTTIxMi45ODMgMjQ4LjQ5NWwtMzYuOTUyIDM2Ljk1M3YuODEyYTUuMjI3IDUuMjI3IDAgMCAwIDUuMjM4IDUuMjM4aDEuMDE1bDM1LjY2Ni0zNS42NjZhMTM2LjI3NSAxMzYuMjc1IDAgMCAwLTIuNzY0LTMuOSAzNy41NzUgMzcuNTc1IDAgMCAwLS45ODktMS40NGMtLjI5OS0uNTAzLS42MTYtMS4wMDYtLjk1LTEuNTA4LS4wODMtLjE2Mi0uMTc2LS4zMjYtLjI2NC0uNDg5eiIgZmlsbD0iI2ZkZGM0ZiIgcGFpbnQtb3JkZXI9Im1hcmtlcnMgc3Ryb2tlIGZpbGwiLz48cGF0aCBkPSJNMjExLjk5OCAyNjEuMDgzbC02LjE1MiA2LjE1MSAyNC4yNjQgMjQuMjY0aC43ODFhNS4yMjcgNS4yMjcgMCAwIDAgNS4yMzktNS4yMzh2LTEuMDQ1eiIgZmlsbD0iI2ZmZiIgcGFpbnQtb3JkZXI9Im1hcmtlcnMgc3Ryb2tlIGZpbGwiLz48L2c+PC9zdmc+"},757:t=>{t.exports="data:image/svg+xml;utf8,<svg width=%27120%27 height=%2712%27 xmlns=%27http://www.w3.org/2000/svg%27 ><text style=%27paint-order:stroke fill; clip-path: inset%28-3px%29%27 stroke=%27%23EAEAEA%27 stroke-width=%2713%27 dominant-baseline=%27middle%27 fill=%27black%27 x=%273%27 y=%277%27 font-size=%279px%27 font-family=%27Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace%27>H2</text></svg>"},767:t=>{t.exports="data:image/svg+xml;utf8,<svg width=%27120%27 height=%2712%27 xmlns=%27http://www.w3.org/2000/svg%27 ><text style=%27paint-order:stroke fill; clip-path: inset%28-3px%29%27 stroke=%27%23EAEAEA%27 stroke-width=%2713%27 dominant-baseline=%27middle%27 fill=%27black%27 x=%273%27 y=%277%27 font-size=%279px%27 font-family=%27Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace%27>FIGCAPTION</text></svg>"},772:t=>{t.exports="data:image/svg+xml;utf8,<svg width=%27120%27 height=%2712%27 xmlns=%27http://www.w3.org/2000/svg%27 ><text style=%27paint-order:stroke fill; clip-path: inset%28-3px%29%27 stroke=%27%23EAEAEA%27 stroke-width=%2713%27 dominant-baseline=%27middle%27 fill=%27black%27 x=%273%27 y=%277%27 font-size=%279px%27 font-family=%27Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace%27>OL</text></svg>"},825:t=>{t.exports=function(t){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var e=t.insertStyleElement(t);return{update:function(n){!function(t,e,n){var i="";n.supports&&(i+="@supports (".concat(n.supports,") {")),n.media&&(i+="@media ".concat(n.media," {"));var o=void 0!==n.layer;o&&(i+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),i+=n.css,o&&(i+="}"),n.media&&(i+="}"),n.supports&&(i+="}");var r=n.sourceMap;r&&"undefined"!=typeof btoa&&(i+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(r))))," */")),e.styleTagTransform(i,t,e.options)}(e,t,n)},remove:function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(e)}}}},911:t=>{t.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz48c3ZnIHZlcnNpb249IjEuMSIgaWQ9IldoaXRlIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4PSIwcHgiIHk9IjBweCIgdmlld0JveD0iMCAwIDQwMCA0MDAiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDQwMCA0MDA7IiB4bWw6c3BhY2U9InByZXNlcnZlIj48c3R5bGUgdHlwZT0idGV4dC9jc3MiPi5zdDB7ZmlsbDojRkZGRkZGO308L3N0eWxlPjxwYXRoIGNsYXNzPSJzdDAiIGQ9Ik00MDAsMjAwYzAsMTEwLjUtODkuNSwyMDAtMjAwLDIwMFMwLDMxMC41LDAsMjAwUzg5LjUsMCwyMDAsMFM0MDAsODkuNSw0MDAsMjAweiBNMTYzLjQsMzA1LjVjODguNywwLDEzNy4yLTczLjUsMTM3LjItMTM3LjJjMC0yLjEsMC00LjItMC4xLTYuMmM5LjQtNi44LDE3LjYtMTUuMywyNC4xLTI1Yy04LjYsMy44LTE3LjksNi40LTI3LjcsNy42YzEwLTYsMTcuNi0xNS40LDIxLjItMjYuN2MtOS4zLDUuNS0xOS42LDkuNS0zMC42LDExLjdjLTguOC05LjQtMjEuMy0xNS4yLTM1LjItMTUuMmMtMjYuNiwwLTQ4LjIsMjEuNi00OC4yLDQ4LjJjMCwzLjgsMC40LDcuNSwxLjMsMTFjLTQwLjEtMi03NS42LTIxLjItOTkuNC01MC40Yy00LjEsNy4xLTYuNSwxNS40LTYuNSwyNC4yYzAsMTYuNyw4LjUsMzEuNSwyMS41LDQwLjFjLTcuOS0wLjItMTUuMy0yLjQtMjEuOC02YzAsMC4yLDAsMC40LDAsMC42YzAsMjMuNCwxNi42LDQyLjgsMzguNyw0Ny4zYy00LDEuMS04LjMsMS43LTEyLjcsMS43Yy0zLjEsMC02LjEtMC4zLTkuMS0wLjljNi4xLDE5LjIsMjMuOSwzMy4xLDQ1LDMzLjVjLTE2LjUsMTIuOS0zNy4zLDIwLjYtNTkuOSwyMC42Yy0zLjksMC03LjctMC4yLTExLjUtMC43QzExMC44LDI5Ny41LDEzNi4yLDMwNS41LDE2My40LDMwNS41Ii8+PC9zdmc+"},921:t=>{t.exports="data:image/svg+xml;utf8,<svg width=%27120%27 height=%2712%27 xmlns=%27http://www.w3.org/2000/svg%27 ><text style=%27paint-order:stroke fill; clip-path: inset%28-3px%29%27 stroke=%27%23EAEAEA%27 stroke-width=%2713%27 dominant-baseline=%27middle%27 fill=%27black%27 x=%273%27 y=%277%27 font-size=%279px%27 font-family=%27Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace%27>H6</text></svg>"},923:t=>{t.exports="data:image/svg+xml;utf8,<svg width=%27120%27 height=%2712%27 xmlns=%27http://www.w3.org/2000/svg%27 ><text style=%27paint-order:stroke fill; clip-path: inset%28-3px%29%27 stroke=%27%23EAEAEA%27 stroke-width=%2713%27 dominant-baseline=%27middle%27 fill=%27black%27 x=%273%27 y=%277%27 font-size=%279px%27 font-family=%27Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace%27>ASIDE</text></svg>"}},e={};function n(i){var o=e[i];if(void 0!==o)return o.exports;var r=e[i]={id:i,exports:{}};return t[i](r,r.exports,n),r.exports}n.m=t,n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var i in e)n.o(e,i)&&!n.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.b=document.baseURI||self.location.href,n.nc=void 0;var i={};n.r(i),n.d(i,{default:()=>kS});var o=n(540);const r=new Array(256).fill("").map((t,e)=>("0"+e.toString(16)).slice(-2));function s(t){return!!t&&/^\d+\.\d+\.\d+/.test(t)}function a(t){return!!t&&["nightly","alpha","internal","nightly-","staging"].some(e=>t.includes(e))}function l(t){if(a(t))return 3;const{major:e}=function(t){if(!s(t))throw new Error(`Invalid semantic version: ${t||"<blank>"}.`);const[e,n,i]=t.split(".");return{major:Number.parseInt(e,10),minor:Number.parseInt(n,10),patch:Number.parseInt(i,10)}}(t);switch(!0){case e>=44:return 3;case e>=38:return 2;default:return 1}}function c(t,e){switch(e||=function(){const t=function(){const{CKEDITOR_VERSION:t,CKEDITOR:e}=window;return s(n=t)||a(n)?{source:e?"cdn":"npm",version:t}:null;var n}();return t?l(t.version):null}()||void 0,e){case 1:case 2:return void 0===t;case 3:return"GPL"===t;default:return!1}}var d=Object.defineProperty,u=(t,e,n)=>((t,e,n)=>e in t?d(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n)(t,"symbol"!=typeof e?e+"":e,n);const h=class t{constructor(t,e){u(this,"_lifecycle"),u(this,"_element"),u(this,"_releaseLock",null),u(this,"_value",null),u(this,"_afterMountCallbacks",[]),u(this,"_state",{destroyedBeforeInitialization:!1,mountingInProgress:null}),u(this,"release",function(t){let e=null;return(...n)=>(e||(e={current:t(...n)}),e.current)}(()=>{const{_releaseLock:t,_state:e,_element:n,_lifecycle:i}=this;e.mountingInProgress?e.mountingInProgress.then(()=>i.unmount({element:n,mountResult:this.value})).catch(t=>{console.error("CKEditor unmounting error:",t)}).then(t.resolve).then(()=>{this._value=null}):(e.destroyedBeforeInitialization=!0,t.resolve())})),this._element=t,this._lifecycle=e,this._lock()}get value(){return this._value}discard(){this._value=null,this._releaseLock=null,this._afterMountCallbacks=[],this._state={destroyedBeforeInitialization:!1,mountingInProgress:null}}unsafeSetValue(t){this._value=t,this._afterMountCallbacks.forEach(e=>{this._lifecycle.isValueValid&&!this._lifecycle.isValueValid(t)||e(t)}),this._afterMountCallbacks=[]}runAfterMount(t){const{_value:e,_afterMountCallbacks:n}=this;if(e){if(this._lifecycle.isValueValid&&!this._lifecycle.isValueValid(e))return;t(e)}else n.push(t)}_lock(){const{_semaphores:e}=t,{_state:n,_element:i,_lifecycle:o}=this,r=e.get(i)||Promise.resolve(null),s=function(){const t={resolve:null,promise:null};return t.promise=new Promise(e=>{t.resolve=e}),t}();this._releaseLock=s;const a=r.then(()=>n.destroyedBeforeInitialization?Promise.resolve(void 0):(n.mountingInProgress=o.mount().then(t=>(t&&this.unsafeSetValue(t),t)),n.mountingInProgress)).then(async t=>{t&&o.afterMount&&await o.afterMount({element:i,mountResult:t})}).then(()=>s.promise).catch(t=>{console.error("CKEditor mounting error:",t)}).then(()=>{e.get(i)===a&&e.delete(i)});e.set(i,a)}};u(h,"_semaphores",new Map);let g=h;const m="$__CKEditorReactContextMetadata",p=o.createContext(null),f=t=>e=>(t=>!!t&&"object"==typeof t&&"status"in t&&["initializing","initialized","error"].includes(t.status))(e)&&e.status===t,b=f("initializing"),k=(w={version:"11.0.0",frameworkVersion:o.version},function(t){c(t.config.get("licenseKey"))||t.on("collectUsageData",(t,{setUsageData:e})=>{e("integration.react",w)})});var w;const _="Lock from React integration (@ckeditor/ckeditor5-react)";class v extends o.Component{constructor(t){super(t),u(this,"domContainer",o.createRef()),u(this,"editorSemaphore",null),this._checkVersion()}_checkVersion(){const{CKEDITOR_VERSION:t}=window;if(!t)return console.warn('Cannot find the "CKEDITOR_VERSION" in the "window" scope.');const[e]=t.split(".").map(Number);e>=42||t.startsWith("0.0.0")||console.warn("The <CKEditor> component requires using CKEditor 5 in version 42+ or nightly build.")}get _semaphoreValue(){const{editorSemaphore:t}=this;return t?t.value:null}get watchdog(){const{_semaphoreValue:t}=this;return t?t.watchdog:null}get editor(){const{_semaphoreValue:t}=this;return t?t.instance:null}shouldComponentUpdate(t){const{props:e,editorSemaphore:n}=this;return t.id!==e.id||t.disableWatchdog!==e.disableWatchdog||(n&&(n.runAfterMount(({instance:n})=>{this._shouldUpdateEditorData(e,t,n)&&n.data.set(t.data)}),"disabled"in t&&n.runAfterMount(({instance:e})=>{t.disabled?e.enableReadOnlyMode(_):e.disableReadOnlyMode(_)})),!1)}componentDidMount(){b(this.context)||this._initLifeCycleSemaphore()}componentDidUpdate(){b(this.context)||this._initLifeCycleSemaphore()}componentWillUnmount(){this._unlockLifeCycleSemaphore()}_unlockLifeCycleSemaphore(){this.editorSemaphore&&(this.editorSemaphore.release(),this.editorSemaphore=null)}_initLifeCycleSemaphore(){this._unlockLifeCycleSemaphore(),this.editorSemaphore=new g(this.domContainer.current,{isValueValid:t=>t&&!!t.instance,mount:async()=>{var t,e;try{return await this._initializeEditor()}catch(n){throw null==(e=(t=this.props).onError)||e.call(t,n,{phase:"initialization",willEditorRestart:!1}),n}},afterMount:({mountResult:t})=>{const{onReady:e}=this.props;e&&null!==this.domContainer.current&&e(t.instance)},unmount:async({element:t,mountResult:e})=>{const{onAfterDestroy:n}=this.props;try{await this._destroyEditor(e),t.innerHTML=""}finally{n&&n(e.instance)}}})}render(){return o.createElement("div",{ref:this.domContainer})}async _initializeEditor(){if(this.props.disableWatchdog)return{instance:await this._createEditor(this.domContainer.current,this._getConfig()),watchdog:null};const t=(()=>{return t=this.context,f("initialized")(t)&&"ready"===t.watchdog.state?new y(this.context.watchdog):new this.props.editor.EditorWatchdog(this.props.editor,this.props.watchdogConfig);var t})(),e={current:0};return t.setCreator(async(n,i)=>{var o;const{editorSemaphore:r}=this,{onAfterDestroy:s}=this.props;e.current>0&&s&&(null==(o=null==r?void 0:r.value)?void 0:o.instance)&&s(r.value.instance);const a=await this._createEditor(n,i);return r&&e.current>0&&(r.unsafeSetValue({instance:a,watchdog:t}),setTimeout(()=>{this.props.onReady&&this.props.onReady(t.editor)})),e.current++,a}),t.on("error",(t,{error:e,causesRestart:n})=>{(this.props.onError||console.error)(e,{phase:"runtime",willEditorRestart:n})}),await t.create(this.domContainer.current,this._getConfig()),{watchdog:t,instance:t.editor}}_createEditor(t,e){const{contextItemMetadata:n}=this.props;return n&&(e=function(t,e){return{...e,[m]:t}}(n,e)),this.props.editor.create(t,(i=e,c(i.licenseKey)?i:function(t,e){const n=t.extraPlugins||[];return{...t,extraPlugins:[...n,...e.filter(t=>!n.includes(t))]}}(i,[k]))).then(t=>{"disabled"in this.props&&this.props.disabled&&t.enableReadOnlyMode(_);const e=t.model.document,n=t.editing.view.document;return e.on("change:data",e=>{this.props.onChange&&this.props.onChange(e,t)}),n.on("focus",e=>{this.props.onFocus&&this.props.onFocus(e,t)}),n.on("blur",e=>{this.props.onBlur&&this.props.onBlur(e,t)}),t});var i}async _destroyEditor(t){const{watchdog:e,instance:n}=t;return new Promise((t,i)=>{setTimeout(async()=>{try{if(e)return await e.destroy(),t();if(n)return await n.destroy(),t();t()}catch(t){console.error(t),i(t)}})})}_shouldUpdateEditorData(t,e,n){return t.data!==e.data&&n.data.get()!==e.data}_getConfig(){const t=this.props.config||{};return this.props.data&&t.initialData&&console.warn("Editor data should be provided either using `config.initialData` or `content` property. The config value takes precedence over `content` property and will be used when both are specified."),{...t,initialData:t.initialData||this.props.data||""}}}u(v,"contextType",p);class y{constructor(t){u(this,"_contextWatchdog"),u(this,"_id"),u(this,"_creator"),this._contextWatchdog=t,this._id=function(){const[t,e,n,i]=crypto.getRandomValues(new Uint32Array(4));return"e"+r[255&t]+r[t>>8&255]+r[t>>16&255]+r[t>>24&255]+r[255&e]+r[e>>8&255]+r[e>>16&255]+r[e>>24&255]+r[255&n]+r[n>>8&255]+r[n>>16&255]+r[n>>24&255]+r[255&i]+r[i>>8&255]+r[i>>16&255]+r[i>>24&255]}()}setCreator(t){this._creator=t}create(t,e){return this._contextWatchdog.add({sourceElementOrData:t,config:e,creator:this._creator,id:this._id,type:"editor"})}on(t,e){this._contextWatchdog.on("itemError",(t,{itemId:n,error:i})=>{n===this._id&&e(null,{error:i,causesRestart:void 0})})}destroy(){return"ready"===this._contextWatchdog.state?this._contextWatchdog.remove(this._id):Promise.resolve()}get editor(){return this._contextWatchdog.getItem(this._id)}}function C(...t){return e=>{t.forEach(t=>{"function"==typeof t?t(e):null!=t&&(t.current=e)})}}(0,o.memo)((0,o.forwardRef)(({id:t,semaphore:e,rootName:n},i)=>{const r=(0,o.useRef)(null);return(0,o.useEffect)(()=>{let t,i;return e.runAfterMount(({instance:e})=>{if(!r.current)return;i=e;const{ui:o,model:s}=i,a=s.document.getRoot(n);a&&i.ui.getEditableElement(n)&&i.detachEditable(a),t=o.view.createEditable(n,r.current),o.addEditable(t),e.editing.view.forceRender()}),()=>{if(i&&"destroyed"!==i.state&&r.current){const t=i.model.document.getRoot(n);t&&i.detachEditable(t)}}},[e.revision]),o.createElement("div",{key:e.revision,id:t,ref:C(i,r)})})).displayName="EditorEditable";function x(t){return null!==t&&("object"==typeof t||"function"==typeof t)}function A(t){return"string"==typeof t||t instanceof String}function E(t){if("object"!=typeof t)return!1;if(null==t)return!1;if(null===Object.getPrototypeOf(t))return!0;if("[object Object]"!==Object.prototype.toString.call(t)){const e=t[Symbol.toStringTag];return null!=e&&(!!Object.getOwnPropertyDescriptor(t,Symbol.toStringTag)?.writable&&t.toString()===`[object ${e}]`)}let e=t;for(;null!==Object.getPrototypeOf(e);)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}function S(t){return Object.getOwnPropertySymbols(t).filter(e=>Object.prototype.propertyIsEnumerable.call(t,e))}function T(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}(0,o.forwardRef)(({editor:t},e)=>{const n=(0,o.useRef)(null);return(0,o.useEffect)(()=>{const e=n.current;if(!t||!e)return;const i=t.ui.view.toolbar.element;return e.appendChild(i),()=>{e.contains(i)&&e.removeChild(i)}},[t&&t.id]),o.createElement("div",{ref:C(n,e)})}).displayName="EditorToolbarWrapper";const I="[object RegExp]",P="[object String]",M="[object Number]",N="[object Boolean]",L="[object Arguments]",V="[object Symbol]",z="[object Date]",O="[object Map]",R="[object Set]",D="[object Array]",B="[object ArrayBuffer]",F="[object Object]",j="[object DataView]",H="[object Uint8Array]",U="[object Uint8ClampedArray]",$="[object Uint16Array]",W="[object Uint32Array]",q="[object Int8Array]",K="[object Int16Array]",G="[object Int32Array]",Q="[object Float32Array]",Y="[object Float64Array]";function J(t){return null==t||"object"!=typeof t&&"function"!=typeof t}function Z(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function X(t,e,n,i=new Map,o=void 0){const r=o?.(t,e,n,i);if(null!=r)return r;if(J(t))return t;if(i.has(t))return i.get(t);if(Array.isArray(t)){const e=new Array(t.length);i.set(t,e);for(let r=0;r<t.length;r++)e[r]=X(t[r],r,n,i,o);return Object.hasOwn(t,"index")&&(e.index=t.index),Object.hasOwn(t,"input")&&(e.input=t.input),e}if(t instanceof Date)return new Date(t.getTime());if(t instanceof RegExp){const e=new RegExp(t.source,t.flags);return e.lastIndex=t.lastIndex,e}if(t instanceof Map){const e=new Map;i.set(t,e);for(const[r,s]of t)e.set(r,X(s,r,n,i,o));return e}if(t instanceof Set){const e=new Set;i.set(t,e);for(const r of t)e.add(X(r,void 0,n,i,o));return e}if("undefined"!=typeof Buffer&&Buffer.isBuffer(t))return t.subarray();if(Z(t)){const e=new(Object.getPrototypeOf(t).constructor)(t.length);i.set(t,e);for(let r=0;r<t.length;r++)e[r]=X(t[r],r,n,i,o);return e}if(t instanceof ArrayBuffer||"undefined"!=typeof SharedArrayBuffer&&t instanceof SharedArrayBuffer)return t.slice(0);if(t instanceof DataView){const e=new DataView(t.buffer.slice(0),t.byteOffset,t.byteLength);return i.set(t,e),tt(e,t,n,i,o),e}if("undefined"!=typeof File&&t instanceof File){const e=new File([t],t.name,{type:t.type});return i.set(t,e),tt(e,t,n,i,o),e}if(t instanceof Blob){const e=new Blob([t],{type:t.type});return i.set(t,e),tt(e,t,n,i,o),e}if(t instanceof Error){const e=new t.constructor;return i.set(t,e),e.message=t.message,e.name=t.name,e.stack=t.stack,e.cause=t.cause,tt(e,t,n,i,o),e}if("object"==typeof t&&function(t){switch(T(t)){case L:case D:case B:case j:case N:case z:case Q:case Y:case q:case K:case G:case O:case M:case F:case I:case R:case P:case V:case H:case U:case $:case W:return!0;default:return!1}}(t)){const e=Object.create(Object.getPrototypeOf(t));return i.set(t,e),tt(e,t,n,i,o),e}return t}function tt(t,e,n=t,i,o){const r=[...Object.keys(e),...S(e)];for(let s=0;s<r.length;s++){const a=r[s],l=Object.getOwnPropertyDescriptor(t,a);(null==l||l.writable)&&(t[a]=X(e[a],a,n,i,o))}}function et(t,e){return function(t,e){return X(t,void 0,t,new Map,e)}(t,(n,i,o,r)=>{const s=e?.(n,i,o,r);if(null!=s)return s;if("object"==typeof t)switch(Object.prototype.toString.call(t)){case M:case P:case N:{const e=new t.constructor(t?.valueOf());return tt(e,t),e}case L:{const e={};return tt(e,t),e.length=t.length,e[Symbol.iterator]=t[Symbol.iterator],e}default:return}})}function nt(t){return"object"==typeof t&&null!==t}function it(t){return nt(t)&&1===t.nodeType&&!E(t)}function ot(t){return"function"==typeof t}function rt(t){return et(t)}function st(t){return"__proto__"===t}function at(t){return null!==t&&"object"==typeof t&&"[object Arguments]"===T(t)}function lt(t){return Z(t)}function ct(t,...e){const n=e.slice(0,-1),i=e[e.length-1];let o=t;for(let t=0;t<n.length;t++)o=dt(o,n[t],i,new Map);return o}function dt(t,e,n,i){if(J(t)&&(t=Object(t)),null==e||"object"!=typeof e)return t;if(i.has(e))return function(t){if(J(t))return t;if(Array.isArray(t)||Z(t)||t instanceof ArrayBuffer||"undefined"!=typeof SharedArrayBuffer&&t instanceof SharedArrayBuffer)return t.slice(0);const e=Object.getPrototypeOf(t),n=e.constructor;if(t instanceof Date||t instanceof Map||t instanceof Set)return new n(t);if(t instanceof RegExp){const e=new n(t);return e.lastIndex=t.lastIndex,e}if(t instanceof DataView)return new n(t.buffer.slice(0));if(t instanceof Error){const e=new n(t.message);return e.stack=t.stack,e.name=t.name,e.cause=t.cause,e}if("undefined"!=typeof File&&t instanceof File)return new n([t],t.name,{type:t.type,lastModified:t.lastModified});if("object"==typeof t){const n=Object.create(e);return Object.assign(n,t)}return t}(i.get(e));if(i.set(e,t),Array.isArray(e)){e=e.slice();for(let t=0;t<e.length;t++)e[t]=e[t]??void 0}const o=[...Object.keys(e),...S(e)];for(let r=0;r<o.length;r++){const s=o[r];if(st(s))continue;let a=e[s],l=t[s];if(at(a)&&(a={...a}),at(l)&&(l={...l}),"undefined"!=typeof Buffer&&Buffer.isBuffer(a)&&(a=rt(a)),Array.isArray(a))if("object"==typeof l&&null!=l){const t=[],e=Reflect.ownKeys(l);for(let n=0;n<e.length;n++){const i=e[n];t[i]=l[i]}l=t}else l=[];const c=n(l,a,s,t,e,i);null!=c?t[s]=c:Array.isArray(a)||nt(l)&&nt(a)?t[s]=dt(l,a,n,i):null==l&&E(a)?t[s]=dt({},a,n,i):null==l&&lt(a)?t[s]=rt(a):void 0!==l&&void 0===a||(t[s]=a)}return t}function ut(){}function ht(t,...e){return ct(t,...e,ut)}let gt;try{gt={window,document}}catch{gt={window:{},document:{}}}function mt(){try{return navigator.userAgent.toLowerCase()}catch{return""}}const pt=mt(),ft={isMac:bt(pt),isWindows:kt(pt),isGecko:wt(pt),isSafari:_t(pt),isiOS:vt(pt),isAndroid:yt(pt),isBlink:Ct(pt),get isMediaForcedColors(){return!!gt.window.matchMedia&&gt.window.matchMedia("(forced-colors: active)").matches},get isMotionReduced(){return!!gt.window.matchMedia&&gt.window.matchMedia("(prefers-reduced-motion)").matches},features:{isRegExpUnicodePropertySupported:xt()}};function bt(t){return t.indexOf("macintosh")>-1}function kt(t){return t.indexOf("windows")>-1}function wt(t){return!!t.match(/gecko\/\d+/)}function _t(t){return t.indexOf(" applewebkit/")>-1&&-1===t.indexOf("chrome")}function vt(t){return!!t.match(/iphone|ipad/i)||bt(t)&&navigator.maxTouchPoints>0}function yt(t){return t.indexOf("android")>-1}function Ct(t){return t.indexOf("chrome/")>-1&&t.indexOf("edge/")<0}function xt(){let t=!1;try{t=0==="ć".search(new RegExp("[\\p{L}]","u"))}catch{}return t}function At(t,e,n,i){n=n||function(t,e){return t===e};const o=Array.isArray(t)?t:Array.prototype.slice.call(t),r=Array.isArray(e)?e:Array.prototype.slice.call(e),s=function(t,e,n){const i=Et(t,e,n);if(-1===i)return{firstIndex:-1,lastIndexOld:-1,lastIndexNew:-1};const o=Et(St(t,i),St(e,i),n);return{firstIndex:i,lastIndexOld:t.length-o,lastIndexNew:e.length-o}}(o,r,n),a=i?function(t,e){const{firstIndex:n,lastIndexOld:i,lastIndexNew:o}=t;if(-1===n)return Array(e).fill("equal");let r=[];return n>0&&(r=r.concat(Array(n).fill("equal"))),o-n>0&&(r=r.concat(Array(o-n).fill("insert"))),i-n>0&&(r=r.concat(Array(i-n).fill("delete"))),o<e&&(r=r.concat(Array(e-o).fill("equal"))),r}(s,r.length):function(t,e){const n=[],{firstIndex:i,lastIndexOld:o,lastIndexNew:r}=e;return r-i>0&&n.push({index:i,type:"insert",values:t.slice(i,r)}),o-i>0&&n.push({index:i+(r-i),type:"delete",howMany:o-i}),n}(r,s);return a}function Et(t,e,n){for(let i=0;i<Math.max(t.length,e.length);i++)if(void 0===t[i]||void 0===e[i]||!n(t[i],e[i]))return i;return-1}function St(t,e){return t.slice(e).reverse()}function Tt(t,e,n){n=n||function(t,e){return t===e};const i=t.length,o=e.length;if(i>200||o>200||i+o>300)return Tt.fastDiff(t,e,n,!0);let r,s;if(o<i){const n=t;t=e,e=n,r="delete",s="insert"}else r="insert",s="delete";const a=t.length,l=e.length,c=l-a,d={},u={};function h(i){const o=(void 0!==u[i-1]?u[i-1]:-1)+1,c=void 0!==u[i+1]?u[i+1]:-1,h=o>c?-1:1;d[i+h]&&(d[i]=d[i+h].slice(0)),d[i]||(d[i]=[]),d[i].push(o>c?r:s);let g=Math.max(o,c),m=g-i;for(;m<a&&g<l&&n(t[m],e[g]);)m++,g++,d[i].push("equal");return g}let g,m=0;do{for(g=-m;g<c;g++)u[g]=h(g);for(g=c+m;g>c;g--)u[g]=h(g);u[c]=h(c),m++}while(u[c]!==l);return d[c].slice(1)}Tt.fastDiff=At;class It{source;name;path;stop;off;return;constructor(t,e){this.source=t,this.name=e,this.path=[],this.stop=function t(){t.called=!0},this.off=function t(){t.called=!0}}}const Pt=new Array(256).fill("").map((t,e)=>("0"+e.toString(16)).slice(-2));function Mt(){const[t,e,n,i]=crypto.getRandomValues(new Uint32Array(4));return"e"+Pt[255&t]+Pt[t>>8&255]+Pt[t>>16&255]+Pt[t>>24&255]+Pt[255&e]+Pt[e>>8&255]+Pt[e>>16&255]+Pt[e>>24&255]+Pt[255&n]+Pt[n>>8&255]+Pt[n>>16&255]+Pt[n>>24&255]+Pt[255&i]+Pt[i>>8&255]+Pt[i>>16&255]+Pt[i>>24&255]}const Nt={get(t="normal"){return"number"!=typeof t?this[t]||this.normal:t},highest:1e5,high:1e3,normal:0,low:-1e3,lowest:-1e5};function Lt(t,e){const n=Nt.get(e.priority);let i=0,o=t.length;for(;i<o;){const e=i+o>>1;Nt.get(t[e].priority)<n?o=e:i=e+1}t.splice(i,0,e)}class Vt extends Error{context;data;constructor(t,e,n,i){super(function(t,e,n){const i=new WeakSet;return t+(e?` ${JSON.stringify(e,(t,e)=>{if("object"==typeof e&&null!==e){if(i.has(e))return`[object ${e.constructor.name}]`;i.add(e)}return e})}`:"")+Ot(t)+(n?`\nOriginal error: ${n.name}: ${n.message}`:"")}(t,n,i)),this.name="CKEditorError",this.context=e,this.data=n,i&&(this.stack=i.stack)}is(t){return"CKEditorError"===t}static rethrowUnexpectedError(t,e){if(t.is&&t.is("CKEditorError"))throw t;throw new Vt("unexpected-error",e,void 0,t)}}function zt(t,e){console.warn(...Rt(t,e))}function Ot(t){return`\nRead more: https://ckeditor.com/docs/ckeditor5/latest/support/error-codes.html#error-${t}`}function Rt(t,e){const n=Ot(t);return e?[t,e,n]:[t,n]}const Dt=new Date(2025,7,19);if(globalThis.CKEDITOR_VERSION)throw new Vt("ckeditor-duplicated-modules",null);globalThis.CKEDITOR_VERSION="46.0.2";const Bt=Symbol("listeningTo"),Ft=Symbol("emitterId"),jt=Symbol("delegations"),Ht=Ut(Object);function Ut(t){return t?class extends t{on(t,e,n){this.listenTo(this,t,e,n)}once(t,e,n){let i=!1;this.listenTo(this,t,(t,...n)=>{i||(i=!0,t.off(),e.call(this,t,...n))},n)}off(t,e){this.stopListening(this,t,e)}listenTo(t,e,n,i={}){let o,r;this[Bt]||(this[Bt]={});const s=this[Bt];Wt(t)||$t(t);const a=Wt(t);(o=s[a])||(o=s[a]={emitter:t,callbacks:{}}),(r=o.callbacks[e])||(r=o.callbacks[e]=[]),r.push(n),function(t,e,n,i,o){e._addEventListener?e._addEventListener(n,i,o):t._addEventListener.call(e,n,i,o)}(this,t,e,n,i)}stopListening(t,e,n){const i=this[Bt];let o=t&&Wt(t);const r=i&&o?i[o]:void 0,s=r&&e?r.callbacks[e]:void 0;if(!(!i||t&&!r||e&&!s))if(n)Yt(this,t,e,n),-1!==s.indexOf(n)&&(1===s.length?delete r.callbacks[e]:Yt(this,t,e,n));else if(s){for(;n=s.pop();)Yt(this,t,e,n);delete r.callbacks[e]}else if(r){for(e in r.callbacks)this.stopListening(t,e);delete i[o]}else{for(o in i)this.stopListening(i[o].emitter);delete this[Bt]}}fire(t,...e){try{const n=t instanceof It?t:new It(this,t),i=n.name;let o=function(t,e){if(!t._events)return null;let n=e;do{const e=t._events[n];if(e&&e.callbacks&&e.callbacks.length)return e.callbacks;const i=n.lastIndexOf(":");n=i>-1?n.substring(0,i):""}while(n);return null}(this,i);if(n.path.push(this),o){o=o.slice();for(let t=0;t<o.length;t++){const r=o[t].callback;if(r.call(this,n,...e),n.off.called&&(delete n.off.called,this._removeEventListener(i,r)),n.stop.called)break}}const r=this[jt];if(r){const t=r.get(i),o=r.get("*");t&&Qt(t,n,e),o&&Qt(o,n,e)}return n.return}catch(t){Vt.rethrowUnexpectedError(t,this)}}delegate(...t){return{to:(e,n)=>{this[jt]||(this[jt]=new Map),t.forEach(t=>{const i=this[jt].get(t);i?i.set(e,n):this[jt].set(t,new Map([[e,n]]))})}}}stopDelegating(t,e){if(this[jt])if(t)if(e){const n=this[jt].get(t);n&&n.delete(e)}else this[jt].delete(t);else this[jt].clear()}_addEventListener(t,e,n){!function(t,e){const n=qt(t);if(n[e])return;let i=e,o=null;const r=[];for(;""!==i&&!n[i];)n[i]=Kt(),r.push(n[i]),o&&n[i].childEvents.push(o),o=i,i=i.substr(0,i.lastIndexOf(":"));if(""!==i){for(const t of r)t.callbacks=n[i].callbacks.slice();n[i].childEvents.push(o)}}(this,t);const i=Gt(this,t),o={callback:e,priority:Nt.get(n.priority)};for(const t of i)Lt(t,o)}_removeEventListener(t,e){const n=Gt(this,t);for(const t of n)for(let n=0;n<t.length;n++)t[n].callback==e&&(t.splice(n,1),n--)}}:Ht}function $t(t,e){t[Ft]||(t[Ft]=e||Mt())}function Wt(t){return t[Ft]}function qt(t){return t._events||Object.defineProperty(t,"_events",{value:{}}),t._events}function Kt(){return{callbacks:[],childEvents:[]}}function Gt(t,e){const n=qt(t)[e];if(!n)return[];let i=[n.callbacks];for(let e=0;e<n.childEvents.length;e++){const o=Gt(t,n.childEvents[e]);i=i.concat(o)}return i}function Qt(t,e,n){for(let[i,o]of t){o?"function"==typeof o&&(o=o(e.name)):o=e.name;const t=new It(e.source,o);t.path=[...e.path],i.fire(t,...n)}}function Yt(t,e,n,i){e._removeEventListener?e._removeEventListener(n,i):t._removeEventListener.call(e,n,i)}const Jt=Symbol("observableProperties"),Zt=Symbol("boundObservables"),Xt=Symbol("boundProperties"),te=Symbol("decoratedMethods"),ee=Symbol("decoratedOriginal"),ne=ie(Ut());function ie(t){return t?class extends t{set(t,e){if(x(t))return void Object.keys(t).forEach(e=>{this.set(e,t[e])},this);oe(this);const n=this[Jt];if(t in this&&!n.has(t))throw new Vt("observable-set-cannot-override",this);Object.defineProperty(this,t,{enumerable:!0,configurable:!0,get:()=>n.get(t),set(e){const i=n.get(t);let o=this.fire(`set:${t}`,t,e,i);void 0===o&&(o=e),i===o&&n.has(t)||(n.set(t,o),this.fire(`change:${t}`,t,o,i))}}),this[t]=e}bind(...t){if(!t.length||!ae(t))throw new Vt("observable-bind-wrong-properties",this);if(new Set(t).size!==t.length)throw new Vt("observable-bind-duplicate-properties",this);oe(this);const e=this[Xt];t.forEach(t=>{if(e.has(t))throw new Vt("observable-bind-rebind",this)});const n=new Map;return t.forEach(t=>{const i={property:t,to:[]};e.set(t,i),n.set(t,i)}),{to:re,toMany:se,_observable:this,_bindProperties:t,_to:[],_bindings:n}}unbind(...t){if(!this[Jt])return;const e=this[Xt],n=this[Zt];if(t.length){if(!ae(t))throw new Vt("observable-unbind-wrong-properties",this);t.forEach(t=>{const i=e.get(t);i&&(i.to.forEach(([t,e])=>{const o=n.get(t),r=o[e];r.delete(i),r.size||delete o[e],Object.keys(o).length||(n.delete(t),this.stopListening(t,"change"))}),e.delete(t))})}else n.forEach((t,e)=>{this.stopListening(e,"change")}),n.clear(),e.clear()}decorate(t){oe(this);const e=this[t];if(!e)throw new Vt("observablemixin-cannot-decorate-undefined",this,{object:this,methodName:t});this.on(t,(t,n)=>{t.return=e.apply(this,n)}),this[t]=function(...e){return this.fire(t,e)},this[t][ee]=e,this[te]||(this[te]=[]),this[te].push(t)}stopListening(t,e,n){if(!t&&this[te]){for(const t of this[te])this[t]=this[t][ee];delete this[te]}super.stopListening(t,e,n)}[Jt];[te];[Xt];[Zt]}:ne}function oe(t){t[Jt]||(Object.defineProperty(t,Jt,{value:new Map}),Object.defineProperty(t,Zt,{value:new Map}),Object.defineProperty(t,Xt,{value:new Map}))}function re(...t){const e=function(...t){if(!t.length)throw new Vt("observable-bind-to-parse-error",null);const e={to:[]};let n;return"function"==typeof t[t.length-1]&&(e.callback=t.pop()),t.forEach(t=>{if("string"==typeof t)n.properties.push(t);else{if("object"!=typeof t)throw new Vt("observable-bind-to-parse-error",null);n={observable:t,properties:[]},e.to.push(n)}}),e}(...t),n=Array.from(this._bindings.keys()),i=n.length;if(!e.callback&&e.to.length>1)throw new Vt("observable-bind-to-no-callback",this);if(i>1&&e.callback)throw new Vt("observable-bind-to-extra-callback",this);var o;e.to.forEach(t=>{if(t.properties.length&&t.properties.length!==i)throw new Vt("observable-bind-to-properties-length",this);t.properties.length||(t.properties=this._bindProperties)}),this._to=e.to,e.callback&&(this._bindings.get(n[0]).callback=e.callback),o=this._observable,this._to.forEach(t=>{const e=o[Zt];let n;e.get(t.observable)||o.listenTo(t.observable,"change",(i,r)=>{n=e.get(t.observable)[r],n&&n.forEach(t=>{le(o,t.property)})})}),function(t){let e;t._bindings.forEach((n,i)=>{t._to.forEach(o=>{e=o.properties[n.callback?0:t._bindProperties.indexOf(i)],n.to.push([o.observable,e]),function(t,e,n,i){const o=t[Zt],r=o.get(n),s=r||{};s[i]||(s[i]=new Set),s[i].add(e),r||o.set(n,s)}(t._observable,n,o.observable,e)})})}(this),this._bindProperties.forEach(t=>{le(this._observable,t)})}function se(t,e,n){if(this._bindings.size>1)throw new Vt("observable-bind-to-many-not-one-binding",this);this.to(...function(t,e){const n=t.map(t=>[t,e]);return Array.prototype.concat.apply([],n)}(t,e),n)}function ae(t){return t.every(t=>"string"==typeof t)}function le(t,e){const n=t[Xt].get(e);let i;n.callback?i=n.callback.apply(t,n.to.map(t=>t[0][t[1]])):(i=n.to[0],i=i[0][i[1]]),Object.prototype.hasOwnProperty.call(t,e)?t[e]=i:t.set(e,i)}class ce{_replacedElements;constructor(){this._replacedElements=[]}replace(t,e){this._replacedElements.push({element:t,newElement:e}),t.style.display="none",e&&t.parentNode.insertBefore(e,t.nextSibling)}restore(){this._replacedElements.forEach(({element:t,newElement:e})=>{t.style.display="",e&&e.remove()}),this._replacedElements=[]}}function de(t){let e=0;for(const n of t)e++;return e}function ue(t,e){const n=Math.min(t.length,e.length);for(let i=0;i<n;i++)if(t[i]!=e[i])return i;return t.length==e.length?"same":t.length<e.length?"prefix":"extension"}function he(t){return!(!t||!t[Symbol.iterator])}function ge(t,e,n={},i=[]){const o=n&&n.xmlns,r=o?t.createElementNS(o,e):t.createElement(e);for(const t in n)r.setAttribute(t,n[t]);!A(i)&&he(i)||(i=[i]);for(let e of i)A(e)&&(e=t.createTextNode(e)),r.appendChild(e);return r}class me{_config;constructor(t,e){this._config=Object.create(null),e&&this.define(pe(e)),t&&this._setObjectToTarget(this._config,t)}set(t,e){this._setToTarget(this._config,t,e)}define(t,e){this._setToTarget(this._config,t,e,!0)}get(t){return this._getFromSource(this._config,t)}*names(){for(const t of Object.keys(this._config))yield t}_setToTarget(t,e,n,i=!1){if(E(e))return void this._setObjectToTarget(t,e,i);const o=e.split(".");e=o.pop();for(const e of o)E(t[e])||(t[e]=Object.create(null)),t=t[e];if(E(n))return E(t[e])||(t[e]=Object.create(null)),t=t[e],void this._setObjectToTarget(t,n,i);i&&void 0!==t[e]||(t[e]=n)}_getFromSource(t,e){const n=e.split(".");e=n.pop();for(const e of n){if(!E(t[e])){t=null;break}t=t[e]}return t?pe(t[e]):void 0}_setObjectToTarget(t,e,n){Object.keys(e).forEach(i=>{this._setToTarget(t,i,e[i],n)})}}function pe(t){return et(t,fe)}function fe(t){return it(t)||"function"==typeof t?t:void 0}function be(t){if(t){if(t.defaultView)return t instanceof t.defaultView.Document;if(t.ownerDocument&&t.ownerDocument.defaultView)return t instanceof t.ownerDocument.defaultView.Node}return!1}function ke(t){const e=Object.prototype.toString.apply(t);return"[object Window]"==e||"[object global]"==e}const we=_e(Ut());function _e(t){return t?class extends t{listenTo(t,e,n,i={}){if(be(t)||ke(t)||t instanceof gt.window.EventTarget){const o={capture:!!i.useCapture,passive:!!i.usePassive},r=this._getProxyEmitter(t,o)||new ve(t,o);this.listenTo(r,e,n,i)}else super.listenTo(t,e,n,i)}stopListening(t,e,n){if(be(t)||ke(t)||t instanceof gt.window.EventTarget){const i=this._getAllProxyEmitters(t);for(const t of i)this.stopListening(t,e,n)}else super.stopListening(t,e,n)}_getProxyEmitter(t,e){return function(t,e){const n=t[Bt];return n&&n[e]?n[e].emitter:null}(this,ye(t,e))}_getAllProxyEmitters(t){return[{capture:!1,passive:!1},{capture:!1,passive:!0},{capture:!0,passive:!1},{capture:!0,passive:!0}].map(e=>this._getProxyEmitter(t,e)).filter(t=>!!t)}}:we}class ve extends(Ut()){_domNode;_options;constructor(t,e){super(),$t(this,ye(t,e)),this._domNode=t,this._options=e}_domListeners;attach(t){if(this._domListeners&&this._domListeners[t])return;const e=this._createDomListener(t);this._domNode.addEventListener(t,e,this._options),this._domListeners||(this._domListeners={}),this._domListeners[t]=e}detach(t){let e;!this._domListeners[t]||(e=this._events[t])&&e.callbacks.length||this._domListeners[t].removeListener()}_addEventListener(t,e,n){this.attach(t),Ut().prototype._addEventListener.call(this,t,e,n)}_removeEventListener(t,e){Ut().prototype._removeEventListener.call(this,t,e),this.detach(t)}_createDomListener(t){const e=e=>{this.fire(t,e)};return e.removeListener=()=>{this._domNode.removeEventListener(t,e,this._options),delete this._domListeners[t]},e}}function ye(t,e){let n=function(t){return t["data-ck-expando"]||(t["data-ck-expando"]=Mt())}(t);for(const t of Object.keys(e).sort())e[t]&&(n+="-"+t);return n}function Ce(t){const e=t.ownerDocument.defaultView.getComputedStyle(t);return{top:parseInt(e.borderTopWidth,10),right:parseInt(e.borderRightWidth,10),bottom:parseInt(e.borderBottomWidth,10),left:parseInt(e.borderLeftWidth,10)}}function xe(t){if(!t.target)return null;const e=t.target.ownerDocument,n=t.clientX,i=t.clientY;let o=null;return e.caretRangeFromPoint&&e.caretRangeFromPoint(n,i)?o=e.caretRangeFromPoint(n,i):t.rangeParent&&(o=e.createRange(),o.setStart(t.rangeParent,t.rangeOffset),o.collapse(!0)),o}function Ae(t){return t&&t.parentNode?t.offsetParent===gt.document.body?null:t.offsetParent:null}function Ee(t){return"[object Text]"==Object.prototype.toString.call(t)}function Se(t){return"[object Range]"==Object.prototype.toString.apply(t)}const Te=["top","right","bottom","left","width","height"];class Ie{top;right;bottom;left;width;height;_source;constructor(t){const e=Se(t);if(Object.defineProperty(this,"_source",{value:t._source||t,writable:!0,enumerable:!1}),Ne(t)||e)if(e){const e=Ie.getDomRangeRects(t);Pe(this,Ie.getBoundingRect(e))}else Pe(this,t.getBoundingClientRect());else if(ke(t)){const{innerWidth:e,innerHeight:n}=t;Pe(this,{top:0,right:e,bottom:n,left:0,width:e,height:n})}else Pe(this,t)}clone(){return new Ie(this)}moveTo(t,e){return this.top=e,this.right=t+this.width,this.bottom=e+this.height,this.left=t,this}moveBy(t,e){return this.top+=e,this.right+=t,this.left+=t,this.bottom+=e,this}getIntersection(t){const e={top:Math.max(this.top,t.top),right:Math.min(this.right,t.right),bottom:Math.min(this.bottom,t.bottom),left:Math.max(this.left,t.left),width:0,height:0};if(e.width=e.right-e.left,e.height=e.bottom-e.top,e.width<0||e.height<0)return null;{const t=new Ie(e);return t._source=this._source,t}}getIntersectionArea(t){const e=this.getIntersection(t);return e?e.getArea():0}getArea(){return this.width*this.height}getVisible(){const t=this._source;let e=this.clone();if(Me(t))return e;let n,i=t,o=t.parentNode||t.commonAncestorContainer;for(;o&&!Me(o);){const t="visible"===Ve(o);i instanceof HTMLElement&&"absolute"===Le(i)&&(n=i);const r=Le(o);if(t||n&&("relative"===r&&t||"relative"!==r)){i=o,o=o.parentNode;continue}const s=new Ie(o),a=e.getIntersection(s);if(!a)return null;a.getArea()<e.getArea()&&(e=a),i=o,o=o.parentNode}return e}isEqual(t){for(const e of Te)if(this[e]!==t[e])return!1;return!0}contains(t){const e=this.getIntersection(t);return!(!e||!e.isEqual(t))}toAbsoluteRect(){const{scrollX:t,scrollY:e}=gt.window,n=this.clone().moveBy(t,e);if(Ne(n._source)){const t=Ae(n._source);t&&function(t,e){const n=new Ie(e),i=Ce(e);let o=0,r=0;o-=n.left,r-=n.top,o+=e.scrollLeft,r+=e.scrollTop,o-=i.left,r-=i.top,t.moveBy(o,r)}(n,t)}return n}excludeScrollbarsAndBorders(){const t=this._source;let e,n,i;if(ke(t))e=t.innerWidth-t.document.documentElement.clientWidth,n=t.innerHeight-t.document.documentElement.clientHeight,i=t.getComputedStyle(t.document.documentElement).direction;else{const o=Ce(t);e=t.offsetWidth-t.clientWidth-o.left-o.right,n=t.offsetHeight-t.clientHeight-o.top-o.bottom,i=t.ownerDocument.defaultView.getComputedStyle(t).direction,this.left+=o.left,this.top+=o.top,this.right-=o.right,this.bottom-=o.bottom,this.width=this.right-this.left,this.height=this.bottom-this.top}return this.width-=e,"ltr"===i?this.right-=e:this.left+=e,this.height-=n,this.bottom-=n,this}static getDomRangeRects(t){const e=[],n=Array.from(t.getClientRects());if(n.length)for(const t of n)e.push(new Ie(t));else{let n=t.startContainer;Ee(n)&&(n=n.parentNode);const i=new Ie(n.getBoundingClientRect());i.right=i.left,i.width=0,e.push(i)}return e}static getBoundingRect(t){const e={left:Number.POSITIVE_INFINITY,top:Number.POSITIVE_INFINITY,right:Number.NEGATIVE_INFINITY,bottom:Number.NEGATIVE_INFINITY,width:0,height:0};let n=0;for(const i of t)n++,e.left=Math.min(e.left,i.left),e.top=Math.min(e.top,i.top),e.right=Math.max(e.right,i.right),e.bottom=Math.max(e.bottom,i.bottom);return 0==n?null:(e.width=e.right-e.left,e.height=e.bottom-e.top,new Ie(e))}}function Pe(t,e){for(const n of Te)t[n]=e[n]}function Me(t){return!!Ne(t)&&t===t.ownerDocument.body}function Ne(t){return null!==t&&"object"==typeof t&&1===t.nodeType&&"function"==typeof t.getBoundingClientRect}function Le(t){return t instanceof HTMLElement?t.ownerDocument.defaultView.getComputedStyle(t).position:"static"}function Ve(t){return t instanceof HTMLElement?t.ownerDocument.defaultView.getComputedStyle(t).overflow:"visible"}class ze{_element;_callback;static _observerInstance=null;static _elementCallbacks=null;constructor(t,e){ze._observerInstance||ze._createObserver(),this._element=t,this._callback=e,ze._addElementCallback(t,e),ze._observerInstance.observe(t)}get element(){return this._element}destroy(){ze._deleteElementCallback(this._element,this._callback)}static _addElementCallback(t,e){ze._elementCallbacks||(ze._elementCallbacks=new Map);let n=ze._elementCallbacks.get(t);n||(n=new Set,ze._elementCallbacks.set(t,n)),n.add(e)}static _deleteElementCallback(t,e){const n=ze._getElementCallbacks(t);n&&(n.delete(e),n.size||(ze._elementCallbacks.delete(t),ze._observerInstance.unobserve(t))),ze._elementCallbacks&&!ze._elementCallbacks.size&&(ze._observerInstance=null,ze._elementCallbacks=null)}static _getElementCallbacks(t){return ze._elementCallbacks?ze._elementCallbacks.get(t):null}static _createObserver(){ze._observerInstance=new gt.window.ResizeObserver(t=>{for(const e of t){const t=ze._getElementCallbacks(e.target);if(t)for(const n of t)n(e)}})}}function Oe(t,e){t instanceof HTMLTextAreaElement&&(t.value=e),t.innerHTML=e}function Re(t){return e=>e+t}function De(t){let e=0;for(;t.previousSibling;)t=t.previousSibling,e++;return e}function Be(t,e,n){t.insertBefore(n,t.childNodes[e]||null)}function Fe(t){return t&&t.nodeType===Node.COMMENT_NODE}function je(t){try{gt.document.createAttribute(t)}catch{return!1}return!0}function He(t){return!!t&&(Ee(t)?He(t.parentElement):!!t.getClientRects&&!!t.getClientRects().length)}function Ue({element:t,target:e,positions:n,limiter:i,fitInViewport:o,viewportOffsetConfig:r}){ot(e)&&(e=e()),ot(i)&&(i=i());const s=Ae(t),a=function(t){t=Object.assign({top:0,bottom:0,left:0,right:0},t);const e=new Ie(gt.window);return e.top+=t.top,e.height-=t.top,e.bottom-=t.bottom,e.height-=t.bottom,e}(r),l=new Ie(t),c=$e(e,a);let d;if(!c||!a.getIntersection(c))return null;const u={targetRect:c,elementRect:l,positionedElementAncestor:s,viewportRect:a};if(i||o){if(i){const t=$e(i,a);t&&(u.limiterRect=t)}d=function(t,e){const{elementRect:n}=e,i=n.getArea(),o=t.map(t=>new We(t,e)).filter(t=>!!t.name);let r=0,s=null;for(const t of o){const{limiterIntersectionArea:e,viewportIntersectionArea:n}=t;if(e===i)return t;const o=n**2+e**2;o>r&&(r=o,s=t)}return s}(n,u)}else d=new We(n[0],u);return d}function $e(t,e){const n=new Ie(t).getVisible();return n?n.getIntersection(e):null}class We{name;config;_positioningFunctionCoordinates;_options;_cachedRect;_cachedAbsoluteRect;constructor(t,e){const n=t(e.targetRect,e.elementRect,e.viewportRect,e.limiterRect);if(!n)return;const{left:i,top:o,name:r,config:s}=n;this.name=r,this.config=s,this._positioningFunctionCoordinates={left:i,top:o},this._options=e}get left(){return this._absoluteRect.left}get top(){return this._absoluteRect.top}get limiterIntersectionArea(){const t=this._options.limiterRect;return t?t.getIntersectionArea(this._rect):0}get viewportIntersectionArea(){return this._options.viewportRect.getIntersectionArea(this._rect)}get _rect(){return this._cachedRect||(this._cachedRect=this._options.elementRect.clone().moveTo(this._positioningFunctionCoordinates.left,this._positioningFunctionCoordinates.top)),this._cachedRect}get _absoluteRect(){return this._cachedAbsoluteRect||(this._cachedAbsoluteRect=this._rect.toAbsoluteRect()),this._cachedAbsoluteRect}}function qe(t){const e=t.parentNode;e&&e.removeChild(t)}function Ke(){const t=gt.window.visualViewport;return t&&(ft.isiOS||ft.isSafari)?{left:Math.max(Math.round(t.offsetLeft),0),top:Math.max(Math.round(t.offsetTop),0)}:{left:0,top:0}}function Ge({window:t,rect:e,alignToTop:n,forceScroll:i,viewportOffset:o}){const r=e.clone().moveBy(0,o.bottom),s=e.clone().moveBy(0,-o.top),a=new Ie(t).excludeScrollbarsAndBorders(),l=n&&i,c=[s,r].every(t=>a.contains(t));let{scrollX:d,scrollY:u}=t;const h=d,g=u;l?u-=a.top-e.top+o.top:c||(Je(s,a)?u-=a.top-e.top+o.top:Ye(r,a)&&(u+=n?e.top-a.top-o.top:e.bottom-a.bottom+o.bottom)),c||(Ze(e,a)?d-=a.left-e.left+o.left:Xe(e,a)&&(d+=e.right-a.right+o.right)),d==h&&u===g||t.scrollTo(d,u)}function Qe({parent:t,getRect:e,alignToTop:n,forceScroll:i,ancestorOffset:o=0,limiterElement:r}){const s=tn(t),a=n&&i;let l,c,d;const u=r||s.document.body;for(;t!=u;)c=e(),l=new Ie(t).excludeScrollbarsAndBorders(),d=l.contains(c),a?t.scrollTop-=l.top-c.top+o:d||(Je(c,l)?t.scrollTop-=l.top-c.top+o:Ye(c,l)&&(t.scrollTop+=n?c.top-l.top-o:c.bottom-l.bottom+o)),d||(Ze(c,l)?t.scrollLeft-=l.left-c.left+o:Xe(c,l)&&(t.scrollLeft+=c.right-l.right+o)),t=t.parentNode}function Ye(t,e){return t.bottom>e.bottom}function Je(t,e){return t.top<e.top}function Ze(t,e){return t.left<e.left}function Xe(t,e){return t.right>e.right}function tn(t){return Se(t)?t.startContainer.ownerDocument.defaultView:t.ownerDocument.defaultView}function en(t){if(Se(t)){let e=t.commonAncestorContainer;return Ee(e)&&(e=e.parentNode),e}return t.parentNode}function nn(t,e){const n=tn(t),i=new Ie(t);if(n===e)return i;{let t=n;for(;t!=e;){const e=t.frameElement,n=new Ie(e).excludeScrollbarsAndBorders();i.moveBy(n.left,n.top),t=t.parent}}return i}const on={ctrl:"⌃",cmd:"⌘",alt:"⌥",shift:"⇧"},rn={ctrl:"Ctrl+",alt:"Alt+",shift:"Shift+"},sn={37:"←",38:"↑",39:"→",40:"↓",9:"⇥",33:"Page Up",34:"Page Down"},an=gn(),ln=Object.fromEntries(Object.entries(an).map(([t,e])=>{let n;return n=e in sn?sn[e]:t.charAt(0).toUpperCase()+t.slice(1),[e,n]}));function cn(t){let e;if("string"==typeof t){if(e=an[t.toLowerCase()],!e)throw new Vt("keyboard-unknown-key",null,{key:t})}else e=t.keyCode+(t.altKey?an.alt:0)+(t.ctrlKey?an.ctrl:0)+(t.shiftKey?an.shift:0)+(t.metaKey?an.cmd:0);return e}function dn(t){return"string"==typeof t&&(t=function(t){return t.split("+").map(t=>t.trim())}(t)),t.map(t=>"string"==typeof t?function(t){if(t.endsWith("!"))return cn(t.slice(0,-1));const e=cn(t);return(ft.isMac||ft.isiOS)&&e==an.ctrl?an.cmd:e}(t):t).reduce((t,e)=>e+t,0)}function un(t,e){let n=dn(t);const i=e?"Mac"===e:ft.isMac||ft.isiOS;return Object.entries(i?on:rn).reduce((t,[e,i])=>(0!=(n&an[e])&&(n&=~an[e],t+=i),t),"")+(n?ln[n]:"")}function hn(t,e){const n="ltr"===e;switch(t){case an.arrowleft:return n?"left":"right";case an.arrowright:return n?"right":"left";case an.arrowup:return"up";case an.arrowdown:return"down"}}function gn(){const t={pageup:33,pagedown:34,end:35,home:36,arrowleft:37,arrowup:38,arrowright:39,arrowdown:40,backspace:8,delete:46,enter:13,space:32,esc:27,tab:9,ctrl:1114112,shift:2228224,alt:4456448,cmd:8912896};for(let e=65;e<=90;e++)t[String.fromCharCode(e).toLowerCase()]=e;for(let e=48;e<=57;e++)t[e-48]=e;for(let e=112;e<=123;e++)t["f"+(e-111)]=e;return Object.assign(t,{"'":222,",":108,"-":109,".":110,"/":111,";":186,"=":187,"[":219,"\\":220,"]":221,"`":223}),t}const mn=["ar","ara","dv","div","fa","per","fas","he","heb","ku","kur","ug","uig","ur","urd"];function pn(t){return mn.includes(t)?"rtl":"ltr"}function fn(t){return Array.isArray(t)?t:[t]}gt.window.CKEDITOR_TRANSLATIONS||(gt.window.CKEDITOR_TRANSLATIONS={});class bn{uiLanguage;uiLanguageDirection;contentLanguage;contentLanguageDirection;t;translations;constructor({uiLanguage:t="en",contentLanguage:e,translations:n}={}){this.uiLanguage=t,this.contentLanguage=e||this.uiLanguage,this.uiLanguageDirection=pn(this.uiLanguage),this.contentLanguageDirection=pn(this.contentLanguage),this.translations=function(t){return Array.isArray(t)?t.reduce((t,e)=>ht(t,e)):t}(n),this.t=(t,e)=>this._t(t,e)}_t(t,e=[]){e=fn(e),"string"==typeof t&&(t={string:t});const n=t.plural?e[0]:1;return function(t,e){return t.replace(/%(\d+)/g,(t,n)=>n<e.length?e[n]:t)}(function(t,e,n=1,i){if("number"!=typeof n)throw new Vt("translation-service-quantity-not-a-number",null,{quantity:n});const o=i||gt.window.CKEDITOR_TRANSLATIONS,r=function(t){return Object.keys(t).length}(o);1===r&&(t=Object.keys(o)[0]);const s=e.id||e.string;if(0===r||!function(t,e,n){return!!n[t]&&!!n[t].dictionary[e]}(t,s,o))return 1!==n?e.plural:e.string;const a=o[t].dictionary,l=o[t].getPluralForm||(t=>1===t?0:1),c=a[s];return"string"==typeof c?c:c[Number(l(n))]}(this.uiLanguage,t,n,this.translations),e)}}class kn extends(Ut()){_items;_itemMap;_idProperty;_bindToCollection;_bindToExternalToInternalMap;_bindToInternalToExternalMap;_skippedIndexesFromExternal;constructor(t={},e={}){super();const n=he(t);if(n||(e=t),this._items=[],this._itemMap=new Map,this._idProperty=e.idProperty||"id",this._bindToExternalToInternalMap=new WeakMap,this._bindToInternalToExternalMap=new WeakMap,this._skippedIndexesFromExternal=[],n)for(const e of t)this._items.push(e),this._itemMap.set(this._getItemIdBeforeAdding(e),e)}get length(){return this._items.length}get first(){return this._items[0]||null}get last(){return this._items[this.length-1]||null}add(t,e){return this.addMany([t],e)}addMany(t,e){if(void 0===e)e=this._items.length;else if(e>this._items.length||e<0)throw new Vt("collection-add-item-invalid-index",this);let n=0;for(const i of t){const t=this._getItemIdBeforeAdding(i),o=e+n;this._items.splice(o,0,i),this._itemMap.set(t,i),this.fire("add",i,o),n++}return this.fire("change",{added:t,removed:[],index:e}),this}get(t){let e;if("string"==typeof t)e=this._itemMap.get(t);else{if("number"!=typeof t)throw new Vt("collection-get-invalid-arg",this);e=this._items[t]}return e||null}has(t){if("string"==typeof t)return this._itemMap.has(t);{const e=t[this._idProperty];return e&&this._itemMap.has(e)}}getIndex(t){let e;return e="string"==typeof t?this._itemMap.get(t):t,e?this._items.indexOf(e):-1}remove(t){const[e,n]=this._remove(t);return this.fire("change",{added:[],removed:[e],index:n}),e}map(t,e){return this._items.map(t,e)}forEach(t,e){this._items.forEach(t,e)}find(t,e){return this._items.find(t,e)}filter(t,e){return this._items.filter(t,e)}clear(){this._bindToCollection&&(this.stopListening(this._bindToCollection),this._bindToCollection=null);const t=Array.from(this._items);for(;this.length;)this._remove(0);this.fire("change",{added:[],removed:t,index:0})}bindTo(t){if(this._bindToCollection)throw new Vt("collection-bind-to-rebind",this);return this._bindToCollection=t,{as:t=>{this._setUpBindToBinding(e=>new t(e))},using:t=>{"function"==typeof t?this._setUpBindToBinding(t):this._setUpBindToBinding(e=>e[t])}}}_setUpBindToBinding(t){const e=this._bindToCollection,n=(n,i,o)=>{const r=e._bindToCollection==this,s=e._bindToInternalToExternalMap.get(i);if(r&&s)this._bindToExternalToInternalMap.set(i,s),this._bindToInternalToExternalMap.set(s,i);else{const n=t(i);if(!n)return void this._skippedIndexesFromExternal.push(o);let r=o;for(const t of this._skippedIndexesFromExternal)o>t&&r--;for(const t of e._skippedIndexesFromExternal)r>=t&&r++;this._bindToExternalToInternalMap.set(i,n),this._bindToInternalToExternalMap.set(n,i),this.add(n,r);for(let t=0;t<e._skippedIndexesFromExternal.length;t++)r<=e._skippedIndexesFromExternal[t]&&e._skippedIndexesFromExternal[t]++}};for(const t of e)n(0,t,e.getIndex(t));this.listenTo(e,"add",n),this.listenTo(e,"remove",(t,e,n)=>{const i=this._bindToExternalToInternalMap.get(e);i&&this.remove(i),this._skippedIndexesFromExternal=this._skippedIndexesFromExternal.reduce((t,e)=>(n<e&&t.push(e-1),n>e&&t.push(e),t),[])})}_getItemIdBeforeAdding(t){const e=this._idProperty;let n;if(e in t){if(n=t[e],"string"!=typeof n)throw new Vt("collection-add-invalid-id",this);if(this.get(n))throw new Vt("collection-add-item-already-exists",this)}else t[e]=n=Mt();return n}_remove(t){let e,n,i,o=!1;const r=this._idProperty;if("string"==typeof t?(n=t,i=this._itemMap.get(n),o=!i,i&&(e=this._items.indexOf(i))):"number"==typeof t?(e=t,i=this._items[e],o=!i,i&&(n=i[r])):(i=t,n=i[r],e=this._items.indexOf(i),o=-1==e||!this._itemMap.get(n)),o)throw new Vt("collection-remove-404",this);this._items.splice(e,1),this._itemMap.delete(n);const s=this._bindToInternalToExternalMap.get(i);return this._bindToInternalToExternalMap.delete(i),this._bindToExternalToInternalMap.delete(s),this.fire("remove",i,e),[i,e]}[Symbol.iterator](){return this._items[Symbol.iterator]()}}function wn(t){const e=t.next();return e.done?null:e.value}class _n extends(_e(ie())){_elements=new Set;_externalViews=new Set;_blurTimeout=null;constructor(){super(),this.set("isFocused",!1),this.set("focusedElement",null)}get elements(){return Array.from(this._elements.values())}get externalViews(){return Array.from(this._externalViews.values())}add(t){if(yn(t))this._addElement(t);else if(vn(t))this._addView(t);else{if(!t.element)throw new Vt("focustracker-add-view-missing-element",{focusTracker:this,view:t});this._addElement(t.element)}}remove(t){yn(t)?this._removeElement(t):vn(t)?this._removeView(t):this._removeElement(t.element)}_addElement(t){if(this._elements.has(t))throw new Vt("focustracker-add-element-already-exist",this);this.listenTo(t,"focus",()=>{const e=this.externalViews.find(e=>function(t,e){return!!Cn(t,e)||!!e.focusTracker.externalViews.find(e=>Cn(t,e))}(t,e));e?this._focus(e.element):this._focus(t)},{useCapture:!0}),this.listenTo(t,"blur",()=>{this._blur()},{useCapture:!0}),this._elements.add(t)}_removeElement(t){this._elements.has(t)&&(this.stopListening(t),this._elements.delete(t)),t===this.focusedElement&&this._blur()}_addView(t){t.element&&this._addElement(t.element),this.listenTo(t.focusTracker,"change:focusedElement",()=>{t.focusTracker.focusedElement?t.element&&this._focus(t.element):this._blur()}),this._externalViews.add(t)}_removeView(t){t.element&&this._removeElement(t.element),this.stopListening(t.focusTracker),this._externalViews.delete(t)}destroy(){this.stopListening(),this._elements.clear(),this._externalViews.clear(),this.isFocused=!1,this.focusedElement=null}_focus(t){this._clearBlurTimeout(),this.focusedElement=t,this.isFocused=!0}_blur(){this.elements.find(t=>t.contains(document.activeElement))||this.externalViews.find(t=>t.focusTracker.isFocused&&!t.focusTracker._blurTimeout)||(this._clearBlurTimeout(),this._blurTimeout=setTimeout(()=>{this.focusedElement=null,this.isFocused=!1},0))}_clearBlurTimeout(){clearTimeout(this._blurTimeout),this._blurTimeout=null}}function vn(t){return"focusTracker"in t&&t.focusTracker instanceof _n}function yn(t){return it(t)}function Cn(t,e){return!!e.element&&e.element.contains(document.activeElement)&&t.contains(e.element)}class xn{_listener;constructor(){this._listener=new(_e())}listenTo(t){this._listener.listenTo(t,"keydown",(t,e)=>{this._listener.fire("_keydown:"+cn(e),e)})}set(t,e,n={}){const i=dn(t),o=n.priority;this._listener.listenTo(this._listener,"_keydown:"+i,(t,i)=>{n.filter&&!n.filter(i)||(e(i,()=>{i.preventDefault(),i.stopPropagation(),t.stop()}),t.return=!0)},{priority:o})}press(t){return!!this._listener.fire("_keydown:"+cn(t),t)}stopListening(t){this._listener.stopListening(t)}destroy(){this.stopListening()}}function An(t){return he(t)?new Map(t):function(t){const e=new Map;for(const n in t)e.set(n,t[n]);return e}(t)}function En(t,e,n){const i=t.length,o=e.length;for(let e=i-1;e>=n;e--)t[e+o]=t[e];for(let i=0;i<o;i++)t[n+i]=e[i]}function Sn(t,e){let n;function i(...o){i.cancel(),n=setTimeout(()=>t(...o),e)}return i.cancel=()=>{clearTimeout(n)},i}function Tn(t){try{if(!t.startsWith("ey"))return null;const e=atob(t.replace(/-/g,"+").replace(/_/g,"/"));return JSON.parse(e)}catch{return null}}function In(t,e,n="    "){return`${n.repeat(Math.max(0,e))}${t}\n`}function Pn(t,e){return!!(n=t.charAt(e-1))&&1==n.length&&/[\ud800-\udbff]/.test(n)&&function(t){return!!t&&1==t.length&&/[\udc00-\udfff]/.test(t)}(t.charAt(e));var n}function Mn(t,e){return!!(n=t.charAt(e))&&1==n.length&&/[\u0300-\u036f\u1ab0-\u1aff\u1dc0-\u1dff\u20d0-\u20ff\ufe20-\ufe2f]/.test(n);var n}const Nn=Vn();function Ln(t,e){const n=String(t).matchAll(Nn);return Array.from(n).some(t=>t.index<e&&e<t.index+t[0].length)}function Vn(){const t=/\p{Regional_Indicator}{2}/u.source,e="(?:"+[/\p{Emoji}[\u{E0020}-\u{E007E}]+\u{E007F}/u,/\p{Emoji}\u{FE0F}?\u{20E3}/u,/\p{Emoji}\u{FE0F}/u,/(?=\p{General_Category=Other_Symbol})\p{Emoji}\p{Emoji_Modifier}*/u].map(t=>t.source).join("|")+")";return new RegExp(`${t}|${e}(?:‍${e})*`,"ug")}function zn(t){switch(typeof t){case"number":case"symbol":return!1;case"string":return t.includes(".")||t.includes("[")||t.includes("]")}}function On(t){return"string"==typeof t||"symbol"==typeof t?t:Object.is(t?.valueOf?.(),-0)?"-0":String(t)}function Rn(t){const e=[],n=t.length;if(0===n)return e;let i=0,o="",r="",s=!1;for(46===t.charCodeAt(0)&&(e.push(""),i++);i<n;){const a=t[i];r?"\\"===a&&i+1<n?(i++,o+=t[i]):a===r?r="":o+=a:s?'"'===a||"'"===a?r=a:"]"===a?(s=!1,e.push(o),o=""):o+=a:"["===a?(s=!0,o&&(e.push(o),o="")):"."===a?o&&(e.push(o),o=""):o+=a,i++}return o&&e.push(o),e}function Dn(t,e,n){if(null==t)return n;switch(typeof e){case"string":{if(st(e))return n;const i=t[e];return void 0===i?zn(e)?Dn(t,Rn(e),n):n:i}case"number":case"symbol":{"number"==typeof e&&(e=On(e));const i=t[e];return void 0===i?n:i}default:{if(Array.isArray(e))return function(t,e,n){if(0===e.length)return n;let i=t;for(let t=0;t<e.length;t++){if(null==i)return n;if(st(e[t]))return n;i=i[e[t]]}return void 0===i?n:i}(t,e,n);if(st(e=Object.is(e?.valueOf(),-0)?"-0":String(e)))return n;const i=t[e];return void 0===i?n:i}}}function Bn(t,e){return t===e||Number.isNaN(t)&&Number.isNaN(e)}const Fn=(t,e,n)=>{const i=t[e];Object.hasOwn(t,e)&&Bn(i,n)&&(void 0!==n||e in t)||(t[e]=n)},jn=/^(?:0|[1-9]\d*)$/;function Hn(t,e=Number.MAX_SAFE_INTEGER){switch(typeof t){case"number":return Number.isInteger(t)&&t>=0&&t<e;case"symbol":return!1;case"string":return jn.test(t)}}function Un(t){return"symbol"==typeof t||t instanceof Symbol}const $n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Wn=/^\w*$/;function qn(t,e,n){return function(t,e,n,i){if(null==t&&!x(t))return t;const o=(r=e,s=t,!Array.isArray(r)&&("number"==typeof r||"boolean"==typeof r||null==r||Un(r)||"string"==typeof r&&(Wn.test(r)||!$n.test(r))||null!=s&&Object.hasOwn(s,r))?[e]:Array.isArray(e)?e:"string"==typeof e?Rn(e):[e]);var r,s;let a=t;for(let e=0;e<o.length&&null!=a;e++){const r=On(o[e]);if(st(r))continue;let s;if(e===o.length-1)s=n(a[r]);else{const n=a[r],l=i?.(n,r,t);s=void 0!==l?l:x(n)?n:Hn(o[e+1])?[]:{}}Fn(a,r,s),a=a[r]}return t}(t,e,()=>n,()=>{})}function Kn(t){if(J(t))return t;const e=T(t);if(!function(t){switch(T(t)){case L:case D:case B:case j:case N:case z:case Q:case Y:case q:case K:case G:case O:case M:case F:case I:case R:case P:case V:case H:case U:case $:case W:return!0;default:return!1}}(t))return{};if(n=t,Array.isArray(n)){const e=Array.from(t);return t.length>0&&"string"==typeof t[0]&&Object.hasOwn(t,"index")&&(e.index=t.index,e.input=t.input),e}var n;if(lt(t)){const e=t;return new(0,e.constructor)(e.buffer,e.byteOffset,e.length)}if(e===B)return new ArrayBuffer(t.byteLength);if(e===j){const e=t,n=e.buffer,i=e.byteOffset,o=e.byteLength,r=new ArrayBuffer(o),s=new Uint8Array(n,i,o);return new Uint8Array(r).set(s),new DataView(r)}if(e===N||e===M||e===P){const n=new(0,t.constructor)(t.valueOf());return e===P?function(t,e){const n=e.valueOf().length;for(const i in e)Object.hasOwn(e,i)&&(Number.isNaN(Number(i))||Number(i)>=n)&&(t[i]=e[i])}(n,t):Gn(n,t),n}if(e===z)return new Date(Number(t));if(e===I){const e=t,n=new RegExp(e.source,e.flags);return n.lastIndex=e.lastIndex,n}if(e===V)return Object(Symbol.prototype.valueOf.call(t));if(e===O){const e=t,n=new Map;return e.forEach((t,e)=>{n.set(e,t)}),n}if(e===R){const e=t,n=new Set;return e.forEach(t=>{n.add(t)}),n}if(e===L){const e=t,n={};return Gn(n,e),n.length=e.length,n[Symbol.iterator]=e[Symbol.iterator],n}const i={};return function(t,e){const n=Object.getPrototypeOf(e);null!==n&&"function"==typeof e.constructor&&Object.setPrototypeOf(t,n)}(i,t),Gn(i,t),function(t,e){const n=Object.getOwnPropertySymbols(e);for(let i=0;i<n.length;i++){const o=n[i];Object.prototype.propertyIsEnumerable.call(e,o)&&(t[o]=e[o])}}(i,t),i}function Gn(t,e){for(const n in e)Object.hasOwn(e,n)&&(t[n]=e[n])}function Qn(t,e){if((t=function(t){const e=function(t){return t?(t=function(t){return Un(t)?NaN:Number(t)}(t))===1/0||t===-1/0?(t<0?-1:1)*Number.MAX_VALUE:t==t?t:0:0===t?t:0}(t),n=e%1;return n?e-n:e}(t))<1||!Number.isSafeInteger(t))return[];const n=new Array(t);for(let i=0;i<t;i++)n[i]="function"==typeof e?e(i):i;return n}function Yn(t){if(null==t)return[];switch(typeof t){case"object":case"function":return null!=(e=t)&&"function"!=typeof e&&function(t){return Number.isSafeInteger(t)&&t>=0}(e.length)?function(t){const e=Qn(t.length,t=>`${t}`),n=new Set(e);var i;return i=t,"undefined"!=typeof Buffer&&Buffer.isBuffer(i)&&(n.add("offset"),n.add("parent")),lt(t)&&(n.add("buffer"),n.add("byteLength"),n.add("byteOffset")),[...e,...Jn(t).filter(t=>!n.has(t))]}(t):function(t){const e=t?.constructor;return t===("function"==typeof e?e.prototype:Object.prototype)}(t)?function(t){return Jn(t).filter(t=>"constructor"!==t)}(t):Jn(t);default:return Jn(Object(t))}var e}function Jn(t){const e=[];for(const n in t)e.push(n);return e}function Zn(t,...e){for(let n=0;n<e.length;n++)Xn(t,e[n]);return t}function Xn(t,e){const n=Yn(e);for(let i=0;i<n.length;i++){const o=n[i];o in t&&Bn(t[o],e[o])||(t[o]=e[o])}}function ti(t,e=0,n={}){"object"!=typeof n&&(n={});const{leading:i=!1,trailing:o=!0,maxWait:r}=n,s=Array(2);let a;i&&(s[0]="leading"),o&&(s[1]="trailing");let l=null;const c=function(t,e,{signal:n,edges:i}={}){let o,r=null;const s=null!=i&&i.includes("leading"),a=null==i||i.includes("trailing"),l=()=>{null!==r&&(t.apply(o,r),o=void 0,r=null)};let c=null;const d=()=>{null!=c&&clearTimeout(c),c=setTimeout(()=>{c=null,a&&l(),h()},e)},u=()=>{null!==c&&(clearTimeout(c),c=null)},h=()=>{u(),o=void 0,r=null},g=function(...t){if(n?.aborted)return;o=this,r=t;const e=null==c;d(),s&&e&&l()};return g.schedule=d,g.cancel=h,g.flush=()=>{u(),l()},n?.addEventListener("abort",h,{once:!0}),g}(function(...e){a=t.apply(this,e),l=null},e,{edges:s}),d=function(...e){return null!=r&&(null===l&&(l=Date.now()),Date.now()-l>=r)?(a=t.apply(this,e),l=Date.now(),c.cancel(),c.schedule(),a):(c.apply(this,e),a)};return d.cancel=c.cancel,d.flush=()=>(c.flush(),a),d}function ei(t){if(!t||"object"!=typeof t)return!1;const e=Object.getPrototypeOf(t);return!(null!==e&&e!==Object.prototype&&null!==Object.getPrototypeOf(e))&&"[object Object]"===Object.prototype.toString.call(t)}function ni(t,e,n){return ii(t,e,void 0,void 0,void 0,void 0,n)}function ii(t,e,n,i,o,r,s){const a=s(t,e,n,i,o,r);if(void 0!==a)return a;if(typeof t==typeof e)switch(typeof t){case"bigint":case"string":case"boolean":case"symbol":case"undefined":case"function":return t===e;case"number":return t===e||Object.is(t,e);case"object":return oi(t,e,r,s)}return oi(t,e,r,s)}function oi(t,e,n,i){if(Object.is(t,e))return!0;let o=T(t),r=T(e);if(o===L&&(o=F),r===L&&(r=F),o!==r)return!1;switch(o){case P:return t.toString()===e.toString();case M:return Bn(t.valueOf(),e.valueOf());case N:case z:case V:return Object.is(t.valueOf(),e.valueOf());case I:return t.source===e.source&&t.flags===e.flags;case"[object Function]":return t===e}const s=(n=n??new Map).get(t),a=n.get(e);if(null!=s&&null!=a)return s===e;n.set(t,e),n.set(e,t);try{switch(o){case O:if(t.size!==e.size)return!1;for(const[o,r]of t.entries())if(!e.has(o)||!ii(r,e.get(o),o,t,e,n,i))return!1;return!0;case R:{if(t.size!==e.size)return!1;const o=Array.from(t.values()),r=Array.from(e.values());for(let s=0;s<o.length;s++){const a=o[s],l=r.findIndex(o=>ii(a,o,void 0,t,e,n,i));if(-1===l)return!1;r.splice(l,1)}return!0}case D:case H:case U:case $:case W:case"[object BigUint64Array]":case q:case K:case G:case"[object BigInt64Array]":case Q:case Y:if("undefined"!=typeof Buffer&&Buffer.isBuffer(t)!==Buffer.isBuffer(e))return!1;if(t.length!==e.length)return!1;for(let o=0;o<t.length;o++)if(!ii(t[o],e[o],o,t,e,n,i))return!1;return!0;case B:return t.byteLength===e.byteLength&&oi(new Uint8Array(t),new Uint8Array(e),n,i);case j:return t.byteLength===e.byteLength&&t.byteOffset===e.byteOffset&&oi(new Uint8Array(t),new Uint8Array(e),n,i);case"[object Error]":return t.name===e.name&&t.message===e.message;case F:{if(!(oi(t.constructor,e.constructor,n,i)||ei(t)&&ei(e)))return!1;const o=[...Object.keys(t),...S(t)],r=[...Object.keys(e),...S(e)];if(o.length!==r.length)return!1;for(let r=0;r<o.length;r++){const s=o[r],a=t[s];if(!Object.hasOwn(e,s))return!1;if(!ii(a,e[s],s,t,e,n,i))return!1}return!0}default:return!1}}finally{n.delete(t),n.delete(e)}}function ri(t,e,n){return"function"!=typeof n&&(n=()=>{}),ni(t,e,(...i)=>{const o=n(...i);return void 0!==o?Boolean(o):t instanceof Map&&e instanceof Map||t instanceof Set&&e instanceof Set?ri(Array.from(t),Array.from(e),function(t,e){if(!Number.isInteger(t)||t<0)throw new Error("n must be a non-negative integer.");let n=0;return(...i)=>{if(++n>=t)return e(...i)}}(2,n)):void 0})}function si(t,e){return ni(t,e,ut)}const ai=new WeakMap;let li=!1;function ci({view:t,element:e,text:n,isDirectHost:i=!0,keepOnFocus:o=!1}){const r=t.document;function s(n){const s={text:n,isDirectHost:i,keepOnFocus:o,hostElement:i?e:null};ai.get(r).set(e,s),t.change(t=>di([[e,s]],t))}ai.has(r)||(ai.set(r,new Map),r.registerPostFixer(t=>di(ai.get(r),t)),r.on("change:isComposing",()=>{t.change(t=>di(ai.get(r),t))},{priority:"high"})),e.is("editableElement")&&e.on("change:placeholder",(t,e,n)=>s(n)),e.placeholder?s(e.placeholder):n&&s(n),n&&(li||zt("enableViewPlaceholder-deprecated-text-option"),li=!0)}function di(t,e){const n=[];let i=!1;for(const[o,r]of t)r.isDirectHost&&(n.push(o),ui(e,o,r)&&(i=!0));for(const[o,r]of t){if(r.isDirectHost)continue;const t=hi(o);t&&(n.includes(t)||(r.hostElement=t,ui(e,o,r)&&(i=!0)))}return i}function ui(t,e,n){const{text:i,isDirectHost:o,hostElement:r}=n;let s=!1;return r.getAttribute("data-placeholder")!==i&&(t.setAttribute("data-placeholder",i,r),s=!0),(o||1==e.childCount)&&function(t,e){if(!t.isAttached())return!1;if(function(t){for(const e of t.getChildren())if(!e.is("uiElement"))return!0;return!1}(t))return!1;const n=t.document,i=n.selection.anchor;return!(n.isComposing&&i&&i.parent===t||!e&&n.isFocused&&(!i||i.parent===t))}(r,n.keepOnFocus)?function(t,e){return!e.hasClass("ck-placeholder")&&(t.addClass("ck-placeholder",e),!0)}(t,r)&&(s=!0):function(t,e){return!!e.hasClass("ck-placeholder")&&(t.removeClass("ck-placeholder",e),!0)}(t,r)&&(s=!0),s}function hi(t){if(t.childCount){const e=t.getChild(0);if(e.is("element")&&!e.is("uiElement")&&!e.is("attributeElement"))return e}return null}class gi{is(){throw new Error("is() method is abstract")}}class mi extends(Ut(gi)){document;parent;constructor(t){super(),this.document=t,this.parent=null}get index(){let t;if(!this.parent)return null;if(-1==(t=this.parent.getChildIndex(this)))throw new Vt("view-node-not-found-in-parent",this);return t}get nextSibling(){const t=this.index;return null!==t&&this.parent.getChild(t+1)||null}get previousSibling(){const t=this.index;return null!==t&&this.parent.getChild(t-1)||null}get root(){let t=this;for(;t.parent;)t=t.parent;return t}isAttached(){return this.root.is("rootElement")}getPath(){const t=[];let e=this;for(;e.parent;)t.unshift(e.index),e=e.parent;return t}getAncestors(t={}){const e=[];let n=t.includeSelf?this:this.parent;for(;n;)e[t.parentFirst?"push":"unshift"](n),n=n.parent;return e}getCommonAncestor(t,e={}){const n=this.getAncestors(e),i=t.getAncestors(e);let o=0;for(;n[o]==i[o]&&n[o];)o++;return 0===o?null:n[o-1]}isBefore(t){if(this==t)return!1;if(this.root!==t.root)return!1;const e=this.getPath(),n=t.getPath(),i=ue(e,n);switch(i){case"prefix":return!0;case"extension":return!1;default:return e[i]<n[i]}}isAfter(t){return this!=t&&this.root===t.root&&!this.isBefore(t)}_remove(){this.parent._removeChildren(this.index)}_fireChange(t,e,n){this.fire(`change:${t}`,e,n),this.parent&&this.parent._fireChange(t,e,n)}toJSON(){const t=Kn(this);return delete t.parent,t}}mi.prototype.is=function(t){return"node"===t||"view:node"===t};class pi extends mi{_textData;constructor(t,e){super(t),this._textData=e}get data(){return this._textData}get _data(){return this.data}set _data(t){this._fireChange("text",this),this._textData=t}isSimilar(t){return t instanceof pi&&(this===t||this.data===t.data)}_clone(){return new pi(this.document,this.data)}}pi.prototype.is=function(t){return"$text"===t||"view:$text"===t||"text"===t||"view:text"===t||"node"===t||"view:node"===t};class fi extends gi{textNode;data;offsetInText;constructor(t,e,n){if(super(),this.textNode=t,e<0||e>t.data.length)throw new Vt("view-textproxy-wrong-offsetintext",this);if(n<0||e+n>t.data.length)throw new Vt("view-textproxy-wrong-length",this);this.data=t.data.substring(e,e+n),this.offsetInText=e}get offsetSize(){return this.data.length}get isPartial(){return this.data.length!==this.textNode.data.length}get parent(){return this.textNode.parent}get root(){return this.textNode.root}get document(){return this.textNode.document}getAncestors(t={}){const e=[];let n=t.includeSelf?this.textNode:this.parent;for(;null!==n;)e[t.parentFirst?"push":"unshift"](n),n=n.parent;return e}}fi.prototype.is=function(t){return"$textProxy"===t||"view:$textProxy"===t||"textProxy"===t||"view:textProxy"===t};class bi{_consumables=new Map;add(t,e){let n;t.is("$text")||t.is("documentFragment")?this._consumables.set(t,!0):(this._consumables.has(t)?n=this._consumables.get(t):(n=new ki(t),this._consumables.set(t,n)),n.add(e?wi(e):t._getConsumables()))}test(t,e){const n=this._consumables.get(t);return void 0===n?null:t.is("$text")||t.is("documentFragment")?n:n.test(wi(e))}consume(t,e){if(t.is("$text")||t.is("documentFragment"))return!!this.test(t,e)&&(this._consumables.set(t,!1),!0);const n=this._consumables.get(t);return void 0!==n&&n.consume(wi(e))}revert(t,e){const n=this._consumables.get(t);void 0!==n&&(t.is("$text")||t.is("documentFragment")?this._consumables.set(t,!0):n.revert(wi(e)))}static createFrom(t,e){if(e||(e=new bi),t.is("$text"))e.add(t);else if(t.is("element")||t.is("documentFragment")){e.add(t);for(const n of t.getChildren())bi.createFrom(n,e)}return e}}class ki{element;_canConsumeName=null;_attributes=new Map;constructor(t){this.element=t}add(t){t.name&&(this._canConsumeName=!0);for(const[e,n]of t.attributes)if(n){let t=this._attributes.get(e);t&&"boolean"!=typeof t||(t=new Map,this._attributes.set(e,t)),t.set(n,!0)}else{if("style"==e||"class"==e)throw new Vt("viewconsumable-invalid-attribute",this);this._attributes.set(e,!0)}}test(t){if(t.name&&!this._canConsumeName)return this._canConsumeName;for(const[e,n]of t.attributes){const t=this._attributes.get(e);if(void 0===t)return null;if(!1===t)return!1;if(!0!==t)if(n){const e=t.get(n);if(void 0===e)return null;if(!e)return!1}else for(const e of t.values())if(!e)return!1}return!0}consume(t){if(!this.test(t))return!1;t.name&&(this._canConsumeName=!1);for(const[e,n]of t.attributes){const t=this._attributes.get(e);if("boolean"==typeof t)for(const[t]of this.element._getConsumables(e,n).attributes)this._attributes.set(t,!1);else if(n)for(const[,i]of this.element._getConsumables(e,n).attributes)t.set(i,!1);else for(const e of t.keys())t.set(e,!1)}return!0}revert(t){t.name&&(this._canConsumeName=!0);for(const[e,n]of t.attributes){const t=this._attributes.get(e);if(!1!==t){if(void 0!==t&&!0!==t)if(n)!1===t.get(n)&&t.set(n,!0);else for(const e of t.keys())t.set(e,!0)}else this._attributes.set(e,!0)}}}function wi(t){const e=[];return"attributes"in t&&t.attributes&&_i(e,t.attributes),"classes"in t&&t.classes&&_i(e,t.classes,"class"),"styles"in t&&t.styles&&_i(e,t.styles,"style"),{name:t.name||!1,attributes:e}}function _i(t,e,n){if("string"!=typeof e)for(const i of e)Array.isArray(i)?t.push(i):t.push(n?[n,i]:[i]);else t.push(n?[n,e]:[e])}class vi{_patterns=[];constructor(...t){this.add(...t)}add(...t){for(let e of t)("string"==typeof e||e instanceof RegExp)&&(e={name:e}),this._patterns.push(e)}match(...t){for(const e of t)for(const t of this._patterns){const n=this._isElementMatching(e,t);if(n)return{element:e,pattern:t,match:n}}return null}matchAll(...t){const e=[];for(const n of t)for(const t of this._patterns){const i=this._isElementMatching(n,t);i&&e.push({element:n,pattern:t,match:i})}return e.length>0?e:null}getElementName(){if(1!==this._patterns.length)return null;const t=this._patterns[0],e=t.name;return"function"==typeof t||!e||e instanceof RegExp?null:e}_isElementMatching(t,e){if("function"==typeof e){const n=e(t);return n&&"object"==typeof n?wi(n):n}const n={};if(e.name&&(n.name=function(t,e){return t instanceof RegExp?!!e.match(t):t===e}(e.name,t.name),!n.name))return null;const i=[];return e.attributes&&!function(t,e,n){let i;return"object"!=typeof t||t instanceof RegExp||Array.isArray(t)?i=["class","style"]:(void 0!==t.style&&zt("matcher-pattern-deprecated-attributes-style-key",t),void 0!==t.class&&zt("matcher-pattern-deprecated-attributes-class-key",t)),e._collectAttributesMatch(Ci(t),n,i)}(e.attributes,t,i)||e.classes&&!function(t,e,n){return e._collectAttributesMatch(Ci(t,"class"),n)}(e.classes,t,i)||e.styles&&!function(t,e,n){return e._collectAttributesMatch(Ci(t,"style"),n)}(e.styles,t,i)?null:(i.length&&(n.attributes=i),n)}}function yi(t,e){return!0===t||t===e||t instanceof RegExp&&!!String(e).match(t)}function Ci(t,e){if(Array.isArray(t))return t.map(t=>"object"!=typeof t||t instanceof RegExp?e?[e,t,!0]:[t,!0]:(void 0!==t.key&&void 0!==t.value||zt("matcher-pattern-missing-key-or-value",t),e?[e,t.key,t.value]:[t.key,t.value]));if("object"!=typeof t||t instanceof RegExp)return[e?[e,t,!0]:[t,!0]];const n=[];for(const i in t)Object.prototype.hasOwnProperty.call(t,i)&&n.push(e?[e,i,t[i]]:[i,t[i]]);return n}class xi{_styles;_cachedStyleNames=null;_cachedExpandedStyleNames=null;_styleProcessor;constructor(t){this._styles={},this._styleProcessor=t}get isEmpty(){return!Object.entries(this._styles).length}get size(){return this.isEmpty?0:this.getStyleNames().length}setTo(t){this.clear();const e=function(t){let e=null,n=0,i=0,o=null;const r=new Map;if(""===t)return r;";"!=t.charAt(t.length-1)&&(t+=";");for(let s=0;s<t.length;s++){const a=t.charAt(s);if(null===e)switch(a){case":":o||(o=t.substr(n,s-n),i=s+1);break;case'"':case"'":e=a;break;case";":{const e=t.substr(i,s-i);o&&r.set(o.trim(),e.trim()),o=null,n=s+1;break}}else a===e&&(e=null)}return r}(t);for(const[t,n]of e)this._styleProcessor.toNormalizedForm(t,n,this._styles);return this}has(t){if(this.isEmpty)return!1;const e=this._styleProcessor.getReducedForm(t,this._styles).find(([e])=>e===t);return Array.isArray(e)}set(t,e){if(this._cachedStyleNames=null,this._cachedExpandedStyleNames=null,x(t))for(const[e,n]of Object.entries(t))this._styleProcessor.toNormalizedForm(e,n,this._styles);else this._styleProcessor.toNormalizedForm(t,e,this._styles)}remove(t){const e={};for(const n of fn(t)){const t=Ei(n),i=Dn(this._styles,t);if(i)Si(e,t,i);else{const t=this.getAsString(n);void 0!==t&&this._styleProcessor.toNormalizedForm(n,t,e)}}Object.keys(e).length&&(Ti(this._styles,e),this._cachedStyleNames=null,this._cachedExpandedStyleNames=null)}getNormalized(t){return this._styleProcessor.getNormalized(t,this._styles)}toString(){return this.isEmpty?"":this.getStylesEntries().map(t=>t.join(":")).sort().join(";")+";"}getAsString(t){if(this.isEmpty)return;if(this._styles[t]&&!x(this._styles[t]))return this._styles[t];const e=this._styleProcessor.getReducedForm(t,this._styles).find(([e])=>e===t);return Array.isArray(e)?e[1]:void 0}getStyleNames(t=!1){return this.isEmpty?[]:t?(this._cachedExpandedStyleNames||=this._styleProcessor.getStyleNames(this._styles),this._cachedExpandedStyleNames):(this._cachedStyleNames||=this.getStylesEntries().map(([t])=>t),this._cachedStyleNames)}keys(){return this.getStyleNames()}clear(){this._styles={},this._cachedStyleNames=null,this._cachedExpandedStyleNames=null}isSimilar(t){if(this.size!==t.size)return!1;for(const e of this.getStyleNames())if(!t.has(e)||t.getAsString(e)!==this.getAsString(e))return!1;return!0}getStylesEntries(){const t=[],e=Object.keys(this._styles);for(const n of e)t.push(...this._styleProcessor.getReducedForm(n,this._styles));return t}_clone(){const t=new this.constructor(this._styleProcessor);return t.set(this.getNormalized()),t}_getTokensMatch(t,e){const n=[];for(const i of this.getStyleNames(!0))if(yi(t,i)){if(!0===e){n.push(i);continue}yi(e,this.getAsString(i))&&n.push(i)}return n.length?n:void 0}_getConsumables(t){const e=[];if(t){e.push(t);for(const n of this._styleProcessor.getRelatedStyles(t))e.push(n)}else for(const t of this.getStyleNames()){for(const n of this._styleProcessor.getRelatedStyles(t))e.push(n);e.push(t)}return e}_canMergeFrom(t){for(const e of t.getStyleNames())if(this.has(e)&&this.getAsString(e)!==t.getAsString(e))return!1;return!0}_mergeFrom(t){for(const e of t.getStyleNames())this.has(e)||this.set(e,t.getAsString(e))}_isMatching(t){for(const e of t.getStyleNames())if(!this.has(e)||this.getAsString(e)!==t.getAsString(e))return!1;return!0}}class Ai{_normalizers;_extractors;_reducers;_consumables;constructor(){this._normalizers=new Map,this._extractors=new Map,this._reducers=new Map,this._consumables=new Map}toNormalizedForm(t,e,n){if(x(e))Si(n,Ei(t),e);else if(this._normalizers.has(t)){const i=this._normalizers.get(t),{path:o,value:r}=i(e);Si(n,o,r)}else Si(n,t,e)}getNormalized(t,e){if(!t)return ht({},e);if(void 0!==e[t])return e[t];if(this._extractors.has(t)){const n=this._extractors.get(t);if("string"==typeof n)return Dn(e,n);const i=n(t,e);if(i)return i}return Dn(e,Ei(t))}getReducedForm(t,e){const n=this.getNormalized(t,e);return void 0===n?[]:this._reducers.has(t)?this._reducers.get(t)(n):[[t,n]]}getStyleNames(t){const e=new Set;for(const n of this._consumables.keys()){const i=this.getNormalized(n,t);i&&("object"!=typeof i||Object.keys(i).length)&&e.add(n)}for(const n of Object.keys(t))e.add(n);return Array.from(e)}getRelatedStyles(t){return this._consumables.get(t)||[]}setNormalizer(t,e){this._normalizers.set(t,e)}setExtractor(t,e){this._extractors.set(t,e)}setReducer(t,e){this._reducers.set(t,e)}setStyleRelation(t,e){this._mapStyleNames(t,e);for(const n of e)this._mapStyleNames(n,[t])}_mapStyleNames(t,e){this._consumables.has(t)||this._consumables.set(t,[]),this._consumables.get(t).push(...e)}}function Ei(t){return t.replace("-",".")}function Si(t,e,n){let i=n;x(n)&&(i=ht({},Dn(t,e),n)),qn(t,e,i)}function Ti(t,e){for(const n of Object.keys(e))null===t[n]||Array.isArray(t[n])||"object"!=typeof t[n]||"object"!=typeof e[n]?delete t[n]:(Ti(t[n],e[n]),Object.keys(t[n]).length||delete t[n])}class Ii{_set=new Set;get isEmpty(){return 0==this._set.size}get size(){return this._set.size}has(t){return this._set.has(t)}keys(){return Array.from(this._set.keys())}setTo(t){this.clear();for(const e of t.split(/\s+/))e&&this._set.add(e);return this}set(t){for(const e of fn(t))e&&this._set.add(e)}remove(t){for(const e of fn(t))this._set.delete(e)}clear(){this._set.clear()}toString(){return Array.from(this._set).join(" ")}isSimilar(t){if(this.size!==t.size)return!1;for(const e of this.keys())if(!t.has(e))return!1;return!0}_clone(){const t=new this.constructor;return t._set=new Set(this._set),t}_getTokensMatch(t){const e=[];if(!0===t){for(const t of this._set.keys())e.push(t);return e}if("string"==typeof t){for(const n of t.split(/\s+/)){if(!this._set.has(n))return;e.push(n)}return e}for(const n of this._set.keys())n.match(t)&&e.push(n);return e.length?e:void 0}_getConsumables(t){return t?[t]:this.keys()}_canMergeFrom(){return!0}_mergeFrom(t){for(const e of t._set.keys())this._set.has(e)||this._set.add(e)}_isMatching(t){for(const e of t._set.keys())if(!this._set.has(e))return!1;return!0}}class Pi extends mi{name;_unsafeAttributesToRender=[];_attrs;_children;_customProperties=new Map;get _classes(){return this._attrs.get("class")}get _styles(){return this._attrs.get("style")}constructor(t,e,n,i){super(t),this.name=e,this._attrs=this._parseAttributes(n),this._children=[],i&&this._insertChild(0,i)}get childCount(){return this._children.length}get isEmpty(){return 0===this._children.length}getChild(t){return this._children[t]}getChildIndex(t){return this._children.indexOf(t)}getChildren(){return this._children[Symbol.iterator]()}*getAttributeKeys(){this._classes&&(yield"class"),this._styles&&(yield"style");for(const t of this._attrs.keys())"class"!=t&&"style"!=t&&(yield t)}*getAttributes(){for(const[t,e]of this._attrs.entries())yield[t,String(e)]}getAttribute(t){return this._attrs.has(t)?String(this._attrs.get(t)):void 0}hasAttribute(t,e){return!!this._attrs.has(t)&&(void 0===e||(Ni(this.name,t)||Mi(this.name,t)?this._attrs.get(t).has(e):this._attrs.get(t)===e))}isSimilar(t){if(!(t instanceof Pi))return!1;if(this===t)return!0;if(this.name!=t.name)return!1;if(this._attrs.size!==t._attrs.size)return!1;for(const[e,n]of this._attrs){const i=t._attrs.get(e);if(void 0===i)return!1;if("string"==typeof n||"string"==typeof i){if(i!==n)return!1}else if(!n.isSimilar(i))return!1}return!0}hasClass(...t){for(const e of t)if(!this._classes||!this._classes.has(e))return!1;return!0}getClassNames(){const t=this._classes?this._classes.keys():[],e=t[Symbol.iterator]();return Object.assign(t,{next:e.next.bind(e)})}getStyle(t){return this._styles&&this._styles.getAsString(t)}getNormalizedStyle(t){return this._styles&&this._styles.getNormalized(t)}getStyleNames(t){return this._styles?this._styles.getStyleNames(t):[]}hasStyle(...t){for(const e of t)if(!this._styles||!this._styles.has(e))return!1;return!0}findAncestor(...t){const e=new vi(...t);let n=this.parent;for(;n&&!n.is("documentFragment");){if(e.match(n))return n;n=n.parent}return null}getCustomProperty(t){return this._customProperties.get(t)}*getCustomProperties(){yield*this._customProperties.entries()}getIdentity(){const t=this._classes?this._classes.keys().sort().join(","):"",e=this._styles&&String(this._styles),n=Array.from(this._attrs).filter(([t])=>"style"!=t&&"class"!=t).map(t=>`${t[0]}="${t[1]}"`).sort().join(" ");return this.name+(""==t?"":` class="${t}"`)+(e?` style="${e}"`:"")+(""==n?"":` ${n}`)}shouldRenderUnsafeAttribute(t){return this._unsafeAttributesToRender.includes(t)}_clone(t=!1){const e=[];if(t)for(const n of this.getChildren())e.push(n._clone(t));const n=new this.constructor(this.document,this.name,this._attrs,e);return n._customProperties=new Map(this._customProperties),n.getFillerOffset=this.getFillerOffset,n._unsafeAttributesToRender=this._unsafeAttributesToRender,n}_appendChild(t){return this._insertChild(this.childCount,t)}_insertChild(t,e){this._fireChange("children",this,{index:t});let n=0;const i=function(t,e){if("string"==typeof e)return[new pi(t,e)];he(e)||(e=[e]);const n=[];for(const i of e)"string"==typeof i?n.push(new pi(t,i)):i instanceof fi?n.push(new pi(t,i.data)):n.push(i);return n}(this.document,e);for(const e of i)null!==e.parent&&e._remove(),e.parent=this,e.document=this.document,this._children.splice(t,0,e),t++,n++;return n}_removeChildren(t,e=1){this._fireChange("children",this,{index:t});for(let n=t;n<t+e;n++)this._children[n].parent=null;return this._children.splice(t,e)}_setAttribute(t,e,n=!0){if(this._fireChange("attributes",this),Ni(this.name,t)||Mi(this.name,t)){let i=this._attrs.get(t);i||(i=Ni(this.name,t)?new xi(this.document.stylesProcessor):new Ii,this._attrs.set(t,i)),n?i.setTo(String(e)):Ni(this.name,t)?Array.isArray(e)?i.set(e[0],e[1]):i.set(e):i.set("string"==typeof e?e.split(/\s+/):e)}else this._attrs.set(t,String(e))}_removeAttribute(t,e){if(this._fireChange("attributes",this),void 0!==e&&(Ni(this.name,t)||Mi(this.name,t))){const n=this._attrs.get(t);return!!n&&(Mi(this.name,t)&&"string"==typeof e&&(e=e.split(/\s+/)),n.remove(e),!!n.isEmpty&&this._attrs.delete(t))}return this._attrs.delete(t)}_addClass(t){this._setAttribute("class",t,!1)}_removeClass(t){this._removeAttribute("class",t)}_setStyle(t,e){"string"!=typeof t?this._setAttribute("style",t,!1):this._setAttribute("style",[t,e],!1)}_removeStyle(t){this._removeAttribute("style",t)}_collectAttributesMatch(t,e,n){for(const[i,o,r]of t){let t=!1,s=!1;for(const[a,l]of this._attrs)if(!(n&&n.includes(a)||!yi(i,a)))if(t=!0,"string"==typeof l){if(yi(o,l))e.push([a]),s=!0;else if(!(i instanceof RegExp))return!1}else{const t=l._getTokensMatch(o,r||!0);if(t){s=!0;for(const n of t)e.push([a,n])}else if(!(i instanceof RegExp))return!1}if(!t||!s)return!1}return!0}_getConsumables(t,e){const n=[];if(t){const i=this._attrs.get(t);if(void 0!==i)if("string"==typeof i)n.push([t]);else for(const o of i._getConsumables(e))n.push([t,o])}else for(const[t,e]of this._attrs)if("string"==typeof e)n.push([t]);else for(const i of e._getConsumables())n.push([t,i]);return{name:!t,attributes:n}}_canMergeAttributesFrom(t){if(this.name!=t.name)return!1;for(const[e,n]of t._attrs){const t=this._attrs.get(e);if(void 0!==t)if("string"==typeof t||"string"==typeof n){if(t!==n)return!1}else if(!t._canMergeFrom(n))return!1}return!0}_mergeAttributesFrom(t){this._fireChange("attributes",this);for(const[e,n]of t._attrs){const t=this._attrs.get(e);void 0===t||"string"==typeof t||"string"==typeof n?this._setAttribute(e,n):t._mergeFrom(n)}}_canSubtractAttributesOf(t){if(this.name!=t.name)return!1;for(const[e,n]of t._attrs){const t=this._attrs.get(e);if(void 0===t)return!1;if("string"==typeof t||"string"==typeof n){if(t!==n)return!1}else if(!t._isMatching(n))return!1}return!0}_subtractAttributesOf(t){this._fireChange("attributes",this);for(const[e,n]of t._attrs){const t=this._attrs.get(e);"string"==typeof t||"string"==typeof n?this._attrs.delete(e):(t.remove(n.keys()),t.isEmpty&&this._attrs.delete(e))}}_setCustomProperty(t,e){this._customProperties.set(t,e)}_removeCustomProperty(t){return this._customProperties.delete(t)}_parseAttributes(t){const e=An(t);for(const[t,n]of e)if(null===n)e.delete(t);else if(Ni(this.name,t)){const i=n instanceof xi?n._clone():new xi(this.document.stylesProcessor).setTo(String(n));e.set(t,i)}else if(Mi(this.name,t)){const i=n instanceof Ii?n._clone():(new Ii).setTo(String(n));e.set(t,i)}else"string"!=typeof n&&e.set(t,String(n));return e}}function Mi(t,e){return"class"==e||"a"==t&&"rel"==e}function Ni(t,e){return"style"==e}Pi.prototype.is=function(t,e){return e?e===this.name&&("element"===t||"view:element"===t):"element"===t||"view:element"===t||"node"===t||"view:node"===t};class Li extends Pi{constructor(t,e,n,i){super(t,e,n,i),this.getFillerOffset=Vi}}function Vi(){const t=[...this.getChildren()],e=t[this.childCount-1];if(e&&e.is("element","br"))return this.childCount;for(const e of t)if(!e.is("uiElement"))return null;return this.childCount}Li.prototype.is=function(t,e){return e?e===this.name&&("containerElement"===t||"view:containerElement"===t||"element"===t||"view:element"===t):"containerElement"===t||"view:containerElement"===t||"element"===t||"view:element"===t||"node"===t||"view:node"===t};class zi extends(ie(Li)){constructor(t,e,n,i){super(t,e,n,i),this.set("isReadOnly",!1),this.set("isFocused",!1),this.set("placeholder",void 0),this.bind("isReadOnly").to(t),this.bind("isFocused").to(t,"isFocused",e=>e&&t.selection.editableElement==this),this.listenTo(t.selection,"change",()=>{this.isFocused=t.isFocused&&t.selection.editableElement==this})}destroy(){this.stopListening()}}zi.prototype.is=function(t,e){return e?e===this.name&&("editableElement"===t||"view:editableElement"===t||"containerElement"===t||"view:containerElement"===t||"element"===t||"view:element"===t):"editableElement"===t||"view:editableElement"===t||"containerElement"===t||"view:containerElement"===t||"element"===t||"view:element"===t||"node"===t||"view:node"===t};const Oi=Symbol("rootName");class Ri extends zi{constructor(t,e){super(t,e),this.rootName="main"}get rootName(){return this.getCustomProperty(Oi)}set rootName(t){this._setCustomProperty(Oi,t)}set _name(t){this.name=t}}Ri.prototype.is=function(t,e){return e?e===this.name&&("rootElement"===t||"view:rootElement"===t||"editableElement"===t||"view:editableElement"===t||"containerElement"===t||"view:containerElement"===t||"element"===t||"view:element"===t):"rootElement"===t||"view:rootElement"===t||"editableElement"===t||"view:editableElement"===t||"containerElement"===t||"view:containerElement"===t||"element"===t||"view:element"===t||"node"===t||"view:node"===t};class Di{direction;boundaries;singleCharacters;shallow;ignoreElementEnd;_position;_boundaryStartParent;_boundaryEndParent;constructor(t={}){if(!t.boundaries&&!t.startPosition)throw new Vt("view-tree-walker-no-start-position",null);if(t.direction&&"forward"!=t.direction&&"backward"!=t.direction)throw new Vt("view-tree-walker-unknown-direction",t.startPosition,{direction:t.direction});this.boundaries=t.boundaries||null,t.startPosition?this._position=Bi._createAt(t.startPosition):this._position=Bi._createAt(t.boundaries["backward"==t.direction?"end":"start"]),this.direction=t.direction||"forward",this.singleCharacters=!!t.singleCharacters,this.shallow=!!t.shallow,this.ignoreElementEnd=!!t.ignoreElementEnd,this._boundaryStartParent=this.boundaries?this.boundaries.start.parent:null,this._boundaryEndParent=this.boundaries?this.boundaries.end.parent:null}[Symbol.iterator](){return this}get position(){return this._position}skip(t){let e,n;do{n=this.position,e=this.next()}while(!e.done&&t(e.value));e.done||(this._position=n)}jumpTo(t){this._boundaryStartParent&&t.isBefore(this.boundaries.start)?t=this.boundaries.start:this._boundaryEndParent&&t.isAfter(this.boundaries.end)&&(t=this.boundaries.end),this._position=t.clone()}next(){return"forward"==this.direction?this._next():this._previous()}_next(){let t=this.position.clone();const e=this.position,n=t.parent;if(null===n.parent&&t.offset===n.childCount)return{done:!0,value:void 0};if(n===this._boundaryEndParent&&t.offset==this.boundaries.end.offset)return{done:!0,value:void 0};let i;if(n&&n.is("view:$text")){if(t.isAtEnd)return this._position=Bi._createAfter(n),this._next();i=n.data[t.offset]}else i=n.getChild(t.offset);if("string"==typeof i){let i;i=this.singleCharacters?1:(n===this._boundaryEndParent?this.boundaries.end.offset:n.data.length)-t.offset;const o=new fi(n,t.offset,i);return t.offset+=i,this._position=t,this._formatReturnValue("text",o,e,t,i)}if(i&&i.is("view:element")){if(this.shallow){if(this.boundaries&&this.boundaries.end.isBefore(t))return{done:!0,value:void 0};t.offset++}else t=new Bi(i,0);return this._position=t,this._formatReturnValue("elementStart",i,e,t,1)}if(i&&i.is("view:$text")){if(this.singleCharacters)return t=new Bi(i,0),this._position=t,this._next();let n,o=i.data.length;return i==this._boundaryEndParent?(o=this.boundaries.end.offset,n=new fi(i,0,o),t=Bi._createAfter(n)):(n=new fi(i,0,i.data.length),t.offset++),this._position=t,this._formatReturnValue("text",n,e,t,o)}return t=Bi._createAfter(n),this._position=t,this.ignoreElementEnd?this._next():this._formatReturnValue("elementEnd",n,e,t)}_previous(){let t=this.position.clone();const e=this.position,n=t.parent;if(null===n.parent&&0===t.offset)return{done:!0,value:void 0};if(n==this._boundaryStartParent&&t.offset==this.boundaries.start.offset)return{done:!0,value:void 0};let i;if(n.is("view:$text")){if(t.isAtStart)return this._position=Bi._createBefore(n),this._previous();i=n.data[t.offset-1]}else i=n.getChild(t.offset-1);if("string"==typeof i){let i;if(this.singleCharacters)i=1;else{const e=n===this._boundaryStartParent?this.boundaries.start.offset:0;i=t.offset-e}t.offset-=i;const o=new fi(n,t.offset,i);return this._position=t,this._formatReturnValue("text",o,e,t,i)}if(i&&i.is("view:element"))return this.shallow?(t.offset--,this._position=t,this._formatReturnValue("elementStart",i,e,t,1)):(t=new Bi(i,i.childCount),this._position=t,this.ignoreElementEnd?this._previous():this._formatReturnValue("elementEnd",i,e,t));if(i&&i.is("view:$text")){if(this.singleCharacters)return t=new Bi(i,i.data.length),this._position=t,this._previous();let n,o=i.data.length;if(i==this._boundaryStartParent){const e=this.boundaries.start.offset;n=new fi(i,e,i.data.length-e),o=n.data.length,t=Bi._createBefore(n)}else n=new fi(i,0,i.data.length),t.offset--;return this._position=t,this._formatReturnValue("text",n,e,t,o)}return t=Bi._createBefore(n),this._position=t,this._formatReturnValue("elementStart",n,e,t,1)}_formatReturnValue(t,e,n,i,o){return e.is("view:$textProxy")&&(e.offsetInText+e.data.length==e.textNode.data.length&&("forward"!=this.direction||this.boundaries&&this.boundaries.end.isEqual(this.position)?n=Bi._createAfter(e.textNode):(i=Bi._createAfter(e.textNode),this._position=i)),0===e.offsetInText&&("backward"!=this.direction||this.boundaries&&this.boundaries.start.isEqual(this.position)?n=Bi._createBefore(e.textNode):(i=Bi._createBefore(e.textNode),this._position=i))),{done:!1,value:{type:t,item:e,previousPosition:n,nextPosition:i,length:o}}}}class Bi extends gi{parent;offset;constructor(t,e){super(),this.parent=t,this.offset=e}get nodeAfter(){return this.parent.is("$text")?null:this.parent.getChild(this.offset)||null}get nodeBefore(){return this.parent.is("$text")?null:this.parent.getChild(this.offset-1)||null}get isAtStart(){return 0===this.offset}get isAtEnd(){const t=this.parent.is("$text")?this.parent.data.length:this.parent.childCount;return this.offset===t}get root(){return this.parent.root}get editableElement(){let t=this.parent;for(;!(t instanceof zi);){if(!t.parent)return null;t=t.parent}return t}getShiftedBy(t){const e=Bi._createAt(this),n=e.offset+t;return e.offset=n<0?0:n,e}getLastMatchingPosition(t,e={}){e.startPosition=this;const n=new Di(e);return n.skip(t),n.position}getAncestors(){return this.parent.is("documentFragment")?[this.parent]:this.parent.getAncestors({includeSelf:!0})}getCommonAncestor(t){const e=this.getAncestors(),n=t.getAncestors();let i=0;for(;e[i]==n[i]&&e[i];)i++;return 0===i?null:e[i-1]}isEqual(t){return this.parent==t.parent&&this.offset==t.offset}isBefore(t){return"before"==this.compareWith(t)}isAfter(t){return"after"==this.compareWith(t)}compareWith(t){if(this.root!==t.root)return"different";if(this.isEqual(t))return"same";const e=this.parent.is("node")?this.parent.getPath():[],n=t.parent.is("node")?t.parent.getPath():[];e.push(this.offset),n.push(t.offset);const i=ue(e,n);switch(i){case"prefix":return"before";case"extension":return"after";default:return e[i]<n[i]?"before":"after"}}getWalker(t={}){return t.startPosition=this,new Di(t)}clone(){return new Bi(this.parent,this.offset)}static _createAt(t,e){if(t instanceof Bi)return new this(t.parent,t.offset);{const n=t;if("end"==e)e=n.is("$text")?n.data.length:n.childCount;else{if("before"==e)return this._createBefore(n);if("after"==e)return this._createAfter(n);if(0!==e&&!e)throw new Vt("view-createpositionat-offset-required",n)}return new Bi(n,e)}}static _createAfter(t){if(t.is("$textProxy"))return new Bi(t.textNode,t.offsetInText+t.data.length);if(!t.parent)throw new Vt("view-position-after-root",t,{root:t});return new Bi(t.parent,t.index+1)}static _createBefore(t){if(t.is("$textProxy"))return new Bi(t.textNode,t.offsetInText);if(!t.parent)throw new Vt("view-position-before-root",t,{root:t});return new Bi(t.parent,t.index)}}Bi.prototype.is=function(t){return"position"===t||"view:position"===t};class Fi extends gi{start;end;constructor(t,e=null){super(),this.start=t.clone(),this.end=e?e.clone():t.clone()}*[Symbol.iterator](){yield*new Di({boundaries:this,ignoreElementEnd:!0})}get isCollapsed(){return this.start.isEqual(this.end)}get isFlat(){return this.start.parent===this.end.parent}get root(){return this.start.root}getEnlarged(){let t=this.start.getLastMatchingPosition(ji,{direction:"backward"}),e=this.end.getLastMatchingPosition(ji);return t.parent.is("$text")&&t.isAtStart&&(t=Bi._createBefore(t.parent)),e.parent.is("$text")&&e.isAtEnd&&(e=Bi._createAfter(e.parent)),new Fi(t,e)}getTrimmed(){let t=this.start.getLastMatchingPosition(ji);if(t.isAfter(this.end)||t.isEqual(this.end))return new Fi(t,t);let e=this.end.getLastMatchingPosition(ji,{direction:"backward"});const n=t.nodeAfter,i=e.nodeBefore;return n&&n.is("$text")&&(t=new Bi(n,0)),i&&i.is("$text")&&(e=new Bi(i,i.data.length)),new Fi(t,e)}isEqual(t){return this==t||this.start.isEqual(t.start)&&this.end.isEqual(t.end)}containsPosition(t){return t.isAfter(this.start)&&t.isBefore(this.end)}containsRange(t,e=!1){t.isCollapsed&&(e=!1);const n=this.containsPosition(t.start)||e&&this.start.isEqual(t.start),i=this.containsPosition(t.end)||e&&this.end.isEqual(t.end);return n&&i}getDifference(t){const e=[];return this.isIntersecting(t)?(this.containsPosition(t.start)&&e.push(new Fi(this.start,t.start)),this.containsPosition(t.end)&&e.push(new Fi(t.end,this.end))):e.push(this.clone()),e}getIntersection(t){if(this.isIntersecting(t)){let e=this.start,n=this.end;return this.containsPosition(t.start)&&(e=t.start),this.containsPosition(t.end)&&(n=t.end),new Fi(e,n)}return null}getWalker(t={}){return t.boundaries=this,new Di(t)}getCommonAncestor(){return this.start.getCommonAncestor(this.end)}getContainedElement(){if(this.isCollapsed)return null;let t=this.start.nodeAfter,e=this.end.nodeBefore;return this.start.parent.is("$text")&&this.start.isAtEnd&&this.start.parent.nextSibling&&(t=this.start.parent.nextSibling),this.end.parent.is("$text")&&this.end.isAtStart&&this.end.parent.previousSibling&&(e=this.end.parent.previousSibling),t&&t.is("element")&&t===e?t:null}clone(){return new Fi(this.start,this.end)}*getItems(t={}){t.boundaries=this,t.ignoreElementEnd=!0;const e=new Di(t);for(const t of e)yield t.item}*getPositions(t={}){t.boundaries=this;const e=new Di(t);yield e.position;for(const t of e)yield t.nextPosition}isIntersecting(t){return this.start.isBefore(t.end)&&this.end.isAfter(t.start)}static _createFromParentsAndOffsets(t,e,n,i){return new this(new Bi(t,e),new Bi(n,i))}static _createFromPositionAndShift(t,e){const n=t,i=t.getShiftedBy(e);return e>0?new this(n,i):new this(i,n)}static _createIn(t){return this._createFromParentsAndOffsets(t,0,t,t.childCount)}static _createOn(t){const e=t.is("$textProxy")?t.offsetSize:1;return this._createFromPositionAndShift(Bi._createBefore(t),e)}}function ji(t){return!(!t.item.is("attributeElement")&&!t.item.is("uiElement"))}Fi.prototype.is=function(t){return"range"===t||"view:range"===t};class Hi extends(Ut(gi)){_ranges;_lastRangeBackward;_isFake;_fakeSelectionLabel;constructor(...t){super(),this._ranges=[],this._lastRangeBackward=!1,this._isFake=!1,this._fakeSelectionLabel="",t.length&&this.setTo(...t)}get isFake(){return this._isFake}get fakeSelectionLabel(){return this._fakeSelectionLabel}get anchor(){if(!this._ranges.length)return null;const t=this._ranges[this._ranges.length-1];return(this._lastRangeBackward?t.end:t.start).clone()}get focus(){if(!this._ranges.length)return null;const t=this._ranges[this._ranges.length-1];return(this._lastRangeBackward?t.start:t.end).clone()}get isCollapsed(){return 1===this.rangeCount&&this._ranges[0].isCollapsed}get rangeCount(){return this._ranges.length}get isBackward(){return!this.isCollapsed&&this._lastRangeBackward}get editableElement(){return this.anchor?this.anchor.editableElement:null}*getRanges(){for(const t of this._ranges)yield t.clone()}getFirstRange(){let t=null;for(const e of this._ranges)t&&!e.start.isBefore(t.start)||(t=e);return t?t.clone():null}getLastRange(){let t=null;for(const e of this._ranges)t&&!e.end.isAfter(t.end)||(t=e);return t?t.clone():null}getFirstPosition(){const t=this.getFirstRange();return t?t.start.clone():null}getLastPosition(){const t=this.getLastRange();return t?t.end.clone():null}isEqual(t){if(this.isFake!=t.isFake)return!1;if(this.isFake&&this.fakeSelectionLabel!=t.fakeSelectionLabel)return!1;if(this.rangeCount!=t.rangeCount)return!1;if(0===this.rangeCount)return!0;if(!this.anchor.isEqual(t.anchor)||!this.focus.isEqual(t.focus))return!1;for(const e of this._ranges){let n=!1;for(const i of t._ranges)if(e.isEqual(i)){n=!0;break}if(!n)return!1}return!0}isSimilar(t){if(this.isBackward!=t.isBackward)return!1;const e=de(this.getRanges());if(e!=de(t.getRanges()))return!1;if(0==e)return!0;for(let e of this.getRanges()){e=e.getTrimmed();let n=!1;for(let i of t.getRanges())if(i=i.getTrimmed(),e.start.isEqual(i.start)&&e.end.isEqual(i.end)){n=!0;break}if(!n)return!1}return!0}getSelectedElement(){return 1!==this.rangeCount?null:this.getFirstRange().getContainedElement()}setTo(...t){let[e,n,i]=t;if("object"==typeof n&&(i=n,n=void 0),null===e)this._setRanges([]),this._setFakeOptions(i);else if(e instanceof Hi||e instanceof Ui)this._setRanges(e.getRanges(),e.isBackward),this._setFakeOptions({fake:e.isFake,label:e.fakeSelectionLabel});else if(e instanceof Fi)this._setRanges([e],i&&i.backward),this._setFakeOptions(i);else if(e instanceof Bi)this._setRanges([new Fi(e)]),this._setFakeOptions(i);else if(e instanceof mi){const t=!!i&&!!i.backward;let o;if(void 0===n)throw new Vt("view-selection-setto-required-second-parameter",this);o="in"==n?Fi._createIn(e):"on"==n?Fi._createOn(e):new Fi(Bi._createAt(e,n)),this._setRanges([o],t),this._setFakeOptions(i)}else{if(!he(e))throw new Vt("view-selection-setto-not-selectable",this);this._setRanges(e,i&&i.backward),this._setFakeOptions(i)}this.fire("change")}setFocus(t,e){if(null===this.anchor)throw new Vt("view-selection-setfocus-no-ranges",this);const n=Bi._createAt(t,e);if("same"==n.compareWith(this.focus))return;const i=this.anchor;this._ranges.pop(),"before"==n.compareWith(i)?this._addRange(new Fi(n,i),!0):this._addRange(new Fi(i,n)),this.fire("change")}_setRanges(t,e=!1){t=Array.from(t),this._ranges=[];for(const e of t)this._addRange(e);this._lastRangeBackward=!!e}_setFakeOptions(t={}){this._isFake=!!t.fake,this._fakeSelectionLabel=t.fake&&t.label||""}_addRange(t,e=!1){if(!(t instanceof Fi))throw new Vt("view-selection-add-range-not-range",this);this._pushRange(t),this._lastRangeBackward=!!e}_pushRange(t){for(const e of this._ranges)if(t.isIntersecting(e))throw new Vt("view-selection-range-intersects",this,{addedRange:t,intersectingRange:e});this._ranges.push(new Fi(t.start,t.end))}}Hi.prototype.is=function(t){return"selection"===t||"view:selection"===t};class Ui extends(Ut(gi)){_selection;constructor(...t){super(),this._selection=new Hi,this._selection.delegate("change").to(this),t.length&&this._selection.setTo(...t)}get isFake(){return this._selection.isFake}get fakeSelectionLabel(){return this._selection.fakeSelectionLabel}get anchor(){return this._selection.anchor}get focus(){return this._selection.focus}get isCollapsed(){return this._selection.isCollapsed}get rangeCount(){return this._selection.rangeCount}get isBackward(){return this._selection.isBackward}get editableElement(){return this._selection.editableElement}get _ranges(){return this._selection._ranges}*getRanges(){yield*this._selection.getRanges()}getFirstRange(){return this._selection.getFirstRange()}getLastRange(){return this._selection.getLastRange()}getFirstPosition(){return this._selection.getFirstPosition()}getLastPosition(){return this._selection.getLastPosition()}getSelectedElement(){return this._selection.getSelectedElement()}isEqual(t){return this._selection.isEqual(t)}isSimilar(t){return this._selection.isSimilar(t)}_setTo(...t){this._selection.setTo(...t)}_setFocus(t,e){this._selection.setFocus(t,e)}}Ui.prototype.is=function(t){return"selection"===t||"documentSelection"==t||"view:selection"==t||"view:documentSelection"==t};class $i extends It{startRange;_eventPhase;_currentTarget;constructor(t,e,n){super(t,e),this.startRange=n,this._eventPhase="none",this._currentTarget=null}get eventPhase(){return this._eventPhase}get currentTarget(){return this._currentTarget}}const Wi=Symbol("bubbling contexts");function qi(t){return class extends t{fire(t,...e){try{const n=t instanceof It?t:new It(this,t),i=Yi(this);if(!i.size)return;if(Ki(n,"capturing",this),Gi(i,"$capture",n,...e))return n.return;const o=n.startRange||this.selection.getFirstRange(),r=o?o.getContainedElement():null,s=!!r&&Boolean(Qi(i,r));let a=r||function(t){if(!t)return null;const e=t.start.parent,n=t.end.parent,i=e.getPath(),o=n.getPath();return i.length>o.length?e:n}(o);if(Ki(n,"atTarget",a),!s){if(Gi(i,"$text",n,...e))return n.return;Ki(n,"bubbling",a)}for(;a;){if(a.is("rootElement")){if(Gi(i,"$root",n,...e))return n.return}else if(a.is("element")&&Gi(i,a.name,n,...e))return n.return;if(Gi(i,a,n,...e))return n.return;a=a.parent,Ki(n,"bubbling",a)}return Ki(n,"bubbling",this),Gi(i,"$document",n,...e),n.return}catch(t){Vt.rethrowUnexpectedError(t,this)}}_addEventListener(t,e,n){const i=fn(n.context||"$document"),o=Yi(this);for(const r of i){let i=o.get(r);i||(i=new(Ut()),o.set(r,i)),this.listenTo(i,t,e,n)}}_removeEventListener(t,e){const n=Yi(this);for(const i of n.values())this.stopListening(i,t,e)}}}function Ki(t,e,n){t instanceof $i&&(t._eventPhase=e,t._currentTarget=n)}function Gi(t,e,n,...i){const o="string"==typeof e?t.get(e):Qi(t,e);return!!o&&(o.fire(n,...i),n.stop.called)}function Qi(t,e){for(const[n,i]of t)if("function"==typeof n&&n(e))return i;return null}function Yi(t){return t[Wi]||(t[Wi]=new Map),t[Wi]}class Ji extends(qi(ie())){selection;roots;stylesProcessor;_postFixers=new Set;constructor(t){super(),this.selection=new Ui,this.roots=new kn({idProperty:"rootName"}),this.stylesProcessor=t,this.set("isReadOnly",!1),this.set("isFocused",!1),this.set("isSelecting",!1),this.set("isComposing",!1)}getRoot(t="main"){return this.roots.get(t)}registerPostFixer(t){this._postFixers.add(t)}destroy(){this.roots.forEach(t=>t.destroy()),this.stopListening()}_callPostFixers(t){let e=!1;do{for(const n of this._postFixers)if(e=n(t),e)break}while(e)}}class Zi extends Pi{static DEFAULT_PRIORITY=10;_priority=10;_id=null;_clonesGroup=null;constructor(t,e,n,i){super(t,e,n,i),this.getFillerOffset=Xi}get priority(){return this._priority}get id(){return this._id}getElementsWithSameId(){if(null===this.id)throw new Vt("attribute-element-get-elements-with-same-id-no-id",this);return new Set(this._clonesGroup)}isSimilar(t){return null!==this.id||null!==t.id?this.id===t.id:super.isSimilar(t)&&this.priority==t.priority}_clone(t=!1){const e=super._clone(t);return e._priority=this._priority,e._id=this._id,e}_canMergeAttributesFrom(t){return null===this.id&&null===t.id&&this.priority===t.priority&&super._canMergeAttributesFrom(t)}_canSubtractAttributesOf(t){return null===this.id&&null===t.id&&this.priority===t.priority&&super._canSubtractAttributesOf(t)}}function Xi(){if(to(this))return null;let t=this.parent;for(;t&&t.is("attributeElement");){if(to(t)>1)return null;t=t.parent}return!t||to(t)>1?null:this.childCount}function to(t){return Array.from(t.getChildren()).filter(t=>!t.is("uiElement")).length}Zi.prototype.is=function(t,e){return e?e===this.name&&("attributeElement"===t||"view:attributeElement"===t||"element"===t||"view:element"===t):"attributeElement"===t||"view:attributeElement"===t||"element"===t||"view:element"===t||"node"===t||"view:node"===t};class eo extends Pi{constructor(t,e,n,i){super(t,e,n,i),this.getFillerOffset=no}_insertChild(t,e){if(e&&(e instanceof mi||Array.from(e).length>0))throw new Vt("view-emptyelement-cannot-add",[this,e]);return 0}}function no(){return null}eo.prototype.is=function(t,e){return e?e===this.name&&("emptyElement"===t||"view:emptyElement"===t||"element"===t||"view:element"===t):"emptyElement"===t||"view:emptyElement"===t||"element"===t||"view:element"===t||"node"===t||"view:node"===t};class io extends Pi{constructor(t,e,n,i){super(t,e,n,i),this.getFillerOffset=oo}_insertChild(t,e){if(e&&(e instanceof mi||Array.from(e).length>0))throw new Vt("view-uielement-cannot-add",[this,e]);return 0}render(t,e){return this.toDomElement(t)}toDomElement(t){const e=t.createElement(this.name);for(const t of this.getAttributeKeys())e.setAttribute(t,this.getAttribute(t));return e}}function oo(){return null}io.prototype.is=function(t,e){return e?e===this.name&&("uiElement"===t||"view:uiElement"===t||"element"===t||"view:element"===t):"uiElement"===t||"view:uiElement"===t||"element"===t||"view:element"===t||"node"===t||"view:node"===t};class ro extends Pi{constructor(t,e,n,i){super(t,e,n,i),this.getFillerOffset=so}_insertChild(t,e){if(e&&(e instanceof mi||Array.from(e).length>0))throw new Vt("view-rawelement-cannot-add",[this,e]);return 0}render(t,e){}}function so(){return null}ro.prototype.is=function(t,e){return e?e===this.name&&("rawElement"===t||"view:rawElement"===t||"element"===t||"view:element"===t):"rawElement"===t||"view:rawElement"===t||t===this.name||t==="view:"+this.name||"element"===t||"view:element"===t||"node"===t||"view:node"===t};class ao extends(Ut(gi)){document;_children=[];_customProperties=new Map;constructor(t,e){super(),this.document=t,e&&this._insertChild(0,e)}[Symbol.iterator](){return this._children[Symbol.iterator]()}get childCount(){return this._children.length}get isEmpty(){return 0===this.childCount}get root(){return this}get parent(){return null}get name(){}get getFillerOffset(){}getCustomProperty(t){return this._customProperties.get(t)}*getCustomProperties(){yield*this._customProperties.entries()}_appendChild(t){return this._insertChild(this.childCount,t)}getChild(t){return this._children[t]}getChildIndex(t){return this._children.indexOf(t)}getChildren(){return this._children[Symbol.iterator]()}_insertChild(t,e){this._fireChange("children",this,{index:t});let n=0;const i=function(t,e){return"string"==typeof e?[new pi(t,e)]:(he(e)||(e=[e]),Array.from(e).map(e=>"string"==typeof e?new pi(t,e):e instanceof fi?new pi(t,e.data):e))}(this.document,e);for(const e of i)null!==e.parent&&e._remove(),e.parent=this,this._children.splice(t,0,e),t++,n++;return n}_removeChildren(t,e=1){this._fireChange("children",this,{index:t});for(let n=t;n<t+e;n++)this._children[n].parent=null;return this._children.splice(t,e)}_fireChange(t,e,n){this.fire(`change:${t}`,e,n)}_setCustomProperty(t,e){this._customProperties.set(t,e)}_removeCustomProperty(t){return this._customProperties.delete(t)}}ao.prototype.is=function(t){return"documentFragment"===t||"view:documentFragment"===t};class lo{document;_cloneGroups=new Map;_slotFactory=null;constructor(t){this.document=t}setSelection(...t){this.document.selection._setTo(...t)}setSelectionFocus(t,e){this.document.selection._setFocus(t,e)}createDocumentFragment(t){return new ao(this.document,t)}createText(t){return new pi(this.document,t)}createAttributeElement(t,e,n={}){const i=new Zi(this.document,t,e);return"number"==typeof n.priority&&(i._priority=n.priority),n.id&&(i._id=n.id),n.renderUnsafeAttributes&&i._unsafeAttributesToRender.push(...n.renderUnsafeAttributes),i}createContainerElement(t,e,n={},i={}){let o;!function(t){return E(t)}(n)?o=n:i=n;const r=new Li(this.document,t,e,o);return i.renderUnsafeAttributes&&r._unsafeAttributesToRender.push(...i.renderUnsafeAttributes),r}createEditableElement(t,e,n={}){const i=new zi(this.document,t,e);return n.renderUnsafeAttributes&&i._unsafeAttributesToRender.push(...n.renderUnsafeAttributes),i}createEmptyElement(t,e,n={}){const i=new eo(this.document,t,e);return n.renderUnsafeAttributes&&i._unsafeAttributesToRender.push(...n.renderUnsafeAttributes),i}createUIElement(t,e,n){const i=new io(this.document,t,e);return n&&(i.render=n),i}createRawElement(t,e,n,i={}){const o=new ro(this.document,t,e);return n&&(o.render=n),i.renderUnsafeAttributes&&o._unsafeAttributesToRender.push(...i.renderUnsafeAttributes),o}setAttribute(t,e,n,i){void 0!==i?i._setAttribute(t,e,n):n._setAttribute(t,e)}removeAttribute(t,e,n){void 0!==n?n._removeAttribute(t,e):e._removeAttribute(t)}addClass(t,e){e._addClass(t)}removeClass(t,e){e._removeClass(t)}setStyle(t,e,n){E(t)&&void 0===n?e._setStyle(t):n._setStyle(t,e)}removeStyle(t,e){e._removeStyle(t)}setCustomProperty(t,e,n){n._setCustomProperty(t,e)}removeCustomProperty(t,e){return e._removeCustomProperty(t)}breakAttributes(t){return t instanceof Bi?this._breakAttributes(t):this._breakAttributesRange(t)}breakContainer(t){const e=t.parent;if(!e.is("containerElement"))throw new Vt("view-writer-break-non-container-element",this.document);if(!e.parent)throw new Vt("view-writer-break-root",this.document);if(t.isAtStart)return Bi._createBefore(e);if(!t.isAtEnd){const n=e._clone(!1);this.insert(Bi._createAfter(e),n);const i=new Fi(t,Bi._createAt(e,"end")),o=new Bi(n,0);this.move(i,o)}return Bi._createAfter(e)}mergeAttributes(t){const e=t.offset,n=t.parent;if(n.is("$text"))return t;if(n.is("attributeElement")&&0===n.childCount){const t=n.parent,e=n.index;return n._remove(),this._removeFromClonedElementsGroup(n),this.mergeAttributes(new Bi(t,e))}const i=n.getChild(e-1),o=n.getChild(e);if(!i||!o)return t;if(i.is("$text")&&o.is("$text"))return mo(i,o);if(i.is("attributeElement")&&o.is("attributeElement")&&i.isSimilar(o)){const t=i.childCount;return i._appendChild(o.getChildren()),o._remove(),this._removeFromClonedElementsGroup(o),this.mergeAttributes(new Bi(i,t))}return t}mergeContainers(t){const e=t.nodeBefore,n=t.nodeAfter;if(!(e&&n&&e.is("containerElement")&&n.is("containerElement")))throw new Vt("view-writer-merge-containers-invalid-position",this.document);const i=e.getChild(e.childCount-1),o=i instanceof pi?Bi._createAt(i,"end"):Bi._createAt(e,"end");return this.move(Fi._createIn(n),Bi._createAt(e,"end")),this.remove(Fi._createOn(n)),o}insert(t,e){fo(e=he(e)?[...e]:[e],this.document);const n=e.reduce((t,e)=>{const n=t[t.length-1],i=!e.is("uiElement");return n&&n.breakAttributes==i?n.nodes.push(e):t.push({breakAttributes:i,nodes:[e]}),t},[]);let i=null,o=t;for(const{nodes:t,breakAttributes:e}of n){const n=this._insertNodes(o,t,e);i||(i=n.start),o=n.end}return i?new Fi(i,o):new Fi(t)}remove(t){const e=t instanceof Fi?t:Fi._createOn(t);if(ko(e,this.document),e.isCollapsed)return new ao(this.document);const{start:n,end:i}=this._breakAttributesRange(e,!0),o=n.parent,r=i.offset-n.offset,s=o._removeChildren(n.offset,r);for(const t of s)this._removeFromClonedElementsGroup(t);const a=this.mergeAttributes(n);return e.start=a,e.end=a.clone(),new ao(this.document,s)}clear(t,e){ko(t,this.document);const n=t.getWalker({direction:"backward",ignoreElementEnd:!0});for(const i of n){const n=i.item;let o;if(n.is("element")&&e.isSimilar(n))o=Fi._createOn(n);else if(!i.nextPosition.isAfter(t.start)&&n.is("$textProxy")){const t=n.getAncestors().find(t=>t.is("element")&&e.isSimilar(t));t&&(o=Fi._createIn(t))}o&&(o.end.isAfter(t.end)&&(o.end=t.end),o.start.isBefore(t.start)&&(o.start=t.start),this.remove(o))}}move(t,e){let n;if(e.isAfter(t.end)){const i=(e=this._breakAttributes(e,!0)).parent,o=i.childCount;t=this._breakAttributesRange(t,!0),n=this.remove(t),e.offset+=i.childCount-o}else n=this.remove(t);return this.insert(e,n)}wrap(t,e){if(!(e instanceof Zi))throw new Vt("view-writer-wrap-invalid-attribute",this.document);if(ko(t,this.document),t.isCollapsed){let i=t.start;i.parent.is("element")&&(n=i.parent,!Array.from(n.getChildren()).some(t=>!t.is("uiElement")))&&(i=i.getLastMatchingPosition(t=>t.item.is("uiElement"))),i=this._wrapPosition(i,e);const o=this.document.selection;return o.isCollapsed&&o.getFirstPosition().isEqual(t.start)&&this.setSelection(i),new Fi(i)}return this._wrapRange(t,e);var n}unwrap(t,e){if(!(e instanceof Zi))throw new Vt("view-writer-unwrap-invalid-attribute",this.document);if(ko(t,this.document),t.isCollapsed)return t;const{start:n,end:i}=this._breakAttributesRange(t,!0),o=n.parent,r=this._unwrapChildren(o,n.offset,i.offset,e),s=this.mergeAttributes(r.start);s.isEqual(r.start)||r.end.offset--;const a=this.mergeAttributes(r.end);return new Fi(s,a)}rename(t,e){const n=new Li(this.document,t,e.getAttributes());return this.insert(Bi._createAfter(e),n),this.move(Fi._createIn(e),Bi._createAt(n,0)),this.remove(Fi._createOn(e)),n}clearClonedElementsGroup(t){this._cloneGroups.delete(t)}createPositionAt(t,e){return Bi._createAt(t,e)}createPositionAfter(t){return Bi._createAfter(t)}createPositionBefore(t){return Bi._createBefore(t)}createRange(t,e){return new Fi(t,e)}createRangeOn(t){return Fi._createOn(t)}createRangeIn(t){return Fi._createIn(t)}createSelection(...t){return new Hi(...t)}createSlot(t="children"){if(!this._slotFactory)throw new Vt("view-writer-invalid-create-slot-context",this.document);return this._slotFactory(this,t)}_registerSlotFactory(t){this._slotFactory=t}_clearSlotFactory(){this._slotFactory=null}_insertNodes(t,e,n){let i,o;if(i=n?co(t):t.parent.is("$text")?t.parent.parent:t.parent,!i)throw new Vt("view-writer-invalid-position-container",this.document);o=n?this._breakAttributes(t,!0):t.parent.is("$text")?go(t):t;const r=i._insertChild(o.offset,e);for(const t of e)this._addToClonedElementsGroup(t);const s=o.getShiftedBy(r),a=this.mergeAttributes(o);a.isEqual(o)||s.offset--;const l=this.mergeAttributes(s);return new Fi(a,l)}_wrapChildren(t,e,n,i){let o=e;const r=[];for(;o<n;){const e=t.getChild(o),n=e.is("$text"),s=e.is("attributeElement");if(s&&e._canMergeAttributesFrom(i))e._mergeAttributesFrom(i),r.push(new Bi(t,o));else if(n||!s||uo(i,e)){const n=i._clone();e._remove(),n._appendChild(e),t._insertChild(o,n),this._addToClonedElementsGroup(n),r.push(new Bi(t,o))}else this._wrapChildren(e,0,e.childCount,i);o++}let s=0;for(const t of r)t.offset-=s,t.offset!=e&&(this.mergeAttributes(t).isEqual(t)||(s++,n--));return Fi._createFromParentsAndOffsets(t,e,t,n)}_unwrapChildren(t,e,n,i){let o=e;const r=[];for(;o<n;){const e=t.getChild(o);if(e.is("attributeElement")){if(e.isSimilar(i)){const i=e.getChildren(),s=e.childCount;e._remove(),t._insertChild(o,i),this._removeFromClonedElementsGroup(e),r.push(new Bi(t,o),new Bi(t,o+s)),o+=s,n+=s-1;continue}e._canSubtractAttributesOf(i)?(e._subtractAttributesOf(i),r.push(new Bi(t,o),new Bi(t,o+1)),o++):(this._unwrapChildren(e,0,e.childCount,i),o++)}else o++}let s=0;for(const t of r)t.offset-=s,t.offset!=e&&t.offset!=n&&(this.mergeAttributes(t).isEqual(t)||(s++,n--));return Fi._createFromParentsAndOffsets(t,e,t,n)}_wrapRange(t,e){const{start:n,end:i}=this._breakAttributesRange(t,!0),o=n.parent,r=this._wrapChildren(o,n.offset,i.offset,e),s=this.mergeAttributes(r.start);s.isEqual(r.start)||r.end.offset--;const a=this.mergeAttributes(r.end);return new Fi(s,a)}_wrapPosition(t,e){if(e.isSimilar(t.parent))return ho(t.clone());t.parent.is("$text")&&(t=go(t));const n=this.createAttributeElement("_wrapPosition-fake-element");n._priority=Number.POSITIVE_INFINITY,n.isSimilar=()=>!1,t.parent._insertChild(t.offset,n);const i=new Fi(t,t.getShiftedBy(1));this.wrap(i,e);const o=new Bi(n.parent,n.index);n._remove();const r=o.nodeBefore,s=o.nodeAfter;return r&&r.is("view:$text")&&s&&s.is("view:$text")?mo(r,s):ho(o)}_breakAttributesRange(t,e=!1){const n=t.start,i=t.end;if(ko(t,this.document),t.isCollapsed){const n=this._breakAttributes(t.start,e);return new Fi(n,n)}const o=this._breakAttributes(i,e),r=o.parent.childCount,s=this._breakAttributes(n,e);return o.offset+=o.parent.childCount-r,new Fi(s,o)}_breakAttributes(t,e=!1){const n=t.offset,i=t.parent;if(t.parent.is("emptyElement"))throw new Vt("view-writer-cannot-break-empty-element",this.document);if(t.parent.is("uiElement"))throw new Vt("view-writer-cannot-break-ui-element",this.document);if(t.parent.is("rawElement"))throw new Vt("view-writer-cannot-break-raw-element",this.document);if(!e&&i.is("$text")&&bo(i.parent))return t.clone();if(bo(i))return t.clone();if(i.is("$text"))return this._breakAttributes(go(t),e);if(n==i.childCount){const t=new Bi(i.parent,i.index+1);return this._breakAttributes(t,e)}if(0===n){const t=new Bi(i.parent,i.index);return this._breakAttributes(t,e)}{const t=i.index+1,o=i._clone();i.parent._insertChild(t,o),this._addToClonedElementsGroup(o);const r=i.childCount-n,s=i._removeChildren(n,r);o._appendChild(s);const a=new Bi(i.parent,t);return this._breakAttributes(a,e)}}_addToClonedElementsGroup(t){if(!t.root.is("rootElement"))return;if(t.is("element"))for(const e of t.getChildren())this._addToClonedElementsGroup(e);const e=t.id;if(!e)return;let n=this._cloneGroups.get(e);n||(n=new Set,this._cloneGroups.set(e,n)),n.add(t),t._clonesGroup=n}_removeFromClonedElementsGroup(t){if(t.is("element"))for(const e of t.getChildren())this._removeFromClonedElementsGroup(e);const e=t.id;if(!e)return;const n=this._cloneGroups.get(e);n&&n.delete(t)}}function co(t){let e=t.parent;for(;!bo(e);){if(!e)return;e=e.parent}return e}function uo(t,e){return t.priority<e.priority||!(t.priority>e.priority)&&t.getIdentity()<e.getIdentity()}function ho(t){const e=t.nodeBefore;if(e&&e.is("$text"))return new Bi(e,e.data.length);const n=t.nodeAfter;return n&&n.is("$text")?new Bi(n,0):t}function go(t){if(t.offset==t.parent.data.length)return new Bi(t.parent.parent,t.parent.index+1);if(0===t.offset)return new Bi(t.parent.parent,t.parent.index);const e=t.parent.data.slice(t.offset);return t.parent._data=t.parent.data.slice(0,t.offset),t.parent.parent._insertChild(t.parent.index+1,new pi(t.root.document,e)),new Bi(t.parent.parent,t.parent.index+1)}function mo(t,e){const n=t.data.length;return t._data+=e.data,e._remove(),new Bi(t,n)}const po=[pi,Zi,Li,eo,ro,io];function fo(t,e){for(const n of t){if(!po.some(t=>n instanceof t))throw new Vt("view-writer-insert-invalid-node-type",e);n.is("$text")||fo(n.getChildren(),e)}}function bo(t){return t&&(t.is("containerElement")||t.is("documentFragment"))}function ko(t,e){const n=co(t.start),i=co(t.end);if(!n||!i||n!==i)throw new Vt("view-writer-invalid-range-container",e)}const wo=t=>t.createTextNode(" "),_o=t=>{const e=t.createElement("span");return e.dataset.ckeFiller="true",e.innerText=" ",e},vo=t=>{const e=t.createElement("br");return e.dataset.ckeFiller="true",e},yo="⁠".repeat(7);function Co(t){return"string"==typeof t?t.substr(0,7)===yo:Ee(t)&&t.data.substr(0,7)===yo}function xo(t){return 7==t.data.length&&Co(t)}function Ao(t){const e="string"==typeof t?t:t.data;return Co(t)?e.slice(7):e}function Eo(t,e){if(e.keyCode==an.arrowleft){const t=e.domTarget.ownerDocument.defaultView.getSelection();if(1==t.rangeCount&&t.getRangeAt(0).collapsed){const e=t.getRangeAt(0).startContainer,n=t.getRangeAt(0).startOffset;Co(e)&&n<=7&&t.collapse(e,0)}}}class So extends(ie()){domDocuments=new Set;domConverter;markedAttributes=new Set;markedChildren=new Set;markedTexts=new Set;selection;_inlineFiller=null;_fakeSelectionContainer=null;constructor(t,e){super(),this.domConverter=t,this.selection=e,this.set("isFocused",!1),this.set("isSelecting",!1),this.set("isComposing",!1),ft.isBlink&&!ft.isAndroid&&this.on("change:isSelecting",()=>{this.isSelecting||this.render()})}markToSync(t,e){if("text"===t)this.domConverter.mapViewToDom(e.parent)&&this.markedTexts.add(e);else{if(!this.domConverter.mapViewToDom(e))return;if("attributes"===t)this.markedAttributes.add(e);else{if("children"!==t)throw new Vt("view-renderer-unknown-type",this);this.markedChildren.add(e)}}}render(){if(this.isComposing&&!ft.isAndroid)return;let t=null;const e=!(ft.isBlink&&!ft.isAndroid&&this.isSelecting);for(const t of this.markedChildren)this._updateChildrenMappings(t);e?(this._inlineFiller&&!this._isSelectionInInlineFiller()&&this._removeInlineFiller(),this._inlineFiller?t=this._getInlineFillerPosition():this._needsInlineFillerAtSelection()&&(t=this.selection.getFirstPosition(),this.markedChildren.add(t.parent))):this._inlineFiller&&this._inlineFiller.parentNode&&(t=this.domConverter.domPositionToView(this._inlineFiller),t&&t.parent.is("$text")&&(t=Bi._createBefore(t.parent)));for(const t of this.markedAttributes)this._updateAttrs(t);for(const e of this.markedChildren)this._updateChildren(e,{inlineFillerPosition:t});for(const e of this.markedTexts)!this.markedChildren.has(e.parent)&&this.domConverter.mapViewToDom(e.parent)&&this._updateText(e,{inlineFillerPosition:t});if(e)if(t){const e=this.domConverter.viewPositionToDom(t),n=e.parent.ownerDocument;Co(e.parent)?this._inlineFiller=e.parent:this._inlineFiller=To(n,e.parent,e.offset)}else this._inlineFiller=null;this._updateFocus(),this._updateSelection(),this.domConverter._clearTemporaryCustomProperties(),this.markedTexts.clear(),this.markedAttributes.clear(),this.markedChildren.clear()}_updateChildrenMappings(t){const e=this.domConverter.mapViewToDom(t);if(!e)return;const n=Array.from(e.childNodes),i=Array.from(this.domConverter.viewChildrenToDom(t,{withChildren:!1})),o=this._diffNodeLists(n,i),r=this._findUpdateActions(o,n,i,Io);if(-1!==r.indexOf("update")){const e={equal:0,insert:0,delete:0};for(const o of r)if("update"===o){const o=e.equal+e.insert,r=e.equal+e.delete,s=t.getChild(o);!s||s.is("uiElement")||s.is("rawElement")||this._updateElementMappings(s,n[r]),qe(i[o]),e.equal++}else e[o]++}}_updateElementMappings(t,e){this.domConverter.unbindDomElement(e),this.domConverter.bindElements(e,t),this.markedChildren.add(t),this.markedAttributes.add(t)}_getInlineFillerPosition(){const t=this.selection.getFirstPosition();return t.parent.is("$text")?Bi._createBefore(t.parent):t}_isSelectionInInlineFiller(){if(1!=this.selection.rangeCount||!this.selection.isCollapsed)return!1;const t=this.selection.getFirstPosition(),e=this.domConverter.viewPositionToDom(t);return!!(e&&Ee(e.parent)&&Co(e.parent))}_removeInlineFiller(){const t=this._inlineFiller;if(!Co(t))throw new Vt("view-renderer-filler-was-lost",this);xo(t)?t.remove():t.data=t.data.substr(7),this._inlineFiller=null}_needsInlineFillerAtSelection(){if(1!=this.selection.rangeCount||!this.selection.isCollapsed)return!1;const t=this.selection.getFirstPosition(),e=t.parent,n=t.offset;if(!this.domConverter.mapViewToDom(e.root))return!1;if(!e.is("element"))return!1;if(!function(t){if("false"==t.getAttribute("contenteditable"))return!1;const e=t.findAncestor(t=>t.hasAttribute("contenteditable"));return!e||"true"==e.getAttribute("contenteditable")}(e))return!1;const i=t.nodeBefore,o=t.nodeAfter;return!(i instanceof pi||o instanceof pi||!(n!==e.getFillerOffset()||i&&i.is("element","br"))||ft.isAndroid&&(i||o))}_updateText(t,e){const n=this.domConverter.findCorrespondingDomText(t);let i=this.domConverter.viewToDom(t).data;const o=e.inlineFillerPosition;o&&o.parent==t.parent&&o.offset==t.index&&(i=yo+i),this._updateTextNode(n,i)}_updateAttrs(t){const e=this.domConverter.mapViewToDom(t);if(e){for(const n of Array.from(e.attributes)){const i=n.name;t.hasAttribute(i)||this.domConverter.removeDomElementAttribute(e,i)}for(const n of t.getAttributeKeys())this.domConverter.setDomElementAttribute(e,n,t.getAttribute(n),t)}}_updateChildren(t,e){const n=this.domConverter.mapViewToDom(t);if(!n)return;if(ft.isAndroid){let t=null;for(const e of Array.from(n.childNodes)){if(t&&Ee(t)&&Ee(e)){n.normalize();break}t=e}}const i=e.inlineFillerPosition,o=n.childNodes,r=Array.from(this.domConverter.viewChildrenToDom(t,{bind:!0}));i&&i.parent===t&&To(n.ownerDocument,r,i.offset);const s=this._diffNodeLists(o,r),a=this._findUpdateActions(s,o,r,Po);let l=0;const c=new Set;for(const t of a)"delete"===t?(c.add(o[l]),qe(o[l])):"equal"!==t&&"update"!==t||l++;l=0;for(const t of a)"insert"===t?(Be(n,l,r[l]),l++):"update"===t?(this._updateTextNode(o[l],r[l].data),l++):"equal"===t&&(this._markDescendantTextToSync(this.domConverter.domToView(r[l])),l++);for(const t of c)t.parentNode||this.domConverter.unbindDomElement(t)}_diffNodeLists(t,e){return Tt(t=function(t,e){const n=Array.from(t);return 0!=n.length&&e?(n[n.length-1]==e&&n.pop(),n):n}(t,this._fakeSelectionContainer),e,Mo.bind(null,this.domConverter))}_findUpdateActions(t,e,n,i){if(-1===t.indexOf("insert")||-1===t.indexOf("delete"))return t;let o=[],r=[],s=[];const a={equal:0,insert:0,delete:0};for(const l of t)"insert"===l?s.push(n[a.equal+a.insert]):"delete"===l?r.push(e[a.equal+a.delete]):(o=o.concat(Tt(r,s,i).map(t=>"equal"===t?"update":t)),o.push("equal"),r=[],s=[]),a[l]++;return o.concat(Tt(r,s,i).map(t=>"equal"===t?"update":t))}_updateTextNode(t,e){const n=t.data;n!=e&&(ft.isAndroid&&this.isComposing&&n.replace(/\u00A0/g," ")==e.replace(/\u00A0/g," ")||this._updateTextNodeInternal(t,e))}_updateTextNodeInternal(t,e){const n=At(t.data,e);for(const e of n)"insert"===e.type?t.insertData(e.index,e.values.join("")):t.deleteData(e.index,e.howMany)}_markDescendantTextToSync(t){if(t)if(t.is("$text"))this.markedTexts.add(t);else if(t.is("element"))for(const e of t.getChildren())this._markDescendantTextToSync(e)}_updateSelection(){if(ft.isBlink&&!ft.isAndroid&&this.isSelecting&&!this.markedChildren.size)return;if(0===this.selection.rangeCount)return this._removeDomSelection(),void this._removeFakeSelection();const t=this.domConverter.mapViewToDom(this.selection.editableElement);this.isFocused&&t?this.selection.isFake?this._updateFakeSelection(t):this._fakeSelectionContainer&&this._fakeSelectionContainer.isConnected?(this._removeFakeSelection(),this._updateDomSelection(t)):this.isComposing&&ft.isAndroid||this._updateDomSelection(t):!this.selection.isFake&&this._fakeSelectionContainer&&this._fakeSelectionContainer.isConnected&&this._removeFakeSelection()}_updateFakeSelection(t){const e=t.ownerDocument;this._fakeSelectionContainer||(this._fakeSelectionContainer=function(t){const e=t.createElement("div");return e.className="ck-fake-selection-container",Object.assign(e.style,{position:"fixed",top:0,left:"-9999px",width:"42px"}),e.textContent=" ",e}(e));const n=this._fakeSelectionContainer;if(this.domConverter.bindFakeSelection(n,this.selection),!this._fakeSelectionNeedsUpdate(t))return;n.parentElement&&n.parentElement==t||t.appendChild(n),n.textContent=this.selection.fakeSelectionLabel||" ";const i=e.getSelection(),o=e.createRange();i.removeAllRanges(),o.selectNodeContents(n),i.addRange(o)}_updateDomSelection(t){const e=t.ownerDocument.defaultView.getSelection();if(!this._domSelectionNeedsUpdate(e))return;const n=this.domConverter.viewPositionToDom(this.selection.anchor),i=this.domConverter.viewPositionToDom(this.selection.focus);e.setBaseAndExtent(n.parent,n.offset,i.parent,i.offset),ft.isGecko&&function(t,e){let n=t.parent,i=t.offset;if(Ee(n)&&xo(n)&&(i=De(n)+1,n=n.parentNode),n.nodeType!=Node.ELEMENT_NODE||i!=n.childNodes.length-1)return;const o=n.childNodes[i];o&&"BR"==o.tagName&&e.addRange(e.getRangeAt(0))}(i,e)}_domSelectionNeedsUpdate(t){if(!this.domConverter.isDomSelectionCorrect(t))return!0;const e=t&&this.domConverter.domSelectionToView(t);return!(e&&this.selection.isEqual(e)||!this.selection.isCollapsed&&this.selection.isSimilar(e))}_fakeSelectionNeedsUpdate(t){const e=this._fakeSelectionContainer,n=t.ownerDocument.getSelection();return!e||e.parentElement!==t||n.anchorNode!==e&&!e.contains(n.anchorNode)||e.textContent!==this.selection.fakeSelectionLabel}_removeDomSelection(){for(const t of this.domDocuments){const e=t.getSelection();if(e.rangeCount){const n=t.activeElement,i=this.domConverter.mapDomToView(n);n&&i&&e.removeAllRanges()}}}_removeFakeSelection(){const t=this._fakeSelectionContainer;t&&t.remove()}_updateFocus(){if(this.isFocused){const t=this.selection.editableElement;t&&this.domConverter.focus(t)}}}function To(t,e,n){const i=e instanceof Array?e:e.childNodes,o=i[n];if(Ee(o))return o.data=yo+o.data,o;{const o=t.createTextNode(yo);return Array.isArray(e)?i.splice(n,0,o):Be(e,n,o),o}}function Io(t,e){return be(t)&&be(e)&&!Ee(t)&&!Ee(e)&&!Fe(t)&&!Fe(e)&&t.tagName.toLowerCase()===e.tagName.toLowerCase()}function Po(t,e){return be(t)&&be(e)&&Ee(t)&&Ee(e)}function Mo(t,e,n){return e===n||(Ee(e)&&Ee(n)?e.data===n.data:!(!t.isBlockFiller(e)||!t.isBlockFiller(n)))}const No=vo(gt.document),Lo=wo(gt.document),Vo=_o(gt.document),zo="data-ck-unsafe-attribute-",Oo="data-ck-unsafe-element";class Ro{document;renderingMode;blockFillerMode;preElements;blockElements;inlineObjectElements;unsafeElements;_domDocument;_domToViewMapping=new WeakMap;_viewToDomMapping=new WeakMap;_fakeSelectionMapping=new WeakMap;_rawContentElementMatcher=new vi;_inlineObjectElementMatcher=new vi;_elementsWithTemporaryCustomProperties=new Set;constructor(t,{blockFillerMode:e,renderingMode:n="editing"}={}){this.document=t,this.renderingMode=n,this.blockFillerMode=e||("editing"===n?"br":"nbsp"),this.preElements=["pre","textarea"],this.blockElements=["address","article","aside","blockquote","caption","center","dd","details","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","legend","li","main","menu","nav","ol","p","pre","section","summary","table","tbody","td","tfoot","th","thead","tr","ul"],this.inlineObjectElements=["object","iframe","input","button","textarea","select","option","video","embed","audio","img","canvas"],this.unsafeElements=["script","style"],this._domDocument="editing"===this.renderingMode?gt.document:gt.document.implementation.createHTMLDocument("")}get domDocument(){return this._domDocument}bindFakeSelection(t,e){this._fakeSelectionMapping.set(t,new Hi(e))}fakeSelectionToView(t){return this._fakeSelectionMapping.get(t)}bindElements(t,e){this._domToViewMapping.set(t,e),this._viewToDomMapping.set(e,t)}unbindDomElement(t){const e=this._domToViewMapping.get(t);if(e){this._domToViewMapping.delete(t),this._viewToDomMapping.delete(e);for(const e of t.children)this.unbindDomElement(e)}}bindDocumentFragments(t,e){this._domToViewMapping.set(t,e),this._viewToDomMapping.set(e,t)}shouldRenderAttribute(t,e,n){return"data"===this.renderingMode||!(t=t.toLowerCase()).startsWith("on")&&("srcdoc"!==t||!e.match(/\bon\S+\s*=|javascript:|<\s*\/*script/i))&&("img"===n&&("src"===t||"srcset"===t)||"source"===n&&"srcset"===t||!e.match(/^\s*(javascript:|data:(image\/svg|text\/x?html))/i))}setContentOf(t,e){if("data"===this.renderingMode)return void(t.innerHTML=e);const n=(new DOMParser).parseFromString(e,"text/html"),i=n.createDocumentFragment(),o=n.body.childNodes;for(;o.length>0;)i.appendChild(o[0]);const r=n.createTreeWalker(i,NodeFilter.SHOW_ELEMENT),s=[];let a;for(;a=r.nextNode();)s.push(a);for(const t of s){for(const e of t.getAttributeNames())this.setDomElementAttribute(t,e,t.getAttribute(e));const e=t.tagName.toLowerCase();this._shouldRenameElement(e)&&($o(e),t.replaceWith(this._createReplacementDomElement(e,t)))}for(;t.firstChild;)t.firstChild.remove();t.append(i)}viewToDom(t,e={}){if(t.is("$text")){const e=this._processDataFromViewText(t);return this._domDocument.createTextNode(e)}{const n=t;if(this.mapViewToDom(n)){if(!n.getCustomProperty("editingPipeline:doNotReuseOnce"))return this.mapViewToDom(n);this._elementsWithTemporaryCustomProperties.add(n)}let i;if(n.is("documentFragment"))i=this._domDocument.createDocumentFragment(),e.bind&&this.bindDocumentFragments(i,n);else{if(n.is("uiElement"))return i="$comment"===n.name?this._domDocument.createComment(n.getCustomProperty("$rawContent")):n.render(this._domDocument,this),e.bind&&this.bindElements(i,n),i;this._shouldRenameElement(n.name)?($o(n.name),i=this._createReplacementDomElement(n.name)):i=n.hasAttribute("xmlns")?this._domDocument.createElementNS(n.getAttribute("xmlns"),n.name):this._domDocument.createElement(n.name),n.is("rawElement")&&n.render(i,this),e.bind&&this.bindElements(i,n);for(const t of n.getAttributeKeys())this.setDomElementAttribute(i,t,n.getAttribute(t),n)}if(!1!==e.withChildren)for(const t of this.viewChildrenToDom(n,e))i instanceof HTMLTemplateElement?i.content.appendChild(t):i.appendChild(t);return i}}setDomElementAttribute(t,e,n,i){const o=this.shouldRenderAttribute(e,n,t.tagName.toLowerCase())||i&&i.shouldRenderUnsafeAttribute(e);o||zt("domconverter-unsafe-attribute-detected",{domElement:t,key:e,value:n}),je(e)?(t.hasAttribute(e)&&!o?t.removeAttribute(e):t.hasAttribute(zo+e)&&o&&t.removeAttribute(zo+e),t.setAttribute(o?e:zo+e,n)):zt("domconverter-invalid-attribute-detected",{domElement:t,key:e,value:n})}removeDomElementAttribute(t,e){e!=Oo&&(t.removeAttribute(e),t.removeAttribute(zo+e))}*viewChildrenToDom(t,e={}){const n=t.getFillerOffset&&t.getFillerOffset();let i=0;for(const o of t.getChildren()){n===i&&(yield this._getBlockFiller());const t=o.is("element")&&!!o.getCustomProperty("dataPipeline:transparentRendering")&&!wn(o.getAttributes());if(t&&"data"==this.renderingMode)if(o.is("rawElement")){const t=this._domDocument.createElement(o.name);o.render(t,this),yield*[...t.childNodes]}else yield*this.viewChildrenToDom(o,e);else t&&zt("domconverter-transparent-rendering-unsupported-in-editing-pipeline",{viewElement:o}),yield this.viewToDom(o,e);i++}n===i&&(yield this._getBlockFiller())}viewRangeToDom(t){const e=this.viewPositionToDom(t.start),n=this.viewPositionToDom(t.end),i=this._domDocument.createRange();return i.setStart(e.parent,e.offset),i.setEnd(n.parent,n.offset),i}viewPositionToDom(t){const e=t.parent;if(e.is("$text")){const n=this.findCorrespondingDomText(e);if(!n)return null;let i=t.offset;return Co(n)&&(i+=7),n.data&&i>n.data.length&&(i=n.data.length),{parent:n,offset:i}}{let n,i,o;if(0===t.offset){if(n=this.mapViewToDom(e),!n)return null;o=n.childNodes[0]}else{const e=t.nodeBefore;if(i=e.is("$text")?this.findCorrespondingDomText(e):this.mapViewToDom(e),!i)return null;n=i.parentNode,o=i.nextSibling}return Ee(o)&&Co(o)?{parent:o,offset:7}:{parent:n,offset:i?De(i)+1:0}}}domToView(t,e={}){const n=[],i=this._domToView(t,e,n),o=i.next().value;return o?(i.next(),this._processDomInlineNodes(null,n,e),"br"==this.blockFillerMode&&Ho(o)||o.is("$text")&&0==o.data.length?null:o):null}*domChildrenToView(t,e={},n=[]){let i=[];i=t instanceof HTMLTemplateElement?[...t.content.childNodes]:[...t.childNodes];for(let o=0;o<i.length;o++){const r=i[o],s=this._domToView(r,e,n),a=s.next().value;null!==a&&(this._isBlockViewElement(a)&&this._processDomInlineNodes(t,n,e),"br"==this.blockFillerMode&&Ho(a)||(yield a),s.next())}this._processDomInlineNodes(t,n,e)}domSelectionToView(t){if(function(t){if(!ft.isGecko)return!1;if(!t.rangeCount)return!1;const e=t.getRangeAt(0).startContainer;try{Object.prototype.toString.call(e)}catch{return!0}return!1}(t))return new Hi([]);if(1===t.rangeCount){let e=t.getRangeAt(0).startContainer;Ee(e)&&(e=e.parentNode);const n=this.fakeSelectionToView(e);if(n)return n}const e=this.isDomSelectionBackward(t),n=[];for(let e=0;e<t.rangeCount;e++){const i=t.getRangeAt(e),o=this.domRangeToView(i);o&&n.push(o)}return new Hi(n,{backward:e})}domRangeToView(t){const e=this.domPositionToView(t.startContainer,t.startOffset),n=this.domPositionToView(t.endContainer,t.endOffset);return e&&n?new Fi(e,n):null}domPositionToView(t,e=0){if(this.isBlockFiller(t))return this.domPositionToView(t.parentNode,De(t));const n=this.mapDomToView(t);if(n&&(n.is("uiElement")||n.is("rawElement")))return Bi._createBefore(n);if(Ee(t)){if(xo(t))return this.domPositionToView(t.parentNode,De(t));const n=this.findCorrespondingViewText(t);let i=e;return n?(Co(t)&&(i-=7,i=i<0?0:i),new Bi(n,i)):null}if(0===e){const e=this.mapDomToView(t);if(e)return new Bi(e,0)}else{const n=t.childNodes[e-1];if(Ee(n)&&xo(n)||n&&this.isBlockFiller(n))return this.domPositionToView(n.parentNode,De(n));const i=Ee(n)?this.findCorrespondingViewText(n):this.mapDomToView(n);if(i&&i.parent)return new Bi(i.parent,i.index+1)}return null}mapDomToView(t){return this.getHostViewElement(t)||this._domToViewMapping.get(t)}findCorrespondingViewText(t){if(xo(t))return null;const e=this.getHostViewElement(t);if(e)return e;const n=t.previousSibling;if(n){if(!this.isElement(n))return null;const t=this.mapDomToView(n);if(t){const e=t.nextSibling;return e instanceof pi?e:null}}else{const e=this.mapDomToView(t.parentNode);if(e){const t=e.getChild(0);return t instanceof pi?t:null}}return null}mapViewToDom(t){return this._viewToDomMapping.get(t)}findCorrespondingDomText(t){const e=t.previousSibling;return e&&this.mapViewToDom(e)?this.mapViewToDom(e).nextSibling:!e&&t.parent&&this.mapViewToDom(t.parent)?this.mapViewToDom(t.parent).childNodes[0]:null}focus(t){const e=this.mapViewToDom(t);if(!e||e.ownerDocument.activeElement===e)return;const{scrollX:n,scrollY:i}=gt.window,o=[];Do(e,t=>{const{scrollLeft:e,scrollTop:n}=t;o.push([e,n])}),e.focus(),Do(e,t=>{const[e,n]=o.shift();t.scrollLeft=e,t.scrollTop=n}),gt.window.scrollTo(n,i)}_clearDomSelection(){const t=this.mapViewToDom(this.document.selection.editableElement);if(!t)return;const e=t.ownerDocument.defaultView.getSelection(),n=this.domSelectionToView(e);n&&n.rangeCount>0&&e.removeAllRanges()}isElement(t){return t&&t.nodeType==Node.ELEMENT_NODE}isDocumentFragment(t){return t&&t.nodeType==Node.DOCUMENT_FRAGMENT_NODE}isBlockFiller(t){return"br"==this.blockFillerMode?t.isEqualNode(No):!!Uo(t,this.blockElements)||t.isEqualNode(Vo)||function(t,e){return t.isEqualNode(Lo)&&Bo(t,e)&&1===t.parentNode.childNodes.length}(t,this.blockElements)}isDomSelectionBackward(t){if(t.isCollapsed)return!1;const e=this._domDocument.createRange();try{e.setStart(t.anchorNode,t.anchorOffset),e.setEnd(t.focusNode,t.focusOffset)}catch{return!1}const n=e.collapsed;return e.detach(),n}getHostViewElement(t){const e=function(t){const e=[];let n=t;for(;n&&n.nodeType!=Node.DOCUMENT_NODE;)e.unshift(n),n=n.parentNode;return e}(t);for(e.pop();e.length;){const t=e.pop(),n=this._domToViewMapping.get(t);if(n&&(n.is("uiElement")||n.is("rawElement")))return n}return null}isDomSelectionCorrect(t){return this._isDomSelectionPositionCorrect(t.anchorNode,t.anchorOffset)&&this._isDomSelectionPositionCorrect(t.focusNode,t.focusOffset)}registerRawContentMatcher(t){this._rawContentElementMatcher.add(t)}registerInlineObjectMatcher(t){this._inlineObjectElementMatcher.add(t)}_clearTemporaryCustomProperties(){for(const t of this._elementsWithTemporaryCustomProperties)t._removeCustomProperty("editingPipeline:doNotReuseOnce");this._elementsWithTemporaryCustomProperties.clear()}_getBlockFiller(){switch(this.blockFillerMode){case"nbsp":return wo(this._domDocument);case"markedNbsp":return _o(this._domDocument);case"br":return vo(this._domDocument)}}_isDomSelectionPositionCorrect(t,e){if(Ee(t)&&Co(t)&&e<7)return!1;if(this.isElement(t)&&Co(t.childNodes[e]))return!1;const n=this.mapDomToView(t);return!n||!n.is("uiElement")&&!n.is("rawElement")}*_domToView(t,e,n){if("br"!=this.blockFillerMode&&Uo(t,this.blockElements))return null;const i=this.getHostViewElement(t);if(i)return i;if(Fe(t)&&e.skipComments)return null;if(Ee(t)){if(xo(t))return null;{const e=t.data;if(""===e)return null;const i=new pi(this.document,e);return n.push(i),i}}{let i=this.mapDomToView(t);if(i)return this._isInlineObjectElement(i)&&n.push(i),i;if(this.isDocumentFragment(t))i=new ao(this.document),e.bind&&this.bindDocumentFragments(t,i);else{i=this._createViewElement(t,e),e.bind&&this.bindElements(t,i);const o=t.attributes;if(o)for(let t=o.length,e=0;e<t;e++)i._setAttribute(o[e].name,o[e].value);if(this._isViewElementWithRawContent(i,e))return i._setCustomProperty("$rawContent",t.innerHTML),this._isBlockViewElement(i)||n.push(i),i;if(Fe(t))return i._setCustomProperty("$rawContent",t.data),i}yield i;const o=[];if(!1!==e.withChildren)for(const n of this.domChildrenToView(t,e,o))i._appendChild(n);if(this._isInlineObjectElement(i))n.push(i),this._processDomInlineNodes(null,o,e);else for(const t of o)n.push(t)}}_processDomInlineNodes(t,e,n){if(!e.length)return;if(t&&!this.isDocumentFragment(t)&&!this._isBlockDomElement(t))return;let i=!1;for(let t=0;t<e.length;t++){const o=e[t];if(!o.is("$text")){i=!1;continue}let r,s=!1;if(this._isPreFormatted(o))r=Ao(o.data);else{r=o.data.replace(/[ \n\t\r]{1,}/g," "),s=/[^\S\u00A0]/.test(r.charAt(r.length-1));const a=t>0?e[t-1]:null,l=t+1<e.length?e[t+1]:null,c=!a||a.is("element")&&"br"==a.name||i,d=!l&&!Co(o.data);!1!==n.withChildren&&(c&&(r=r.replace(/^ /,"")),d&&(r=r.replace(/ $/,""))),r=Ao(r),"br"!=this.blockFillerMode&&o.parent&&(jo(o.parent,r)?(r="",o.parent.parent&&(o.parent.parent._setCustomProperty("$hasBlockFiller",!0),o.parent._remove())):Fo(o.parent,r,this.blockElements)&&(r="",o.parent._setCustomProperty("$hasBlockFiller",!0))),r=r.replace(/ \u00A0/g,"  ");const u=l&&l.is("element")&&"br"!=l.name,h=l&&l.is("$text")&&" "==l.data.charAt(0);(/[ \u00A0]\u00A0$/.test(r)||!l||u||h)&&(r=r.replace(/\u00A0$/," ")),(c||a&&a.is("element")&&"br"!=a.name)&&(r=r.replace(/^\u00A0/," "))}0==r.length&&o.parent?(o._remove(),e.splice(t,1),t--):(o._data=r,i=s)}e.length=0}_processDataFromViewText(t){let e=t.data;if(this._isPreFormatted(t))return e;if(" "==e.charAt(0)){const n=this._getTouchingInlineViewNode(t,!1);!(n&&n.is("$textProxy")&&this._nodeEndsWithSpace(n))&&n||(e=" "+e.substr(1))}if(" "==e.charAt(e.length-1)){const n=this._getTouchingInlineViewNode(t,!0),i=n&&n.is("$textProxy")&&" "==n.data.charAt(0);" "!=e.charAt(e.length-2)&&n&&!i||(e=e.substr(0,e.length-1)+" ")}return e.replace(/ {2}/g,"  ")}_nodeEndsWithSpace(t){if(this._isPreFormatted(t))return!1;const e=this._processDataFromViewText(t);return" "==e.charAt(e.length-1)}_isPreFormatted(t){if(function(t,e){return t.getAncestors().some(t=>t.is("element")&&e.includes(t.name))}(t,this.preElements))return!0;for(const e of t.getAncestors({parentFirst:!0}))if(e.is("element")&&e.hasStyle("white-space")&&"inherit"!==e.getStyle("white-space"))return["pre","pre-wrap","break-spaces"].includes(e.getStyle("white-space"));return!1}_getTouchingInlineViewNode(t,e){const n=new Di({startPosition:e?Bi._createAfter(t):Bi._createBefore(t),direction:e?"forward":"backward"});for(const{item:t}of n){if(t.is("$textProxy"))return t;if(!t.is("element")||!t.getCustomProperty("dataPipeline:transparentRendering")){if(t.is("element","br"))return null;if(this._isInlineObjectElement(t))return t;if(t.is("containerElement"))return null}}return null}_isBlockDomElement(t){return this.isElement(t)&&this.blockElements.includes(t.tagName.toLowerCase())}_isBlockViewElement(t){return t.is("element")&&this.blockElements.includes(t.name)}_isInlineObjectElement(t){return!!t.is("element")&&("br"==t.name||this.inlineObjectElements.includes(t.name)||!!this._inlineObjectElementMatcher.match(t))}_createViewElement(t,e){if(Fe(t))return new io(this.document,"$comment");const n=e.keepOriginalCase?t.tagName:t.tagName.toLowerCase();return new Pi(this.document,n)}_isViewElementWithRawContent(t,e){return!1!==e.withChildren&&t.is("element")&&!!this._rawContentElementMatcher.match(t)}_shouldRenameElement(t){const e=t.toLowerCase();return"editing"===this.renderingMode&&this.unsafeElements.includes(e)}_createReplacementDomElement(t,e){const n=this._domDocument.createElement("span");if(n.setAttribute(Oo,t),e){for(;e.firstChild;)n.appendChild(e.firstChild);for(const t of e.getAttributeNames())n.setAttribute(t,e.getAttribute(t))}return n}}function Do(t,e){let n=t;for(;n;)e(n),n=n.parentElement}function Bo(t,e){const n=t.parentNode;return!!n&&!!n.tagName&&e.includes(n.tagName.toLowerCase())}function Fo(t,e,n){return" "==e&&t&&t.is("element")&&1==t.childCount&&n.includes(t.name)}function jo(t,e){return" "==e&&t&&t.is("element","span")&&1==t.childCount&&t.hasAttribute("data-cke-filler")}function Ho(t){return t.is("element","br")&&t.hasAttribute("data-cke-filler")}function Uo(t,e){return"BR"===t.tagName&&Bo(t,e)&&1===t.parentNode.childNodes.length}function $o(t){"script"===t&&zt("domconverter-unsafe-script-element-detected"),"style"===t&&zt("domconverter-unsafe-style-element-detected")}class Wo extends(_e()){view;document;_isEnabled=!1;constructor(t){super(),this.view=t,this.document=t.document}get isEnabled(){return this._isEnabled}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}destroy(){this.disable(),this.stopListening()}checkShouldIgnoreEventFromTarget(t){return t&&3===t.nodeType&&(t=t.parentNode),!(!t||1!==t.nodeType)&&t.matches("[data-cke-ignore-events], [data-cke-ignore-events] *")}}class qo{view;document;domEvent;domTarget;constructor(t,e,n){this.view=t,this.document=t.document,this.domEvent=e,this.domTarget=e.target,Zn(this,n)}get target(){return this.view.domConverter.mapDomToView(this.domTarget)}preventDefault(){this.domEvent.preventDefault()}stopPropagation(){this.domEvent.stopPropagation()}}class Ko extends Wo{useCapture=!1;usePassive=!1;observe(t){("string"==typeof this.domEventType?[this.domEventType]:this.domEventType).forEach(e=>{this.listenTo(t,e,(t,e)=>{this.isEnabled&&!this.checkShouldIgnoreEventFromTarget(e.target)&&this.onDomEvent(e)},{useCapture:this.useCapture,usePassive:this.usePassive})})}stopObserving(t){this.stopListening(t)}fire(t,e,n){this.isEnabled&&this.document.fire(t,new qo(this.view,e,n))}}class Go extends Ko{domEventType=["keydown","keyup"];onDomEvent(t){const e={keyCode:t.keyCode,altKey:t.altKey,ctrlKey:t.ctrlKey,shiftKey:t.shiftKey,metaKey:t.metaKey,get keystroke(){return cn(this)}};this.fire(t.type,t,e)}}class Qo extends Wo{_fireSelectionChangeDoneDebounced;constructor(t){super(t),this._fireSelectionChangeDoneDebounced=ti(t=>{this.document.fire("selectionChangeDone",t)},200)}observe(){const t=this.document;t.on("arrowKey",(e,n)=>{t.selection.isFake&&this.isEnabled&&n.preventDefault()},{context:"$capture"}),t.on("arrowKey",(e,n)=>{t.selection.isFake&&this.isEnabled&&this._handleSelectionMove(n.keyCode)},{priority:"lowest"})}stopObserving(){}destroy(){super.destroy(),this._fireSelectionChangeDoneDebounced.cancel()}_handleSelectionMove(t){const e=this.document.selection,n=new Hi(e.getRanges(),{backward:e.isBackward,fake:!1});t!=an.arrowleft&&t!=an.arrowup||n.setTo(n.getFirstPosition()),t!=an.arrowright&&t!=an.arrowdown||n.setTo(n.getLastPosition());const i={oldSelection:e,newSelection:n,domSelection:null};this.document.fire("selectionChange",i),this._fireSelectionChangeDoneDebounced(i)}}class Yo extends Wo{domConverter;_config;_domElements;_mutationObserver;constructor(t){super(t),this._config={childList:!0,characterData:!0,subtree:!0},this.domConverter=t.domConverter,this._domElements=new Set,this._mutationObserver=new window.MutationObserver(this._onMutations.bind(this))}flush(){this._onMutations(this._mutationObserver.takeRecords())}observe(t){this._domElements.add(t),this.isEnabled&&this._mutationObserver.observe(t,this._config)}stopObserving(t){if(this._domElements.delete(t),this.isEnabled){this._mutationObserver.disconnect();for(const t of this._domElements)this._mutationObserver.observe(t,this._config)}}enable(){super.enable();for(const t of this._domElements)this._mutationObserver.observe(t,this._config)}disable(){super.disable(),this._mutationObserver.disconnect()}destroy(){super.destroy(),this._mutationObserver.disconnect()}_onMutations(t){if(0===t.length)return;const e=this.domConverter,n=new Set,i=new Set;for(const n of t){const t=e.mapDomToView(n.target);t&&(t.is("uiElement")||t.is("rawElement")||"childList"!==n.type||this._isBogusBrMutation(n)||i.add(t))}for(const o of t){const t=e.mapDomToView(o.target);if((!t||!t.is("uiElement")&&!t.is("rawElement"))&&"characterData"===o.type){const t=e.findCorrespondingViewText(o.target);t&&!i.has(t.parent)?n.add(t):!t&&Co(o.target)&&i.add(e.mapDomToView(o.target.parentNode))}}const o=[];for(const t of n)o.push({type:"text",node:t});for(const t of i){const n=e.mapViewToDom(t);ri(Array.from(t.getChildren()),Array.from(e.domChildrenToView(n,{withChildren:!1})),Jo)||o.push({type:"children",node:t})}o.length&&this.document.fire("mutations",{mutations:o})}_isBogusBrMutation(t){let e=null;return null===t.nextSibling&&0===t.removedNodes.length&&1==t.addedNodes.length&&(e=this.domConverter.domToView(t.addedNodes[0],{withChildren:!1})),e&&e.is("element","br")}}function Jo(t,e){if(!Array.isArray(t))return t===e||!(!t.is("$text")||!e.is("$text"))&&t.data===e.data}class Zo extends Ko{_renderTimeoutId=null;_isFocusChanging=!1;domEventType=["focus","blur"];constructor(t){super(t),this.useCapture=!0;const e=this.document;e.on("focus",()=>this._handleFocus()),e.on("blur",(t,e)=>this._handleBlur(e)),e.on("beforeinput",()=>{e.isFocused||this._handleFocus()},{priority:"highest"})}flush(){this._isFocusChanging&&(this._isFocusChanging=!1,this.document.isFocused=!0)}onDomEvent(t){this.fire(t.type,t)}destroy(){this._clearTimeout(),super.destroy()}_handleFocus(){this._clearTimeout(),this._isFocusChanging=!0,this._renderTimeoutId=setTimeout(()=>{this._renderTimeoutId=null,this.flush(),this.view.change(()=>{})},50)}_handleBlur(t){const e=this.document.selection.editableElement;null!==e&&e!==t.target||(this.document.isFocused=!1,this._isFocusChanging=!1,this.view.change(()=>{}))}_clearTimeout(){this._renderTimeoutId&&(clearTimeout(this._renderTimeoutId),this._renderTimeoutId=null)}}class Xo extends Wo{mutationObserver;focusObserver;selection;domConverter;_documents=new WeakSet;_fireSelectionChangeDoneDebounced;_clearInfiniteLoopInterval;_documentIsSelectingInactivityTimeoutDebounced;_loopbackCounter=0;_pendingSelectionChange=new Set;constructor(t){super(t),this.mutationObserver=t.getObserver(Yo),this.focusObserver=t.getObserver(Zo),this.selection=this.document.selection,this.domConverter=t.domConverter,this._fireSelectionChangeDoneDebounced=ti(t=>{this.document.fire("selectionChangeDone",t)},200),this._clearInfiniteLoopInterval=setInterval(()=>this._clearInfiniteLoop(),1e3),this._documentIsSelectingInactivityTimeoutDebounced=ti(()=>this.document.isSelecting=!1,5e3),this.view.document.on("change:isFocused",(t,e,n)=>{if(n&&this._pendingSelectionChange.size){for(const t of Array.from(this._pendingSelectionChange))this._handleSelectionChange(t);this._pendingSelectionChange.clear()}})}observe(t){const e=t.ownerDocument,n=()=>{this.document.isSelecting&&(this._handleSelectionChange(e),this.document.isSelecting=!1,this._documentIsSelectingInactivityTimeoutDebounced.cancel())};this.listenTo(t,"selectstart",()=>{this.document.isSelecting=!0,this._documentIsSelectingInactivityTimeoutDebounced()},{priority:"highest"}),this.listenTo(t,"keydown",n,{priority:"highest",useCapture:!0}),this.listenTo(t,"keyup",n,{priority:"highest",useCapture:!0}),this._documents.has(e)||(this.listenTo(e,"mouseup",n,{priority:"highest",useCapture:!0}),this.listenTo(e,"selectionchange",()=>{this.document.isComposing&&!ft.isAndroid||(this._handleSelectionChange(e),this._documentIsSelectingInactivityTimeoutDebounced())}),this.listenTo(this.view.document,"compositionstart",()=>{this._handleSelectionChange(e)},{priority:"lowest"}),this._documents.add(e))}stopObserving(t){this.stopListening(t)}destroy(){super.destroy(),clearInterval(this._clearInfiniteLoopInterval),this._fireSelectionChangeDoneDebounced.cancel(),this._documentIsSelectingInactivityTimeoutDebounced.cancel()}_reportInfiniteLoop(){}_handleSelectionChange(t){if(!this.isEnabled)return;const e=t.defaultView.getSelection();if(this.checkShouldIgnoreEventFromTarget(e.anchorNode))return;this.mutationObserver.flush();const n=this.domConverter.domSelectionToView(e);if(0!=n.rangeCount)if(this.view.hasDomSelection=!0,this.focusObserver.flush(),this.view.document.isFocused||this.view.document.isReadOnly){if(this._pendingSelectionChange.delete(t),!this.selection.isEqual(n)||!this.domConverter.isDomSelectionCorrect(e))if(++this._loopbackCounter>60)this._reportInfiniteLoop();else if(this.selection.isSimilar(n))this.view.forceRender();else{const t={oldSelection:this.selection,newSelection:n,domSelection:e};this.document.fire("selectionChange",t),this._fireSelectionChangeDoneDebounced(t)}}else this._pendingSelectionChange.add(t);else this.view.hasDomSelection=!1}_clearInfiniteLoop(){this._loopbackCounter=0}}class tr extends Ko{domEventType=["compositionstart","compositionupdate","compositionend"];constructor(t){super(t);const e=this.document;e.on("compositionstart",()=>{e.isComposing=!0}),e.on("compositionend",()=>{e.isComposing=!1})}onDomEvent(t){this.fire(t.type,t,{data:t.data})}}class er{_files;_native;constructor(t,e={}){this._files=e.cacheFiles?nr(t):null,this._native=t}get files(){return this._files||(this._files=nr(this._native)),this._files}get types(){return this._native.types}getData(t){return this._native.getData(t)}setData(t,e){this._native.setData(t,e)}set effectAllowed(t){this._native.effectAllowed=t}get effectAllowed(){return this._native.effectAllowed}set dropEffect(t){this._native.dropEffect=t}get dropEffect(){return this._native.dropEffect}setDragImage(t,e,n){this._native.setDragImage(t,e,n)}get isCanceled(){return"none"==this._native.dropEffect||!!this._native.mozUserCancelled}}function nr(t){const e=Array.from(t.files||[]),n=Array.from(t.items||[]);return e.length?e:n.filter(t=>"file"===t.kind).map(t=>t.getAsFile())}class ir extends Ko{domEventType="beforeinput";onDomEvent(t){const e=t.getTargetRanges(),n=this.view,i=n.document;let o=null,r=null,s=[];if(t.dataTransfer&&(o=new er(t.dataTransfer)),null!==t.data?r=t.data:o&&(r=o.getData("text/plain")),i.selection.isFake)s=Array.from(i.selection.getRanges()),t.preventDefault();else if(e.length)s=e.map(e=>{let i=n.domConverter.domPositionToView(e.startContainer,e.startOffset);const o=n.domConverter.domPositionToView(e.endContainer,e.endOffset);if(i&&Co(e.startContainer)&&e.startOffset<7){t.preventDefault();let n=7-e.startOffset;i=i.getLastMatchingPosition(t=>!!(t.item.is("attributeElement")||t.item.is("uiElement")||t.item.is("$textProxy")&&n--),{direction:"backward",singleCharacters:!0})}return function(t,e){for(;t.parentNode;){if(Ee(t)){if(e!=t.data.length)return!1}else if(e!=t.childNodes.length)return!1;if((e=De(t)+1)<(t=t.parentNode).childNodes.length&&Co(t.childNodes[e]))return!0}return!1}(e.endContainer,e.endOffset)&&t.preventDefault(),i?n.createRange(i,o):o?n.createRange(o):void 0}).filter(t=>!!t);else if(ft.isAndroid){const e=t.target.ownerDocument.defaultView.getSelection();s=Array.from(n.domConverter.domSelectionToView(e).getRanges())}if(ft.isAndroid&&"insertCompositionText"==t.inputType&&r&&r.endsWith("\n"))this.fire(t.type,t,{inputType:"insertParagraph",targetRanges:[n.createRange(s[0].end)]});else{if(["insertText","insertReplacementText"].includes(t.inputType)&&r&&r.includes("\n")){const e=r.split(/\n{1,2}/g);let n=s;t.preventDefault();for(let r=0;r<e.length;r++){const s=e[r];""!=s&&(this.fire(t.type,t,{data:s,dataTransfer:o,targetRanges:n,inputType:t.inputType,isComposing:t.isComposing}),n=[i.selection.getFirstRange()]),r+1<e.length&&(this.fire(t.type,t,{inputType:"insertParagraph",targetRanges:n}),n=[i.selection.getFirstRange()])}return}this.fire(t.type,t,{data:r,dataTransfer:o,targetRanges:s,inputType:t.inputType,isComposing:t.isComposing})}}}class or extends Wo{constructor(t){super(t),this.document.on("keydown",(t,e)=>{if(this.isEnabled&&((n=e.keyCode)==an.arrowright||n==an.arrowleft||n==an.arrowup||n==an.arrowdown)){const n=new $i(this.document,"arrowKey",this.document.selection.getFirstRange());this.document.fire(n,e),n.stop.called&&t.stop()}var n})}observe(){}stopObserving(){}}class rr extends Wo{constructor(t){super(t);const e=this.document;e.on("keydown",(t,n)=>{if(!this.isEnabled||n.keyCode!=an.tab||n.ctrlKey)return;const i=new $i(e,"tab",e.selection.getFirstRange());e.fire(i,n),i.stop.called&&t.stop()})}observe(){}stopObserving(){}}class sr extends(ie()){document;domConverter;domRoots=new Map;_renderer;_initialDomRootAttributes=new WeakMap;_observers=new Map;_writer;_ongoingChange=!1;_postFixersInProgress=!1;_renderingDisabled=!1;_hasChangedSinceTheLastRendering=!1;constructor(t){var e;super(),this.document=new Ji(t),this.domConverter=new Ro(this.document),this.set("isRenderingInProgress",!1),this.set("hasDomSelection",!1),this._renderer=new So(this.domConverter,this.document.selection),this._renderer.bind("isFocused","isSelecting","isComposing").to(this.document,"isFocused","isSelecting","isComposing"),this._writer=new lo(this.document),this.addObserver(Yo),this.addObserver(Zo),this.addObserver(Xo),this.addObserver(Go),this.addObserver(Qo),this.addObserver(tr),this.addObserver(or),this.addObserver(ir),this.addObserver(rr),this.document.on("arrowKey",Eo,{priority:"low"}),(e=this).document.on("arrowKey",(t,n)=>function(t,e,n){if(e.keyCode==an.arrowright){const t=e.domTarget.ownerDocument.defaultView.getSelection(),i=1==t.rangeCount&&t.getRangeAt(0).collapsed;if(i||e.shiftKey){const e=t.focusNode,o=t.focusOffset,r=n.domPositionToView(e,o);if(null===r)return;let s=!1;const a=r.getLastMatchingPosition(t=>(t.item.is("uiElement")&&(s=!0),!(!t.item.is("uiElement")&&!t.item.is("attributeElement"))));if(s){const e=n.viewPositionToDom(a);i?t.collapse(e.parent,e.offset):t.extend(e.parent,e.offset)}}}}(0,n,e.domConverter),{priority:"low"}),this.on("render",()=>{this._render(),this.document.fire("layoutChanged"),this._hasChangedSinceTheLastRendering=!1}),this.listenTo(this.document.selection,"change",()=>{this._hasChangedSinceTheLastRendering=!0}),this.listenTo(this.document,"change:isFocused",()=>{this._hasChangedSinceTheLastRendering=!0}),ft.isiOS&&this.listenTo(this.document,"blur",(t,e)=>{this.domConverter.mapDomToView(e.domEvent.relatedTarget)||this.domConverter._clearDomSelection()}),this.listenTo(this.document,"mutations",(t,{mutations:e})=>{e.forEach(t=>this._renderer.markToSync(t.type,t.node))},{priority:"low"}),this.listenTo(this.document,"mutations",()=>{this.forceRender()},{priority:"lowest"})}attachDomRoot(t,e="main"){const n=this.document.getRoot(e);n._name=t.tagName.toLowerCase();const i={};for(const{name:e,value:o}of Array.from(t.attributes))i[e]=o,"class"===e?this._writer.addClass(o.split(" "),n):n.hasAttribute(e)||this._writer.setAttribute(e,o,n);this._initialDomRootAttributes.set(t,i);const o=()=>{this._writer.setAttribute("contenteditable",(!n.isReadOnly).toString(),n),n.isReadOnly?this._writer.addClass("ck-read-only",n):this._writer.removeClass("ck-read-only",n)};o(),this.domRoots.set(e,t),this.domConverter.bindElements(t,n),this._renderer.markToSync("children",n),this._renderer.markToSync("attributes",n),this._renderer.domDocuments.add(t.ownerDocument),n.on("change:children",(t,e)=>this._renderer.markToSync("children",e)),n.on("change:attributes",(t,e)=>this._renderer.markToSync("attributes",e)),n.on("change:text",(t,e)=>this._renderer.markToSync("text",e)),n.on("change:isReadOnly",()=>this.change(o)),n.on("change",()=>{this._hasChangedSinceTheLastRendering=!0});for(const n of this._observers.values())n.observe(t,e)}detachDomRoot(t){const e=this.domRoots.get(t);Array.from(e.attributes).forEach(({name:t})=>e.removeAttribute(t));const n=this._initialDomRootAttributes.get(e);for(const t in n)e.setAttribute(t,n[t]);this.domRoots.delete(t),this.domConverter.unbindDomElement(e);for(const t of this._observers.values())t.stopObserving(e)}getDomRoot(t="main"){return this.domRoots.get(t)}addObserver(t){let e=this._observers.get(t);if(e)return e;e=new t(this),this._observers.set(t,e);for(const[t,n]of this.domRoots)e.observe(n,t);return e.enable(),e}getObserver(t){return this._observers.get(t)}disableObservers(){for(const t of this._observers.values())t.disable()}enableObservers(){for(const t of this._observers.values())t.enable()}scrollToTheSelection({alignToTop:t,forceScroll:e,viewportOffset:n=20,ancestorOffset:i=20}={}){const o=this.document.selection.getFirstRange();if(!o)return;const r=rt({alignToTop:t,forceScroll:e,viewportOffset:n,ancestorOffset:i});"number"==typeof n&&(n={top:n,bottom:n,left:n,right:n});const s={target:this.domConverter.viewRangeToDom(o),viewportOffset:n,ancestorOffset:i,alignToTop:t,forceScroll:e};this.fire("scrollToTheSelection",s,r),function({target:t,viewportOffset:e=0,ancestorOffset:n=0,alignToTop:i,forceScroll:o}){const r=tn(t);let s=r,a=null;for(e=function(t){return"number"==typeof t?{top:t,bottom:t,left:t,right:t}:t}(e);s;){let l;l=en(s==r?t:a),Qe({parent:l,getRect:()=>nn(t,s),alignToTop:i,ancestorOffset:n,forceScroll:o});let c=nn(t,s);const d=nn(l,s);if(c.height>d.height){const t=c.getIntersection(d);t&&(c=t)}if(Ge({window:s,rect:c,viewportOffset:e,alignToTop:i,forceScroll:o}),s.parent!=s){if(a=s.frameElement,s=s.parent,!a)return}else s=null}}(s)}focus(){if(!this.document.isFocused){const t=this.document.selection.editableElement;t&&(this.domConverter.focus(t),this.forceRender())}}change(t){if(this.isRenderingInProgress||this._postFixersInProgress)throw new Vt("cannot-change-view-tree",this);try{if(this._ongoingChange)return t(this._writer);this._ongoingChange=!0;const e=t(this._writer);return this._ongoingChange=!1,!this._renderingDisabled&&this._hasChangedSinceTheLastRendering&&(this._postFixersInProgress=!0,this.document._callPostFixers(this._writer),this._postFixersInProgress=!1,this.fire("render")),e}catch(t){Vt.rethrowUnexpectedError(t,this)}}forceRender(){this._hasChangedSinceTheLastRendering=!0,this.getObserver(Zo).flush(),this.change(()=>{})}destroy(){for(const t of this._observers.values())t.destroy();this.document.destroy(),this.stopListening()}createPositionAt(t,e){return Bi._createAt(t,e)}createPositionAfter(t){return Bi._createAfter(t)}createPositionBefore(t){return Bi._createBefore(t)}createRange(t,e){return new Fi(t,e)}createRangeOn(t){return Fi._createOn(t)}createRangeIn(t){return Fi._createIn(t)}createSelection(...t){return new Hi(...t)}_disableRendering(t){this._renderingDisabled=t,0==t&&this.change(()=>{})}_render(){this.isRenderingInProgress=!0,this.disableObservers(),this._renderer.render(),this.enableObservers(),this.isRenderingInProgress=!1}}class ar{is(){throw new Error("is() method is abstract")}}class lr extends ar{textNode;data;offsetInText;constructor(t,e,n){if(super(),this.textNode=t,e<0||e>t.offsetSize)throw new Vt("model-textproxy-wrong-offsetintext",this);if(n<0||e+n>t.offsetSize)throw new Vt("model-textproxy-wrong-length",this);this.data=t.data.substring(e,e+n),this.offsetInText=e}get startOffset(){return null!==this.textNode.startOffset?this.textNode.startOffset+this.offsetInText:null}get offsetSize(){return this.data.length}get endOffset(){return null!==this.startOffset?this.startOffset+this.offsetSize:null}get isPartial(){return this.offsetSize!==this.textNode.offsetSize}get parent(){return this.textNode.parent}get root(){return this.textNode.root}getPath(){const t=this.textNode.getPath();return t.length>0&&(t[t.length-1]+=this.offsetInText),t}getAncestors(t={}){const e=[];let n=t.includeSelf?this:this.parent;for(;n;)e[t.parentFirst?"push":"unshift"](n),n=n.parent;return e}hasAttribute(t){return this.textNode.hasAttribute(t)}getAttribute(t){return this.textNode.getAttribute(t)}getAttributes(){return this.textNode.getAttributes()}getAttributeKeys(){return this.textNode.getAttributeKeys()}}lr.prototype.is=function(t){return"$textProxy"===t||"model:$textProxy"===t||"textProxy"===t||"model:textProxy"===t};class cr{direction;boundaries;singleCharacters;shallow;ignoreElementEnd;_position;_boundaryStartParent;_boundaryEndParent;_visitedParent;constructor(t){if(!t||!t.boundaries&&!t.startPosition)throw new Vt("model-tree-walker-no-start-position",null);const e=t.direction||"forward";if("forward"!=e&&"backward"!=e)throw new Vt("model-tree-walker-unknown-direction",t,{direction:e});this.direction=e,this.boundaries=t.boundaries||null,t.startPosition?this._position=t.startPosition.clone():this._position=ur._createAt(this.boundaries["backward"==this.direction?"end":"start"]),this.position.stickiness="toNone",this.singleCharacters=!!t.singleCharacters,this.shallow=!!t.shallow,this.ignoreElementEnd=!!t.ignoreElementEnd,this._boundaryStartParent=this.boundaries?this.boundaries.start.parent:null,this._boundaryEndParent=this.boundaries?this.boundaries.end.parent:null,this._visitedParent=this.position.parent}[Symbol.iterator](){return this}get position(){return this._position}skip(t){let e,n,i,o;do{i=this.position,o=this._visitedParent,({done:e,value:n}=this.next())}while(!e&&t(n));e||(this._position=i,this._visitedParent=o)}jumpTo(t){this._boundaryStartParent&&t.isBefore(this.boundaries.start)?t=this.boundaries.start:this._boundaryEndParent&&t.isAfter(this.boundaries.end)&&(t=this.boundaries.end),this._position=t.clone(),this._visitedParent=t.parent}next(){return"forward"==this.direction?this._next():this._previous()}_next(){const t=this.position,e=this.position.clone(),n=this._visitedParent;if(null===n.parent&&e.offset===n.maxOffset)return{done:!0,value:void 0};if(n===this._boundaryEndParent&&e.offset==this.boundaries.end.offset)return{done:!0,value:void 0};const i=hr(e,n),o=i||gr(e,n,i);if(o&&o.is("model:element")){if(this.shallow){if(this.boundaries&&this.boundaries.end.isBefore(e))return{done:!0,value:void 0};e.offset++}else e.path.push(0),this._visitedParent=o;return this._position=e,dr("elementStart",o,t,e,1)}if(o&&o.is("model:$text")){let i;if(this.singleCharacters)i=1;else{let t=o.endOffset;this._boundaryEndParent==n&&this.boundaries.end.offset<t&&(t=this.boundaries.end.offset),i=t-e.offset}const r=e.offset-o.startOffset,s=new lr(o,r,i);return e.offset+=i,this._position=e,dr("text",s,t,e,i)}return e.path.pop(),e.offset++,this._position=e,this._visitedParent=n.parent,this.ignoreElementEnd?this._next():dr("elementEnd",n,t,e)}_previous(){const t=this.position,e=this.position.clone(),n=this._visitedParent;if(null===n.parent&&0===e.offset)return{done:!0,value:void 0};if(n==this._boundaryStartParent&&e.offset==this.boundaries.start.offset)return{done:!0,value:void 0};const i=e.parent,o=hr(e,i),r=o||mr(e,i,o);if(r&&r.is("model:element"))return e.offset--,this.shallow?(this._position=e,dr("elementStart",r,t,e,1)):(e.path.push(r.maxOffset),this._position=e,this._visitedParent=r,this.ignoreElementEnd?this._previous():dr("elementEnd",r,t,e));if(r&&r.is("model:$text")){let i;if(this.singleCharacters)i=1;else{let t=r.startOffset;this._boundaryStartParent==n&&this.boundaries.start.offset>t&&(t=this.boundaries.start.offset),i=e.offset-t}const o=e.offset-r.startOffset,s=new lr(r,o-i,i);return e.offset-=i,this._position=e,dr("text",s,t,e,i)}return e.path.pop(),this._position=e,this._visitedParent=n.parent,dr("elementStart",n,t,e,1)}}function dr(t,e,n,i,o){return{done:!1,value:{type:t,item:e,previousPosition:n,nextPosition:i,length:o}}}class ur extends ar{root;path;stickiness;constructor(t,e,n="toNone"){if(super(),!t.is("element")&&!t.is("documentFragment"))throw new Vt("model-position-root-invalid",t);if(!Array.isArray(e)||0===e.length)throw new Vt("model-position-path-incorrect-format",t,{path:e});t.is("rootElement")?e=e.slice():(e=[...t.getPath(),...e],t=t.root),this.root=t,this.path=e,this.stickiness=n}get offset(){return this.path[this.path.length-1]}set offset(t){this.path[this.path.length-1]=t}get parent(){let t=this.root;for(let e=0;e<this.path.length-1;e++)if(t=t.getChildAtOffset(this.path[e]),!t)throw new Vt("model-position-path-incorrect",this,{position:this});if(t.is("$text"))throw new Vt("model-position-path-incorrect",this,{position:this});return t}get index(){return this.parent.offsetToIndex(this.offset)}get textNode(){return hr(this,this.parent)}get nodeAfter(){const t=this.parent;return gr(this,t,hr(this,t))}get nodeBefore(){const t=this.parent;return mr(this,t,hr(this,t))}get isAtStart(){return 0===this.offset}get isAtEnd(){return this.offset==this.parent.maxOffset}isValid(){if(this.offset<0)return!1;let t=this.root;for(let e=0;e<this.path.length-1;e++)if(t=t.getChildAtOffset(this.path[e]),!t)return!1;return this.offset<=t.maxOffset}compareWith(t){if(this.root!=t.root)return"different";const e=ue(this.path,t.path);switch(e){case"same":return"same";case"prefix":return"before";case"extension":return"after";default:return this.path[e]<t.path[e]?"before":"after"}}getLastMatchingPosition(t,e={}){e.startPosition=this;const n=new cr(e);return n.skip(t),n.position}getParentPath(){return this.path.slice(0,-1)}getAncestors(){const t=this.parent;return t.is("documentFragment")?[t]:t.getAncestors({includeSelf:!0})}findAncestor(t){const e=this.parent;return e.is("element")?e.findAncestor(t,{includeSelf:!0}):null}getCommonPath(t){if(this.root!=t.root)return[];const e=ue(this.path,t.path),n="string"==typeof e?Math.min(this.path.length,t.path.length):e;return this.path.slice(0,n)}getCommonAncestor(t){const e=this.getAncestors(),n=t.getAncestors();let i=0;for(;e[i]==n[i]&&e[i];)i++;return 0===i?null:e[i-1]}getShiftedBy(t){const e=this.clone(),n=e.offset+t;return e.offset=n<0?0:n,e}isAfter(t){return"after"==this.compareWith(t)}isBefore(t){return"before"==this.compareWith(t)}isEqual(t){return"same"==this.compareWith(t)}isTouching(t){if(this.root!==t.root)return!1;const e=Math.min(this.path.length,t.path.length);for(let n=0;n<e;n++){const e=this.path[n]-t.path[n];if(e<-1||e>1)return!1;if(1===e)return pr(t,this,n);if(-1===e)return pr(this,t,n)}return this.path.length===t.path.length||(this.path.length>t.path.length?fr(this.path,e):fr(t.path,e))}hasSameParentAs(t){return this.root===t.root&&"same"==ue(this.getParentPath(),t.getParentPath())}getTransformedByOperation(t){let e;switch(t.type){case"insert":e=this._getTransformedByInsertOperation(t);break;case"move":case"remove":case"reinsert":e=this._getTransformedByMoveOperation(t);break;case"split":e=this._getTransformedBySplitOperation(t);break;case"merge":e=this._getTransformedByMergeOperation(t);break;default:e=ur._createAt(this)}return e}_getTransformedByInsertOperation(t){return this._getTransformedByInsertion(t.position,t.howMany)}_getTransformedByMoveOperation(t){return this._getTransformedByMove(t.sourcePosition,t.targetPosition,t.howMany)}_getTransformedBySplitOperation(t){const e=t.movedRange;return e.containsPosition(this)||e.start.isEqual(this)&&"toNext"==this.stickiness?this._getCombined(t.splitPosition,t.moveTargetPosition):t.graveyardPosition?this._getTransformedByMove(t.graveyardPosition,t.insertionPosition,1):this._getTransformedByInsertion(t.insertionPosition,1)}_getTransformedByMergeOperation(t){const e=t.movedRange;let n;return e.containsPosition(this)||e.start.isEqual(this)?(n=this._getCombined(t.sourcePosition,t.targetPosition),t.sourcePosition.isBefore(t.targetPosition)&&(n=n._getTransformedByDeletion(t.deletionPosition,1))):n=this.isEqual(t.deletionPosition)?ur._createAt(t.deletionPosition):this._getTransformedByMove(t.deletionPosition,t.graveyardPosition,1),n}_getTransformedByDeletion(t,e){const n=ur._createAt(this);if(this.root!=t.root)return n;if("same"==ue(t.getParentPath(),this.getParentPath())){if(t.offset<this.offset){if(t.offset+e>this.offset)return null;n.offset-=e}}else if("prefix"==ue(t.getParentPath(),this.getParentPath())){const i=t.path.length-1;if(t.offset<=this.path[i]){if(t.offset+e>this.path[i])return null;n.path[i]-=e}}return n}_getTransformedByInsertion(t,e){const n=ur._createAt(this);if(this.root!=t.root)return n;if("same"==ue(t.getParentPath(),this.getParentPath()))(t.offset<this.offset||t.offset==this.offset&&"toPrevious"!=this.stickiness)&&(n.offset+=e);else if("prefix"==ue(t.getParentPath(),this.getParentPath())){const i=t.path.length-1;t.offset<=this.path[i]&&(n.path[i]+=e)}return n}_getTransformedByMove(t,e,n){if(e=e._getTransformedByDeletion(t,n),t.isEqual(e))return ur._createAt(this);const i=this._getTransformedByDeletion(t,n);return null===i||t.isEqual(this)&&"toNext"==this.stickiness||t.getShiftedBy(n).isEqual(this)&&"toPrevious"==this.stickiness?this._getCombined(t,e):i._getTransformedByInsertion(e,n)}_getCombined(t,e){const n=t.path.length-1,i=ur._createAt(e);return i.stickiness=this.stickiness,i.offset=i.offset+this.path[n]-t.offset,i.path=[...i.path,...this.path.slice(n+1)],i}toJSON(){return{root:this.root.toJSON(),path:Array.from(this.path),stickiness:this.stickiness}}clone(){return new this.constructor(this.root,this.path,this.stickiness)}static _createAt(t,e,n="toNone"){if(t.is("model:position"))return new ur(t.root,t.path,t.stickiness);{const i=t;if("end"==e)e=i.maxOffset;else{if("before"==e)return this._createBefore(i,n);if("after"==e)return this._createAfter(i,n);if(0!==e&&!e)throw new Vt("model-createpositionat-offset-required",[this,t])}if(!i.is("element")&&!i.is("documentFragment"))throw new Vt("model-position-parent-incorrect",[this,t]);const o=i.getPath();return o.push(e),new this(i.root,o,n)}}static _createAfter(t,e){if(!t.parent)throw new Vt("model-position-after-root",[this,t],{root:t});return this._createAt(t.parent,t.endOffset,e)}static _createBefore(t,e){if(!t.parent)throw new Vt("model-position-before-root",t,{root:t});return this._createAt(t.parent,t.startOffset,e)}static fromJSON(t,e){if("$graveyard"===t.root){const n=new ur(e.graveyard,t.path);return n.stickiness=t.stickiness,n}if(!e.getRoot(t.root))throw new Vt("model-position-fromjson-no-root",e,{rootName:t.root});return new ur(e.getRoot(t.root),t.path,t.stickiness)}}function hr(t,e){const n=e.getChildAtOffset(t.offset);return n&&n.is("$text")&&n.startOffset<t.offset?n:null}function gr(t,e,n){return null!==n?null:e.getChildAtOffset(t.offset)}function mr(t,e,n){return null!==n?null:e.getChild(e.offsetToIndex(t.offset)-1)}function pr(t,e,n){return n+1!==t.path.length&&!!fr(e.path,n+1)&&!!function(t,e){let n=t.parent,i=t.path.length-1,o=0;for(;i>=e;){if(t.path[i]+o!==n.maxOffset)return!1;o=1,i--,n=n.parent}return!0}(t,n+1)}function fr(t,e){for(;e<t.length;){if(0!==t[e])return!1;e++}return!0}ur.prototype.is=function(t){return"position"===t||"model:position"===t};class br extends ar{start;end;constructor(t,e){super(),this.start=ur._createAt(t),this.end=e?ur._createAt(e):ur._createAt(t),this.start.stickiness=this.isCollapsed?"toNone":"toNext",this.end.stickiness=this.isCollapsed?"toNone":"toPrevious"}*[Symbol.iterator](){yield*new cr({boundaries:this,ignoreElementEnd:!0})}get isCollapsed(){return this.start.isEqual(this.end)}get isFlat(){return"same"==ue(this.start.getParentPath(),this.end.getParentPath())}get root(){return this.start.root}containsPosition(t){return t.isAfter(this.start)&&t.isBefore(this.end)}containsRange(t,e=!1){t.isCollapsed&&(e=!1);const n=this.containsPosition(t.start)||e&&this.start.isEqual(t.start),i=this.containsPosition(t.end)||e&&this.end.isEqual(t.end);return n&&i}containsItem(t){const e=ur._createBefore(t);return this.containsPosition(e)||this.start.isEqual(e)}isEqual(t){return this.start.isEqual(t.start)&&this.end.isEqual(t.end)}isIntersecting(t){return this.start.isBefore(t.end)&&this.end.isAfter(t.start)}getDifference(t){const e=[];return this.isIntersecting(t)?(this.containsPosition(t.start)&&e.push(new br(this.start,t.start)),this.containsPosition(t.end)&&e.push(new br(t.end,this.end))):e.push(new br(this.start,this.end)),e}getIntersection(t){if(this.isIntersecting(t)){let e=this.start,n=this.end;return this.containsPosition(t.start)&&(e=t.start),this.containsPosition(t.end)&&(n=t.end),new br(e,n)}return null}getJoined(t,e=!1){let n=this.isIntersecting(t);if(n||(n=this.start.isBefore(t.start)?e?this.end.isTouching(t.start):this.end.isEqual(t.start):e?t.end.isTouching(this.start):t.end.isEqual(this.start)),!n)return null;let i=this.start,o=this.end;return t.start.isBefore(i)&&(i=t.start),t.end.isAfter(o)&&(o=t.end),new br(i,o)}getMinimalFlatRanges(){const t=[],e=this.start.getCommonPath(this.end).length,n=ur._createAt(this.start);let i=n.parent;for(;n.path.length>e+1;){const e=i.maxOffset-n.offset;0!==e&&t.push(new br(n,n.getShiftedBy(e))),n.path=n.path.slice(0,-1),n.offset++,i=i.parent}for(;n.path.length<=this.end.path.length;){const e=this.end.path[n.path.length-1],i=e-n.offset;0!==i&&t.push(new br(n,n.getShiftedBy(i))),n.offset=e,n.path.push(0)}return t}getWalker(t={}){return t.boundaries=this,new cr(t)}*getItems(t={}){t.boundaries=this,t.ignoreElementEnd=!0;const e=new cr(t);for(const t of e)yield t.item}*getPositions(t={}){t.boundaries=this;const e=new cr(t);yield e.position;for(const t of e)yield t.nextPosition}getTransformedByOperation(t){switch(t.type){case"insert":return this._getTransformedByInsertOperation(t);case"move":case"remove":case"reinsert":return this._getTransformedByMoveOperation(t);case"split":return[this._getTransformedBySplitOperation(t)];case"merge":return[this._getTransformedByMergeOperation(t)]}return[new br(this.start,this.end)]}getTransformedByOperations(t){const e=[new br(this.start,this.end)];for(const n of t)for(let t=0;t<e.length;t++){const i=e[t].getTransformedByOperation(n);e.splice(t,1,...i),t+=i.length-1}for(let t=0;t<e.length;t++){const n=e[t];for(let i=t+1;i<e.length;i++){const t=e[i];(n.containsRange(t)||t.containsRange(n)||n.isEqual(t))&&e.splice(i,1)}}return e}getCommonAncestor(){return this.start.getCommonAncestor(this.end)}getContainedElement(){if(this.isCollapsed)return null;const t=this.start.nodeAfter,e=this.end.nodeBefore;return t&&t.is("element")&&t===e?t:null}toJSON(){return{start:this.start.toJSON(),end:this.end.toJSON()}}clone(){return new this.constructor(this.start,this.end)}_getTransformedByInsertOperation(t,e=!1){return this._getTransformedByInsertion(t.position,t.howMany,e)}_getTransformedByMoveOperation(t,e=!1){const n=t.sourcePosition,i=t.howMany,o=t.targetPosition;return this._getTransformedByMove(n,o,i,e)}_getTransformedBySplitOperation(t){const e=this.start._getTransformedBySplitOperation(t);let n=this.end._getTransformedBySplitOperation(t);return this.end.isEqual(t.insertionPosition)&&(n=this.end.getShiftedBy(1)),e.root!=n.root&&(n=this.end.getShiftedBy(-1)),new br(e,n)}_getTransformedByMergeOperation(t){if(this.start.isEqual(t.targetPosition)&&this.end.isEqual(t.deletionPosition))return new br(this.start);let e=this.start._getTransformedByMergeOperation(t),n=this.end._getTransformedByMergeOperation(t);return e.root!=n.root&&(n=this.end.getShiftedBy(-1)),e.isAfter(n)?(t.sourcePosition.isBefore(t.targetPosition)?(e=ur._createAt(n),e.offset=0):(t.deletionPosition.isEqual(e)||(n=t.deletionPosition),e=t.targetPosition),new br(e,n)):new br(e,n)}_getTransformedByInsertion(t,e,n=!1){if(n&&this.containsPosition(t))return[new br(this.start,t),new br(t.getShiftedBy(e),this.end._getTransformedByInsertion(t,e))];{const n=new br(this.start,this.end);return n.start=n.start._getTransformedByInsertion(t,e),n.end=n.end._getTransformedByInsertion(t,e),[n]}}_getTransformedByMove(t,e,n,i=!1){if(this.isCollapsed){const i=this.start._getTransformedByMove(t,e,n);return[new br(i)]}const o=br._createFromPositionAndShift(t,n),r=e._getTransformedByDeletion(t,n);if(this.containsPosition(e)&&!i&&(o.containsPosition(this.start)||o.containsPosition(this.end))){const i=this.start._getTransformedByMove(t,e,n),o=this.end._getTransformedByMove(t,e,n);return[new br(i,o)]}let s;const a=this.getDifference(o);let l=null;const c=this.getIntersection(o);if(1==a.length?l=new br(a[0].start._getTransformedByDeletion(t,n),a[0].end._getTransformedByDeletion(t,n)):2==a.length&&(l=new br(this.start,this.end._getTransformedByDeletion(t,n))),s=l?l._getTransformedByInsertion(r,n,null!==c||i):[],c){const t=new br(c.start._getCombined(o.start,r),c.end._getCombined(o.start,r));2==s.length?s.splice(1,0,t):s.push(t)}return s}_getTransformedByDeletion(t,e){let n=this.start._getTransformedByDeletion(t,e),i=this.end._getTransformedByDeletion(t,e);return null==n&&null==i?null:(null==n&&(n=t),null==i&&(i=t),new br(n,i))}static _createFromPositionAndShift(t,e){const n=t,i=t.getShiftedBy(e);return e>0?new this(n,i):new this(i,n)}static _createIn(t){return new this(ur._createAt(t,0),ur._createAt(t,t.maxOffset))}static _createOn(t){return this._createFromPositionAndShift(ur._createBefore(t),t.offsetSize)}static _createFromRanges(t){if(0===t.length)throw new Vt("range-create-from-ranges-empty-array",null);if(1==t.length)return t[0].clone();const e=t[0];t.sort((t,e)=>t.start.isAfter(e.start)?1:-1);const n=t.indexOf(e),i=new this(e.start,e.end);for(let e=n-1;e>=0&&t[e].end.isEqual(i.start);e--)i.start=ur._createAt(t[e].start);for(let e=n+1;e<t.length&&t[e].start.isEqual(i.end);e++)i.end=ur._createAt(t[e].end);return i}static fromJSON(t,e){return new this(ur.fromJSON(t.start,e),ur.fromJSON(t.end,e))}}br.prototype.is=function(t){return"range"===t||"model:range"===t};class kr extends(Ut()){_modelToViewMapping=new WeakMap;_viewToModelMapping=new WeakMap;_viewToModelLengthCallbacks=new Map;_markerNameToElements=new Map;_elementToMarkerNames=new Map;_deferredBindingRemovals=new Map;_unboundMarkerNames=new Set;_cache=new wr;constructor(){super(),this.on("modelToViewPosition",(t,e)=>{if(e.viewPosition)return;const n=this._modelToViewMapping.get(e.modelPosition.parent);if(!n)throw new Vt("mapping-model-position-view-parent-not-found",this,{modelPosition:e.modelPosition});e.viewPosition=this.findPositionIn(n,e.modelPosition.offset)},{priority:"low"}),this.on("viewToModelPosition",(t,e)=>{if(e.modelPosition)return;const n=this.findMappedViewAncestor(e.viewPosition),i=this._viewToModelMapping.get(n),o=this._toModelOffset(e.viewPosition.parent,e.viewPosition.offset,n);e.modelPosition=ur._createAt(i,o)},{priority:"low"})}bindElements(t,e){this._modelToViewMapping.set(t,e),this._viewToModelMapping.set(e,t)}unbindViewElement(t,e={}){const n=this.toModelElement(t);if(this._elementToMarkerNames.has(t))for(const e of this._elementToMarkerNames.get(t))this._unboundMarkerNames.add(e);e.defer?this._deferredBindingRemovals.set(t,t.root):(this._viewToModelMapping.delete(t)&&this._cache.stopTracking(t),this._modelToViewMapping.get(n)==t&&this._modelToViewMapping.delete(n))}unbindModelElement(t){const e=this.toViewElement(t);this._modelToViewMapping.delete(t),this._viewToModelMapping.get(e)==t&&this._viewToModelMapping.delete(e)&&this._cache.stopTracking(e)}bindElementToMarker(t,e){const n=this._markerNameToElements.get(e)||new Set;n.add(t);const i=this._elementToMarkerNames.get(t)||new Set;i.add(e),this._markerNameToElements.set(e,n),this._elementToMarkerNames.set(t,i)}unbindElementFromMarkerName(t,e){const n=this._markerNameToElements.get(e);n&&(n.delete(t),0==n.size&&this._markerNameToElements.delete(e));const i=this._elementToMarkerNames.get(t);i&&(i.delete(e),0==i.size&&this._elementToMarkerNames.delete(t))}flushUnboundMarkerNames(){const t=Array.from(this._unboundMarkerNames);return this._unboundMarkerNames.clear(),t}flushDeferredBindings(){for(const[t,e]of this._deferredBindingRemovals)t.root==e&&this.unbindViewElement(t);this._deferredBindingRemovals=new Map}clearBindings(){this._modelToViewMapping=new WeakMap,this._viewToModelMapping=new WeakMap,this._markerNameToElements=new Map,this._elementToMarkerNames=new Map,this._unboundMarkerNames=new Set,this._deferredBindingRemovals=new Map}toModelElement(t){return this._viewToModelMapping.get(t)}toViewElement(t){return this._modelToViewMapping.get(t)}toModelRange(t){return new br(this.toModelPosition(t.start),this.toModelPosition(t.end))}toViewRange(t){return new Fi(this.toViewPosition(t.start),this.toViewPosition(t.end))}toModelPosition(t){const e={viewPosition:t,mapper:this};return this.fire("viewToModelPosition",e),e.modelPosition}toViewPosition(t,e={}){const n={modelPosition:t,mapper:this,isPhantom:e.isPhantom};return this.fire("modelToViewPosition",n),n.viewPosition}markerNameToElements(t){const e=this._markerNameToElements.get(t);if(!e)return null;const n=new Set;for(const t of e)if(t.is("attributeElement"))for(const e of t.getElementsWithSameId())n.add(e);else n.add(t);return n}registerViewToModelLength(t,e){this._viewToModelLengthCallbacks.set(t,e)}findMappedViewAncestor(t){let e=t.parent;for(;!this._viewToModelMapping.has(e);)e=e.parent;return e}_toModelOffset(t,e,n){if(n!=t)return this._toModelOffset(t.parent,t.index,n)+this._toModelOffset(t,e,t);if(t.is("$text"))return e;let i=0;for(let n=0;n<e;n++)i+=this.getModelLength(t.getChild(n));return i}getModelLength(t){const e=[t];let n=0;for(;e.length>0;){const t=e.pop(),i=t.name&&this._viewToModelLengthCallbacks.size>0&&this._viewToModelLengthCallbacks.get(t.name);if(i)n+=i(t);else if(this._viewToModelMapping.has(t))n+=1;else if(t.is("$text"))n+=t.data.length;else{if(t.is("uiElement"))continue;for(const n of t.getChildren())e.push(n)}}return n}findPositionIn(t,e){if(0===e)return this._moveViewPositionToTextNode(new Bi(t,0));if(0==this._viewToModelLengthCallbacks.size&&this._viewToModelMapping.has(t)){const n=this._cache.getClosest(t,e);return this._findPositionStartingFrom(n.viewPosition,n.modelOffset,e,t,!0)}return this._findPositionStartingFrom(new Bi(t,0),0,e,t,!1)}_findPositionStartingFrom(t,e,n,i,o){let r,s=t.parent,a=t.offset;if(s.is("$text"))return new Bi(s,n-e);let l=e,c=0;for(;l<n;)if(r=s.getChild(a),r)c=o?this._getModelLengthAndCache(r,i,l):this.getModelLength(r),l+=c,a++;else{if(s==i)throw new Vt("mapping-model-offset-not-found",this,{modelOffset:n,viewContainer:i});a=s.parent.getChildIndex(s)+1,s=s.parent,o&&this._cache.save(s,a,i,l)}let d=new Bi(s,a);if(o)for(;d.isAtEnd&&d.parent!==i&&d.parent.parent;){const t=d.parent.parent,e=t.getChildIndex(d.parent)+1;this._cache.save(t,e,i,l),d=new Bi(t,e)}return l==n?this._moveViewPositionToTextNode(d):this._findPositionStartingFrom(new Bi(r,0),l-c,n,i,o)}_getModelLengthAndCache(t,e,n){let i=0;if(this._viewToModelMapping.has(t))i=1;else if(t.is("$text"))i=t.data.length;else if(!t.is("uiElement"))for(const o of t.getChildren())i+=this._getModelLengthAndCache(o,e,n+i);return this._cache.save(t.parent,t.index+1,e,n+i),i}_moveViewPositionToTextNode(t){const e=t.nodeBefore,n=t.nodeAfter;return e&&e.is("view:$text")?new Bi(e,e.data.length):n&&n.is("view:$text")?new Bi(n,0):t}}class wr extends(Ut()){_cachedMapping=new WeakMap;_nodeToCacheListIndex=new WeakMap;_invalidateOnChildrenChangeCallback=(t,e,n)=>{this._clearCacheInsideParent(e,n.index)};_invalidateOnTextChangeCallback=(t,e)=>{this._clearCacheAfter(e)};save(t,e,n,i){const o=this._cachedMapping.get(n),r=o.cacheMap.get(i);if(r){const n=t.getChild(e-1),i=r.viewPosition.nodeBefore?this._nodeToCacheListIndex.get(r.viewPosition.nodeBefore):0;return void this._nodeToCacheListIndex.set(n,i)}const s={viewPosition:new Bi(t,e),modelOffset:i};o.maxModelOffset=i>o.maxModelOffset?i:o.maxModelOffset,o.cacheMap.set(i,s);let a=o.cacheList.length-1;for(;a>=0&&o.cacheList[a].modelOffset>i;)a--;if(o.cacheList.splice(a+1,0,s),e>0){const n=t.getChild(e-1);this._nodeToCacheListIndex.set(n,a+1)}}getClosest(t,e){const n=this._cachedMapping.get(t);let i;if(n)if(e>n.maxModelOffset)i=n.cacheList[n.cacheList.length-1];else{i=n.cacheMap.get(e)||this._findInCacheList(n.cacheList,e)}else i=this.startTracking(t);return{modelOffset:i.modelOffset,viewPosition:i.viewPosition.clone()}}startTracking(t){const e={viewPosition:new Bi(t,0),modelOffset:0},n={maxModelOffset:0,cacheList:[e],cacheMap:new Map([[0,e]])};return this._cachedMapping.set(t,n),t.on("change:children",this._invalidateOnChildrenChangeCallback),t.on("change:text",this._invalidateOnTextChangeCallback),e}stopTracking(t){t.off("change:children",this._invalidateOnChildrenChangeCallback),t.off("change:text",this._invalidateOnTextChangeCallback),this._cachedMapping.delete(t)}_clearCacheInsideParent(t,e){if(0==e)this._cachedMapping.has(t)?this._clearCacheAll(t):this._clearCacheInsideParent(t.parent,t.index);else{const n=t.getChild(e-1);this._clearCacheAfter(n)}}_clearCacheAll(t){const e=this._cachedMapping.get(t);e.maxModelOffset>0&&(e.maxModelOffset=0,e.cacheList.length=1,e.cacheMap.clear(),e.cacheMap.set(0,e.cacheList[0]))}_clearCacheAfter(t){const e=this._nodeToCacheListIndex.get(t);if(void 0===e){const e=t.parent;return void(this._cachedMapping.has(e)||this._clearCacheInsideParent(e.parent,e.index))}let n=t.parent;for(;!this._cachedMapping.has(n);)n=n.parent;this._clearCacheFromCacheIndex(n,e)}_clearCacheFromCacheIndex(t,e){0===e&&(e=1);const n=this._cachedMapping.get(t),i=n.cacheList[e-1];if(!i)return;n.maxModelOffset=i.modelOffset;const o=n.cacheList.splice(e);for(const t of o){n.cacheMap.delete(t.modelOffset);const e=t.viewPosition.nodeBefore;this._nodeToCacheListIndex.delete(e)}}_findInCacheList(t,e){let n=0,i=t.length-1,o=i-n>>1,r=t[o];for(;n<i;)r.modelOffset<e?n=o+1:i=o-1,o=n+(i-n>>1),r=t[o];return r.modelOffset<=e?r:t[o-1]}}class _r{_consumable=new Map;_textProxyRegistry=new Map;add(t,e){e=vr(e),t instanceof lr&&(t=this._getSymbolForTextProxy(t)),this._consumable.has(t)||this._consumable.set(t,new Map),this._consumable.get(t).set(e,!0)}consume(t,e){return e=vr(e),t instanceof lr&&(t=this._getSymbolForTextProxy(t)),!!this.test(t,e)&&(this._consumable.get(t).set(e,!1),!0)}test(t,e){e=vr(e),t instanceof lr&&(t=this._getSymbolForTextProxy(t));const n=this._consumable.get(t);if(void 0===n)return null;const i=n.get(e);return void 0===i?null:i}revert(t,e){e=vr(e),t instanceof lr&&(t=this._getSymbolForTextProxy(t));const n=this.test(t,e);return!1===n?(this._consumable.get(t).set(e,!0),!0):!0!==n&&null}verifyAllConsumed(t){const e=[];for(const[n,i]of this._consumable)for(const[o,r]of i){const i=o.split(":")[0];r&&t==i&&e.push({event:o,item:n.name||n.description})}if(e.length)throw new Vt("conversion-model-consumable-not-consumed",null,{items:e})}_getSymbolForTextProxy(t){let e=null;const n=this._textProxyRegistry.get(t.startOffset);if(n){const i=n.get(t.endOffset);i&&(e=i.get(t.parent))}return e||(e=this._addSymbolForTextProxy(t)),e}_addSymbolForTextProxy(t){const e=t.startOffset,n=t.endOffset,i=t.parent,o=Symbol("$textProxy:"+t.data);let r,s;return r=this._textProxyRegistry.get(e),r||(r=new Map,this._textProxyRegistry.set(e,r)),s=r.get(n),s||(s=new Map,r.set(n,s)),s.set(i,o),o}}function vr(t){const e=t.split(":");return"insert"==e[0]?e[0]:"addMarker"==e[0]||"removeMarker"==e[0]?t:e.length>1?e[0]+":"+e[1]:e[0]}class yr extends(Ut()){_conversionApi;_firedEventsMap;constructor(t){super(),this._conversionApi={dispatcher:this,...t},this._firedEventsMap=new WeakMap}convertChanges(t,e,n){const i=this._createConversionApi(n,t.getRefreshedItems());for(const e of t.getMarkersToRemove())this._convertMarkerRemove(e.name,e.range,i);const o=this._reduceChanges(t.getChanges());for(const t of o)"insert"===t.type?this._convertInsert(br._createFromPositionAndShift(t.position,t.length),i):"reinsert"===t.type?this._convertReinsert(br._createFromPositionAndShift(t.position,t.length),i):"remove"===t.type?this._convertRemove(t.position,t.length,t.name,i):this._convertAttribute(t.range,t.attributeKey,t.attributeOldValue,t.attributeNewValue,i);i.mapper.flushDeferredBindings();for(const t of i.mapper.flushUnboundMarkerNames()){const n=e.get(t).getRange();this._convertMarkerRemove(t,n,i),this._convertMarkerAdd(t,n,i)}for(const e of t.getMarkersToAdd())this._convertMarkerAdd(e.name,e.range,i);i.consumable.verifyAllConsumed("insert")}convert(t,e,n,i={}){const o=this._createConversionApi(n,void 0,i);this._convertInsert(t,o);for(const[t,n]of e)this._convertMarkerAdd(t,n,o);o.consumable.verifyAllConsumed("insert")}convertSelection(t,e,n){const i=this._createConversionApi(n);this.fire("cleanSelection",{selection:t},i);const o=t.getFirstPosition().root;if(!i.mapper.toViewElement(o))return;const r=Array.from(e.getMarkersAtPosition(t.getFirstPosition()));if(this._addConsumablesForSelection(i.consumable,t,r),this.fire("selection",{selection:t},i),t.isCollapsed){for(const e of r)if(i.consumable.test(t,"addMarker:"+e.name)){const n=e.getRange();if(!Cr(t.getFirstPosition(),e,i.mapper))continue;const o={item:t,markerName:e.name,markerRange:n};this.fire(`addMarker:${e.name}`,o,i)}for(const e of t.getAttributeKeys())if(i.consumable.test(t,"attribute:"+e)){const n={item:t,range:t.getFirstRange(),attributeKey:e,attributeOldValue:null,attributeNewValue:t.getAttribute(e)};this.fire(`attribute:${e}:$text`,n,i)}}}_convertInsert(t,e,n={}){n.doNotAddConsumables||this._addConsumablesForInsert(e.consumable,t);for(const n of t.getWalker({shallow:!0}))this._testAndFire("insert",xr(n),e)}_convertRemove(t,e,n,i){this.fire(`remove:${n}`,{position:t,length:e},i)}_convertAttribute(t,e,n,i,o){this._addConsumablesForRange(o.consumable,t,`attribute:${e}`);for(const r of t){const t={item:r.item,range:br._createFromPositionAndShift(r.previousPosition,r.length),attributeKey:e,attributeOldValue:n,attributeNewValue:i};this._testAndFire(`attribute:${e}`,t,o)}}_convertReinsert(t,e){const n=Array.from(t.getWalker({shallow:!0}));this._addConsumablesForInsert(e.consumable,n);for(const t of n.map(xr))this._testAndFire("insert",{...t,reconversion:!0},e)}_convertMarkerAdd(t,e,n){if("$graveyard"==e.root.rootName)return;const i=`addMarker:${t}`;if(n.consumable.add(e,i),this.fire(i,{markerName:t,markerRange:e},n),n.consumable.consume(e,i)){this._addConsumablesForRange(n.consumable,e,i);for(const o of e.getItems()){if(!n.consumable.test(o,i))continue;const r={item:o,range:br._createOn(o),markerName:t,markerRange:e};this.fire(i,r,n)}}}_convertMarkerRemove(t,e,n){"$graveyard"!=e.root.rootName&&this.fire(`removeMarker:${t}`,{markerName:t,markerRange:e},n)}_reduceChanges(t){const e={changes:t};return this.fire("reduceChanges",e),e.changes}_addConsumablesForInsert(t,e){for(const n of e){const e=n.item;if(null===t.test(e,"insert")){t.add(e,"insert");for(const n of e.getAttributeKeys())t.add(e,"attribute:"+n)}}return t}_addConsumablesForRange(t,e,n){for(const i of e.getItems())t.add(i,n);return t}_addConsumablesForSelection(t,e,n){t.add(e,"selection");for(const i of n)t.add(e,"addMarker:"+i.name);for(const n of e.getAttributeKeys())t.add(e,"attribute:"+n);return t}_testAndFire(t,e,n){const i=function(t,e){return`${t}:${e.item.is("element")?e.item.name:"$text"}`}(t,e),o=e.item.is("$textProxy")?n.consumable._getSymbolForTextProxy(e.item):e.item,r=this._firedEventsMap.get(n),s=r.get(o);if(s){if(s.has(i))return;s.add(i)}else r.set(o,new Set([i]));this.fire(i,e,n)}_testAndFireAddAttributes(t,e){const n={item:t,range:br._createOn(t)};for(const t of n.item.getAttributeKeys())n.attributeKey=t,n.attributeOldValue=null,n.attributeNewValue=n.item.getAttribute(t),this._testAndFire(`attribute:${t}`,n,e)}_createConversionApi(t,e=new Set,n={}){const i={...this._conversionApi,consumable:new _r,writer:t,options:n,convertItem:t=>this._convertInsert(br._createOn(t),i),convertChildren:t=>this._convertInsert(br._createIn(t),i,{doNotAddConsumables:!0}),convertAttributes:t=>this._testAndFireAddAttributes(t,i),canReuseView:t=>!e.has(i.mapper.toModelElement(t))};return this._firedEventsMap.set(i,new Map),i}}function Cr(t,e,n){const i=e.getRange(),o=Array.from(t.getAncestors());return o.shift(),o.reverse(),!o.some(t=>{if(i.containsItem(t))return!!n.toViewElement(t).getCustomProperty("addHighlight")})}function xr(t){return{item:t.item,range:br._createFromPositionAndShift(t.previousPosition,t.length)}}class Ar extends ar{parent=null;_attrs;_index=null;_startOffset=null;constructor(t){super(),this._attrs=An(t)}get document(){return null}get index(){return this._index}get startOffset(){return this._startOffset}get offsetSize(){return 1}get endOffset(){return null===this.startOffset?null:this.startOffset+this.offsetSize}get nextSibling(){const t=this.index;return null!==t&&this.parent.getChild(t+1)||null}get previousSibling(){const t=this.index;return null!==t&&this.parent.getChild(t-1)||null}get root(){let t=this;for(;t.parent;)t=t.parent;return t}isAttached(){return null!==this.parent&&this.root.isAttached()}getPath(){const t=[];let e=this;for(;e.parent;)t.unshift(e.startOffset),e=e.parent;return t}getAncestors(t={}){const e=[];let n=t.includeSelf?this:this.parent;for(;n;)e[t.parentFirst?"push":"unshift"](n),n=n.parent;return e}getCommonAncestor(t,e={}){const n=this.getAncestors(e),i=t.getAncestors(e);let o=0;for(;n[o]==i[o]&&n[o];)o++;return 0===o?null:n[o-1]}isBefore(t){if(this==t)return!1;if(this.root!==t.root)return!1;const e=this.getPath(),n=t.getPath(),i=ue(e,n);switch(i){case"prefix":return!0;case"extension":return!1;default:return e[i]<n[i]}}isAfter(t){return this!=t&&this.root===t.root&&!this.isBefore(t)}hasAttribute(t){return this._attrs.has(t)}getAttribute(t){return this._attrs.get(t)}getAttributes(){return this._attrs.entries()}getAttributeKeys(){return this._attrs.keys()}toJSON(){const t={};return this._attrs.size&&(t.attributes=Array.from(this._attrs).reduce((t,e)=>(t[e[0]]=e[1],t),{})),t}_clone(t){return new this.constructor(this._attrs)}_remove(){this.parent._removeChildren(this.index)}_setAttribute(t,e){this._attrs.set(t,e)}_setAttributesTo(t){this._attrs=An(t)}_removeAttribute(t){return this._attrs.delete(t)}_clearAttributes(){this._attrs.clear()}}Ar.prototype.is=function(t){return"node"===t||"model:node"===t};class Er extends(Ut(ar)){_lastRangeBackward=!1;_attrs=new Map;_ranges=[];constructor(...t){super(),t.length&&this.setTo(...t)}get anchor(){if(this._ranges.length>0){const t=this._ranges[this._ranges.length-1];return this._lastRangeBackward?t.end:t.start}return null}get focus(){if(this._ranges.length>0){const t=this._ranges[this._ranges.length-1];return this._lastRangeBackward?t.start:t.end}return null}get isCollapsed(){return 1===this._ranges.length&&this._ranges[0].isCollapsed}get rangeCount(){return this._ranges.length}get isBackward(){return!this.isCollapsed&&this._lastRangeBackward}isEqual(t){if(this.rangeCount!=t.rangeCount)return!1;if(0===this.rangeCount)return!0;if(!this.anchor.isEqual(t.anchor)||!this.focus.isEqual(t.focus))return!1;for(const e of this._ranges){let n=!1;for(const i of t._ranges)if(e.isEqual(i)){n=!0;break}if(!n)return!1}return!0}*getRanges(){for(const t of this._ranges)yield new br(t.start,t.end)}getFirstRange(){let t=null;for(const e of this._ranges)t&&!e.start.isBefore(t.start)||(t=e);return t?new br(t.start,t.end):null}getLastRange(){let t=null;for(const e of this._ranges)t&&!e.end.isAfter(t.end)||(t=e);return t?new br(t.start,t.end):null}getFirstPosition(){const t=this.getFirstRange();return t?t.start.clone():null}getLastPosition(){const t=this.getLastRange();return t?t.end.clone():null}setTo(...t){let[e,n,i]=t;if("object"==typeof n&&(i=n,n=void 0),null===e)this._setRanges([]);else if(e instanceof Er)this._setRanges(e.getRanges(),e.isBackward);else if(e&&"function"==typeof e.getRanges)this._setRanges(e.getRanges(),e.isBackward);else if(e instanceof br)this._setRanges([e],!!i&&!!i.backward);else if(e instanceof ur)this._setRanges([new br(e)]);else if(e instanceof Ar){const t=!!i&&!!i.backward;let o;if("in"==n)o=br._createIn(e);else if("on"==n)o=br._createOn(e);else{if(void 0===n)throw new Vt("model-selection-setto-required-second-parameter",[this,e]);o=new br(ur._createAt(e,n))}this._setRanges([o],t)}else{if(!he(e))throw new Vt("model-selection-setto-not-selectable",[this,e]);this._setRanges(e,i&&!!i.backward)}}_setRanges(t,e=!1){const n=Array.from(t),i=n.some(e=>{if(!(e instanceof br))throw new Vt("model-selection-set-ranges-not-range",[this,t]);return this._ranges.every(t=>!t.isEqual(e))});(n.length!==this._ranges.length||i)&&(this._replaceAllRanges(n),this._lastRangeBackward=!!e,this.fire("change:range",{directChange:!0}))}setFocus(t,e){if(null===this.anchor)throw new Vt("model-selection-setfocus-no-ranges",[this,t]);const n=ur._createAt(t,e);if("same"==n.compareWith(this.focus))return;const i=this.anchor;this._ranges.length&&this._popRange(),"before"==n.compareWith(i)?(this._pushRange(new br(n,i)),this._lastRangeBackward=!0):(this._pushRange(new br(i,n)),this._lastRangeBackward=!1),this.fire("change:range",{directChange:!0})}getAttribute(t){return this._attrs.get(t)}getAttributes(){return this._attrs.entries()}getAttributeKeys(){return this._attrs.keys()}hasAttribute(t){return this._attrs.has(t)}removeAttribute(t){this.hasAttribute(t)&&(this._attrs.delete(t),this.fire("change:attribute",{attributeKeys:[t],directChange:!0}))}setAttribute(t,e){this.getAttribute(t)!==e&&(this._attrs.set(t,e),this.fire("change:attribute",{attributeKeys:[t],directChange:!0}))}getSelectedElement(){return 1!==this.rangeCount?null:this.getFirstRange().getContainedElement()}*getSelectedBlocks(){const t=new WeakSet;for(const e of this.getRanges()){const n=Ir(e.start,t);Mr(n,e)&&(yield n);const i=e.getWalker();for(const n of i){const o=n.item;"elementEnd"==n.type&&Tr(o,t,e)?yield o:"elementStart"==n.type&&o.is("model:element")&&o.root.document.model.schema.isBlock(o)&&i.jumpTo(ur._createAt(o,"end"))}const o=Ir(e.end,t);Nr(o,e)&&(yield o)}}containsEntireContent(t=this.anchor.root){const e=ur._createAt(t,0),n=ur._createAt(t,"end");return e.isTouching(this.getFirstPosition())&&n.isTouching(this.getLastPosition())}_pushRange(t){this._checkRange(t),this._ranges.push(new br(t.start,t.end))}_checkRange(t){for(let e=0;e<this._ranges.length;e++)if(t.isIntersecting(this._ranges[e]))throw new Vt("model-selection-range-intersects",[this,t],{addedRange:t,intersectingRange:this._ranges[e]})}_replaceAllRanges(t){this._removeAllRanges();for(const e of t)this._pushRange(e)}_removeAllRanges(){for(;this._ranges.length>0;)this._popRange()}_popRange(){this._ranges.pop()}}function Sr(t,e){return!e.has(t)&&(e.add(t),t.root.document.model.schema.isBlock(t)&&!!t.parent)}function Tr(t,e,n){return Sr(t,e)&&Pr(t,n)}function Ir(t,e){const n=t.parent.root.document.model.schema,i=t.parent.getAncestors({parentFirst:!0,includeSelf:!0});let o=!1;const r=i.find(t=>!o&&(o=n.isLimit(t),!o&&Sr(t,e)));return i.forEach(t=>e.add(t)),r}function Pr(t,e){const n=function(t){const e=t.root.document.model.schema;let n=t.parent;for(;n;){if(e.isBlock(n))return n;n=n.parent}}(t);return!n||!e.containsRange(br._createOn(n),!0)}function Mr(t,e){return!!t&&(!(!e.isCollapsed&&!t.isEmpty)||!e.start.isTouching(ur._createAt(t,t.maxOffset))&&Pr(t,e))}function Nr(t,e){return!!t&&(!(!e.isCollapsed&&!t.isEmpty)||!e.end.isTouching(ur._createAt(t,0))&&Pr(t,e))}Er.prototype.is=function(t){return"selection"===t||"model:selection"===t};class Lr extends(Ut(br)){constructor(t,e){super(t,e),Vr.call(this)}detach(){this.stopListening()}toRange(){return new br(this.start,this.end)}static fromRange(t){return new Lr(t.start,t.end)}}function Vr(){this.listenTo(this.root.document.model,"applyOperation",(t,e)=>{const n=e[0];n.isDocumentOperation&&zr.call(this,n)},{priority:"low"})}function zr(t){const e=this.getTransformedByOperation(t),n=br._createFromRanges(e),i=!n.isEqual(this),o=function(t,e){switch(e.type){case"insert":return t.containsPosition(e.position);case"move":case"remove":case"reinsert":case"merge":return t.containsPosition(e.sourcePosition)||t.start.isEqual(e.sourcePosition)||t.containsPosition(e.targetPosition);case"split":return t.containsPosition(e.splitPosition)||t.containsPosition(e.insertionPosition)}return!1}(this,t);let r=null;if(i){"$graveyard"==n.root.rootName&&(r="remove"==t.type?t.sourcePosition:t.deletionPosition);const e=this.toRange();this.start=n.start,this.end=n.end,this.fire("change:range",e,{deletionPosition:r})}else o&&this.fire("change:content",this.toRange(),{deletionPosition:r})}Lr.prototype.is=function(t){return"liveRange"===t||"model:liveRange"===t||"range"==t||"model:range"===t};class Or extends Ar{_data;constructor(t,e){super(e),this._data=t||""}get offsetSize(){return this.data.length}get data(){return this._data}toJSON(){const t=super.toJSON();return t.data=this.data,t}_clone(){return new Or(this.data,this.getAttributes())}static fromJSON(t){return new Or(t.data,t.attributes)}}Or.prototype.is=function(t){return"$text"===t||"model:$text"===t||"text"===t||"model:text"===t||"node"===t||"model:node"===t};const Rr="selection:";class Dr extends(Ut(ar)){_selection;constructor(t){super(),this._selection=new Br(t),this._selection.delegate("change:range").to(this),this._selection.delegate("change:attribute").to(this),this._selection.delegate("change:marker").to(this)}get isCollapsed(){return this._selection.isCollapsed}get anchor(){return this._selection.anchor}get focus(){return this._selection.focus}get rangeCount(){return this._selection.rangeCount}get hasOwnRange(){return this._selection.hasOwnRange}get isBackward(){return this._selection.isBackward}get isGravityOverridden(){return this._selection.isGravityOverridden}get markers(){return this._selection.markers}get _ranges(){return this._selection._ranges}getRanges(){return this._selection.getRanges()}getFirstPosition(){return this._selection.getFirstPosition()}getLastPosition(){return this._selection.getLastPosition()}getFirstRange(){return this._selection.getFirstRange()}getLastRange(){return this._selection.getLastRange()}getSelectedBlocks(){return this._selection.getSelectedBlocks()}getSelectedElement(){return this._selection.getSelectedElement()}containsEntireContent(t){return this._selection.containsEntireContent(t)}destroy(){this._selection.destroy()}getAttributeKeys(){return this._selection.getAttributeKeys()}getAttributes(){return this._selection.getAttributes()}getAttribute(t){return this._selection.getAttribute(t)}hasAttribute(t){return this._selection.hasAttribute(t)}refresh(){this._selection.updateMarkers(),this._selection._updateAttributes(!1)}observeMarkers(t){this._selection.observeMarkers(t)}_setFocus(t,e){this._selection.setFocus(t,e)}_setTo(...t){this._selection.setTo(...t)}_setAttribute(t,e){this._selection.setAttribute(t,e)}_removeAttribute(t){this._selection.removeAttribute(t)}_getStoredAttributes(){return this._selection.getStoredAttributes()}_overrideGravity(){return this._selection.overrideGravity()}_restoreGravity(t){this._selection.restoreGravity(t)}static _getStoreAttributeKey(t){return Rr+t}static _isStoreAttributeKey(t){return t.startsWith(Rr)}}Dr.prototype.is=function(t){return"selection"===t||"model:selection"==t||"documentSelection"==t||"model:documentSelection"==t};class Br extends Er{markers=new kn({idProperty:"name"});_model;_document;_attributePriority=new Map;_selectionRestorePosition=null;_hasChangedRange=!1;_overriddenGravityRegister=new Set;_observedMarkers=new Set;constructor(t){super(),this._model=t.model,this._document=t,this.listenTo(this._model,"applyOperation",(t,e)=>{const n=e[0];n.isDocumentOperation&&"marker"!=n.type&&"rename"!=n.type&&"noop"!=n.type&&(0==this._ranges.length&&this._selectionRestorePosition&&this._fixGraveyardSelection(this._selectionRestorePosition),this._selectionRestorePosition=null,this._hasChangedRange&&(this._hasChangedRange=!1,this.fire("change:range",{directChange:!1})))},{priority:"lowest"}),this.on("change:range",()=>{this._validateSelectionRanges(this.getRanges())}),this.listenTo(this._model.markers,"update",(t,e,n,i)=>{this._updateMarker(e,i)}),this.listenTo(this._document,"change",(t,e)=>{!function(t,e){const n=t.document.differ;for(const i of n.getChanges()){if("insert"!=i.type)continue;const n=i.position.parent;i.length===n.maxOffset&&t.enqueueChange(e,t=>{const e=Array.from(n.getAttributeKeys()).filter(t=>t.startsWith(Rr));for(const i of e)t.removeAttribute(i,n)})}}(this._model,e)})}get isCollapsed(){return 0===this._ranges.length?this._document._getDefaultRange().isCollapsed:super.isCollapsed}get anchor(){return super.anchor||this._document._getDefaultRange().start}get focus(){return super.focus||this._document._getDefaultRange().end}get rangeCount(){return this._ranges.length?this._ranges.length:1}get hasOwnRange(){return this._ranges.length>0}get isGravityOverridden(){return!!this._overriddenGravityRegister.size}destroy(){for(let t=0;t<this._ranges.length;t++)this._ranges[t].detach();this.stopListening()}*getRanges(){this._ranges.length?yield*super.getRanges():yield this._document._getDefaultRange()}getFirstRange(){return super.getFirstRange()||this._document._getDefaultRange()}getLastRange(){return super.getLastRange()||this._document._getDefaultRange()}setTo(...t){super.setTo(...t),this._updateAttributes(!0),this.updateMarkers()}setFocus(t,e){super.setFocus(t,e),this._updateAttributes(!0),this.updateMarkers()}setAttribute(t,e){if(this._setAttribute(t,e)){const e=[t];this.fire("change:attribute",{attributeKeys:e,directChange:!0})}}removeAttribute(t){if(this._removeAttribute(t)){const e=[t];this.fire("change:attribute",{attributeKeys:e,directChange:!0})}}overrideGravity(){const t=Mt();return this._overriddenGravityRegister.add(t),1===this._overriddenGravityRegister.size&&this._updateAttributes(!0),t}restoreGravity(t){if(!this._overriddenGravityRegister.has(t))throw new Vt("document-selection-gravity-wrong-restore",this,{uid:t});this._overriddenGravityRegister.delete(t),this.isGravityOverridden||this._updateAttributes(!0)}observeMarkers(t){this._observedMarkers.add(t),this.updateMarkers()}_replaceAllRanges(t){this._validateSelectionRanges(t),super._replaceAllRanges(t)}_popRange(){this._ranges.pop().detach()}_pushRange(t){const e=this._prepareRange(t);e&&this._ranges.push(e)}_validateSelectionRanges(t){for(const e of t)if(!this._document._validateSelectionRange(e))throw new Vt("document-selection-wrong-position",this,{range:e})}_prepareRange(t){if(this._checkRange(t),t.root==this._document.graveyard)return;const e=Lr.fromRange(t);return e.on("change:range",(t,n,i)=>{if(this._hasChangedRange=!0,e.root==this._document.graveyard){this._selectionRestorePosition=i.deletionPosition;const t=this._ranges.indexOf(e);this._ranges.splice(t,1),e.detach()}}),e}updateMarkers(){if(!this._observedMarkers.size)return;const t=[];let e=!1;for(const e of this._model.markers){const n=e.name.split(":",1)[0];if(!this._observedMarkers.has(n))continue;const i=e.getRange();for(const n of this.getRanges())i.containsRange(n,!n.isCollapsed)&&t.push(e)}const n=Array.from(this.markers);for(const n of t)this.markers.has(n)||(this.markers.add(n),e=!0);for(const n of Array.from(this.markers))t.includes(n)||(this.markers.remove(n),e=!0);e&&this.fire("change:marker",{oldMarkers:n,directChange:!1})}_updateMarker(t,e){const n=t.name.split(":",1)[0];if(!this._observedMarkers.has(n))return;let i=!1;const o=Array.from(this.markers),r=this.markers.has(t);if(e){let n=!1;for(const t of this.getRanges())if(e.containsRange(t,!t.isCollapsed)){n=!0;break}n&&!r?(this.markers.add(t),i=!0):!n&&r&&(this.markers.remove(t),i=!0)}else r&&(this.markers.remove(t),i=!0);i&&this.fire("change:marker",{oldMarkers:o,directChange:!1})}_updateAttributes(t){const e=An(this._getSurroundingAttributes()),n=An(this.getAttributes());if(t)this._attributePriority=new Map,this._attrs=new Map;else for(const[t,e]of this._attributePriority)"low"==e&&(this._attrs.delete(t),this._attributePriority.delete(t));this._setAttributesTo(e);const i=[];for(const[t,e]of this.getAttributes())n.has(t)&&n.get(t)===e||i.push(t);for(const[t]of n)this.hasAttribute(t)||i.push(t);i.length>0&&this.fire("change:attribute",{attributeKeys:i,directChange:!1})}_setAttribute(t,e,n=!0){const i=n?"normal":"low";return("low"!=i||"normal"!=this._attributePriority.get(t))&&(super.getAttribute(t)!==e&&(this._attrs.set(t,e),this._attributePriority.set(t,i),!0))}_removeAttribute(t,e=!0){const n=e?"normal":"low";return!("low"==n&&"normal"==this._attributePriority.get(t)||(this._attributePriority.set(t,n),!super.hasAttribute(t)||(this._attrs.delete(t),0)))}_setAttributesTo(t){const e=new Set;for(const[e,n]of this.getAttributes())t.get(e)!==n&&this._removeAttribute(e,!1);for(const[n,i]of t)this._setAttribute(n,i,!1)&&e.add(n);return e}*getStoredAttributes(){const t=this.getFirstPosition().parent;if(this.isCollapsed&&t.isEmpty)for(const e of t.getAttributeKeys())if(e.startsWith(Rr)){const n=e.substr(10);yield[n,t.getAttribute(e)]}}_getSurroundingAttributes(){const t=this.getFirstPosition(),e=this._model.schema;if("$graveyard"==t.root.rootName)return null;let n=null;if(this.isCollapsed){const i=t.textNode?t.textNode:t.nodeBefore,o=t.textNode?t.textNode:t.nodeAfter;if(this.isGravityOverridden||(n=Fr(i,e)),n||(n=Fr(o,e)),!this.isGravityOverridden&&!n){let t=i;for(;t&&!n;)t=t.previousSibling,n=Fr(t,e)}if(!n){let t=o;for(;t&&!n;)t=t.nextSibling,n=Fr(t,e)}n||(n=this.getStoredAttributes())}else{const t=this.getFirstRange();for(const i of t){if(i.item.is("element")&&e.isObject(i.item)){n=Fr(i.item,e);break}if("text"==i.type){n=i.item.getAttributes();break}}}return n}_fixGraveyardSelection(t){const e=this._model.schema.getNearestSelectionRange(t);e&&this._pushRange(e)}}function Fr(t,e){if(!t)return null;if(t instanceof lr||t instanceof Or)return t.getAttributes();if(!e.isInline(t))return null;if(!e.isObject(t))return[];const n=[];for(const[i,o]of t.getAttributes())e.checkAttribute("$text",i)&&!1!==e.getAttributeProperties(i).copyFromObject&&n.push([i,o]);return n}class jr{_nodes=[];_offsetToNode=[];constructor(t){t&&this._insertNodes(0,t)}[Symbol.iterator](){return this._nodes[Symbol.iterator]()}get length(){return this._nodes.length}get maxOffset(){return this._offsetToNode.length}getNode(t){return this._nodes[t]||null}getNodeAtOffset(t){return this._offsetToNode[t]||null}getNodeIndex(t){return t.index}getNodeStartOffset(t){return t.startOffset}indexToOffset(t){if(t==this._nodes.length)return this.maxOffset;const e=this._nodes[t];if(!e)throw new Vt("model-nodelist-index-out-of-bounds",this);return this.getNodeStartOffset(e)}offsetToIndex(t){if(t==this._offsetToNode.length)return this._nodes.length;const e=this._offsetToNode[t];if(!e)throw new Vt("model-nodelist-offset-out-of-bounds",this,{offset:t,nodeList:this});return this.getNodeIndex(e)}_insertNodes(t,e){const n=[];for(const t of e){if(!(t instanceof Ar))throw new Vt("model-nodelist-insertnodes-not-node",this);n.push(t)}let i=this.indexToOffset(t);En(this._nodes,n,t),En(this._offsetToNode,function(t){const e=[];let n=0;for(const i of t)for(let t=0;t<i.offsetSize;t++)e[n++]=i;return e}(n),i);for(let e=t;e<this._nodes.length;e++)this._nodes[e]._index=e,this._nodes[e]._startOffset=i,i+=this._nodes[e].offsetSize}_removeNodes(t,e=1){if(0==e)return[];let n=this.indexToOffset(t);const i=this._nodes.splice(t,e),o=i[i.length-1],r=o.startOffset+o.offsetSize-n;this._offsetToNode.splice(n,r);for(const t of i)t._index=null,t._startOffset=null;for(let e=t;e<this._nodes.length;e++)this._nodes[e]._index=e,this._nodes[e]._startOffset=n,n+=this._nodes[e].offsetSize;return i}_removeNodesArray(t){if(0==t.length)return;for(const e of t)e._index=null,e._startOffset=null;this._nodes=this._nodes.filter(t=>null!==t.index),this._offsetToNode=this._offsetToNode.filter(t=>null!==t.index);let e=0;for(let t=0;t<this._nodes.length;t++)this._nodes[t]._index=t,this._nodes[t]._startOffset=e,e+=this._nodes[t].offsetSize}toJSON(){return this._nodes.map(t=>t.toJSON())}}class Hr extends Ar{name;_children=new jr;constructor(t,e,n){super(e),this.name=t,n&&this._insertChild(0,n)}get childCount(){return this._children.length}get maxOffset(){return this._children.maxOffset}get isEmpty(){return 0===this.childCount}getChild(t){return this._children.getNode(t)}getChildAtOffset(t){return this._children.getNodeAtOffset(t)}getChildren(){return this._children[Symbol.iterator]()}getChildIndex(t){return this._children.getNodeIndex(t)}getChildStartOffset(t){return this._children.getNodeStartOffset(t)}offsetToIndex(t){return this._children.offsetToIndex(t)}getNodeByPath(t){let e=this;for(const n of t)e=e.getChildAtOffset(n);return e}findAncestor(t,e={}){let n=e.includeSelf?this:this.parent;for(;n;){if(n.name===t)return n;n=n.parent}return null}toJSON(){const t=super.toJSON();if(t.name=this.name,this._children.length>0){t.children=[];for(const e of this._children)t.children.push(e.toJSON())}return t}_clone(t=!1){const e=t?function(t){const e=[];for(const n of t)e.push(n._clone(!0));return e}(this._children):void 0;return new Hr(this.name,this.getAttributes(),e)}_appendChild(t){this._insertChild(this.childCount,t)}_insertChild(t,e){const n=function(t){if("string"==typeof t)return[new Or(t)];he(t)||(t=[t]);const e=[];for(const n of t)"string"==typeof n?e.push(new Or(n)):n instanceof lr?e.push(new Or(n.data,n.getAttributes())):e.push(n);return e}(e);for(const t of n)null!==t.parent&&t._remove(),t.parent=this;this._children._insertNodes(t,n)}_removeChildren(t,e=1){const n=this._children._removeNodes(t,e);for(const t of n)t.parent=null;return n}_removeChildrenArray(t){this._children._removeNodesArray(t);for(const e of t)e.parent=null}static fromJSON(t){let e;if(t.children){e=[];for(const n of t.children)n.name?e.push(Hr.fromJSON(n)):e.push(Or.fromJSON(n))}return new Hr(t.name,t.attributes,e)}}Hr.prototype.is=function(t,e){return e?e===this.name&&("element"===t||"model:element"===t):"element"===t||"model:element"===t||"node"===t||"model:node"===t};class Ur{_dispatchers;constructor(t){this._dispatchers=t}add(t){for(const e of this._dispatchers)t(e);return this}}class $r extends Ur{elementToElement(t){return this.add(function(t){const e=Kr(t.model),n=Gr(t.view,"container");return e.attributes.length&&(e.children=!0),i=>{i.on(`insert:${e.name}`,function(t,e=ns){return(n,i,o)=>{if(!e(i.item,o.consumable,{preflight:!0}))return;const r=t(i.item,o,i);if(!r)return;e(i.item,o.consumable);const s=o.mapper.toViewPosition(i.range.start);o.mapper.bindElements(i.item,r),o.writer.insert(s,r),o.convertAttributes(i.item),ts(r,i.item.getChildren(),o,{reconversion:i.reconversion})}}(n,Xr(e)),{priority:t.converterPriority||"normal"}),(e.children||e.attributes.length)&&i.on("reduceChanges",Zr(e),{priority:"low"})}}(t))}elementToStructure(t){return this.add(function(t){const e=Kr(t.model),n=Gr(t.view,"container");return e.children=!0,i=>{if(i._conversionApi.schema.checkChild(e.name,"$text"))throw new Vt("conversion-element-to-structure-disallowed-text",i,{elementName:e.name});var o,r;i.on(`insert:${e.name}`,(o=n,r=Xr(e),(t,e,n)=>{if(!r(e.item,n.consumable,{preflight:!0}))return;const i=new Map;n.writer._registerSlotFactory(function(t,e,n){return(i,o)=>{const r=i.createContainerElement("$slot");let s=null;if("children"===o)s=Array.from(t.getChildren());else{if("function"!=typeof o)throw new Vt("conversion-slot-mode-unknown",n.dispatcher,{modeOrFilter:o});s=Array.from(t.getChildren()).filter(t=>o(t))}return e.set(r,s),r}}(e.item,i,n));const s=o(e.item,n,e);if(n.writer._clearSlotFactory(),!s)return;!function(t,e,n){const i=Array.from(e.values()).flat(),o=new Set(i);if(o.size!=i.length)throw new Vt("conversion-slot-filter-overlap",n.dispatcher,{element:t});if(o.size!=t.childCount)throw new Vt("conversion-slot-filter-incomplete",n.dispatcher,{element:t})}(e.item,i,n),r(e.item,n.consumable);const a=n.mapper.toViewPosition(e.range.start);n.mapper.bindElements(e.item,s),n.writer.insert(a,s),n.convertAttributes(e.item),function(t,e,n,i){n.mapper.on("modelToViewPosition",s,{priority:"highest"});let o=null,r=null;for([o,r]of e)ts(t,r,n,i),n.writer.move(n.writer.createRangeIn(o),n.writer.createPositionBefore(o)),n.writer.remove(o);function s(t,e){const n=e.modelPosition.nodeAfter,i=r.indexOf(n);i<0||(e.viewPosition=e.mapper.findPositionIn(o,i))}n.mapper.off("modelToViewPosition",s)}(s,i,n,{reconversion:e.reconversion})}),{priority:t.converterPriority||"normal"}),i.on("reduceChanges",Zr(e),{priority:"low"})}}(t))}attributeToElement(t){return this.add(function(t){let e=(t=rt(t)).model;"string"==typeof e&&(e={key:e});let n=`attribute:${e.key}`;if(e.name&&(n+=":"+e.name),e.values)for(const n of e.values)t.view[n]=Gr(t.view[n],"attribute");else t.view=Gr(t.view,"attribute");const i=Qr(t);return e=>{e.on(n,function(t){return(e,n,i)=>{if(!i.consumable.test(n.item,e.name))return;const o=t(n.attributeOldValue,i,n),r=t(n.attributeNewValue,i,n);if(!o&&!r)return;i.consumable.consume(n.item,e.name);const s=i.writer,a=s.document.selection;if(n.item instanceof Er||n.item instanceof Dr)s.wrap(a.getFirstRange(),r);else{let t=i.mapper.toViewRange(n.range);null!==n.attributeOldValue&&o&&(t=s.unwrap(t,o)),null!==n.attributeNewValue&&r&&s.wrap(t,r)}}}(i),{priority:t.converterPriority||"normal"})}}(t))}attributeToAttribute(t){return this.add(function(t){let e=(t=rt(t)).model;"string"==typeof e&&(e={key:e});let n=`attribute:${e.key}`;if(e.name&&(n+=":"+e.name),e.values)for(const n of e.values)t.view[n]=Yr(t.view[n]);else t.view=Yr(t.view);const i=Qr(t);return e=>{var o;e.on(n,(o=i,(t,e,n)=>{if(!n.consumable.test(e.item,t.name))return;const i=o(e.attributeOldValue,n,e),r=o(e.attributeNewValue,n,e);if(!i&&!r)return;n.consumable.consume(e.item,t.name);const s=n.mapper.toViewElement(e.item),a=n.writer;if(!s)throw new Vt("conversion-attribute-to-attribute-on-text",n.dispatcher,e);if(null!==e.attributeOldValue&&i){let t=i.value;"style"==i.key&&(t="string"==typeof i.value?new xi(a.document.stylesProcessor).setTo(i.value).getStylesEntries().map(([t])=>t):Object.keys(i.value)),a.removeAttribute(i.key,t,s)}if(null!==e.attributeNewValue&&r){let t=r.value;"style"==r.key&&"string"==typeof r.value&&(t=Object.fromEntries(new xi(a.document.stylesProcessor).setTo(r.value).getStylesEntries())),a.setAttribute(r.key,t,!1,s)}}),{priority:t.converterPriority||"normal"})}}(t))}markerToElement(t){return this.add(function(t){const e=Gr(t.view,"ui");return n=>{var i;n.on(`addMarker:${t.model}`,(i=e,(t,e,n)=>{e.isOpening=!0;const o=i(e,n);e.isOpening=!1;const r=i(e,n);if(!o||!r)return;const s=e.markerRange;if(s.isCollapsed&&!n.consumable.consume(s,t.name))return;for(const e of s)if(!n.consumable.consume(e.item,t.name))return;const a=n.mapper,l=n.writer;l.insert(a.toViewPosition(s.start),o),n.mapper.bindElementToMarker(o,e.markerName),s.isCollapsed||(l.insert(a.toViewPosition(s.end),r),n.mapper.bindElementToMarker(r,e.markerName)),t.stop()}),{priority:t.converterPriority||"normal"}),n.on(`removeMarker:${t.model}`,(t,e,n)=>{const i=n.mapper.markerNameToElements(e.markerName);if(i){for(const t of i)n.mapper.unbindElementFromMarkerName(t,e.markerName),n.writer.clear(n.writer.createRangeOn(t),t);n.writer.clearClonedElementsGroup(e.markerName),t.stop()}},{priority:t.converterPriority||"normal"})}}(t))}markerToHighlight(t){return this.add(function(t){return e=>{var n;e.on(`addMarker:${t.model}`,(n=t.view,(t,e,i)=>{if(!e.item)return;if(!(e.item instanceof Er||e.item instanceof Dr||e.item.is("$textProxy")))return;const o=Jr(n,e,i);if(!o)return;if(!i.consumable.consume(e.item,t.name))return;const r=i.writer,s=Wr(r,o),a=r.document.selection;if(e.item instanceof Er||e.item instanceof Dr)r.wrap(a.getFirstRange(),s);else{const t=i.mapper.toViewRange(e.range),n=r.wrap(t,s);for(const t of n.getItems())if(t.is("attributeElement")&&t.isSimilar(s)){i.mapper.bindElementToMarker(t,e.markerName);break}}}),{priority:t.converterPriority||"normal"}),e.on(`addMarker:${t.model}`,function(t){return(e,n,i)=>{if(!n.item)return;if(!(n.item instanceof Hr))return;const o=Jr(t,n,i);if(!o)return;if(!i.consumable.test(n.item,e.name))return;const r=i.mapper.toViewElement(n.item);if(r&&r.getCustomProperty("addHighlight")){i.consumable.consume(n.item,e.name);for(const t of br._createIn(n.item))i.consumable.consume(t.item,e.name);r.getCustomProperty("addHighlight")(r,o,i.writer),i.mapper.bindElementToMarker(r,n.markerName)}}}(t.view),{priority:t.converterPriority||"normal"}),e.on(`removeMarker:${t.model}`,function(t){return(e,n,i)=>{if(n.markerRange.isCollapsed)return;const o=Jr(t,n,i);if(!o)return;const r=Wr(i.writer,o),s=i.mapper.markerNameToElements(n.markerName);if(s){for(const t of s)i.mapper.unbindElementFromMarkerName(t,n.markerName),t.is("attributeElement")?i.writer.unwrap(i.writer.createRangeOn(t),r):t.getCustomProperty("removeHighlight")(t,o.id,i.writer);i.writer.clearClonedElementsGroup(n.markerName),e.stop()}}}(t.view),{priority:t.converterPriority||"normal"})}}(t))}markerToData(t){return this.add(function(t){const e=(t=rt(t)).model;let n=t.view;return n||(n=n=>({group:e,name:n.substr(t.model.length+1)})),i=>{var o;i.on(`addMarker:${e}`,(o=n,(t,e,n)=>{const i=o(e.markerName,n);if(!i)return;const r=e.markerRange;n.consumable.consume(r,t.name)&&(qr(r,!1,n,e,i),qr(r,!0,n,e,i),t.stop())}),{priority:t.converterPriority||"normal"}),i.on(`removeMarker:${e}`,function(t){return(e,n,i)=>{const o=t(n.markerName,i);if(!o)return;const r=i.mapper.markerNameToElements(n.markerName);if(r){for(const t of r)i.mapper.unbindElementFromMarkerName(t,n.markerName),t.is("containerElement")?(s(`data-${o.group}-start-before`,t),s(`data-${o.group}-start-after`,t),s(`data-${o.group}-end-before`,t),s(`data-${o.group}-end-after`,t)):i.writer.clear(i.writer.createRangeOn(t),t);i.writer.clearClonedElementsGroup(n.markerName),e.stop()}function s(t,e){if(e.hasAttribute(t)){const n=new Set(e.getAttribute(t).split(","));n.delete(o.name),0==n.size?i.writer.removeAttribute(t,e):i.writer.setAttribute(t,Array.from(n).join(","),e)}}}}(n),{priority:t.converterPriority||"normal"})}}(t))}}function Wr(t,e){const n=t.createAttributeElement("span",e.attributes);return e.classes&&n._addClass(e.classes),"number"==typeof e.priority&&(n._priority=e.priority),n._id=e.id,n}function qr(t,e,n,i,o){const r=e?t.start:t.end,s=r.nodeAfter&&r.nodeAfter.is("element")?r.nodeAfter:null,a=r.nodeBefore&&r.nodeBefore.is("element")?r.nodeBefore:null;if(s||a){let t,r;e&&s||!e&&!a?(t=s,r=!0):(t=a,r=!1);const l=n.mapper.toViewElement(t);if(l)return void function(t,e,n,i,o,r){const s=`data-${r.group}-${e?"start":"end"}-${n?"before":"after"}`,a=t.hasAttribute(s)?t.getAttribute(s).split(","):[];a.unshift(r.name),i.writer.setAttribute(s,a.join(","),t),i.mapper.bindElementToMarker(t,o.markerName)}(l,e,r,n,i,o)}!function(t,e,n,i,o){const r=`${o.group}-${e?"start":"end"}`,s=o.name?{name:o.name}:null,a=n.writer.createUIElement(r,s);n.writer.insert(t,a),n.mapper.bindElementToMarker(a,i.markerName)}(n.mapper.toViewPosition(r),e,n,i,o)}function Kr(t){return"string"==typeof t&&(t={name:t}),{name:t.name,attributes:t.attributes?fn(t.attributes):[],children:!!t.children}}function Gr(t,e){return"function"==typeof t?t:(n,i)=>function(t,e,n){let i;"string"==typeof t&&(t={name:t});const o=e.writer,r=Object.assign({},t.attributes);if("container"==n)i=o.createContainerElement(t.name,r);else if("attribute"==n){const e={priority:t.priority||Zi.DEFAULT_PRIORITY};i=o.createAttributeElement(t.name,r,e)}else i=o.createUIElement(t.name,r);if(t.styles){const e=Object.keys(t.styles);for(const n of e)o.setStyle(n,t.styles[n],i)}if(t.classes){const e=t.classes;if("string"==typeof e)o.addClass(e,i);else for(const t of e)o.addClass(t,i)}return i}(t,i,e)}function Qr(t){return t.model.values?(e,n,i)=>{const o=t.view[e];return o?o(e,n,i):null}:t.view}function Yr(t){return"string"==typeof t?e=>({key:t,value:e}):"object"==typeof t?t.value?()=>t:e=>({key:t.key,value:e}):t}function Jr(t,e,n){const i="function"==typeof t?t(e,n):t;return i?(i.priority||(i.priority=10),i.id||(i.id=e.markerName),i):null}function Zr(t){const e=function(t){return(e,n)=>{if(!e.is("element",t.name))return!1;if("attribute"==n.type){if(t.attributes.includes(n.attributeKey))return!0}else if(t.children)return!0;return!1}}(t);return(t,n)=>{const i=[];n.reconvertedElements||(n.reconvertedElements=new Set);for(const t of n.changes){const o="attribute"==t.type?t.range.start.nodeAfter:t.position.parent;if(o&&e(o,t)){if(!n.reconvertedElements.has(o)){n.reconvertedElements.add(o);const t=ur._createBefore(o);let e=i.length;for(let n=i.length-1;n>=0;n--){const o=i[n],r=("attribute"==o.type?o.range.start:o.position).compareWith(t);if("before"==r||"remove"==o.type&&"same"==r)break;e=n}i.splice(e,0,{type:"remove",name:o.name,position:t,length:1},{type:"reinsert",name:o.name,position:t,length:1})}}else i.push(t)}n.changes=i}}function Xr(t){return(e,n,i={})=>{const o=["insert"];for(const n of t.attributes)e.hasAttribute(n)&&o.push(`attribute:${n}`);return!!o.every(t=>n.test(e,t))&&(i.preflight||o.forEach(t=>n.consume(e,t)),!0)}}function ts(t,e,n,i){for(const o of e)es(t.root,o,n,i)||n.convertItem(o)}function es(t,e,n,i){const{writer:o,mapper:r}=n;if(!i.reconversion)return!1;const s=r.toViewElement(e);return!(!s||s.root==t||!n.canReuseView(s)||(o.move(o.createRangeOn(s),r.toViewPosition(ur._createBefore(e))),0))}function ns(t,e,{preflight:n}={}){return n?e.test(t,"insert"):e.consume(t,"insert")}function is(t){const{schema:e,document:n}=t.model;for(const i of n.getRoots())if(i.isEmpty&&!e.checkChild(i,"$text")&&e.checkChild(i,"paragraph"))return t.insertElement("paragraph",i),!0;return!1}function os(t,e,n){const i=n.createContext(t);return!!n.checkChild(i,"paragraph")&&!!n.checkChild(i.push("paragraph"),e)}function rs(t,e){const n=e.createElement("paragraph");return e.insert(n,t),e.createPositionAt(n,0)}class ss extends Ur{elementToElement(t){return this.add(as(t))}elementToAttribute(t){return this.add(function(t){ds(t=rt(t));const e=us(t,!1),n=ls(t.view),i=n?`element:${n}`:"element";return n=>{n.on(i,e,{priority:t.converterPriority||"low"})}}(t))}attributeToAttribute(t){return this.add(function(t){let e=null;("string"==typeof(t=rt(t)).view||t.view.key)&&(e=function(t){"string"==typeof t.view&&(t.view={key:t.view});const e=t.view.key,n=void 0===t.view.value?/[\s\S]*/:t.view.value;let i;if("class"==e||"style"==e){const t="class"==e?"classes":"styles";i={[t]:n}}else i={attributes:{[e]:n}};return t.view.name&&(i.name=t.view.name),t.view=i,e}(t)),ds(t,e);const n=us(t,!0);return e=>{e.on("element",n,{priority:t.converterPriority||"low"})}}(t))}elementToMarker(t){return this.add(function(t){const e=function(t){return(e,n)=>{const i="string"==typeof t?t:t(e,n);return n.writer.createElement("$marker",{"data-name":i})}}(t.model);return as({...t,model:e})}(t))}dataToMarker(t){return this.add(function(t){(t=rt(t)).model||(t.model=e=>e?t.view+":"+e:t.view);const e={view:t.view,model:t.model},n=cs(hs(e,"start")),i=cs(hs(e,"end"));return o=>{o.on(`element:${t.view}-start`,n,{priority:t.converterPriority||"normal"}),o.on(`element:${t.view}-end`,i,{priority:t.converterPriority||"normal"});const r=Nt.low,s=Nt.highest,a=Nt.get(t.converterPriority)/s;o.on("element",function(t){return(e,n,i)=>{const o=`data-${t.view}`;function r(e,o){for(const r of o){const o=t.model(r,i),s=i.writer.createElement("$marker",{"data-name":o});i.writer.insert(s,e),n.modelCursor.isEqual(e)?n.modelCursor=n.modelCursor.getShiftedBy(1):n.modelCursor=n.modelCursor._getTransformedByInsertion(e,1),n.modelRange=n.modelRange._getTransformedByInsertion(e,1)[0]}}(i.consumable.test(n.viewItem,{attributes:o+"-end-after"})||i.consumable.test(n.viewItem,{attributes:o+"-start-after"})||i.consumable.test(n.viewItem,{attributes:o+"-end-before"})||i.consumable.test(n.viewItem,{attributes:o+"-start-before"}))&&(n.modelRange||Object.assign(n,i.convertChildren(n.viewItem,n.modelCursor)),i.consumable.consume(n.viewItem,{attributes:o+"-end-after"})&&r(n.modelRange.end,n.viewItem.getAttribute(o+"-end-after").split(",")),i.consumable.consume(n.viewItem,{attributes:o+"-start-after"})&&r(n.modelRange.end,n.viewItem.getAttribute(o+"-start-after").split(",")),i.consumable.consume(n.viewItem,{attributes:o+"-end-before"})&&r(n.modelRange.start,n.viewItem.getAttribute(o+"-end-before").split(",")),i.consumable.consume(n.viewItem,{attributes:o+"-start-before"})&&r(n.modelRange.start,n.viewItem.getAttribute(o+"-start-before").split(",")))}}(e),{priority:r+a})}}(t))}}function as(t){const e=cs(t=rt(t)),n=ls(t.view),i=n?`element:${n}`:"element";return n=>{n.on(i,e,{priority:t.converterPriority||"normal"})}}function ls(t){return"string"==typeof t?t:"object"==typeof t&&"string"==typeof t.name?t.name:null}function cs(t){const e=new vi(t.view);return(n,i,o)=>{const r=e.match(i.viewItem);if(!r)return;const s=r.match;if(s.name=!0,!o.consumable.test(i.viewItem,s))return;const a=function(t,e,n){return t instanceof Function?t(e,n):n.writer.createElement(t)}(t.model,i.viewItem,o);a&&o.safeInsert(a,i.modelCursor)&&(o.consumable.consume(i.viewItem,s),o.convertChildren(i.viewItem,a),o.updateConversionResult(a,i))}}function ds(t,e=null){const n=null===e||(t=>t.getAttribute(e)),i="object"!=typeof t.model?t.model:t.model.key,o="object"!=typeof t.model||void 0===t.model.value?n:t.model.value;t.model={key:i,value:o}}function us(t,e){const n=new vi(t.view);return(i,o,r)=>{if(!o.modelRange&&e)return;const s=n.match(o.viewItem);if(!s)return;if(function(t,e){const n="function"==typeof t?t(e):t;return!("object"==typeof n&&!ls(n))&&(!n.classes&&!n.attributes&&!n.styles)}(t.view,o.viewItem)?s.match.name=!0:delete s.match.name,!r.consumable.test(o.viewItem,s.match))return;const a=t.model.key,l="function"==typeof t.model.value?t.model.value(o.viewItem,r,o):t.model.value;if(null==l)return;o.modelRange||Object.assign(o,r.convertChildren(o.viewItem,o.modelCursor));const c=function(t,e,n,i){let o=!1;for(const r of Array.from(t.getItems({shallow:n})))i.schema.checkAttribute(r,e.key)&&(o=!0,r.hasAttribute(e.key)||i.writer.setAttribute(e.key,e.value,r));return o}(o.modelRange,{key:a,value:l},e,r);c&&(r.consumable.test(o.viewItem,{name:!0})&&(s.match.name=!0),r.consumable.consume(o.viewItem,s.match))}}function hs(t,e){return{view:`${t.view}-${e}`,model:(e,n)=>{const i=e.getAttribute("name"),o=t.model(i,n);return n.writer.createElement("$marker",{"data-name":o})}}}class gs extends(ie()){model;view;mapper;downcastDispatcher;constructor(t,e){super(),this.model=t,this.view=new sr(e),this.mapper=new kr,this.downcastDispatcher=new yr({mapper:this.mapper,schema:t.schema});const n=this.model.document,i=n.selection,o=this.model.markers;this.listenTo(this.model,"_beforeChanges",()=>{this.view._disableRendering(!0)},{priority:"highest"}),this.listenTo(this.model,"_afterChanges",()=>{this.view._disableRendering(!1)},{priority:"lowest"}),this.listenTo(n,"change",()=>{this.view.change(t=>{this.downcastDispatcher.convertChanges(n.differ,o,t),this.downcastDispatcher.convertSelection(i,o,t)})},{priority:"low"}),this.listenTo(this.view.document,"selectionChange",function(t,e){return(n,i)=>{const o=i.newSelection,r=[];for(const t of o.getRanges())r.push(e.toModelRange(t));const s=t.createSelection(r,{backward:o.isBackward});s.isEqual(t.document.selection)||t.change(t=>{t.setSelection(s)})}}(this.model,this.mapper)),this.downcastDispatcher.on("insert:$text",(t,e,n)=>{if(!n.consumable.consume(e.item,t.name))return;const i=n.writer,o=n.mapper.toViewPosition(e.range.start),r=i.createText(e.item.data);i.insert(o,r)},{priority:"lowest"}),this.downcastDispatcher.on("insert",(t,e,n)=>{n.convertAttributes(e.item),e.reconversion||!e.item.is("element")||e.item.isEmpty||n.convertChildren(e.item)},{priority:"lowest"}),this.downcastDispatcher.on("remove",(t,e,n)=>{const i=n.mapper.toViewPosition(e.position),o=e.position.getShiftedBy(e.length),r=n.mapper.toViewPosition(o,{isPhantom:!0}),s=n.writer.createRange(i,r),a=n.writer.remove(s.getTrimmed());for(const t of n.writer.createRangeIn(a).getItems())n.mapper.unbindViewElement(t,{defer:!0})},{priority:"low"}),this.downcastDispatcher.on("cleanSelection",(t,e,n)=>{const i=n.writer,o=i.document.selection;for(const t of o.getRanges())t.isCollapsed&&t.end.parent.isAttached()&&n.writer.mergeAttributes(t.start);i.setSelection(null)}),this.downcastDispatcher.on("selection",(t,e,n)=>{const i=e.selection;if(i.isCollapsed)return;if(!n.consumable.consume(i,"selection"))return;const o=[];for(const t of i.getRanges())o.push(n.mapper.toViewRange(t));n.writer.setSelection(o,{backward:i.isBackward})},{priority:"low"}),this.downcastDispatcher.on("selection",(t,e,n)=>{const i=e.selection;if(!i.isCollapsed)return;if(!n.consumable.consume(i,"selection"))return;const o=n.writer,r=i.getFirstPosition(),s=n.mapper.toViewPosition(r),a=o.breakAttributes(s);o.setSelection(a)},{priority:"low"}),this.view.document.roots.bindTo(this.model.document.roots).using(t=>{if("$graveyard"==t.rootName)return null;const e=new Ri(this.view.document,t.name);return e.rootName=t.rootName,this.mapper.bindElements(t,e),e})}destroy(){this.view.destroy(),this.stopListening()}reconvertMarker(t){const e="string"==typeof t?t:t.name,n=this.model.markers.get(e);if(!n)throw new Vt("editingcontroller-reconvertmarker-marker-not-exist",this,{markerName:e});this.model.change(()=>{this.model.markers._refresh(n)})}reconvertItem(t){this.model.change(()=>{this.model.document.differ._refreshItem(t)})}}class ms extends(ie()){_sourceDefinitions={};_attributeProperties=Object.create(null);_customChildChecks=new Map;_customAttributeChecks=new Map;_genericCheckSymbol=Symbol("$generic");_compiledDefinitions;constructor(){super(),this.decorate("checkChild"),this.decorate("checkAttribute"),this.on("checkAttribute",(t,e)=>{e[0]=new ps(e[0])},{priority:"highest"}),this.on("checkChild",(t,e)=>{e[0]=new ps(e[0]),e[1]=this.getDefinition(e[1])},{priority:"highest"})}register(t,e){if(this._sourceDefinitions[t])throw new Vt("schema-cannot-register-item-twice",this,{itemName:t});this._sourceDefinitions[t]=[Object.assign({},e)],this._clearCache()}extend(t,e){if(!this._sourceDefinitions[t])throw new Vt("schema-cannot-extend-missing-item",this,{itemName:t});this._sourceDefinitions[t].push(Object.assign({},e)),this._clearCache()}getDefinitions(){return this._compiledDefinitions||this._compile(),this._compiledDefinitions}getDefinition(t){let e;return e="string"==typeof t?t:"is"in t&&(t.is("$text")||t.is("$textProxy"))?"$text":t.name,this.getDefinitions()[e]}isRegistered(t){return!!this.getDefinition(t)}isBlock(t){const e=this.getDefinition(t);return!(!e||!e.isBlock)}isLimit(t){const e=this.getDefinition(t);return!(!e||!e.isLimit&&!e.isObject)}isObject(t){const e=this.getDefinition(t);return!!e&&!!(e.isObject||e.isLimit&&e.isSelectable&&e.isContent)}isInline(t){const e=this.getDefinition(t);return!(!e||!e.isInline)}isSelectable(t){const e=this.getDefinition(t);return!(!e||!e.isSelectable&&!e.isObject)}isContent(t){const e=this.getDefinition(t);return!(!e||!e.isContent&&!e.isObject)}checkChild(t,e){return!!e&&this._checkContextMatch(t,e)}checkAttribute(t,e){const n=this.getDefinition(t.last);if(!n)return!1;const i=this._evaluateAttributeChecks(t,e);return void 0!==i?i:n.allowAttributes.includes(e)}checkMerge(t,e){if(t instanceof ur){const e=t.nodeBefore,n=t.nodeAfter;if(!(e instanceof Hr))throw new Vt("schema-check-merge-no-element-before",this);if(!(n instanceof Hr))throw new Vt("schema-check-merge-no-element-after",this);return this.checkMerge(e,n)}if(this.isLimit(t)||this.isLimit(e))return!1;for(const n of e.getChildren())if(!this.checkChild(t,n))return!1;return!0}addChildCheck(t,e){const n=void 0!==e?e:this._genericCheckSymbol,i=this._customChildChecks.get(n)||[];i.push(t),this._customChildChecks.set(n,i)}addAttributeCheck(t,e){const n=void 0!==e?e:this._genericCheckSymbol,i=this._customAttributeChecks.get(n)||[];i.push(t),this._customAttributeChecks.set(n,i)}setAttributeProperties(t,e){this._attributeProperties[t]=Object.assign(this.getAttributeProperties(t),e)}getAttributeProperties(t){return this._attributeProperties[t]||Object.create(null)}getLimitElement(t){let e;for(e=t instanceof ur?t.parent:(t instanceof br?[t]:Array.from(t.getRanges())).reduce((t,e)=>{const n=e.getCommonAncestor();return t?t.getCommonAncestor(n,{includeSelf:!0}):n},null);!this.isLimit(e)&&e.parent;)e=e.parent;return e}checkAttributeInSelection(t,e){if(t.isCollapsed){const n=[...t.getFirstPosition().getAncestors(),new Or("",t.getAttributes())];return this.checkAttribute(n,e)}{const n=t.getRanges();for(const t of n)for(const n of t)if(this.checkAttribute(n.item,e))return!0}return!1}*getValidRanges(t,e){t=function*(t){for(const e of t)yield*e.getMinimalFlatRanges()}(t);for(const n of t)yield*this._getValidRangesForRange(n,e)}getNearestSelectionRange(t,e="both"){if("$graveyard"==t.root.rootName)return null;if(this.checkChild(t,"$text"))return new br(t);let n,i;const o=t.getAncestors().reverse().find(t=>this.isLimit(t))||t.root;"both"!=e&&"backward"!=e||(n=new cr({boundaries:br._createIn(o),startPosition:t,direction:"backward"})),"both"!=e&&"forward"!=e||(i=new cr({boundaries:br._createIn(o),startPosition:t}));for(const t of function*(t,e){let n=!1;for(;!n;){if(n=!0,t){const e=t.next();e.done||(n=!1,yield{walker:t,value:e.value})}if(e){const t=e.next();t.done||(n=!1,yield{walker:e,value:t.value})}}}(n,i)){const e=t.walker==n?"elementEnd":"elementStart",i=t.value;if(i.type==e&&this.isObject(i.item))return br._createOn(i.item);if(this.checkChild(i.nextPosition,"$text"))return new br(i.nextPosition)}return null}findAllowedParent(t,e){let n=t.parent;for(;n;){if(this.checkChild(n,e))return n;if(this.isLimit(n))return null;n=n.parent}return null}setAllowedAttributes(t,e,n){const i=n.model;for(const[o,r]of Object.entries(e))i.schema.checkAttribute(t,o)&&n.setAttribute(o,r,t)}removeDisallowedAttributes(t,e){for(const n of t)if(n.is("$text"))Ts(this,n,e);else{const t=br._createIn(n).getPositions();for(const n of t)Ts(this,n.nodeBefore||n.parent,e)}}getAttributesWithProperty(t,e,n){const i={};for(const[o,r]of t.getAttributes()){const t=this.getAttributeProperties(o);void 0!==t[e]&&(void 0!==n&&n!==t[e]||(i[o]=r))}return i}createContext(t){return new ps(t)}_clearCache(){this._compiledDefinitions=null}_compile(){const t={},e=this._sourceDefinitions,n=Object.keys(e);for(const i of n)t[i]=fs(e[i],i);const i=Object.values(t);for(const e of i)bs(t,e),ks(t,e),ws(t,e),_s(t,e);for(const t of i)vs(0,t);for(const e of i)ys(t,e);for(const e of i)Cs(t,e);for(const e of i)xs(t,e);for(const e of i)As(t,e);this._compiledDefinitions=function(t){const e={};for(const n of Object.values(t))e[n.name]={name:n.name,isBlock:!!n.isBlock,isContent:!!n.isContent,isInline:!!n.isInline,isLimit:!!n.isLimit,isObject:!!n.isObject,isSelectable:!!n.isSelectable,allowIn:Array.from(n.allowIn).filter(e=>!!t[e]),allowChildren:Array.from(n.allowChildren).filter(e=>!!t[e]),allowAttributes:Array.from(n.allowAttributes)};return e}(t)}_checkContextMatch(t,e){const n=t.last;let i=this._evaluateChildChecks(t,e);if(i=void 0!==i?i:e.allowIn.includes(n.name),!i)return!1;const o=this.getDefinition(n),r=t.trimLast();return!!o&&(0==r.length||this._checkContextMatch(r,o))}_evaluateChildChecks(t,e){const n=this._customChildChecks.get(this._genericCheckSymbol)||[],i=this._customChildChecks.get(e.name)||[];for(const o of[...n,...i]){const n=o(t,e);if(void 0!==n)return n}}_evaluateAttributeChecks(t,e){const n=this._customAttributeChecks.get(this._genericCheckSymbol)||[],i=this._customAttributeChecks.get(e)||[];for(const o of[...n,...i]){const n=o(t,e);if(void 0!==n)return n}}*_getValidRangesForRange(t,e){let n=t.start,i=t.start;for(const o of t.getItems({shallow:!0}))o.is("element")&&(yield*this._getValidRangesForRange(br._createIn(o),e)),this.checkAttribute(o,e)||(n.isEqual(i)||(yield new br(n,i)),n=ur._createAfter(o)),i=ur._createAfter(o);n.isEqual(i)||(yield new br(n,i))}findOptimalInsertionRange(t,e){const n=t.getSelectedElement();if(n&&this.isObject(n)&&!this.isInline(n))return"before"==e||"after"==e?new br(ur._createAt(n,e)):br._createOn(n);const i=wn(t.getSelectedBlocks());if(!i)return new br(t.focus);if(i.isEmpty)return new br(ur._createAt(i,0));const o=ur._createAfter(i);return t.focus.isTouching(o)?new br(o):new br(ur._createBefore(i))}}class ps{_items;constructor(t){if(t instanceof ps)return t;let e;e="string"==typeof t?[t]:Array.isArray(t)?t:t.getAncestors({includeSelf:!0}),this._items=e.map(Ss)}get length(){return this._items.length}get last(){return this._items[this._items.length-1]}[Symbol.iterator](){return this._items[Symbol.iterator]()}push(t){const e=new ps([t]);return e._items=[...this._items,...e._items],e}trimLast(){const t=new ps([]);return t._items=this._items.slice(0,-1),t}getItem(t){return this._items[t]}*getNames(){yield*this._items.map(t=>t.name)}endsWith(t){return Array.from(this.getNames()).join(" ").endsWith(t)}startsWith(t){return Array.from(this.getNames()).join(" ").startsWith(t)}}function fs(t,e){const n={name:e,allowIn:new Set,allowChildren:new Set,disallowIn:new Set,disallowChildren:new Set,allowContentOf:new Set,allowWhere:new Set,allowAttributes:new Set,disallowAttributes:new Set,allowAttributesOf:new Set,inheritTypesFrom:new Set};return function(t,e){for(const n of t){const t=Object.keys(n).filter(t=>t.startsWith("is"));for(const i of t)e[i]=!!n[i]}}(t,n),Es(t,n,"allowIn"),Es(t,n,"allowChildren"),Es(t,n,"disallowIn"),Es(t,n,"disallowChildren"),Es(t,n,"allowContentOf"),Es(t,n,"allowWhere"),Es(t,n,"allowAttributes"),Es(t,n,"disallowAttributes"),Es(t,n,"allowAttributesOf"),Es(t,n,"inheritTypesFrom"),function(t,e){for(const n of t){const t=n.inheritAllFrom;t&&(e.allowContentOf.add(t),e.allowWhere.add(t),e.allowAttributesOf.add(t),e.inheritTypesFrom.add(t))}}(t,n),n}function bs(t,e){for(const n of e.allowIn){const i=t[n];i?i.allowChildren.add(e.name):e.allowIn.delete(n)}}function ks(t,e){for(const n of e.allowChildren){const i=t[n];i?i.allowIn.add(e.name):e.allowChildren.delete(n)}}function ws(t,e){for(const n of e.disallowIn){const i=t[n];i?i.disallowChildren.add(e.name):e.disallowIn.delete(n)}}function _s(t,e){for(const n of e.disallowChildren){const i=t[n];i?i.disallowIn.add(e.name):e.disallowChildren.delete(n)}}function vs(t,e){for(const t of e.disallowChildren)e.allowChildren.delete(t);for(const t of e.disallowIn)e.allowIn.delete(t);for(const t of e.disallowAttributes)e.allowAttributes.delete(t)}function ys(t,e){for(const n of e.allowContentOf){const i=t[n];i&&(i.disallowChildren.forEach(n=>{e.allowChildren.has(n)||(e.disallowChildren.add(n),t[n].disallowIn.add(e.name))}),i.allowChildren.forEach(n=>{e.disallowChildren.has(n)||(e.allowChildren.add(n),t[n].allowIn.add(e.name))}))}}function Cs(t,e){for(const n of e.allowWhere){const i=t[n];i&&(i.disallowIn.forEach(n=>{e.allowIn.has(n)||(e.disallowIn.add(n),t[n].disallowChildren.add(e.name))}),i.allowIn.forEach(n=>{e.disallowIn.has(n)||(e.allowIn.add(n),t[n].allowChildren.add(e.name))}))}}function xs(t,e){for(const n of e.allowAttributesOf){const i=t[n];if(!i)return;i.allowAttributes.forEach(t=>{e.disallowAttributes.has(t)||e.allowAttributes.add(t)})}}function As(t,e){for(const n of e.inheritTypesFrom){const i=t[n];if(i){const t=Object.keys(i).filter(t=>t.startsWith("is"));for(const n of t)n in e||(e[n]=i[n])}}}function Es(t,e,n){for(const i of t){let t=i[n];"string"==typeof t&&(t=[t]),Array.isArray(t)&&t.forEach(t=>e[n].add(t))}}function Ss(t){return"string"==typeof t||t.is("documentFragment")?{name:"string"==typeof t?t:"$documentFragment",*getAttributeKeys(){},getAttribute(){}}:{name:t.is("element")?t.name:"$text",*getAttributeKeys(){yield*t.getAttributeKeys()},getAttribute:e=>t.getAttribute(e)}}function Ts(t,e,n){for(const i of e.getAttributeKeys())t.checkAttribute(e,i)||n.removeAttribute(i,e)}class Is extends(Ut()){conversionApi;_splitParts=new Map;_cursorParents=new Map;_modelCursor=null;_emptyElementsToKeep=new Set;constructor(t){super(),this.conversionApi={...t,consumable:null,writer:null,store:null,convertItem:(t,e)=>this._convertItem(t,e),convertChildren:(t,e)=>this._convertChildren(t,e),safeInsert:(t,e)=>this._safeInsert(t,e),updateConversionResult:(t,e)=>this._updateConversionResult(t,e),splitToAllowedParent:(t,e)=>this._splitToAllowedParent(t,e),getSplitParts:t=>this._getSplitParts(t),keepEmptyElement:t=>this._keepEmptyElement(t)}}convert(t,e,n=["$root"]){this.fire("viewCleanup",t),this._modelCursor=function(t,e){let n;for(const i of new ps(t)){const t={};for(const e of i.getAttributeKeys())t[e]=i.getAttribute(e);const o=e.createElement(i.name,t);n&&e.insert(o,n),n=ur._createAt(o,0)}return n}(n,e),this.conversionApi.writer=e,this.conversionApi.consumable=bi.createFrom(t),this.conversionApi.store={};const{modelRange:i}=this._convertItem(t,this._modelCursor),o=e.createDocumentFragment();if(i){this._removeEmptyElements();const t=this._modelCursor.parent,n=t._removeChildren(0,t.childCount);o._insertChild(0,n),o.markers=function(t,e){const n=new Set,i=new Map,o=br._createIn(t).getItems();for(const t of o)t.is("element","$marker")&&n.add(t);for(const t of n){const n=t.getAttribute("data-name"),o=e.createPositionBefore(t);i.has(n)?i.get(n).end=o.clone():i.set(n,new br(o.clone())),e.remove(t)}return i}(o,e)}return this._modelCursor=null,this._splitParts.clear(),this._cursorParents.clear(),this._emptyElementsToKeep.clear(),this.conversionApi.writer=null,this.conversionApi.store=null,o}_convertItem(t,e){const n={viewItem:t,modelCursor:e,modelRange:null};if(t.is("element")?this.fire(`element:${t.name}`,n,this.conversionApi):t.is("$text")?this.fire("text",n,this.conversionApi):this.fire("documentFragment",n,this.conversionApi),n.modelRange&&!(n.modelRange instanceof br))throw new Vt("view-conversion-dispatcher-incorrect-result",this);return{modelRange:n.modelRange,modelCursor:n.modelCursor}}_convertChildren(t,e){let n=e.is("position")?e:ur._createAt(e,0);const i=new br(n);for(const e of Array.from(t.getChildren())){const t=this._convertItem(e,n);t.modelRange instanceof br&&(i.end=t.modelRange.end,n=t.modelCursor)}return{modelRange:i,modelCursor:n}}_safeInsert(t,e){const n=this._splitToAllowedParent(t,e);return!!n&&(this.conversionApi.writer.insert(t,n.position),!0)}_updateConversionResult(t,e){const n=this._getSplitParts(t),i=this.conversionApi.writer;e.modelRange||(e.modelRange=i.createRange(i.createPositionBefore(t),i.createPositionAfter(n[n.length-1])));const o=this._cursorParents.get(t);e.modelCursor=o?i.createPositionAt(o,0):e.modelRange.end}_splitToAllowedParent(t,e){const{schema:n,writer:i}=this.conversionApi;let o=n.findAllowedParent(e,t);if(o){if(o===e.parent)return{position:e};this._modelCursor.parent.getAncestors().includes(o)&&(o=null)}if(!o)return os(e,t,n)?{position:rs(e,i)}:null;const r=this.conversionApi.writer.split(e,o),s=[];for(const t of r.range.getWalker())if("elementEnd"==t.type)s.push(t.item);else{const e=s.pop(),n=t.item;this._registerSplitPair(e,n)}const a=r.range.end.parent;return this._cursorParents.set(t,a),{position:r.position,cursorParent:a}}_registerSplitPair(t,e){this._splitParts.has(t)||this._splitParts.set(t,[t]);const n=this._splitParts.get(t);this._splitParts.set(e,n),n.push(e)}_getSplitParts(t){let e;return e=this._splitParts.has(t)?this._splitParts.get(t):[t],e}_keepEmptyElement(t){this._emptyElementsToKeep.add(t)}_removeEmptyElements(){const t=new Map;for(const e of this._splitParts.keys())if(e.isEmpty&&!this._emptyElementsToKeep.has(e)){const n=t.get(e.parent)||[];n.push(e),this._splitParts.delete(e),t.set(e.parent,n)}for(const[e,n]of t)e._removeChildrenArray(n);t.size&&this._removeEmptyElements()}}class Ps{getHtml(t){const e=gt.document.implementation.createHTMLDocument("").createElement("div");return e.appendChild(t),e.innerHTML}}class Ms{domParser;domConverter;htmlWriter;skipComments=!0;constructor(t){this.domParser=new DOMParser,this.domConverter=new Ro(t,{renderingMode:"data"}),this.htmlWriter=new Ps}toData(t){const e=this.domConverter.viewToDom(t);return this.htmlWriter.getHtml(e)}toView(t){const e=this._toDom(t);return this.domConverter.domToView(e,{skipComments:this.skipComments})}registerRawContentMatcher(t){this.domConverter.registerRawContentMatcher(t)}useFillerType(t){this.domConverter.blockFillerMode="marked"==t?"markedNbsp":"nbsp"}_toDom(t){/<(?:html|body|head|meta)(?:\s[^>]*)?>/i.test(t.trim().slice(0,1e4))||(t=`<body>${t}</body>`);const e=this.domParser.parseFromString(t,"text/html"),n=e.createDocumentFragment(),i=e.body.childNodes;for(;i.length>0;)n.appendChild(i[0]);return n}}class Ns extends(Ut()){model;mapper;downcastDispatcher;upcastDispatcher;viewDocument;stylesProcessor;htmlProcessor;processor;_viewWriter;constructor(t,e){super(),this.model=t,this.mapper=new kr,this.downcastDispatcher=new yr({mapper:this.mapper,schema:t.schema}),this.downcastDispatcher.on("insert:$text",(t,e,n)=>{if(!n.consumable.consume(e.item,t.name))return;const i=n.writer,o=n.mapper.toViewPosition(e.range.start),r=i.createText(e.item.data);i.insert(o,r)},{priority:"lowest"}),this.downcastDispatcher.on("insert",(t,e,n)=>{n.convertAttributes(e.item),e.reconversion||!e.item.is("element")||e.item.isEmpty||n.convertChildren(e.item)},{priority:"lowest"}),this.upcastDispatcher=new Is({schema:t.schema}),this.viewDocument=new Ji(e),this.stylesProcessor=e,this.htmlProcessor=new Ms(this.viewDocument),this.processor=this.htmlProcessor,this._viewWriter=new lo(this.viewDocument),this.upcastDispatcher.on("text",(t,e,{schema:n,consumable:i,writer:o})=>{let r=e.modelCursor;if(!i.test(e.viewItem))return;if(!n.checkChild(r,"$text")){if(!os(r,"$text",n))return;if(0==e.viewItem.data.trim().length)return;r=rs(r,o)}i.consume(e.viewItem);const s=o.createText(e.viewItem.data);o.insert(s,r),e.modelRange=o.createRange(r,r.getShiftedBy(s.offsetSize)),e.modelCursor=e.modelRange.end},{priority:"lowest"}),this.upcastDispatcher.on("element",(t,e,n)=>{if(!e.modelRange&&n.consumable.consume(e.viewItem,{name:!0})){const{modelRange:t,modelCursor:i}=n.convertChildren(e.viewItem,e.modelCursor);e.modelRange=t,e.modelCursor=i}},{priority:"lowest"}),this.upcastDispatcher.on("documentFragment",(t,e,n)=>{if(!e.modelRange&&n.consumable.consume(e.viewItem,{name:!0})){const{modelRange:t,modelCursor:i}=n.convertChildren(e.viewItem,e.modelCursor);e.modelRange=t,e.modelCursor=i}},{priority:"lowest"}),ie().prototype.decorate.call(this,"init"),ie().prototype.decorate.call(this,"set"),ie().prototype.decorate.call(this,"get"),ie().prototype.decorate.call(this,"toView"),ie().prototype.decorate.call(this,"toModel"),this.on("init",()=>{this.fire("ready")},{priority:"lowest"}),this.on("ready",()=>{this.model.enqueueChange({isUndoable:!1},is)},{priority:"lowest"})}get(t={}){const{rootName:e="main",trim:n="empty"}=t;if(!this._checkIfRootsExists([e]))throw new Vt("datacontroller-get-non-existent-root",this);const i=this.model.document.getRoot(e);return i.isAttached()||zt("datacontroller-get-detached-root",this),"empty"!==n||this.model.hasContent(i,{ignoreWhitespaces:!0})?this.stringify(i,t):""}stringify(t,e={}){const n=this.toView(t,e);return this.processor.toData(n)}toView(t,e={}){const n=this.viewDocument,i=this._viewWriter;this.mapper.clearBindings();const o=br._createIn(t),r=new ao(n);this.mapper.bindElements(t,r);const s=t.is("documentFragment")?t.markers:function(t){const e=[],n=t.root.document;if(!n)return new Map;const i=br._createIn(t);for(const t of n.model.markers){const n=t.getRange(),o=n.isCollapsed,r=n.start.isEqual(i.start)||n.end.isEqual(i.end);if(o&&r)e.push([t.name,n]);else{const o=i.getIntersection(n);o&&e.push([t.name,o])}}return e.sort(([t,e],[n,i])=>{if("after"!==e.end.compareWith(i.start))return 1;if("before"!==e.start.compareWith(i.end))return-1;switch(e.start.compareWith(i.start)){case"before":return 1;case"after":return-1;default:switch(e.end.compareWith(i.end)){case"before":return 1;case"after":return-1;default:return n.localeCompare(t)}}}),new Map(e)}(t);return this.downcastDispatcher.convert(o,s,i,e),r}init(t){if(this.model.document.version)throw new Vt("datacontroller-init-document-not-empty",this);let e={};if("string"==typeof t?e.main=t:e=t,!this._checkIfRootsExists(Object.keys(e)))throw new Vt("datacontroller-init-non-existent-root",this);return this.model.enqueueChange({isUndoable:!1},t=>{for(const n of Object.keys(e)){const i=this.model.document.getRoot(n);t.insert(this.parse(e[n],i),i,0)}}),Promise.resolve()}set(t,e={}){let n={};if("string"==typeof t?n.main=t:n=t,!this._checkIfRootsExists(Object.keys(n)))throw new Vt("datacontroller-set-non-existent-root",this);this.model.enqueueChange(e.batchType||{},t=>{t.setSelection(null),t.removeSelectionAttribute(this.model.document.selection.getAttributeKeys());for(const e of Object.keys(n)){const i=this.model.document.getRoot(e);t.remove(t.createRangeIn(i)),t.insert(this.parse(n[e],i),i,0)}})}parse(t,e="$root"){const n=this.processor.toView(t);return this.toModel(n,e)}toModel(t,e="$root"){return this.model.change(n=>this.upcastDispatcher.convert(t,n,e))}addStyleProcessorRules(t){t(this.stylesProcessor)}registerRawContentMatcher(t){this.processor&&this.processor!==this.htmlProcessor&&this.processor.registerRawContentMatcher(t),this.htmlProcessor.registerRawContentMatcher(t)}destroy(){this.stopListening()}_checkIfRootsExists(t){for(const e of t)if(!this.model.document.getRoot(e))return!1;return!0}}class Ls{_helpers=new Map;_downcast;_upcast;constructor(t,e){this._downcast=fn(t),this._createConversionHelpers({name:"downcast",dispatchers:this._downcast,isDowncast:!0}),this._upcast=fn(e),this._createConversionHelpers({name:"upcast",dispatchers:this._upcast,isDowncast:!1})}addAlias(t,e){const n=this._downcast.includes(e);if(!this._upcast.includes(e)&&!n)throw new Vt("conversion-add-alias-dispatcher-not-registered",this);this._createConversionHelpers({name:t,dispatchers:[e],isDowncast:n})}for(t){if(!this._helpers.has(t))throw new Vt("conversion-for-unknown-group",this);return this._helpers.get(t)}elementToElement(t){this.for("downcast").elementToElement(t);for(const{model:e,view:n}of Vs(t))this.for("upcast").elementToElement({model:e,view:n,converterPriority:t.converterPriority})}attributeToElement(t){this.for("downcast").attributeToElement(t);for(const{model:e,view:n}of Vs(t))this.for("upcast").elementToAttribute({view:n,model:e,converterPriority:t.converterPriority})}attributeToAttribute(t){this.for("downcast").attributeToAttribute(t);for(const{model:e,view:n}of Vs(t))this.for("upcast").attributeToAttribute({view:n,model:e})}_createConversionHelpers({name:t,dispatchers:e,isDowncast:n}){if(this._helpers.has(t))throw new Vt("conversion-group-exists",this);const i=n?new $r(e):new ss(e);this._helpers.set(t,i)}}function*Vs(t){if(t.model.values)for(const e of t.model.values){const n={key:t.model.key,value:e},i=t.view[e],o=t.upcastAlso?t.upcastAlso[e]:void 0;yield*zs(n,i,o)}else yield*zs(t.model,t.view,t.upcastAlso)}function*zs(t,e,n){if(yield{model:t,view:e},n)for(const e of fn(n))yield{model:t,view:e}}class Os{baseVersion;isDocumentOperation;batch;constructor(t){this.baseVersion=t,this.isDocumentOperation=null!==this.baseVersion,this.batch=null}_validate(){}toJSON(){const t=Object.assign({},this);return t.__className=this.constructor.className,delete t.batch,delete t.isDocumentOperation,t}static get className(){return"Operation"}static fromJSON(t,e){return new this(t.baseVersion)}}function Rs(t,e){const n=Fs(e),i=n.reduce((t,e)=>t+e.offsetSize,0),o=t.parent;Hs(t);const r=t.index;return o._insertChild(r,n),js(o,r+n.length),js(o,r),new br(t,t.getShiftedBy(i))}function Ds(t){if(!t.isFlat)throw new Vt("operation-utils-remove-range-not-flat",this);const e=t.start.parent;Hs(t.start),Hs(t.end);const n=e._removeChildren(t.start.index,t.end.index-t.start.index);return js(e,t.start.index),n}function Bs(t,e){if(!t.isFlat)throw new Vt("operation-utils-move-range-not-flat",this);const n=Ds(t);return Rs(e=e._getTransformedByDeletion(t.start,t.end.offset-t.start.offset),n)}function Fs(t){const e=[];!function t(n){if("string"==typeof n)e.push(new Or(n));else if(n instanceof lr)e.push(new Or(n.data,n.getAttributes()));else if(n instanceof Ar)e.push(n);else if(he(n))for(const e of n)t(e)}(t);for(let t=1;t<e.length;t++){const n=e[t],i=e[t-1];n instanceof Or&&i instanceof Or&&Us(n,i)&&(e.splice(t-1,2,new Or(i.data+n.data,i.getAttributes())),t--)}return e}function js(t,e){const n=t.getChild(e-1),i=t.getChild(e);if(n&&i&&n.is("$text")&&i.is("$text")&&Us(n,i)){const o=new Or(n.data+i.data,n.getAttributes());t._removeChildren(e-1,2),t._insertChild(e-1,o)}}function Hs(t){const e=t.textNode,n=t.parent;if(e){const i=t.offset-e.startOffset,o=e.index;n._removeChildren(o,1);const r=new Or(e.data.substr(0,i),e.getAttributes()),s=new Or(e.data.substr(i),e.getAttributes());n._insertChild(o,[r,s])}}function Us(t,e){const n=t.getAttributes(),i=e.getAttributes();for(const t of n){if(t[1]!==e.getAttribute(t[0]))return!1;i.next()}return i.next().done}class $s extends Os{sourcePosition;howMany;targetPosition;constructor(t,e,n,i){super(i),this.sourcePosition=t.clone(),this.sourcePosition.stickiness="toNext",this.howMany=e,this.targetPosition=n.clone(),this.targetPosition.stickiness="toNone"}get type(){return this.targetPosition.root.rootName==this.sourcePosition.root.rootName?"move":"$graveyard"==this.targetPosition.root.rootName?"remove":"$graveyard"==this.sourcePosition.root.rootName?"reinsert":"move"}get affectedSelectable(){return[br._createFromPositionAndShift(this.sourcePosition,this.howMany),br._createFromPositionAndShift(this.targetPosition,0)]}clone(){return new $s(this.sourcePosition,this.howMany,this.targetPosition,this.baseVersion)}getMovedRangeStart(){return this.targetPosition._getTransformedByDeletion(this.sourcePosition,this.howMany)}getReversed(){const t=this.sourcePosition._getTransformedByInsertion(this.targetPosition,this.howMany);return new $s(this.getMovedRangeStart(),this.howMany,t,this.baseVersion+1)}_validate(){const t=this.sourcePosition.parent,e=this.targetPosition.parent,n=this.sourcePosition.offset,i=this.targetPosition.offset;if(n+this.howMany>t.maxOffset)throw new Vt("move-operation-nodes-do-not-exist",this);if(t===e&&n<i&&i<n+this.howMany)throw new Vt("move-operation-range-into-itself",this);if(this.sourcePosition.root==this.targetPosition.root&&"prefix"==ue(this.sourcePosition.getParentPath(),this.targetPosition.getParentPath())){const t=this.sourcePosition.path.length-1;if(this.targetPosition.path[t]>=n&&this.targetPosition.path[t]<n+this.howMany)throw new Vt("move-operation-node-into-itself",this)}}_execute(){Bs(br._createFromPositionAndShift(this.sourcePosition,this.howMany),this.targetPosition)}toJSON(){const t=super.toJSON();return t.sourcePosition=this.sourcePosition.toJSON(),t.targetPosition=this.targetPosition.toJSON(),t}static get className(){return"MoveOperation"}static fromJSON(t,e){const n=ur.fromJSON(t.sourcePosition,e),i=ur.fromJSON(t.targetPosition,e);return new this(n,t.howMany,i,t.baseVersion)}}class Ws extends Os{position;nodes;shouldReceiveAttributes;constructor(t,e,n){super(n),this.position=t.clone(),this.position.stickiness="toNone",this.nodes=new jr(Fs(e)),this.shouldReceiveAttributes=!1}get type(){return"insert"}get howMany(){return this.nodes.maxOffset}get affectedSelectable(){return this.position.clone()}clone(){const t=new jr([...this.nodes].map(t=>t._clone(!0))),e=new Ws(this.position,t,this.baseVersion);return e.shouldReceiveAttributes=this.shouldReceiveAttributes,e}getReversed(){const t=this.position.root.document.graveyard,e=new ur(t,[0]);return new $s(this.position,this.nodes.maxOffset,e,this.baseVersion+1)}_validate(){const t=this.position.parent;if(!t||t.maxOffset<this.position.offset)throw new Vt("insert-operation-position-invalid",this)}_execute(){const t=this.nodes;this.nodes=new jr([...t].map(t=>t._clone(!0))),Rs(this.position,t)}toJSON(){const t=super.toJSON();return t.position=this.position.toJSON(),t.nodes=this.nodes.toJSON(),t}static get className(){return"InsertOperation"}static fromJSON(t,e){const n=[];for(const e of t.nodes)e.name?n.push(Hr.fromJSON(e)):n.push(Or.fromJSON(e));const i=new Ws(ur.fromJSON(t.position,e),n,t.baseVersion);return i.shouldReceiveAttributes=t.shouldReceiveAttributes,i}}class qs extends Os{splitPosition;howMany;insertionPosition;graveyardPosition;constructor(t,e,n,i,o){super(o),this.splitPosition=t.clone(),this.splitPosition.stickiness="toNext",this.howMany=e,this.insertionPosition=n,this.graveyardPosition=i?i.clone():null,this.graveyardPosition&&(this.graveyardPosition.stickiness="toNext")}get type(){return"split"}get moveTargetPosition(){const t=this.insertionPosition.path.slice();return t.push(0),new ur(this.insertionPosition.root,t)}get movedRange(){const t=this.splitPosition.getShiftedBy(Number.POSITIVE_INFINITY);return new br(this.splitPosition,t)}get affectedSelectable(){const t=[br._createFromPositionAndShift(this.splitPosition,0),br._createFromPositionAndShift(this.insertionPosition,0)];return this.graveyardPosition&&t.push(br._createFromPositionAndShift(this.graveyardPosition,0)),t}clone(){return new qs(this.splitPosition,this.howMany,this.insertionPosition,this.graveyardPosition,this.baseVersion)}getReversed(){const t=this.splitPosition.root.document.graveyard,e=new ur(t,[0]);return new Ks(this.moveTargetPosition,this.howMany,this.splitPosition,e,this.baseVersion+1)}_validate(){const t=this.splitPosition.parent,e=this.splitPosition.offset;if(!t||t.maxOffset<e)throw new Vt("split-operation-position-invalid",this);if(!t.parent)throw new Vt("split-operation-split-in-root",this);if(this.howMany!=t.maxOffset-this.splitPosition.offset)throw new Vt("split-operation-how-many-invalid",this);if(this.graveyardPosition&&!this.graveyardPosition.nodeAfter)throw new Vt("split-operation-graveyard-position-invalid",this)}_execute(){const t=this.splitPosition.parent;if(this.graveyardPosition)Bs(br._createFromPositionAndShift(this.graveyardPosition,1),this.insertionPosition);else{const e=t._clone();Rs(this.insertionPosition,e)}Bs(new br(ur._createAt(t,this.splitPosition.offset),ur._createAt(t,t.maxOffset)),this.moveTargetPosition)}toJSON(){const t=super.toJSON();return t.splitPosition=this.splitPosition.toJSON(),t.insertionPosition=this.insertionPosition.toJSON(),this.graveyardPosition&&(t.graveyardPosition=this.graveyardPosition.toJSON()),t}static get className(){return"SplitOperation"}static getInsertionPosition(t){const e=t.path.slice(0,-1);return e[e.length-1]++,new ur(t.root,e,"toPrevious")}static fromJSON(t,e){const n=ur.fromJSON(t.splitPosition,e),i=ur.fromJSON(t.insertionPosition,e),o=t.graveyardPosition?ur.fromJSON(t.graveyardPosition,e):null;return new this(n,t.howMany,i,o,t.baseVersion)}}class Ks extends Os{sourcePosition;howMany;targetPosition;graveyardPosition;constructor(t,e,n,i,o){super(o),this.sourcePosition=t.clone(),this.sourcePosition.stickiness="toPrevious",this.howMany=e,this.targetPosition=n.clone(),this.targetPosition.stickiness="toNext",this.graveyardPosition=i.clone()}get type(){return"merge"}get deletionPosition(){return new ur(this.sourcePosition.root,this.sourcePosition.path.slice(0,-1))}get movedRange(){const t=this.sourcePosition.getShiftedBy(Number.POSITIVE_INFINITY);return new br(this.sourcePosition,t)}get affectedSelectable(){const t=this.sourcePosition.parent;return[br._createOn(t),br._createFromPositionAndShift(this.targetPosition,0),br._createFromPositionAndShift(this.graveyardPosition,0)]}clone(){return new Ks(this.sourcePosition,this.howMany,this.targetPosition,this.graveyardPosition,this.baseVersion)}getReversed(){const t=this.targetPosition._getTransformedByMergeOperation(this),e=this.sourcePosition.path.slice(0,-1),n=new ur(this.sourcePosition.root,e)._getTransformedByMergeOperation(this);return new qs(t,this.howMany,n,this.graveyardPosition,this.baseVersion+1)}_validate(){const t=this.sourcePosition.parent,e=this.targetPosition.parent;if(!t.parent)throw new Vt("merge-operation-source-position-invalid",this);if(!e.parent)throw new Vt("merge-operation-target-position-invalid",this);if(this.howMany!=t.maxOffset)throw new Vt("merge-operation-how-many-invalid",this)}_execute(){const t=this.sourcePosition.parent;Bs(br._createIn(t),this.targetPosition),Bs(br._createOn(t),this.graveyardPosition)}toJSON(){const t=super.toJSON();return t.sourcePosition=t.sourcePosition.toJSON(),t.targetPosition=t.targetPosition.toJSON(),t.graveyardPosition=t.graveyardPosition.toJSON(),t}static get className(){return"MergeOperation"}static fromJSON(t,e){const n=ur.fromJSON(t.sourcePosition,e),i=ur.fromJSON(t.targetPosition,e),o=ur.fromJSON(t.graveyardPosition,e);return new this(n,t.howMany,i,o,t.baseVersion)}}class Gs extends Os{name;oldRange;newRange;affectsData;_markers;constructor(t,e,n,i,o,r){super(r),this.name=t,this.oldRange=e?e.clone():null,this.newRange=n?n.clone():null,this.affectsData=o,this._markers=i}get type(){return"marker"}get affectedSelectable(){const t=[];return this.oldRange&&t.push(this.oldRange.clone()),this.newRange&&(this.oldRange?t.push(...this.newRange.getDifference(this.oldRange)):t.push(this.newRange.clone())),t}clone(){return new Gs(this.name,this.oldRange,this.newRange,this._markers,this.affectsData,this.baseVersion)}getReversed(){return new Gs(this.name,this.newRange,this.oldRange,this._markers,this.affectsData,this.baseVersion+1)}_execute(){this.newRange?this._markers._set(this.name,this.newRange,!0,this.affectsData):this._markers._remove(this.name)}toJSON(){const t=super.toJSON();return this.oldRange&&(t.oldRange=this.oldRange.toJSON()),this.newRange&&(t.newRange=this.newRange.toJSON()),delete t._markers,t}static get className(){return"MarkerOperation"}static fromJSON(t,e){return new Gs(t.name,t.oldRange?br.fromJSON(t.oldRange,e):null,t.newRange?br.fromJSON(t.newRange,e):null,e.model.markers,t.affectsData,t.baseVersion)}}class Qs extends Os{range;key;oldValue;newValue;constructor(t,e,n,i,o){super(o),this.range=t.clone(),this.key=e,this.oldValue=void 0===n?null:n,this.newValue=void 0===i?null:i}get type(){return null===this.oldValue?"addAttribute":null===this.newValue?"removeAttribute":"changeAttribute"}get affectedSelectable(){return this.range.clone()}clone(){return new Qs(this.range,this.key,this.oldValue,this.newValue,this.baseVersion)}getReversed(){return new Qs(this.range,this.key,this.newValue,this.oldValue,this.baseVersion+1)}toJSON(){const t=super.toJSON();return t.range=this.range.toJSON(),t}_validate(){if(!this.range.isFlat)throw new Vt("attribute-operation-range-not-flat",this);for(const t of this.range.getItems({shallow:!0})){if(null!==this.oldValue&&!si(t.getAttribute(this.key),this.oldValue))throw new Vt("attribute-operation-wrong-old-value",this,{item:t,key:this.key,value:this.oldValue});if(null===this.oldValue&&null!==this.newValue&&t.hasAttribute(this.key))throw new Vt("attribute-operation-attribute-exists",this,{node:t,key:this.key})}}_execute(){si(this.oldValue,this.newValue)||function(t,e,n){Hs(t.start),Hs(t.end);for(const i of t.getItems({shallow:!0})){const t=i.is("$textProxy")?i.textNode:i;null!==n?t._setAttribute(e,n):t._removeAttribute(e),js(t.parent,t.index)}js(t.end.parent,t.end.index)}(this.range,this.key,this.newValue)}static get className(){return"AttributeOperation"}static fromJSON(t,e){return new Qs(br.fromJSON(t.range,e),t.key,t.oldValue,t.newValue,t.baseVersion)}}class Ys extends Os{get type(){return"noop"}get affectedSelectable(){return null}clone(){return new Ys(this.baseVersion)}getReversed(){return new Ys(this.baseVersion+1)}_execute(){}static get className(){return"NoOperation"}}class Js extends Os{position;oldName;newName;constructor(t,e,n,i){super(i),this.position=t,this.position.stickiness="toNext",this.oldName=e,this.newName=n}get type(){return"rename"}get affectedSelectable(){return this.position.nodeAfter}clone(){return new Js(this.position.clone(),this.oldName,this.newName,this.baseVersion)}getReversed(){return new Js(this.position.clone(),this.newName,this.oldName,this.baseVersion+1)}_validate(){const t=this.position.nodeAfter;if(!(t instanceof Hr))throw new Vt("rename-operation-wrong-position",this);if(t.name!==this.oldName)throw new Vt("rename-operation-wrong-name",this)}_execute(){this.position.nodeAfter.name=this.newName}toJSON(){const t=super.toJSON();return t.position=this.position.toJSON(),t}static get className(){return"RenameOperation"}static fromJSON(t,e){return new Js(ur.fromJSON(t.position,e),t.oldName,t.newName,t.baseVersion)}}class Zs extends Os{root;key;oldValue;newValue;constructor(t,e,n,i,o){super(o),this.root=t,this.key=e,this.oldValue=void 0===n?null:n,this.newValue=void 0===i?null:i}get type(){return null===this.oldValue?"addRootAttribute":null===this.newValue?"removeRootAttribute":"changeRootAttribute"}get affectedSelectable(){return this.root}clone(){return new Zs(this.root,this.key,this.oldValue,this.newValue,this.baseVersion)}getReversed(){return new Zs(this.root,this.key,this.newValue,this.oldValue,this.baseVersion+1)}_validate(){if(this.root!=this.root.root||this.root.is("documentFragment"))throw new Vt("rootattribute-operation-not-a-root",this,{root:this.root,key:this.key});if(null!==this.oldValue&&this.root.getAttribute(this.key)!==this.oldValue)throw new Vt("rootattribute-operation-wrong-old-value",this,{root:this.root,key:this.key});if(null===this.oldValue&&null!==this.newValue&&this.root.hasAttribute(this.key))throw new Vt("rootattribute-operation-attribute-exists",this,{root:this.root,key:this.key})}_execute(){null!==this.newValue?this.root._setAttribute(this.key,this.newValue):this.root._removeAttribute(this.key)}toJSON(){const t=super.toJSON();return t.root=this.root.toJSON(),t}static get className(){return"RootAttributeOperation"}static fromJSON(t,e){if(!e.getRoot(t.root))throw new Vt("rootattribute-operation-fromjson-no-root",this,{rootName:t.root});return new Zs(e.getRoot(t.root),t.key,t.oldValue,t.newValue,t.baseVersion)}}class Xs extends Os{rootName;elementName;isAdd;_document;constructor(t,e,n,i,o){super(o),this.rootName=t,this.elementName=e,this.isAdd=n,this._document=i,this._document.getRoot(this.rootName)||(this._document.createRoot(this.elementName,this.rootName)._isAttached=!1)}get type(){return this.isAdd?"addRoot":"detachRoot"}get affectedSelectable(){return this._document.getRoot(this.rootName)}clone(){return new Xs(this.rootName,this.elementName,this.isAdd,this._document,this.baseVersion)}getReversed(){return new Xs(this.rootName,this.elementName,!this.isAdd,this._document,this.baseVersion+1)}_execute(){this._document.getRoot(this.rootName)._isAttached=this.isAdd}toJSON(){const t=super.toJSON();return delete t._document,t}static get className(){return"RootOperation"}static fromJSON(t,e){return new Xs(t.rootName,t.elementName,t.isAdd,e,t.baseVersion)}}const ta={};ta[Qs.className]=Qs,ta[Ws.className]=Ws,ta[Gs.className]=Gs,ta[$s.className]=$s,ta[Ys.className]=Ys,ta[Os.className]=Os,ta[Js.className]=Js,ta[Zs.className]=Zs,ta[Xs.className]=Xs,ta[qs.className]=qs,ta[Ks.className]=Ks;class ea{static fromJSON(t,e){return ta[t.__className].fromJSON(t,e)}}const na=new Map;function ia(t,e,n){let i=na.get(t);i||(i=new Map,na.set(t,i)),i.set(e,n)}function oa(t){return[t]}function ra(t,e,n={}){const i=function(t,e){const n=na.get(t);return n&&n.has(e)?n.get(e):oa}(t.constructor,e.constructor);try{return i(t=t.clone(),e,n)}catch(t){throw t}}function sa(t,e,n){t=t.slice(),e=e.slice();const i=new aa(n.document,n.useRelations,n.forceWeakRemove);i.setOriginalOperations(t),i.setOriginalOperations(e);const o=i.originalOperations;if(0==t.length||0==e.length)return{operationsA:t,operationsB:e,originalOperations:o};const r=new WeakMap;for(const e of t)r.set(e,0);const s={nextBaseVersionA:t[t.length-1].baseVersion+1,nextBaseVersionB:e[e.length-1].baseVersion+1,originalOperationsACount:t.length,originalOperationsBCount:e.length};let a=0;for(;a<t.length;){const n=t[a],o=r.get(n);if(o==e.length){a++;continue}const s=e[o],l=ra(n,s,i.getContext(n,s,!0)),c=ra(s,n,i.getContext(s,n,!1));i.updateRelation(n,s),i.setOriginalOperations(l,n),i.setOriginalOperations(c,s);for(const t of l)r.set(t,o+c.length);t.splice(a,1,...l),e.splice(o,1,...c)}if(da(t),da(e),n.padWithNoOps){const n=t.length-s.originalOperationsACount,i=e.length-s.originalOperationsBCount;ca(t,i-n),ca(e,n-i)}return la(t,s.nextBaseVersionB),la(e,s.nextBaseVersionA),{operationsA:t,operationsB:e,originalOperations:o}}class aa{originalOperations;_history;_useRelations;_forceWeakRemove;_relations;constructor(t,e,n=!1){this.originalOperations=new Map,this._history=t.history,this._useRelations=e,this._forceWeakRemove=!!n,this._relations=new Map}setOriginalOperations(t,e=null){const n=e?this.originalOperations.get(e):null;for(const e of t)this.originalOperations.set(e,n||e)}updateRelation(t,e){if(t instanceof $s)e instanceof Ks?t.targetPosition.isEqual(e.sourcePosition)||e.movedRange.containsPosition(t.targetPosition)?this._setRelation(t,e,"insertAtSource"):t.targetPosition.isEqual(e.deletionPosition)?this._setRelation(t,e,"insertBetween"):t.targetPosition.isAfter(e.sourcePosition)?this._setRelation(t,e,"moveTargetAfter"):t.howMany>1&&t.sourcePosition.isEqual(e.deletionPosition)?this._setRelation(t,e,"firstToMoveMerged"):t.howMany>1&&t.sourcePosition.getShiftedBy(t.howMany-1).isEqual(e.deletionPosition)&&this._setRelation(t,e,"lastToMoveMerged"):e instanceof $s&&(t.targetPosition.isEqual(e.sourcePosition)||t.targetPosition.isBefore(e.sourcePosition)?this._setRelation(t,e,"insertBefore"):this._setRelation(t,e,"insertAfter"));else if(t instanceof qs){if(e instanceof Ks)t.splitPosition.isBefore(e.sourcePosition)&&this._setRelation(t,e,"splitBefore");else if(e instanceof $s)if(t.splitPosition.isEqual(e.sourcePosition)||t.splitPosition.isBefore(e.sourcePosition))this._setRelation(t,e,"splitBefore");else{const n=br._createFromPositionAndShift(e.sourcePosition,e.howMany);if(t.splitPosition.hasSameParentAs(e.sourcePosition)&&n.containsPosition(t.splitPosition)){const i=n.end.offset-t.splitPosition.offset,o=t.splitPosition.offset-n.start.offset;this._setRelation(t,e,{howMany:i,offset:o})}}}else if(t instanceof Ks)e instanceof Ks?(t.targetPosition.isEqual(e.sourcePosition)||this._setRelation(t,e,"mergeTargetNotMoved"),t.sourcePosition.isEqual(e.targetPosition)&&this._setRelation(t,e,"mergeSourceNotMoved"),t.sourcePosition.isEqual(e.sourcePosition)&&this._setRelation(t,e,"mergeSameElement")):e instanceof qs?t.sourcePosition.isEqual(e.splitPosition)&&this._setRelation(t,e,"splitAtSource"):e instanceof $s&&e.howMany>0&&(t.sourcePosition.isEqual(e.sourcePosition.getShiftedBy(e.howMany))&&this._setRelation(t,e,"mergeSourceAffected"),t.targetPosition.isEqual(e.sourcePosition)&&this._setRelation(t,e,"mergeTargetWasBefore"));else if(t instanceof Gs){const n=t.newRange;if(!n)return;if(e instanceof Ks){const i=n.start.isEqual(e.targetPosition),o=n.start.isEqual(e.deletionPosition),r=n.end.isEqual(e.deletionPosition),s=n.end.isEqual(e.sourcePosition);(i||o||r||s)&&this._setRelation(t,e,{wasInLeftElement:i,wasStartBeforeMergedElement:o,wasEndBeforeMergedElement:r,wasInRightElement:s})}}}getContext(t,e,n){return{aIsStrong:n,aWasUndone:this._wasUndone(t),bWasUndone:this._wasUndone(e),abRelation:this._useRelations?this._getRelation(t,e):null,baRelation:this._useRelations?this._getRelation(e,t):null,forceWeakRemove:this._forceWeakRemove}}_wasUndone(t){const e=this.originalOperations.get(t);return e.wasUndone||this._history.isUndoneOperation(e)}_getRelation(t,e){const n=this.originalOperations.get(e),i=this._history.getUndoneOperation(n);if(!i)return null;const o=this.originalOperations.get(t),r=this._relations.get(o);return r&&r.get(i)||null}_setRelation(t,e,n){const i=this.originalOperations.get(t),o=this.originalOperations.get(e);let r=this._relations.get(i);r||(r=new Map,this._relations.set(i,r)),r.set(o,n)}}function la(t,e){for(const n of t)n.baseVersion=e++}function ca(t,e){for(let n=0;n<e;n++)t.push(new Ys(0))}function da(t){const e=new Map;for(let n=0;n<t.length;n++){const i=t[n];i instanceof Gs&&(-1!==i.baseVersion?e.set(i.name,{op:i,ranges:i.newRange?[i.newRange]:[]}):(i.newRange&&e.get(i.name).ranges.push(i.newRange),t.splice(n,1),n--))}for(const{op:t,ranges:n}of e.values())n.length?t.newRange=br._createFromRanges(n):t.newRange=null}function ua(t,e,n){const i=t.nodes.getNode(0).getAttribute(e);if(i==n)return null;const o=new br(t.position,t.position.getShiftedBy(t.howMany));return new Qs(o,e,i,n,0)}function ha(t,e){return null===t.targetPosition._getTransformedByDeletion(e.sourcePosition,e.howMany)}function ga(t,e){const n=[];for(let i=0;i<t.length;i++){const o=t[i],r=new $s(o.start,o.end.offset-o.start.offset,e,0);n.push(r);for(let e=i+1;e<t.length;e++)t[e]=t[e]._getTransformedByMove(r.sourcePosition,r.targetPosition,r.howMany)[0];e=e._getTransformedByMove(r.sourcePosition,r.targetPosition,r.howMany)}return n}ia(Qs,Qs,(t,e,n)=>{if(t.key===e.key&&t.range.start.hasSameParentAs(e.range.start)){const i=t.range.getDifference(e.range).map(e=>new Qs(e,t.key,t.oldValue,t.newValue,0)),o=t.range.getIntersection(e.range);return o&&n.aIsStrong&&i.push(new Qs(o,e.key,e.newValue,t.newValue,0)),0==i.length?[new Ys(0)]:i}return[t]}),ia(Qs,Ws,(t,e)=>{if(t.range.start.hasSameParentAs(e.position)&&t.range.containsPosition(e.position)){const n=t.range._getTransformedByInsertion(e.position,e.howMany,!e.shouldReceiveAttributes).map(e=>new Qs(e,t.key,t.oldValue,t.newValue,t.baseVersion));if(e.shouldReceiveAttributes){const i=ua(e,t.key,t.oldValue);i&&n.unshift(i)}return n}return t.range=t.range._getTransformedByInsertion(e.position,e.howMany,!1)[0],[t]}),ia(Qs,Ks,(t,e)=>{const n=[];t.range.start.hasSameParentAs(e.deletionPosition)&&(t.range.containsPosition(e.deletionPosition)||t.range.start.isEqual(e.deletionPosition))&&n.push(br._createFromPositionAndShift(e.graveyardPosition,1));const i=t.range._getTransformedByMergeOperation(e);return i.isCollapsed||n.push(i),n.map(e=>new Qs(e,t.key,t.oldValue,t.newValue,t.baseVersion))}),ia(Qs,$s,(t,e)=>{const n=function(t,e){const n=br._createFromPositionAndShift(e.sourcePosition,e.howMany);let i=null,o=[];n.containsRange(t,!0)?i=t:t.start.hasSameParentAs(n.start)?(o=t.getDifference(n),i=t.getIntersection(n)):o=[t];const r=[];for(let t of o){t=t._getTransformedByDeletion(e.sourcePosition,e.howMany);const n=e.getMovedRangeStart(),i=t.start.hasSameParentAs(n),o=t._getTransformedByInsertion(n,e.howMany,i);r.push(...o)}return i&&r.push(i._getTransformedByMove(e.sourcePosition,e.targetPosition,e.howMany,!1)[0]),r}(t.range,e);return n.map(e=>new Qs(e,t.key,t.oldValue,t.newValue,t.baseVersion))}),ia(Qs,qs,(t,e)=>{if(t.range.end.isEqual(e.insertionPosition))return e.graveyardPosition||t.range.end.offset++,[t];if(t.range.start.hasSameParentAs(e.splitPosition)&&t.range.containsPosition(e.splitPosition)){const n=t.clone();return n.range=new br(e.moveTargetPosition.clone(),t.range.end._getCombined(e.splitPosition,e.moveTargetPosition)),t.range.end=e.splitPosition.clone(),t.range.end.stickiness="toPrevious",[t,n]}return t.range=t.range._getTransformedBySplitOperation(e),[t]}),ia(Ws,Qs,(t,e)=>{const n=[t];if(t.shouldReceiveAttributes&&t.position.hasSameParentAs(e.range.start)&&e.range.containsPosition(t.position)){const i=ua(t,e.key,e.newValue);i&&n.push(i)}return n}),ia(Ws,Ws,(t,e,n)=>(t.position.isEqual(e.position)&&n.aIsStrong||(t.position=t.position._getTransformedByInsertOperation(e)),[t])),ia(Ws,$s,(t,e)=>(t.position=t.position._getTransformedByMoveOperation(e),[t])),ia(Ws,qs,(t,e)=>(t.position=t.position._getTransformedBySplitOperation(e),[t])),ia(Ws,Ks,(t,e)=>(t.position=t.position._getTransformedByMergeOperation(e),[t])),ia(Gs,Ws,(t,e)=>(t.oldRange&&(t.oldRange=t.oldRange._getTransformedByInsertOperation(e)[0]),t.newRange&&(t.newRange=t.newRange._getTransformedByInsertOperation(e)[0]),[t])),ia(Gs,Gs,(t,e,n)=>{if(t.name==e.name){if(!n.aIsStrong)return[new Ys(0)];t.oldRange=e.newRange?e.newRange.clone():null}return[t]}),ia(Gs,Ks,(t,e)=>(t.oldRange&&(t.oldRange=t.oldRange._getTransformedByMergeOperation(e)),t.newRange&&(t.newRange=t.newRange._getTransformedByMergeOperation(e)),[t])),ia(Gs,$s,(t,e)=>{const n=[t];if(t.oldRange&&(t.oldRange=br._createFromRanges(t.oldRange._getTransformedByMoveOperation(e))),t.newRange){const i=t.newRange._getTransformedByMoveOperation(e);t.newRange=i[0];for(let e=1;e<i.length;e++){const o=t.clone();o.oldRange=null,o.newRange=i[e],o.baseVersion=-1,n.push(o)}}return n}),ia(Gs,qs,(t,e,n)=>{if(t.oldRange&&(t.oldRange=t.oldRange._getTransformedBySplitOperation(e)),t.newRange){if(n.abRelation){const i=t.newRange._getTransformedBySplitOperation(e);return t.newRange.start.isEqual(e.splitPosition)?n.abRelation.wasStartBeforeMergedElement?t.newRange.start=ur._createAt(e.insertionPosition):n.abRelation.wasInLeftElement?t.newRange.start=ur._createAt(t.newRange.start):t.newRange.start=ur._createAt(e.moveTargetPosition):t.newRange.start=i.start,t.newRange.end.isEqual(e.splitPosition)?t.newRange.end.isEqual(e.splitPosition)&&n.abRelation.wasEndBeforeMergedElement?t.newRange.end=ur._createAt(e.insertionPosition):n.abRelation.wasInRightElement?t.newRange.end=ur._createAt(e.moveTargetPosition):t.newRange.end=ur._createAt(t.newRange.end):t.newRange.end=i.end,[t]}t.newRange=t.newRange._getTransformedBySplitOperation(e)}return[t]}),ia(Ks,Ws,(t,e)=>(t.sourcePosition.hasSameParentAs(e.position)&&(t.howMany+=e.howMany),t.sourcePosition=t.sourcePosition._getTransformedByInsertOperation(e),t.targetPosition=t.targetPosition._getTransformedByInsertOperation(e),[t])),ia(Ks,Ks,(t,e,n)=>{if(t.sourcePosition.isEqual(e.sourcePosition)&&t.targetPosition.isEqual(e.targetPosition)){if(n.bWasUndone){const n=e.graveyardPosition.path.slice();return n.push(0),t.sourcePosition=new ur(e.graveyardPosition.root,n),t.howMany=0,[t]}return[new Ys(0)]}if(t.sourcePosition.isEqual(e.sourcePosition)&&!t.targetPosition.isEqual(e.targetPosition)&&!n.bWasUndone&&"splitAtSource"!=n.abRelation){const i="$graveyard"==t.targetPosition.root.rootName,o="$graveyard"==e.targetPosition.root.rootName;if(o&&!i||(!i||o)&&n.aIsStrong){const n=e.targetPosition._getTransformedByMergeOperation(e),i=t.targetPosition._getTransformedByMergeOperation(e);return[new $s(n,t.howMany,i,0)]}return[new Ys(0)]}return t.sourcePosition.hasSameParentAs(e.targetPosition)&&(t.howMany+=e.howMany),t.sourcePosition=t.sourcePosition._getTransformedByMergeOperation(e),t.targetPosition=t.targetPosition._getTransformedByMergeOperation(e),t.graveyardPosition.isEqual(e.graveyardPosition)&&n.aIsStrong||(t.graveyardPosition=t.graveyardPosition._getTransformedByMergeOperation(e)),[t]}),ia(Ks,$s,(t,e,n)=>{const i=br._createFromPositionAndShift(e.sourcePosition,e.howMany);return"remove"==e.type&&!n.bWasUndone&&t.deletionPosition.hasSameParentAs(e.sourcePosition)&&i.containsPosition(t.sourcePosition)?[new Ys(0)]:(e.sourcePosition.getShiftedBy(e.howMany).isEqual(t.sourcePosition)?t.sourcePosition.stickiness="toNone":e.targetPosition.isEqual(t.sourcePosition)&&"mergeSourceAffected"==n.abRelation?t.sourcePosition.stickiness="toNext":e.sourcePosition.isEqual(t.targetPosition)?(t.targetPosition.stickiness="toNone",t.howMany-=e.howMany):e.targetPosition.isEqual(t.targetPosition)&&"mergeTargetWasBefore"==n.abRelation?(t.targetPosition.stickiness="toPrevious",t.howMany+=e.howMany):(t.sourcePosition.hasSameParentAs(e.targetPosition)&&(t.howMany+=e.howMany),t.sourcePosition.hasSameParentAs(e.sourcePosition)&&(t.howMany-=e.howMany)),t.sourcePosition=t.sourcePosition._getTransformedByMoveOperation(e),t.targetPosition=t.targetPosition._getTransformedByMoveOperation(e),t.sourcePosition.stickiness="toPrevious",t.targetPosition.stickiness="toNext",t.graveyardPosition.isEqual(e.targetPosition)||(t.graveyardPosition=t.graveyardPosition._getTransformedByMoveOperation(e)),[t])}),ia(Ks,qs,(t,e,n)=>{if(e.graveyardPosition&&(t.graveyardPosition=t.graveyardPosition._getTransformedByDeletion(e.graveyardPosition,1),t.deletionPosition.isEqual(e.graveyardPosition)&&(t.howMany=e.howMany)),t.targetPosition.isEqual(e.splitPosition)&&(e.graveyardPosition&&t.deletionPosition.isEqual(e.graveyardPosition)||"mergeTargetNotMoved"==n.abRelation))return t.sourcePosition=t.sourcePosition._getTransformedBySplitOperation(e),[t];if(t.sourcePosition.isEqual(e.splitPosition)){if("mergeSourceNotMoved"==n.abRelation)return t.howMany=0,t.targetPosition=t.targetPosition._getTransformedBySplitOperation(e),[t];if("mergeSameElement"==n.abRelation||t.sourcePosition.offset>0)return t.sourcePosition=e.moveTargetPosition.clone(),t.targetPosition=t.targetPosition._getTransformedBySplitOperation(e),[t]}return t.sourcePosition.hasSameParentAs(e.splitPosition)&&(t.howMany=e.splitPosition.offset),t.sourcePosition=t.sourcePosition._getTransformedBySplitOperation(e),t.targetPosition=t.targetPosition._getTransformedBySplitOperation(e),[t]}),ia($s,Ws,(t,e)=>{const n=br._createFromPositionAndShift(t.sourcePosition,t.howMany)._getTransformedByInsertOperation(e,!1)[0];return t.sourcePosition=n.start,t.howMany=n.end.offset-n.start.offset,t.targetPosition.isEqual(e.position)||(t.targetPosition=t.targetPosition._getTransformedByInsertOperation(e)),[t]}),ia($s,$s,(t,e,n)=>{const i=br._createFromPositionAndShift(t.sourcePosition,t.howMany),o=br._createFromPositionAndShift(e.sourcePosition,e.howMany);let r,s=n.aIsStrong,a=!n.aIsStrong;if("insertBefore"==n.abRelation||"insertAfter"==n.baRelation?a=!0:"insertAfter"!=n.abRelation&&"insertBefore"!=n.baRelation||(a=!1),r=t.targetPosition.isEqual(e.targetPosition)&&a?t.targetPosition._getTransformedByDeletion(e.sourcePosition,e.howMany):t.targetPosition._getTransformedByMove(e.sourcePosition,e.targetPosition,e.howMany),ha(t,e)&&ha(e,t))return[e.getReversed()];if(i.containsPosition(e.targetPosition)&&i.containsRange(o,!0))return i.start=i.start._getTransformedByMove(e.sourcePosition,e.targetPosition,e.howMany),i.end=i.end._getTransformedByMove(e.sourcePosition,e.targetPosition,e.howMany),ga([i],r);if(o.containsPosition(t.targetPosition)&&o.containsRange(i,!0))return i.start=i.start._getCombined(e.sourcePosition,e.getMovedRangeStart()),i.end=i.end._getCombined(e.sourcePosition,e.getMovedRangeStart()),ga([i],r);const l=ue(t.sourcePosition.getParentPath(),e.sourcePosition.getParentPath());if("prefix"==l||"extension"==l)return i.start=i.start._getTransformedByMove(e.sourcePosition,e.targetPosition,e.howMany),i.end=i.end._getTransformedByMove(e.sourcePosition,e.targetPosition,e.howMany),ga([i],r);"remove"!=t.type||"remove"==e.type||n.aWasUndone||n.forceWeakRemove?"remove"==t.type||"remove"!=e.type||n.bWasUndone||n.forceWeakRemove||(s=!1):s=!0;const c=[],d=i.getDifference(o);for(const t of d){t.start=t.start._getTransformedByDeletion(e.sourcePosition,e.howMany),t.end=t.end._getTransformedByDeletion(e.sourcePosition,e.howMany);const n="same"==ue(t.start.getParentPath(),e.getMovedRangeStart().getParentPath()),i=t._getTransformedByInsertion(e.getMovedRangeStart(),e.howMany,n);c.push(...i)}const u=i.getIntersection(o);return null!==u&&s&&(u.start=u.start._getCombined(e.sourcePosition,e.getMovedRangeStart()),u.end=u.end._getCombined(e.sourcePosition,e.getMovedRangeStart()),0===c.length?c.push(u):1==c.length?o.start.isBefore(i.start)||o.start.isEqual(i.start)?c.unshift(u):c.push(u):c.splice(1,0,u)),0===c.length?[new Ys(t.baseVersion)]:ga(c,r)}),ia($s,qs,(t,e,n)=>{let i=t.targetPosition.clone();if(t.targetPosition.isEqual(e.insertionPosition)&&e.graveyardPosition&&"moveTargetAfter"!=n.abRelation||(i=t.targetPosition._getTransformedBySplitOperation(e)),t.sourcePosition.isEqual(e.insertionPosition)&&"firstToMoveMerged"==n.abRelation)return t.howMany++,t.targetPosition=i,[t];const o=br._createFromPositionAndShift(t.sourcePosition,t.howMany);if(o.end.isEqual(e.insertionPosition))return e.graveyardPosition&&"lastToMoveMerged"!=n.abRelation||t.howMany++,t.targetPosition=i,[t];if(o.start.hasSameParentAs(e.splitPosition)&&o.containsPosition(e.splitPosition)){let t=new br(e.splitPosition,o.end);return t=t._getTransformedBySplitOperation(e),ga([new br(o.start,e.splitPosition),t],i)}t.targetPosition.isEqual(e.splitPosition)&&"insertAtSource"==n.abRelation&&(i=e.moveTargetPosition),t.targetPosition.isEqual(e.insertionPosition)&&"insertBetween"==n.abRelation&&(i=t.targetPosition);const r=[o._getTransformedBySplitOperation(e)];if(e.graveyardPosition){const i=o.start.isEqual(e.graveyardPosition)||o.containsPosition(e.graveyardPosition);t.howMany>1&&i&&!n.aWasUndone&&r.push(br._createFromPositionAndShift(e.insertionPosition,1))}return ga(r,i)}),ia($s,Ks,(t,e,n)=>{const i=br._createFromPositionAndShift(t.sourcePosition,t.howMany);if(e.deletionPosition.hasSameParentAs(t.sourcePosition)&&i.containsPosition(e.sourcePosition))if("remove"!=t.type||n.forceWeakRemove){if(1==t.howMany)return n.bWasUndone?(t.sourcePosition=e.graveyardPosition.clone(),t.targetPosition=t.targetPosition._getTransformedByMergeOperation(e),[t]):[new Ys(0)]}else if(!n.aWasUndone){const n=[];let i=e.graveyardPosition.clone(),o=e.targetPosition._getTransformedByMergeOperation(e);const r=t.targetPosition.getTransformedByOperation(e);t.howMany>1&&(n.push(new $s(t.sourcePosition,t.howMany-1,r,0)),i=i._getTransformedByMove(t.sourcePosition,r,t.howMany-1),o=o._getTransformedByMove(t.sourcePosition,r,t.howMany-1));const s=e.deletionPosition._getCombined(t.sourcePosition,r),a=new $s(i,1,s,0),l=a.getMovedRangeStart().path.slice();l.push(0);const c=new ur(a.targetPosition.root,l);o=o._getTransformedByMove(i,s,1);const d=new $s(o,e.howMany,c,0);return n.push(a),n.push(d),n}const o=br._createFromPositionAndShift(t.sourcePosition,t.howMany)._getTransformedByMergeOperation(e);return t.sourcePosition=o.start,t.howMany=o.end.offset-o.start.offset,t.targetPosition=t.targetPosition._getTransformedByMergeOperation(e),[t]}),ia(Js,Ws,(t,e)=>(t.position=t.position._getTransformedByInsertOperation(e),[t])),ia(Js,Ks,(t,e)=>t.position.isEqual(e.deletionPosition)?(t.position=e.graveyardPosition.clone(),t.position.stickiness="toNext",[t]):(t.position=t.position._getTransformedByMergeOperation(e),[t])),ia(Js,$s,(t,e)=>(t.position=t.position._getTransformedByMoveOperation(e),[t])),ia(Js,Js,(t,e,n)=>{if(t.position.isEqual(e.position)){if(!n.aIsStrong)return[new Ys(0)];t.oldName=e.newName}return[t]}),ia(Js,qs,(t,e)=>{if("same"==ue(t.position.path,e.splitPosition.getParentPath())&&!e.graveyardPosition){const e=new Js(t.position.getShiftedBy(1),t.oldName,t.newName,0);return[t,e]}return t.position=t.position._getTransformedBySplitOperation(e),[t]}),ia(Zs,Zs,(t,e,n)=>{if(t.root===e.root&&t.key===e.key){if(!n.aIsStrong||t.newValue===e.newValue)return[new Ys(0)];t.oldValue=e.newValue}return[t]}),ia(Xs,Xs,(t,e)=>t.rootName===e.rootName&&t.isAdd===e.isAdd?[new Ys(0)]:[t]),ia(qs,Ws,(t,e)=>(t.splitPosition.hasSameParentAs(e.position)&&t.splitPosition.offset<e.position.offset&&(t.howMany+=e.howMany),t.splitPosition=t.splitPosition._getTransformedByInsertOperation(e),t.insertionPosition=t.insertionPosition._getTransformedByInsertOperation(e),[t])),ia(qs,Ks,(t,e,n)=>{if(!t.graveyardPosition&&!n.bWasUndone&&t.splitPosition.hasSameParentAs(e.sourcePosition)){const n=e.graveyardPosition.path.slice();n.push(0);const i=new ur(e.graveyardPosition.root,n),o=qs.getInsertionPosition(new ur(e.graveyardPosition.root,n)),r=new qs(i,0,o,null,0);return t.splitPosition=t.splitPosition._getTransformedByMergeOperation(e),t.insertionPosition=qs.getInsertionPosition(t.splitPosition),t.graveyardPosition=r.insertionPosition.clone(),t.graveyardPosition.stickiness="toNext",[r,t]}return t.splitPosition.hasSameParentAs(e.deletionPosition)&&!t.splitPosition.isAfter(e.deletionPosition)&&t.howMany--,t.splitPosition.hasSameParentAs(e.targetPosition)&&(t.howMany+=e.howMany),t.splitPosition=t.splitPosition._getTransformedByMergeOperation(e),t.insertionPosition=qs.getInsertionPosition(t.splitPosition),t.graveyardPosition&&(t.graveyardPosition=t.graveyardPosition._getTransformedByMergeOperation(e)),[t]}),ia(qs,$s,(t,e,n)=>{const i=br._createFromPositionAndShift(e.sourcePosition,e.howMany);if(t.graveyardPosition){const o=i.start.isEqual(t.graveyardPosition)||i.containsPosition(t.graveyardPosition);if(!n.bWasUndone&&o){const n=t.splitPosition._getTransformedByMoveOperation(e),i=t.graveyardPosition._getTransformedByMoveOperation(e),o=i.path.slice();o.push(0);const r=new ur(i.root,o);return[new $s(n,t.howMany,r,0)]}t.graveyardPosition=t.graveyardPosition._getTransformedByMoveOperation(e)}const o=t.splitPosition.isEqual(e.targetPosition);if(o&&("insertAtSource"==n.baRelation||"splitBefore"==n.abRelation))return t.howMany+=e.howMany,t.splitPosition=t.splitPosition._getTransformedByDeletion(e.sourcePosition,e.howMany),t.insertionPosition=qs.getInsertionPosition(t.splitPosition),[t];if(o&&n.abRelation&&n.abRelation.howMany){const{howMany:e,offset:i}=n.abRelation;return t.howMany+=e,t.splitPosition=t.splitPosition.getShiftedBy(i),[t]}if(t.splitPosition.hasSameParentAs(e.sourcePosition)&&i.containsPosition(t.splitPosition)){const n=e.howMany-(t.splitPosition.offset-e.sourcePosition.offset);return t.howMany-=n,t.splitPosition.hasSameParentAs(e.targetPosition)&&t.splitPosition.offset<e.targetPosition.offset&&(t.howMany+=e.howMany),t.splitPosition=e.sourcePosition.clone(),t.insertionPosition=qs.getInsertionPosition(t.splitPosition),[t]}return e.sourcePosition.isEqual(e.targetPosition)||(t.splitPosition.hasSameParentAs(e.sourcePosition)&&t.splitPosition.offset<=e.sourcePosition.offset&&(t.howMany-=e.howMany),t.splitPosition.hasSameParentAs(e.targetPosition)&&t.splitPosition.offset<e.targetPosition.offset&&(t.howMany+=e.howMany)),t.splitPosition.stickiness="toNone",t.splitPosition=t.splitPosition._getTransformedByMoveOperation(e),t.splitPosition.stickiness="toNext",t.graveyardPosition?t.insertionPosition=t.insertionPosition._getTransformedByMoveOperation(e):t.insertionPosition=qs.getInsertionPosition(t.splitPosition),[t]}),ia(qs,qs,(t,e,n)=>{if(t.splitPosition.isEqual(e.splitPosition)){if(!t.graveyardPosition&&!e.graveyardPosition)return[new Ys(0)];if(t.graveyardPosition&&e.graveyardPosition&&t.graveyardPosition.isEqual(e.graveyardPosition))return[new Ys(0)];if("splitBefore"==n.abRelation)return t.howMany=0,t.graveyardPosition=t.graveyardPosition._getTransformedBySplitOperation(e),[t]}if(t.graveyardPosition&&e.graveyardPosition&&t.graveyardPosition.isEqual(e.graveyardPosition)){const i="$graveyard"==t.splitPosition.root.rootName,o="$graveyard"==e.splitPosition.root.rootName;if(o&&!i||(!i||o)&&n.aIsStrong){const n=[];return e.howMany&&n.push(new $s(e.moveTargetPosition,e.howMany,e.splitPosition,0)),t.howMany&&n.push(new $s(t.splitPosition,t.howMany,t.moveTargetPosition,0)),n}return[new Ys(0)]}if(t.graveyardPosition&&(t.graveyardPosition=t.graveyardPosition._getTransformedBySplitOperation(e)),t.splitPosition.isEqual(e.insertionPosition)&&"splitBefore"==n.abRelation)return t.howMany++,[t];if(e.splitPosition.isEqual(t.insertionPosition)&&"splitBefore"==n.baRelation){const n=e.insertionPosition.path.slice();n.push(0);const i=new ur(e.insertionPosition.root,n);return[t,new $s(t.insertionPosition,1,i,0)]}return t.splitPosition.hasSameParentAs(e.splitPosition)&&t.splitPosition.offset<e.splitPosition.offset&&(t.howMany-=e.howMany),t.splitPosition=t.splitPosition._getTransformedBySplitOperation(e),t.insertionPosition=qs.getInsertionPosition(t.splitPosition),[t]});class ma extends(Ut(ur)){constructor(t,e,n="toNone"){if(super(t,e,n),!this.root.is("rootElement"))throw new Vt("model-liveposition-root-not-rootelement",t);pa.call(this)}detach(){this.stopListening()}toPosition(){return new ur(this.root,this.path.slice(),this.stickiness)}static fromPosition(t,e){return new this(t.root,t.path.slice(),e||t.stickiness)}}function pa(){this.listenTo(this.root.document.model,"applyOperation",(t,e)=>{const n=e[0];n.isDocumentOperation&&fa.call(this,n)},{priority:"low"})}function fa(t){const e=this.getTransformedByOperation(t);if(!this.isEqual(e)){const t=this.toPosition();this.path=e.path,this.root=e.root,this.fire("change",t)}}ma.prototype.is=function(t){return"livePosition"===t||"model:livePosition"===t||"position"==t||"model:position"===t};class ba{operations;isUndoable;isLocal;isUndo;isTyping;constructor(t={}){"string"==typeof t&&(t="transparent"===t?{isUndoable:!1}:{},zt("batch-constructor-deprecated-string-type"));const{isUndoable:e=!0,isLocal:n=!0,isUndo:i=!1,isTyping:o=!1}=t;this.operations=[],this.isUndoable=e,this.isLocal=n,this.isUndo=i,this.isTyping=o}get baseVersion(){for(const t of this.operations)if(null!==t.baseVersion)return t.baseVersion;return null}addOperation(t){return t.isDocumentOperation&&(t.batch=this,this.operations.push(t)),t}}class ka{static _statesPriority=[void 0,"refresh","rename","move"];_markerCollection;_changesInElement=new Map;_elementsSnapshots=new Map;_elementChildrenSnapshots=new Map;_elementState=new Map;_changedMarkers=new Map;_changedRoots=new Map;_changeCount=0;_cachedChanges=null;_cachedChangesWithGraveyard=null;_refreshedItems=new Set;constructor(t){this._markerCollection=t}get isEmpty(){return 0==this._changesInElement.size&&0==this._changedMarkers.size&&0==this._changedRoots.size}bufferOperation(t){const e=t;switch(e.type){case"insert":if(this._isInInsertedElement(e.position.parent))return;this._markInsert(e.position.parent,e.position.offset,e.nodes.maxOffset);break;case"addAttribute":case"removeAttribute":case"changeAttribute":for(const t of e.range.getItems({shallow:!0}))this._isInInsertedElement(t.parent)||this._markAttribute(t);break;case"remove":case"move":case"reinsert":{if(e.sourcePosition.isEqual(e.targetPosition)||e.sourcePosition.getShiftedBy(e.howMany).isEqual(e.targetPosition))return;const t=this._isInInsertedElement(e.sourcePosition.parent),n=this._isInInsertedElement(e.targetPosition.parent);t||this._markRemove(e.sourcePosition.parent,e.sourcePosition.offset,e.howMany),n||this._markInsert(e.targetPosition.parent,e.getMovedRangeStart().offset,e.howMany);const i=br._createFromPositionAndShift(e.sourcePosition,e.howMany);for(const t of i.getItems({shallow:!0}))this._setElementState(t,"move");break}case"rename":{if(this._isInInsertedElement(e.position.parent))return;this._markRemove(e.position.parent,e.position.offset,1),this._markInsert(e.position.parent,e.position.offset,1);const t=br._createFromPositionAndShift(e.position,1);for(const e of this._markerCollection.getMarkersIntersectingRange(t)){const t=e.getData();this.bufferMarkerChange(e.name,t,t)}this._setElementState(e.position.nodeAfter,"rename");break}case"split":{const t=e.splitPosition.parent;if(!this._isInInsertedElement(t)){this._markRemove(t,e.splitPosition.offset,e.howMany);const n=br._createFromPositionAndShift(e.splitPosition,e.howMany);for(const t of n.getItems({shallow:!0}))this._setElementState(t,"move")}this._isInInsertedElement(e.insertionPosition.parent)||this._markInsert(e.insertionPosition.parent,e.insertionPosition.offset,1),e.graveyardPosition&&(this._markRemove(e.graveyardPosition.parent,e.graveyardPosition.offset,1),this._setElementState(e.graveyardPosition.nodeAfter,"move"));break}case"merge":{const t=e.sourcePosition.parent;this._isInInsertedElement(t.parent)||this._markRemove(t.parent,t.startOffset,1);const n=e.graveyardPosition.parent;this._markInsert(n,e.graveyardPosition.offset,1),this._setElementState(t,"move");const i=e.targetPosition.parent;if(!this._isInInsertedElement(i)){this._markInsert(i,e.targetPosition.offset,t.maxOffset);const n=br._createFromPositionAndShift(e.sourcePosition,e.howMany);for(const t of n.getItems({shallow:!0}))this._setElementState(t,"move")}break}case"detachRoot":case"addRoot":{const t=e.affectedSelectable;if(!t._isLoaded)return;if(t.isAttached()==e.isAdd)return;this._bufferRootStateChange(e.rootName,e.isAdd);break}case"addRootAttribute":case"removeRootAttribute":case"changeRootAttribute":{if(!e.root._isLoaded)return;const t=e.root.rootName;this._bufferRootAttributeChange(t,e.key,e.oldValue,e.newValue);break}}this._cachedChanges=null}bufferMarkerChange(t,e,n){e.range&&e.range.root.is("rootElement")&&!e.range.root._isLoaded&&(e.range=null),n.range&&n.range.root.is("rootElement")&&!n.range.root._isLoaded&&(n.range=null);let i=this._changedMarkers.get(t);i?i.newMarkerData=n:(i={newMarkerData:n,oldMarkerData:e},this._changedMarkers.set(t,i)),null==i.oldMarkerData.range&&null==n.range&&this._changedMarkers.delete(t)}getMarkersToRemove(){const t=[];for(const[e,n]of this._changedMarkers)null!=n.oldMarkerData.range&&t.push({name:e,range:n.oldMarkerData.range});return t}getMarkersToAdd(){const t=[];for(const[e,n]of this._changedMarkers)null!=n.newMarkerData.range&&t.push({name:e,range:n.newMarkerData.range});return t}getChangedMarkers(){return Array.from(this._changedMarkers).map(([t,e])=>({name:t,data:{oldRange:e.oldMarkerData.range,newRange:e.newMarkerData.range}}))}hasDataChanges(){if(this.getChanges().length)return!0;if(this._changedRoots.size>0)return!0;for(const{newMarkerData:t,oldMarkerData:e}of this._changedMarkers.values()){if(t.affectsData!==e.affectsData)return!0;if(t.affectsData){const n=t.range&&!e.range,i=!t.range&&e.range,o=t.range&&e.range&&!t.range.isEqual(e.range);if(n||i||o)return!0}}return!1}getChanges(t={}){if(this._cachedChanges)return t.includeChangesInGraveyard?this._cachedChangesWithGraveyard.slice():this._cachedChanges.slice();let e=[];for(const t of this._changesInElement.keys()){const n=this._changesInElement.get(t).sort((t,e)=>t.offset===e.offset?t.type!=e.type?"remove"==t.type?-1:1:0:t.offset<e.offset?-1:1),i=this._elementChildrenSnapshots.get(t),o=_a(t.getChildren()),r=va(i.length,n);let s=0,a=0;for(const n of r)if("i"===n){const n=this._getDiffActionForNode(o[s].node,"insert"),i=this._elementsSnapshots.get(o[s].node),r=this._getInsertDiff(t,s,n,o[s],i);e.push(r),s++}else if("r"===n){const n=this._getDiffActionForNode(i[a].node,"remove"),o=this._getRemoveDiff(t,s,n,i[a]);e.push(o),a++}else if("a"===n){const n=i[a].attributes,r=o[s].attributes;let l;if("$text"==o[s].name)l=new br(ur._createAt(t,s),ur._createAt(t,s+1));else{const e=t.offsetToIndex(s);l=new br(ur._createAt(t,s),ur._createAt(t.getChild(e),0))}const c=this._getAttributesDiff(l,n,r);e.push(...c),s++,a++}else s++,a++}e.sort((t,e)=>t.position.root!=e.position.root?t.position.root.rootName<e.position.root.rootName?-1:1:t.position.isEqual(e.position)?t.changeCount-e.changeCount:t.position.isBefore(e.position)?-1:1);for(let t=1,n=0;t<e.length;t++){const i=e[n],o=e[t],r="remove"==i.type&&"remove"==o.type&&"$text"==i.name&&"$text"==o.name&&i.position.isEqual(o.position),s="insert"==i.type&&"insert"==o.type&&"$text"==i.name&&"$text"==o.name&&i.position.parent==o.position.parent&&i.position.offset+i.length==o.position.offset,a="attribute"==i.type&&"attribute"==o.type&&i.position.parent==o.position.parent&&i.range.isFlat&&o.range.isFlat&&i.position.offset+i.length==o.position.offset&&i.attributeKey==o.attributeKey&&i.attributeOldValue==o.attributeOldValue&&i.attributeNewValue==o.attributeNewValue;r||s||a?(i.length++,a&&(i.range.end=i.range.end.getShiftedBy(1)),e[t]=null):n=t}e=e.filter(t=>t);for(const t of e)delete t.changeCount,"attribute"==t.type&&(delete t.position,delete t.length);return this._changeCount=0,this._cachedChangesWithGraveyard=e,this._cachedChanges=e.filter(ya),t.includeChangesInGraveyard?this._cachedChangesWithGraveyard.slice():this._cachedChanges.slice()}getChangedRoots(){return Array.from(this._changedRoots.values()).map(t=>{const e={...t};return void 0!==e.state&&delete e.attributes,e})}getRefreshedItems(){return new Set(this._refreshedItems)}reset(){this._changesInElement.clear(),this._elementChildrenSnapshots.clear(),this._elementsSnapshots.clear(),this._elementState.clear(),this._changedMarkers.clear(),this._changedRoots.clear(),this._refreshedItems.clear(),this._cachedChanges=null}_refreshItem(t){if(this._isInInsertedElement(t.parent))return;this._markRemove(t.parent,t.startOffset,t.offsetSize),this._markInsert(t.parent,t.startOffset,t.offsetSize),this._refreshedItems.add(t),this._setElementState(t,"refresh");const e=br._createOn(t);for(const t of this._markerCollection.getMarkersIntersectingRange(e)){const e=t.getData();this.bufferMarkerChange(t.name,e,e)}this._cachedChanges=null}_bufferRootLoad(t){if(t.isAttached()){this._bufferRootStateChange(t.rootName,!0),this._markInsert(t,0,t.maxOffset);for(const e of t.getAttributeKeys())this._bufferRootAttributeChange(t.rootName,e,null,t.getAttribute(e));for(const e of this._markerCollection)if(e.getRange().root==t){const t=e.getData();this.bufferMarkerChange(e.name,{...t,range:null},t)}}}_bufferRootStateChange(t,e){if(!this._changedRoots.has(t))return void this._changedRoots.set(t,{name:t,state:e?"attached":"detached"});const n=this._changedRoots.get(t);void 0!==n.state?(delete n.state,void 0===n.attributes&&this._changedRoots.delete(t)):n.state=e?"attached":"detached"}_bufferRootAttributeChange(t,e,n,i){const o=this._changedRoots.get(t)||{name:t},r=o.attributes||{};if(r[e]){const t=r[e];i===t.oldValue?delete r[e]:t.newValue=i}else r[e]={oldValue:n,newValue:i};0===Object.entries(r).length?(delete o.attributes,void 0===o.state&&this._changedRoots.delete(t)):(o.attributes=r,this._changedRoots.set(t,o))}_markInsert(t,e,n){if(t.root.is("rootElement")&&!t.root._isLoaded)return;const i={type:"insert",offset:e,howMany:n,count:this._changeCount++};this._markChange(t,i)}_markRemove(t,e,n){if(t.root.is("rootElement")&&!t.root._isLoaded)return;const i={type:"remove",offset:e,howMany:n,count:this._changeCount++};this._markChange(t,i),this._removeAllNestedChanges(t,e,n)}_markAttribute(t){if(t.root.is("rootElement")&&!t.root._isLoaded)return;const e={type:"attribute",offset:t.startOffset,howMany:t.offsetSize,count:this._changeCount++};this._markChange(t.parent,e)}_markChange(t,e){this._makeSnapshots(t);const n=this._getChangesForElement(t);this._handleChange(e,n),n.push(e);for(let t=0;t<n.length;t++)n[t].howMany<1&&(n.splice(t,1),t--)}_setElementState(t,e){if(!t.is("element"))return;const n=ka._statesPriority.indexOf(this._elementState.get(t));ka._statesPriority.indexOf(e)>n&&this._elementState.set(t,e)}_getDiffActionForNode(t,e){if(!t.is("element"))return e;if(!this._elementsSnapshots.has(t))return e;const n=this._elementState.get(t);return n&&"move"!=n?n:e}_getChangesForElement(t){let e;return this._changesInElement.has(t)?e=this._changesInElement.get(t):(e=[],this._changesInElement.set(t,e)),e}_makeSnapshots(t){if(this._elementChildrenSnapshots.has(t))return;const e=_a(t.getChildren());this._elementChildrenSnapshots.set(t,e);for(const t of e)this._elementsSnapshots.set(t.node,t)}_handleChange(t,e){t.nodesToHandle=t.howMany;for(const n of e){const i=t.offset+t.howMany,o=n.offset+n.howMany;if("insert"==t.type&&("insert"==n.type&&(t.offset<=n.offset?n.offset+=t.howMany:t.offset<o&&(n.howMany+=t.nodesToHandle,t.nodesToHandle=0)),"remove"==n.type&&t.offset<n.offset&&(n.offset+=t.howMany),"attribute"==n.type))if(t.offset<=n.offset)n.offset+=t.howMany;else if(t.offset<o){const o=n.howMany;n.howMany=t.offset-n.offset,e.unshift({type:"attribute",offset:i,howMany:o-n.howMany,count:this._changeCount++})}if("remove"==t.type){if("insert"==n.type)if(i<=n.offset)n.offset-=t.howMany;else if(i<=o)if(t.offset<n.offset){const e=i-n.offset;n.offset=t.offset,n.howMany-=e,t.nodesToHandle-=e}else n.howMany-=t.nodesToHandle,t.nodesToHandle=0;else if(t.offset<=n.offset)t.nodesToHandle-=n.howMany,n.howMany=0;else if(t.offset<o){const e=o-t.offset;n.howMany-=e,t.nodesToHandle-=e}if("remove"==n.type&&(i<=n.offset?n.offset-=t.howMany:t.offset<n.offset&&(t.nodesToHandle+=n.howMany,n.howMany=0)),"attribute"==n.type)if(i<=n.offset)n.offset-=t.howMany;else if(t.offset<n.offset){const e=i-n.offset;n.offset=t.offset,n.howMany-=e}else if(t.offset<o)if(i<=o){const i=n.howMany;n.howMany=t.offset-n.offset;const o=i-n.howMany-t.nodesToHandle;e.unshift({type:"attribute",offset:t.offset,howMany:o,count:this._changeCount++})}else n.howMany-=o-t.offset}if("attribute"==t.type){if("insert"==n.type)if(t.offset<n.offset&&i>n.offset){if(i>o){const t={type:"attribute",offset:o,howMany:i-o,count:this._changeCount++};this._handleChange(t,e),e.push(t)}t.nodesToHandle=n.offset-t.offset,t.howMany=t.nodesToHandle}else t.offset>=n.offset&&t.offset<o&&(i>o?(t.nodesToHandle=i-o,t.offset=o):t.nodesToHandle=0);if("remove"==n.type&&t.offset<n.offset&&i>n.offset){const o={type:"attribute",offset:n.offset,howMany:i-n.offset,count:this._changeCount++};this._handleChange(o,e),e.push(o),t.nodesToHandle=n.offset-t.offset,t.howMany=t.nodesToHandle}"attribute"==n.type&&(t.offset>=n.offset&&i<=o?(t.nodesToHandle=0,t.howMany=0,t.offset=0):t.offset<=n.offset&&i>=o&&(n.howMany=0))}}t.howMany=t.nodesToHandle,delete t.nodesToHandle}_getInsertDiff(t,e,n,i,o){const r={type:"insert",position:ur._createAt(t,e),name:i.name,attributes:new Map(i.attributes),length:1,changeCount:this._changeCount++,action:n};return"insert"!=n&&o&&(r.before={name:o.name,attributes:new Map(o.attributes)}),r}_getRemoveDiff(t,e,n,i){return{type:"remove",action:n,position:ur._createAt(t,e),name:i.name,attributes:new Map(i.attributes),length:1,changeCount:this._changeCount++}}_getAttributesDiff(t,e,n){const i=[];n=new Map(n);for(const[o,r]of e){const e=n.has(o)?n.get(o):null;e!==r&&i.push({type:"attribute",position:t.start,range:t.clone(),length:1,attributeKey:o,attributeOldValue:r,attributeNewValue:e,changeCount:this._changeCount++}),n.delete(o)}for(const[e,o]of n)i.push({type:"attribute",position:t.start,range:t.clone(),length:1,attributeKey:e,attributeOldValue:null,attributeNewValue:o,changeCount:this._changeCount++});return i}_isInInsertedElement(t){const e=t.parent;if(!e)return!1;const n=this._changesInElement.get(e),i=t.startOffset;if(n)for(const t of n)if("insert"==t.type&&i>=t.offset&&i<t.offset+t.howMany)return!0;return this._isInInsertedElement(e)}_removeAllNestedChanges(t,e,n){const i=new br(ur._createAt(t,e),ur._createAt(t,e+n));for(const t of i.getItems({shallow:!0}))t.is("element")&&(this._changesInElement.delete(t),this._removeAllNestedChanges(t,0,t.maxOffset))}}function wa(t){return{node:t,name:t.is("$text")?"$text":t.name,attributes:new Map(t.getAttributes())}}function _a(t){const e=[];for(const n of t)if(n.is("$text"))for(let t=0;t<n.data.length;++t)e.push(wa(n));else e.push(wa(n));return e}function va(t,e){const n=[];let i=0,o=0;for(const t of e){if(t.offset>i){for(let e=0;e<t.offset-i;e++)n.push("e");o+=t.offset-i}if("insert"==t.type){for(let e=0;e<t.howMany;e++)n.push("i");i=t.offset+t.howMany}else if("remove"==t.type){for(let e=0;e<t.howMany;e++)n.push("r");i=t.offset,o+=t.howMany}else{if(t.howMany>1500)for(let e=0;e<t.howMany;e++)n.push("a");else n.push(..."a".repeat(t.howMany).split(""));i=t.offset+t.howMany,o+=t.howMany}}if(o<t)for(let e=0;e<t-o-i;e++)n.push("e");return n}function ya(t){const e="position"in t&&"$graveyard"==t.position.root.rootName,n="range"in t&&"$graveyard"==t.range.root.rootName;return!e&&!n}class Ca{_operations=[];_undoPairs=new Map;_undoneOperations=new Set;_baseVersionToOperationIndex=new Map;_version=0;_gaps=new Map;get version(){return this._version}set version(t){this._operations.length&&t>this._version+1&&this._gaps.set(this._version,t),this._version=t}get lastOperation(){return this._operations[this._operations.length-1]}addOperation(t){if(t.baseVersion!==this.version)throw new Vt("model-document-history-addoperation-incorrect-version",this,{operation:t,historyVersion:this.version});this._operations.push(t),this._version++,this._baseVersionToOperationIndex.set(t.baseVersion,this._operations.length-1)}getOperations(t,e=this.version){if(!this._operations.length)return[];const n=this._operations[0];void 0===t&&(t=n.baseVersion);let i=e-1;for(const[e,n]of this._gaps)t>e&&t<n&&(t=n),i>e&&i<n&&(i=e-1);if(i<n.baseVersion||t>this.lastOperation.baseVersion)return[];let o=this._baseVersionToOperationIndex.get(t);void 0===o&&(o=0);let r=this._baseVersionToOperationIndex.get(i);return void 0===r&&(r=this._operations.length-1),this._operations.slice(o,r+1)}getOperation(t){const e=this._baseVersionToOperationIndex.get(t);if(void 0!==e)return this._operations[e]}setOperationAsUndone(t,e){this._undoPairs.set(e,t),this._undoneOperations.add(t)}isUndoingOperation(t){return this._undoPairs.has(t)}isUndoneOperation(t){return this._undoneOperations.has(t)}getUndoneOperation(t){return this._undoPairs.get(t)}reset(){this._version=0,this._undoPairs=new Map,this._operations=[],this._undoneOperations=new Set,this._gaps=new Map,this._baseVersionToOperationIndex=new Map}}class xa extends Hr{rootName;_document;_isAttached=!0;_isLoaded=!0;constructor(t,e,n="main"){super(e),this._document=t,this.rootName=n}get document(){return this._document}isAttached(){return this._isAttached}toJSON(){return this.rootName}}xa.prototype.is=function(t,e){return e?e===this.name&&("rootElement"===t||"model:rootElement"===t||"element"===t||"model:element"===t):"rootElement"===t||"model:rootElement"===t||"element"===t||"model:element"===t||"node"===t||"model:node"===t};const Aa="$graveyard";class Ea extends(Ut()){model;history;selection;roots;differ;isReadOnly;_postFixers;_hasSelectionChangedFromTheLastChangeBlock;constructor(t){super(),this.model=t,this.history=new Ca,this.selection=new Dr(this),this.roots=new kn({idProperty:"rootName"}),this.differ=new ka(t.markers),this.isReadOnly=!1,this._postFixers=new Set,this._hasSelectionChangedFromTheLastChangeBlock=!1,this.createRoot("$root",Aa),this.listenTo(t,"applyOperation",(t,e)=>{const n=e[0];n.isDocumentOperation&&this.differ.bufferOperation(n)},{priority:"high"}),this.listenTo(t,"applyOperation",(t,e)=>{const n=e[0];n.isDocumentOperation&&this.history.addOperation(n)},{priority:"low"}),this.listenTo(this.selection,"change",()=>{this._hasSelectionChangedFromTheLastChangeBlock=!0}),this.listenTo(t.markers,"update",(t,e,n,i,o)=>{const r={...e.getData(),range:i};this.differ.bufferMarkerChange(e.name,o,r),null===n&&e.on("change",(t,n)=>{const i=e.getData();this.differ.bufferMarkerChange(e.name,{...i,range:n},i)})}),this.registerPostFixer(t=>{let e=!1;for(const n of this.roots)n.isAttached()||n.isEmpty||(t.remove(t.createRangeIn(n)),e=!0);for(const n of this.model.markers)n.getRange().root.isAttached()||(t.removeMarker(n),e=!0);return e})}get version(){return this.history.version}set version(t){this.history.version=t}get graveyard(){return this.getRoot(Aa)}createRoot(t="$root",e="main"){if(this.roots.get(e))throw new Vt("model-document-createroot-name-exists",this,{name:e});const n=new xa(this,t,e);return this.roots.add(n),n}destroy(){this.selection.destroy(),this.stopListening()}getRoot(t="main"){return this.roots.get(t)}getRootNames(t=!1){return this.getRoots(t).map(t=>t.rootName)}getRoots(t=!1){return this.roots.filter(e=>e!=this.graveyard&&(t||e.isAttached())&&e._isLoaded)}registerPostFixer(t){this._postFixers.add(t)}toJSON(){const t=Kn(this);return t.selection="[engine.model.DocumentSelection]",t.model="[engine.model.Model]",t}_handleChangeBlock(t){this._hasDocumentChangedFromTheLastChangeBlock()&&(this._callPostFixers(t),this.selection.refresh(),this.differ.hasDataChanges()?this.fire("change:data",t.batch):this.fire("change",t.batch),this.selection.refresh(),this.differ.reset()),this._hasSelectionChangedFromTheLastChangeBlock=!1}_hasDocumentChangedFromTheLastChangeBlock(){return!this.differ.isEmpty||this._hasSelectionChangedFromTheLastChangeBlock}_getDefaultRoot(){const t=this.getRoots();return t.length?t[0]:this.graveyard}_getDefaultRange(){const t=this._getDefaultRoot(),e=this.model,n=e.schema,i=e.createPositionFromPath(t,[0]);return n.getNearestSelectionRange(i)||e.createRange(i)}_validateSelectionRange(t){return t.start.isValid()&&t.end.isValid()&&Sa(t.start)&&Sa(t.end)}_callPostFixers(t){let e=!1;do{for(const n of this._postFixers)if(this.selection.refresh(),e=n(t),e)break}while(e)}}function Sa(t){const e=t.textNode;if(e){const n=e.data,i=t.offset-e.startOffset;return!Pn(n,i)&&!Mn(n,i)}return!0}class Ta extends(Ut()){_markers=new Map;[Symbol.iterator](){return this._markers.values()}has(t){const e=t instanceof Ia?t.name:t;return this._markers.has(e)}get(t){return this._markers.get(t)||null}_set(t,e,n=!1,i=!1){const o=t instanceof Ia?t.name:t;if(o.includes(","))throw new Vt("markercollection-incorrect-marker-name",this);const r=this._markers.get(o);if(r){const t=r.getData(),s=r.getRange();let a=!1;return s.isEqual(e)||(r._attachLiveRange(Lr.fromRange(e)),a=!0),n!=r.managedUsingOperations&&(r._managedUsingOperations=n,a=!0),"boolean"==typeof i&&i!=r.affectsData&&(r._affectsData=i,a=!0),a&&this.fire(`update:${o}`,r,s,e,t),r}const s=Lr.fromRange(e),a=new Ia(o,s,n,i);return this._markers.set(o,a),this.fire(`update:${o}`,a,null,e,{...a.getData(),range:null}),a}_remove(t){const e=t instanceof Ia?t.name:t,n=this._markers.get(e);return!!n&&(this._markers.delete(e),this.fire(`update:${e}`,n,n.getRange(),null,n.getData()),this._destroyMarker(n),!0)}_refresh(t){const e=t instanceof Ia?t.name:t,n=this._markers.get(e);if(!n)throw new Vt("markercollection-refresh-marker-not-exists",this);const i=n.getRange();this.fire(`update:${e}`,n,i,i,n.getData())}*getMarkersAtPosition(t){for(const e of this)e.getRange().containsPosition(t)&&(yield e)}*getMarkersIntersectingRange(t){for(const e of this)null!==e.getRange().getIntersection(t)&&(yield e)}destroy(){for(const t of this._markers.values())this._destroyMarker(t);this._markers=null,this.stopListening()}*getMarkersGroup(t){for(const e of this._markers.values())e.name.startsWith(t+":")&&(yield e)}_destroyMarker(t){t.stopListening(),t._detachLiveRange()}}class Ia extends(Ut(ar)){name;_managedUsingOperations;_affectsData;_liveRange;constructor(t,e,n,i){super(),this.name=t,this._liveRange=this._attachLiveRange(e),this._managedUsingOperations=n,this._affectsData=i}get managedUsingOperations(){if(!this._liveRange)throw new Vt("marker-destroyed",this);return this._managedUsingOperations}get affectsData(){if(!this._liveRange)throw new Vt("marker-destroyed",this);return this._affectsData}getData(){return{range:this.getRange(),affectsData:this.affectsData,managedUsingOperations:this.managedUsingOperations}}getStart(){if(!this._liveRange)throw new Vt("marker-destroyed",this);return this._liveRange.start.clone()}getEnd(){if(!this._liveRange)throw new Vt("marker-destroyed",this);return this._liveRange.end.clone()}getRange(){if(!this._liveRange)throw new Vt("marker-destroyed",this);return this._liveRange.toRange()}_attachLiveRange(t){return this._liveRange&&this._detachLiveRange(),t.delegate("change:range").to(this),t.delegate("change:content").to(this),this._liveRange=t,t}_detachLiveRange(){this._liveRange.stopDelegating("change:range",this),this._liveRange.stopDelegating("change:content",this),this._liveRange.detach(),this._liveRange=null}}Ia.prototype.is=function(t){return"marker"===t||"model:marker"===t};class Pa extends Os{sourcePosition;howMany;constructor(t,e){super(null),this.sourcePosition=t.clone(),this.howMany=e}get type(){return"detach"}get affectedSelectable(){return null}toJSON(){const t=super.toJSON();return t.sourcePosition=this.sourcePosition.toJSON(),t}_validate(){if(this.sourcePosition.root.document)throw new Vt("detach-operation-on-document-node",this)}_execute(){Ds(br._createFromPositionAndShift(this.sourcePosition,this.howMany))}static get className(){return"DetachOperation"}}class Ma extends ar{markers=new Map;_children=new jr;constructor(t){super(),t&&this._insertChild(0,t)}[Symbol.iterator](){return this.getChildren()}get childCount(){return this._children.length}get maxOffset(){return this._children.maxOffset}get isEmpty(){return 0===this.childCount}get nextSibling(){return null}get previousSibling(){return null}get root(){return this}get parent(){return null}get document(){return null}isAttached(){return!1}getAncestors(){return[]}getChild(t){return this._children.getNode(t)}getChildAtOffset(t){return this._children.getNodeAtOffset(t)}getChildren(){return this._children[Symbol.iterator]()}getChildIndex(t){return this._children.getNodeIndex(t)}getChildStartOffset(t){return this._children.getNodeStartOffset(t)}getPath(){return[]}getNodeByPath(t){let e=this;for(const n of t)e=e.getChildAtOffset(n);return e}offsetToIndex(t){return this._children.offsetToIndex(t)}toJSON(){const t=[];for(const e of this._children)t.push(e.toJSON());return t}static fromJSON(t){const e=[];for(const n of t)n.name?e.push(Hr.fromJSON(n)):e.push(Or.fromJSON(n));return new Ma(e)}_appendChild(t){this._insertChild(this.childCount,t)}_insertChild(t,e){const n=function(t){return"string"==typeof t?[new Or(t)]:(he(t)||(t=[t]),Array.from(t).map(t=>"string"==typeof t?new Or(t):t instanceof lr?new Or(t.data,t.getAttributes()):t))}(e);for(const t of n)null!==t.parent&&t._remove(),t.parent=this;this._children._insertNodes(t,n)}_removeChildren(t,e=1){const n=this._children._removeNodes(t,e);for(const t of n)t.parent=null;return n}_removeChildrenArray(t){this._children._removeNodesArray(t);for(const e of t)e.parent=null}}Ma.prototype.is=function(t){return"documentFragment"===t||"model:documentFragment"===t};class Na{model;batch;constructor(t,e){this.model=t,this.batch=e}createText(t,e){return new Or(t,e)}createElement(t,e){return new Hr(t,e)}createDocumentFragment(){return new Ma}cloneElement(t,e=!0){return t._clone(e)}insert(t,e,n=0){if(this._assertWriterUsedCorrectly(),t instanceof Or&&""==t.data)return;const i=ur._createAt(e,n);if(t.parent){if(Ra(t.root,i.root))return void this.move(br._createOn(t),i);if(t.root.document)throw new Vt("model-writer-insert-forbidden-move",this);this.remove(t)}const o=i.root.document?i.root.document.version:null,r=t instanceof Ma?t._removeChildren(0,t.childCount):t,s=new Ws(i,r,o);if(t instanceof Or&&(s.shouldReceiveAttributes=!0),this.batch.addOperation(s),this.model.applyOperation(s),t instanceof Ma)for(const[e,n]of t.markers){const t=ur._createAt(n.root,0),o={range:new br(n.start._getCombined(t,i),n.end._getCombined(t,i)),usingOperation:!0,affectsData:!0};this.model.markers.has(e)?this.updateMarker(e,o):this.addMarker(e,o)}}insertText(t,e,n,i){e instanceof Ma||e instanceof Hr||e instanceof ur?this.insert(this.createText(t),e,n):this.insert(this.createText(t,e),n,i)}insertElement(t,e,n,i){e instanceof Ma||e instanceof Hr||e instanceof ur?this.insert(this.createElement(t),e,n):this.insert(this.createElement(t,e),n,i)}append(t,e){this.insert(t,e,"end")}appendText(t,e,n){e instanceof Ma||e instanceof Hr?this.insert(this.createText(t),e,"end"):this.insert(this.createText(t,e),n,"end")}appendElement(t,e,n){e instanceof Ma||e instanceof Hr?this.insert(this.createElement(t),e,"end"):this.insert(this.createElement(t,e),n,"end")}setAttribute(t,e,n){if(this._assertWriterUsedCorrectly(),n instanceof br){const i=n.getMinimalFlatRanges();for(const n of i)La(this,t,e,n)}else Va(this,t,e,n)}setAttributes(t,e){for(const[n,i]of An(t))this.setAttribute(n,i,e)}removeAttribute(t,e){if(this._assertWriterUsedCorrectly(),e instanceof br){const n=e.getMinimalFlatRanges();for(const e of n)La(this,t,null,e)}else Va(this,t,null,e)}clearAttributes(t){this._assertWriterUsedCorrectly();const e=t=>{for(const e of t.getAttributeKeys())this.removeAttribute(e,t)};if(t instanceof br)for(const n of t.getItems())e(n);else e(t)}move(t,e,n){if(this._assertWriterUsedCorrectly(),!(t instanceof br))throw new Vt("writer-move-invalid-range",this);if(!t.isFlat)throw new Vt("writer-move-range-not-flat",this);const i=ur._createAt(e,n);if(i.isEqual(t.start))return;if(this._addOperationForAffectedMarkers("move",t),!Ra(t.root,i.root))throw new Vt("writer-move-different-document",this);const o=t.root.document?t.root.document.version:null,r=new $s(t.start,t.end.offset-t.start.offset,i,o);this.batch.addOperation(r),this.model.applyOperation(r)}remove(t){this._assertWriterUsedCorrectly();const e=(t instanceof br?t:br._createOn(t)).getMinimalFlatRanges().reverse();for(const t of e)this._addOperationForAffectedMarkers("move",t),Oa(t.start,t.end.offset-t.start.offset,this.batch,this.model)}merge(t){this._assertWriterUsedCorrectly();const e=t.nodeBefore,n=t.nodeAfter;if(this._addOperationForAffectedMarkers("merge",t),!(e instanceof Hr))throw new Vt("writer-merge-no-element-before",this);if(!(n instanceof Hr))throw new Vt("writer-merge-no-element-after",this);t.root.document?this._merge(t):this._mergeDetached(t)}createPositionFromPath(t,e,n){return this.model.createPositionFromPath(t,e,n)}createPositionAt(t,e){return this.model.createPositionAt(t,e)}createPositionAfter(t){return this.model.createPositionAfter(t)}createPositionBefore(t){return this.model.createPositionBefore(t)}createRange(t,e){return this.model.createRange(t,e)}createRangeIn(t){return this.model.createRangeIn(t)}createRangeOn(t){return this.model.createRangeOn(t)}createSelection(...t){return this.model.createSelection(...t)}_mergeDetached(t){const e=t.nodeBefore,n=t.nodeAfter;this.move(br._createIn(n),ur._createAt(e,"end")),this.remove(n)}_merge(t){const e=ur._createAt(t.nodeBefore,"end"),n=ur._createAt(t.nodeAfter,0),i=t.root.document.graveyard,o=new ur(i,[0]),r=t.root.document.version,s=new Ks(n,t.nodeAfter.maxOffset,e,o,r);this.batch.addOperation(s),this.model.applyOperation(s)}rename(t,e){if(this._assertWriterUsedCorrectly(),!(t instanceof Hr))throw new Vt("writer-rename-not-element-instance",this);const n=t.root.document?t.root.document.version:null,i=new Js(ur._createBefore(t),t.name,e,n);this.batch.addOperation(i),this.model.applyOperation(i)}split(t,e){this._assertWriterUsedCorrectly();let n,i,o=t.parent;if(!o.parent)throw new Vt("writer-split-element-no-parent",this);if(e||(e=o.parent),!t.parent.getAncestors({includeSelf:!0}).includes(e))throw new Vt("writer-split-invalid-limit-element",this);do{const e=o.root.document?o.root.document.version:null,r=o.maxOffset-t.offset,s=qs.getInsertionPosition(t),a=new qs(t,r,s,null,e);this.batch.addOperation(a),this.model.applyOperation(a),n||i||(n=o,i=t.parent.nextSibling),o=(t=this.createPositionAfter(t.parent)).parent}while(o!==e);return{position:t,range:new br(ur._createAt(n,"end"),ur._createAt(i,0))}}wrap(t,e){if(this._assertWriterUsedCorrectly(),!t.isFlat)throw new Vt("writer-wrap-range-not-flat",this);const n=e instanceof Hr?e:new Hr(e);if(n.childCount>0)throw new Vt("writer-wrap-element-not-empty",this);if(null!==n.parent)throw new Vt("writer-wrap-element-attached",this);this.insert(n,t.start);const i=new br(t.start.getShiftedBy(1),t.end.getShiftedBy(1));this.move(i,ur._createAt(n,0))}unwrap(t){if(this._assertWriterUsedCorrectly(),null===t.parent)throw new Vt("writer-unwrap-element-no-parent",this);this.move(br._createIn(t),this.createPositionAfter(t)),this.remove(t)}addMarker(t,e){if(this._assertWriterUsedCorrectly(),!e||"boolean"!=typeof e.usingOperation)throw new Vt("writer-addmarker-no-usingoperation",this);const n=e.usingOperation,i=e.range,o=void 0!==e.affectsData&&e.affectsData;if(this.model.markers.has(t))throw new Vt("writer-addmarker-marker-exists",this);if(!i)throw new Vt("writer-addmarker-no-range",this);return n?(za(this,t,null,i,o),this.model.markers.get(t)):this.model.markers._set(t,i,n,o)}updateMarker(t,e){this._assertWriterUsedCorrectly();const n="string"==typeof t?t:t.name,i=this.model.markers.get(n);if(!i)throw new Vt("writer-updatemarker-marker-not-exists",this);if(!e)return zt("writer-updatemarker-reconvert-using-editingcontroller",{markerName:n}),void this.model.markers._refresh(i);const o="boolean"==typeof e.usingOperation,r="boolean"==typeof e.affectsData,s=r?e.affectsData:i.affectsData;if(!o&&!e.range&&!r)throw new Vt("writer-updatemarker-wrong-options",this);const a=i.getRange(),l=e.range?e.range:a;o&&e.usingOperation!==i.managedUsingOperations?e.usingOperation?za(this,n,null,l,s):(za(this,n,a,null,s),this.model.markers._set(n,l,void 0,s)):i.managedUsingOperations?za(this,n,a,l,s):this.model.markers._set(n,l,void 0,s)}removeMarker(t){this._assertWriterUsedCorrectly();const e="string"==typeof t?t:t.name;if(!this.model.markers.has(e))throw new Vt("writer-removemarker-no-marker",this);const n=this.model.markers.get(e);n.managedUsingOperations?za(this,e,n.getRange(),null,n.affectsData):this.model.markers._remove(e)}addRoot(t,e="$root"){this._assertWriterUsedCorrectly();const n=this.model.document.getRoot(t);if(n&&n.isAttached())throw new Vt("writer-addroot-root-exists",this);const i=this.model.document,o=new Xs(t,e,!0,i,i.version);return this.batch.addOperation(o),this.model.applyOperation(o),this.model.document.getRoot(t)}detachRoot(t){this._assertWriterUsedCorrectly();const e="string"==typeof t?this.model.document.getRoot(t):t;if(!e||!e.isAttached())throw new Vt("writer-detachroot-no-root",this);for(const t of this.model.markers)t.getRange().root===e&&this.removeMarker(t);for(const t of e.getAttributeKeys())this.removeAttribute(t,e);this.remove(this.createRangeIn(e));const n=this.model.document,i=new Xs(e.rootName,e.name,!1,n,n.version);this.batch.addOperation(i),this.model.applyOperation(i)}setSelection(...t){this._assertWriterUsedCorrectly(),this.model.document.selection._setTo(...t)}setSelectionFocus(t,e){this._assertWriterUsedCorrectly(),this.model.document.selection._setFocus(t,e)}setSelectionAttribute(t,e){if(this._assertWriterUsedCorrectly(),"string"==typeof t)this._setSelectionAttribute(t,e);else for(const[e,n]of An(t))this._setSelectionAttribute(e,n)}removeSelectionAttribute(t){if(this._assertWriterUsedCorrectly(),"string"==typeof t)this._removeSelectionAttribute(t);else for(const e of t)this._removeSelectionAttribute(e)}overrideSelectionGravity(){return this.model.document.selection._overrideGravity()}restoreSelectionGravity(t){this.model.document.selection._restoreGravity(t)}_setSelectionAttribute(t,e){const n=this.model.document.selection;if(n.isCollapsed&&n.anchor.parent.isEmpty){const i=Dr._getStoreAttributeKey(t);this.setAttribute(i,e,n.anchor.parent)}n._setAttribute(t,e)}_removeSelectionAttribute(t){const e=this.model.document.selection;if(e.isCollapsed&&e.anchor.parent.isEmpty){const n=Dr._getStoreAttributeKey(t);this.removeAttribute(n,e.anchor.parent)}e._removeAttribute(t)}_assertWriterUsedCorrectly(){if(this.model._currentWriter!==this)throw new Vt("writer-incorrect-use",this)}_addOperationForAffectedMarkers(t,e){for(const n of this.model.markers){if(!n.managedUsingOperations)continue;const i=n.getRange();let o=!1;if("move"===t){const t=e;o=t.containsPosition(i.start)||t.start.isEqual(i.start)||t.containsPosition(i.end)||t.end.isEqual(i.end)}else{const t=e,n=t.nodeBefore,r=t.nodeAfter,s=i.start.parent==n&&i.start.isAtEnd,a=i.end.parent==r&&0==i.end.offset,l=i.end.nodeAfter==r,c=i.start.nodeAfter==r;o=s||a||l||c}o&&this.updateMarker(n.name,{range:i})}}}function La(t,e,n,i){const o=t.model,r=o.document;let s,a,l,c=i.start;for(const t of i.getWalker({shallow:!0}))l=t.item.getAttribute(e),s&&a!=l&&(a!=n&&d(),c=s),s=t.nextPosition,a=l;function d(){const i=new br(c,s),l=i.root.document?r.version:null,d=new Qs(i,e,a,n,l);t.batch.addOperation(d),o.applyOperation(d)}s instanceof ur&&s!=c&&a!=n&&d()}function Va(t,e,n,i){const o=t.model,r=o.document,s=i.getAttribute(e);let a,l;if(s!=n){if(i.root===i){const t=i.document?r.version:null;l=new Zs(i,e,s,n,t)}else{a=new br(ur._createBefore(i),t.createPositionAfter(i));const o=a.root.document?r.version:null;l=new Qs(a,e,s,n,o)}t.batch.addOperation(l),o.applyOperation(l)}}function za(t,e,n,i,o){const r=t.model,s=r.document,a=new Gs(e,n,i,r.markers,!!o,s.version);t.batch.addOperation(a),r.applyOperation(a)}function Oa(t,e,n,i){let o;if(t.root.document){const n=i.document,r=new ur(n.graveyard,[0]);o=new $s(t,e,r,n.version)}else o=new Pa(t,e);n.addOperation(o),i.applyOperation(o)}function Ra(t,e){return t===e||t instanceof xa&&e instanceof xa}function Da(t,e){return t.isCollapsed?function(t,e){const n=t.start,i=e.getNearestSelectionRange(n);if(!i){const t=n.getAncestors().reverse().find(t=>e.isObject(t));return t?br._createOn(t):null}if(!i.isCollapsed)return i;const o=i.start;return n.isEqual(o)?null:new br(o)}(t,e):function(t,e){const{start:n,end:i}=t,o=e.checkChild(n,"$text"),r=e.checkChild(i,"$text"),s=e.getLimitElement(n),a=e.getLimitElement(i);if(s===a){if(o&&r)return null;if(function(t,e,n){const i=t.nodeAfter&&!n.isLimit(t.nodeAfter)||n.checkChild(t,"$text"),o=e.nodeBefore&&!n.isLimit(e.nodeBefore)||n.checkChild(e,"$text");return i||o}(n,i,e)){const t=n.nodeAfter&&e.isSelectable(n.nodeAfter)?null:e.getNearestSelectionRange(n,"forward"),o=i.nodeBefore&&e.isSelectable(i.nodeBefore)?null:e.getNearestSelectionRange(i,"backward"),r=t?t.start:n,s=o?o.end:i;return new br(r,s)}}const l=s&&!s.is("rootElement"),c=a&&!a.is("rootElement");if(l||c){const t=n.nodeAfter&&i.nodeBefore&&n.nodeAfter.parent===i.nodeBefore.parent,o=l&&(!t||!Fa(n.nodeAfter,e)),r=c&&(!t||!Fa(i.nodeBefore,e));let d=n,u=i;return o&&(d=ur._createBefore(Ba(s,e))),r&&(u=ur._createAfter(Ba(a,e))),new br(d,u)}return null}(t,e)}function Ba(t,e){let n=t,i=n;for(;e.isLimit(i)&&i.parent;)n=i,i=i.parent;return n}function Fa(t,e){return t&&e.isSelectable(t)}function ja(t,e,n={}){if(e.isCollapsed)return;const i=e.getFirstRange();if("$graveyard"==i.root.rootName)return;const o=t.schema;t.change(t=>{if(!n.doNotResetEntireContent&&function(t,e){const n=t.getLimitElement(e);if(!e.containsEntireContent(n))return!1;const i=e.getFirstRange();return i.start.parent!=i.end.parent&&t.checkChild(n,"paragraph")}(o,e))return void function(t,e){const n=t.model.schema.getLimitElement(e);t.remove(t.createRangeIn(n)),Wa(t,t.createPositionAt(n,0),e)}(t,e);const r={};if(!n.doNotAutoparagraph){const t=e.getSelectedElement();t&&Object.assign(r,o.getAttributesWithProperty(t,"copyOnReplace",!0))}let s,a;n.doNotFixSelection?(s=ma.fromPosition(i.start,"toPrevious"),a=ma.fromPosition(i.end,"toNext")):[s,a]=function(t){const e=t.root.document.model,n=t.start;let i=t.end;if(e.hasContent(t,{ignoreMarkers:!0})){const n=function(t){const e=t.parent,n=e.root.document.model.schema,i=e.getAncestors({parentFirst:!0,includeSelf:!0});for(const t of i){if(n.isLimit(t))return null;if(n.isBlock(t))return t}}(i);if(n&&i.isTouching(e.createPositionAt(n,0))){const n=e.createSelection(t);e.modifySelection(n,{direction:"backward"});const o=n.getLastPosition(),r=e.createRange(o,i);e.hasContent(r,{ignoreMarkers:!0})||(i=o)}}return[ma.fromPosition(n,"toPrevious"),ma.fromPosition(i,"toNext")]}(i),s.isTouching(a)||t.remove(t.createRange(s,a)),n.leaveUnmerged||(function(t,e,n){const i=t.model;if(!$a(t.model.schema,e,n))return;const[o,r]=function(t,e){const n=t.getAncestors(),i=e.getAncestors();let o=0;for(;n[o]&&n[o]==i[o];)o++;return[n[o],i[o]]}(e,n);o&&r&&(!i.hasContent(o,{ignoreMarkers:!0})&&i.hasContent(r,{ignoreMarkers:!0})?Ua(t,e,n,o.parent):Ha(t,e,n,o.parent))}(t,s,a),o.removeDisallowedAttributes(s.parent.getChildren(),t)),qa(t,e,s),!n.doNotAutoparagraph&&function(t,e){const n=t.checkChild(e,"$text"),i=t.checkChild(e,"paragraph");return!n&&i}(o,s)&&Wa(t,s,e,r),s.detach(),a.detach()})}function Ha(t,e,n,i){const o=e.parent,r=n.parent;if(o!=i&&r!=i){for(e=t.createPositionAfter(o),(n=t.createPositionBefore(r)).isEqual(e)||t.insert(r,e),t.merge(e);n.parent.isEmpty;){const e=n.parent;n=t.createPositionBefore(e),t.remove(e)}$a(t.model.schema,e,n)&&Ha(t,e,n,i)}}function Ua(t,e,n,i){const o=e.parent,r=n.parent;if(o!=i&&r!=i){for(e=t.createPositionAfter(o),(n=t.createPositionBefore(r)).isEqual(e)||t.insert(o,n);e.parent.isEmpty;){const n=e.parent;e=t.createPositionBefore(n),t.remove(n)}n=t.createPositionBefore(r),function(t,e){const n=e.nodeBefore,i=e.nodeAfter;n.name!=i.name&&t.rename(n,i.name),t.clearAttributes(n),t.setAttributes(Object.fromEntries(i.getAttributes()),n),t.merge(e)}(t,n),$a(t.model.schema,e,n)&&Ua(t,e,n,i)}}function $a(t,e,n){const i=e.parent,o=n.parent;return i!=o&&!t.isLimit(i)&&!t.isLimit(o)&&function(t,e,n){const i=new br(t,e);for(const t of i.getWalker())if(n.isLimit(t.item))return!1;return!0}(e,n,t)}function Wa(t,e,n,i={}){const o=t.createElement("paragraph");t.model.schema.setAllowedAttributes(o,i,t),t.insert(o,e),qa(t,n,t.createPositionAt(o,0))}function qa(t,e,n){e instanceof Dr?t.setSelection(n):e.setTo(n)}function Ka(t,e){const n=[];Array.from(t.getItems({direction:"backward"})).map(t=>e.createRangeOn(t)).filter(e=>(e.start.isAfter(t.start)||e.start.isEqual(t.start))&&(e.end.isBefore(t.end)||e.end.isEqual(t.end))).forEach(t=>{n.push(t.start.parent),e.remove(t)}),n.forEach(t=>{let n=t;for(;n.parent&&n.isEmpty;){const t=e.createRangeOn(n);n=n.parent,e.remove(t)}})}class Ga{model;writer;position;canMergeWith;schema;_documentFragment;_documentFragmentPosition;_firstNode=null;_lastNode=null;_lastAutoParagraph=null;_filterAttributesOf=[];_affectedStart=null;_affectedEnd=null;_nodeToSelect=null;constructor(t,e,n){this.model=t,this.writer=e,this.position=n,this.canMergeWith=new Set([this.position.parent]),this.schema=t.schema,this._documentFragment=e.createDocumentFragment(),this._documentFragmentPosition=e.createPositionAt(this._documentFragment,0)}handleNodes(t){for(const e of Array.from(t))this._handleNode(e);this._insertPartialFragment(),this._lastAutoParagraph&&this._updateLastNodeFromAutoParagraph(this._lastAutoParagraph),this._mergeOnRight(),this.schema.removeDisallowedAttributes(this._filterAttributesOf,this.writer),this._filterAttributesOf=[]}_updateLastNodeFromAutoParagraph(t){const e=this.writer.createPositionAfter(this._lastNode),n=this.writer.createPositionAfter(t);if(n.isAfter(e)){if(this._lastNode=t,this.position.parent!=t||!this.position.isAtEnd)throw new Vt("insertcontent-invalid-insertion-position",this);this.position=n,this._setAffectedBoundaries(this.position)}}getSelectionRange(){return this._nodeToSelect?br._createOn(this._nodeToSelect):this.model.schema.getNearestSelectionRange(this.position)}getAffectedRange(){return this._affectedStart?new br(this._affectedStart,this._affectedEnd):null}destroy(){this._affectedStart&&this._affectedStart.detach(),this._affectedEnd&&this._affectedEnd.detach()}_handleNode(t){this._checkAndSplitToAllowedPosition(t)?(this._appendToFragment(t),this._firstNode||(this._firstNode=t),this._lastNode=t):this.schema.isObject(t)||this._handleDisallowedNode(t)}_insertPartialFragment(){if(this._documentFragment.isEmpty)return;const t=ma.fromPosition(this.position,"toNext");this._setAffectedBoundaries(this.position),this._documentFragment.getChild(0)==this._firstNode&&(this.writer.insert(this._firstNode,this.position),this._mergeOnLeft(),this.position=t.toPosition()),this._documentFragment.isEmpty||this.writer.insert(this._documentFragment,this.position),this._documentFragmentPosition=this.writer.createPositionAt(this._documentFragment,0),this.position=t.toPosition(),t.detach()}_handleDisallowedNode(t){t.is("element")&&this.handleNodes(t.getChildren())}_appendToFragment(t){if(!this.schema.checkChild(this.position,t))throw new Vt("insertcontent-wrong-position",this,{node:t,position:this.position});this.writer.insert(t,this._documentFragmentPosition),this._documentFragmentPosition=this._documentFragmentPosition.getShiftedBy(t.offsetSize),this.schema.isObject(t)&&!this.schema.checkChild(this.position,"$text")?this._nodeToSelect=t:this._nodeToSelect=null,this._filterAttributesOf.push(t)}_setAffectedBoundaries(t){this._affectedStart||(this._affectedStart=ma.fromPosition(t,"toPrevious")),this._affectedEnd&&!this._affectedEnd.isBefore(t)||(this._affectedEnd&&this._affectedEnd.detach(),this._affectedEnd=ma.fromPosition(t,"toNext"))}_mergeOnLeft(){const t=this._firstNode;if(!(t instanceof Hr))return;if(!this._canMergeLeft(t))return;const e=ma._createBefore(t);e.stickiness="toNext";const n=ma.fromPosition(this.position,"toNext");this._affectedStart.isEqual(e)&&(this._affectedStart.detach(),this._affectedStart=ma._createAt(e.nodeBefore,"end","toPrevious")),this._firstNode===this._lastNode&&(this._firstNode=e.nodeBefore,this._lastNode=e.nodeBefore),this.writer.merge(e),e.isEqual(this._affectedEnd)&&this._firstNode===this._lastNode&&(this._affectedEnd.detach(),this._affectedEnd=ma._createAt(e.nodeBefore,"end","toNext")),this.position=n.toPosition(),n.detach(),this._filterAttributesOf.push(this.position.parent),e.detach()}_mergeOnRight(){const t=this._lastNode;if(!(t instanceof Hr))return;if(!this._canMergeRight(t))return;const e=ma._createAfter(t);if(e.stickiness="toNext",!this.position.isEqual(e))throw new Vt("insertcontent-invalid-insertion-position",this);this.position=ur._createAt(e.nodeBefore,"end");const n=ma.fromPosition(this.position,"toPrevious");this._affectedEnd.isEqual(e)&&(this._affectedEnd.detach(),this._affectedEnd=ma._createAt(e.nodeBefore,"end","toNext")),this._firstNode===this._lastNode&&(this._firstNode=e.nodeBefore,this._lastNode=e.nodeBefore),this.writer.merge(e),e.getShiftedBy(-1).isEqual(this._affectedStart)&&this._firstNode===this._lastNode&&(this._affectedStart.detach(),this._affectedStart=ma._createAt(e.nodeBefore,0,"toPrevious")),this.position=n.toPosition(),n.detach(),this._filterAttributesOf.push(this.position.parent),e.detach()}_canMergeLeft(t){const e=t.previousSibling;return e instanceof Hr&&this.canMergeWith.has(e)&&this.model.schema.checkMerge(e,t)}_canMergeRight(t){const e=t.nextSibling;return e instanceof Hr&&this.canMergeWith.has(e)&&this.model.schema.checkMerge(t,e)}_insertAutoParagraph(){this._insertPartialFragment();const t=this.writer.createElement("paragraph");this.writer.insert(t,this.position),this._setAffectedBoundaries(this.position),this._lastAutoParagraph=t,this.position=this.writer.createPositionAt(t,0)}_checkAndSplitToAllowedPosition(t){const e=this._getAllowedIn(this.position.parent,t);if(!e)return!1;for(e!=this.position.parent&&this._insertPartialFragment();e!=this.position.parent;)if(this.position.isAtStart){const t=this.position.parent;this.position=this.writer.createPositionBefore(t),t.isEmpty&&t.parent===e&&this.writer.remove(t)}else if(this.position.isAtEnd)this.position=this.writer.createPositionAfter(this.position.parent);else{const t=this.writer.createPositionAfter(this.position.parent);this._setAffectedBoundaries(this.position),this.writer.split(this.position),this.position=t,this.canMergeWith.add(this.position.nodeAfter)}return this.schema.checkChild(this.position.parent,t)||this._insertAutoParagraph(),!0}_getAllowedIn(t,e){return this.schema.checkChild(t,e)||this.schema.checkChild(t,"paragraph")&&this.schema.checkChild("paragraph",e)?t:this.schema.isLimit(t)?null:this._getAllowedIn(t.parent,e)}}function Qa(t,e){const{isForward:n,walker:i,unit:o,schema:r,treatEmojiAsSingleUnit:s}=t,{type:a,item:l,nextPosition:c}=e;if("text"==a)return"word"===t.unit?function(t,e){let n=t.position.textNode;for(n||(n=e?t.position.nodeAfter:t.position.nodeBefore);n&&n.is("$text");){const i=t.position.offset-n.startOffset;if(Za(n,i,e))n=e?t.position.nodeAfter:t.position.nodeBefore;else{if(Ja(n.data,i,e))break;t.next()}}return t.position}(i,n):function(t,e,n){const i=t.position.textNode;if(i){const o=i.data;let r=t.position.offset-i.startOffset;for(;Pn(o,r)||"character"==e&&Mn(o,r)||n&&Ln(o,r);)t.next(),r=t.position.offset-i.startOffset}return t.position}(i,o,s);if(a==(n?"elementStart":"elementEnd")){if(r.isSelectable(l))return ur._createAt(l,n?"after":"before");if(r.checkChild(c,"$text"))return c}else{if(r.isLimit(l))return void i.skip(()=>!0);if(r.checkChild(c,"$text"))return c}}function Ya(t,e){const n=t.root,i=ur._createAt(n,e?"end":0);return e?new br(t,i):new br(i,t)}function Ja(t,e,n){const i=e+(n?0:-1);return' ,.?!:;"-()'.includes(t.charAt(i))}function Za(t,e,n){return e===(n?t.offsetSize:0)}class Xa extends(ie()){markers;document;schema;_pendingChanges;_currentWriter;constructor(){var t;super(),this.markers=new Ta,this.document=new Ea(this),this.schema=new ms,this._pendingChanges=[],this._currentWriter=null,["deleteContent","modifySelection","getSelectedContent","applyOperation"].forEach(t=>this.decorate(t)),this.on("applyOperation",(t,e)=>{e[0]._validate()},{priority:"highest"}),this.schema.register("$root",{isLimit:!0}),this.schema.register("$container",{allowIn:["$root","$container"]}),this.schema.register("$block",{allowIn:["$root","$container"],isBlock:!0}),this.schema.register("$blockObject",{allowWhere:"$block",isBlock:!0,isObject:!0}),this.schema.register("$inlineObject",{allowWhere:"$text",allowAttributesOf:"$text",isInline:!0,isObject:!0}),this.schema.register("$text",{allowIn:"$block",isInline:!0,isContent:!0}),this.schema.register("$clipboardHolder",{allowContentOf:"$root",allowChildren:"$text",isLimit:!0}),this.schema.register("$documentFragment",{allowContentOf:"$root",allowChildren:"$text",isLimit:!0}),this.schema.register("$marker"),this.schema.addChildCheck(()=>!0,"$marker"),(t=this).document.registerPostFixer(e=>function(t,e){const n=e.document.selection,i=e.schema,o=[];let r=!1;for(const t of n.getRanges()){const e=Da(t,i);e&&!e.isEqual(t)?(o.push(e),r=!0):o.push(t)}return r&&t.setSelection(function(t){const e=[...t],n=new Set;let i=1;for(;i<e.length;){const t=e[i],o=e.slice(0,i);for(const[r,s]of o.entries())if(!n.has(r))if(t.isEqual(s))n.add(r);else if(t.isIntersecting(s)){n.add(r),n.add(i);const o=t.getJoined(s);e.push(o)}i++}return e.filter((t,e)=>!n.has(e))}(o),{backward:n.isBackward}),!1}(e,t)),this.document.registerPostFixer(is),this.on("insertContent",(t,[e,n])=>{t.return=function(t,e,n){return t.change(i=>{const o=n||t.document.selection;o.isCollapsed||t.deleteContent(o,{doNotAutoparagraph:!0});const r=new Ga(t,i,o.anchor),s=[];let a;if(e.is("documentFragment")){if(e.markers.size){const t=[];for(const[n,i]of e.markers){const{start:e,end:o}=i,r=e.isEqual(o);t.push({position:e,name:n,isCollapsed:r},{position:o,name:n,isCollapsed:r})}t.sort(({position:t},{position:e})=>t.isBefore(e)?1:-1);for(const{position:n,name:o,isCollapsed:r}of t){let t=null,a=null;const l=n.parent===e&&n.isAtStart,c=n.parent===e&&n.isAtEnd;l||c?r&&(a=l?"start":"end"):(t=i.createElement("$marker"),i.insert(t,n)),s.push({name:o,element:t,collapsed:a})}}a=e.getChildren()}else a=[e];r.handleNodes(a);let l=r.getSelectionRange();if(e.is("documentFragment")&&s.length){const t=l?Lr.fromRange(l):null,e={};for(let t=s.length-1;t>=0;t--){const{name:n,element:o,collapsed:a}=s[t],l=!e[n];if(l&&(e[n]=[]),o){const t=i.createPositionAt(o,"before");e[n].push(t),i.remove(o)}else{const t=r.getAffectedRange();if(!t){a&&e[n].push(r.position);continue}a?e[n].push(t[a]):e[n].push(l?t.start:t.end)}}for(const[t,[n,o]]of Object.entries(e))n&&o&&n.root===o.root&&n.root.document&&!i.model.markers.has(t)&&i.addMarker(t,{usingOperation:!0,affectsData:!0,range:new br(n,o)});t&&(l=t.toRange(),t.detach())}l&&(o instanceof Dr?i.setSelection(l):o.setTo(l));const c=r.getAffectedRange()||t.createRange(o.anchor);return r.destroy(),c})}(this,e,n)}),this.on("insertObject",(t,[e,n,i])=>{t.return=function(t,e,n,i={}){if(!t.schema.isObject(e))throw new Vt("insertobject-element-not-an-object",t,{object:e});const o=n||t.document.selection;let r=o;i.findOptimalPosition&&t.schema.isBlock(e)&&(r=t.createSelection(t.schema.findOptimalInsertionRange(o,i.findOptimalPosition)));const s=wn(o.getSelectedBlocks()),a={};return s&&Object.assign(a,t.schema.getAttributesWithProperty(s,"copyOnReplace",!0)),t.change(n=>{r.isCollapsed||t.deleteContent(r,{doNotAutoparagraph:!0});let o=e;const s=r.anchor.parent;!t.schema.checkChild(s,e)&&t.schema.checkChild(s,"paragraph")&&t.schema.checkChild("paragraph",e)&&(o=n.createElement("paragraph"),n.insert(e,o)),t.schema.setAllowedAttributes(o,a,n);const l=t.insertContent(o,r);return l.isCollapsed||i.setSelection&&function(t,e,n,i){const o=t.model;if("on"==n)return void t.setSelection(e,"on");if("after"!=n)throw new Vt("insertobject-invalid-place-parameter-value",o);let r=e.nextSibling;o.schema.isInline(e)?t.setSelection(e,"after"):(!(r&&o.schema.checkChild(r,"$text"))&&o.schema.checkChild(e.parent,"paragraph")&&(r=t.createElement("paragraph"),o.schema.setAllowedAttributes(r,i,t),o.insertContent(r,t.createPositionAfter(e))),r&&t.setSelection(r,0))}(n,e,i.setSelection,a),l})}(this,e,n,i)}),this.on("canEditAt",t=>{const e=!this.document.isReadOnly;t.return=e,e||t.stop()})}change(t){try{return 0===this._pendingChanges.length?(this._pendingChanges.push({batch:new ba,callback:t}),this._runPendingChanges()[0]):t(this._currentWriter)}catch(t){Vt.rethrowUnexpectedError(t,this)}}enqueueChange(t,e){try{t?"function"==typeof t?(e=t,t=new ba):t instanceof ba||(t=new ba(t)):t=new ba,this._pendingChanges.push({batch:t,callback:e}),1==this._pendingChanges.length&&this._runPendingChanges()}catch(t){Vt.rethrowUnexpectedError(t,this)}}applyOperation(t){t._execute()}insertContent(t,e,n,...i){const o=tl(e,n);return this.fire("insertContent",[t,o,n,...i])}insertObject(t,e,n,i,...o){const r=tl(e,n);return this.fire("insertObject",[t,r,i,i,...o])}deleteContent(t,e){ja(this,t,e)}modifySelection(t,e){!function(t,e,n={}){const i=t.schema,o="backward"!=n.direction,r=n.unit?n.unit:"character",s=!!n.treatEmojiAsSingleUnit,a=e.focus,l=new cr({boundaries:Ya(a,o),singleCharacters:!0,direction:o?"forward":"backward"}),c={walker:l,schema:i,isForward:o,unit:r,treatEmojiAsSingleUnit:s};let d;for(;d=l.next();){if(d.done)return;const n=Qa(c,d.value);if(n)return void(e instanceof Dr?t.change(t=>{t.setSelectionFocus(n)}):e.setFocus(n))}}(this,t,e)}getSelectedContent(t){return function(t,e){return t.change(t=>{const n=t.createDocumentFragment(),i=e.getFirstRange();if(!i||i.isCollapsed)return n;const o=i.start.root,r=i.start.getCommonPath(i.end),s=o.getNodeByPath(r);let a;a=i.start.parent==i.end.parent?i:t.createRange(t.createPositionAt(s,i.start.path[r.length]),t.createPositionAt(s,i.end.path[r.length]+1));const l=a.end.offset-a.start.offset;for(const e of a.getItems({shallow:!0}))e.is("$textProxy")?t.appendText(e.data,e.getAttributes(),n):t.append(t.cloneElement(e,!0),n);if(a!=i){const e=i._getTransformedByMove(a.start,t.createPositionAt(n,0),l)[0],o=t.createRange(t.createPositionAt(n,0),e.start);Ka(t.createRange(e.end,t.createPositionAt(n,"end")),t),Ka(o,t)}return n})}(this,t)}hasContent(t,e={}){const n=t instanceof br?t:br._createIn(t);if(n.isCollapsed)return!1;const{ignoreWhitespaces:i=!1,ignoreMarkers:o=!1}=e;if(!o)for(const t of this.markers.getMarkersIntersectingRange(n))if(t.affectsData)return!0;for(const t of n.getItems())if(this.schema.isContent(t)){if(!t.is("$textProxy"))return!0;if(!i)return!0;if(-1!==t.data.search(/\S/))return!0}return!1}canEditAt(t){const e=tl(t);return this.fire("canEditAt",[e])}createPositionFromPath(t,e,n){return new ur(t,e,n)}createPositionAt(t,e){return ur._createAt(t,e)}createPositionAfter(t){return ur._createAfter(t)}createPositionBefore(t){return ur._createBefore(t)}createRange(t,e){return new br(t,e)}createRangeIn(t){return br._createIn(t)}createRangeOn(t){return br._createOn(t)}createSelection(...t){return new Er(...t)}createBatch(t){return new ba(t)}createOperationFromJSON(t){return ea.fromJSON(t,this.document)}destroy(){this.document.destroy(),this.stopListening()}_runPendingChanges(){const t=[];this.fire("_beforeChanges");try{for(;this._pendingChanges.length;){const e=this._pendingChanges[0].batch;this._currentWriter=new Na(this,e);const n=this._pendingChanges[0].callback(this._currentWriter);t.push(n),this.document._handleChangeBlock(this._currentWriter),this._pendingChanges.shift(),this._currentWriter=null}}finally{this._pendingChanges.length=0,this._currentWriter=null,this.fire("_afterChanges")}return t}}function tl(t,e){if(t)return t instanceof Er||t instanceof Dr?t:t instanceof Ar?e||0===e?new Er(t,e):t.is("rootElement")?new Er(t,"in"):new Er(t,"on"):new Er(t)}class el extends Ko{domEventType="click";onDomEvent(t){this.fire(t.type,t)}}class nl extends Ko{domEventType=["mousedown","mouseup","mouseover","mouseout"];onDomEvent(t){this.fire(t.type,t)}}class il extends Ko{domEventType=["touchstart","touchend","touchmove"];onDomEvent(t){this.fire(t.type,t)}}class ol{document;constructor(t){this.document=t}createDocumentFragment(t){return new ao(this.document,t)}createElement(t,e,n){return new Pi(this.document,t,e,n)}createText(t){return new pi(this.document,t)}clone(t,e=!1){return t._clone(e)}appendChild(t,e){return e._appendChild(t)}insertChild(t,e,n){return n._insertChild(t,e)}removeChildren(t,e,n){return n._removeChildren(t,e)}remove(t){const e=t.parent;return e?this.removeChildren(e.getChildIndex(t),1,e):[]}replace(t,e){const n=t.parent;if(n){const i=n.getChildIndex(t);return this.removeChildren(i,1,n),this.insertChild(i,e,n),!0}return!1}unwrapElement(t){const e=t.parent;if(e){const n=e.getChildIndex(t);this.remove(t),this.insertChild(n,t.getChildren(),e)}}rename(t,e){const n=new Pi(this.document,t,e.getAttributes(),e.getChildren());return this.replace(e,n)?n:null}setAttribute(t,e,n){n._setAttribute(t,e)}removeAttribute(t,e){e._removeAttribute(t)}addClass(t,e){e._addClass(t)}removeClass(t,e){e._removeClass(t)}setStyle(t,e,n){E(t)&&void 0===n?e._setStyle(t):n._setStyle(t,e)}removeStyle(t,e){e._removeStyle(t)}setCustomProperty(t,e,n){n._setCustomProperty(t,e)}removeCustomProperty(t,e){return e._removeCustomProperty(t)}createPositionAt(t,e){return Bi._createAt(t,e)}createPositionAfter(t){return Bi._createAfter(t)}createPositionBefore(t){return Bi._createBefore(t)}createRange(t,e){return new Fi(t,e)}createRangeOn(t){return Fi._createOn(t)}createRangeIn(t){return Fi._createIn(t)}createSelection(...t){return new Hi(...t)}}const rl=/^#([0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/i,sl=/^rgb\([ ]?([0-9]{1,3}[ %]?,[ ]?){2,3}[0-9]{1,3}[ %]?\)$/i,al=/^rgba\([ ]?([0-9]{1,3}[ %]?,[ ]?){3}(1|[0-9]+%|[0]?\.?[0-9]+)\)$/i,ll=/^hsl\([ ]?([0-9]{1,3}[ %]?[,]?[ ]*){3}(1|[0-9]+%|[0]?\.?[0-9]+)?\)$/i,cl=/^hsla\([ ]?([0-9]{1,3}[ %]?,[ ]?){2,3}(1|[0-9]+%|[0]?\.?[0-9]+)\)$/i,dl=/\w+\((?:[^()]|\([^()]*\))*\)|\S+/gi,ul=new Set(["black","silver","gray","white","maroon","red","purple","fuchsia","green","lime","olive","yellow","navy","blue","teal","aqua","orange","aliceblue","antiquewhite","aquamarine","azure","beige","bisque","blanchedalmond","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkgrey","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkslategrey","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dimgrey","dodgerblue","firebrick","floralwhite","forestgreen","gainsboro","ghostwhite","gold","goldenrod","greenyellow","grey","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightgrey","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightslategrey","lightsteelblue","lightyellow","limegreen","linen","magenta","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","oldlace","olivedrab","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","skyblue","slateblue","slategray","slategrey","snow","springgreen","steelblue","tan","thistle","tomato","turquoise","violet","wheat","whitesmoke","yellowgreen","activeborder","activecaption","appworkspace","background","buttonface","buttonhighlight","buttonshadow","buttontext","captiontext","graytext","highlight","highlighttext","inactiveborder","inactivecaption","inactivecaptiontext","infobackground","infotext","menu","menutext","scrollbar","threeddarkshadow","threedface","threedhighlight","threedlightshadow","threedshadow","window","windowframe","windowtext","rebeccapurple","currentcolor","transparent"]);function hl(t){return t.startsWith("#")?rl.test(t):t.startsWith("rgb")?sl.test(t)||al.test(t):t.startsWith("hsl")?ll.test(t)||cl.test(t):ul.has(t.toLowerCase())}const gl=["none","hidden","dotted","dashed","solid","double","groove","ridge","inset","outset"];function ml(t){return gl.includes(t)}const pl=/^([+-]?[0-9]*([.][0-9]+)?(px|cm|mm|in|pc|pt|ch|em|ex|rem|vh|vw|vmin|vmax)|0)$/;function fl(t){return pl.test(t)}const bl=/^[+-]?[0-9]*([.][0-9]+)?%$/;function kl(t){return bl.test(t)}const wl=["repeat-x","repeat-y","repeat","space","round","no-repeat"];function _l(t){return wl.includes(t)}const vl=["center","top","bottom","left","right"];function yl(t){return vl.includes(t)}const Cl=["fixed","scroll","local"];function xl(t){return Cl.includes(t)}const Al=/^url\(/;function El(t){return Al.test(t)}function Sl(t=""){if(""===t)return{top:void 0,right:void 0,bottom:void 0,left:void 0};const e=Ml(t),n=e[0],i=e[2]||n,o=e[1]||n;return{top:n,bottom:i,right:o,left:e[3]||o}}function Tl(t){return e=>{const{top:n,right:i,bottom:o,left:r}=e,s=[];return[n,i,r,o].every(t=>!!t)?s.push([t,Il(e)]):(n&&s.push([t+"-top",n]),i&&s.push([t+"-right",i]),o&&s.push([t+"-bottom",o]),r&&s.push([t+"-left",r])),s}}function Il({top:t,right:e,bottom:n,left:i}){const o=[];return i!==e?o.push(t,e,n,i):n!==t?o.push(t,e,n):e!==t?o.push(t,e):o.push(t),o.join(" ")}function Pl(t){return e=>({path:t,value:Sl(e)})}function Ml(t){const e=t.trim().slice(0,1500).matchAll(dl);return Array.from(e).map(t=>t[0])}function Nl(t){t.setNormalizer("background",t=>{const e={},n=Ml(t);for(const t of n)_l(t)?(e.repeat=e.repeat||[],e.repeat.push(t)):yl(t)?(e.position=e.position||[],e.position.push(t)):xl(t)?e.attachment=t:hl(t)?e.color=t:El(t)&&(e.image=t);return{path:"background",value:e}}),t.setNormalizer("background-color",t=>({path:"background.color",value:t})),t.setReducer("background",t=>{const e=[];return e.push(["background-color",t.color]),e}),t.setStyleRelation("background",["background-color"])}function Ll(t){t.setNormalizer("border",t=>{const{color:e,style:n,width:i}=Fl(t);return{path:"border",value:{color:Sl(e),style:Sl(n),width:Sl(i)}}}),t.setNormalizer("border-top",Vl("top")),t.setNormalizer("border-right",Vl("right")),t.setNormalizer("border-bottom",Vl("bottom")),t.setNormalizer("border-left",Vl("left")),t.setNormalizer("border-color",zl("color")),t.setNormalizer("border-width",zl("width")),t.setNormalizer("border-style",zl("style")),t.setNormalizer("border-top-color",Rl("color","top")),t.setNormalizer("border-top-style",Rl("style","top")),t.setNormalizer("border-top-width",Rl("width","top")),t.setNormalizer("border-right-color",Rl("color","right")),t.setNormalizer("border-right-style",Rl("style","right")),t.setNormalizer("border-right-width",Rl("width","right")),t.setNormalizer("border-bottom-color",Rl("color","bottom")),t.setNormalizer("border-bottom-style",Rl("style","bottom")),t.setNormalizer("border-bottom-width",Rl("width","bottom")),t.setNormalizer("border-left-color",Rl("color","left")),t.setNormalizer("border-left-style",Rl("style","left")),t.setNormalizer("border-left-width",Rl("width","left")),t.setExtractor("border-top",Dl("top")),t.setExtractor("border-right",Dl("right")),t.setExtractor("border-bottom",Dl("bottom")),t.setExtractor("border-left",Dl("left")),t.setExtractor("border-top-color","border.color.top"),t.setExtractor("border-right-color","border.color.right"),t.setExtractor("border-bottom-color","border.color.bottom"),t.setExtractor("border-left-color","border.color.left"),t.setExtractor("border-top-width","border.width.top"),t.setExtractor("border-right-width","border.width.right"),t.setExtractor("border-bottom-width","border.width.bottom"),t.setExtractor("border-left-width","border.width.left"),t.setExtractor("border-top-style","border.style.top"),t.setExtractor("border-right-style","border.style.right"),t.setExtractor("border-bottom-style","border.style.bottom"),t.setExtractor("border-left-style","border.style.left"),t.setReducer("border-color",Tl("border-color")),t.setReducer("border-style",Tl("border-style")),t.setReducer("border-width",Tl("border-width")),t.setReducer("border-top",jl("top")),t.setReducer("border-right",jl("right")),t.setReducer("border-bottom",jl("bottom")),t.setReducer("border-left",jl("left")),t.setReducer("border",function(){return e=>{const n=Bl(e,"top"),i=Bl(e,"right"),o=Bl(e,"bottom"),r=Bl(e,"left"),s=[n,i,o,r],a={width:t(s,"width"),style:t(s,"style"),color:t(s,"color")},l=Hl(a,"all");if(l.length)return l;const c=Object.entries(a).reduce((t,[e,n])=>(n&&(t.push([`border-${e}`,n]),s.forEach(t=>delete t[e])),t),[]);return[...c,...Hl(n,"top"),...Hl(i,"right"),...Hl(o,"bottom"),...Hl(r,"left")]};function t(t,e){return t.map(t=>t[e]).reduce((t,e)=>t==e?t:null)}}()),t.setStyleRelation("border",["border-color","border-style","border-width","border-top","border-right","border-bottom","border-left","border-top-color","border-right-color","border-bottom-color","border-left-color","border-top-style","border-right-style","border-bottom-style","border-left-style","border-top-width","border-right-width","border-bottom-width","border-left-width"]),t.setStyleRelation("border-color",["border-top-color","border-right-color","border-bottom-color","border-left-color"]),t.setStyleRelation("border-style",["border-top-style","border-right-style","border-bottom-style","border-left-style"]),t.setStyleRelation("border-width",["border-top-width","border-right-width","border-bottom-width","border-left-width"]),t.setStyleRelation("border-top",["border-top-color","border-top-style","border-top-width"]),t.setStyleRelation("border-right",["border-right-color","border-right-style","border-right-width"]),t.setStyleRelation("border-bottom",["border-bottom-color","border-bottom-style","border-bottom-width"]),t.setStyleRelation("border-left",["border-left-color","border-left-style","border-left-width"])}function Vl(t){return e=>{const{color:n,style:i,width:o}=Fl(e),r={};return void 0!==n&&(r.color={[t]:n}),void 0!==i&&(r.style={[t]:i}),void 0!==o&&(r.width={[t]:o}),{path:"border",value:r}}}function zl(t){return e=>({path:"border",value:Ol(e,t)})}function Ol(t,e){return{[e]:Sl(t)}}function Rl(t,e){return n=>({path:"border",value:{[t]:{[e]:n}}})}function Dl(t){return(e,n)=>{if(n.border)return Bl(n.border,t)}}function Bl(t,e){const n={};return t.width&&t.width[e]&&(n.width=t.width[e]),t.style&&t.style[e]&&(n.style=t.style[e]),t.color&&t.color[e]&&(n.color=t.color[e]),n}function Fl(t){const e={},n=Ml(t);for(const t of n)fl(t)||/thin|medium|thick/.test(t)?e.width=t:ml(t)?e.style=t:e.color=t;return e}function jl(t){return e=>Hl(e,t)}function Hl(t,e){const n=[];if(t&&t.width&&n.push("width"),t&&t.style&&n.push("style"),t&&t.color&&n.push("color"),3==n.length){const i=n.map(e=>t[e]).join(" ");return["all"==e?["border",i]:[`border-${e}`,i]]}return"all"==e?[]:n.map(n=>[`border-${e}-${n}`,t[n]])}function Ul(t){t.setNormalizer("margin",Pl("margin")),t.setNormalizer("margin-top",t=>({path:"margin.top",value:t})),t.setNormalizer("margin-right",t=>({path:"margin.right",value:t})),t.setNormalizer("margin-bottom",t=>({path:"margin.bottom",value:t})),t.setNormalizer("margin-left",t=>({path:"margin.left",value:t})),t.setReducer("margin",Tl("margin")),t.setStyleRelation("margin",["margin-top","margin-right","margin-bottom","margin-left"])}function $l(t){t.setNormalizer("padding",Pl("padding")),t.setNormalizer("padding-top",t=>({path:"padding.top",value:t})),t.setNormalizer("padding-right",t=>({path:"padding.right",value:t})),t.setNormalizer("padding-bottom",t=>({path:"padding.bottom",value:t})),t.setNormalizer("padding-left",t=>({path:"padding.left",value:t})),t.setReducer("padding",Tl("padding")),t.setStyleRelation("padding",["padding-top","padding-right","padding-bottom","padding-left"])}function Wl(t,e=0,n={}){"object"!=typeof n&&(n={});const{leading:i=!0,trailing:o=!0}=n;return ti(t,e,{leading:i,trailing:o,maxWait:e})}Symbol("_treeDump");class ql{crashes=[];state="initializing";_crashNumberLimit;_now=Date.now;_minimumNonErrorTimePeriod;_boundErrorHandler;_listeners;constructor(t){if(this.crashes=[],this._crashNumberLimit="number"==typeof t.crashNumberLimit?t.crashNumberLimit:3,this._minimumNonErrorTimePeriod="number"==typeof t.minimumNonErrorTimePeriod?t.minimumNonErrorTimePeriod:5e3,this._boundErrorHandler=t=>{const e="error"in t?t.error:t.reason;e instanceof Error&&this._handleError(e,t)},this._listeners={},!this._restart)throw new Error("The Watchdog class was split into the abstract `Watchdog` class and the `EditorWatchdog` class. Please, use `EditorWatchdog` if you have used the `Watchdog` class previously.")}destroy(){this._stopErrorHandling(),this._listeners={}}on(t,e){this._listeners[t]||(this._listeners[t]=[]),this._listeners[t].push(e)}off(t,e){this._listeners[t]=this._listeners[t].filter(t=>t!==e)}_fire(t,...e){const n=this._listeners[t]||[];for(const t of n)t.apply(this,[null,...e])}_startErrorHandling(){window.addEventListener("error",this._boundErrorHandler),window.addEventListener("unhandledrejection",this._boundErrorHandler)}_stopErrorHandling(){window.removeEventListener("error",this._boundErrorHandler),window.removeEventListener("unhandledrejection",this._boundErrorHandler)}_handleError(t,e){if(this._shouldReactToError(t)){this.crashes.push({message:t.message,stack:t.stack,filename:e instanceof ErrorEvent?e.filename:void 0,lineno:e instanceof ErrorEvent?e.lineno:void 0,colno:e instanceof ErrorEvent?e.colno:void 0,date:this._now()});const n=this._shouldRestart();this.state="crashed",this._fire("stateChange"),this._fire("error",{error:t,causesRestart:n}),n?this._restart():(this.state="crashedPermanently",this._fire("stateChange"))}}_shouldReactToError(t){return t.is&&t.is("CKEditorError")&&void 0!==t.context&&null!==t.context&&"ready"===this.state&&this._isErrorComingFromThisItem(t)}_shouldRestart(){return this.crashes.length<=this._crashNumberLimit||(this.crashes[this.crashes.length-1].date-this.crashes[this.crashes.length-1-this._crashNumberLimit].date)/this._crashNumberLimit>this._minimumNonErrorTimePeriod}}function Kl(t,e=new Set){const n=[t],i=new Set;let o=0;for(;n.length>o;){const t=n[o++];if(!i.has(t)&&Gl(t)&&!e.has(t))if(i.add(t),Symbol.iterator in t)try{for(const e of t)n.push(e)}catch{}else for(const e in t)"defaultValue"!==e&&n.push(t[e])}return i}function Gl(t){const e=Object.prototype.toString.call(t),n=typeof t;return!("number"===n||"boolean"===n||"string"===n||"symbol"===n||"function"===n||"[object Date]"===e||"[object RegExp]"===e||"[object Module]"===e||null==t||t._watchdogExcluded||t instanceof EventTarget||t instanceof Event)}function Ql(t,e,n=new Set){if(t===e&&"object"==typeof(i=t)&&null!==i)return!0;var i;const o=Kl(t,n),r=Kl(e,n);for(const t of o)if(r.has(t))return!0;return!1}class Yl extends ql{_editor=null;_lifecyclePromise=null;_throttledSave;_data;_lastDocumentVersion;_elementOrData;_initUsingData=!0;_editables={};_config;_excludedProps;constructor(t,e={}){super(e),this._throttledSave=Wl(this._save.bind(this),"number"==typeof e.saveInterval?e.saveInterval:5e3),t&&(this._creator=(e,n)=>t.create(e,n)),this._destructor=t=>t.destroy()}get editor(){return this._editor}get _item(){return this._editor}setCreator(t){this._creator=t}setDestructor(t){this._destructor=t}_restart(){return Promise.resolve().then(()=>(this.state="initializing",this._fire("stateChange"),this._destroy())).catch(t=>{console.error("An error happened during the editor destroying.",t)}).then(()=>{const t={},e=[],n=this._config.rootsAttributes||{},i={};for(const[o,r]of Object.entries(this._data.roots))r.isLoaded?(t[o]="",i[o]=n[o]||{}):e.push(o);const o={...this._config,extraPlugins:this._config.extraPlugins||[],lazyRoots:e,rootsAttributes:i,_watchdogInitialData:this._data};return delete o.initialData,o.extraPlugins.push(Jl),this._initUsingData?this.create(t,o,o.context):it(this._elementOrData)?this.create(this._elementOrData,o,o.context):this.create(this._editables,o,o.context)}).then(()=>{this._fire("restart")})}create(t=this._elementOrData,e=this._config,n){return this._lifecyclePromise=Promise.resolve(this._lifecyclePromise).then(()=>(super._startErrorHandling(),this._elementOrData=t,this._initUsingData="string"==typeof t||Object.keys(t).length>0&&"string"==typeof Object.values(t)[0],this._config=this._cloneEditorConfiguration(e)||{},this._config.context=n,this._creator(t,this._config))).then(t=>{this._editor=t,t.model.document.on("change:data",this._throttledSave),this._lastDocumentVersion=t.model.document.version,this._data=this._getData(),this._initUsingData||(this._editables=this._getEditables()),this.state="ready",this._fire("stateChange")}).finally(()=>{this._lifecyclePromise=null}),this._lifecyclePromise}destroy(){return this._lifecyclePromise=Promise.resolve(this._lifecyclePromise).then(()=>(this.state="destroyed",this._fire("stateChange"),super.destroy(),this._destroy())).finally(()=>{this._lifecyclePromise=null}),this._lifecyclePromise}_destroy(){return Promise.resolve().then(()=>{this._stopErrorHandling(),this._throttledSave.cancel();const t=this._editor;return this._editor=null,t.model.document.off("change:data",this._throttledSave),this._destructor(t)})}_save(){const t=this._editor.model.document.version;try{this._data=this._getData(),this._initUsingData||(this._editables=this._getEditables()),this._lastDocumentVersion=t}catch(t){console.error(t,"An error happened during restoring editor data. Editor will be restored from the previously saved data.")}}_setExcludedProperties(t){this._excludedProps=t}_getData(){const t=this._editor,e=t.model.document.roots.filter(t=>t.isAttached()&&"$graveyard"!=t.rootName),{plugins:n}=t,i=n.has("CommentsRepository")&&n.get("CommentsRepository"),o=n.has("TrackChanges")&&n.get("TrackChanges"),r={roots:{},markers:{},commentThreads:JSON.stringify([]),suggestions:JSON.stringify([])};e.forEach(t=>{r.roots[t.rootName]={content:JSON.stringify(Array.from(t.getChildren())),attributes:JSON.stringify(Array.from(t.getAttributes())),isLoaded:t._isLoaded}});for(const e of t.model.markers)e._affectsData&&(r.markers[e.name]={rangeJSON:e.getRange().toJSON(),usingOperation:e._managedUsingOperations,affectsData:e._affectsData});return i&&(r.commentThreads=JSON.stringify(i.getCommentThreads({toJSON:!0,skipNotAttached:!0}))),o&&(r.suggestions=JSON.stringify(o.getSuggestions({toJSON:!0,skipNotAttached:!0}))),r}_getEditables(){const t={};for(const e of this.editor.model.document.getRootNames()){const n=this.editor.ui.getEditableElement(e);n&&(t[e]=n)}return t}_isErrorComingFromThisItem(t){return Ql(this._editor,t.context,this._excludedProps)}_cloneEditorConfiguration(t){return et(t,(t,e)=>it(t)||"context"===e?t:void 0)}}class Jl{editor;_data;constructor(t){this.editor=t,this._data=t.config.get("_watchdogInitialData")}init(){this.editor.data.on("init",t=>{t.stop(),this.editor.model.enqueueChange({isUndoable:!1},t=>{this._restoreCollaborationData(),this._restoreEditorData(t)}),this.editor.data.fire("ready")},{priority:999})}_createNode(t,e){if("name"in e){const n=t.createElement(e.name,e.attributes);if(e.children)for(const i of e.children)n._appendChild(this._createNode(t,i));return n}return t.createText(e.data,e.attributes)}_restoreEditorData(t){const e=this.editor;Object.entries(this._data.roots).forEach(([n,{content:i,attributes:o}])=>{const r=JSON.parse(i),s=JSON.parse(o),a=e.model.document.getRoot(n);for(const[e,n]of s)t.setAttribute(e,n,a);for(const e of r){const n=this._createNode(t,e);t.insert(n,a,"end")}}),Object.entries(this._data.markers).forEach(([n,i])=>{const{document:o}=e.model,{rangeJSON:{start:r,end:s},...a}=i,l=o.getRoot(r.root),c=t.createPositionFromPath(l,r.path,r.stickiness),d=t.createPositionFromPath(l,s.path,s.stickiness),u=t.createRange(c,d);t.addMarker(n,{range:u,...a})})}_restoreCollaborationData(){const t=JSON.parse(this._data.commentThreads),e=JSON.parse(this._data.suggestions);t.forEach(t=>{const e=this.editor.config.get("collaboration.channelId"),n=this.editor.plugins.get("CommentsRepository");n.hasCommentThread(t.threadId)&&n.getCommentThread(t.threadId).remove(),n.addCommentThread({channelId:e,...t})}),e.forEach(t=>{const e=this.editor.plugins.get("TrackChangesEditing");e.hasSuggestion(t.id)?e.getSuggestion(t.id).attributes=t.attributes:e.addSuggestionData(t)})}}const Zl=Symbol("MainQueueId");class Xl extends ql{_watchdogs=new Map;_watchdogConfig;_context=null;_contextProps=new Set;_actionQueues=new tc;_contextConfig;_item;constructor(t,e={}){super(e),this._watchdogConfig=e,this._creator=e=>t.create(e),this._destructor=t=>t.destroy(),this._actionQueues.onEmpty(()=>{"initializing"===this.state&&(this.state="ready",this._fire("stateChange"))})}setCreator(t){this._creator=t}setDestructor(t){this._destructor=t}get context(){return this._context}create(t={}){return this._actionQueues.enqueue(Zl,()=>(this._contextConfig=t,this._create()))}getItem(t){return this._getWatchdog(t)._item}getItemState(t){return this._getWatchdog(t).state}add(t){const e=ec(t);return Promise.all(e.map(t=>this._actionQueues.enqueue(t.id,()=>{if("destroyed"===this.state)throw new Error("Cannot add items to destroyed watchdog.");if(!this._context)throw new Error("Context was not created yet. You should call the `ContextWatchdog#create()` method first.");let e;if(this._watchdogs.has(t.id))throw new Error(`Item with the given id is already added: '${t.id}'.`);if("editor"===t.type)return e=new Yl(null,this._watchdogConfig),e.setCreator(t.creator),e._setExcludedProperties(this._contextProps),t.destructor&&e.setDestructor(t.destructor),this._watchdogs.set(t.id,e),e.on("error",(n,{error:i,causesRestart:o})=>{this._fire("itemError",{itemId:t.id,error:i}),o&&this._actionQueues.enqueue(t.id,()=>new Promise(n=>{const i=()=>{e.off("restart",i),this._fire("itemRestart",{itemId:t.id}),n()};e.on("restart",i)}))}),e.create(t.sourceElementOrData,t.config,this._context);throw new Error(`Not supported item type: '${t.type}'.`)})))}remove(t){const e=ec(t);return Promise.all(e.map(t=>this._actionQueues.enqueue(t,()=>{const e=this._getWatchdog(t);return this._watchdogs.delete(t),e.destroy()})))}destroy(){return this._actionQueues.enqueue(Zl,()=>(this.state="destroyed",this._fire("stateChange"),super.destroy(),this._destroy()))}_restart(){return this._actionQueues.enqueue(Zl,()=>(this.state="initializing",this._fire("stateChange"),this._destroy().catch(t=>{console.error("An error happened during destroying the context or items.",t)}).then(()=>this._create()).then(()=>this._fire("restart"))))}_create(){return Promise.resolve().then(()=>(this._startErrorHandling(),this._creator(this._contextConfig))).then(t=>(this._context=t,this._contextProps=Kl(this._context),Promise.all(Array.from(this._watchdogs.values()).map(t=>(t._setExcludedProperties(this._contextProps),t.create(void 0,void 0,this._context))))))}_destroy(){return Promise.resolve().then(()=>{this._stopErrorHandling();const t=this._context;return this._context=null,this._contextProps=new Set,Promise.all(Array.from(this._watchdogs.values()).map(t=>t.destroy())).then(()=>this._destructor(t))})}_getWatchdog(t){const e=this._watchdogs.get(t);if(!e)throw new Error(`Item with the given id was not registered: ${t}.`);return e}_isErrorComingFromThisItem(t){for(const e of this._watchdogs.values())if(e._isErrorComingFromThisItem(t))return!1;return Ql(this._context,t.context)}}class tc{_onEmptyCallbacks=[];_queues=new Map;_activeActions=0;onEmpty(t){this._onEmptyCallbacks.push(t)}enqueue(t,e){const n=t===Zl;this._activeActions++,this._queues.get(t)||this._queues.set(t,Promise.resolve());const i=(n?Promise.all(this._queues.values()):Promise.all([this._queues.get(Zl),this._queues.get(t)])).then(e),o=i.catch(()=>{});return this._queues.set(t,o),i.finally(()=>{this._activeActions--,this._queues.get(t)===o&&0===this._activeActions&&this._onEmptyCallbacks.forEach(t=>t())})}}function ec(t){return Array.isArray(t)?t:[t]}class nc extends(ie()){editor;_disableStack=new Set;constructor(t){super(),this.editor=t,this.set("isEnabled",!0)}forceDisabled(t){this._disableStack.add(t),1==this._disableStack.size&&(this.on("set:isEnabled",ic,{priority:"highest"}),this.isEnabled=!1)}clearForceDisabled(t){this._disableStack.delete(t),0==this._disableStack.size&&(this.off("set:isEnabled",ic),this.isEnabled=!0)}destroy(){this.stopListening()}static get isContextPlugin(){return!1}static get isOfficialPlugin(){return!1}static get isPremiumPlugin(){return!1}}function ic(t){t.return=!1,t.stop()}class oc extends(ie()){editor;_isEnabledBasedOnSelection;_affectsData;_disableStack;constructor(t){super(),this.editor=t,this.set("value",void 0),this.set("isEnabled",!1),this._affectsData=!0,this._isEnabledBasedOnSelection=!0,this._disableStack=new Set,this.decorate("execute"),this.listenTo(this.editor.model.document,"change",()=>{this.refresh()}),this.listenTo(t,"change:isReadOnly",()=>{this.refresh()}),this.on("set:isEnabled",e=>{if(!this.affectsData)return;const n=t.model.document.selection,i=!("$graveyard"==n.getFirstPosition().root.rootName)&&t.model.canEditAt(n);(t.isReadOnly||this._isEnabledBasedOnSelection&&!i)&&(e.return=!1,e.stop())},{priority:"highest"}),this.on("execute",t=>{this.isEnabled||t.stop()},{priority:"high"})}get affectsData(){return this._affectsData}set affectsData(t){this._affectsData=t}refresh(){this.isEnabled=!0}forceDisabled(t){this._disableStack.add(t),1==this._disableStack.size&&(this.on("set:isEnabled",rc,{priority:"highest"}),this.isEnabled=!1)}clearForceDisabled(t){this._disableStack.delete(t),0==this._disableStack.size&&(this.off("set:isEnabled",rc),this.refresh())}execute(...t){}destroy(){this.stopListening()}}function rc(t){t.return=!1,t.stop()}class sc extends oc{_childCommandsDefinitions=[];refresh(){}execute(...t){const e=this._getFirstEnabledCommand();return!!e&&e.execute(t)}registerChildCommand(t,e={}){Lt(this._childCommandsDefinitions,{command:t,priority:e.priority||"normal"}),t.on("change:isEnabled",()=>this._checkEnabled()),this._checkEnabled()}_checkEnabled(){this.isEnabled=!!this._getFirstEnabledCommand()}_getFirstEnabledCommand(){const t=this._childCommandsDefinitions.find(({command:t})=>t.isEnabled);return t&&t.command}}class ac{_commands;constructor(){this._commands=new Map}add(t,e){this._commands.set(t,e)}get(t){return this._commands.get(t)}execute(t,...e){const n=this.get(t);if(!n)throw new Vt("commandcollection-command-not-found",this,{commandName:t});return n.execute(...e)}*names(){yield*this._commands.keys()}*commands(){yield*this._commands.values()}[Symbol.iterator](){return this._commands[Symbol.iterator]()}destroy(){for(const t of this.commands())t.destroy()}}class lc extends(Ut()){_context;_plugins=new Map;_availablePlugins;_contextPlugins;constructor(t,e=[],n=[]){super(),this._context=t,this._availablePlugins=new Map;for(const t of e)t.pluginName&&this._availablePlugins.set(t.pluginName,t);this._contextPlugins=new Map;for(const[t,e]of n)this._contextPlugins.set(t,e),this._contextPlugins.set(e,t),t.pluginName&&this._availablePlugins.set(t.pluginName,t)}*[Symbol.iterator](){for(const t of this._plugins)"function"==typeof t[0]&&(yield t)}get(t){const e=this._plugins.get(t);if(!e){let e=t;throw"function"==typeof t&&(e=t.pluginName||t.name),new Vt("plugincollection-plugin-not-loaded",this._context,{plugin:e})}return e}has(t){return this._plugins.has(t)}init(t,e=[],n=[]){const i=this,o=this._context;!function t(e,n=new Set){e.forEach(e=>{a(e)&&(n.has(e)||(n.add(e),e.pluginName&&!i._availablePlugins.has(e.pluginName)&&i._availablePlugins.set(e.pluginName,e),e.requires&&t(e.requires,n)))})}(t),u(t);const r=[...function t(e,n=new Set){return e.map(t=>a(t)?t:i._availablePlugins.get(t)).reduce((e,i)=>n.has(i)?e:(n.add(i),i.requires&&(u(i.requires,i),t(i.requires,n).forEach(t=>e.add(t))),e.add(i)),new Set)}(t.filter(t=>!c(t,e)))];!function(t,e){for(const n of e){if("function"!=typeof n)throw new Vt("plugincollection-replace-plugin-invalid-type",null,{pluginItem:n});const e=n.pluginName;if(!e)throw new Vt("plugincollection-replace-plugin-missing-name",null,{pluginItem:n});if(n.requires&&n.requires.length)throw new Vt("plugincollection-plugin-for-replacing-cannot-have-dependencies",null,{pluginName:e});const o=i._availablePlugins.get(e);if(!o)throw new Vt("plugincollection-plugin-for-replacing-not-exist",null,{pluginName:e});const r=t.indexOf(o);if(-1===r){if(i._contextPlugins.has(o))return;throw new Vt("plugincollection-plugin-for-replacing-not-loaded",null,{pluginName:e})}if(o.requires&&o.requires.length)throw new Vt("plugincollection-replaced-plugin-cannot-have-dependencies",null,{pluginName:e});t.splice(r,1,n),i._availablePlugins.set(e,n)}}(r,n);const s=function(t){return t.map(t=>{let e=i._contextPlugins.get(t);return e=e||new t(o),i._add(t,e),e})}(r);return h(s,"init").then(()=>h(s,"afterInit")).then(()=>s);function a(t){return"function"==typeof t}function l(t){return a(t)&&!!t.isContextPlugin}function c(t,e){return e.some(e=>e===t||d(t)===e||d(e)===t)}function d(t){return a(t)?t.pluginName||t.name:t}function u(t,n=null){t.map(t=>a(t)?t:i._availablePlugins.get(t)||t).forEach(t=>{!function(t,e){if(!a(t)){if(e)throw new Vt("plugincollection-soft-required",o,{missingPlugin:t,requiredBy:d(e)});throw new Vt("plugincollection-plugin-not-found",o,{plugin:t})}}(t,n),function(t,e){if(l(e)&&!l(t))throw new Vt("plugincollection-context-required",o,{plugin:d(t),requiredBy:d(e)})}(t,n),function(t,n){if(n&&c(t,e))throw new Vt("plugincollection-required",o,{plugin:d(t),requiredBy:d(n)})}(t,n)})}function h(t,e){return t.reduce((t,n)=>n[e]?i._contextPlugins.has(n)?t:t.then(n[e].bind(n)):t,Promise.resolve())}}destroy(){const t=[];for(const[,e]of this)"function"!=typeof e.destroy||this._contextPlugins.has(e)||t.push(e.destroy());return Promise.all(t)}_add(t,e){this._plugins.set(t,e);const n=t.pluginName;if(n){if(this._plugins.has(n))throw new Vt("plugincollection-plugin-name-conflict",null,{pluginName:n,plugin1:this._plugins.get(n).constructor,plugin2:t});this._plugins.set(n,e)}}}class cc{config;plugins;locale;t;editors;static defaultConfig;static builtinPlugins;_contextOwner=null;constructor(t){const{translations:e,...n}=t||{};this.config=new me(n,this.constructor.defaultConfig);const i=this.constructor.builtinPlugins;this.config.define("plugins",i),this.plugins=new lc(this,i);const o=this.config.get("language")||{};this.locale=new bn({uiLanguage:"string"==typeof o?o:o.ui,contentLanguage:this.config.get("language.content"),translations:e}),this.t=this.locale.t,this.editors=new kn}initPlugins(){const t=this.config.get("plugins")||[],e=this.config.get("substitutePlugins")||[];for(const n of t.concat(e)){if("function"!=typeof n)throw new Vt("context-initplugins-constructor-only",null,{Plugin:n});if(!0!==n.isContextPlugin)throw new Vt("context-initplugins-invalid-plugin",null,{Plugin:n})}return this.plugins.init(t,[],e)}destroy(){return Promise.all(Array.from(this.editors,t=>t.destroy())).then(()=>this.plugins.destroy())}_addEditor(t,e){if(this._contextOwner)throw new Vt("context-addeditor-private-context");this.editors.add(t),e&&(this._contextOwner=t)}_removeEditor(t){return this.editors.has(t)&&this.editors.remove(t),this._contextOwner===t?this.destroy():Promise.resolve()}_getEditorConfig(){const t={};for(const e of this.config.names())["plugins","removePlugins","extraPlugins"].includes(e)||(t[e]=this.config.get(e));return t}static create(t){return new Promise(e=>{const n=new this(t);e(n.initPlugins().then(()=>n))})}}class dc extends(ie()){context;constructor(t){super(),this.context=t}destroy(){this.stopListening()}static get isContextPlugin(){return!0}static get isOfficialPlugin(){return!1}static get isPremiumPlugin(){return!1}}class uc extends xn{editor;constructor(t){super(),this.editor=t}set(t,e,n={}){if("string"==typeof e){const t=e;e=(e,n)=>{this.editor.execute(t),n()}}super.set(t,e,n)}}const hc="contentEditing",gc="common";class mc{keystrokeInfos=new Map;_editor;constructor(t){this._editor=t;const e=t.config.get("menuBar.isVisible"),n=t.locale.t;this.addKeystrokeInfoCategory({id:hc,label:n("Content editing keystrokes"),description:n("These keyboard shortcuts allow for quick access to content editing features.")});const i=[{label:n("Close contextual balloons, dropdowns, and dialogs"),keystroke:"Esc"},{label:n("Open the accessibility help dialog"),keystroke:"Alt+0"},{label:n("Move focus between form fields (inputs, buttons, etc.)"),keystroke:[["Tab"],["Shift+Tab"]]},{label:n("Move focus to the toolbar, navigate between toolbars"),keystroke:"Alt+F10",mayRequireFn:!0},{label:n("Navigate through the toolbar or menu bar"),keystroke:[["arrowup"],["arrowright"],["arrowdown"],["arrowleft"]]},{label:n("Execute the currently focused button. Executing buttons that interact with the editor content moves the focus back to the content."),keystroke:[["Enter"],["Space"]]}];e&&i.push({label:n("Move focus to the menu bar, navigate between menu bars"),keystroke:"Alt+F9",mayRequireFn:!0}),this.addKeystrokeInfoCategory({id:"navigation",label:n("User interface and content navigation keystrokes"),description:n("Use the following keystrokes for more efficient navigation in the CKEditor 5 user interface."),groups:[{id:"common",keystrokes:i}]})}addKeystrokeInfoCategory({id:t,label:e,description:n,groups:i}){this.keystrokeInfos.set(t,{id:t,label:e,description:n,groups:new Map}),this.addKeystrokeInfoGroup({categoryId:t,id:gc}),i&&i.forEach(e=>{this.addKeystrokeInfoGroup({categoryId:t,...e})})}addKeystrokeInfoGroup({categoryId:t=hc,id:e,label:n,keystrokes:i}){const o=this.keystrokeInfos.get(t);if(!o)throw new Vt("accessibility-unknown-keystroke-info-category",this._editor,{groupId:e,categoryId:t});o.groups.set(e,{id:e,label:n,keystrokes:i||[]})}addKeystrokeInfos({categoryId:t=hc,groupId:e=gc,keystrokes:n}){if(!this.keystrokeInfos.has(t))throw new Vt("accessibility-unknown-keystroke-info-category",this._editor,{categoryId:t,keystrokes:n});const i=this.keystrokeInfos.get(t);if(!i.groups.has(e))throw new Vt("accessibility-unknown-keystroke-info-group",this._editor,{groupId:e,categoryId:t,keystrokes:n});i.groups.get(e).keystrokes.push(...n)}}function pc(t){return Object.getPrototypeOf(t).constructor.editorName}function fc(t){if(!t)return;const e=Array.isArray(t)?{items:t}:t,n=function t(e){return e.flatMap(e=>"string"==typeof e?[e]:t(e.items))}(e.items||[]);return{isMultiline:n.includes("-"),shouldNotGroupWhenFull:!!e.shouldNotGroupWhenFull,items:(i=n,i.filter(t=>"|"!==t&&"-"!==t))};var i}function bc(){let t="unknown",e="unknown";return ft.isMac?t="mac":ft.isWindows?t="windows":ft.isiOS?t="ios":ft.isAndroid&&(t="android"),ft.isGecko?e="gecko":ft.isBlink?e="blink":ft.isSafari&&(e="safari"),{os:t,browser:e}}class kc extends(ie()){static get editorName(){return"Editor"}accessibility;commands;config;conversion;data;editing;locale;model;plugins;keystrokes;t;static defaultConfig;static builtinPlugins;_context;_readOnlyLocks;constructor(t={}){if(super(),"sanitizeHtml"in t)throw new Vt("editor-config-sanitizehtml-not-supported");const e=this.constructor,{translations:n,...i}=e.defaultConfig||{},{translations:o=n,...r}=t,s=t.language||i.language;this._context=t.context||new cc({language:s,translations:o}),this._context._addEditor(this,!t.context);const a=Array.from(e.builtinPlugins||[]);this.config=new me(r,i),this.config.define("plugins",a),this.config.define(this._context._getEditorConfig()),function(t){let e=t.get("licenseKey");if(!e&&window.CKEDITOR_GLOBAL_LICENSE_KEY&&(e=window.CKEDITOR_GLOBAL_LICENSE_KEY,t.set("licenseKey",e)),!e)throw new Vt("license-key-missing")}(this.config),this.plugins=new lc(this,a,this._context.plugins),this.locale=this._context.locale,this.t=this.locale.t,this._readOnlyLocks=new Set,this.commands=new ac,this.set("state","initializing"),this.once("ready",()=>this.state="ready",{priority:"high"}),this.once("destroy",()=>this.state="destroyed",{priority:"high"}),this.model=new Xa,this.on("change:isReadOnly",()=>{this.model.document.isReadOnly=this.isReadOnly});const l=new Ai;this.data=new Ns(this.model,l),this.editing=new gs(this.model,l),this.editing.view.document.bind("isReadOnly").to(this),this.conversion=new Ls([this.editing.downcastDispatcher,this.data.downcastDispatcher],this.data.upcastDispatcher),this.conversion.addAlias("dataDowncast",this.data.downcastDispatcher),this.conversion.addAlias("editingDowncast",this.editing.downcastDispatcher),this.keystrokes=new uc(this),this.keystrokes.listenTo(this.editing.view.document),this.accessibility=new mc(this),function(t){const e=t.config.get("licenseKey"),n=window[Symbol.for("cke distribution")]||"sh";function i(e){t.enableReadOnlyMode(Symbol("invalidLicense")),t._showLicenseError(e)}if("GPL"==e)return void("cloud"==n&&i("distributionChannel"));const o=function(t){const e=t.split(".");return 3!=e.length?null:e[1]}(e);if(!o)return void i("invalid");const r=Tn(o);if(!r)return void i("invalid");if(!function(t){return["exp","jti","vc"].every(e=>e in t)}(r))return void i("invalid");if(r.distributionChannel&&!fn(r.distributionChannel).includes(n))return void i("distributionChannel");if(function(t){const e=Array.isArray(t)?t:[t],n=function(){const t=[];for(let e=0;e<256;e++){let n=e;for(let t=0;t<8;t++)1&n?n=3988292384^n>>>1:n>>>=1;t[e]=n}return t}();let i=-1;const o=e.map(t=>Array.isArray(t)?t.join(""):String(t)).join("");for(let t=0;t<o.length;t++)i=i>>>8^n[255&(i^o.charCodeAt(t))];return i=(-1^i)>>>0,i.toString(16).padStart(8,"0")}(function(t){return Object.getOwnPropertyNames(t).sort().filter(e=>"vc"!=e&&null!=t[e]).map(e=>t[e])}(r))!=r.vc.toLowerCase())return void i("invalid");if(new Date(1e3*r.exp)<Dt)return void i("expired");const s=r.licensedHosts;if(s&&s.length>0&&!function(t){const{hostname:e}=new URL(window.location.href);if(t.includes(e))return!0;const n=e.split(".");return t.filter(t=>t.includes("*")).map(t=>t.split(".")).filter(t=>t.length<=n.length).map(t=>Array(n.length-t.length).fill("*"===t[0]?"*":"").concat(t)).some(t=>n.every((e,n)=>t[n]===e||"*"===t[n]))}(s))i("domainLimit");else if(["evaluation","trial"].includes(r.licenseType)&&1e3*r.exp<Date.now())i("expired");else{if(["development","evaluation","trial"].includes(r.licenseType)){const{licenseType:t}=r;window.CKEDITOR_WARNING_SUPPRESSIONS=window.CKEDITOR_WARNING_SUPPRESSIONS||{},window.CKEDITOR_WARNING_SUPPRESSIONS[t]||(function(t){const e=t[0].toUpperCase()+t.slice(1),n="evaluation"===t?"an":"a";console.info(`%cCKEditor 5 ${e} License`,"color: #ffffff; background: #743CCD; font-size: 14px; padding: 4px 8px; border-radius: 4px;"),console.warn(`⚠️ You are using ${n} ${t} license of CKEditor 5`+("trial"===t?" which is for evaluation purposes only":"")+". For production usage, please obtain a production license at https://portal.ckeditor.com/")}(t),window.CKEDITOR_WARNING_SUPPRESSIONS[t]=!0)}if(["evaluation","trial"].includes(r.licenseType)){const e=r.licenseType,n=setTimeout(()=>{i(`${e}Limit`)},6e5);t.on("destroy",()=>{clearTimeout(n)})}r.usageEndpoint&&t.once("ready",()=>{const n={requestId:Mt(),requestTime:Math.round(Date.now()/1e3),license:e,editor:wc(t)};t._sendUsageRequest(r.usageEndpoint,n).then(t=>{const{status:e,message:n}=t;n&&console.warn(n),"ok"!=e&&i("usageLimit")},()=>{var t,e;t="license-key-validation-endpoint-not-reachable",e={url:r.usageEndpoint},console.error(...Rt(t,e))})},{priority:"high"})}}(this)}get isReadOnly(){return this._readOnlyLocks.size>0}set isReadOnly(t){throw new Vt("editor-isreadonly-has-no-setter")}enableReadOnlyMode(t){if("string"!=typeof t&&"symbol"!=typeof t)throw new Vt("editor-read-only-lock-id-invalid",null,{lockId:t});this._readOnlyLocks.has(t)||(this._readOnlyLocks.add(t),1===this._readOnlyLocks.size&&this.fire("change:isReadOnly","isReadOnly",!0,!1))}disableReadOnlyMode(t){if("string"!=typeof t&&"symbol"!=typeof t)throw new Vt("editor-read-only-lock-id-invalid",null,{lockId:t});this._readOnlyLocks.has(t)&&(this._readOnlyLocks.delete(t),0===this._readOnlyLocks.size&&this.fire("change:isReadOnly","isReadOnly",!1,!0))}setData(t){this.data.set(t)}getData(t){return this.data.get(t)}initPlugins(){const t=this.config,e=t.get("plugins"),n=t.get("removePlugins")||[],i=t.get("extraPlugins")||[],o=t.get("substitutePlugins")||[];return this.plugins.init(e.concat(i),n,o)}destroy(){let t=Promise.resolve();return"initializing"==this.state&&(t=new Promise(t=>this.once("ready",t))),t.then(()=>{this.fire("destroy"),this.stopListening(),this.commands.destroy()}).then(()=>this.plugins.destroy()).then(()=>{this.model.destroy(),this.data.destroy(),this.editing.destroy(),this.keystrokes.destroy()}).then(()=>this._context._removeEditor(this))}execute(t,...e){try{return this.commands.execute(t,...e)}catch(t){Vt.rethrowUnexpectedError(t,this)}}focus(){this.editing.view.focus()}static create(...t){throw new Error("This is an abstract method.")}static Context=cc;static EditorWatchdog=Yl;static ContextWatchdog=Xl;_showLicenseError(t,e){setTimeout(()=>{if("invalid"==t)throw new Vt("invalid-license-key");if("expired"==t)throw new Vt("license-key-expired");if("domainLimit"==t)throw new Vt("license-key-domain-limit");if("featureNotAllowed"==t)throw new Vt("license-key-plugin-not-allowed",null,{pluginName:e});if("evaluationLimit"==t)throw new Vt("license-key-evaluation-limit");if("trialLimit"==t)throw new Vt("license-key-trial-limit");if("developmentLimit"==t)throw new Vt("license-key-development-limit");if("usageLimit"==t)throw new Vt("license-key-usage-limit");if("distributionChannel"==t)throw new Vt("license-key-invalid-distribution-channel")},0),this._showLicenseError=()=>{}}async _sendUsageRequest(t,e){const n=new Headers({"Content-Type":"application/json"}),i=await fetch(new URL(t),{method:"POST",headers:n,body:JSON.stringify(e)});if(!i.ok)throw new Error(`HTTP Response: ${i.status}`);return i.json()}}function wc(t){const e=function(t){return{sessionId:(localStorage.getItem("__ckeditor-session-id")||localStorage.setItem("__ckeditor-session-id",Mt()),localStorage.getItem("__ckeditor-session-id")),pageSessionId:(gt.window.CKEDITOR_PAGE_SESSION_ID=gt.window.CKEDITOR_PAGE_SESSION_ID||Mt(),gt.window.CKEDITOR_PAGE_SESSION_ID),hostname:window.location.hostname,version:globalThis.CKEDITOR_VERSION,type:pc(t),plugins:(e=t.plugins,Array.from(e).filter(([t])=>!!t.pluginName).map(([t])=>{const{pluginName:e,isContextPlugin:n,isOfficialPlugin:i,isPremiumPlugin:o}=t;return{isContext:!!n,isOfficial:!!i,isPremium:!!o,name:e}})),distribution:{channel:window[Symbol.for("cke distribution")]||"sh"},env:bc(),integration:Object.create(null),menuBar:{isVisible:!!t.config.get("menuBar.isVisible")},language:{ui:t.locale.uiLanguage,content:t.locale.contentLanguage},toolbar:{main:fc(t.config.get("toolbar")),block:fc(t.config.get("blockToolbar")),balloon:fc(t.config.get("balloonToolbar"))}};var e}(t);return t.fire("collectUsageData",{setUsageData:function(t,n){if(void 0!==Dn(e,t))throw new Vt("editor-usage-data-path-already-set",{path:t});qn(e,t,n)}}),e}function _c(t){return class extends t{sourceElement;updateSourceElement(t){if(!this.sourceElement)throw new Vt("editor-missing-sourceelement",this);const e=this.config.get("updateSourceElementOnDestroy"),n=this.sourceElement instanceof HTMLTextAreaElement;if(!e&&!n)return void Oe(this.sourceElement,"");const i="string"==typeof t?t:this.data.get();Oe(this.sourceElement,i)}}}class vc extends dc{_actions;static get pluginName(){return"PendingActions"}static get isOfficialPlugin(){return!0}init(){this.set("hasAny",!1),this._actions=new kn({idProperty:"_id"}),this._actions.delegate("add","remove").to(this)}add(t){if("string"!=typeof t)throw new Vt("pendingactions-add-invalid-message",this);const e=new(ie());return e.set("message",t),this._actions.add(e),this.hasAny=!0,e}remove(t){this._actions.remove(t),this.hasAny=!!this._actions.length}get first(){return this._actions.get(0)}[Symbol.iterator](){return this._actions[Symbol.iterator]()}}class yc extends(ie()){total;_reader;_data;constructor(){super();const t=new window.FileReader;this._reader=t,this._data=void 0,this.set("loaded",0),t.onprogress=t=>{this.loaded=t.loaded}}get error(){return this._reader.error}get data(){return this._data}read(t){const e=this._reader;return this.total=t.size,new Promise((n,i)=>{e.onload=()=>{const t=e.result;this._data=t,n(t)},e.onerror=()=>{i("error")},e.onabort=()=>{i("aborted")},this._reader.readAsDataURL(t)})}abort(){this._reader.abort()}}class Cc extends nc{loaders=new kn;_loadersMap=new Map;_pendingAction=null;static get pluginName(){return"FileRepository"}static get isOfficialPlugin(){return!0}static get requires(){return[vc]}init(){this.loaders.on("change",()=>this._updatePendingAction()),this.set("uploaded",0),this.set("uploadTotal",null),this.bind("uploadedPercent").to(this,"uploaded",this,"uploadTotal",(t,e)=>e?t/e*100:0)}getLoader(t){return this._loadersMap.get(t)||null}createLoader(t){if(!this.createUploadAdapter)return zt("filerepository-no-upload-adapter"),null;const e=new xc(Promise.resolve(t),this.createUploadAdapter);return this.loaders.add(e),this._loadersMap.set(t,e),t instanceof Promise&&e.file.then(t=>{this._loadersMap.set(t,e)}).catch(()=>{}),e.on("change:uploaded",()=>{let t=0;for(const e of this.loaders)t+=e.uploaded;this.uploaded=t}),e.on("change:uploadTotal",()=>{let t=0;for(const e of this.loaders)e.uploadTotal&&(t+=e.uploadTotal);this.uploadTotal=t}),e}destroyLoader(t){const e=t instanceof xc?t:this.getLoader(t);e._destroy(),this.loaders.remove(e),this._loadersMap.forEach((t,n)=>{t===e&&this._loadersMap.delete(n)})}_updatePendingAction(){const t=this.editor.plugins.get(vc);if(this.loaders.length){if(!this._pendingAction){const e=this.editor.t,n=t=>`${e("Upload in progress")} ${parseInt(t)}%.`;this._pendingAction=t.add(n(this.uploadedPercent)),this._pendingAction.bind("message").to(this,"uploadedPercent",n)}}else t.remove(this._pendingAction),this._pendingAction=null}}class xc extends(ie()){id;_filePromiseWrapper;_adapter;_reader;constructor(t,e){super(),this.id=Mt(),this._filePromiseWrapper=this._createFilePromiseWrapper(t),this._adapter=e(this),this._reader=new yc,this.set("status","idle"),this.set("uploaded",0),this.set("uploadTotal",null),this.bind("uploadedPercent").to(this,"uploaded",this,"uploadTotal",(t,e)=>e?t/e*100:0),this.set("uploadResponse",null)}get file(){return this._filePromiseWrapper?this._filePromiseWrapper.promise.then(t=>this._filePromiseWrapper?t:null):Promise.resolve(null)}get data(){return this._reader.data}read(){if("idle"!=this.status)throw new Vt("filerepository-read-wrong-status",this);return this.status="reading",this.file.then(t=>this._reader.read(t)).then(t=>{if("reading"!==this.status)throw this.status;return this.status="idle",t}).catch(t=>{if("aborted"===t)throw this.status="aborted","aborted";throw this.status="error",this._reader.error?this._reader.error:t})}upload(){if("idle"!=this.status)throw new Vt("filerepository-upload-wrong-status",this);return this.status="uploading",this.file.then(()=>this._adapter.upload()).then(t=>(this.uploadResponse=t,this.status="idle",t)).catch(t=>{if("aborted"===this.status)throw"aborted";throw this.status="error",t})}abort(){const t=this.status;this.status="aborted",this._filePromiseWrapper.isFulfilled?"reading"==t?this._reader.abort():"uploading"==t&&this._adapter.abort&&this._adapter.abort():(this._filePromiseWrapper.promise.catch(()=>{}),this._filePromiseWrapper.rejecter("aborted")),this._destroy()}_destroy(){this._filePromiseWrapper=void 0,this._reader=void 0,this._adapter=void 0,this.uploadResponse=void 0}_createFilePromiseWrapper(t){const e={};return e.promise=new Promise((n,i)=>{e.rejecter=i,e.isFulfilled=!1,t.then(t=>{e.isFulfilled=!0,n(t)}).catch(t=>{e.isFulfilled=!0,i(t)})}),e}}class Ac extends nc{static get requires(){return[Cc]}static get pluginName(){return"SimpleUploadAdapter"}static get isOfficialPlugin(){return!0}init(){const t=this.editor.config.get("simpleUpload");t&&(t.uploadUrl?this.editor.plugins.get(Cc).createUploadAdapter=e=>new Ec(e,t):zt("simple-upload-adapter-missing-uploadurl"))}}class Ec{loader;options;xhr;constructor(t,e){this.loader=t,this.options=e}upload(){return this.loader.file.then(t=>new Promise((e,n)=>{this._initRequest(),this._initListeners(e,n,t),this._sendRequest(t)}))}abort(){this.xhr&&this.xhr.abort()}_initRequest(){const t=this.xhr=new XMLHttpRequest;t.open("POST",this.options.uploadUrl,!0),t.responseType="json"}_initListeners(t,e,n){const i=this.xhr,o=this.loader,r=`Couldn't upload file: ${n.name}.`;i.addEventListener("error",()=>e(r)),i.addEventListener("abort",()=>e()),i.addEventListener("load",()=>{const n=i.response;if(!n||n.error)return e(n&&n.error&&n.error.message?n.error.message:r);const o=n.url?{default:n.url}:n.urls;t({...n,urls:o})}),i.upload&&i.upload.addEventListener("progress",t=>{t.lengthComputable&&(o.uploadTotal=t.total,o.uploaded=t.loaded)})}_sendRequest(t){let e=this.options.headers||{};"function"==typeof e&&(e=e(t));const n=this.options.withCredentials||!1;for(const t of Object.keys(e))this.xhr.setRequestHeader(t,e[t]);this.xhr.withCredentials=n;const i=new FormData;i.append("upload",t),this.xhr.send(i)}}function Sc(t){if(null==t)return"";if("string"==typeof t)return t;if(Array.isArray(t))return t.map(Sc).join(",");const e=String(t);return"0"===e&&Object.is(Number(t),-0)?"-0":e}var Tc='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M10 6.628a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3M8.5 9.125a.3.3 0 0 0-.253-.296L5.11 8.327a.75.75 0 1 1 .388-1.449l4.04.716c.267.072.624.08.893.009l4.066-.724a.75.75 0 1 1 .388 1.45l-3.132.5a.3.3 0 0 0-.253.296v1.357a.3.3 0 0 0 .018.102l1.615 4.438a.75.75 0 0 1-1.41.513l-1.35-3.71a.3.3 0 0 0-.281-.197h-.209a.3.3 0 0 0-.282.198l-1.35 3.711a.75.75 0 0 1-1.41-.513l1.64-4.509a.3.3 0 0 0 .019-.103z"/><path d="M10 18.5a8.5 8.5 0 1 1 0-17 8.5 8.5 0 0 1 0 17m0 1.5c5.523 0 10-4.477 10-10S15.523 0 10 0 0 4.477 0 10s4.477 10 10 10" clip-rule="evenodd"/></svg>',Ic='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M2 3.75c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75m0 8c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75m2.286 4c0 .414.336.75.75.75h9.928a.75.75 0 1 0 0-1.5H5.036a.75.75 0 0 0-.75.75m0-8c0 .414.336.75.75.75h9.928a.75.75 0 1 0 0-1.5H5.036a.75.75 0 0 0-.75.75"/></svg>',Pc='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M2 3.75c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75m0 8c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75m0 4c0 .414.336.75.75.75h9.929a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75m0-8c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75"/></svg>',Mc='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M2 3.75c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75m0 8c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75m0 4c0 .414.336.75.75.75h9.929a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75m0-8c0 .414.336.75.75.75h9.929a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75"/></svg>',Nc='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M18 3.75a.75.75 0 0 1-.75.75H2.75a.75.75 0 1 1 0-1.5h14.5a.75.75 0 0 1 .75.75m0 8a.75.75 0 0 1-.75.75H2.75a.75.75 0 1 1 0-1.5h14.5a.75.75 0 0 1 .75.75m0 4a.75.75 0 0 1-.75.75H7.321a.75.75 0 1 1 0-1.5h9.929a.75.75 0 0 1 .75.75m0-8a.75.75 0 0 1-.75.75H7.321a.75.75 0 1 1 0-1.5h9.929a.75.75 0 0 1 .75.75"/></svg>',Lc='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M10.187 17H5.773q-.956 0-1.364-.415-.41-.416-.409-1.323V4.738q0-.926.419-1.332.418-.405 1.354-.406h4.68q1.035 0 1.793.124.76.124 1.36.478.512.296.906.75a3.26 3.26 0 0 1 .808 2.162q0 2.102-2.167 3.075 2.846.879 2.847 3.421a3.76 3.76 0 0 1-2.296 3.504 6 6 0 0 1-1.517.377q-.857.11-2 .11zm-.217-6.217H7v4.087h3.069q2.965 0 2.965-2.072 0-1.061-.768-1.537-.768-.478-2.296-.478M7 5.13v3.619h2.606q1.093 0 1.69-.2a1.6 1.6 0 0 0 .91-.765q.247-.4.247-.897 0-1.06-.778-1.409-.778-.348-2.375-.348z"/></svg>',Vc='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M7 5.75c0 .414.336.75.75.75h9.5a.75.75 0 1 0 0-1.5h-9.5a.75.75 0 0 0-.75.75m-6 0C1 4.784 1.777 4 2.75 4c.966 0 1.75.777 1.75 1.75 0 .966-.777 1.75-1.75 1.75C1.784 7.5 1 6.723 1 5.75m6 9c0 .414.336.75.75.75h9.5a.75.75 0 1 0 0-1.5h-9.5a.75.75 0 0 0-.75.75m-6 0c0-.966.777-1.75 1.75-1.75.966 0 1.75.777 1.75 1.75 0 .966-.777 1.75-1.75 1.75-.966 0-1.75-.777-1.75-1.75"/></svg>',zc='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="m11.591 10.177 4.243 4.242a1 1 0 0 1-1.415 1.415l-4.242-4.243-4.243 4.243a1 1 0 0 1-1.414-1.415l4.243-4.242L4.52 5.934A1 1 0 0 1 5.934 4.52l4.243 4.243 4.242-4.243a1 1 0 1 1 1.415 1.414z"/></svg>',Oc='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M2 16h9a1 1 0 0 1 0 2H2a1 1 0 0 1 0-2"/><path fill-opacity=".6" d="M17 1a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V3a2 2 0 0 1 2-2zm0 1.5H3a.5.5 0 0 0-.492.41L2.5 3v9a.5.5 0 0 0 .41.492L3 12.5h14a.5.5 0 0 0 .492-.41L17.5 12V3a.5.5 0 0 0-.41-.492z"/></svg>',Rc='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M6.972 16.615a1 1 0 0 1-.744-.292l-4.596-4.596a1 1 0 1 1 1.414-1.414l3.926 3.926 9.937-9.937a1 1 0 0 1 1.414 1.415L7.717 16.323a1 1 0 0 1-.745.292"/></svg>',Dc='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M12.87 12.61a.75.75 0 0 1-.089.976l-.085.07-3.154 2.254 3.412 2.414a.75.75 0 0 1 .237.95l-.057.095a.75.75 0 0 1-.95.237l-.096-.058-4.272-3.022-.003-1.223 4.01-2.867a.75.75 0 0 1 1.047.174m2.795-.231.095.057 4.011 2.867-.003 1.223-4.272 3.022-.095.058a.75.75 0 0 1-.88-.151l-.07-.086-.058-.095a.75.75 0 0 1 .15-.88l.087-.07 3.412-2.414-3.154-2.253-.085-.071a.75.75 0 0 1 .862-1.207M16 0a2 2 0 0 1 2 2v9.354l-.663-.492-.837-.001V2a.5.5 0 0 0-.5-.5H2a.5.5 0 0 0-.5.5v15a.5.5 0 0 0 .5.5h3.118L7.156 19H2a2 2 0 0 1-2-2V2a2 2 0 0 1 2-2zM5.009 15l.003 1H3v-1zm2.188-2-1.471 1H5v-1zM10 11v.095L8.668 12H7v-1zm4-2v1H7V9zm0-2v1H7V7zm-4-2v1H5V5zM6 3v1H3V3z"/></svg>',Bc='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 10 10"><path d="M.941 4.523a.75.75 0 1 1 1.06-1.06l3.006 3.005 3.005-3.005a.75.75 0 1 1 1.06 1.06l-3.549 3.55a.75.75 0 0 1-1.168-.136z"/></svg>',Fc='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="m8.636 9.531-2.758 3.94a.5.5 0 0 0 .122.696l3.224 2.284h1.314l2.636-3.736L8.636 9.53zm.288 8.451L5.14 15.396a2 2 0 0 1-.491-2.786l6.673-9.53a2 2 0 0 1 2.785-.49l3.742 2.62a2 2 0 0 1 .491 2.785l-7.269 10.053z"/><path d="M4 18h5.523v-1H4zm-2 0h1v-1H2z"/></svg>',jc='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M11.03 3h6.149a.75.75 0 1 1 0 1.5h-5.514zm1.27 3h4.879a.75.75 0 1 1 0 1.5h-4.244zm1.27 3h3.609a.75.75 0 1 1 0 1.5h-2.973zm-2.754 2.5L8.038 4.785 5.261 11.5zm.62 1.5H4.641l-1.666 4.028H1.312l5.789-14h1.875l5.789 14h-1.663z"/></svg>',Hc='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M9.816 11.5 7.038 4.785 4.261 11.5zm.62 1.5H3.641l-1.666 4.028H.312l5.789-14h1.875l5.789 14h-1.663zm7.55 2.279.779-.779.707.707-2.265 2.265-2.193-2.265.707-.707.765.765V4.825q0-.063.002-.123l-.77.77-.707-.707L17.207 2.5l2.265 2.265-.707.707-.782-.782q.003.065.003.135z"/></svg>',Uc='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M2 3.75c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75m5 6c0 .414.336.75.75.75h9.5a.75.75 0 1 0 0-1.5h-9.5a.75.75 0 0 0-.75.75M2.75 16.5h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 1 0 0 1.5M1.632 6.95 5.02 9.358a.4.4 0 0 1-.013.661l-3.39 2.207A.4.4 0 0 1 1 11.892V7.275a.4.4 0 0 1 .632-.326z"/></svg>',$c='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="m11.077 15 .991-1.416a.75.75 0 1 1 1.229.86l-1.148 1.64a.8.8 0 0 1-.217.206 5.251 5.251 0 0 1-8.503-5.955.7.7 0 0 1 .12-.274l1.147-1.639a.75.75 0 1 1 1.228.86L4.933 10.7l.006.003a3.75 3.75 0 0 0 6.132 4.294zm5.494-5.335a.8.8 0 0 1-.12.274l-1.147 1.639a.75.75 0 1 1-1.228-.86l.86-1.23a3.75 3.75 0 0 0-6.144-4.301l-.86 1.229a.75.75 0 0 1-1.229-.86l1.148-1.64a.8.8 0 0 1 .217-.206 5.251 5.251 0 0 1 8.503 5.955m-4.563-2.532a.75.75 0 0 1 .184 1.045l-3.155 4.505a.75.75 0 1 1-1.229-.86l3.155-4.506a.75.75 0 0 1 1.045-.184"/></svg>',Wc='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M8.537 14.813a.888.888 0 1 1-1.254-1.255L10.84 10 7.283 6.442a.888.888 0 1 1 1.254-1.255L12.74 9.39a.888.888 0 0 1-.16 1.382z"/></svg>',qc='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M7 5.75c0 .414.336.75.75.75h9.5a.75.75 0 1 0 0-1.5h-9.5a.75.75 0 0 0-.75.75M3.5 3v5H2V3.7H1v-1h2.5zM.343 17.857l2.59-3.257H2.92a.6.6 0 1 0-1.04 0H.302a2 2 0 1 1 3.995 0h-.001q-.073.607-.333.988-.263.381-1.244 1.312H4.3v1h-4zM7 14.75a.75.75 0 0 1 .75-.75h9.5a.75.75 0 1 1 0 1.5h-9.5a.75.75 0 0 1-.75-.75"/></svg>',Kc='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M2 3h16v1.5H2zm0 12h16v1.5H2z" opacity=".5"/><path d="M15.003 7v5.5a1 1 0 0 1-1 1H5.996a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h8.007a1 1 0 0 1 1 1m-1.506.5H6.5V12h6.997z"/></svg>',Gc='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M2 3h16v1.5H2zm11.5 9H18v1.5h-4.5zm0-3H18v1.5h-4.5zm0-3H18v1.5h-4.5zM2 15h16v1.5H2z" opacity=".5"/><path d="M12.003 7v5.5a1 1 0 0 1-1 1H2.996a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h8.007a1 1 0 0 1 1 1m-1.506.5H3.5V12h6.997z"/></svg>',Qc='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M2 3h16v1.5H2zm0 12h16v1.5H2zm0-9h5v1.5H2zm0 3h5v1.5H2zm0 3h5v1.5H2z" opacity=".5"/><path d="M18.003 7v5.5a1 1 0 0 1-1 1H8.996a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h8.007a1 1 0 0 1 1 1m-1.506.5H9.5V12h6.997z"/></svg>',Yc='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M2 3h16v1.5H2zm11.5 9H18v1.5h-4.5zM2 15h16v1.5H2z" opacity=".5"/><path d="M12.003 7v5.5a1 1 0 0 1-1 1H2.996a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h8.007a1 1 0 0 1 1 1m-1.506.5H3.5V12h6.997z"/></svg>',Jc='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M2 3h16v1.5H2zm0 12h16v1.5H2z" opacity=".5"/><path d="M12.003 7v5.5a1 1 0 0 1-1 1H2.996a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h8.007a1 1 0 0 1 1 1m-1.506.5H3.5V12h6.997z"/></svg>',Zc='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M2 3h16v1.5H2zm0 12h16v1.5H2z" opacity=".5"/><path d="M18.003 7v5.5a1 1 0 0 1-1 1H8.996a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h8.007a1 1 0 0 1 1 1m-1.506.5H9.5V12h6.997z"/></svg>',Xc='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M2 3.75c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75m5 6c0 .414.336.75.75.75h9.5a.75.75 0 1 0 0-1.5h-9.5a.75.75 0 0 0-.75.75M2.75 16.5h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 1 0 0 1.5m1.618-9.55L.98 9.358a.4.4 0 0 0 .013.661l3.39 2.207A.4.4 0 0 0 5 11.892V7.275a.4.4 0 0 0-.632-.326z"/></svg>',td='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="m7.3 17.37-.061.088a1.52 1.52 0 0 1-.934.535l-4.178.663-.806-4.153a1.5 1.5 0 0 1 .187-1.058l.056-.086L8.77 2.639c.958-1.351 2.803-1.076 4.296-.03 1.497 1.047 2.387 2.693 1.433 4.055zM9.14 4.728l-5.545 8.346 3.277 2.294 5.544-8.346zM6.07 16.512l-3.276-2.295.53 2.73zM9.994 3.506 13.271 5.8c.316-.452-.16-1.333-1.065-1.966-.905-.634-1.895-.78-2.212-.328M8 18.5 9.375 17H19v1.5z"/></svg>',ed='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M11.463 5.187a.888.888 0 1 1 1.254 1.255L9.16 10l3.557 3.557a.888.888 0 1 1-1.254 1.255L7.26 10.61a.888.888 0 0 1 .16-1.382l4.043-4.042z"/></svg>',nd='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="m14.958 9.367-2.189 1.837a.75.75 0 0 0 .965 1.149l3.788-3.18a.75.75 0 0 0 .21-.284.75.75 0 0 0-.17-.945L13.77 4.762a.75.75 0 1 0-.964 1.15l2.331 1.955H6.22A.8.8 0 0 0 6 7.9a4 4 0 1 0 1.477 7.718l-.344-1.489A2.5 2.5 0 1 1 6.039 9.4l-.008-.032z"/></svg>',id='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M3 5.5v3h4v-3zm0 4v3h4v-3zm0 4v3h4v-3zm5 3h4v-3H8zm5 0h4v-3h-4zm4-4v-3h-4v3zm0-4v-3h-4v3zm1.5 8A1.5 1.5 0 0 1 17 18H3a1.5 1.5 0 0 1-1.5-1.5V3c.222-.863 1.068-1.5 2-1.5h13c.932 0 1.778.637 2 1.5zm-6.5-4v-3H8v3zm0-4v-3H8v3z"/></svg>',od='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><circle cx="9.5" cy="4.5" r="1.5"/><circle cx="9.5" cy="10.5" r="1.5"/><circle cx="9.5" cy="16.5" r="1.5"/></svg>',rd='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="m5.042 9.367 2.189 1.837a.75.75 0 0 1-.965 1.149l-3.788-3.18a.75.75 0 0 1-.21-.284.75.75 0 0 1 .17-.945L6.23 4.762a.75.75 0 1 1 .964 1.15L4.863 7.866h8.917A.8.8 0 0 1 14 7.9a4 4 0 1 1-1.477 7.718l.344-1.489a2.5 2.5 0 1 0 1.094-4.73l.008-.032z"/></svg>';const sd={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},ad=function(t){var e,n,i=[],o=1;if("number"==typeof t)return{space:"rgb",values:[t>>>16,(65280&t)>>>8,255&t],alpha:1};if("number"==typeof t)return{space:"rgb",values:[t>>>16,(65280&t)>>>8,255&t],alpha:1};if(t=String(t).toLowerCase(),sd[t])i=sd[t].slice(),n="rgb";else if("transparent"===t)o=0,n="rgb",i=[0,0,0];else if("#"===t[0]){var r=t.slice(1),s=r.length;o=1,s<=4?(i=[parseInt(r[0]+r[0],16),parseInt(r[1]+r[1],16),parseInt(r[2]+r[2],16)],4===s&&(o=parseInt(r[3]+r[3],16)/255)):(i=[parseInt(r[0]+r[1],16),parseInt(r[2]+r[3],16),parseInt(r[4]+r[5],16)],8===s&&(o=parseInt(r[6]+r[7],16)/255)),i[0]||(i[0]=0),i[1]||(i[1]=0),i[2]||(i[2]=0),n="rgb"}else if(e=/^((?:rgba?|hs[lvb]a?|hwba?|cmyk?|xy[zy]|gray|lab|lchu?v?|[ly]uv|lms|oklch|oklab|color))\s*\(([^\)]*)\)/.exec(t)){var a=e[1],l="cmyk"===(n=a.replace(/a$/,""))?4:"gray"===n?1:3;i=e[2].trim().split(/\s*[,\/]\s*|\s+/),"color"===n&&(n=i.shift()),o=(i=i.map(function(t,e){if("%"===t[t.length-1])return t=parseFloat(t)/100,3===e?t:"rgb"===n?255*t:"h"===n[0]?100*t:"l"!==n[0]||e?"lab"===n?125*t:"lch"===n?e<2?150*t:360*t:"o"!==n[0]||e?"oklab"===n?.4*t:"oklch"===n?e<2?.4*t:360*t:t:t:100*t;if("h"===n[e]||2===e&&"h"===n[n.length-1]){if(void 0!==ld[t])return ld[t];if(t.endsWith("deg"))return parseFloat(t);if(t.endsWith("turn"))return 360*parseFloat(t);if(t.endsWith("grad"))return 360*parseFloat(t)/400;if(t.endsWith("rad"))return 180*parseFloat(t)/Math.PI}return"none"===t?0:parseFloat(t)})).length>l?i.pop():1}else/[0-9](?:\s|\/|,)/.test(t)&&(i=t.match(/([0-9]+)/g).map(function(t){return parseFloat(t)}),n=t.match(/([a-z])/gi)?.join("")?.toLowerCase()||"rgb");return{space:n,values:i,alpha:o}};var ld={red:0,orange:60,yellow:120,green:180,blue:240,purple:300};const cd={};for(const t of Object.keys(sd))cd[sd[t]]=t;const dd={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},oklab:{channels:3,labels:["okl","oka","okb"]},lch:{channels:3,labels:"lch"},oklch:{channels:3,labels:["okl","okc","okh"]},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}},ud=dd,hd=(6/29)**3;function gd(t){const e=t>.0031308?1.055*t**(1/2.4)-.055:12.92*t;return Math.min(Math.max(0,e),1)}function md(t){return t>.04045?((t+.055)/1.055)**2.4:t/12.92}for(const t of Object.keys(dd)){if(!("channels"in dd[t]))throw new Error("missing channels property: "+t);if(!("labels"in dd[t]))throw new Error("missing channel labels property: "+t);if(dd[t].labels.length!==dd[t].channels)throw new Error("channel and label counts mismatch: "+t);const{channels:e,labels:n}=dd[t];delete dd[t].channels,delete dd[t].labels,Object.defineProperty(dd[t],"channels",{value:e}),Object.defineProperty(dd[t],"labels",{value:n})}function pd(t,e){return(t[0]-e[0])**2+(t[1]-e[1])**2+(t[2]-e[2])**2}function fd(t,e){return function(n){return e(t(n))}}function bd(t,e){const n=[e[t].parent,t];let i=ud[e[t].parent][t],o=e[t].parent;for(;e[o].parent;)n.unshift(e[o].parent),i=fd(ud[e[o].parent][o],i),o=e[o].parent;return i.conversion=n,i}dd.rgb.hsl=function(t){const e=t[0]/255,n=t[1]/255,i=t[2]/255,o=Math.min(e,n,i),r=Math.max(e,n,i),s=r-o;let a,l;switch(r){case o:a=0;break;case e:a=(n-i)/s;break;case n:a=2+(i-e)/s;break;case i:a=4+(e-n)/s}a=Math.min(60*a,360),a<0&&(a+=360);const c=(o+r)/2;return l=r===o?0:c<=.5?s/(r+o):s/(2-r-o),[a,100*l,100*c]},dd.rgb.hsv=function(t){let e,n,i,o,r;const s=t[0]/255,a=t[1]/255,l=t[2]/255,c=Math.max(s,a,l),d=c-Math.min(s,a,l),u=function(t){return(c-t)/6/d+.5};if(0===d)o=0,r=0;else{switch(r=d/c,e=u(s),n=u(a),i=u(l),c){case s:o=i-n;break;case a:o=1/3+e-i;break;case l:o=2/3+n-e}o<0?o+=1:o>1&&(o-=1)}return[360*o,100*r,100*c]},dd.rgb.hwb=function(t){const e=t[0],n=t[1];let i=t[2];const o=dd.rgb.hsl(t)[0],r=1/255*Math.min(e,Math.min(n,i));return i=1-1/255*Math.max(e,Math.max(n,i)),[o,100*r,100*i]},dd.rgb.oklab=function(t){const e=md(t[0]/255),n=md(t[1]/255),i=md(t[2]/255),o=Math.cbrt(.4122214708*e+.5363325363*n+.0514459929*i),r=Math.cbrt(.2119034982*e+.6806995451*n+.1073969566*i),s=Math.cbrt(.0883024619*e+.2817188376*n+.6299787005*i);return[100*(.2104542553*o+.793617785*r-.0040720468*s),100*(1.9779984951*o-2.428592205*r+.4505937099*s),100*(.0259040371*o+.7827717662*r-.808675766*s)]},dd.rgb.cmyk=function(t){const e=t[0]/255,n=t[1]/255,i=t[2]/255,o=Math.min(1-e,1-n,1-i);return[100*((1-e-o)/(1-o)||0),100*((1-n-o)/(1-o)||0),100*((1-i-o)/(1-o)||0),100*o]},dd.rgb.keyword=function(t){const e=cd[t];if(e)return e;let n,i=Number.POSITIVE_INFINITY;for(const e of Object.keys(sd)){const o=pd(t,sd[e]);o<i&&(i=o,n=e)}return n},dd.keyword.rgb=function(t){return sd[t]},dd.rgb.xyz=function(t){const e=md(t[0]/255),n=md(t[1]/255),i=md(t[2]/255);return[100*(.4124564*e+.3575761*n+.1804375*i),100*(.2126729*e+.7151522*n+.072175*i),100*(.0193339*e+.119192*n+.9503041*i)]},dd.rgb.lab=function(t){const e=dd.rgb.xyz(t);let n=e[0],i=e[1],o=e[2];return n/=95.047,i/=100,o/=108.883,n=n>hd?n**(1/3):7.787*n+16/116,i=i>hd?i**(1/3):7.787*i+16/116,o=o>hd?o**(1/3):7.787*o+16/116,[116*i-16,500*(n-i),200*(i-o)]},dd.hsl.rgb=function(t){const e=t[0]/360,n=t[1]/100,i=t[2]/100;let o,r;if(0===n)return r=255*i,[r,r,r];const s=i<.5?i*(1+n):i+n-i*n,a=2*i-s,l=[0,0,0];for(let t=0;t<3;t++)o=e+1/3*-(t-1),o<0&&o++,o>1&&o--,r=6*o<1?a+6*(s-a)*o:2*o<1?s:3*o<2?a+(s-a)*(2/3-o)*6:a,l[t]=255*r;return l},dd.hsl.hsv=function(t){const e=t[0];let n=t[1]/100,i=t[2]/100,o=n;const r=Math.max(i,.01);return i*=2,n*=i<=1?i:2-i,o*=r<=1?r:2-r,[e,100*(0===i?2*o/(r+o):2*n/(i+n)),(i+n)/2*100]},dd.hsv.rgb=function(t){const e=t[0]/60,n=t[1]/100;let i=t[2]/100;const o=Math.floor(e)%6,r=e-Math.floor(e),s=255*i*(1-n),a=255*i*(1-n*r),l=255*i*(1-n*(1-r));switch(i*=255,o){case 0:return[i,l,s];case 1:return[a,i,s];case 2:return[s,i,l];case 3:return[s,a,i];case 4:return[l,s,i];case 5:return[i,s,a]}},dd.hsv.hsl=function(t){const e=t[0],n=t[1]/100,i=t[2]/100,o=Math.max(i,.01);let r,s;s=(2-n)*i;const a=(2-n)*o;return r=n*o,r/=a<=1?a:2-a,r=r||0,s/=2,[e,100*r,100*s]},dd.hwb.rgb=function(t){const e=t[0]/360;let n=t[1]/100,i=t[2]/100;const o=n+i;let r;o>1&&(n/=o,i/=o);const s=Math.floor(6*e),a=1-i;r=6*e-s,1&s&&(r=1-r);const l=n+r*(a-n);let c,d,u;switch(s){default:case 6:case 0:c=a,d=l,u=n;break;case 1:c=l,d=a,u=n;break;case 2:c=n,d=a,u=l;break;case 3:c=n,d=l,u=a;break;case 4:c=l,d=n,u=a;break;case 5:c=a,d=n,u=l}return[255*c,255*d,255*u]},dd.cmyk.rgb=function(t){const e=t[0]/100,n=t[1]/100,i=t[2]/100,o=t[3]/100;return[255*(1-Math.min(1,e*(1-o)+o)),255*(1-Math.min(1,n*(1-o)+o)),255*(1-Math.min(1,i*(1-o)+o))]},dd.xyz.rgb=function(t){const e=t[0]/100,n=t[1]/100,i=t[2]/100;let o,r,s;return o=3.2404542*e+-1.5371385*n+-.4985314*i,r=-.969266*e+1.8760108*n+.041556*i,s=.0556434*e+-.2040259*n+1.0572252*i,o=gd(o),r=gd(r),s=gd(s),[255*o,255*r,255*s]},dd.xyz.lab=function(t){let e=t[0],n=t[1],i=t[2];return e/=95.047,n/=100,i/=108.883,e=e>hd?e**(1/3):7.787*e+16/116,n=n>hd?n**(1/3):7.787*n+16/116,i=i>hd?i**(1/3):7.787*i+16/116,[116*n-16,500*(e-n),200*(n-i)]},dd.xyz.oklab=function(t){const e=t[0]/100,n=t[1]/100,i=t[2]/100,o=Math.cbrt(.8189330101*e+.3618667424*n-.1288597137*i),r=Math.cbrt(.0329845436*e+.9293118715*n+.0361456387*i),s=Math.cbrt(.0482003018*e+.2643662691*n+.633851707*i);return[100*(.2104542553*o+.793617785*r-.0040720468*s),100*(1.9779984951*o-2.428592205*r+.4505937099*s),100*(.0259040371*o+.7827717662*r-.808675766*s)]},dd.oklab.oklch=function(t){return dd.lab.lch(t)},dd.oklab.xyz=function(t){const e=t[0]/100,n=t[1]/100,i=t[2]/100,o=(.999999998*e+.396337792*n+.215803758*i)**3,r=(1.000000008*e-.105561342*n-.063854175*i)**3,s=(1.000000055*e-.089484182*n-1.291485538*i)**3;return[100*(1.227013851*o-.55779998*r+.281256149*s),100*(-.040580178*o+1.11225687*r-.071676679*s),100*(-.076381285*o-.421481978*r+1.58616322*s)]},dd.oklab.rgb=function(t){const e=t[0]/100,n=t[1]/100,i=t[2]/100,o=(e+.3963377774*n+.2158037573*i)**3,r=(e-.1055613458*n-.0638541728*i)**3,s=(e-.0894841775*n-1.291485548*i)**3;return[255*gd(4.0767416621*o-3.3077115913*r+.2309699292*s),255*gd(-1.2684380046*o+2.6097574011*r-.3413193965*s),255*gd(-.0041960863*o-.7034186147*r+1.707614701*s)]},dd.oklch.oklab=function(t){return dd.lch.lab(t)},dd.lab.xyz=function(t){let e,n,i;n=(t[0]+16)/116,e=t[1]/500+n,i=n-t[2]/200;const o=n**3,r=e**3,s=i**3;return n=o>hd?o:(n-16/116)/7.787,e=r>hd?r:(e-16/116)/7.787,i=s>hd?s:(i-16/116)/7.787,e*=95.047,n*=100,i*=108.883,[e,n,i]},dd.lab.lch=function(t){const e=t[0],n=t[1],i=t[2];let o;return o=360*Math.atan2(i,n)/2/Math.PI,o<0&&(o+=360),[e,Math.sqrt(n*n+i*i),o]},dd.lch.lab=function(t){const e=t[0],n=t[1],i=t[2]/360*2*Math.PI;return[e,n*Math.cos(i),n*Math.sin(i)]},dd.rgb.ansi16=function(t,e=null){const[n,i,o]=t;let r=null===e?dd.rgb.hsv(t)[2]:e;if(r=Math.round(r/50),0===r)return 30;let s=30+(Math.round(o/255)<<2|Math.round(i/255)<<1|Math.round(n/255));return 2===r&&(s+=60),s},dd.hsv.ansi16=function(t){return dd.rgb.ansi16(dd.hsv.rgb(t),t[2])},dd.rgb.ansi256=function(t){const e=t[0],n=t[1],i=t[2];return e>>4==n>>4&&n>>4==i>>4?e<8?16:e>248?231:Math.round((e-8)/247*24)+232:16+36*Math.round(e/255*5)+6*Math.round(n/255*5)+Math.round(i/255*5)},dd.ansi16.rgb=function(t){let e=(t=t[0])%10;if(0===e||7===e)return t>50&&(e+=3.5),e=e/10.5*255,[e,e,e];const n=.5*(Math.trunc(t>50)+1);return[(1&e)*n*255,(e>>1&1)*n*255,(e>>2&1)*n*255]},dd.ansi256.rgb=function(t){if((t=t[0])>=232){const e=10*(t-232)+8;return[e,e,e]}let e;return t-=16,[Math.floor(t/36)/5*255,Math.floor((e=t%36)/6)/5*255,e%6/5*255]},dd.rgb.hex=function(t){const e=(((255&Math.round(t[0]))<<16)+((255&Math.round(t[1]))<<8)+(255&Math.round(t[2]))).toString(16).toUpperCase();return"000000".slice(e.length)+e},dd.hex.rgb=function(t){const e=t.toString(16).match(/[a-f\d]{6}|[a-f\d]{3}/i);if(!e)return[0,0,0];let n=e[0];3===e[0].length&&(n=[...n].map(t=>t+t).join(""));const i=Number.parseInt(n,16);return[i>>16&255,i>>8&255,255&i]},dd.rgb.hcg=function(t){const e=t[0]/255,n=t[1]/255,i=t[2]/255,o=Math.max(Math.max(e,n),i),r=Math.min(Math.min(e,n),i),s=o-r;let a;return a=s<=0?0:o===e?(n-i)/s%6:o===n?2+(i-e)/s:4+(e-n)/s,a/=6,a%=1,[360*a,100*s,100*(s<1?r/(1-s):0)]},dd.hsl.hcg=function(t){const e=t[1]/100,n=t[2]/100,i=n<.5?2*e*n:2*e*(1-n);let o=0;return i<1&&(o=(n-.5*i)/(1-i)),[t[0],100*i,100*o]},dd.hsv.hcg=function(t){const e=t[1]/100,n=t[2]/100,i=e*n;let o=0;return i<1&&(o=(n-i)/(1-i)),[t[0],100*i,100*o]},dd.hcg.rgb=function(t){const e=t[0]/360,n=t[1]/100,i=t[2]/100;if(0===n)return[255*i,255*i,255*i];const o=[0,0,0],r=e%1*6,s=r%1,a=1-s;let l=0;switch(Math.floor(r)){case 0:o[0]=1,o[1]=s,o[2]=0;break;case 1:o[0]=a,o[1]=1,o[2]=0;break;case 2:o[0]=0,o[1]=1,o[2]=s;break;case 3:o[0]=0,o[1]=a,o[2]=1;break;case 4:o[0]=s,o[1]=0,o[2]=1;break;default:o[0]=1,o[1]=0,o[2]=a}return l=(1-n)*i,[255*(n*o[0]+l),255*(n*o[1]+l),255*(n*o[2]+l)]},dd.hcg.hsv=function(t){const e=t[1]/100,n=e+t[2]/100*(1-e);let i=0;return n>0&&(i=e/n),[t[0],100*i,100*n]},dd.hcg.hsl=function(t){const e=t[1]/100,n=t[2]/100*(1-e)+.5*e;let i=0;return n>0&&n<.5?i=e/(2*n):n>=.5&&n<1&&(i=e/(2*(1-n))),[t[0],100*i,100*n]},dd.hcg.hwb=function(t){const e=t[1]/100,n=e+t[2]/100*(1-e);return[t[0],100*(n-e),100*(1-n)]},dd.hwb.hcg=function(t){const e=t[1]/100,n=1-t[2]/100,i=n-e;let o=0;return i<1&&(o=(n-i)/(1-i)),[t[0],100*i,100*o]},dd.apple.rgb=function(t){return[t[0]/65535*255,t[1]/65535*255,t[2]/65535*255]},dd.rgb.apple=function(t){return[t[0]/255*65535,t[1]/255*65535,t[2]/255*65535]},dd.gray.rgb=function(t){return[t[0]/100*255,t[0]/100*255,t[0]/100*255]},dd.gray.hsl=function(t){return[0,0,t[0]]},dd.gray.hsv=dd.gray.hsl,dd.gray.hwb=function(t){return[0,100,t[0]]},dd.gray.cmyk=function(t){return[0,0,0,t[0]]},dd.gray.lab=function(t){return[t[0],0,0]},dd.gray.hex=function(t){const e=255&Math.round(t[0]/100*255),n=((e<<16)+(e<<8)+e).toString(16).toUpperCase();return"000000".slice(n.length)+n},dd.rgb.gray=function(t){return[(t[0]+t[1]+t[2])/3/255*100]};const kd=function(t){const e=function(t){const e=function(){const t={},e=Object.keys(ud);for(let{length:n}=e,i=0;i<n;i++)t[e[i]]={distance:-1,parent:null};return t}(),n=[t];for(e[t].distance=0;n.length>0;){const t=n.pop(),i=Object.keys(ud[t]);for(let{length:o}=i,r=0;r<o;r++){const o=i[r],s=e[o];-1===s.distance&&(s.distance=e[t].distance+1,s.parent=t,n.unshift(o))}}return e}(t),n={},i=Object.keys(e);for(let{length:t}=i,o=0;o<t;o++){const t=i[o];null!==e[t].parent&&(n[t]=bd(t,e))}return n},wd={},_d=Object.keys(ud);function vd(t){const e=function(...e){const n=e[0];return null==n?n:(n.length>1&&(e=n),t(e))};return"conversion"in t&&(e.conversion=t.conversion),e}function yd(t){const e=function(...e){const n=e[0];if(null==n)return n;n.length>1&&(e=n);const i=t(e);if("object"==typeof i)for(let{length:t}=i,e=0;e<t;e++)i[e]=Math.round(i[e]);return i};return"conversion"in t&&(e.conversion=t.conversion),e}for(const t of _d){wd[t]={},Object.defineProperty(wd[t],"channels",{value:ud[t].channels}),Object.defineProperty(wd[t],"labels",{value:ud[t].labels});const e=kd(t),n=Object.keys(e);for(const i of n){const n=e[i];wd[t][i]=yd(n),wd[t][i].raw=vd(n)}}const Cd=wd,xd=(t,e=0,n=1)=>t>n?n:t<e?e:t,Ad=(t,e=0,n=Math.pow(10,e))=>Math.round(n*t)/n,Ed=(Math.PI,t=>("#"===t[0]&&(t=t.substring(1)),t.length<6?{r:parseInt(t[0]+t[0],16),g:parseInt(t[1]+t[1],16),b:parseInt(t[2]+t[2],16),a:4===t.length?Ad(parseInt(t[3]+t[3],16)/255,2):1}:{r:parseInt(t.substring(0,2),16),g:parseInt(t.substring(2,4),16),b:parseInt(t.substring(4,6),16),a:8===t.length?Ad(parseInt(t.substring(6,8),16)/255,2):1})),Sd=t=>{const{h:e,s:n,l:i}=(({h:t,s:e,v:n,a:i})=>{const o=(200-e)*n/100;return{h:Ad(t),s:Ad(o>0&&o<200?e*n/100/(o<=100?o:200-o)*100:0),l:Ad(o/2),a:Ad(i,2)}})(t);return`hsl(${e}, ${n}%, ${i}%)`},Td=t=>{const e=t.toString(16);return e.length<2?"0"+e:e},Id=(t,e)=>{if(t===e)return!0;for(const n in t)if(t[n]!==e[n])return!1;return!0},Pd={},Md=t=>{let e=Pd[t];return e||(e=document.createElement("template"),e.innerHTML=t,Pd[t]=e),e},Nd=(t,e,n)=>{t.dispatchEvent(new CustomEvent(e,{bubbles:!0,detail:n}))};let Ld=!1;const Vd=t=>"touches"in t,zd=(t,e)=>{const n=Vd(e)?e.touches[0]:e,i=t.el.getBoundingClientRect();Nd(t.el,"move",t.getMove({x:xd((n.pageX-(i.left+window.pageXOffset))/i.width),y:xd((n.pageY-(i.top+window.pageYOffset))/i.height)}))};class Od{constructor(t,e,n,i){const o=Md(`<div role="slider" tabindex="0" part="${e}" ${n}><div part="${e}-pointer"></div></div>`);t.appendChild(o.content.cloneNode(!0));const r=t.querySelector(`[part=${e}]`);r.addEventListener("mousedown",this),r.addEventListener("touchstart",this),r.addEventListener("keydown",this),this.el=r,this.xy=i,this.nodes=[r.firstChild,r]}set dragging(t){const e=t?document.addEventListener:document.removeEventListener;e(Ld?"touchmove":"mousemove",this),e(Ld?"touchend":"mouseup",this)}handleEvent(t){switch(t.type){case"mousedown":case"touchstart":if(t.preventDefault(),!(t=>!(Ld&&!Vd(t)||(Ld||(Ld=Vd(t)),0)))(t)||!Ld&&0!=t.button)return;this.el.focus(),zd(this,t),this.dragging=!0;break;case"mousemove":case"touchmove":t.preventDefault(),zd(this,t);break;case"mouseup":case"touchend":this.dragging=!1;break;case"keydown":((t,e)=>{const n=e.keyCode;n>40||t.xy&&n<37||n<33||(e.preventDefault(),Nd(t.el,"move",t.getMove({x:39===n?.01:37===n?-.01:34===n?.05:33===n?-.05:35===n?1:36===n?-1:0,y:40===n?.01:38===n?-.01:0},!0)))})(this,t)}}style(t){t.forEach((t,e)=>{for(const n in t)this.nodes[e].style.setProperty(n,t[n])})}}class Rd extends Od{constructor(t){super(t,"hue",'aria-label="Hue" aria-valuemin="0" aria-valuemax="360"',!1)}update({h:t}){this.h=t,this.style([{left:t/360*100+"%",color:Sd({h:t,s:100,v:100,a:1})}]),this.el.setAttribute("aria-valuenow",`${Ad(t)}`)}getMove(t,e){return{h:e?xd(this.h+360*t.x,0,360):360*t.x}}}class Dd extends Od{constructor(t){super(t,"saturation",'aria-label="Color"',!0)}update(t){this.hsva=t,this.style([{top:100-t.v+"%",left:`${t.s}%`,color:Sd(t)},{"background-color":Sd({h:t.h,s:100,v:100,a:1})}]),this.el.setAttribute("aria-valuetext",`Saturation ${Ad(t.s)}%, Brightness ${Ad(t.v)}%`)}getMove(t,e){return{s:e?xd(this.hsva.s+100*t.x,0,100):100*t.x,v:e?xd(this.hsva.v-100*t.y,0,100):Math.round(100-100*t.y)}}}const Bd=Symbol("same"),Fd=Symbol("color"),jd=Symbol("hsva"),Hd=Symbol("update"),Ud=Symbol("parts"),$d=Symbol("css"),Wd=Symbol("sliders");class qd extends HTMLElement{static get observedAttributes(){return["color"]}get[$d](){return[':host{display:flex;flex-direction:column;position:relative;width:200px;height:200px;user-select:none;-webkit-user-select:none;cursor:default}:host([hidden]){display:none!important}[role=slider]{position:relative;touch-action:none;user-select:none;-webkit-user-select:none;outline:0}[role=slider]:last-child{border-radius:0 0 8px 8px}[part$=pointer]{position:absolute;z-index:1;box-sizing:border-box;width:28px;height:28px;display:flex;place-content:center center;transform:translate(-50%,-50%);background-color:#fff;border:2px solid #fff;border-radius:50%;box-shadow:0 2px 4px rgba(0,0,0,.2)}[part$=pointer]::after{content:"";width:100%;height:100%;border-radius:inherit;background-color:currentColor}[role=slider]:focus [part$=pointer]{transform:translate(-50%,-50%) scale(1.1)}',"[part=hue]{flex:0 0 24px;background:linear-gradient(to right,red 0,#ff0 17%,#0f0 33%,#0ff 50%,#00f 67%,#f0f 83%,red 100%)}[part=hue-pointer]{top:50%;z-index:2}","[part=saturation]{flex-grow:1;border-color:transparent;border-bottom:12px solid #000;border-radius:8px 8px 0 0;background-image:linear-gradient(to top,#000,transparent),linear-gradient(to right,#fff,rgba(255,255,255,0));box-shadow:inset 0 0 0 1px rgba(0,0,0,.05)}[part=saturation-pointer]{z-index:3}"]}get[Wd](){return[Dd,Rd]}get color(){return this[Fd]}set color(t){if(!this[Bd](t)){const e=this.colorModel.toHsva(t);this[Hd](e),this[Fd]=t}}constructor(){super();const t=Md(`<style>${this[$d].join("")}</style>`),e=this.attachShadow({mode:"open"});e.appendChild(t.content.cloneNode(!0)),e.addEventListener("move",this),this[Ud]=this[Wd].map(t=>new t(e))}connectedCallback(){if(this.hasOwnProperty("color")){const t=this.color;delete this.color,this.color=t}else this.color||(this.color=this.colorModel.defaultColor)}attributeChangedCallback(t,e,n){const i=this.colorModel.fromAttr(n);this[Bd](i)||(this.color=i)}handleEvent(t){const e=this[jd],n={...e,...t.detail};let i;this[Hd](n),Id(n,e)||this[Bd](i=this.colorModel.fromHsva(n))||(this[Fd]=i,Nd(this,"color-changed",{value:i}))}[Bd](t){return this.color&&this.colorModel.equal(t,this.color)}[Hd](t){this[jd]=t,this[Ud].forEach(e=>e.update(t))}}const Kd={defaultColor:"#000",toHsva:t=>(({r:t,g:e,b:n,a:i})=>{const o=Math.max(t,e,n),r=o-Math.min(t,e,n),s=r?o===t?(e-n)/r:o===e?2+(n-t)/r:4+(t-e)/r:0;return{h:Ad(60*(s<0?s+6:s)),s:Ad(o?r/o*100:0),v:Ad(o/255*100),a:i}})(Ed(t)),fromHsva:({h:t,s:e,v:n})=>(({r:t,g:e,b:n,a:i})=>{const o=i<1?Td(Ad(255*i)):"";return"#"+Td(t)+Td(e)+Td(n)+o})((({h:t,s:e,v:n,a:i})=>{t=t/360*6,e/=100,n/=100;const o=Math.floor(t),r=n*(1-e),s=n*(1-(t-o)*e),a=n*(1-(1-t+o)*e),l=o%6;return{r:Ad(255*[n,s,r,r,a,n][l]),g:Ad(255*[a,n,n,s,r,r][l]),b:Ad(255*[r,r,a,n,n,s][l]),a:Ad(i,2)}})({h:t,s:e,v:n,a:1})),equal:(t,e)=>t.toLowerCase()===e.toLowerCase()||Id(Ed(t),Ed(e)),fromAttr:t=>t};class Gd extends qd{get colorModel(){return Kd}}class Qd extends kn{_parentElement;constructor(t=[]){super(t,{idProperty:"viewUid"}),this.on("add",(t,e,n)=>{this._renderViewIntoCollectionParent(e,n)}),this.on("remove",(t,e)=>{e.element&&this._parentElement&&e.element.remove()}),this._parentElement=null}destroy(){this.map(t=>t.destroy())}setParent(t){this._parentElement=t;for(const t of this)this._renderViewIntoCollectionParent(t)}delegate(...t){if(!t.length||!t.every(t=>"string"==typeof t))throw new Vt("ui-viewcollection-delegate-wrong-events",this);return{to:e=>{for(const n of this)for(const i of t)n.delegate(i).to(e);this.on("add",(n,i)=>{for(const n of t)i.delegate(n).to(e)}),this.on("remove",(n,i)=>{for(const n of t)i.stopDelegating(n,e)})}}}_renderViewIntoCollectionParent(t,e){t.isRendered||t.render(),t.element&&this._parentElement&&this._parentElement.insertBefore(t.element,this._parentElement.children[e])}remove(t){return super.remove(t)}}class Yd extends(Ut()){ns;tag;text;attributes;children;eventListeners;_isRendered;_revertData;constructor(t){super(),Object.assign(this,su(ru(t))),this._isRendered=!1,this._revertData=null}render(){const t=this._renderNode({intoFragment:!0});return this._isRendered=!0,t}apply(t){return this._revertData={children:[],bindings:[],attributes:{}},this._renderNode({node:t,intoFragment:!1,isApplying:!0,revertData:this._revertData}),t}revert(t){if(!this._revertData)throw new Vt("ui-template-revert-not-applied",[this,t]);this._revertTemplateFromNode(t,this._revertData)}*getViews(){yield*function*t(e){if(e.children)for(const n of e.children)hu(n)?yield n:gu(n)&&(yield*t(n))}(this)}static bind(t,e){return{to:(n,i)=>new Zd({eventNameOrFunction:n,attribute:n,observable:t,emitter:e,callback:i}),if:(n,i,o)=>new Xd({observable:t,emitter:e,attribute:n,valueIfTrue:i,callback:o})}}static extend(t,e){if(t._isRendered)throw new Vt("template-extend-render",[this,t]);du(t,su(ru(e)))}_renderNode(t){let e;if(e=t.node?this.tag&&this.text:this.tag?this.text:!this.text,e)throw new Vt("ui-template-wrong-syntax",this);return this.text?this._renderText(t):this._renderElement(t)}_renderElement(t){let e=t.node;return e||(e=t.node=document.createElementNS(this.ns||"http://www.w3.org/1999/xhtml",this.tag)),this._renderAttributes(t),this._renderElementChildren(t),this._setUpListeners(t),e}_renderText(t){let e=t.node;return e?t.revertData.text=e.textContent:e=t.node=document.createTextNode(""),tu(this.text)?this._bindToObservable({schema:this.text,updater:nu(e),data:t}):e.textContent=this.text.join(""),e}_renderAttributes(t){if(!this.attributes)return;const e=t.node,n=t.revertData;for(const i in this.attributes){const o=e.getAttribute(i),r=this.attributes[i];n&&(n.attributes[i]=o);const s=pu(r)?r[0].ns:null;if(tu(r)){const a=pu(r)?r[0].value:r;n&&bu(i)&&a.unshift(o),this._bindToObservable({schema:a,updater:iu(e,i,s),data:t})}else if("style"==i&&"string"!=typeof r[0])this._renderStyleAttribute(r[0],t);else{n&&o&&bu(i)&&r.unshift(o);const t=r.map(t=>t&&t.value||t).reduce((t,e)=>t.concat(e),[]).reduce(lu,"");uu(t)||e.setAttributeNS(s,i,t)}}}_renderStyleAttribute(t,e){const n=e.node;for(const i in t){const o=t[i];tu(o)?this._bindToObservable({schema:[o],updater:ou(n,i),data:e}):n.style[i]=o}}_renderElementChildren(t){const e=t.node,n=t.intoFragment?document.createDocumentFragment():e,i=t.isApplying;let o=0;for(const r of this.children)if(mu(r)){if(!i){r.setParent(e);for(const t of r)n.appendChild(t.element)}}else if(hu(r))i||(r.isRendered||r.render(),n.appendChild(r.element));else if(be(r))n.appendChild(r);else if(i){const e=t.revertData,i=fu();e.children.push(i),r._renderNode({intoFragment:!1,node:n.childNodes[o++],isApplying:!0,revertData:i})}else n.appendChild(r.render());t.intoFragment&&e.appendChild(n)}_setUpListeners(t){if(this.eventListeners)for(const e in this.eventListeners){const n=this.eventListeners[e].map(n=>{const[i,o]=e.split("@");return n.activateDomEventListener(i,o,t)});t.revertData&&t.revertData.bindings.push(n)}}_bindToObservable({schema:t,updater:e,data:n}){const i=n.revertData;eu(t,e,n);const o=t.filter(t=>!uu(t)).filter(t=>t.observable).map(i=>i.activateAttributeListener(t,e,n));i&&i.bindings.push(o)}_revertTemplateFromNode(t,e){for(const t of e.bindings)for(const e of t)e();if(e.text)return void(t.textContent=e.text);const n=t;for(const t in e.attributes){const i=e.attributes[t];null===i?n.removeAttribute(t):n.setAttribute(t,i)}for(let t=0;t<e.children.length;++t)this._revertTemplateFromNode(n.childNodes[t],e.children[t])}}class Jd{attribute;observable;emitter;callback;constructor(t){this.attribute=t.attribute,this.observable=t.observable,this.emitter=t.emitter,this.callback=t.callback}getValue(t){const e=this.observable[this.attribute];return this.callback?this.callback(e,t):e}activateAttributeListener(t,e,n){const i=()=>eu(t,e,n);return this.emitter.listenTo(this.observable,`change:${this.attribute}`,i),()=>{this.emitter.stopListening(this.observable,`change:${this.attribute}`,i)}}}class Zd extends Jd{eventNameOrFunction;constructor(t){super(t),this.eventNameOrFunction=t.eventNameOrFunction}activateDomEventListener(t,e,n){const i=(t,n)=>{e&&!n.target.matches(e)||("function"==typeof this.eventNameOrFunction?this.eventNameOrFunction(n):this.observable.fire(this.eventNameOrFunction,n))};return this.emitter.listenTo(n.node,t,i),()=>{this.emitter.stopListening(n.node,t,i)}}}class Xd extends Jd{valueIfTrue;constructor(t){super(t),this.valueIfTrue=t.valueIfTrue}getValue(t){return!uu(super.getValue(t))&&(this.valueIfTrue||!0)}}function tu(t){return!!t&&(t.value&&(t=t.value),Array.isArray(t)?t.some(tu):t instanceof Jd)}function eu(t,e,{node:n}){const i=function(t,e){return t.map(t=>t instanceof Jd?t.getValue(e):t)}(t,n);let o;o=1==t.length&&t[0]instanceof Xd?i[0]:i.reduce(lu,""),uu(o)?e.remove():e.set(o)}function nu(t){return{set(e){t.textContent=e},remove(){t.textContent=""}}}function iu(t,e,n){return{set(i){t.setAttributeNS(n,e,i)},remove(){t.removeAttributeNS(n,e)}}}function ou(t,e){return{set(n){t.style[e]=n},remove(){t.style[e]=null}}}function ru(t){return et(t,t=>{if(t&&(t instanceof Jd||gu(t)||hu(t)||mu(t)))return t})}function su(t){if("string"==typeof t?t=function(t){return{text:[t]}}(t):t.text&&function(t){t.text=fn(t.text)}(t),t.on&&(t.eventListeners=function(t){for(const e in t)au(t,e);return t}(t.on),delete t.on),!t.text){t.attributes&&function(t){for(const e in t)t[e].value&&(t[e].value=fn(t[e].value)),au(t,e)}(t.attributes);const e=[];if(t.children)if(mu(t.children))e.push(t.children);else for(const n of t.children)gu(n)||hu(n)||be(n)?e.push(n):e.push(new Yd(n));t.children=e}return t}function au(t,e){t[e]=fn(t[e])}function lu(t,e){return uu(e)?t:uu(t)?e:`${t} ${e}`}function cu(t,e){for(const n in e)t[n]?t[n].push(...e[n]):t[n]=e[n]}function du(t,e){if(e.attributes&&(t.attributes||(t.attributes={}),cu(t.attributes,e.attributes)),e.eventListeners&&(t.eventListeners||(t.eventListeners={}),cu(t.eventListeners,e.eventListeners)),e.text&&t.text.push(...e.text),e.children&&e.children.length){if(t.children.length!=e.children.length)throw new Vt("ui-template-extend-children-mismatch",t);let n=0;for(const i of e.children)du(t.children[n++],i)}}function uu(t){return!t&&0!==t}function hu(t){return t instanceof ku}function gu(t){return t instanceof Yd}function mu(t){return t instanceof Qd}function pu(t){return x(t[0])&&t[0].ns}function fu(){return{children:[],bindings:[],attributes:{}}}function bu(t){return"class"==t||"style"==t}class ku extends(_e(ie())){element;isRendered;locale;t;template;_viewCollections;_unboundChildren;_bindTemplate;constructor(t){super(),this.element=null,this.isRendered=!1,this.locale=t,this.t=t&&t.t,this._viewCollections=new kn,this._unboundChildren=this.createCollection(),this._viewCollections.on("add",(e,n)=>{n.locale=t,n.t=t&&t.t}),this.decorate("render")}get bindTemplate(){return this._bindTemplate?this._bindTemplate:this._bindTemplate=Yd.bind(this,this)}createCollection(t){const e=new Qd(t);return this._viewCollections.add(e),e}registerChild(t){he(t)||(t=[t]);for(const e of t)this._unboundChildren.add(e)}deregisterChild(t){he(t)||(t=[t]);for(const e of t)this._unboundChildren.remove(e)}setTemplate(t){this.template=new Yd(t)}extendTemplate(t){Yd.extend(this.template,t)}render(){if(this.isRendered)throw new Vt("ui-view-render-already-rendered",this);this.template&&(this.element=this.template.render(),this.registerChild(this.template.getViews())),this.isRendered=!0}destroy(){this.stopListening(),this._viewCollections.map(t=>t.destroy()),this.template&&this.template._revertData&&this.template.revert(this.element)}}const wu={POLITE:"polite",ASSERTIVE:"assertive"};class _u{editor;view;constructor(t){this.editor=t,t.once("ready",()=>{for(const t of Object.values(wu))this.announce("",t)})}announce(t,e=wu.POLITE){const n=this.editor;if(!n.ui.view)return;this.view||(this.view=new vu(n.locale),n.ui.view.body.add(this.view));const{politeness:i,isUnsafeHTML:o}="string"==typeof e?{politeness:e}:e;let r=this.view.regionViews.find(t=>t.politeness===i);r||(r=new yu(n,i),this.view.regionViews.add(r)),r.announce({announcement:t,isUnsafeHTML:o})}}class vu extends ku{regionViews;constructor(t){super(t),this.regionViews=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-aria-live-announcer"]},children:this.regionViews})}}class yu extends ku{politeness;_domConverter;_pruneAnnouncementsInterval;constructor(t,e){super(t.locale),this.setTemplate({tag:"div",attributes:{"aria-live":e,"aria-relevant":"additions"},children:[{tag:"ul",attributes:{class:["ck","ck-aria-live-region-list"]}}]}),t.on("destroy",()=>{null!==this._pruneAnnouncementsInterval&&(clearInterval(this._pruneAnnouncementsInterval),this._pruneAnnouncementsInterval=null)}),this.politeness=e,this._domConverter=t.data.htmlProcessor.domConverter,this._pruneAnnouncementsInterval=setInterval(()=>{this.element&&this._listElement.firstChild&&this._listElement.firstChild.remove()},5e3)}announce({announcement:t,isUnsafeHTML:e}){if(!t.trim().length)return;const n=document.createElement("li");e?this._domConverter.setContentOf(n,t):n.innerText=t,this._listElement.appendChild(n)}get _listElement(){return this.element.querySelector("ul")}}function Cu({emitter:t,activator:e,callback:n,contextElements:i,listenerOptions:o}){t.listenTo(document,"mousedown",(t,o)=>{if(!e())return;const r="function"==typeof o.composedPath?o.composedPath():[],s="function"==typeof i?i():i;for(const t of s)if(t.contains(o.target)||r.includes(t))return;n()},o)}function xu(t){return class extends t{disableCssTransitions(){this._isCssTransitionsDisabled=!0}enableCssTransitions(){this._isCssTransitionsDisabled=!1}constructor(...t){super(...t),this.set("_isCssTransitionsDisabled",!1),this.initializeCssTransitionDisablerMixin()}initializeCssTransitionDisablerMixin(){this.template&&this.extendTemplate({attributes:{class:[this.bindTemplate.if("_isCssTransitionsDisabled","ck-transitions-disabled")]}})}}}function Au(t){return class extends t{_onDragBound=this._onDrag.bind(this);_onDragEndBound=this._onDragEnd.bind(this);_lastDraggingCoordinates={x:0,y:0};constructor(...t){super(...t),this.on("render",()=>{this._attachListeners()}),this.set("isDragging",!1)}_attachListeners(){this.listenTo(this.element,"mousedown",this._onDragStart.bind(this)),this.listenTo(this.element,"touchstart",this._onDragStart.bind(this))}_attachDragListeners(){this.listenTo(gt.document,"mouseup",this._onDragEndBound),this.listenTo(gt.document,"touchend",this._onDragEndBound),this.listenTo(gt.document,"mousemove",this._onDragBound),this.listenTo(gt.document,"touchmove",this._onDragBound)}_detachDragListeners(){this.stopListening(gt.document,"mouseup",this._onDragEndBound),this.stopListening(gt.document,"touchend",this._onDragEndBound),this.stopListening(gt.document,"mousemove",this._onDragBound),this.stopListening(gt.document,"touchmove",this._onDragBound)}_onDragStart(t,e){if(!this._isHandleElementPressed(e))return;this._attachDragListeners();let n=0,i=0;e instanceof MouseEvent?(n=e.clientX,i=e.clientY):(n=e.touches[0].clientX,i=e.touches[0].clientY),this._lastDraggingCoordinates={x:n,y:i},this.isDragging=!0}_onDrag(t,e){if(!this.isDragging)return void this._detachDragListeners();let n=0,i=0;e instanceof MouseEvent?(n=e.clientX,i=e.clientY):(n=e.touches[0].clientX,i=e.touches[0].clientY),e.preventDefault(),this.fire("drag",{deltaX:Math.round(n-this._lastDraggingCoordinates.x),deltaY:Math.round(i-this._lastDraggingCoordinates.y)}),this._lastDraggingCoordinates={x:n,y:i}}_onDragEnd(){this._detachDragListeners(),this.isDragging=!1}_isHandleElementPressed(t){return!!this.dragHandleElement&&(this.dragHandleElement===t.target||t.target instanceof HTMLElement&&this.dragHandleElement.contains(t.target))}}}function Eu({view:t}){t.listenTo(t.element,"submit",(e,n)=>{n.preventDefault(),t.fire("submit")},{useCapture:!0})}function Su({keystrokeHandler:t,focusTracker:e,gridItems:n,numberOfColumns:i,uiLanguageDirection:o}){const r="number"==typeof i?()=>i:i;function s(t){return i=>{const o=n.find(t=>t.element===e.focusedElement),r=n.getIndex(o),s=t(r,n);n.get(s).focus(),i.stopPropagation(),i.preventDefault()}}function a(t,e){return t===e-1?0:t+1}function l(t,e){return 0===t?e-1:t-1}t.set("arrowright",s((t,e)=>"rtl"===o?l(t,e.length):a(t,e.length))),t.set("arrowleft",s((t,e)=>"rtl"===o?a(t,e.length):l(t,e.length))),t.set("arrowup",s((t,e)=>{let n=t-r();return n<0&&(n=t+r()*Math.floor(e.length/r()),n>e.length-1&&(n-=r())),n})),t.set("arrowdown",s((t,e)=>{let n=t+r();return n>e.length-1&&(n=t%r()),n}))}class Tu extends ku{id;constructor(t){super(t),this.set("text",void 0),this.set("for",void 0),this.id=`ck-editor__label_${Mt()}`;const e=this.bindTemplate;this.setTemplate({tag:"label",attributes:{class:["ck","ck-label"],id:this.id,for:e.to("for")},children:[{text:e.to("text")}]})}}class Iu extends ku{constructor(t,e){super(t);const n=t.t,i=new Tu;i.text=n("Help Contents. To close this dialog press ESC."),this.setTemplate({tag:"div",attributes:{class:["ck","ck-accessibility-help-dialog__content"],"aria-labelledby":i.id,role:"document",tabindex:-1},children:[ge(document,"p",{},n("Below, you can find a list of keyboard shortcuts that can be used in the editor.")),...this._createCategories(Array.from(e.values())),i]})}focus(){this.element.focus()}_createCategories(t){return t.map(t=>{const e=[ge(document,"h3",{},t.label),...Array.from(t.groups.values()).map(t=>this._createGroup(t)).flat()];return t.description&&e.splice(1,0,ge(document,"p",{},t.description)),ge(document,"section",{},e)})}_createGroup(t){const e=t.keystrokes.sort((t,e)=>t.label.localeCompare(e.label)).map(t=>this._createGroupRow(t)).flat(),n=[ge(document,"dl",{},e)];return t.label&&n.unshift(ge(document,"h4",{},t.label)),n}_createGroupRow(t){const e=this.locale.t,n=ge(document,"dt"),i=ge(document,"dd"),o="string"==typeof(s=t.keystroke)?[[s]]:"string"==typeof s[0]?[s]:s,r=[];var s;for(const t of o)r.push(t.map(Pu).join(""));return n.innerHTML=t.label,i.innerHTML=r.join(", ")+(t.mayRequireFn&&ft.isMac?` ${e("(may require <kbd>Fn</kbd>)")}`:""),[n,i]}}function Pu(t){return un(t).split("+").map(t=>`<kbd>${t}</kbd>`).join("+")}class Mu extends ku{static presentationalAttributeNames=["alignment-baseline","baseline-shift","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-rendering","cursor","direction","display","dominant-baseline","fill","fill-opacity","fill-rule","filter","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","image-rendering","letter-spacing","lighting-color","marker-end","marker-mid","marker-start","mask","opacity","overflow","paint-order","pointer-events","shape-rendering","stop-color","stop-opacity","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","text-anchor","text-decoration","text-overflow","text-rendering","transform","unicode-bidi","vector-effect","visibility","white-space","word-spacing","writing-mode"];constructor(){super();const t=this.bindTemplate;this.set("content",""),this.set("viewBox","0 0 20 20"),this.set("fillColor",""),this.set("isColorInherited",!0),this.set("isVisible",!0),this.setTemplate({tag:"svg",ns:"http://www.w3.org/2000/svg",attributes:{class:["ck","ck-icon",t.if("isVisible","ck-hidden",t=>!t),"ck-reset_all-excluded",t.if("isColorInherited","ck-icon_inherit-color")],viewBox:t.to("viewBox"),"aria-hidden":!0}})}render(){super.render(),this._updateXMLContent(),this._colorFillPaths(),this.on("change:content",()=>{this._updateXMLContent(),this._colorFillPaths()}),this.on("change:fillColor",()=>{this._colorFillPaths()})}_updateXMLContent(){if(this.content){const t=(new DOMParser).parseFromString(this.content.trim(),"image/svg+xml").querySelector("svg");if(!t)throw new Vt("ui-iconview-invalid-svg",this);const e=t.getAttribute("viewBox");e&&(this.viewBox=e);for(const{name:e,value:n}of Array.from(t.attributes))Mu.presentationalAttributeNames.includes(e)&&this.element.setAttribute(e,n);for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);for(;t.childNodes.length>0;)this.element.appendChild(t.childNodes[0])}}_colorFillPaths(){this.fillColor&&this.element.querySelectorAll(".ck-icon__fill").forEach(t=>{t.style.fill=this.fillColor})}}class Nu extends ku{constructor(){super(),this.set({style:void 0,text:void 0,id:void 0});const t=this.bindTemplate;this.setTemplate({tag:"span",attributes:{class:["ck","ck-button__label"],style:t.to("style"),id:t.to("id")},children:[{text:t.to("text")}]})}}class Lu extends ku{children;labelView;iconView;keystrokeView;_focusDelayed=null;constructor(t,e=new Nu){super(t);const n=this.bindTemplate,i=Mt();this.set("_ariaPressed",!1),this.set("_ariaChecked",!1),this.set("ariaLabel",void 0),this.set("ariaLabelledBy",`ck-editor__aria-label_${i}`),this.set("class",void 0),this.set("labelStyle",void 0),this.set("icon",void 0),this.set("isEnabled",!0),this.set("isOn",!1),this.set("isVisible",!0),this.set("isToggleable",!1),this.set("keystroke",void 0),this.set("label",void 0),this.set("role",void 0),this.set("tabindex",-1),this.set("tooltip",!1),this.set("tooltipPosition","s"),this.set("type","button"),this.set("withText",!1),this.set("withKeystroke",!1),this.children=this.createCollection(),this.labelView=this._setupLabelView(e),this.iconView=new Mu,this.iconView.extendTemplate({attributes:{class:"ck-button__icon"}}),this.iconView.bind("content").to(this,"icon"),this.keystrokeView=this._createKeystrokeView(),this.bind("_tooltipString").to(this,"tooltip",this,"label",this,"keystroke",this._getTooltipString.bind(this));const o={tag:"button",attributes:{class:["ck","ck-button",n.to("class"),n.if("isEnabled","ck-disabled",t=>!t),n.if("isVisible","ck-hidden",t=>!t),n.to("isOn",t=>t?"ck-on":"ck-off"),n.if("withText","ck-button_with-text"),n.if("withKeystroke","ck-button_with-keystroke")],role:n.to("role"),type:n.to("type",t=>t||"button"),tabindex:n.to("tabindex"),"aria-checked":n.to("_ariaChecked"),"aria-pressed":n.to("_ariaPressed"),"aria-label":n.to("ariaLabel"),"aria-labelledby":n.to("ariaLabelledBy"),"aria-disabled":n.if("isEnabled",!0,t=>!t),"data-cke-tooltip-text":n.to("_tooltipString"),"data-cke-tooltip-position":n.to("tooltipPosition")},children:this.children,on:{click:n.to(t=>{this.isEnabled?this.fire("execute"):t.preventDefault()})}};this.bind("_ariaPressed").to(this,"isOn",this,"isToggleable",this,"role",(t,e,n)=>!(!e||Vu(n))&&String(!!t)),this.bind("_ariaChecked").to(this,"isOn",this,"isToggleable",this,"role",(t,e,n)=>!(!e||!Vu(n))&&String(!!t)),ft.isSafari&&(this._focusDelayed||(this._focusDelayed=Sn(()=>this.focus(),0)),o.on.mousedown=n.to(()=>{this._focusDelayed()}),o.on.mouseup=n.to(()=>{this._focusDelayed.cancel()})),this.setTemplate(o)}render(){super.render(),this.icon&&this.children.add(this.iconView),this.on("change:icon",(t,e,n,i)=>{n&&!i?this.children.add(this.iconView,0):!n&&i&&this.children.remove(this.iconView)}),this.children.add(this.labelView),this.withKeystroke&&this.keystroke&&this.children.add(this.keystrokeView)}focus(){this.element.focus()}destroy(){this._focusDelayed&&this._focusDelayed.cancel(),super.destroy()}_setupLabelView(t){return t.bind("text","style","id").to(this,"label","labelStyle","ariaLabelledBy"),t}_createKeystrokeView(){const t=new ku;return t.setTemplate({tag:"span",attributes:{class:["ck","ck-button__keystroke"]},children:[{text:this.bindTemplate.to("keystroke",t=>un(t))}]}),t}_getTooltipString(t,e,n){return t?"string"==typeof t?t:(n&&(n=un(n)),t instanceof Function?t(e,n):`${e}${n?` (${n})`:""}`):""}}function Vu(t){switch(t){case"radio":case"checkbox":case"option":case"switch":case"menuitemcheckbox":case"menuitemradio":return!0;default:return!1}}class zu extends ku{children;iconView;constructor(t,e={}){super(t);const n=this.bindTemplate;this.set("label",e.label||""),this.set("class",e.class||null),this.children=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-form__header",n.to("class")]},children:this.children}),e.icon&&(this.iconView=new Mu,this.iconView.content=e.icon,this.children.add(this.iconView));const i=new ku(t);i.setTemplate({tag:"h2",attributes:{class:["ck","ck-form__header__label"],role:"presentation"},children:[{text:n.to("label")}]}),this.children.add(i)}}class Ou extends(Ut()){focusables;focusTracker;keystrokeHandler;actions;constructor(t){if(super(),this.focusables=t.focusables,this.focusTracker=t.focusTracker,this.keystrokeHandler=t.keystrokeHandler,this.actions=t.actions,t.actions&&t.keystrokeHandler)for(const e in t.actions){let n=t.actions[e];"string"==typeof n&&(n=[n]);for(const i of n)t.keystrokeHandler.set(i,(t,n)=>{this[e](),n()},t.keystrokeHandlerOptions)}this.on("forwardCycle",()=>this.focusFirst(),{priority:"low"}),this.on("backwardCycle",()=>this.focusLast(),{priority:"low"})}get first(){return this.focusables.find(Ru)||null}get last(){return this.focusables.filter(Ru).slice(-1)[0]||null}get next(){return this._getDomFocusableItem(1)}get previous(){return this._getDomFocusableItem(-1)}get current(){let t=null;return null===this.focusTracker.focusedElement?null:(this.focusables.find((e,n)=>{const i=e.element===this.focusTracker.focusedElement;return i&&(t=n),i}),t)}focusFirst(){this._focus(this.first,1)}focusLast(){this._focus(this.last,-1)}focusNext(){const t=this.next;t&&this.focusables.getIndex(t)===this.current||t===this.first?this.fire("forwardCycle"):this._focus(t,1)}focusPrevious(){const t=this.previous;t&&this.focusables.getIndex(t)===this.current||t===this.last?this.fire("backwardCycle"):this._focus(t,-1)}chain(t){const e=()=>null===this.current?null:this.focusables.get(this.current);this.listenTo(t,"forwardCycle",t=>{const n=e();this.focusNext(),n!==e()&&t.stop()},{priority:"low"}),this.listenTo(t,"backwardCycle",t=>{const n=e();this.focusPrevious(),n!==e()&&t.stop()},{priority:"low"})}unchain(t){this.stopListening(t)}_focus(t,e){t&&this.focusTracker.focusedElement!==t.element&&t.focus(e)}_getDomFocusableItem(t){const e=this.focusables.length;if(!e)return null;const n=this.current;if(null===n)return this[1===t?"first":"last"];let i=this.focusables.get(n),o=(n+e+t)%e;do{const n=this.focusables.get(o);if(Ru(n)){i=n;break}o=(o+e+t)%e}while(o!==n);return i}}function Ru(t){return Du(t)&&He(t.element)}function Du(t){return!(!("focus"in t)||"function"!=typeof t.focus)}class Bu extends ku{children;keystrokes;focusCycler;_focusTracker;_focusables;constructor(t){super(t),this.children=this.createCollection(),this.keystrokes=new xn,this._focusTracker=new _n,this._focusables=new Qd,this.focusCycler=new Ou({focusables:this._focusables,focusTracker:this._focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.setTemplate({tag:"div",attributes:{class:["ck","ck-dialog__actions"]},children:this.children})}render(){super.render(),this.keystrokes.listenTo(this.element)}setButtons(t){for(const e of t){const t=new Lu(this.locale);let n;for(n in t.on("execute",()=>e.onExecute()),e.onCreate&&e.onCreate(t),e)"onExecute"!=n&&"onCreate"!=n&&t.set(n,e[n]);this.children.add(t)}this._updateFocusCyclableItems()}focus(t){-1===t?this.focusCycler.focusLast():this.focusCycler.focusFirst()}_updateFocusCyclableItems(){Array.from(this.children).forEach(t=>{this._focusables.add(t),this._focusTracker.add(t.element)})}}class Fu extends ku{children;constructor(t){super(t),this.children=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-dialog__content"]},children:this.children})}reset(){for(;this.children.length;)this.children.remove(0)}}const ju="screen-center",Hu="editor-center",Uu=Re("px");class $u extends(Au(ku)){parts;headerView;closeButtonView;actionsView;static defaultOffset=15;contentView;keystrokes;focusTracker;wasMoved=!1;_getCurrentDomRoot;_getViewportOffset;_focusables;_focusCycler;constructor(t,{getCurrentDomRoot:e,getViewportOffset:n,keystrokeHandlerOptions:i}){super(t);const o=this.bindTemplate,r=t.t;this.set("className",""),this.set("ariaLabel",r("Editor dialog")),this.set("isModal",!1),this.set("position",ju),this.set("_isVisible",!1),this.set("_isTransparent",!1),this.set("_top",0),this.set("_left",0),this._getCurrentDomRoot=e,this._getViewportOffset=n,this.decorate("moveTo"),this.parts=this.createCollection(),this.keystrokes=new xn,this.focusTracker=new _n,this._focusables=new Qd,this._focusCycler=new Ou({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"},keystrokeHandlerOptions:i}),this.setTemplate({tag:"div",attributes:{class:["ck","ck-dialog-overlay",o.if("isModal","ck-dialog-overlay__transparent",t=>!t),o.if("_isVisible","ck-hidden",t=>!t)],tabindex:"-1"},children:[{tag:"div",attributes:{tabindex:"-1",class:["ck","ck-dialog",o.if("isModal","ck-dialog_modal"),o.to("className")],role:"dialog","aria-label":o.to("ariaLabel"),style:{top:o.to("_top",t=>Uu(t)),left:o.to("_left",t=>Uu(t)),visibility:o.if("_isTransparent","hidden")}},children:this.parts}]})}render(){super.render(),this.keystrokes.set("Esc",(t,e)=>{t.defaultPrevented||(this.fire("close",{source:"escKeyPress"}),e())}),this.on("drag",(t,{deltaX:e,deltaY:n})=>{this.wasMoved=!0,this.moveBy(e,n)}),this.listenTo(gt.window,"resize",()=>{this._isVisible&&!this.wasMoved&&this.updatePosition()}),this.listenTo(gt.document,"scroll",()=>{this._isVisible&&!this.wasMoved&&this.updatePosition()}),this.on("change:_isVisible",(t,e,n)=>{n&&(this._isTransparent=!0,setTimeout(()=>{this.updatePosition(),this._isTransparent=!1,this.focus()},10))}),this.keystrokes.listenTo(this.element)}get dragHandleElement(){return this.headerView&&!this.isModal?this.headerView.element:null}setupParts({icon:t,title:e,hasCloseButton:n=!0,content:i,actionButtons:o}){e&&(this.headerView=new zu(this.locale,{icon:t}),n&&(this.closeButtonView=this._createCloseButton(),this.headerView.children.add(this.closeButtonView)),this.headerView.label=e,this.ariaLabel=e,this.parts.add(this.headerView,0)),i&&(i instanceof ku&&(i=[i]),this.contentView=new Fu(this.locale),this.contentView.children.addMany(i),this.parts.add(this.contentView)),o&&(this.actionsView=new Bu(this.locale),this.actionsView.setButtons(o),this.parts.add(this.actionsView)),this._updateFocusCyclableItems()}focus(){this._focusCycler.focusFirst()}moveTo(t,e){const n=this._getViewportRect(),i=this._getDialogRect();t+i.width>n.right&&(t=n.right-i.width),t<n.left&&(t=n.left),e<n.top&&(e=n.top),this._moveTo(t,e)}_moveTo(t,e){this._left=t,this._top=e}moveBy(t,e){this.moveTo(this._left+t,this._top+e)}_moveOffScreen(){this._moveTo(-9999,-9999)}updatePosition(){if(!this.element||!this.element.parentNode)return;const t=this._getViewportRect();let e,n=this.position;this._getCurrentDomRoot()?e=this._getVisibleDomRootRect(t):n=ju;const i=$u.defaultOffset,o=this._getDialogRect();switch(n){case"editor-top-side":if(e){const t="ltr"===this.locale.contentLanguageDirection?e.right-o.width-i:e.left+i;this.moveTo(t,e.top+i)}else this._moveOffScreen();break;case Hu:e?this.moveTo(Math.round(e.left+e.width/2-o.width/2),Math.round(e.top+e.height/2-o.height/2)):this._moveOffScreen();break;case ju:this.moveTo(Math.round((t.width-o.width)/2),Math.round((t.height-o.height)/2));break;case"editor-top-center":e?this.moveTo(Math.round(e.left+e.width/2-o.width/2),e.top+i):this._moveOffScreen();break;case"editor-bottom-center":e?this.moveTo(Math.round(e.left+e.width/2-o.width/2),e.bottom-o.height-i):this._moveOffScreen();break;case"editor-above-center":e?this.moveTo(Math.round(e.left+e.width/2-o.width/2),e.top-o.height-i):this._moveOffScreen();break;case"editor-below-center":e?this.moveTo(Math.round(e.left+e.width/2-o.width/2),e.bottom+i):this._moveOffScreen()}}_getVisibleDomRootRect(t){let e=new Ie(this._getCurrentDomRoot()).getVisible();return e?(e=t.getIntersection(e),e||null):null}_getDialogRect(){return new Ie(this.element.firstElementChild)}_getViewportRect(){const t=new Ie(gt.window);if(this.isModal)return t;const e={top:0,bottom:0,left:0,right:0,...this._getViewportOffset()};return t.top+=e.top,t.height-=e.top,t.bottom-=e.bottom,t.height-=e.bottom,t.left+=e.left,t.right-=e.right,t.width-=e.left+e.right,t}_updateFocusCyclableItems(){const t=[];if(this.contentView)for(const e of this.contentView.children)Du(e)&&t.push(e);this.actionsView&&t.push(this.actionsView),this.closeButtonView&&t.push(this.closeButtonView),t.forEach(t=>{var e;this._focusables.add(t),this.focusTracker.add(t.element),Du(e=t)&&"focusCycler"in e&&e.focusCycler instanceof Ou&&this._focusCycler.chain(t.focusCycler)})}_createCloseButton(){const t=new Lu(this.locale),e=this.locale.t;return t.set({label:e("Close"),tooltip:!0,icon:zc}),t.on("execute",()=>this.fire("close",{source:"closeButton"})),t}}class Wu extends nc{view;static _visibleDialogPlugin;_onHide;static get pluginName(){return"Dialog"}static get isOfficialPlugin(){return!0}constructor(t){super(t);const e=t.t;this._initShowHideListeners(),this._initFocusToggler(),this._initMultiRootIntegration(),this.set({id:null,isOpen:!1}),t.accessibility.addKeystrokeInfos({categoryId:"navigation",keystrokes:[{label:e("Move focus in and out of an active dialog window"),keystroke:"Ctrl+F6",mayRequireFn:!0}]})}destroy(){super.destroy(),Wu._visibleDialogPlugin===this&&this._unlockBodyScroll()}_initShowHideListeners(){this.on("show",(t,e)=>{this._show(e)}),this.on("show",(t,e)=>{e.onShow&&e.onShow(this)},{priority:"low"}),this.on("hide",()=>{Wu._visibleDialogPlugin&&Wu._visibleDialogPlugin._hide()}),this.on("hide",()=>{this._onHide&&(this._onHide(this),this._onHide=void 0)},{priority:"low"})}_initFocusToggler(){const t=this.editor;t.keystrokes.set("Ctrl+F6",(e,n)=>{this.isOpen&&!this.view.isModal&&(this.view.focusTracker.isFocused?t.editing.view.focus():this.view.focus(),n())})}_initMultiRootIntegration(){const t=this.editor.model;t.document.on("change:data",()=>{if(!this.view)return;const e=t.document.differ.getChangedRoots();for(const t of e)t.state&&this.view.updatePosition()})}show(t){this.hide(),this.fire(`show:${t.id}`,t)}_show({id:t,icon:e,title:n,hasCloseButton:i=!0,content:o,actionButtons:r,className:s,isModal:a,position:l,onHide:c,keystrokeHandlerOptions:d}){const u=this.editor;this.view=new $u(u.locale,{getCurrentDomRoot:()=>u.editing.view.getDomRoot(u.model.document.selection.anchor.root.rootName),getViewportOffset:()=>u.ui.viewportOffset,keystrokeHandlerOptions:d});const h=this.view;h.on("close",()=>{this.hide()}),u.ui.view.body.add(h),u.keystrokes.listenTo(h.element),l||(l=a?ju:Hu),a&&this._lockBodyScroll(),h.set({position:l,_isVisible:!0,className:s,isModal:a}),h.setupParts({icon:e,title:n,hasCloseButton:i,content:o,actionButtons:r}),this.id=t,c&&(this._onHide=c),this.isOpen=!0,Wu._visibleDialogPlugin=this}hide(){Wu._visibleDialogPlugin&&Wu._visibleDialogPlugin.fire(`hide:${Wu._visibleDialogPlugin.id}`)}_hide(){if(!this.view)return;const t=this.editor,e=this.view;e.isModal&&this._unlockBodyScroll(),e.contentView&&e.contentView.reset(),t.ui.view.body.remove(e),t.ui.focusTracker.remove(e.element),t.keystrokes.stopListening(e.element),e.destroy(),t.editing.view.focus(),this.id=null,this.isOpen=!1,Wu._visibleDialogPlugin=null}_lockBodyScroll(){document.documentElement.classList.add("ck-dialog-scroll-locked")}_unlockBodyScroll(){document.documentElement.classList.remove("ck-dialog-scroll-locked")}}class qu extends Lu{_checkIconHolderView=new Ku;constructor(t,e=new Nu){super(t,e),this.set({hasCheckSpace:!1,_hasCheck:this.isToggleable});const n=this.bindTemplate;this.extendTemplate({attributes:{class:["ck-list-item-button",n.if("isToggleable","ck-list-item-button_toggleable")]}}),this.bind("_hasCheck").to(this,"hasCheckSpace",this,"isToggleable",(t,e)=>t||e)}render(){super.render(),this._hasCheck&&this.children.add(this._checkIconHolderView,0),this._watchCheckIconHolderMount()}_watchCheckIconHolderMount(){this._checkIconHolderView.bind("isOn").to(this,"isOn",t=>this.isToggleable&&t),this.on("change:_hasCheck",(t,e,n)=>{const{children:i,_checkIconHolderView:o}=this;n?i.add(o,0):i.remove(o)})}}class Ku extends ku{children;_checkIconView=this._createCheckIconView();constructor(){super();const t=this.bindTemplate;this.children=this.createCollection(),this.set("isOn",!1),this.setTemplate({tag:"span",children:this.children,attributes:{class:["ck","ck-list-item-button__check-holder",t.to("isOn",t=>t?"ck-on":"ck-off")]}})}render(){super.render(),this.isOn&&this.children.add(this._checkIconView,0),this._watchCheckIconMount()}_watchCheckIconMount(){this.on("change:isOn",(t,e,n)=>{const{children:i,_checkIconView:o}=this;n&&!i.has(o)?i.add(o):!n&&i.has(o)&&i.remove(o)})}_createCheckIconView(){const t=new Mu;return t.content=Rc,t.extendTemplate({attributes:{class:"ck-list-item-button__check-icon"}}),t}}class Gu extends qu{constructor(t){super(t),this.set({withText:!0,withKeystroke:!0,tooltip:!1,role:"menuitem"}),this.extendTemplate({attributes:{class:["ck-menu-bar__menu__item__button"]}})}}class Qu extends nc{contentView=null;static get requires(){return[Wu]}static get pluginName(){return"AccessibilityHelp"}static get isOfficialPlugin(){return!0}init(){const t=this.editor,e=t.locale.t;t.ui.componentFactory.add("accessibilityHelp",()=>{const t=this._createButton(Lu);return t.set({tooltip:!0,withText:!1,label:e("Accessibility help")}),t}),t.ui.componentFactory.add("menuBar:accessibilityHelp",()=>{const t=this._createButton(Gu);return t.label=e("Accessibility"),t}),t.keystrokes.set("Alt+0",(t,e)=>{this._toggleDialog(),e()}),this._setupRootLabels()}_createButton(t){const e=this.editor,n=e.plugins.get("Dialog"),i=new t(e.locale);return i.set({keystroke:"Alt+0",icon:Tc,isToggleable:!0}),i.on("execute",()=>this._toggleDialog()),i.bind("isOn").to(n,"id",t=>"accessibilityHelp"===t),i}_setupRootLabels(){const t=this.editor,e=t.editing.view,n=t.t;function i(t,e){const i=[e.getAttribute("aria-label"),n("Press %0 for help.",[un("Alt+0")])].filter(t=>t).join(". ");t.setAttribute("aria-label",i,e)}t.ui.on("ready",()=>{e.change(t=>{for(const n of e.document.roots)i(t,n)}),t.on("addRoot",(n,o)=>{const r=t.editing.view.document.getRoot(o.rootName);e.change(t=>i(t,r))},{priority:"low"})})}_toggleDialog(){const t=this.editor,e=t.plugins.get("Dialog"),n=t.locale.t;this.contentView||(this.contentView=new Iu(t.locale,t.accessibility.keystrokeInfos)),"accessibilityHelp"===e.id?e.hide():e.show({id:"accessibilityHelp",className:"ck-accessibility-help-dialog",title:n("Accessibility help"),icon:Tc,hasCloseButton:!0,content:this.contentView})}}class Yu extends Qd{locale;_bodyCollectionContainer;static _bodyWrapper;constructor(t,e=[]){super(e),this.locale=t}get bodyCollectionContainer(){return this._bodyCollectionContainer}attachToDom(){this._bodyCollectionContainer=new Yd({tag:"div",attributes:{class:["ck","ck-reset_all","ck-body","ck-rounded-corners"],dir:this.locale.uiLanguageDirection,role:"application"},children:this}).render(),Yu._bodyWrapper&&Yu._bodyWrapper.isConnected||(Yu._bodyWrapper=ge(document,"div",{class:"ck-body-wrapper"}),document.body.appendChild(Yu._bodyWrapper)),Yu._bodyWrapper.appendChild(this._bodyCollectionContainer)}detachFromDom(){super.destroy(),this._bodyCollectionContainer&&this._bodyCollectionContainer.remove(),Yu._bodyWrapper&&!Yu._bodyWrapper.childElementCount&&(Yu._bodyWrapper.remove(),delete Yu._bodyWrapper)}}const Ju=Re("px"),Zu={top:-99999,left:-99999,name:"arrowless",config:{withArrow:!1}};class Xu extends ku{content;_pinWhenIsVisibleCallback;_resizeObserver;constructor(t){super(t);const e=this.bindTemplate;this.set("top",0),this.set("left",0),this.set("position","arrow_nw"),this.set("isVisible",!1),this.set("withArrow",!0),this.set("class",void 0),this._pinWhenIsVisibleCallback=null,this._resizeObserver=null,this.content=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-balloon-panel",e.to("position",t=>`ck-balloon-panel_${t}`),e.if("isVisible","ck-balloon-panel_visible"),e.if("withArrow","ck-balloon-panel_with-arrow"),e.to("class")],style:{top:e.to("top",Ju),left:e.to("left",Ju)}},children:this.content})}destroy(){this.hide(),super.destroy()}show(){this.isVisible=!0}hide(){this.isVisible=!1}attachTo(t){const e=th(t.target);if(e&&!He(e))return!1;this.show();const n=Xu.defaultPositions,i=Object.assign({},{element:this.element,positions:[n.southArrowNorth,n.southArrowNorthMiddleWest,n.southArrowNorthMiddleEast,n.southArrowNorthWest,n.southArrowNorthEast,n.northArrowSouth,n.northArrowSouthMiddleWest,n.northArrowSouthMiddleEast,n.northArrowSouthWest,n.northArrowSouthEast,n.viewportStickyNorth],limiter:gt.document.body,fitInViewport:!0},t),o=Xu._getOptimalPosition(i)||Zu,r=parseInt(o.left),s=parseInt(o.top),a=o.name,l=o.config||{},{withArrow:c=!0}=l;return this.top=s,this.left=r,this.position=a,this.withArrow=c,!0}pin(t){this.unpin(),this._startPinning(t)&&(this._pinWhenIsVisibleCallback=()=>{this.isVisible?this._startPinning(t):this._stopPinning()},this.listenTo(this,"change:isVisible",this._pinWhenIsVisibleCallback))}unpin(){this._pinWhenIsVisibleCallback&&(this._stopPinning(),this.stopListening(this,"change:isVisible",this._pinWhenIsVisibleCallback),this._pinWhenIsVisibleCallback=null,this.hide())}_startPinning(t){if(!this.attachTo(t))return!1;let e=th(t.target);const n=t.limiter?th(t.limiter):gt.document.body;if(this.listenTo(gt.document,"scroll",(i,o)=>{const r=o.target,s=e&&r.contains(e),a=n&&r.contains(n);!s&&!a&&e&&n||this.attachTo(t)},{useCapture:!0}),this.listenTo(gt.window,"resize",()=>{this.attachTo(t)}),!this._resizeObserver&&(e&&Ee(e)&&(e=e.parentElement),e)){const t=()=>{He(e)||this.unpin()};this._resizeObserver=new ze(e,t)}return!0}_stopPinning(){this.stopListening(gt.document,"scroll"),this.stopListening(gt.window,"resize"),this._resizeObserver&&(this._resizeObserver.destroy(),this._resizeObserver=null)}static generatePositions(t={}){const{sideOffset:e=Xu.arrowSideOffset,heightOffset:n=Xu.arrowHeightOffset,stickyVerticalOffset:i=Xu.stickyVerticalOffset,config:o}=t;return{northWestArrowSouthWest:(t,n)=>({top:r(t,n),left:t.left-e,name:"arrow_sw",...o&&{config:o}}),northWestArrowSouthMiddleWest:(t,n)=>({top:r(t,n),left:t.left-.25*n.width-e,name:"arrow_smw",...o&&{config:o}}),northWestArrowSouth:(t,e)=>({top:r(t,e),left:t.left-e.width/2,name:"arrow_s",...o&&{config:o}}),northWestArrowSouthMiddleEast:(t,n)=>({top:r(t,n),left:t.left-.75*n.width+e,name:"arrow_sme",...o&&{config:o}}),northWestArrowSouthEast:(t,n)=>({top:r(t,n),left:t.left-n.width+e,name:"arrow_se",...o&&{config:o}}),northArrowSouthWest:(t,n)=>({top:r(t,n),left:t.left+t.width/2-e,name:"arrow_sw",...o&&{config:o}}),northArrowSouthMiddleWest:(t,n)=>({top:r(t,n),left:t.left+t.width/2-.25*n.width-e,name:"arrow_smw",...o&&{config:o}}),northArrowSouth:(t,e)=>({top:r(t,e),left:t.left+t.width/2-e.width/2,name:"arrow_s",...o&&{config:o}}),northArrowSouthMiddleEast:(t,n)=>({top:r(t,n),left:t.left+t.width/2-.75*n.width+e,name:"arrow_sme",...o&&{config:o}}),northArrowSouthEast:(t,n)=>({top:r(t,n),left:t.left+t.width/2-n.width+e,name:"arrow_se",...o&&{config:o}}),northEastArrowSouthWest:(t,n)=>({top:r(t,n),left:t.right-e,name:"arrow_sw",...o&&{config:o}}),northEastArrowSouthMiddleWest:(t,n)=>({top:r(t,n),left:t.right-.25*n.width-e,name:"arrow_smw",...o&&{config:o}}),northEastArrowSouth:(t,e)=>({top:r(t,e),left:t.right-e.width/2,name:"arrow_s",...o&&{config:o}}),northEastArrowSouthMiddleEast:(t,n)=>({top:r(t,n),left:t.right-.75*n.width+e,name:"arrow_sme",...o&&{config:o}}),northEastArrowSouthEast:(t,n)=>({top:r(t,n),left:t.right-n.width+e,name:"arrow_se",...o&&{config:o}}),southWestArrowNorthWest:t=>({top:s(t),left:t.left-e,name:"arrow_nw",...o&&{config:o}}),southWestArrowNorthMiddleWest:(t,n)=>({top:s(t),left:t.left-.25*n.width-e,name:"arrow_nmw",...o&&{config:o}}),southWestArrowNorth:(t,e)=>({top:s(t),left:t.left-e.width/2,name:"arrow_n",...o&&{config:o}}),southWestArrowNorthMiddleEast:(t,n)=>({top:s(t),left:t.left-.75*n.width+e,name:"arrow_nme",...o&&{config:o}}),southWestArrowNorthEast:(t,n)=>({top:s(t),left:t.left-n.width+e,name:"arrow_ne",...o&&{config:o}}),southArrowNorthWest:t=>({top:s(t),left:t.left+t.width/2-e,name:"arrow_nw",...o&&{config:o}}),southArrowNorthMiddleWest:(t,n)=>({top:s(t),left:t.left+t.width/2-.25*n.width-e,name:"arrow_nmw",...o&&{config:o}}),southArrowNorth:(t,e)=>({top:s(t),left:t.left+t.width/2-e.width/2,name:"arrow_n",...o&&{config:o}}),southArrowNorthMiddleEast:(t,n)=>({top:s(t),left:t.left+t.width/2-.75*n.width+e,name:"arrow_nme",...o&&{config:o}}),southArrowNorthEast:(t,n)=>({top:s(t),left:t.left+t.width/2-n.width+e,name:"arrow_ne",...o&&{config:o}}),southEastArrowNorthWest:t=>({top:s(t),left:t.right-e,name:"arrow_nw",...o&&{config:o}}),southEastArrowNorthMiddleWest:(t,n)=>({top:s(t),left:t.right-.25*n.width-e,name:"arrow_nmw",...o&&{config:o}}),southEastArrowNorth:(t,e)=>({top:s(t),left:t.right-e.width/2,name:"arrow_n",...o&&{config:o}}),southEastArrowNorthMiddleEast:(t,n)=>({top:s(t),left:t.right-.75*n.width+e,name:"arrow_nme",...o&&{config:o}}),southEastArrowNorthEast:(t,n)=>({top:s(t),left:t.right-n.width+e,name:"arrow_ne",...o&&{config:o}}),westArrowEast:(t,e)=>({top:t.top+t.height/2-e.height/2,left:t.left-e.width-n,name:"arrow_e",...o&&{config:o}}),eastArrowWest:(t,e)=>({top:t.top+t.height/2-e.height/2,left:t.right+n,name:"arrow_w",...o&&{config:o}}),viewportStickyNorth:(t,e,n)=>{const r=new Ie(gt.document.body).getIntersection(n.getVisible());if(!r)return null;const s=r.getVisible();return t.getIntersection(s)&&s.top-t.top-i<e.height&&s.bottom-t.bottom<e.height?{top:s.top+i,left:t.left+t.width/2-e.width/2,name:"arrowless",config:{withArrow:!1,...o}}:null}};function r(t,e){return t.top-e.height-n}function s(t){return t.bottom+n}}static arrowSideOffset=25;static arrowHeightOffset=10;static stickyVerticalOffset=20;static _getOptimalPosition=Ue;static defaultPositions=Xu.generatePositions()}function th(t){return it(t)?t:Se(t)?t.commonAncestorContainer:"function"==typeof t?th(t()):null}class eh extends(_e()){editor;_balloonView=null;_showBalloonThrottled=Wl(()=>this._showBalloon(),50,{leading:!0});_lastFocusedEditableElement=null;_balloonClass;constructor(t,e={}){super(),this.editor=t,this._balloonClass=e.balloonClass,t.on("ready",()=>this._handleEditorReady())}destroy(){const t=this._balloonView;t&&(t.unpin(),this._balloonView=null),this._showBalloonThrottled.cancel(),this.stopListening()}_handleEditorReady(){const t=this.editor;this._isEnabled()&&t.ui.view&&(t.ui.focusTracker.on("change:isFocused",(t,e,n)=>{this._updateLastFocusedEditableElement(),n?this._showBalloon():this._hideBalloon()}),t.ui.focusTracker.on("change:focusedElement",(t,e,n)=>{this._updateLastFocusedEditableElement(),n&&this._showBalloon()}),t.ui.on("update",()=>{this._showBalloonThrottled()}))}_getNormalizedConfig(){return{side:"ltr"===this.editor.locale.contentLanguageDirection?"right":"left",position:"border",verticalOffset:0,horizontalOffset:5}}_showBalloon(){const t=this._getBalloonAttachOptions();t&&(this._balloonView||(this._balloonView=this._createBalloonView()),this._balloonView.pin(t))}_hideBalloon(){this._balloonView&&this._balloonView.unpin()}_createBalloonView(){const t=this.editor,e=new Xu,n=this._createBadgeContent();return e.content.add(n),this._balloonClass&&(e.class=this._balloonClass),t.ui.view.body.add(e),e}_getBalloonAttachOptions(){if(!this._lastFocusedEditableElement)return null;const t=this._getNormalizedConfig(),e="right"===t.side?nh(this._lastFocusedEditableElement,n=t,(t,e)=>t.left+t.width-e.width-n.horizontalOffset):function(t,e){return nh(t,e,t=>t.left+e.horizontalOffset)}(this._lastFocusedEditableElement,t);var n;return{target:this._lastFocusedEditableElement,positions:[e]}}_updateLastFocusedEditableElement(){const t=this.editor,e=t.ui.focusTracker.isFocused,n=t.ui.focusTracker.focusedElement;if(!e||!n)return void(this._lastFocusedEditableElement=null);const i=Array.from(t.ui.getEditableElementsNames()).map(e=>t.ui.getEditableElement(e));i.includes(n)?this._lastFocusedEditableElement=n:this._lastFocusedEditableElement=i[0]}}function nh(t,e,n){return(i,o)=>{const r=new Ie(t);if(r.width<350||r.height<50)return null;let s;s="inside"===e.position?r.bottom-o.height:r.bottom-o.height/2,s-=e.verticalOffset;const a=n(r,o),l=i.clone().moveTo(a,s).getIntersection(o.clone().moveTo(a,s)).getVisible();return!l||l.getArea()<o.getArea()?null:{top:s,left:a,name:`position_${e.position}-side_${e.side}`,config:{withArrow:!1}}}}class ih extends eh{constructor(t){super(t,{balloonClass:"ck-powered-by-balloon"})}_isEnabled(){const t=this.editor;if(t.config.get("ui.poweredBy.forceVisible"))return!0;const e=t.config.get("licenseKey");if("GPL"==e)return!0;const n=Tn(e.split(".")[1]);return!n||!n.whiteLabel}_createBadgeContent(){return new oh(this.editor.locale,this._getNormalizedConfig().label)}_getNormalizedConfig(){const t=super._getNormalizedConfig(),e=this.editor.config.get("ui.poweredBy")||{},n=e.position||t.position,i="inside"===n?5:t.verticalOffset;return{position:n,side:e.side||t.side,label:void 0===e.label?"Powered by":e.label,verticalOffset:void 0!==e.verticalOffset?e.verticalOffset:i,horizontalOffset:void 0!==e.horizontalOffset?e.horizontalOffset:t.horizontalOffset,forceVisible:!!e.forceVisible}}}class oh extends ku{constructor(t,e){super(t);const n=new Mu,i=this.bindTemplate;n.set({content:'<svg xmlns="http://www.w3.org/2000/svg" width="53" height="10" viewBox="0 0 53 10"><path fill="#1C2331" d="M31.724 1.492a15.139 15.139 0 0 0 .045 1.16 2.434 2.434 0 0 0-.687-.34 3.68 3.68 0 0 0-1.103-.166 2.332 2.332 0 0 0-1.14.255 1.549 1.549 0 0 0-.686.87c-.15.41-.225.98-.225 1.712 0 .939.148 1.659.444 2.161.297.503.792.754 1.487.754.452.015.9-.094 1.294-.316.296-.174.557-.4.771-.669l.14.852h1.282V.007h-1.623v1.485ZM31 6.496a1.77 1.77 0 0 1-.494.061.964.964 0 0 1-.521-.127.758.758 0 0 1-.296-.466 3.984 3.984 0 0 1-.093-.992 4.208 4.208 0 0 1 .098-1.052.753.753 0 0 1 .307-.477 1.08 1.08 0 0 1 .55-.122c.233-.004.466.026.69.089l.483.144v2.553c-.11.076-.213.143-.307.2a1.73 1.73 0 0 1-.417.189ZM35.68 0l-.702.004c-.322.002-.482.168-.48.497l.004.581c.002.33.164.493.486.49l.702-.004c.322-.002.481-.167.48-.496L36.165.49c-.002-.33-.164-.493-.486-.491ZM36.145 2.313l-1.612.01.034 5.482 1.613-.01-.035-5.482ZM39.623.79 37.989.8 38 2.306l-.946.056.006 1.009.949-.006.024 2.983c.003.476.143.844.419 1.106.275.26.658.39 1.148.387.132 0 .293-.01.483-.03.19-.02.38-.046.57-.08.163-.028.324-.068.482-.119l-.183-1.095-.702.004a.664.664 0 0 1-.456-.123.553.553 0 0 1-.14-.422l-.016-2.621 1.513-.01-.006-1.064-1.514.01-.01-1.503ZM46.226 2.388c-.41-.184-.956-.274-1.636-.27-.673.004-1.215.101-1.627.29-.402.179-.72.505-.888.91-.18.419-.268.979-.264 1.68.004.688.1 1.24.285 1.655.172.404.495.724.9.894.414.18.957.268 1.63.264.68-.004 1.224-.099 1.632-.284.4-.176.714-.501.878-.905.176-.418.263-.971.258-1.658-.004-.702-.097-1.261-.28-1.677a1.696 1.696 0 0 0-.888-.9Zm-.613 3.607a.77.77 0 0 1-.337.501 1.649 1.649 0 0 1-1.317.009.776.776 0 0 1-.343-.497 4.066 4.066 0 0 1-.105-1.02 4.136 4.136 0 0 1 .092-1.03.786.786 0 0 1 .337-.507 1.59 1.59 0 0 1 1.316-.008.79.79 0 0 1 .344.502c.078.337.113.683.105 1.03.012.343-.019.685-.092 1.02ZM52.114 2.07a2.67 2.67 0 0 0-1.128.278c-.39.191-.752.437-1.072.73l-.157-.846-1.273.008.036 5.572 1.623-.01-.024-3.78c.35-.124.646-.22.887-.286.26-.075.53-.114.8-.118l.45-.003.144-1.546-.286.001ZM22.083 7.426l-1.576-2.532a2.137 2.137 0 0 0-.172-.253 1.95 1.95 0 0 0-.304-.29.138.138 0 0 1 .042-.04 1.7 1.7 0 0 0 .328-.374l1.75-2.71c.01-.015.025-.028.024-.048-.01-.01-.021-.007-.031-.007L20.49 1.17a.078.078 0 0 0-.075.045l-.868 1.384c-.23.366-.46.732-.688 1.099a.108.108 0 0 1-.112.06c-.098-.005-.196-.001-.294-.002-.018 0-.038.006-.055-.007.002-.02.002-.039.005-.058a4.6 4.6 0 0 0 .046-.701V1.203c0-.02-.009-.032-.03-.03h-.033L16.93 1.17c-.084 0-.073-.01-.073.076v6.491c-.001.018.006.028.025.027h1.494c.083 0 .072.007.072-.071v-2.19c0-.055-.003-.11-.004-.166a3.366 3.366 0 0 0-.05-.417h.06c.104 0 .209.002.313-.002a.082.082 0 0 1 .084.05c.535.913 1.07 1.824 1.607 2.736a.104.104 0 0 0 .103.062c.554-.003 1.107-.002 1.66-.002l.069-.003-.019-.032-.188-.304ZM27.112 6.555c-.005-.08-.004-.08-.082-.08h-2.414c-.053 0-.106-.003-.159-.011a.279.279 0 0 1-.246-.209.558.558 0 0 1-.022-.15c0-.382 0-.762-.002-1.143 0-.032.007-.049.042-.044h2.504c.029.003.037-.012.034-.038V3.814c0-.089.013-.078-.076-.078h-2.44c-.07 0-.062.003-.062-.06v-.837c0-.047.004-.093.013-.14a.283.283 0 0 1 .241-.246.717.717 0 0 1 .146-.011h2.484c.024.002.035-.009.036-.033l.003-.038.03-.496c.01-.183.024-.365.034-.548.005-.085.003-.087-.082-.094-.218-.018-.437-.038-.655-.05a17.845 17.845 0 0 0-.657-.026 72.994 72.994 0 0 0-1.756-.016 1.7 1.7 0 0 0-.471.064 1.286 1.286 0 0 0-.817.655c-.099.196-.149.413-.145.633v3.875c0 .072.003.144.011.216a1.27 1.27 0 0 0 .711 1.029c.228.113.48.167.734.158.757-.005 1.515.002 2.272-.042.274-.016.548-.034.82-.053.03-.002.043-.008.04-.041-.008-.104-.012-.208-.019-.312a69.964 69.964 0 0 1-.05-.768ZM16.14 7.415l-.127-1.075c-.004-.03-.014-.04-.044-.037a13.125 13.125 0 0 1-.998.073c-.336.01-.672.02-1.008.016-.116-.001-.233-.014-.347-.039a.746.746 0 0 1-.45-.262c-.075-.1-.132-.211-.167-.33a3.324 3.324 0 0 1-.126-.773 9.113 9.113 0 0 1-.015-.749c0-.285.022-.57.065-.852.023-.158.066-.312.127-.46a.728.728 0 0 1 .518-.443 1.64 1.64 0 0 1 .397-.048c.628-.001 1.255.003 1.882.05.022.001.033-.006.036-.026l.003-.031.06-.55c.019-.177.036-.355.057-.532.004-.034-.005-.046-.04-.056a5.595 5.595 0 0 0-1.213-.21 10.783 10.783 0 0 0-.708-.02c-.24-.003-.48.01-.719.041a3.477 3.477 0 0 0-.625.14 1.912 1.912 0 0 0-.807.497c-.185.2-.33.433-.424.688a4.311 4.311 0 0 0-.24 1.096c-.031.286-.045.572-.042.86-.006.43.024.86.091 1.286.04.25.104.497.193.734.098.279.26.53.473.734.214.205.473.358.756.446.344.11.702.17 1.063.177a8.505 8.505 0 0 0 1.578-.083 6.11 6.11 0 0 0 .766-.18c.03-.008.047-.023.037-.057a.157.157 0 0 1-.003-.025Z"/><path fill="#AFE229" d="M6.016 6.69a1.592 1.592 0 0 0-.614.21c-.23.132-.422.32-.56.546-.044.072-.287.539-.287.539l-.836 1.528.009.006c.038.025.08.046.123.063.127.046.26.07.395.073.505.023 1.011-.007 1.517-.003.29.009.58.002.869-.022a.886.886 0 0 0 .395-.116.962.962 0 0 0 .312-.286c.056-.083.114-.163.164-.249.24-.408.48-.816.718-1.226.075-.128.148-.257.222-.386l.112-.192a1.07 1.07 0 0 0 .153-.518l-1.304.023s-1.258-.005-1.388.01Z"/><path fill="#771BFF" d="m2.848 9.044.76-1.39.184-.352c-.124-.067-.245-.14-.367-.21-.346-.204-.706-.384-1.045-.6a.984.984 0 0 1-.244-.207c-.108-.134-.136-.294-.144-.46-.021-.409-.002-.818-.009-1.227-.003-.195 0-.39.003-.585.004-.322.153-.553.427-.713l.833-.488c.22-.13.44-.257.662-.385.05-.029.105-.052.158-.077.272-.128.519-.047.76.085l.044.028c.123.06.242.125.358.196.318.178.635.357.952.537.095.056.187.117.275.184.194.144.254.35.266.578.016.284.007.569.006.853-.001.28.004.558 0 .838.592-.003 1.259 0 1.259 0l.723-.013c-.003-.292-.007-.584-.007-.876 0-.524.015-1.048-.016-1.571-.024-.42-.135-.8-.492-1.067a5.02 5.02 0 0 0-.506-.339A400.52 400.52 0 0 0 5.94.787C5.722.664 5.513.524 5.282.423 5.255.406 5.228.388 5.2.373 4.758.126 4.305-.026 3.807.21c-.097.046-.197.087-.29.14A699.896 699.896 0 0 0 .783 1.948c-.501.294-.773.717-.778 1.31-.004.36-.009.718-.001 1.077.016.754-.017 1.508.024 2.261.016.304.07.6.269.848.127.15.279.28.448.382.622.4 1.283.734 1.92 1.11l.183.109Z"/></svg>\n',isColorInherited:!1}),this.setTemplate({tag:"div",attributes:{class:["ck","ck-powered-by"],"aria-hidden":!0},children:[{tag:"a",attributes:{href:"https://ckeditor.com/powered-by-ckeditor/?utm_source=ckeditor&utm_medium=referral&utm_campaign=701Dn000000hVgmIAE_powered_by_ckeditor_logo",target:"_blank",tabindex:"-1"},children:[...e?[{tag:"span",attributes:{class:["ck","ck-powered-by__label"]},children:[e]}]:[],n],on:{dragstart:i.to(t=>t.preventDefault())}}]})}}class rh extends Lu{toggleSwitchView;constructor(t){super(t),this.isToggleable=!0,this.toggleSwitchView=this._createToggleView(),this.extendTemplate({attributes:{class:"ck-switchbutton"}})}render(){super.render(),this.children.add(this.toggleSwitchView)}_createToggleView(){const t=new ku;return t.setTemplate({tag:"span",attributes:{class:["ck","ck-button__toggle"]},children:[{tag:"span",attributes:{class:["ck","ck-button__toggle__inner"]}}]}),t}}class sh extends(lh(Lu)){}class ah extends(lh(qu)){}function lh(t){return class extends t{_fileInputView;constructor(...t){super(...t),this._fileInputView=new ch(this.locale),this._fileInputView.bind("acceptedType").to(this),this._fileInputView.bind("allowMultipleFiles").to(this),this._fileInputView.delegate("done").to(this),this.on("execute",()=>{this._fileInputView.open()}),this.extendTemplate({attributes:{class:"ck-file-dialog-button"}})}render(){super.render(),this.children.add(this._fileInputView)}}}class ch extends ku{constructor(t){super(t),this.set("acceptedType",void 0),this.set("allowMultipleFiles",!1);const e=this.bindTemplate;this.setTemplate({tag:"input",attributes:{class:["ck-hidden"],type:"file",tabindex:"-1",accept:e.to("acceptedType"),multiple:e.to("allowMultipleFiles")},on:{change:e.to(()=>{this.element?.files?.length&&this.fire("done",this.element.files),this.element.value=""})}})}open(){this.element.click()}}class dh extends ku{buttonView;children;constructor(t,e){super(t);const n=this.bindTemplate;this.set("isCollapsed",!1),this.set("label",""),this.buttonView=this._createButtonView(),this.children=this.createCollection(),this.set("_collapsibleAriaLabelUid",void 0),e&&this.children.addMany(e),this.setTemplate({tag:"div",attributes:{class:["ck","ck-collapsible",n.if("isCollapsed","ck-collapsible_collapsed")]},children:[this.buttonView,{tag:"div",attributes:{class:["ck","ck-collapsible__children"],role:"region",hidden:n.if("isCollapsed","hidden"),"aria-labelledby":n.to("_collapsibleAriaLabelUid")},children:this.children}]})}render(){super.render(),this._collapsibleAriaLabelUid=this.buttonView.labelView.element.id}focus(){this.buttonView.focus()}_createButtonView(){const t=new Lu(this.locale),e=t.bindTemplate;return t.set({withText:!0,icon:Bc}),t.extendTemplate({attributes:{"aria-expanded":e.to("isOn",t=>String(t))}}),t.bind("label").to(this),t.bind("isOn").to(this,"isCollapsed",t=>!t),t.on("execute",()=>{this.isCollapsed=!this.isCollapsed}),t}}function uh(t,e){const n=t.t,i={Black:n("Black"),"Dim grey":n("Dim grey"),Grey:n("Grey"),"Light grey":n("Light grey"),White:n("White"),Red:n("Red"),Orange:n("Orange"),Yellow:n("Yellow"),"Light green":n("Light green"),Green:n("Green"),Aquamarine:n("Aquamarine"),Turquoise:n("Turquoise"),"Light blue":n("Light blue"),Blue:n("Blue"),Purple:n("Purple")};return e.map(t=>{const e=i[t.label];return e&&e!=t.label&&(t.label=e),t})}function hh(t){return t.map(gh).filter(t=>!!t)}function gh(t){return"string"==typeof t?{model:t,label:t,hasBorder:!1,view:{name:"span",styles:{color:t}}}:{model:t.color,label:t.label||t.color,hasBorder:void 0!==t.hasBorder&&t.hasBorder,view:{name:"span",styles:{color:`${t.color}`}}}}class mh extends Lu{constructor(t){super(t);const e=this.bindTemplate;this.set("color",void 0),this.set("hasBorder",!1),this.icon='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M16.935 5.328a2 2 0 0 1 0 2.829l-7.778 7.778a2 2 0 0 1-2.829 0L3.5 13.107a1.999 1.999 0 1 1 2.828-2.829l.707.707a1 1 0 0 0 1.414 0l5.658-5.657a2 2 0 0 1 2.828 0" class="ck-icon__fill"/><path d="M14.814 6.035 8.448 12.4a1 1 0 0 1-1.414 0l-1.413-1.415A1 1 0 1 0 4.207 12.4l2.829 2.829a1 1 0 0 0 1.414 0l7.778-7.778a1 1 0 1 0-1.414-1.415z"/></svg>',this.extendTemplate({attributes:{style:{backgroundColor:e.to("color",t=>ft.isMediaForcedColors?null:t)},class:["ck","ck-color-grid__tile",e.if("hasBorder","ck-color-selector__color-tile_bordered")]}})}render(){super.render(),this.iconView.fillColor="hsl(0, 0%, 100%)"}}class ph extends ku{columns;items;focusTracker;keystrokes;constructor(t,e){super(t);const n=e&&e.colorDefinitions?e.colorDefinitions:[];this.columns=e?.columns||5;const i={gridTemplateColumns:`repeat( ${this.columns}, 1fr)`};this.set("selectedColor",void 0),this.items=this.createCollection(),this.focusTracker=new _n,this.keystrokes=new xn,this.items.on("add",(t,e)=>{e.isOn=e.color===this.selectedColor}),n.forEach(t=>{const e=new mh;e.set({color:t.color,label:t.label,tooltip:!0,hasBorder:t.options.hasBorder}),e.on("execute",()=>{this.fire("execute",{value:t.color,hasBorder:t.options.hasBorder,label:t.label})}),this.items.add(e)}),this.setTemplate({tag:"div",children:this.items,attributes:{class:["ck","ck-color-grid"],style:i}}),this.on("change:selectedColor",(t,e,n)=>{for(const t of this.items)t.isOn=t.color===n})}focus(){this.items.length&&this.items.first.focus()}focusLast(){this.items.length&&this.items.last.focus()}render(){super.render();for(const t of this.items)this.focusTracker.add(t.element);this.items.on("add",(t,e)=>{this.focusTracker.add(e.element)}),this.items.on("remove",(t,e)=>{this.focusTracker.remove(e.element)}),this.keystrokes.listenTo(this.element),Su({keystrokeHandler:this.keystrokes,focusTracker:this.focusTracker,gridItems:this.items,numberOfColumns:this.columns,uiLanguageDirection:this.locale?.uiLanguageDirection})}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}}function fh(t,e){if(!t)return"";const n=bh(t);if(!n)return"";if(n.space===e)return t;if(i=n,!Object.keys(Cd).includes(i.space))return"";var i;const o=Cd[n.space][e];return o?function(t,e){switch(e){case"hex":return`#${t}`;case"rgb":return`rgb(${t[0]}, ${t[1]}, ${t[2]})`;case"hsl":return`hsl(${t[0]}, ${t[1]}%, ${t[2]}%)`;case"hwb":return`hwb(${t[0]}, ${t[1]}, ${t[2]})`;case"lab":return`lab(${t[0]}% ${t[1]} ${t[2]})`;case"lch":return`lch(${t[0]}% ${t[1]} ${t[2]})`;default:return""}}(o("hex"===n.space?n.hexValue:n.values),e):""}function bh(t){if(t.startsWith("#")){const e=ad(t);return{space:"hex",values:e.values,hexValue:t,alpha:e.alpha}}const e=ad(t);return e.space?e:null}class kh extends ku{fieldView;labelView;statusView;fieldWrapperChildren;constructor(t,e){super(t);const n=`ck-labeled-field-view-${Mt()}`,i=`ck-labeled-field-view-status-${Mt()}`;this.fieldView=e(this,n,i),this.set("label",void 0),this.set("isEnabled",!0),this.set("isEmpty",!0),this.set("isFocused",!1),this.set("errorText",null),this.set("infoText",null),this.set("class",void 0),this.set("placeholder",void 0),this.labelView=this._createLabelView(n),this.statusView=this._createStatusView(i),this.fieldWrapperChildren=this.createCollection([this.fieldView,this.labelView]),this.bind("_statusText").to(this,"errorText",this,"infoText",(t,e)=>t||e);const o=this.bindTemplate;this.setTemplate({tag:"div",attributes:{class:["ck","ck-labeled-field-view",o.to("class"),o.if("isEnabled","ck-disabled",t=>!t),o.if("isEmpty","ck-labeled-field-view_empty"),o.if("isFocused","ck-labeled-field-view_focused"),o.if("placeholder","ck-labeled-field-view_placeholder"),o.if("errorText","ck-error")]},children:[{tag:"div",attributes:{class:["ck","ck-labeled-field-view__input-wrapper"]},children:this.fieldWrapperChildren},this.statusView]})}_createLabelView(t){const e=new Tu(this.locale);return e.for=t,e.bind("text").to(this,"label"),e}_createStatusView(t){const e=new ku(this.locale),n=this.bindTemplate;return e.setTemplate({tag:"div",attributes:{class:["ck","ck-labeled-field-view__status",n.if("errorText","ck-labeled-field-view__status_error"),n.if("_statusText","ck-hidden",t=>!t)],id:t,role:n.if("errorText","alert")},children:[{text:n.to("_statusText")}]}),e}focus(t){this.fieldView.focus(t)}}class wh extends ku{focusTracker;constructor(t){super(t),this.set("value",void 0),this.set("id",void 0),this.set("placeholder",void 0),this.set("tabIndex",void 0),this.set("isReadOnly",!1),this.set("hasError",!1),this.set("ariaDescribedById",void 0),this.set("ariaLabel",void 0),this.focusTracker=new _n,this.bind("isFocused").to(this.focusTracker),this.set("isEmpty",!0);const e=this.bindTemplate;this.setTemplate({tag:"input",attributes:{class:["ck","ck-input",e.if("isFocused","ck-input_focused"),e.if("isEmpty","ck-input-text_empty"),e.if("hasError","ck-error")],id:e.to("id"),placeholder:e.to("placeholder"),tabindex:e.to("tabIndex"),readonly:e.to("isReadOnly"),"aria-invalid":e.if("hasError",!0),"aria-describedby":e.to("ariaDescribedById"),"aria-label":e.to("ariaLabel")},on:{input:e.to((...t)=>{this.fire("input",...t),this._updateIsEmpty()}),change:e.to(this._updateIsEmpty.bind(this))}})}render(){super.render(),this.focusTracker.add(this.element),this._setDomElementValue(this.value),this._updateIsEmpty(),this.on("change:value",(t,e,n)=>{this._setDomElementValue(n),this._updateIsEmpty()})}destroy(){super.destroy(),this.focusTracker.destroy()}select(){this.element.select()}focus(){this.element.focus()}reset(){this.value=this.element.value="",this._updateIsEmpty()}_updateIsEmpty(){this.isEmpty=!this.element.value}_setDomElementValue(t){this.element.value=t||0===t?t:""}}class _h extends wh{constructor(t){super(t),this.set("inputMode","text");const e=this.bindTemplate;this.extendTemplate({attributes:{inputmode:e.to("inputMode")}})}}class vh extends _h{constructor(t){super(t),this.extendTemplate({attributes:{type:"text",class:["ck-input-text"]}})}}class yh extends _h{constructor(t,{min:e,max:n,step:i}={}){super(t);const o=this.bindTemplate;this.set("min",e),this.set("max",n),this.set("step",i),this.extendTemplate({attributes:{type:"number",class:["ck-input-number"],min:o.to("min"),max:o.to("max"),step:o.to("step")}})}}class Ch extends ku{children;constructor(t){super(t);const e=this.bindTemplate;this.set("isVisible",!1),this.set("position","se"),this.children=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-reset","ck-dropdown__panel",e.to("position",t=>`ck-dropdown__panel_${t}`),e.if("isVisible","ck-dropdown__panel-visible")],tabindex:"-1"},children:this.children,on:{selectstart:e.to(t=>{"input"!==t.target.tagName.toLocaleLowerCase()&&t.preventDefault()})}})}focus(){if(this.children.length){const t=this.children.first;"function"==typeof t.focus?t.focus():zt("ui-dropdown-panel-focus-child-missing-focus",{childView:this.children.first,dropdownPanel:this})}}focusLast(){if(this.children.length){const t=this.children.last;"function"==typeof t.focusLast?t.focusLast():t.focus()}}}class xh extends ku{buttonView;panelView;focusTracker;keystrokes;listView;toolbarView;menuView;constructor(t,e,n){super(t);const i=this.bindTemplate;this.buttonView=e,this.panelView=n,this.set("isOpen",!1),this.set("isEnabled",!0),this.set("class",void 0),this.set("id",void 0),this.set("panelPosition","auto"),this.panelView.bind("isVisible").to(this,"isOpen"),this.keystrokes=new xn,this.focusTracker=new _n,this.setTemplate({tag:"div",attributes:{class:["ck","ck-dropdown",i.to("class"),i.if("isEnabled","ck-disabled",t=>!t)],id:i.to("id"),"aria-describedby":i.to("ariaDescribedById")},children:[e,n]}),e.extendTemplate({attributes:{class:["ck-dropdown__button"],"data-cke-tooltip-disabled":i.to("isOpen")}})}render(){super.render(),this.focusTracker.add(this.buttonView.element),this.focusTracker.add(this.panelView.element),this.listenTo(this.buttonView,"open",()=>{this.isOpen=!this.isOpen}),this.on("change:isOpen",(t,e,n)=>{if(n)if("auto"===this.panelPosition){const t=xh._getOptimalPosition({element:this.panelView.element,target:this.buttonView.element,fitInViewport:!0,positions:this._panelPositions});this.panelView.position=t?t.name:this._defaultPanelPositionName}else this.panelView.position=this.panelPosition}),this.keystrokes.listenTo(this.element);const t=(t,e)=>{this.isOpen&&(this.isOpen=!1,e())};this.keystrokes.set("arrowdown",(t,e)=>{this.buttonView.isEnabled&&!this.isOpen&&(this.isOpen=!0,e())}),this.keystrokes.set("arrowright",(t,e)=>{this.isOpen&&e()}),this.keystrokes.set("arrowleft",t),this.keystrokes.set("esc",t)}focus(){this.buttonView.focus()}get _panelPositions(){const{south:t,north:e,southEast:n,southWest:i,northEast:o,northWest:r,southMiddleEast:s,southMiddleWest:a,northMiddleEast:l,northMiddleWest:c}=xh.defaultPanelPositions;return"rtl"!==this.locale.uiLanguageDirection?[n,i,s,a,t,o,r,l,c,e]:[i,n,a,s,t,r,o,c,l,e]}get _defaultPanelPositionName(){return"rtl"===this.locale.uiLanguageDirection?"sw":"se"}static defaultPanelPositions={south:(t,e)=>({top:t.bottom,left:t.left-(e.width-t.width)/2,name:"s"}),southEast:t=>({top:t.bottom,left:t.left,name:"se"}),southWest:(t,e)=>({top:t.bottom,left:t.left-e.width+t.width,name:"sw"}),southMiddleEast:(t,e)=>({top:t.bottom,left:t.left-(e.width-t.width)/4,name:"sme"}),southMiddleWest:(t,e)=>({top:t.bottom,left:t.left-3*(e.width-t.width)/4,name:"smw"}),north:(t,e)=>({top:t.top-e.height,left:t.left-(e.width-t.width)/2,name:"n"}),northEast:(t,e)=>({top:t.top-e.height,left:t.left,name:"ne"}),northWest:(t,e)=>({top:t.top-e.height,left:t.left-e.width+t.width,name:"nw"}),northMiddleEast:(t,e)=>({top:t.top-e.height,left:t.left-(e.width-t.width)/4,name:"nme"}),northMiddleWest:(t,e)=>({top:t.top-e.height,left:t.left-3*(e.width-t.width)/4,name:"nmw"})};static _getOptimalPosition=Ue}class Ah extends Lu{arrowView;constructor(t){super(t),this.arrowView=this._createArrowView(),this.extendTemplate({attributes:{"aria-haspopup":!0,"aria-expanded":this.bindTemplate.to("isOn",t=>String(t))}}),this.delegate("execute").to(this,"open")}render(){super.render(),this.children.add(this.arrowView)}_createArrowView(){const t=new Mu;return t.content=Bc,t.extendTemplate({attributes:{class:"ck-dropdown__arrow"}}),t}}class Eh extends ku{children;constructor(t){super(t);const e=this.bindTemplate;this.set("isVisible",!0),this.children=this.createCollection(),this.setTemplate({tag:"li",attributes:{class:["ck","ck-list__item",e.if("isVisible","ck-hidden",t=>!t)],role:"presentation"},children:this.children})}focus(){this.children.first&&this.children.first.focus()}}class Sh extends ku{constructor(t){super(t),this.setTemplate({tag:"li",attributes:{class:["ck","ck-list__separator"]}})}}class Th extends ku{labelView;items;children;constructor(t,e=new Tu){super(t);const n=this.bindTemplate,i=new Ih(t);this.set({label:"",isVisible:!0}),this.labelView=e,this.labelView.bind("text").to(this,"label"),this.children=this.createCollection(),this.children.addMany([this.labelView,i]),i.set({role:"group",ariaLabelledBy:e.id}),i.focusTracker.destroy(),i.keystrokes.destroy(),this.items=i.items,this.setTemplate({tag:"li",attributes:{role:"presentation",class:["ck","ck-list__group",n.if("isVisible","ck-hidden",t=>!t)]},children:this.children})}focus(){if(this.items){const t=this.items.find(t=>!(t instanceof Sh));t&&t.focus()}}}class Ih extends ku{focusables;items;focusTracker;keystrokes;_focusCycler;_listItemGroupToChangeListeners=new WeakMap;constructor(t){super(t);const e=this.bindTemplate;this.focusables=new Qd,this.items=this.createCollection(),this.focusTracker=new _n,this.keystrokes=new xn,this._focusCycler=new Ou({focusables:this.focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"arrowup",focusNext:"arrowdown"}}),this.set("ariaLabel",void 0),this.set("ariaLabelledBy",void 0),this.set("role",void 0),this.setTemplate({tag:"ul",attributes:{class:["ck","ck-reset","ck-list"],role:e.to("role"),"aria-label":e.to("ariaLabel"),"aria-labelledby":e.to("ariaLabelledBy")},children:this.items})}render(){super.render();for(const t of this.items)t instanceof Th?this._registerFocusableItemsGroup(t):t instanceof Eh&&this._registerFocusableListItem(t);this.items.on("change",(t,e)=>{for(const t of e.removed)t instanceof Th?this._deregisterFocusableItemsGroup(t):t instanceof Eh&&this._deregisterFocusableListItem(t);for(const t of Array.from(e.added).reverse())t instanceof Th?this._registerFocusableItemsGroup(t,e.index):this._registerFocusableListItem(t,e.index)}),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){this._focusCycler.focusFirst()}focusFirst(){this._focusCycler.focusFirst()}focusLast(){this._focusCycler.focusLast()}_registerFocusableListItem(t,e){this.focusTracker.add(t.element),this.focusables.add(t,e)}_deregisterFocusableListItem(t){this.focusTracker.remove(t.element),this.focusables.remove(t)}_getOnGroupItemsChangeCallback(t){return(e,n)=>{for(const t of n.removed)this._deregisterFocusableListItem(t);for(const e of Array.from(n.added).reverse())this._registerFocusableListItem(e,this.items.getIndex(t)+n.index)}}_registerFocusableItemsGroup(t,e){Array.from(t.items).forEach((t,n)=>{const i=void 0!==e?e+n:void 0;this._registerFocusableListItem(t,i)});const n=this._getOnGroupItemsChangeCallback(t);this._listItemGroupToChangeListeners.set(t,n),t.items.on("change",n)}_deregisterFocusableItemsGroup(t){for(const e of t.items)this._deregisterFocusableListItem(e);t.items.off("change",this._listItemGroupToChangeListeners.get(t)),this._listItemGroupToChangeListeners.delete(t)}}class Ph extends ku{constructor(t){super(t),this.setTemplate({tag:"span",attributes:{class:["ck","ck-toolbar__separator"]}})}}class Mh extends ku{constructor(t){super(t),this.setTemplate({tag:"span",attributes:{class:["ck","ck-toolbar__line-break"]}})}}function Nh(t){if(Array.isArray(t))return{items:t,removeItems:[]};const e={items:[],removeItems:[]};return t?{...e,...t}:e}const Lh=(()=>({alignLeft:Mc,bold:Lc,importExport:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M19 4.5 14 0H3v12.673l.868-1.041c.185-.222.4-.402.632-.54V1.5h8v5h5v7.626a2.24 2.24 0 0 1 1.5.822zM14 5V2l3.3 3zm-3.692 12.5q.093.157.213.303L11.52 19H8v-.876a2.24 2.24 0 0 0 1.82-.624zm7.518-.657a.75.75 0 0 0-1.152-.96L15.5 17.29V12H14v5.29l-1.174-1.408a.75.75 0 0 0-1.152.96l2.346 2.816a.95.95 0 0 0 1.46 0zm-15.056-.38a.75.75 0 0 1-.096-1.056l2.346-2.815a.95.95 0 0 1 1.46 0l2.346 2.815a.75.75 0 1 1-1.152.96L6.5 14.96V20H5v-5.04l-1.174 1.408a.75.75 0 0 1-1.056.096Z"/></svg>',paragraph:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M10.5 5.5H7v5h3.5a2.5 2.5 0 1 0 0-5M5 3h6.5v.025a5 5 0 0 1 0 9.95V13H7v4a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1"/></svg>',plus:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M10 2a1 1 0 0 0-1 1v6H3a1 1 0 1 0 0 2h6v6a1 1 0 1 0 2 0v-6h6a1 1 0 1 0 0-2h-6V3a1 1 0 0 0-1-1"/></svg>',text:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M9.816 11.5 7.038 4.785 4.261 11.5zm.62 1.5H3.641l-1.666 4.028H.312l5.789-14h1.875l5.789 14h-1.663z"/><path d="m12.09 17-.534-1.292.848-1.971.545 1.319L12.113 17zm1.142-5.187.545 1.319L15.5 9.13l1.858 4.316h-3.45l.398.965h3.467L18.887 17H20l-3.873-9h-1.254z"/></svg>',threeVerticalDots:od,pilcrow:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M6.999 2H15a1 1 0 0 1 0 2h-1.004v13a1 1 0 1 1-2 0V4H8.999v13a1 1 0 1 1-2 0v-7A4 4 0 0 1 3 6a4 4 0 0 1 3.999-4"/></svg>',dragIndicator:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M5 3.25a1.5 1.5 0 1 0 3 0 1.5 1.5 0 1 0-3 0m7 0a1.5 1.5 0 1 0 3 0 1.5 1.5 0 1 0-3 0M5 10a1.5 1.5 0 1 0 3 0 1.5 1.5 0 1 0-3 0m7 0a1.5 1.5 0 1 0 3 0 1.5 1.5 0 1 0-3 0m-7 6.75a1.5 1.5 0 1 0 3 0 1.5 1.5 0 1 0-3 0m7 0a1.5 1.5 0 1 0 3 0 1.5 1.5 0 1 0-3 0"/></svg>'}))();class Vh extends ku{options;items;focusTracker;keystrokes;itemsView;children;focusables;_focusCycler;_behavior;constructor(t,e){super(t);const n=this.bindTemplate,i=this.t;this.options=e||{},this.set("ariaLabel",i("Editor toolbar")),this.set("maxWidth","auto"),this.set("role","toolbar"),this.set("isGrouping",!!this.options.shouldGroupWhenFull),this.items=this.createCollection(),this.focusTracker=new _n,this.keystrokes=new xn,this.set("class",void 0),this.set("isCompact",!1),this.set("isVertical",!1),this.itemsView=new zh(t),this.children=this.createCollection(),this.children.add(this.itemsView),this.focusables=this.createCollection();const o="rtl"===t.uiLanguageDirection;this._focusCycler=new Ou({focusables:this.focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:[o?"arrowright":"arrowleft","arrowup"],focusNext:[o?"arrowleft":"arrowright","arrowdown"]}});const r=["ck","ck-toolbar",n.to("class"),n.if("isCompact","ck-toolbar_compact"),n.if("isGrouping","ck-toolbar_grouping"),n.if("isVertical","ck-toolbar_vertical")];var s;this.options.shouldGroupWhenFull&&this.options.isFloating&&r.push("ck-toolbar_floating"),this.setTemplate({tag:"div",attributes:{class:r,role:n.to("role"),"aria-label":n.to("ariaLabel"),style:{maxWidth:n.to("maxWidth")},tabindex:-1},children:this.children,on:{mousedown:(s=this,s.bindTemplate.to(t=>{t.target===s.element&&t.preventDefault()}))}}),this._behavior=this.options.shouldGroupWhenFull?new Rh(this):new Oh(this)}render(){super.render(),this.focusTracker.add(this.element);for(const t of this.items)this.focusTracker.add(t);this.items.on("add",(t,e)=>{this.focusTracker.add(e)}),this.items.on("remove",(t,e)=>{this.focusTracker.remove(e)}),this.keystrokes.listenTo(this.element),this._behavior.render(this)}destroy(){return this._behavior.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy(),super.destroy()}focus(){this._focusCycler.focusFirst()}focusLast(){this._focusCycler.focusLast()}fillFromConfig(t,e,n){this.items.addMany(this._buildItemsFromConfig(t,e,n))}switchBehavior(t){this._behavior.type!==t&&(this._behavior.destroy(),this.itemsView.children.clear(),this.focusables.clear(),"dynamic"===t?(this._behavior=new Rh(this),this._behavior.render(this),this._behavior.refreshItems()):(this._behavior=new Oh(this),this._behavior.render(this)))}_buildItemsFromConfig(t,e,n){const i=Nh(t),o=n||i.removeItems;return this._cleanItemsConfiguration(i.items,e,o).map(t=>x(t)?this._createNestedToolbarDropdown(t,e,o):"|"===t?new Ph:"-"===t?new Mh:e.create(t)).filter(t=>!!t)}_cleanItemsConfiguration(t,e,n){const i=t.filter((t,i,o)=>"|"===t||-1===n.indexOf(t)&&("-"===t?!this.options.shouldGroupWhenFull||(zt("toolbarview-line-break-ignored-when-grouping-items",o),!1):!(!x(t)&&!e.has(t)&&(zt("toolbarview-item-unavailable",{item:t}),1))));return this._cleanSeparatorsAndLineBreaks(i)}_cleanSeparatorsAndLineBreaks(t){const e=t=>"-"!==t&&"|"!==t,n=t.length,i=t.findIndex(e);if(-1===i)return[];const o=n-t.slice().reverse().findIndex(e);return t.slice(i,o).filter((t,n,i)=>!!e(t)||!(n>0&&i[n-1]===t))}_createNestedToolbarDropdown(t,e,n){let{label:i,icon:o,items:r,tooltip:s=!0,withText:a=!1}=t;if(r=this._cleanItemsConfiguration(r,e,n),!r.length)return null;const l=Bh(this.locale);return i||zt("toolbarview-nested-toolbar-dropdown-missing-label",t),l.class="ck-toolbar__nested-toolbar-dropdown",l.buttonView.set({label:i,tooltip:s,withText:!!a}),!1!==o?l.buttonView.icon=Lh[o]||o||od:l.buttonView.withText=!0,Fh(l,()=>l.toolbarView._buildItemsFromConfig(r,e,n)),l}}class zh extends ku{children;constructor(t){super(t),this.children=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-toolbar__items"]},children:this.children})}}class Oh{type="static";constructor(t){t.isGrouping=!1,t.itemsView.children.bindTo(t.items).using(t=>t),t.focusables.bindTo(t.items).using(t=>Du(t)?t:null)}render(){}destroy(){}}class Rh{type="dynamic";view;viewChildren;viewFocusables;viewItemsView;viewFocusTracker;viewLocale;ungroupedItems;groupedItems;groupedItemsDropdown;resizeObserver=null;cachedPadding=null;shouldUpdateGroupingOnNextResize=!1;viewElement;constructor(t){this.view=t,this.viewChildren=t.children,this.viewFocusables=t.focusables,this.viewItemsView=t.itemsView,this.viewFocusTracker=t.focusTracker,this.viewLocale=t.locale,this.view.isGrouping=!0,this.ungroupedItems=t.createCollection(),this.groupedItems=t.createCollection(),this.groupedItemsDropdown=this._createGroupedItemsDropdown(),t.itemsView.children.bindTo(this.ungroupedItems).using(t=>t),this.ungroupedItems.on("change",this._updateFocusCyclableItems.bind(this)),t.children.on("change",this._updateFocusCyclableItems.bind(this)),t.items.on("change",(t,e)=>{const n=e.index,i=Array.from(e.added);for(const t of e.removed)n>=this.ungroupedItems.length?this.groupedItems.remove(t):this.ungroupedItems.remove(t);for(let t=n;t<n+i.length;t++){const e=i[t-n];t>this.ungroupedItems.length?this.groupedItems.add(e,t-this.ungroupedItems.length):this.ungroupedItems.add(e,t)}this._updateGrouping()})}render(t){this.viewElement=t.element,this._enableGroupingOnResize(),this._enableGroupingOnMaxWidthChange(t)}destroy(){this.groupedItemsDropdown.destroy(),this.viewChildren.length>1&&(this.viewChildren.remove(this.groupedItemsDropdown),this.viewChildren.remove(this.viewChildren.last)),this.resizeObserver.destroy()}refreshItems(){const t=this.view;if(t.items.length){for(let e=0;e<t.items.length;e++){const n=[...t.items][e];this.ungroupedItems.add(n,e)}this._updateGrouping()}}_updateGrouping(){if(!this.viewElement.ownerDocument.body.contains(this.viewElement))return;if(!He(this.viewElement))return void(this.shouldUpdateGroupingOnNextResize=!0);const t=this.groupedItems.length;let e;for(;this._areItemsOverflowing;)this._groupLastItem(),e=!0;if(!e&&this.groupedItems.length){for(;this.groupedItems.length&&!this._areItemsOverflowing;)this._ungroupFirstItem();this._areItemsOverflowing&&this._groupLastItem()}this.groupedItems.length!==t&&this.view.fire("groupedItemsUpdate")}get _areItemsOverflowing(){if(!this.ungroupedItems.length)return!1;const t=this.viewElement,e=this.viewLocale.uiLanguageDirection,n=new Ie(t.lastChild),i=new Ie(t);if(!this.cachedPadding){const n=gt.window.getComputedStyle(t),i="ltr"===e?"paddingRight":"paddingLeft";this.cachedPadding=Number.parseInt(n[i])}return"ltr"===e?n.right>i.right-this.cachedPadding:n.left<i.left+this.cachedPadding}_enableGroupingOnResize(){let t;this.resizeObserver=new ze(this.viewElement,e=>{t&&t===e.contentRect.width&&!this.shouldUpdateGroupingOnNextResize||(this.shouldUpdateGroupingOnNextResize=!1,this._updateGrouping(),t=e.contentRect.width)}),this._updateGrouping()}_enableGroupingOnMaxWidthChange(t){t.on("change:maxWidth",()=>{this._updateGrouping()})}_groupLastItem(){this.groupedItems.length||(this.viewChildren.add(new Ph),this.viewChildren.add(this.groupedItemsDropdown),this.viewFocusTracker.add(this.groupedItemsDropdown.element)),this.groupedItems.add(this.ungroupedItems.remove(this.ungroupedItems.last),0)}_ungroupFirstItem(){this.ungroupedItems.add(this.groupedItems.remove(this.groupedItems.first)),this.groupedItems.length||(this.viewChildren.remove(this.groupedItemsDropdown),this.viewChildren.remove(this.viewChildren.last),this.viewFocusTracker.remove(this.groupedItemsDropdown.element))}_createGroupedItemsDropdown(){const t=this.viewLocale,e=t.t,n=Bh(t);return n.class="ck-toolbar__grouped-dropdown",n.panelPosition="ltr"===t.uiLanguageDirection?"sw":"se",Fh(n,this.groupedItems),n.buttonView.set({label:e("Show more items"),tooltip:!0,tooltipPosition:"rtl"===t.uiLanguageDirection?"se":"sw",icon:od}),n}_updateFocusCyclableItems(){this.viewFocusables.clear(),this.ungroupedItems.map(t=>{Du(t)&&this.viewFocusables.add(t)}),this.groupedItems.length&&this.viewFocusables.add(this.groupedItemsDropdown)}}class Dh extends ku{children;actionView;arrowView;keystrokes;focusTracker;constructor(t,e){super(t);const n=this.bindTemplate;this.set("class",void 0),this.set("labelStyle",void 0),this.set("icon",void 0),this.set("isEnabled",!0),this.set("isOn",!1),this.set("isToggleable",!1),this.set("isVisible",!0),this.set("keystroke",void 0),this.set("withKeystroke",!1),this.set("label",void 0),this.set("tabindex",-1),this.set("tooltip",!1),this.set("tooltipPosition","s"),this.set("type","button"),this.set("withText",!1),this.children=this.createCollection(),this.actionView=this._createActionView(e),this.arrowView=this._createArrowView(),this.keystrokes=new xn,this.focusTracker=new _n,this.setTemplate({tag:"div",attributes:{class:["ck","ck-splitbutton",n.to("class"),n.if("isVisible","ck-hidden",t=>!t),this.arrowView.bindTemplate.if("isOn","ck-splitbutton_open")]},children:this.children})}render(){super.render(),this.children.add(this.actionView),this.children.add(this.arrowView),this.focusTracker.add(this.actionView.element),this.focusTracker.add(this.arrowView.element),this.keystrokes.listenTo(this.element),this.keystrokes.set("arrowright",(t,e)=>{this.focusTracker.focusedElement===this.actionView.element&&(this.arrowView.focus(),e())}),this.keystrokes.set("arrowleft",(t,e)=>{this.focusTracker.focusedElement===this.arrowView.element&&(this.actionView.focus(),e())})}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){this.actionView.focus()}_createActionView(t){const e=t||new Lu;return t||e.bind("icon","isEnabled","isOn","isToggleable","keystroke","label","tabindex","tooltip","tooltipPosition","type","withText").to(this),e.extendTemplate({attributes:{class:"ck-splitbutton__action"}}),e.delegate("execute").to(this),e}_createArrowView(){const t=new Lu,e=t.bindTemplate;return t.icon=Bc,t.extendTemplate({attributes:{class:["ck-splitbutton__arrow"],"data-cke-tooltip-disabled":e.to("isOn"),"aria-haspopup":!0,"aria-expanded":e.to("isOn",t=>String(t))}}),t.bind("isEnabled").to(this),t.bind("label").to(this),t.bind("tooltip").to(this),t.delegate("execute").to(this,"open"),t}}function Bh(t,e=Ah){const n="function"==typeof e?new e(t):e,i=new Ch(t),o=new xh(t,n,i);return n.bind("isEnabled").to(o),n instanceof Dh?n.arrowView.bind("isOn").to(o,"isOpen"):n.bind("isOn").to(o,"isOpen"),function(t){(function(t){Cu({emitter:t,activator:()=>t.isRendered&&t.isOpen,callback:()=>{t.isOpen=!1},contextElements:()=>[t.element,...Wh(t.focusTracker).filter(e=>!t.element.contains(e))]})})(t),function(t){t.on("execute",e=>{e.source instanceof rh||(t.isOpen=!1)})}(t),function(t){t.focusTracker.on("change:isFocused",(e,n,i)=>{!i&&t.isOpen&&(t.isOpen=!1)})}(t),function(t){t.keystrokes.set("arrowdown",(e,n)=>{t.isOpen&&(t.panelView.focus(),n())}),t.keystrokes.set("arrowup",(e,n)=>{t.isOpen&&(t.panelView.focusLast(),n())})}(t),function(t){t.on("change:isOpen",(e,n,i)=>{i||t.focusTracker.elements.some(t=>t.contains(gt.document.activeElement))&&t.buttonView.focus()})}(t),function(t){t.on("change:isOpen",(e,n,i)=>{i&&t.panelView.focus()},{priority:"low"})}(t)}(o),o}function Fh(t,e,n={}){t.extendTemplate({attributes:{class:["ck-toolbar-dropdown"]}}),t.isOpen?jh(t,e,n):t.once("change:isOpen",()=>jh(t,e,n),{priority:"highest"}),n.enableActiveItemFocusOnDropdownOpen&&$h(t,()=>t.toolbarView.items.find(t=>t.isOn))}function jh(t,e,n){const i=t.locale,o=i.t,r=t.toolbarView=new Vh(i),s="function"==typeof e?e():e;r.ariaLabel=n.ariaLabel||o("Dropdown toolbar"),n.maxWidth&&(r.maxWidth=n.maxWidth),n.class&&(r.class=n.class),n.isCompact&&(r.isCompact=n.isCompact),n.isVertical&&(r.isVertical=!0),s instanceof Qd?r.items.bindTo(s).using(t=>t):r.items.addMany(s),t.panelView.children.add(r),t.focusTracker.add(r),r.items.delegate("execute").to(t)}function Hh(t,e,n={}){t.isOpen?Uh(t,e,n):t.once("change:isOpen",()=>Uh(t,e,n),{priority:"highest"}),$h(t,()=>t.listView.items.find(t=>t instanceof Eh&&t.children.first.isOn))}function Uh(t,e,n){const i=t.locale,o=t.listView=new Ih(i),r="function"==typeof e?e():e;o.ariaLabel=n.ariaLabel,o.role=n.role,qh(t,o.items,r,i),t.panelView.children.add(o),o.items.delegate("execute").to(t)}function $h(t,e){t.on("change:isOpen",()=>{if(!t.isOpen)return;const n=e();n&&("function"==typeof n.focus?n.focus():zt("ui-dropdown-focus-child-on-open-child-missing-focus",{view:n}))},{priority:Nt.low-10})}function Wh(t){return[...t.elements,...t.externalViews.flatMap(t=>Wh(t.focusTracker))]}function qh(t,e,n,i){!function(t){let e=0;const n=t=>t instanceof Eh&&t.children.first instanceof qu?t.children.first:null,i=t=>{const e=n(t);return e&&e.isToggleable?e:null};t.on("change",(o,r)=>{const s=e>0;for(const t of r.removed)i(t)&&e--;for(const t of r.added){const i=n(t);i&&(i.isToggleable&&e++,i.hasCheckSpace=e>0)}const a=e>0;s!==a&&(e=>{for(const i of t){const t=n(i);t&&(t.hasCheckSpace=e)}})(a)})}(e),e.bindTo(n).using(e=>{if("separator"===e.type)return new Sh(i);if("group"===e.type){const n=new Th(i);return n.set({label:e.label}),qh(t,n.items,e.items,i),n.items.delegate("execute").to(t),n}if("button"===e.type||"switchbutton"===e.type){const t="menuitemcheckbox"===e.model.role||"menuitemradio"===e.model.role,n=new Eh(i);let o;return"button"===e.type?(o=new qu(i),o.set({isToggleable:t})):o=new rh(i),o.bind(...Object.keys(e.model)).to(e.model),o.delegate("execute").to(n),n.children.add(o),n}return null})}const Kh=(t,e,n)=>{const i=new vh(t.locale);return i.set({id:e,ariaDescribedById:n}),i.bind("isReadOnly").to(t,"isEnabled",t=>!t),i.bind("hasError").to(t,"errorText",t=>!!t),i.on("input",()=>{t.errorText=null}),t.bind("isEmpty","isFocused","placeholder").to(i),i},Gh=(t,e,n)=>{const i=new yh(t.locale);return i.set({id:e,ariaDescribedById:n,inputMode:"numeric"}),i.bind("isReadOnly").to(t,"isEnabled",t=>!t),i.bind("hasError").to(t,"errorText",t=>!!t),i.on("input",()=>{t.errorText=null}),t.bind("isEmpty","isFocused","placeholder").to(i),i},Qh=(t,e,n)=>{const i=Bh(t.locale);return i.set({id:e,ariaDescribedById:n}),i.bind("isEnabled").to(t),i};class Yh extends ku{hexInputRow;_debounceColorPickerEvent;_config;constructor(t,e={}){super(t),this.set({color:"",_hexColor:""}),this.hexInputRow=this._createInputRow();const n=this.createCollection();e.hideInput||n.add(this.hexInputRow),this.setTemplate({tag:"div",attributes:{class:["ck","ck-color-picker"],tabindex:-1},children:n}),this._config=e,this._debounceColorPickerEvent=ti(t=>{this.set("color",t),this.fire("colorSelected",{color:this.color})},150,{leading:!0}),this.on("set:color",(t,e,n)=>{t.return=fh(n,this._config.format||"hsl")}),this.on("change:color",()=>{this._hexColor=Jh(this.color)}),this.on("change:_hexColor",()=>{document.activeElement!==this.picker&&this.picker.setAttribute("color",this._hexColor),Jh(this.color)!=Jh(this._hexColor)&&(this.color=this._hexColor)})}render(){var t,e;if(super.render(),t="hex-color-picker",e=Gd,void 0===customElements.get(t)&&customElements.define(t,e),this.picker=gt.document.createElement("hex-color-picker"),this.picker.setAttribute("class","hex-color-picker"),this.picker.setAttribute("tabindex","-1"),this._createSlidersView(),this.element){this.hexInputRow.element?this.element.insertBefore(this.picker,this.hexInputRow.element):this.element.appendChild(this.picker);const t=document.createElement("style");t.textContent='[role="slider"]:focus [part$="pointer"] {border: 1px solid #fff;outline: 1px solid var(--ck-color-focus-border);box-shadow: 0 0 0 2px #fff;}',this.picker.shadowRoot.appendChild(t)}this.picker.addEventListener("color-changed",t=>{const e=t.detail.value;this._debounceColorPickerEvent(e)})}focus(){!this._config.hideInput&&(ft.isGecko||ft.isiOS||ft.isSafari||ft.isBlink)&&this.hexInputRow.children.get(1).focus(),this.slidersView.first.focus()}_createSlidersView(){const t=[...this.picker.shadowRoot.children].filter(t=>"slider"===t.getAttribute("role")).map(t=>new Zh(t));this.slidersView=this.createCollection(),t.forEach(t=>{this.slidersView.add(t)})}_createInputRow(){const t=this._createColorInput();return new tg(this.locale,t)}_createColorInput(){const t=new kh(this.locale,Kh),{t:e}=this.locale;return t.set({label:e("HEX"),class:"color-picker-hex-input"}),t.fieldView.bind("value").to(this,"_hexColor",e=>t.isFocused?t.fieldView.value:e.startsWith("#")?e.substring(1):e),t.fieldView.on("input",()=>{const e=t.fieldView.element.value;if(e){const t=eg(e);t&&this._debounceColorPickerEvent(t)}}),t}isValid(){const{t}=this.locale;return!!this._config.hideInput||(this.resetValidationStatus(),!!this.hexInputRow.getParsedColor()||(this.hexInputRow.inputView.errorText=t('Please enter a valid color (e.g. "ff0000").'),!1))}resetValidationStatus(){this.hexInputRow.inputView.errorText=null}}function Jh(t){let e=function(t){if(!t)return"";const e=bh(t);return e?"hex"===e.space?e.hexValue:fh(t,"hex"):"#000"}(t);return e||(e="#000"),4===e.length&&(e="#"+[e[1],e[1],e[2],e[2],e[3],e[3]].join("")),e.toLowerCase()}class Zh extends ku{constructor(t){super(),this.element=t}focus(){this.element.focus()}}class Xh extends ku{constructor(t){super(t),this.setTemplate({tag:"div",attributes:{class:["ck","ck-color-picker__hash-view"]},children:"#"})}}class tg extends ku{children;inputView;constructor(t,e){super(t),this.inputView=e,this.children=this.createCollection([new Xh,this.inputView]),this.setTemplate({tag:"div",attributes:{class:["ck","ck-color-picker__row"]},children:this.children})}getParsedColor(){return eg(this.inputView.fieldView.element.value)}}function eg(t){if(!t)return null;const e=t.trim().replace(/^#/,"");return[3,4,6,8].includes(e.length)&&/^(([0-9a-fA-F]{2}){3,4}|([0-9a-fA-F]){3,4})$/.test(e)?`#${e}`:null}class ng extends(ie(kn)){constructor(t){super(t),this.set("isEmpty",!0),this.on("change",()=>{this.set("isEmpty",0===this.length)})}add(t,e){return this.find(e=>e.color===t.color)?this:super.add(t,e)}hasColor(t){return!!this.find(e=>e.color===t)}}class ig extends ku{items;colorDefinitions;focusTracker;columns;documentColors;documentColorsCount;staticColorsGrid;documentColorsGrid;colorPickerButtonView;removeColorButtonView;_focusables;_documentColorsLabel;_removeButtonLabel;_colorPickerLabel;constructor(t,{colors:e,columns:n,removeButtonLabel:i,documentColorsLabel:o,documentColorsCount:r,colorPickerLabel:s,focusTracker:a,focusables:l}){super(t);const c=this.bindTemplate;this.set("isVisible",!0),this.focusTracker=a,this.items=this.createCollection(),this.colorDefinitions=e,this.columns=n,this.documentColors=new ng,this.documentColorsCount=r,this._focusables=l,this._removeButtonLabel=i,this._colorPickerLabel=s,this._documentColorsLabel=o,this.setTemplate({tag:"div",attributes:{class:["ck-color-grids-fragment",c.if("isVisible","ck-hidden",t=>!t)]},children:this.items}),this.removeColorButtonView=this._createRemoveColorButton(),this.items.add(this.removeColorButtonView)}updateDocumentColors(t,e){const n=t.document,i=this.documentColorsCount;this.documentColors.clear();for(const o of n.getRoots()){const n=t.createRangeIn(o);for(const t of n.getItems())if(t.is("$textProxy")&&t.hasAttribute(e)&&(this._addColorToDocumentColors(t.getAttribute(e)),this.documentColors.length>=i))return}}updateSelectedColors(){const t=this.documentColorsGrid,e=this.staticColorsGrid,n=this.selectedColor;e.selectedColor=n,t&&(t.selectedColor=n)}render(){if(super.render(),this.staticColorsGrid=this._createStaticColorsGrid(),this.items.add(this.staticColorsGrid),this.documentColorsCount){const t=Yd.bind(this.documentColors,this.documentColors),e=new ku(this.locale);e.setTemplate({tag:"span",attributes:{class:["ck","ck-color-grid__label",t.if("isEmpty","ck-hidden")]},children:[{text:this._documentColorsLabel}]}),this.items.add(e),this.documentColorsGrid=this._createDocumentColorsGrid(),this.items.add(this.documentColorsGrid)}this._createColorPickerButton(),this._addColorSelectorElementsToFocusTracker()}focus(){this.removeColorButtonView.focus()}destroy(){super.destroy()}addColorPickerButton(){this.colorPickerButtonView&&(this.items.add(this.colorPickerButtonView),this.focusTracker.add(this.colorPickerButtonView.element),this._focusables.add(this.colorPickerButtonView))}_addColorSelectorElementsToFocusTracker(){this.focusTracker.add(this.removeColorButtonView.element),this._focusables.add(this.removeColorButtonView),this.staticColorsGrid&&(this.focusTracker.add(this.staticColorsGrid.element),this._focusables.add(this.staticColorsGrid)),this.documentColorsGrid&&(this.focusTracker.add(this.documentColorsGrid.element),this._focusables.add(this.documentColorsGrid))}_createColorPickerButton(){this.colorPickerButtonView=new Lu,this.colorPickerButtonView.set({label:this._colorPickerLabel,withText:!0,icon:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M10.209 18.717A8.5 8.5 0 1 1 18.686 9.6h-.008l.002.12a3 3 0 0 1-2.866 2.997h-.268l-.046-.002v.002h-4.791a2 2 0 1 0 0 4 1 1 0 1 1-.128 1.992 9 9 0 0 1-.372.008m-3.918-7.01a1.25 1.25 0 1 0-2.415-.648 1.25 1.25 0 0 0 2.415.647ZM5.723 8.18a1.25 1.25 0 1 0 .647-2.414 1.25 1.25 0 0 0-.647 2.414M9.76 6.155a1.25 1.25 0 1 0 .647-2.415 1.25 1.25 0 0 0-.647 2.415m4.028 1.759a1.25 1.25 0 1 0 .647-2.415 1.25 1.25 0 0 0-.647 2.415"/></svg>',class:"ck-color-selector__color-picker"}),this.colorPickerButtonView.on("execute",()=>{this.fire("colorPicker:show")})}_createRemoveColorButton(){const t=new Lu;return t.set({withText:!0,icon:Fc,label:this._removeButtonLabel}),t.class="ck-color-selector__remove-color",t.on("execute",()=>{this.fire("execute",{value:null,source:"removeColorButton"})}),t.render(),t}_createStaticColorsGrid(){const t=new ph(this.locale,{colorDefinitions:this.colorDefinitions,columns:this.columns});return t.on("execute",(t,e)=>{this.fire("execute",{value:e.value,source:"staticColorsGrid"})}),t}_createDocumentColorsGrid(){const t=Yd.bind(this.documentColors,this.documentColors),e=new ph(this.locale,{columns:this.columns});return e.extendTemplate({attributes:{class:t.if("isEmpty","ck-hidden")}}),e.items.bindTo(this.documentColors).using(t=>{const e=new mh;return e.set({color:t.color,hasBorder:t.options?.hasBorder}),t.label&&e.set({label:t.label,tooltip:!0}),e.on("execute",()=>{this.fire("execute",{value:t.color,source:"documentColorsGrid"})}),e}),this.documentColors.on("change:isEmpty",(t,n,i)=>{i&&(e.selectedColor=null)}),e}_addColorToDocumentColors(t){const e=this.colorDefinitions.find(e=>e.color===t);e?this.documentColors.add(Object.assign({},e)):this.documentColors.add({color:t,label:t,options:{hasBorder:!1}})}}class og extends ku{items;colorPickerView;saveButtonView;cancelButtonView;actionBarView;focusTracker;keystrokes;_focusables;_colorPickerViewConfig;constructor(t,{focusTracker:e,focusables:n,keystrokes:i,colorPickerViewConfig:o}){super(t),this.items=this.createCollection(),this.focusTracker=e,this.keystrokes=i,this.set("isVisible",!1),this.set("selectedColor",void 0),this._focusables=n,this._colorPickerViewConfig=o;const r=this.bindTemplate,{saveButtonView:s,cancelButtonView:a}=this._createActionButtons();this.saveButtonView=s,this.cancelButtonView=a,this.actionBarView=this._createActionBarView({saveButtonView:s,cancelButtonView:a}),this.setTemplate({tag:"div",attributes:{class:["ck-color-picker-fragment",r.if("isVisible","ck-hidden",t=>!t)]},children:this.items})}render(){super.render();const t=new Yh(this.locale,{...this._colorPickerViewConfig});this.colorPickerView=t,this.colorPickerView.render(),this.selectedColor&&(t.color=this.selectedColor),this.listenTo(this,"change:selectedColor",(e,n,i)=>{t.color=i}),this.items.add(this.colorPickerView),this.items.add(this.actionBarView),this._addColorPickersElementsToFocusTracker(),this._stopPropagationOnArrowsKeys(),this._executeOnEnterPress(),this._executeUponColorChange()}destroy(){super.destroy()}focus(){this.colorPickerView.focus()}resetValidationStatus(){this.colorPickerView.resetValidationStatus()}_executeOnEnterPress(){this.keystrokes.set("enter",t=>{this.isVisible&&this.focusTracker.focusedElement!==this.cancelButtonView.element&&this.colorPickerView.isValid()&&(this.fire("execute",{value:this.selectedColor}),t.stopPropagation(),t.preventDefault())})}_stopPropagationOnArrowsKeys(){const t=t=>t.stopPropagation();this.keystrokes.set("arrowright",t),this.keystrokes.set("arrowleft",t),this.keystrokes.set("arrowup",t),this.keystrokes.set("arrowdown",t)}_addColorPickersElementsToFocusTracker(){for(const t of this.colorPickerView.slidersView)this.focusTracker.add(t.element),this._focusables.add(t);const t=this.colorPickerView.hexInputRow.children.get(1);t.element&&(this.focusTracker.add(t.element),this._focusables.add(t)),this.focusTracker.add(this.saveButtonView.element),this._focusables.add(this.saveButtonView),this.focusTracker.add(this.cancelButtonView.element),this._focusables.add(this.cancelButtonView)}_createActionBarView({saveButtonView:t,cancelButtonView:e}){const n=new ku,i=this.createCollection();return i.add(t),i.add(e),n.setTemplate({tag:"div",attributes:{class:["ck","ck-color-selector_action-bar"]},children:i}),n}_createActionButtons(){const t=this.locale,e=t.t,n=new Lu(t),i=new Lu(t);return n.set({icon:Rc,class:"ck-button-save",type:"button",withText:!1,label:e("Accept")}),i.set({icon:zc,class:"ck-button-cancel",type:"button",withText:!1,label:e("Cancel")}),n.on("execute",()=>{this.colorPickerView.isValid()&&this.fire("execute",{source:"colorPickerSaveButton",value:this.selectedColor})}),i.on("execute",()=>{this.fire("colorPicker:cancel")}),{saveButtonView:n,cancelButtonView:i}}_executeUponColorChange(){this.colorPickerView.on("colorSelected",(t,e)=>{this.fire("execute",{value:e.color,source:"colorPicker"}),this.set("selectedColor",e.color)})}}class rg extends ku{focusTracker;keystrokes;items;colorGridsFragmentView;colorPickerFragmentView;_focusCycler;_focusables;_colorPickerViewConfig;constructor(t,{colors:e,columns:n,removeButtonLabel:i,documentColorsLabel:o,documentColorsCount:r,colorPickerLabel:s,colorPickerViewConfig:a}){super(t),this.items=this.createCollection(),this.focusTracker=new _n,this.keystrokes=new xn,this._focusables=new Qd,this._colorPickerViewConfig=a,this._focusCycler=new Ou({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.colorGridsFragmentView=new ig(t,{colors:e,columns:n,removeButtonLabel:i,documentColorsLabel:o,documentColorsCount:r,colorPickerLabel:s,focusTracker:this.focusTracker,focusables:this._focusables}),this.colorPickerFragmentView=new og(t,{focusables:this._focusables,focusTracker:this.focusTracker,keystrokes:this.keystrokes,colorPickerViewConfig:a}),this.set("_isColorGridsFragmentVisible",!0),this.set("_isColorPickerFragmentVisible",!1),this.set("selectedColor",void 0),this.colorGridsFragmentView.bind("isVisible").to(this,"_isColorGridsFragmentVisible"),this.colorPickerFragmentView.bind("isVisible").to(this,"_isColorPickerFragmentVisible"),this.on("change:selectedColor",(t,e,n)=>{this.colorGridsFragmentView.set("selectedColor",n),this.colorPickerFragmentView.set("selectedColor",n)}),this.colorGridsFragmentView.on("change:selectedColor",(t,e,n)=>{this.set("selectedColor",n)}),this.colorPickerFragmentView.on("change:selectedColor",(t,e,n)=>{this.set("selectedColor",n)}),this.setTemplate({tag:"div",attributes:{class:["ck","ck-color-selector"]},children:this.items})}render(){super.render(),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}appendUI(){this._appendColorGridsFragment(),this._colorPickerViewConfig&&this._appendColorPickerFragment()}showColorPickerFragment(){this.colorPickerFragmentView.colorPickerView&&!this._isColorPickerFragmentVisible&&(this._isColorPickerFragmentVisible=!0,this.colorPickerFragmentView.focus(),this.colorPickerFragmentView.resetValidationStatus(),this._isColorGridsFragmentVisible=!1)}showColorGridsFragment(){this._isColorGridsFragmentVisible||(this._isColorGridsFragmentVisible=!0,this.colorGridsFragmentView.focus(),this._isColorPickerFragmentVisible=!1)}focus(){this._focusCycler.focusFirst()}focusLast(){this._focusCycler.focusLast()}updateDocumentColors(t,e){this.colorGridsFragmentView.updateDocumentColors(t,e)}updateSelectedColors(){this.colorGridsFragmentView.updateSelectedColors()}_appendColorGridsFragment(){this.items.length||(this.items.add(this.colorGridsFragmentView),this.colorGridsFragmentView.delegate("execute").to(this),this.colorGridsFragmentView.delegate("colorPicker:show").to(this))}_appendColorPickerFragment(){2!==this.items.length&&(this.items.add(this.colorPickerFragmentView),this.colorGridsFragmentView.colorPickerButtonView&&this.colorGridsFragmentView.colorPickerButtonView.on("execute",()=>{this.showColorPickerFragment()}),this.colorGridsFragmentView.addColorPickerButton(),this.colorPickerFragmentView.delegate("execute").to(this),this.colorPickerFragmentView.delegate("colorPicker:cancel").to(this))}}class sg{editor;_components=new Map;constructor(t){this.editor=t}*names(){for(const t of this._components.values())yield t.originalName}add(t,e){this._components.set(ag(t),{callback:e,originalName:t})}create(t){if(!this.has(t))throw new Vt("componentfactory-item-missing",this,{name:t});return this._components.get(ag(t)).callback(this.editor.locale)}has(t){return this._components.has(ag(t))}}function ag(t){return String(t).toLowerCase()}const lg="ck-tooltip";class cg extends(_e()){tooltipTextView;balloonPanelView;static defaultBalloonPositions=Xu.generatePositions({heightOffset:5,sideOffset:13});_currentElementWithTooltip=null;_currentTooltipPosition=null;_mutationObserver=null;_pinTooltipDebounced;_unpinTooltipDebounced;_watchdogExcluded;static _editors=new Set;static _instance=null;constructor(t){if(super(),cg._editors.add(t),cg._instance)return cg._instance;cg._instance=this,this.tooltipTextView=new ku(t.locale),this.tooltipTextView.set("text",""),this.tooltipTextView.setTemplate({tag:"span",attributes:{class:["ck","ck-tooltip__text"]},children:[{text:this.tooltipTextView.bindTemplate.to("text")}]}),this.balloonPanelView=new Xu(t.locale),this.balloonPanelView.class=lg,this.balloonPanelView.content.add(this.tooltipTextView),this._mutationObserver=function(t){const e=new MutationObserver(()=>{t()});return{attach(t){e.observe(t,{attributes:!0,attributeFilter:["data-cke-tooltip-text","data-cke-tooltip-position"]})},detach(){e.disconnect()}}}(()=>{this._updateTooltipPosition()}),this._pinTooltipDebounced=ti(this._pinTooltip,600),this._unpinTooltipDebounced=ti(this._unpinTooltip,400),this.listenTo(gt.document,"keydown",this._onKeyDown.bind(this),{useCapture:!0}),this.listenTo(gt.document,"mouseenter",this._onEnterOrFocus.bind(this),{useCapture:!0}),this.listenTo(gt.document,"mouseleave",this._onLeaveOrBlur.bind(this),{useCapture:!0}),this.listenTo(gt.document,"focus",this._onEnterOrFocus.bind(this),{useCapture:!0}),this.listenTo(gt.document,"blur",this._onLeaveOrBlur.bind(this),{useCapture:!0}),this.listenTo(gt.document,"scroll",this._onScroll.bind(this),{useCapture:!0}),this._watchdogExcluded=!0}destroy(t){const e=t.ui.view&&t.ui.view.body;cg._editors.delete(t),this.stopListening(t.ui),e&&e.has(this.balloonPanelView)&&e.remove(this.balloonPanelView),cg._editors.size||(this._unpinTooltip(),this.balloonPanelView.destroy(),this.stopListening(),cg._instance=null)}static getPositioningFunctions(t){const e=cg.defaultBalloonPositions;return{s:[e.southArrowNorth,e.southArrowNorthEast,e.southArrowNorthWest],n:[e.northArrowSouth],e:[e.eastArrowWest],w:[e.westArrowEast],sw:[e.southArrowNorthEast],se:[e.southArrowNorthWest]}[t]}_onKeyDown(t,e){"Escape"===e.key&&this._currentElementWithTooltip&&(this._unpinTooltip(),e.stopPropagation())}_onEnterOrFocus(t,{target:e}){const n=dg(e);n?n!==this._currentElementWithTooltip?(this._unpinTooltip(),"focus"===t.name&&!n.matches(":hover")||n.matches("[data-cke-tooltip-instant]")?this._pinTooltip(n,ug(n)):this._pinTooltipDebounced(n,ug(n))):this._unpinTooltipDebounced.cancel():"focus"===t.name&&this._unpinTooltip()}_onLeaveOrBlur(t,{target:e,relatedTarget:n}){if("mouseleave"===t.name){if(!it(e))return;const t=this.balloonPanelView.element,i=t&&(t===n||t.contains(n)),o=!i&&e===t;if(i)return void this._unpinTooltipDebounced.cancel();if(!o&&this._currentElementWithTooltip&&e!==this._currentElementWithTooltip)return;const r=dg(e),s=dg(n);(o||r&&r!==s)&&(this._pinTooltipDebounced.cancel(),this._currentElementWithTooltip&&this._currentElementWithTooltip.matches("[data-cke-tooltip-instant]")||r&&r.matches("[data-cke-tooltip-instant]")?this._unpinTooltip():this._unpinTooltipDebounced())}else{if(this._currentElementWithTooltip&&e!==this._currentElementWithTooltip)return;this._pinTooltipDebounced.cancel(),this._unpinTooltipDebounced()}}_onScroll(t,{target:e}){this._currentElementWithTooltip&&(e.contains(this.balloonPanelView.element)&&e.contains(this._currentElementWithTooltip)||this._unpinTooltip())}_pinTooltip(t,{text:e,position:n,cssClass:i}){this._unpinTooltip();const o=wn(cg._editors.values()).ui.view.body;o.has(this.balloonPanelView)||o.add(this.balloonPanelView),this.tooltipTextView.text=e,this.balloonPanelView.class=[lg,i].filter(t=>t).join(" "),this.balloonPanelView.pin({target:t,positions:cg.getPositioningFunctions(n)}),this._mutationObserver.attach(t);for(const t of cg._editors)this.listenTo(t.ui,"update",this._updateTooltipPosition.bind(this),{priority:"low"});this._currentElementWithTooltip=t,this._currentTooltipPosition=n}_unpinTooltip(){this._unpinTooltipDebounced.cancel(),this._pinTooltipDebounced.cancel(),this.balloonPanelView.unpin();for(const t of cg._editors)this.stopListening(t.ui,"update");this._currentElementWithTooltip=null,this._currentTooltipPosition=null,this.tooltipTextView.text="",this._mutationObserver.detach()}_updateTooltipPosition(){if(!this._currentElementWithTooltip)return;const t=ug(this._currentElementWithTooltip);He(this._currentElementWithTooltip)&&t.text?this.balloonPanelView.pin({target:this._currentElementWithTooltip,positions:cg.getPositioningFunctions(t.position)}):this._unpinTooltip()}}function dg(t){return it(t)?t.closest("[data-cke-tooltip-text]:not([data-cke-tooltip-disabled])"):null}function ug(t){return{text:t.dataset.ckeTooltipText,position:t.dataset.ckeTooltipPosition||"s",cssClass:t.dataset.ckeTooltipClass||""}}class hg extends eh{licenseTypeMessage={evaluation:"For evaluation purposes only",trial:"For evaluation purposes only",development:"For development purposes only"};constructor(t){super(t,{balloonClass:"ck-evaluation-badge-balloon"})}_isEnabled(){const t=mg(this.editor.config.get("licenseKey"));return Boolean(t&&this.licenseTypeMessage[t])}_createBadgeContent(){const t=mg(this.editor.config.get("licenseKey"));return new gg(this.editor.locale,this.licenseTypeMessage[t])}_getNormalizedConfig(){const t=super._getNormalizedConfig(),e=this.editor.config.get("ui.poweredBy")||{};return{position:e.position||t.position,side:"left"===(e.side||t.side)?"right":"left",verticalOffset:t.verticalOffset,horizontalOffset:t.horizontalOffset}}}class gg extends ku{constructor(t,e){super(t),this.setTemplate({tag:"div",attributes:{class:["ck","ck-evaluation-badge"],"aria-hidden":!0},children:[{tag:"span",attributes:{class:["ck","ck-evaluation-badge__label"]},children:[e]}]})}}function mg(t){if("GPL"==t)return"GPL";const e=Tn(t.split(".")[1]);return e?e.licenseType||"production":null}class pg extends Eh{constructor(t,e){super(t);const n=this.bindTemplate;this.extendTemplate({attributes:{class:["ck-menu-bar__menu__item"]},on:{mouseenter:n.to("mouseenter")}}),this.delegate("mouseenter").to(e)}}const fg={toggleMenusAndFocusItemsOnHover(t){t.on("menu:mouseenter",e=>{if(t.isFocusBorderEnabled||t.isOpen){if(t.isOpen)for(const n of t.menus){const t=e.path[0],i=t instanceof pg&&t.children.first===n;n.isOpen=(e.path.includes(n)||i)&&n.isEnabled}e.source.focus()}})},focusCycleMenusOnArrows(t){const e="rtl"===t.locale.uiLanguageDirection;function n(e,n){const i=t.children.getIndex(e),o=e.isOpen,r=t.children.length,s=t.children.get((i+r+n)%r);e.isOpen=!1,o&&(s.isOpen=!0),s.buttonView.focus()}t.on("menu:arrowright",t=>{n(t.source,e?-1:1)}),t.on("menu:arrowleft",t=>{n(t.source,e?1:-1)})},closeMenusWhenTheBarCloses(t){t.on("change:isOpen",()=>{t.isOpen||t.menus.forEach(t=>{t.isOpen=!1})})},closeMenuWhenAnotherOnTheSameLevelOpens(t){t.on("menu:change:isOpen",(e,n,i)=>{i&&t.menus.filter(t=>e.source.parentMenuView===t.parentMenuView&&e.source!==t&&t.isOpen).forEach(t=>{t.isOpen=!1})})},closeOnClickOutside(t){Cu({emitter:t,activator:()=>t.isOpen,callback:()=>t.close(),contextElements:()=>t.children.map(t=>t.element)})},enableFocusHighlightOnInteraction(t){let e=!1;t.on("change:isOpen",(n,i,o)=>{o||(e||(t.isFocusBorderEnabled=!1),e=!1)}),t.listenTo(t.element,"keydown",()=>{e=!0},{useCapture:!0}),t.listenTo(t.element,"keyup",()=>{e=!1},{useCapture:!0}),t.listenTo(t.element,"focus",()=>{e&&(t.isFocusBorderEnabled=!0)},{useCapture:!0})}},bg={openAndFocusPanelOnArrowDownKey(t){t.keystrokes.set("arrowdown",(e,n)=>{t.isEnabled&&t.focusTracker.focusedElement===t.buttonView.element&&(t.isOpen||(t.isOpen=!0),t.panelView.focus(),n())})},openOnArrowRightKey(t){const e="rtl"===t.locale.uiLanguageDirection?"arrowleft":"arrowright";t.keystrokes.set(e,(e,n)=>{t.focusTracker.focusedElement===t.buttonView.element&&t.isEnabled&&(t.isOpen||(t.isOpen=!0),t.panelView.focus(),n())})},openOnButtonClick(t){t.buttonView.on("execute",()=>{t.isOpen=!0})},toggleOnButtonClick(t){t.buttonView.on("execute",()=>{t.isOpen=!t.isOpen})},openAndFocusOnEnterKeyPress(t){t.keystrokes.set("enter",(e,n)=>{t.focusTracker.focusedElement===t.buttonView.element&&(t.isOpen=!0,t.panelView.focus(),n())})},closeOnArrowLeftKey(t){const e="rtl"===t.locale.uiLanguageDirection?"arrowright":"arrowleft";t.keystrokes.set(e,(e,n)=>{t.isOpen&&(t.isOpen=!1,t.focus(),n())})},closeOnEscKey(t){t.keystrokes.set("esc",(e,n)=>{t.isOpen&&(t.isOpen=!1,t.focus(),n())})},closeOnParentClose(t){t.parentMenuView.on("change:isOpen",(e,n,i)=>{i||e.source!==t.parentMenuView||(t.isOpen=!1)})}},kg={southEast:t=>({top:t.bottom,left:t.left,name:"se"}),southWest:(t,e)=>({top:t.bottom,left:t.left-e.width+t.width,name:"sw"}),northEast:(t,e)=>({top:t.top-e.height,left:t.left,name:"ne"}),northWest:(t,e)=>({top:t.top-e.height,left:t.left-e.width+t.width,name:"nw"}),eastSouth:t=>({top:t.top,left:t.right-5,name:"es"}),eastNorth:(t,e)=>({top:t.top-e.height,left:t.right-5,name:"en"}),westSouth:(t,e)=>({top:t.top,left:t.left-e.width+5,name:"ws"}),westNorth:(t,e)=>({top:t.top-e.height,left:t.left-e.width+5,name:"wn"})},wg=[{menuId:"file",label:"File",groups:[{groupId:"export",items:["menuBar:exportPdf","menuBar:exportWord"]},{groupId:"import",items:["menuBar:importWord"]},{groupId:"revisionHistory",items:["menuBar:revisionHistory"]}]},{menuId:"edit",label:"Edit",groups:[{groupId:"undo",items:["menuBar:undo","menuBar:redo"]},{groupId:"selectAll",items:["menuBar:selectAll"]},{groupId:"findAndReplace",items:["menuBar:findAndReplace"]}]},{menuId:"view",label:"View",groups:[{groupId:"sourceEditingEnhanced",items:["menuBar:sourceEditingEnhanced"]},{groupId:"sourceEditing",items:["menuBar:sourceEditing"]},{groupId:"showBlocks",items:["menuBar:showBlocks"]},{groupId:"previewMergeFields",items:["menuBar:previewMergeFields"]},{groupId:"fullscreen",items:["menuBar:fullscreen"]},{groupId:"restrictedEditing",items:["menuBar:restrictedEditing"]}]},{menuId:"insert",label:"Insert",groups:[{groupId:"insertMainWidgets",items:["menuBar:insertImage","menuBar:ckbox","menuBar:ckfinder","menuBar:insertTable","menuBar:insertTableLayout"]},{groupId:"insertInline",items:["menuBar:link","menuBar:bookmark","menuBar:comment","menuBar:insertMergeField","menuBar:emoji"]},{groupId:"insertMinorWidgets",items:["menuBar:mediaEmbed","menuBar:insertTemplate","menuBar:specialCharacters","menuBar:blockQuote","menuBar:codeBlock","menuBar:htmlEmbed"]},{groupId:"insertStructureWidgets",items:["menuBar:horizontalLine","menuBar:pageBreak","menuBar:tableOfContents"]},{groupId:"restrictedEditingException",items:["menuBar:restrictedEditingException"]}]},{menuId:"format",label:"Format",groups:[{groupId:"textAndFont",items:[{menuId:"text",label:"Text",groups:[{groupId:"basicStyles",items:["menuBar:bold","menuBar:italic","menuBar:underline","menuBar:strikethrough","menuBar:superscript","menuBar:subscript","menuBar:code"]},{groupId:"textPartLanguage",items:["menuBar:textPartLanguage"]}]},{menuId:"font",label:"Font",groups:[{groupId:"fontProperties",items:["menuBar:fontSize","menuBar:fontFamily"]},{groupId:"fontColors",items:["menuBar:fontColor","menuBar:fontBackgroundColor"]},{groupId:"highlight",items:["menuBar:highlight"]}]},"menuBar:heading"]},{groupId:"list",items:["menuBar:bulletedList","menuBar:numberedList","menuBar:multiLevelList","menuBar:todoList"]},{groupId:"indent",items:["menuBar:alignment","menuBar:lineHeight","menuBar:indent","menuBar:outdent"]},{groupId:"caseChange",items:["menuBar:caseChange"]},{groupId:"removeFormat",items:["menuBar:removeFormat"]}]},{menuId:"tools",label:"Tools",groups:[{groupId:"aiTools",items:["menuBar:aiAssistant","menuBar:aiCommands"]},{groupId:"tools",items:["menuBar:trackChanges","menuBar:commentsArchive"]}]},{menuId:"help",label:"Help",groups:[{groupId:"help",items:["menuBar:accessibilityHelp"]}]}];function _g({normalizedConfig:t,locale:e,componentFactory:n,extraItems:i}){const o=rt(t);return vg(t,o,i),function(t,e){const n=e.removeItems,i=[];e.items=e.items.filter(({menuId:t})=>!n.includes(t)||(i.push(t),!1)),Ag(e.items,t=>{t.groups=t.groups.filter(({groupId:t})=>!n.includes(t)||(i.push(t),!1));for(const e of t.groups)e.items=e.items.filter(t=>{const e=Pg(t);return!n.includes(e)||(i.push(e),!1)})});for(const e of n)i.includes(e)||zt("menu-bar-item-could-not-be-removed",{menuBarConfig:t,itemName:e})}(t,o),vg(t,o,o.addItems),function(t,e,n){Ag(e.items,i=>{for(const o of i.groups)o.items=o.items.filter(o=>{const r="string"==typeof o&&!n.has(o);return r&&!e.isUsingDefaultConfig&&zt("menu-bar-item-unavailable",{menuBarConfig:t,parentMenuConfig:rt(i),componentName:o}),!r})})}(t,o,n),Cg(t,o),function(t,e){const n=e.t,i={File:n({string:"File",id:"MENU_BAR_MENU_FILE"}),Edit:n({string:"Edit",id:"MENU_BAR_MENU_EDIT"}),View:n({string:"View",id:"MENU_BAR_MENU_VIEW"}),Insert:n({string:"Insert",id:"MENU_BAR_MENU_INSERT"}),Format:n({string:"Format",id:"MENU_BAR_MENU_FORMAT"}),Tools:n({string:"Tools",id:"MENU_BAR_MENU_TOOLS"}),Help:n({string:"Help",id:"MENU_BAR_MENU_HELP"}),Text:n({string:"Text",id:"MENU_BAR_MENU_TEXT"}),Font:n({string:"Font",id:"MENU_BAR_MENU_FONT"})};Ag(t.items,t=>{t.label in i&&(t.label=i[t.label])})}(o,e),o}function vg(t,e,n){const i=[];if(0!=n.length){for(const t of n){const n=Tg(t.position),o=Ig(t.position);if(Eg(t))if(o){const r=e.items.findIndex(t=>t.menuId===o);-1!=r?"before"===n?(e.items.splice(r,0,t.menu),i.push(t)):"after"===n&&(e.items.splice(r+1,0,t.menu),i.push(t)):yg(e,t.menu,o,n)&&i.push(t)}else"start"===n?(e.items.unshift(t.menu),i.push(t)):"end"===n&&(e.items.push(t.menu),i.push(t));else Sg(t)?Ag(e.items,e=>{if(e.menuId===o)"start"===n?(e.groups.unshift(t.group),i.push(t)):"end"===n&&(e.groups.push(t.group),i.push(t));else{const r=e.groups.findIndex(t=>t.groupId===o);-1!==r&&("before"===n?(e.groups.splice(r,0,t.group),i.push(t)):"after"===n&&(e.groups.splice(r+1,0,t.group),i.push(t)))}}):yg(e,t.item,o,n)&&i.push(t)}for(const e of n)i.includes(e)||zt("menu-bar-item-could-not-be-added",{menuBarConfig:t,addedItemConfig:e})}}function yg(t,e,n,i){let o=!1;return Ag(t.items,t=>{for(const{groupId:r,items:s}of t.groups){if(o)return;if(r===n)"start"===i?(s.unshift(e),o=!0):"end"===i&&(s.push(e),o=!0);else{const t=s.findIndex(t=>Pg(t)===n);-1!==t&&("before"===i?(s.splice(t,0,e),o=!0):"after"===i&&(s.splice(t+1,0,e),o=!0))}}}),o}function Cg(t,e){const n=e.isUsingDefaultConfig;let i=!1;e.items=e.items.filter(e=>!!e.groups.length||(xg(t,e,n),!1)),e.items.length?(Ag(e.items,e=>{e.groups=e.groups.filter(t=>!!t.items.length||(i=!0,!1));for(const o of e.groups)o.items=o.items.filter(e=>!(Mg(e)&&!e.groups.length&&(xg(t,e,n),i=!0,1)))}),i&&Cg(t,e)):xg(t,t,n)}function xg(t,e,n){n||zt("menu-bar-menu-empty",{menuBarConfig:t,emptyMenuConfig:e})}function Ag(t,e){if(Array.isArray(t))for(const e of t)n(e);function n(t){e(t);for(const e of t.groups)for(const t of e.items)Mg(t)&&n(t)}}function Eg(t){return"object"==typeof t&&"menu"in t}function Sg(t){return"object"==typeof t&&"group"in t}function Tg(t){return t.startsWith("start")?"start":t.startsWith("end")?"end":t.startsWith("after")?"after":"before"}function Ig(t){const e=t.match(/^[^:]+:(.+)/);return e?e[1]:null}function Pg(t){return"string"==typeof t?t:t.menuId}function Mg(t){return"object"==typeof t&&"menuId"in t}class Ng extends(ie()){editor;componentFactory;focusTracker;tooltipManager;poweredBy;evaluationBadge;ariaLiveAnnouncer;isReady=!1;_editableElementsMap=new Map;_focusableToolbarDefinitions=[];_extraMenuBarElements=[];_lastFocusedForeignElement=null;_domEmitter;constructor(t){super();const e=t.editing.view;this.editor=t,this.componentFactory=new sg(t),this.focusTracker=new _n,this.tooltipManager=new cg(t),this.poweredBy=new ih(t),this.evaluationBadge=new hg(t),this.ariaLiveAnnouncer=new _u(t),this._initViewportOffset(this._readViewportOffsetFromConfig()),this.once("ready",()=>{this._bindBodyCollectionWithFocusTracker(),this.isReady=!0}),this.listenTo(e.document,"layoutChanged",this.update.bind(this)),this.listenTo(e,"scrollToTheSelection",this._handleScrollToTheSelection.bind(this)),this._initFocusTracking(),this._initVisualViewportSupport()}get element(){return null}update(){this.fire("update")}destroy(){this.stopListening(),this.focusTracker.destroy(),this.tooltipManager.destroy(this.editor),this.poweredBy.destroy(),this.evaluationBadge.destroy();for(const t of this._editableElementsMap.values())t.ckeditorInstance=null,this.editor.keystrokes.stopListening(t);this._editableElementsMap=new Map,this._focusableToolbarDefinitions=[],this._domEmitter&&this._domEmitter.stopListening()}setEditableElement(t,e){this._editableElementsMap.set(t,e),e.ckeditorInstance||(e.ckeditorInstance=this.editor),this.focusTracker.add(e);const n=()=>{this.editor.editing.view.getDomRoot(t)||this.editor.keystrokes.listenTo(e)};this.isReady?n():this.once("ready",n)}removeEditableElement(t){const e=this._editableElementsMap.get(t);e&&(this._editableElementsMap.delete(t),this.editor.keystrokes.stopListening(e),this.focusTracker.remove(e),e.ckeditorInstance=null)}getEditableElement(t="main"){return this._editableElementsMap.get(t)}getEditableElementsNames(){return this._editableElementsMap.keys()}addToolbar(t,e={}){t.isRendered?(this.focusTracker.add(t),this.editor.keystrokes.listenTo(t.element)):t.once("render",()=>{this.focusTracker.add(t),this.editor.keystrokes.listenTo(t.element)}),this._focusableToolbarDefinitions.push({toolbarView:t,options:e})}extendMenuBar(t){this._extraMenuBarElements.push(t)}initMenuBar(t){const e=t.element;this.focusTracker.add(e),this.editor.keystrokes.listenTo(e);const n=function(t){let e;return e="items"in t&&t.items?{items:t.items,removeItems:[],addItems:[],isVisible:!0,isUsingDefaultConfig:!1,...t}:{items:rt(wg),addItems:[],removeItems:[],isVisible:!0,isUsingDefaultConfig:!0,...t},e}(this.editor.config.get("menuBar")||{});t.fillFromConfig(n,this.componentFactory,this._extraMenuBarElements),this.editor.keystrokes.set("Esc",(t,n)=>{e.contains(this.editor.ui.focusTracker.focusedElement)&&(this._lastFocusedForeignElement?(this._lastFocusedForeignElement.focus(),this._lastFocusedForeignElement=null):this.editor.editing.view.focus(),n())}),this.editor.keystrokes.set("Alt+F9",(n,i)=>{e.contains(this.editor.ui.focusTracker.focusedElement)||(this._saveLastFocusedForeignElement(),t.isFocusBorderEnabled=!0,t.focus(),i())})}_readViewportOffsetFromConfig(){const t=this.editor,e=t.config.get("ui.viewportOffset");if(e)return e;const n=t.config.get("toolbar.viewportTopOffset");return n?(console.warn("editor-ui-deprecated-viewport-offset-config: The `toolbar.vieportTopOffset` configuration option is deprecated. It will be removed from future CKEditor versions. Use `ui.viewportOffset.top` instead."),{top:n}):{top:0}}_initFocusTracking(){const t=this.editor;let e;t.keystrokes.set("Alt+F10",(t,n)=>{this._saveLastFocusedForeignElement();const i=this._getCurrentFocusedToolbarDefinition();i&&e||(e=this._getFocusableCandidateToolbarDefinitions());for(let t=0;t<e.length;t++){const t=e.shift();if(e.push(t),t!==i&&this._focusFocusableCandidateToolbar(t)){i&&i.options.afterBlur&&i.options.afterBlur();break}}n()}),t.keystrokes.set("Esc",(e,n)=>{const i=this._getCurrentFocusedToolbarDefinition();i&&(this._lastFocusedForeignElement?(this._lastFocusedForeignElement.focus(),this._lastFocusedForeignElement=null):t.editing.view.focus(),i.options.afterBlur&&i.options.afterBlur(),n())})}_saveLastFocusedForeignElement(){const t=this.focusTracker.focusedElement;Array.from(this._editableElementsMap.values()).includes(t)&&!Array.from(this.editor.editing.view.domRoots.values()).includes(t)&&(this._lastFocusedForeignElement=t)}_getFocusableCandidateToolbarDefinitions(){const t=[];for(const e of this._focusableToolbarDefinitions){const{toolbarView:n,options:i}=e;(He(n.element)||i.beforeFocus)&&t.push(e)}return t.sort((t,e)=>Lg(t)-Lg(e)),t}_getCurrentFocusedToolbarDefinition(){for(const t of this._focusableToolbarDefinitions)if(t.toolbarView.element&&t.toolbarView.element.contains(this.focusTracker.focusedElement))return t;return null}_focusFocusableCandidateToolbar(t){const{toolbarView:e,options:{beforeFocus:n}}=t;return n&&n(),!!He(e.element)&&(e.focus(),!0)}_handleScrollToTheSelection(t,e){const n={top:0,bottom:0,left:0,right:0,...this.viewportOffset};e.viewportOffset.top+=n.top,e.viewportOffset.bottom+=n.bottom,e.viewportOffset.left+=n.left,e.viewportOffset.right+=n.right}_bindBodyCollectionWithFocusTracker(){const t=this.view.body;for(const e of t)this.focusTracker.add(e.element);t.on("add",(t,e)=>{this.focusTracker.add(e.element)}),t.on("remove",(t,e)=>{this.focusTracker.remove(e.element)})}_initViewportOffset(t){this.on("set:viewportOffset",(t,e,n)=>{const i=this._getVisualViewportTopOffset(n);n.visualTop!==i&&(t.return={...n,visualTop:i})}),this.set("viewportOffset",t)}_initVisualViewportSupport(){if(!gt.window.visualViewport)return;const t=()=>{const t=this._getVisualViewportTopOffset(this.viewportOffset);this.viewportOffset.visualTop!==t&&(this.viewportOffset={...this.viewportOffset,visualTop:t})};this._domEmitter=new(_e()),this._domEmitter.listenTo(gt.window.visualViewport,"scroll",t),this._domEmitter.listenTo(gt.window.visualViewport,"resize",t)}_getVisualViewportTopOffset(t){const e=Ke().top,n=t.top||0;return e>n?0:n-e}}function Lg(t){const{toolbarView:e,options:n}=t;let i=10;return He(e.element)&&i--,n.isContextual&&(i-=2),i}class Vg extends ku{body;menuBarView;toolbar;constructor(t){super(t),this.body=new Yu(t)}render(){super.render(),this.body.attachToDom()}destroy(){return this.body.detachFromDom(),super.destroy()}}class zg extends Vg{top;main;_voiceLabelView;constructor(t){super(t),this.top=this.createCollection(),this.main=this.createCollection(),this._voiceLabelView=this._createVoiceLabel(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-reset","ck-editor","ck-rounded-corners"],role:"application",dir:t.uiLanguageDirection,lang:t.uiLanguage,"aria-labelledby":this._voiceLabelView.id},children:[this._voiceLabelView,{tag:"div",attributes:{class:["ck","ck-editor__top","ck-reset_all"],role:"presentation"},children:this.top},{tag:"div",attributes:{class:["ck","ck-editor__main"],role:"presentation"},children:this.main}]})}_createVoiceLabel(){const t=this.t,e=new Tu;return e.text=t("Rich Text Editor"),e.extendTemplate({attributes:{class:"ck-voice-label"}}),e}}class Og extends ku{name=null;_editingView;_editableElement;_hasExternalElement;constructor(t,e,n){super(t),this.setTemplate({tag:"div",attributes:{class:["ck","ck-content","ck-editor__editable","ck-rounded-corners"],lang:t.contentLanguage,dir:t.contentLanguageDirection}}),this.set("isFocused",!1),this._editableElement=n,this._hasExternalElement=!!this._editableElement,this._editingView=e}render(){super.render(),this._hasExternalElement?this.template.apply(this.element=this._editableElement):this._editableElement=this.element,this.on("change:isFocused",()=>this._updateIsFocusedClasses()),this._updateIsFocusedClasses()}destroy(){this._hasExternalElement&&this.template.revert(this._editableElement),super.destroy()}get hasExternalElement(){return this._hasExternalElement}_updateIsFocusedClasses(){const t=this._editingView;function e(e){t.change(n=>{const i=t.document.getRoot(e.name);n.addClass(e.isFocused?"ck-focused":"ck-blurred",i),n.removeClass(e.isFocused?"ck-blurred":"ck-focused",i)})}t.isRenderingInProgress?function n(i){t.once("change:isRenderingInProgress",(t,o,r)=>{r?n(i):e(i)})}(this):e(this)}}class Rg extends Og{_options;constructor(t,e,n,i={}){super(t,e,n),this._options=i,this.extendTemplate({attributes:{role:"textbox",class:"ck-editor__editable_inline"}})}render(){super.render();const t=this._editingView;t.change(e=>{const n=t.document.getRoot(this.name);e.setAttribute("aria-label",this.getEditableAriaLabel(),n)})}getEditableAriaLabel(){const t=this.locale.t,e=this._options.label,n=this._editableElement,i=this.name;if("string"==typeof e)return e;if("object"==typeof e)return e[i];if("function"==typeof e)return e(this);if(n){const t=n.getAttribute("aria-label");if(t)return t}return t("Rich Text Editor. Editing area: %0",i)}}class Dg extends ku{children;constructor(t,e={}){super(t);const n=this.bindTemplate;this.set("class",["ck","ck-form__row",...fn(e.class||[])]),this.children=this.createCollection(),e.children&&e.children.forEach(t=>this.children.add(t)),this.set("_role",null),this.set("_ariaLabelledBy",null),e.labelView&&this.set({_role:"group",_ariaLabelledBy:e.labelView.id}),this.setTemplate({tag:"div",attributes:{class:n.to("class",t=>t.join(" ")),role:n.to("_role"),"aria-labelledby":n.to("_ariaLabelledBy")},children:this.children})}}class Bg extends dc{static get pluginName(){return"Notification"}static get isOfficialPlugin(){return!0}init(){this.on("show:warning",(t,e)=>{window.alert(e.message)},{priority:"lowest"})}showSuccess(t,e={}){this._showNotification({message:t,type:"success",namespace:e.namespace,title:e.title})}showInfo(t,e={}){this._showNotification({message:t,type:"info",namespace:e.namespace,title:e.title})}showWarning(t,e={}){this._showNotification({message:t,type:"warning",namespace:e.namespace,title:e.title})}_showNotification(t){const e=t.namespace?`show:${t.type}:${t.namespace}`:`show:${t.type}`;this.fire(e,{message:t.message,type:t.type,title:t.title||""})}}class Fg extends(ie()){constructor(t,e){super(),e&&Zn(this,e),t&&this.set(t)}}const jg=Re("px");class Hg extends nc{positionLimiter;visibleStack;_viewToStack=new Map;_idToStack=new Map;_view=null;_rotatorView=null;_fakePanelsView=null;static get pluginName(){return"ContextualBalloon"}static get isOfficialPlugin(){return!0}constructor(t){super(t),this.positionLimiter=()=>{const t=this.editor.editing.view,e=t.document.selection.editableElement;return e?t.domConverter.mapViewToDom(e.root):null},this.decorate("getPositionOptions"),this.set("visibleView",null),this.set("_numberOfStacks",0),this.set("_singleViewMode",!1)}destroy(){super.destroy(),this._view&&this._view.destroy(),this._rotatorView&&this._rotatorView.destroy(),this._fakePanelsView&&this._fakePanelsView.destroy()}get view(){return this._view||this._createPanelView(),this._view}hasView(t){return Array.from(this._viewToStack.keys()).includes(t)}add(t){if(this._view||this._createPanelView(),this.hasView(t.view))throw new Vt("contextualballoon-add-view-exist",[this,t]);const e=t.stackId||"main";if(!this._idToStack.has(e))return this._idToStack.set(e,new Map([[t.view,t]])),this._viewToStack.set(t.view,this._idToStack.get(e)),this._numberOfStacks=this._idToStack.size,void(this._visibleStack&&!t.singleViewMode||this.showStack(e));const n=this._idToStack.get(e);t.singleViewMode&&this.showStack(e),n.set(t.view,t),this._viewToStack.set(t.view,n),n===this._visibleStack&&this._showView(t)}remove(t){if(!this.hasView(t))throw new Vt("contextualballoon-remove-view-not-exist",[this,t]);const e=this._viewToStack.get(t);this._singleViewMode&&this.visibleView===t&&(this._singleViewMode=!1),this.visibleView===t&&(1===e.size?this._idToStack.size>1?this._showNextStack():(this.view.hide(),this.visibleView=null,this._rotatorView.hideView()):this._showView(Array.from(e.values())[e.size-2])),1===e.size?(this._idToStack.delete(this._getStackId(e)),this._numberOfStacks=this._idToStack.size):e.delete(t),this._viewToStack.delete(t)}updatePosition(t){t&&(this._visibleStack.get(this.visibleView).position=t),this.view.pin(this.getPositionOptions()),this._fakePanelsView.updatePosition()}getPositionOptions(){let t=Array.from(this._visibleStack.values()).pop().position;return t&&(t.limiter||(t=Object.assign({},t,{limiter:this.positionLimiter})),t=Object.assign({},t,{viewportOffsetConfig:{...this.editor.ui.viewportOffset,top:this.editor.ui.viewportOffset.visualTop}})),t}showStack(t){this.visibleStack=t;const e=this._idToStack.get(t);if(!e)throw new Vt("contextualballoon-showstack-stack-not-exist",this);this._visibleStack!==e&&this._showView(Array.from(e.values()).pop())}_createPanelView(){this._view=new Xu(this.editor.locale),this.editor.ui.view.body.add(this._view),this._rotatorView=this._createRotatorView(),this._fakePanelsView=this._createFakePanelsView()}get _visibleStack(){return this._viewToStack.get(this.visibleView)}_getStackId(t){return Array.from(this._idToStack.entries()).find(e=>e[1]===t)[0]}_showNextStack(){const t=Array.from(this._idToStack.values());let e=t.indexOf(this._visibleStack)+1;t[e]||(e=0),this.showStack(this._getStackId(t[e]))}_showPrevStack(){const t=Array.from(this._idToStack.values());let e=t.indexOf(this._visibleStack)-1;t[e]||(e=t.length-1),this.showStack(this._getStackId(t[e]))}_createRotatorView(){const t=new Ug(this.editor.locale),e=this.editor.locale.t;return this.view.content.add(t),t.bind("isNavigationVisible").to(this,"_numberOfStacks",this,"_singleViewMode",(t,e)=>!e&&t>1),t.on("change:isNavigationVisible",()=>this.updatePosition(),{priority:"low"}),t.bind("counter").to(this,"visibleView",this,"_numberOfStacks",(t,n)=>{if(n<2)return"";const i=Array.from(this._idToStack.values()).indexOf(this._visibleStack)+1;return e("%0 of %1",[i,n])}),t.buttonNextView.on("execute",()=>{t.focusTracker.isFocused&&this.editor.editing.view.focus(),this._showNextStack()}),t.buttonPrevView.on("execute",()=>{t.focusTracker.isFocused&&this.editor.editing.view.focus(),this._showPrevStack()}),t}_createFakePanelsView(){const t=new $g(this.editor.locale,this.view);return t.bind("numberOfPanels").to(this,"_numberOfStacks",this,"_singleViewMode",(t,e)=>!e&&t>=2?Math.min(t-1,2):0),t.listenTo(this.view,"change:top",()=>t.updatePosition()),t.listenTo(this.view,"change:left",()=>t.updatePosition()),this.editor.ui.view.body.add(t),t}_showView({view:t,balloonClassName:e="",withArrow:n=!0,singleViewMode:i=!1}){this.view.class=e,this.view.withArrow=n,this._rotatorView.showView(t),this.visibleView=t,this.view.pin(this.getPositionOptions()),this._fakePanelsView.updatePosition(),i&&(this._singleViewMode=!0)}}class Ug extends ku{focusTracker;buttonPrevView;buttonNextView;content;constructor(t){super(t);const e=t.t,n=this.bindTemplate;this.set("isNavigationVisible",!0),this.focusTracker=new _n,this.buttonPrevView=this._createButtonView(e("Previous"),ed),this.buttonNextView=this._createButtonView(e("Next"),Wc),this.content=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-balloon-rotator"],"z-index":"-1"},children:[{tag:"div",attributes:{class:["ck-balloon-rotator__navigation",n.to("isNavigationVisible",t=>t?"":"ck-hidden")]},children:[this.buttonPrevView,{tag:"span",attributes:{class:["ck-balloon-rotator__counter"]},children:[{text:n.to("counter")}]},this.buttonNextView]},{tag:"div",attributes:{class:"ck-balloon-rotator__content"},children:this.content}]})}render(){super.render(),this.focusTracker.add(this.element)}destroy(){super.destroy(),this.focusTracker.destroy()}showView(t){this.hideView(),this.content.add(t)}hideView(){this.content.clear()}_createButtonView(t,e){const n=new Lu(this.locale);return n.set({label:t,icon:e,tooltip:!0}),n}}class $g extends ku{content;_balloonPanelView;constructor(t,e){super(t);const n=this.bindTemplate;this.set("top",0),this.set("left",0),this.set("height",0),this.set("width",0),this.set("numberOfPanels",0),this.content=this.createCollection(),this._balloonPanelView=e,this.setTemplate({tag:"div",attributes:{class:["ck-fake-panel",n.to("numberOfPanels",t=>t?"":"ck-hidden")],style:{top:n.to("top",jg),left:n.to("left",jg),width:n.to("width",jg),height:n.to("height",jg)}},children:this.content}),this.on("change:numberOfPanels",(t,e,n,i)=>{n>i?this._addPanels(n-i):this._removePanels(i-n),this.updatePosition()})}_addPanels(t){for(;t--;){const t=new ku;t.setTemplate({tag:"div"}),this.content.add(t),this.registerChild(t)}}_removePanels(t){for(;t--;){const t=this.content.last;this.content.remove(t),this.deregisterChild(t),t.destroy()}}updatePosition(){if(this.numberOfPanels){const{top:t,left:e}=this._balloonPanelView,{width:n,height:i}=new Ie(this._balloonPanelView.element);Object.assign(this,{top:t,left:e,width:n,height:i})}}}const Wg=Re("px");class qg extends ku{content;contentPanelElement;_contentPanelPlaceholder;constructor(t){super(t);const e=this.bindTemplate;this.set("isActive",!1),this.set("isSticky",!1),this.set("limiterElement",null),this.set("limiterBottomOffset",50),this.set("viewportTopOffset",0),this.set("_marginLeft",null),this.set("_isStickyToTheBottomOfLimiter",!1),this.set("_stickyTopOffset",null),this.set("_stickyBottomOffset",null),this.content=this.createCollection(),this._contentPanelPlaceholder=new Yd({tag:"div",attributes:{class:["ck","ck-sticky-panel__placeholder"],style:{display:e.to("isSticky",t=>t?"block":"none"),height:e.to("isSticky",t=>t?Wg(this._contentPanelRect.height):null)}}}).render(),this.contentPanelElement=new Yd({tag:"div",attributes:{class:["ck","ck-sticky-panel__content",e.if("isSticky","ck-sticky-panel__content_sticky"),e.if("_isStickyToTheBottomOfLimiter","ck-sticky-panel__content_sticky_bottom-limit")],style:{width:e.to("isSticky",t=>t?Wg(this._contentPanelPlaceholder.getBoundingClientRect().width):null),top:e.to("_stickyTopOffset",t=>t?Wg(t):t),bottom:e.to("_stickyBottomOffset",t=>t?Wg(t):t),marginLeft:e.to("_marginLeft")}},children:this.content}).render(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-sticky-panel"]},children:[this._contentPanelPlaceholder,this.contentPanelElement]})}render(){super.render(),this.checkIfShouldBeSticky(),this.listenTo(gt.document,"scroll",()=>{this.checkIfShouldBeSticky()},{useCapture:!0}),this.listenTo(this,"change:isActive",()=>{this.checkIfShouldBeSticky()}),gt.window.visualViewport&&(this.listenTo(gt.window.visualViewport,"scroll",()=>{this.checkIfShouldBeSticky()}),this.listenTo(gt.window.visualViewport,"resize",()=>{this.checkIfShouldBeSticky()}))}checkIfShouldBeSticky(){if(!this.limiterElement||!this.isActive)return void this._unstick();const t=new Ie(this.limiterElement);let e=t.getVisible();if(e){const t=new Ie(gt.window);t.top+=this.viewportTopOffset,t.height-=this.viewportTopOffset,e=e.getIntersection(t)}const{left:n,top:i}=Ke();if(t.moveBy(n,i),e&&e.moveBy(n,i),e&&t.top<e.top)if(this._contentPanelRect.height+this.limiterBottomOffset>e.height){const n=Math.max(t.bottom-e.bottom,0)+this.limiterBottomOffset;this._contentPanelRect.height+n+1<t.height?this._stickToBottomOfLimiter(n):this._unstick()}else this._contentPanelRect.height+this.limiterBottomOffset<t.height?this._stickToTopOfAncestors(e.top):this._unstick();else this._unstick()}_stickToTopOfAncestors(t){this.isSticky=!0,this._isStickyToTheBottomOfLimiter=!1,this._stickyTopOffset=t,this._stickyBottomOffset=null,this._marginLeft=Wg(-gt.window.scrollX+Ke().left)}_stickToBottomOfLimiter(t){this.isSticky=!0,this._isStickyToTheBottomOfLimiter=!0,this._stickyTopOffset=null,this._stickyBottomOffset=t,this._marginLeft=Wg(-gt.window.scrollX+Ke().left)}_unstick(){this.isSticky=!1,this._isStickyToTheBottomOfLimiter=!1,this._stickyTopOffset=null,this._stickyBottomOffset=null,this._marginLeft=null}get _contentPanelRect(){return new Ie(this.contentPanelElement)}}const Kg=Re("px");class Gg extends nc{toolbarView;focusTracker;_balloonConfig;_resizeObserver=null;_balloon;_fireSelectionChangeDebounced;static get pluginName(){return"BalloonToolbar"}static get isOfficialPlugin(){return!0}static get requires(){return[Hg]}constructor(t){super(t),this._balloonConfig=Nh(t.config.get("balloonToolbar")),this.toolbarView=this._createToolbarView(),this.focusTracker=new _n,this._trackFocusableEditableElements(),this.focusTracker.add(this.toolbarView),t.ui.addToolbar(this.toolbarView,{beforeFocus:()=>this.show(!0),afterBlur:()=>this.hide(),isContextual:!0}),this._balloon=t.plugins.get(Hg),this._fireSelectionChangeDebounced=ti(()=>this.fire("_selectionChangeDebounced"),200),this.decorate("show")}init(){const t=this.editor,e=t.model.document.selection;this.listenTo(this.focusTracker,"change:isFocused",(t,e,n)=>{const i=this._balloon.visibleView===this.toolbarView;!n&&i?this.hide():n&&this.show()}),this.listenTo(e,"change:range",(t,n)=>{(n.directChange||e.isCollapsed)&&this.hide(),this._fireSelectionChangeDebounced()}),this.listenTo(this,"_selectionChangeDebounced",()=>{this.editor.editing.view.document.isFocused&&this.show()}),this._balloonConfig.shouldNotGroupWhenFull||this.listenTo(t,"ready",()=>{const e=t.ui.view.editable.element;this._resizeObserver=new ze(e,t=>{this.toolbarView.maxWidth=Kg(.9*t.contentRect.width)})}),this.listenTo(this.toolbarView,"groupedItemsUpdate",()=>{this._updatePosition()}),t.ui.once("ready",()=>{this.toolbarView.fillFromConfig(this._balloonConfig,this.editor.ui.componentFactory)})}_createToolbarView(){const t=this.editor.locale.t,e=!this._balloonConfig.shouldNotGroupWhenFull,n=new Vh(this.editor.locale,{shouldGroupWhenFull:e,isFloating:!0});return n.ariaLabel=t("Editor contextual toolbar"),n.render(),n}show(t=!1){const e=this.editor,n=e.model.document.selection,i=e.model.schema;this._balloon.hasView(this.toolbarView)||n.isCollapsed&&!t||function(t,e){return 1!==t.rangeCount&&[...t.getRanges()].every(t=>{const n=t.getContainedElement();return n&&e.isSelectable(n)})}(n,i)||Array.from(this.toolbarView.items).every(t=>void 0!==t.isEnabled&&!t.isEnabled)||(this.listenTo(this.editor.ui,"update",()=>{this._updatePosition()}),this._balloon.add({view:this.toolbarView,position:this._getBalloonPositionData(),balloonClassName:"ck-toolbar-container"}))}hide(){this._balloon.hasView(this.toolbarView)&&(this.stopListening(this.editor.ui,"update"),this._balloon.remove(this.toolbarView))}_trackFocusableEditableElements(){const{editor:t,focusTracker:e}=this,{editing:n}=t;n.view.addObserver(class extends Wo{observe(t){e.add(t)}stopObserving(t){e.remove(t)}})}_getBalloonPositionData(){const t=this.editor.editing.view,e=t.document,n=e.selection,i=e.selection.isBackward;return{target:()=>{const e=i?n.getFirstRange():n.getLastRange(),o=Ie.getDomRangeRects(t.domConverter.viewRangeToDom(e));return i?o[0]:(o.length>1&&0===o[o.length-1].width&&o.pop(),o[o.length-1])},positions:this._getBalloonPositions(i)}}_updatePosition(){this._balloon.updatePosition(this._getBalloonPositionData())}destroy(){super.destroy(),this.stopListening(),this._fireSelectionChangeDebounced.cancel(),this.toolbarView.destroy(),this.focusTracker.destroy(),this._resizeObserver&&this._resizeObserver.destroy()}_getBalloonPositions(t){const e=ft.isSafari&&ft.isiOS?Xu.generatePositions({heightOffset:Math.max(Xu.arrowHeightOffset,Math.round(20/gt.window.visualViewport.scale))}):Xu.defaultPositions;return t?[e.northWestArrowSouth,e.northWestArrowSouthWest,e.northWestArrowSouthEast,e.northWestArrowSouthMiddleEast,e.northWestArrowSouthMiddleWest,e.southWestArrowNorth,e.southWestArrowNorthWest,e.southWestArrowNorthEast,e.southWestArrowNorthMiddleWest,e.southWestArrowNorthMiddleEast]:[e.southEastArrowNorth,e.southEastArrowNorthEast,e.southEastArrowNorthWest,e.southEastArrowNorthMiddleEast,e.southEastArrowNorthMiddleWest,e.northEastArrowSouth,e.northEastArrowSouthEast,e.northEastArrowSouthWest,e.northEastArrowSouthMiddleEast,e.northEastArrowSouthMiddleWest]}}class Qg extends qu{arrowView;constructor(t){super(t);const e=this.bindTemplate;this.set({withText:!0,role:"menuitem"}),this.arrowView=this._createArrowView(),this.extendTemplate({attributes:{class:["ck-menu-bar__menu__button"],"aria-haspopup":!0,"aria-expanded":this.bindTemplate.to("isOn",t=>String(t)),"data-cke-tooltip-disabled":e.to("isOn")},on:{mouseenter:e.to("mouseenter")}})}render(){super.render(),this.children.add(this.arrowView)}_createArrowView(){const t=new Mu;return t.content=Bc,t.extendTemplate({attributes:{class:"ck-menu-bar__menu__button__arrow"}}),t}}class Yg extends ku{children;constructor(t){super(t);const e=this.bindTemplate;this.set("isVisible",!1),this.set("position","se"),this.children=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-reset","ck-menu-bar__menu__panel",e.to("position",t=>`ck-menu-bar__menu__panel_position_${t}`),e.if("isVisible","ck-hidden",t=>!t)],tabindex:"-1"},children:this.children,on:{selectstart:e.to(t=>{"input"!==t.target.tagName.toLocaleLowerCase()&&t.preventDefault()})}})}focus(t=1){this.children.length&&(1===t?this.children.first.focus():this.children.last.focus())}}class Jg extends ku{buttonView;panelView;focusTracker;keystrokes;constructor(t){super(t);const e=this.bindTemplate;this.buttonView=new Qg(t),this.buttonView.delegate("mouseenter").to(this),this.buttonView.bind("isOn","isEnabled").to(this,"isOpen","isEnabled"),this.panelView=new Yg(t),this.panelView.bind("isVisible").to(this,"isOpen"),this.keystrokes=new xn,this.focusTracker=new _n,this.set("isOpen",!1),this.set("isEnabled",!0),this.set("panelPosition","w"),this.set("class",void 0),this.set("parentMenuView",null),this.setTemplate({tag:"div",attributes:{class:["ck","ck-menu-bar__menu",e.to("class"),e.if("isEnabled","ck-disabled",t=>!t),e.if("parentMenuView","ck-menu-bar__menu_top-level",t=>!t)]},children:[this.buttonView,this.panelView]})}render(){super.render(),this.focusTracker.add(this.buttonView.element),this.focusTracker.add(this.panelView.element),this.keystrokes.listenTo(this.element),bg.closeOnEscKey(this),this._repositionPanelOnOpen()}_attachBehaviors(){this.parentMenuView?(bg.openOnButtonClick(this),bg.openOnArrowRightKey(this),bg.closeOnArrowLeftKey(this),bg.openAndFocusOnEnterKeyPress(this),bg.closeOnParentClose(this)):(this._propagateArrowKeystrokeEvents(),bg.openAndFocusPanelOnArrowDownKey(this),bg.toggleOnButtonClick(this))}_propagateArrowKeystrokeEvents(){this.keystrokes.set("arrowright",(t,e)=>{this.fire("arrowright"),e()}),this.keystrokes.set("arrowleft",(t,e)=>{this.fire("arrowleft"),e()})}_repositionPanelOnOpen(){this.on("change:isOpen",(t,e,n)=>{if(!n)return;const i=Jg._getOptimalPosition({element:this.panelView.element,target:this.buttonView.element,fitInViewport:!0,positions:this._panelPositions});this.panelView.position=i?i.name:this._defaultMenuPositionName})}focus(){this.buttonView.focus()}get _panelPositions(){const{southEast:t,southWest:e,northEast:n,northWest:i,westSouth:o,eastSouth:r,westNorth:s,eastNorth:a}=kg;return"ltr"===this.locale.uiLanguageDirection?this.parentMenuView?[r,a,o,s]:[t,e,n,i]:this.parentMenuView?[o,s,r,a]:[e,t,i,n]}get _defaultMenuPositionName(){return"ltr"===this.locale.uiLanguageDirection?this.parentMenuView?"es":"se":this.parentMenuView?"ws":"sw"}static _getOptimalPosition=Ue}class Zg extends Ih{constructor(t){super(t),this.role="menu",this.items.on("change",this._setItemsCheckSpace.bind(this))}_setItemsCheckSpace(){const t=Array.from(this.items).some(t=>{const e=Xg(t);return e&&e.isToggleable});this.items.forEach(e=>{const n=Xg(e);n&&(n.hasCheckSpace=t)})}}function Xg(t){return t instanceof Eh?t.children.map(t=>function(t){return"object"==typeof t&&"buttonView"in t&&t.buttonView instanceof Lu}(t)?t.buttonView:t).find(t=>t instanceof qu):null}class tm extends ah{constructor(t){super(t),this.set({withText:!0,withKeystroke:!0,tooltip:!1,role:"menuitem"}),this.extendTemplate({attributes:{class:["ck-menu-bar__menu__item__button"]}})}}const em=["mouseenter","arrowleft","arrowright","change:isOpen"];class nm extends ku{children;menus=[];constructor(t){super(t);const e=t.t,n=this.bindTemplate;this.set({isOpen:!1,isFocusBorderEnabled:!1}),this._setupIsOpenUpdater(),this.children=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-menu-bar",n.if("isFocusBorderEnabled","ck-menu-bar_focus-border-enabled")],"aria-label":e("Editor menu bar"),role:"menubar"},children:this.children})}fillFromConfig(t,e,n=[]){const i=_g({normalizedConfig:t,locale:this.locale,componentFactory:e,extraItems:n}).items.map(t=>this._createMenu({componentFactory:e,menuDefinition:t}));this.children.addMany(i)}render(){super.render(),fg.toggleMenusAndFocusItemsOnHover(this),fg.closeMenusWhenTheBarCloses(this),fg.closeMenuWhenAnotherOnTheSameLevelOpens(this),fg.focusCycleMenusOnArrows(this),fg.closeOnClickOutside(this),fg.enableFocusHighlightOnInteraction(this)}focus(){this.children.first&&this.children.first.focus()}close(){for(const t of this.children)t.isOpen=!1}disable(){for(const t of this.children)t.isEnabled=!1}enable(){for(const t of this.children)t.isEnabled=!0}registerMenu(t,e=null){e?(t.delegate(...em).to(e),t.parentMenuView=e):t.delegate(...em).to(this,t=>"menu:"+t),t._attachBehaviors(),this.menus.push(t)}_createMenu({componentFactory:t,menuDefinition:e,parentMenuView:n}){const i=this.locale,o=new Jg(i);return this.registerMenu(o,n),o.buttonView.set({label:e.label}),o.once("change:isOpen",()=>{const n=new Zg(i);n.ariaLabel=e.label,o.panelView.children.add(n),n.items.addMany(this._createMenuItems({menuDefinition:e,parentMenuView:o,componentFactory:t}))}),o}_createMenuItems({menuDefinition:t,parentMenuView:e,componentFactory:n}){const i=this.locale,o=[];for(const r of t.groups){for(const t of r.items){const r=new pg(i,e);if(x(t))r.children.add(this._createMenu({componentFactory:n,menuDefinition:t,parentMenuView:e}));else{const i=this._createMenuItemContentFromFactory({componentName:t,componentFactory:n,parentMenuView:e});if(!i)continue;r.children.add(i)}o.push(r)}r!==t.groups[t.groups.length-1]&&o.push(new Sh(i))}return o}_createMenuItemContentFromFactory({componentName:t,parentMenuView:e,componentFactory:n}){const i=n.create(t);return i instanceof Jg||i instanceof Gu||i instanceof tm?(this._registerMenuTree(i,e),i.on("execute",()=>{this.close()}),i):(zt("menu-bar-component-unsupported",{componentName:t,componentView:i}),null)}_registerMenuTree(t,e){if(!(t instanceof Jg))return void t.delegate("mouseenter").to(e);this.registerMenu(t,e);const n=t.panelView.children.filter(t=>t instanceof Zg)[0];if(!n)return void t.delegate("mouseenter").to(e);const i=n.items.filter(t=>t instanceof Eh);for(const e of i)this._registerMenuTree(e.children.get(0),t)}_setupIsOpenUpdater(){let t;this.on("menu:change:isOpen",(e,n,i)=>{clearTimeout(t),i?this.isOpen=!0:t=setTimeout(()=>{this.isOpen=Array.from(this.children).some(t=>t.isOpen)},0)})}}const im=["left","right","center","justify"];function om(t){return im.includes(t)}function rm(t,e){return"rtl"==e.contentLanguageDirection?"right"===t:"left"===t}function sm(t){const e=t.map(t=>{let e;return e="string"==typeof t?{name:t}:t,e}).filter(t=>{const e=im.includes(t.name);return e||zt("alignment-config-name-not-recognized",{option:t}),e}),n=e.filter(t=>Boolean(t.className)).length;if(n&&n<e.length)throw new Vt("alignment-config-classnames-are-missing",{configuredOptions:t});return e.forEach((e,n,i)=>{const o=i.slice(n+1);if(o.some(t=>t.name==e.name))throw new Vt("alignment-config-name-already-defined",{option:e,configuredOptions:t});if(e.className&&o.some(t=>t.className==e.className))throw new Vt("alignment-config-classname-already-defined",{option:e,configuredOptions:t})}),e}const am="alignment";class lm extends oc{refresh(){const t=this.editor.locale,e=wn(this.editor.model.document.selection.getSelectedBlocks());this.isEnabled=Boolean(e)&&this._canBeAligned(e),this.isEnabled&&e.hasAttribute("alignment")?this.value=e.getAttribute("alignment"):this.value="rtl"===t.contentLanguageDirection?"right":"left"}execute(t={}){const e=this.editor,n=e.locale,i=e.model,o=i.document,r=t.value;i.change(t=>{const e=Array.from(o.selection.getSelectedBlocks()).filter(t=>this._canBeAligned(t)),i=e[0].getAttribute("alignment");rm(r,n)||i===r||!r?function(t,e){for(const n of t)e.removeAttribute(am,n)}(e,t):function(t,e,n){for(const i of t)e.setAttribute(am,n,i)}(e,t,r)})}_canBeAligned(t){return this.editor.model.schema.checkAttribute(t,am)}}class cm extends nc{static get pluginName(){return"AlignmentEditing"}static get isOfficialPlugin(){return!0}constructor(t){super(t),t.config.define("alignment",{options:im.map(t=>({name:t}))})}init(){const t=this.editor,e=t.locale,n=t.model.schema,i=sm(t.config.get("alignment.options")).filter(t=>om(t.name)&&!rm(t.name,e)),o=i.some(t=>!!t.className);n.extend("$block",{allowAttributes:"alignment"}),t.model.schema.setAttributeProperties("alignment",{isFormatting:!0}),o?t.conversion.attributeToAttribute(function(t){const e={};for(const n of t)e[n.name]={key:"class",value:n.className};return{model:{key:"alignment",values:t.map(t=>t.name)},view:e}}(i)):t.conversion.for("downcast").attributeToAttribute(function(t){const e={};for(const{name:n}of t)e[n]={key:"style",value:{"text-align":n}};return{model:{key:"alignment",values:t.map(t=>t.name)},view:e}}(i));const r=function(t){const e=[];for(const{name:n}of t)e.push({view:{key:"style",value:{"text-align":n}},model:{key:"alignment",value:n}});return e}(i);for(const e of r)t.conversion.for("upcast").attributeToAttribute(e);const s=function(t){const e=[];for(const{name:n}of t)e.push({view:{key:"align",value:n},model:{key:"alignment",value:n}});return e}(i);for(const e of s)t.conversion.for("upcast").attributeToAttribute(e);t.commands.add("alignment",new lm(t))}}const dm=(()=>new Map([["left",Mc],["right",Nc],["center",Ic],["justify",Pc]]))();class um extends nc{get localizedOptionTitles(){const t=this.editor.t;return{left:t("Align left"),right:t("Align right"),center:t("Align center"),justify:t("Justify")}}static get pluginName(){return"AlignmentUI"}static get isOfficialPlugin(){return!0}init(){const t=sm(this.editor.config.get("alignment.options"));t.map(t=>t.name).filter(om).forEach(t=>this._addButton(t)),this._addToolbarDropdown(t),this._addMenuBarMenu(t)}_addButton(t){this.editor.ui.componentFactory.add(`alignment:${t}`,e=>this._createButton(e,t))}_createButton(t,e,n={}){const i=this.editor,o=i.commands.get("alignment"),r=new Lu(t);return r.set({label:this.localizedOptionTitles[e],icon:dm.get(e),tooltip:!0,isToggleable:!0,...n}),r.bind("isEnabled").to(o),r.bind("isOn").to(o,"value",t=>t===e),this.listenTo(r,"execute",()=>{i.execute("alignment",{value:e}),i.editing.view.focus()}),r}_addToolbarDropdown(t){const e=this.editor;e.ui.componentFactory.add("alignment",n=>{const i=Bh(n),o="rtl"===n.uiLanguageDirection?"w":"e",r=n.t;Fh(i,()=>t.map(t=>this._createButton(n,t.name,{tooltipPosition:o})),{enableActiveItemFocusOnDropdownOpen:!0,isVertical:!0,ariaLabel:r("Text alignment toolbar")}),i.buttonView.set({label:r("Text alignment"),tooltip:!0}),i.extendTemplate({attributes:{class:"ck-alignment-dropdown"}});const s="rtl"===n.contentLanguageDirection?dm.get("right"):dm.get("left"),a=e.commands.get("alignment");return i.buttonView.bind("icon").to(a,"value",t=>dm.get(t)||s),i.bind("isEnabled").to(a,"isEnabled"),this.listenTo(i,"execute",()=>{e.editing.view.focus()}),i})}_addMenuBarMenu(t){const e=this.editor;e.ui.componentFactory.add("menuBar:alignment",n=>{const i=e.commands.get("alignment"),o=n.t,r=new Jg(n),s=new Zg(n);r.bind("isEnabled").to(i),s.set({ariaLabel:o("Text alignment"),role:"menu"}),r.buttonView.set({label:o("Text alignment")});for(const o of t){const t=new pg(n,r),a=new Gu(n);a.delegate("execute").to(r),a.set({label:this.localizedOptionTitles[o.name],icon:dm.get(o.name),role:"menuitemcheckbox",isToggleable:!0}),a.on("execute",()=>{e.execute("alignment",{value:o.name}),e.editing.view.focus()}),a.bind("isOn").to(i,"value",t=>t===o.name),a.bind("isEnabled").to(i,"isEnabled"),t.children.add(a),s.items.add(t)}return r.panelView.children.add(s),r})}}class hm extends nc{static get requires(){return[cm,um]}static get pluginName(){return"Alignment"}static get isOfficialPlugin(){return!0}}class gm{model;limit;_isLocked;_size;_batch=null;_changeCallback;_selectionChangeCallback;constructor(t,e=20){this.model=t,this._size=0,this.limit=e,this._isLocked=!1,this._changeCallback=(t,e)=>{e.isLocal&&e.isUndoable&&e!==this._batch&&this._reset(!0)},this._selectionChangeCallback=()=>{this._reset()},this.model.document.on("change",this._changeCallback),this.model.document.selection.on("change:range",this._selectionChangeCallback),this.model.document.selection.on("change:attribute",this._selectionChangeCallback)}get batch(){return this._batch||(this._batch=this.model.createBatch({isTyping:!0})),this._batch}get size(){return this._size}input(t){this._size+=t,this._size>=this.limit&&this._reset(!0)}get isLocked(){return this._isLocked}lock(){this._isLocked=!0}unlock(){this._isLocked=!1}destroy(){this.model.document.off("change",this._changeCallback),this.model.document.selection.off("change:range",this._selectionChangeCallback),this.model.document.selection.off("change:attribute",this._selectionChangeCallback)}_reset(t=!1){this.isLocked&&!t||(this._batch=null,this._size=0)}}class mm extends oc{_buffer;constructor(t,e){super(t),this._buffer=new gm(t.model,e),this._isEnabledBasedOnSelection=!1}get buffer(){return this._buffer}destroy(){super.destroy(),this._buffer.destroy()}execute(t={}){const e=this.editor.model,n=e.document,i=t.text||"",o=i.length;let r=n.selection;if(t.selection?r=t.selection:t.range&&(r=e.createSelection(t.range)),!e.canEditAt(r))return;const s=t.resultRange;e.enqueueChange(this._buffer.batch,t=>{this._buffer.lock();const a=Array.from(n.selection.getAttributes());e.deleteContent(r),i&&e.insertContent(t.createText(i,a),r),s?t.setSelection(s):r.is("documentSelection")||t.setSelection(r),this._buffer.unlock(),this._buffer.input(o)})}}const pm=["insertText","insertReplacementText"],fm=[...pm,"insertCompositionText"];class bm extends Wo{focusObserver;constructor(t){super(t),this.focusObserver=t.getObserver(Zo);const e=ft.isAndroid?fm:pm,n=t.document;n.on("beforeinput",(i,o)=>{if(!this.isEnabled)return;const{data:r,targetRanges:s,inputType:a,domEvent:l,isComposing:c}=o;if(!e.includes(a))return;this.focusObserver.flush();const d=new It(n,"insertText");n.fire(d,new qo(t,l,{text:r,selection:t.createSelection(s),isComposing:c})),d.stop.called&&i.stop()}),ft.isAndroid||n.on("compositionend",(e,{data:i,domEvent:o})=>{this.isEnabled&&i&&n.fire("insertText",new qo(t,o,{text:i,isComposing:!0}))},{priority:"low"})}observe(){}stopObserving(){}}class km extends nc{_typingQueue;static get pluginName(){return"Input"}static get isOfficialPlugin(){return!0}init(){const t=this.editor,e=t.model,n=t.editing.view,i=t.editing.mapper,o=e.document.selection;this._typingQueue=new wm(t),n.addObserver(bm);const r=new mm(t,t.config.get("typing.undoStep")||20);t.commands.add("insertText",r),t.commands.add("input",r),this.listenTo(n.document,"beforeinput",()=>{this._typingQueue.flush("next beforeinput")},{priority:"high"}),this.listenTo(n.document,"insertText",(t,s)=>{const{text:a,selection:l}=s;if(n.document.selection.isFake&&l&&n.document.selection.isSimilar(l)&&s.preventDefault(),l&&Array.from(l.getRanges()).some(t=>!t.isCollapsed)&&s.preventDefault(),!r.isEnabled)return void s.preventDefault();let c;c=l?Array.from(l.getRanges()).map(t=>i.toModelRange(t)).map(t=>Da(t,e.schema)||t):Array.from(o.getRanges());let d=a;if(ft.isAndroid){const t=Array.from(c[0].getItems()).reduce((t,e)=>t+(e.is("$textProxy")?e.data:""),"");if(t&&(t.length<=d.length?d.startsWith(t)&&(d=d.substring(t.length),c[0].start=c[0].start.getShiftedBy(t.length)):t.startsWith(d)&&(c[0].start=c[0].start.getShiftedBy(d.length),d="")),0==d.length&&c[0].isCollapsed)return}const u={text:d,selection:e.createSelection(c)};this._typingQueue.push(u,Boolean(s.isComposing)),s.domEvent.defaultPrevented&&this._typingQueue.flush("beforeinput default prevented")}),ft.isAndroid?this.listenTo(n.document,"keydown",(t,i)=>{!o.isCollapsed&&229==i.keyCode&&n.document.isComposing&&_m(e,r)}):this.listenTo(n.document,"compositionstart",()=>{o.isCollapsed||_m(e,r)},{priority:"high"}),this.listenTo(n.document,"mutations",(t,{mutations:e})=>{if(this._typingQueue.hasAffectedElements())for(const{node:t}of e){const e=vm(t,i),n=i.toModelElement(e);if(this._typingQueue.isElementAffected(n))return void this._typingQueue.flush("mutations")}}),this.listenTo(n.document,"compositionend",()=>{this._typingQueue.flush("before composition end")},{priority:"high"}),this.listenTo(n.document,"compositionend",()=>{this._typingQueue.flush("after composition end");const t=[];if(this._typingQueue.hasAffectedElements())for(const e of this._typingQueue.flushAffectedElements()){const n=i.toViewElement(e);n&&t.push({type:"children",node:n})}!t.length&&ft.isAndroid||n.document.fire("mutations",{mutations:t})},{priority:"lowest"})}destroy(){super.destroy(),this._typingQueue.destroy()}}class wm{editor;flushDebounced=ti(()=>this.flush("timeout"),50);_queue=[];_isComposing=!1;_affectedElements=new Set;constructor(t){this.editor=t}destroy(){for(this.flushDebounced.cancel(),this._affectedElements.clear();this._queue.length;)this.shift()}get length(){return this._queue.length}push(t,e){const n={text:t.text};if(t.selection){n.selectionRanges=[];for(const e of t.selection.getRanges())n.selectionRanges.push(Lr.fromRange(e)),this._affectedElements.add(e.start.parent)}this._queue.push(n),this._isComposing||=e,this.flushDebounced()}shift(){const t=this._queue.shift(),e={text:t.text};if(t.selectionRanges){const n=t.selectionRanges.map(t=>function(t){const e=t.toRange();return t.detach(),"$graveyard"==e.root.rootName?null:e}(t)).filter(t=>!!t);n.length&&(e.selection=this.editor.model.createSelection(n))}return e}flush(t){const e=this.editor,n=e.model,i=e.editing.view;if(this.flushDebounced.cancel(),!this._queue.length)return;const o=e.commands.get("insertText").buffer;n.enqueueChange(o.batch,()=>{for(o.lock();this._queue.length;){const t=this.shift();e.execute("insertText",t)}o.unlock(),this._isComposing||this._affectedElements.clear(),this._isComposing=!1}),i.scrollToTheSelection()}isElementAffected(t){return this._affectedElements.has(t)}hasAffectedElements(){return this._affectedElements.size>0}flushAffectedElements(){const t=Array.from(this._affectedElements);return this._affectedElements.clear(),t}}function _m(t,e){if(!e.isEnabled)return;const n=e.buffer;n.lock(),t.enqueueChange(n.batch,()=>{t.deleteContent(t.document.selection)}),n.unlock()}function vm(t,e){let n=t.is("$text")?t.parent:t;for(;!e.toModelElement(n);)n=n.parent;return n}class ym extends oc{direction;_buffer;constructor(t,e){super(t),this.direction=e,this._buffer=new gm(t.model,t.config.get("typing.undoStep")),this._isEnabledBasedOnSelection=!1}get buffer(){return this._buffer}execute(t={}){const e=this.editor.model,n=e.document;e.enqueueChange(this._buffer.batch,i=>{this._buffer.lock();const o=i.createSelection(t.selection||n.selection);if(!e.canEditAt(o))return;const r=t.sequence||1,s=o.isCollapsed;if(o.isCollapsed&&e.modifySelection(o,{direction:this.direction,unit:t.unit,treatEmojiAsSingleUnit:!0}),this._shouldEntireContentBeReplacedWithParagraph(r))return void this._replaceEntireContentWithParagraph(i);if(this._shouldReplaceFirstBlockWithParagraph(o,r))return void this.editor.execute("paragraph",{selection:o});if(o.isCollapsed)return;let a=0;o.getFirstRange().getMinimalFlatRanges().forEach(t=>{a+=de(t.getWalker({singleCharacters:!0,ignoreElementEnd:!0,shallow:!0}))}),e.deleteContent(o,{doNotResetEntireContent:s,direction:this.direction}),this._buffer.input(a),i.setSelection(o),this._buffer.unlock()})}_shouldEntireContentBeReplacedWithParagraph(t){if(t>1)return!1;const e=this.editor.model,n=e.document.selection,i=e.schema.getLimitElement(n);if(!n.isCollapsed||!n.containsEntireContent(i))return!1;if(!e.schema.checkChild(i,"paragraph"))return!1;const o=i.getChild(0);return!o||!o.is("element","paragraph")}_replaceEntireContentWithParagraph(t){const e=this.editor.model,n=e.document.selection,i=e.schema.getLimitElement(n),o=t.createElement("paragraph");t.remove(t.createRangeIn(i)),t.insert(o,i),t.setSelection(o,0)}_shouldReplaceFirstBlockWithParagraph(t,e){const n=this.editor.model;if(e>1||"backward"!=this.direction)return!1;if(!t.isCollapsed)return!1;const i=t.getFirstPosition(),o=n.schema.getLimitElement(i),r=o.getChild(0);return i.parent==r&&!!t.containsEntireContent(r)&&!!n.schema.checkChild(o,"paragraph")&&"paragraph"!=r.name}}const Cm="word",xm="selection",Am="backward",Em="forward",Sm={deleteContent:{unit:xm,direction:Am},deleteContentBackward:{unit:"codePoint",direction:Am},deleteWordBackward:{unit:Cm,direction:Am},deleteHardLineBackward:{unit:xm,direction:Am},deleteSoftLineBackward:{unit:xm,direction:Am},deleteContentForward:{unit:"character",direction:Em},deleteWordForward:{unit:Cm,direction:Em},deleteHardLineForward:{unit:xm,direction:Em},deleteSoftLineForward:{unit:xm,direction:Em}};class Tm extends Wo{constructor(t){super(t);const e=t.document;let n=0;e.on("keydown",()=>{n++}),e.on("keyup",()=>{n=0}),e.on("beforeinput",(i,o)=>{if(!this.isEnabled)return;const{targetRanges:r,domEvent:s,inputType:a}=o,l=Sm[a];if(!l)return;const c={direction:l.direction,unit:l.unit,sequence:n};c.unit==xm&&(c.selectionToRemove=t.createSelection(r[0])),"deleteContentBackward"===a&&(ft.isAndroid&&(c.sequence=1),function(t){if(1!=t.length||t[0].isCollapsed)return!1;const e=t[0].getWalker({direction:"backward",singleCharacters:!0,ignoreElementEnd:!0});let n=0;for(const{nextPosition:t,item:i}of e){if(t.parent.is("$text")){const e=t.parent.data,i=t.offset;if(Pn(e,i)||Mn(e,i)||Ln(e,i))continue;n++}else(i.is("containerElement")||i.is("emptyElement"))&&n++;if(n>1)return!0}return!1}(r)&&(c.unit=xm,c.selectionToRemove=t.createSelection(r)));const d=new $i(e,"delete",r[0]);e.fire(d,new qo(t,s,c)),d.stop.called&&i.stop()}),ft.isBlink&&function(t){const e=t.view,n=e.document;let i=null,o=!1;function r(t){return t==an.backspace||t==an.delete}function s(t){return t==an.backspace?Am:Em}n.on("keydown",(t,{keyCode:e})=>{i=e,o=!1}),n.on("keyup",(a,{keyCode:l,domEvent:c})=>{const d=n.selection,u=t.isEnabled&&l==i&&r(l)&&!d.isCollapsed&&!o;if(i=null,u){const t=d.getFirstRange(),i=new $i(n,"delete",t),o={unit:xm,direction:s(l),selectionToRemove:d};n.fire(i,new qo(e,c,o))}}),n.on("beforeinput",(t,{inputType:e})=>{const n=Sm[e];r(i)&&n&&n.direction==s(i)&&(o=!0)},{priority:"high"}),n.on("beforeinput",(t,{inputType:e,data:n})=>{i==an.delete&&"insertText"==e&&""==n&&t.stop()},{priority:"high"})}(this)}observe(){}stopObserving(){}}class Im extends nc{_undoOnBackspace;static get pluginName(){return"Delete"}static get isOfficialPlugin(){return!0}init(){const t=this.editor,e=t.editing.view,n=e.document,i=t.model.document;e.addObserver(Tm),this._undoOnBackspace=!1;const o=new ym(t,"forward");t.commands.add("deleteForward",o),t.commands.add("forwardDelete",o),t.commands.add("delete",new ym(t,"backward")),this.listenTo(n,"delete",(i,o)=>{n.isComposing||o.preventDefault();const{direction:r,sequence:s,selectionToRemove:a,unit:l}=o,c="forward"===r?"deleteForward":"delete",d={sequence:s};if("selection"==l){const e=Array.from(a.getRanges()).map(e=>t.editing.mapper.toModelRange(e)).map(e=>Da(e,t.model.schema)||e);d.selection=t.model.createSelection(e)}else d.unit=l;t.execute(c,d),e.scrollToTheSelection()},{priority:"low"}),this.listenTo(n,"keydown",(o,r)=>{if(n.isComposing||r.keyCode!=an.backspace||!i.selection.isCollapsed)return;const s=t.model.schema.getLimitElement(i.selection),a=t.model.createPositionAt(s,0);if(a.isTouching(i.selection.getFirstPosition())){r.preventDefault();const i=t.model.schema.getNearestSelectionRange(a,"forward");if(!i)return;const o=e.createSelection(t.editing.mapper.toViewRange(i)),s=o.getFirstRange(),l=new $i(document,"delete",s),c={unit:"selection",direction:"backward",selectionToRemove:o};n.fire(l,new qo(e,r.domEvent,c))}}),this.editor.plugins.has("UndoEditing")&&(this.listenTo(n,"delete",(e,n)=>{this._undoOnBackspace&&"backward"==n.direction&&1==n.sequence&&"codePoint"==n.unit&&(this._undoOnBackspace=!1,t.execute("undo"),n.preventDefault(),e.stop())},{context:"$capture"}),this.listenTo(i,"change",()=>{this._undoOnBackspace=!1}))}requestUndoOnBackspace(){this.editor.plugins.has("UndoEditing")&&(this._undoOnBackspace=!0)}}class Pm extends nc{static get requires(){return[km,Im]}static get pluginName(){return"Typing"}static get isOfficialPlugin(){return!0}}function Mm(t,e){let n=t.start;return{text:Array.from(t.getWalker({ignoreElementEnd:!1})).reduce((t,{item:i})=>i.is("$text")||i.is("$textProxy")?t+i.data:(n=e.createPositionAfter(i),""),""),range:e.createRange(n,t.end)}}class Nm extends(ie()){model;testCallback;_hasMatch;constructor(t,e){super(),this.model=t,this.testCallback=e,this._hasMatch=!1,this.set("isEnabled",!0),this.on("change:isEnabled",()=>{this.isEnabled?this._startListening():(this.stopListening(t.document.selection),this.stopListening(t.document))}),this._startListening()}get hasMatch(){return this._hasMatch}_startListening(){const t=this.model.document;this.listenTo(t.selection,"change:range",(e,{directChange:n})=>{n&&(t.selection.isCollapsed?this._evaluateTextBeforeSelection("selection"):this.hasMatch&&(this.fire("unmatched"),this._hasMatch=!1))}),this.listenTo(t,"change:data",(t,e)=>{!e.isUndo&&e.isLocal&&this._evaluateTextBeforeSelection("data",{batch:e})})}_evaluateTextBeforeSelection(t,e={}){const n=this.model,i=n.document.selection,o=n.createRange(n.createPositionAt(i.focus.parent,0),i.focus),{text:r,range:s}=Mm(o,n),a=this.testCallback(r);if(!a&&this.hasMatch&&this.fire("unmatched"),this._hasMatch=!!a,a){const n=Object.assign(e,{text:r,range:s});"object"==typeof a&&Object.assign(n,a),this.fire(`matched:${t}`,n)}}}class Lm extends nc{attributes;_overrideUid;_isNextGravityRestorationSkipped=!1;static get pluginName(){return"TwoStepCaretMovement"}static get isOfficialPlugin(){return!0}constructor(t){super(t),this.attributes=new Set,this._overrideUid=null}init(){const t=this.editor,e=t.model,n=t.editing.view,i=t.locale,o=e.document.selection;this.listenTo(n.document,"arrowKey",(t,e)=>{if(!o.isCollapsed)return;if(e.shiftKey||e.altKey||e.ctrlKey)return;const n=e.keyCode==an.arrowright,r=e.keyCode==an.arrowleft;if(!n&&!r)return;const s=i.contentLanguageDirection;let a=!1;a="ltr"===s&&n||"rtl"===s&&r?this._handleForwardMovement(e):this._handleBackwardMovement(e),!0===a&&t.stop()},{context:"$text",priority:"highest"}),this.listenTo(o,"change:range",(t,e)=>{this._isNextGravityRestorationSkipped?this._isNextGravityRestorationSkipped=!1:this._isGravityOverridden&&(!e.directChange&&Bm(o.getFirstPosition(),this.attributes)||this._restoreGravity())}),this._enableClickingAfterNode(),this._enableInsertContentSelectionAttributesFixer(),this._handleDeleteContentAfterNode()}registerAttribute(t){this.attributes.add(t)}_handleForwardMovement(t){const e=this.attributes,n=this.editor.model,i=n.document.selection,o=i.getFirstPosition();return!(this._isGravityOverridden||o.isAtStart&&Vm(i,e)||!Bm(o,e)||(t&&Rm(t),Vm(i,e)&&Bm(o,e,!0)?Om(n,e):this._overrideGravity(),0))}_handleBackwardMovement(t){const e=this.attributes,n=this.editor.model,i=n.document.selection,o=i.getFirstPosition();return this._isGravityOverridden?(t&&Rm(t),this._restoreGravity(),Bm(o,e,!0)?Om(n,e):zm(n,e,o),!0):o.isAtStart?!!Vm(i,e)&&(t&&Rm(t),zm(n,e,o),!0):!Vm(i,e)&&Bm(o,e,!0)?(t&&Rm(t),zm(n,e,o),!0):!!Dm(o,e)&&(o.isAtEnd&&!Vm(i,e)&&Bm(o,e)?(t&&Rm(t),zm(n,e,o),!0):(this._isNextGravityRestorationSkipped=!0,this._overrideGravity(),!1))}_enableClickingAfterNode(){const t=this.editor,e=t.model,n=e.document.selection,i=t.editing.view.document;t.editing.view.addObserver(nl),t.editing.view.addObserver(il);let o=!1,r=!1;this.listenTo(i,"touchstart",()=>{r=!1,o=!0}),this.listenTo(i,"mousedown",()=>{r=!0}),this.listenTo(i,"selectionChange",()=>{const t=this.attributes;if(!r&&!o)return;if(r=!1,o=!1,!n.isCollapsed)return;if(!Vm(n,t))return;const i=n.getFirstPosition();Bm(i,t)&&(i.isAtStart||Bm(i,t,!0)?Om(e,t):this._isGravityOverridden||this._overrideGravity())})}_enableInsertContentSelectionAttributesFixer(){const t=this.editor.model,e=t.document.selection,n=this.attributes;this.listenTo(t,"insertContent",()=>{const i=e.getFirstPosition();Vm(e,n)&&Bm(i,n)&&Om(t,n)},{priority:"low"})}_handleDeleteContentAfterNode(){const t=this.editor,e=t.model,n=e.document.selection,i=t.editing.view;let o=!1,r=!1;this.listenTo(i.document,"delete",(t,e)=>{o="backward"===e.direction},{priority:"high"}),this.listenTo(e,"deleteContent",()=>{if(!o)return;const t=n.getFirstPosition();r=Vm(n,this.attributes)&&!Dm(t,this.attributes)},{priority:"high"}),this.listenTo(e,"deleteContent",()=>{o&&(o=!1,r||t.model.enqueueChange(()=>{const t=n.getFirstPosition();Vm(n,this.attributes)&&Bm(t,this.attributes)&&(t.isAtStart||Bm(t,this.attributes,!0)?Om(e,this.attributes):this._isGravityOverridden||this._overrideGravity())}))},{priority:"low"})}get _isGravityOverridden(){return!!this._overrideUid}_overrideGravity(){this._overrideUid=this.editor.model.change(t=>t.overrideSelectionGravity())}_restoreGravity(){this.editor.model.change(t=>{t.restoreSelectionGravity(this._overrideUid),this._overrideUid=null})}}function Vm(t,e){for(const n of e)if(t.hasAttribute(n))return!0;return!1}function zm(t,e,n){const i=n.nodeBefore;t.change(n=>{if(i){const e=[],o=t.schema.isObject(i)&&t.schema.isInline(i);for(const[n,r]of i.getAttributes())!t.schema.checkAttribute("$text",n)||o&&!1===t.schema.getAttributeProperties(n).copyFromObject||e.push([n,r]);n.setSelectionAttribute(e)}else n.removeSelectionAttribute(e)})}function Om(t,e){t.change(t=>{t.removeSelectionAttribute(e)})}function Rm(t){t.preventDefault()}function Dm(t,e){return Bm(t.getShiftedBy(-1),e)}function Bm(t,e,n=!1){const{nodeBefore:i,nodeAfter:o}=t;for(const t of e){const e=i?i.getAttribute(t):void 0,r=o?o.getAttribute(t):void 0;if((!n||void 0!==e&&void 0!==r)&&r!==e)return!0}return!1}const Fm={copyright:{from:"(c)",to:"©"},registeredTrademark:{from:"(r)",to:"®"},trademark:{from:"(tm)",to:"™"},oneHalf:{from:/(^|[^/a-z0-9])(1\/2)([^/a-z0-9])$/i,to:[null,"½",null]},oneThird:{from:/(^|[^/a-z0-9])(1\/3)([^/a-z0-9])$/i,to:[null,"⅓",null]},twoThirds:{from:/(^|[^/a-z0-9])(2\/3)([^/a-z0-9])$/i,to:[null,"⅔",null]},oneForth:{from:/(^|[^/a-z0-9])(1\/4)([^/a-z0-9])$/i,to:[null,"¼",null]},threeQuarters:{from:/(^|[^/a-z0-9])(3\/4)([^/a-z0-9])$/i,to:[null,"¾",null]},lessThanOrEqual:{from:"<=",to:"≤"},greaterThanOrEqual:{from:">=",to:"≥"},notEqual:{from:"!=",to:"≠"},arrowLeft:{from:"<-",to:"←"},arrowRight:{from:"->",to:"→"},horizontalEllipsis:{from:"...",to:"…"},enDash:{from:/(^| )(--)( )$/,to:[null,"–",null]},emDash:{from:/(^| )(---)( )$/,to:[null,"—",null]},quotesPrimary:{from:Wm('"'),to:[null,"“",null,"”"]},quotesSecondary:{from:Wm("'"),to:[null,"‘",null,"’"]},quotesPrimaryEnGb:{from:Wm("'"),to:[null,"‘",null,"’"]},quotesSecondaryEnGb:{from:Wm('"'),to:[null,"“",null,"”"]},quotesPrimaryPl:{from:Wm('"'),to:[null,"„",null,"”"]},quotesSecondaryPl:{from:Wm("'"),to:[null,"‚",null,"’"]}},jm={symbols:["copyright","registeredTrademark","trademark"],mathematical:["oneHalf","oneThird","twoThirds","oneForth","threeQuarters","lessThanOrEqual","greaterThanOrEqual","notEqual","arrowLeft","arrowRight"],typography:["horizontalEllipsis","enDash","emDash"],quotes:["quotesPrimary","quotesSecondary"]},Hm=["symbols","mathematical","typography","quotes"];class Um extends nc{static get requires(){return["Delete","Input"]}static get pluginName(){return"TextTransformation"}static get isOfficialPlugin(){return!0}constructor(t){super(t),t.config.define("typing",{transformations:{include:Hm}})}init(){const t=this.editor.model.document.selection;t.on("change:range",()=>{this.isEnabled=!t.anchor.parent.is("element","codeBlock")}),this._enableTransformationWatchers()}_enableTransformationWatchers(){const t=this.editor,e=t.model,n=t.plugins.get("Delete"),i=function(t){const e=t.extra||[],n=t.remove||[],i=t=>!n.includes(t);return function(t){const e=new Set;for(const n of t)if("string"==typeof n&&jm[n])for(const t of jm[n])e.add(t);else e.add(n);return Array.from(e)}(t.include.concat(e).filter(i)).filter(i).map(t=>"string"==typeof t&&Fm[t]?Fm[t]:t).filter(t=>"object"==typeof t).map(t=>{return{from:(i=t.from,"string"==typeof i?new RegExp(`(${n=i,function(t){return t.replace(/[\\^$.*+?()[\]{}|]/g,"\\$&")}(Sc(n))})$`):i),to:(e=t.to,"string"==typeof e?()=>[e]:e instanceof Array?()=>e:e)};var e,n,i})}(t.config.get("typing.transformations")),o=new Nm(t.model,t=>{for(const e of i)if(e.from.test(t))return{normalizedTransformation:e}});o.on("matched:data",(t,i)=>{if(!i.batch.isTyping)return;const{from:o,to:r}=i.normalizedTransformation,s=o.exec(i.text),a=r(s.slice(1)),l=i.range;let c=s.index;e.enqueueChange(t=>{for(let n=1;n<s.length;n++){const i=s[n],o=a[n-1];if(null==o){c+=i.length;continue}const r=l.start.getShiftedBy(c),d=e.createRange(r,r.getShiftedBy(i.length)),u=$m(r);e.insertContent(t.createText(o,u),d),c+=o.length}e.enqueueChange(()=>{n.requestUndoOnBackspace()})})}),o.bind("isEnabled").to(this)}}function $m(t){return(t.textNode?t.textNode:t.nodeAfter).getAttributes()}function Wm(t){return new RegExp(`(^|\\s)(${t})([^${t}]*)(${t})$`)}function qm(t,e,n,i){return i.createRange(Km(t,e,n,!0,i),Km(t,e,n,!1,i))}function Km(t,e,n,i,o){let r=t.textNode||(i?t.nodeBefore:t.nodeAfter),s=null;for(;r&&r.getAttribute(e)==n;)s=r,r=i?r.previousSibling:r.nextSibling;return s?o.createPositionAt(s,i?"before":"after"):t}function Gm(t,e,n,i){const o=t.editing.view,r=new Set;o.document.registerPostFixer(o=>{const s=t.model.document.selection;let a=!1;if(s.hasAttribute(e)){const l=qm(s.getFirstPosition(),e,s.getAttribute(e),t.model),c=t.editing.mapper.toViewRange(l);for(const t of c.getItems())t.is("element",n)&&!t.hasClass(i)&&(o.addClass(i,t),r.add(t),a=!0)}return a}),t.conversion.for("editingDowncast").add(t=>{function e(){o.change(t=>{for(const e of r.values())t.removeClass(i,e),r.delete(e)})}t.on("insert",e,{priority:"highest"}),t.on("remove",e,{priority:"highest"}),t.on("attribute",e,{priority:"highest"}),t.on("selection",e,{priority:"highest"})})}function Qm(t,e,n,i){let o,r=null;"function"==typeof i?o=i:(r=t.commands.get(i),o=()=>{t.execute(i)}),t.model.document.on("change:data",(s,a)=>{if(r&&!r.isEnabled||!e.isEnabled)return;const l=wn(t.model.document.selection.getRanges());if(!l.isCollapsed)return;if(a.isUndo||!a.isLocal)return;const c=Array.from(t.model.document.differ.getChanges()),d=c[0];if(1!=c.length||"insert"!==d.type||"$text"!=d.name||1!=d.length)return;const u=d.position.parent;if(u.is("element","codeBlock"))return;if(u.is("element","listItem")&&"function"!=typeof i&&!["numberedList","bulletedList","todoList"].includes(i))return;if(r&&!0===r.value)return;const h=u.getChild(0),g=t.model.createRangeOn(h);if(!g.containsRange(l)&&!l.end.isEqual(g.end))return;const m=n.exec(h.data.substr(0,l.end.offset));m&&t.model.enqueueChange(e=>{const n=t.model.document.selection,i=e.createPositionAt(u,0),r=e.createPositionAt(u,m[0].length),s=new Lr(i,r);if(!1!==o({match:m})){const t=Array.from(n.getAttributes());e.remove(s);const i=n.getFirstRange(),o=e.createRangeIn(u);!u.isEmpty||o.isEqual(i)||o.containsRange(i,!0)||e.remove(u),function(t,e,n){const i=t.model.schema,o=e.getFirstPosition();let r=new ps(o);i.checkChild(r,"$text")&&(r=r.push("$text"));for(const[e,o]of n)i.checkAttribute(r,e)&&t.setSelectionAttribute(e,o)}(e,n,t)}s.detach(),t.model.enqueueChange(()=>{t.plugins.get("Delete").requestUndoOnBackspace()})})})}function Ym(t,e,n,i){let o,r;n instanceof RegExp?o=n:r=n,r=r||(t=>{let e;const n=[],i=[];for(;null!==(e=o.exec(t))&&!(e&&e.length<4);){let{index:t,1:o,2:r,3:s}=e;const a=o+r+s;t+=e[0].length-a.length;const l=[t,t+o.length],c=[t+o.length+r.length,t+o.length+r.length+s.length];n.push(l),n.push(c),i.push([t+o.length,t+o.length+r.length])}return{remove:n,format:i}}),t.model.document.on("change:data",(n,o)=>{if(o.isUndo||!o.isLocal||!e.isEnabled)return;const s=t.model,a=s.document.selection;if(!a.isCollapsed)return;const l=Array.from(s.document.differ.getChanges()),c=l[0];if(1!=l.length||"insert"!==c.type||"$text"!=c.name||1!=c.length)return;const d=a.focus,u=d.parent,{text:h,range:g}=function(t,e){let n=t.start;return{text:Array.from(t.getItems()).reduce((t,i)=>!i.is("$text")&&!i.is("$textProxy")||i.getAttribute("code")?(n=e.createPositionAfter(i),""):t+i.data,""),range:e.createRange(n,t.end)}}(s.createRange(s.createPositionAt(u,0),d),s),m=r(h),p=Jm(g.start,m.format,s),f=Jm(g.start,m.remove,s);p.length&&f.length&&s.enqueueChange(e=>{if(!1!==i(e,p)){for(const t of f.reverse())e.remove(t);s.enqueueChange(()=>{t.plugins.get("Delete").requestUndoOnBackspace()})}})})}function Jm(t,e,n){return e.filter(t=>void 0!==t[0]&&void 0!==t[1]).map(e=>n.createRange(t.getShiftedBy(e[0]),t.getShiftedBy(e[1])))}class Zm extends nc{static get requires(){return[Im]}static get pluginName(){return"Autoformat"}static get isOfficialPlugin(){return!0}afterInit(){const t=this.editor,e=this.editor.t;this._addListAutoformats(),this._addBasicStylesAutoformats(),this._addHeadingAutoformats(),this._addBlockQuoteAutoformats(),this._addCodeBlockAutoformats(),this._addHorizontalLineAutoformats(),t.accessibility.addKeystrokeInfos({keystrokes:[{label:e("Revert autoformatting action"),keystroke:"Backspace"}]})}_addListAutoformats(){const t=this.editor.commands;t.get("bulletedList")&&Qm(this.editor,this,/^[*-]\s$/,"bulletedList"),t.get("numberedList")&&Qm(this.editor,this,/^1[.|)]\s$/,"numberedList"),t.get("todoList")&&Qm(this.editor,this,/^\[\s?\]\s$/,"todoList"),t.get("checkTodoList")&&Qm(this.editor,this,/^\[\s?x\s?\]\s$/,()=>{this.editor.execute("todoList"),this.editor.execute("checkTodoList")})}_addBasicStylesAutoformats(){const t=this.editor.commands;if(t.get("bold")){const t=Xm(this.editor,"bold");Ym(this.editor,this,/(?:^|\s)(\*\*)([^*]+)(\*\*)$/g,t),Ym(this.editor,this,/(?:^|\s)(__)([^_]+)(__)$/g,t)}if(t.get("italic")){const t=Xm(this.editor,"italic");Ym(this.editor,this,/(?:^|\s)(\*)([^*_]+)(\*)$/g,t),Ym(this.editor,this,/(?:^|\s)(_)([^_]+)(_)$/g,t)}if(t.get("code")){const t=Xm(this.editor,"code");Ym(this.editor,this,/(`)([^`]+)(`)$/g,t)}if(t.get("strikethrough")){const t=Xm(this.editor,"strikethrough");Ym(this.editor,this,/(~~)([^~]+)(~~)$/g,t)}}_addHeadingAutoformats(){const t=this.editor.commands.get("heading");t&&t.modelElements.filter(t=>t.match(/^heading[1-6]$/)).forEach(e=>{const n=e[7],i=new RegExp(`^(#{${n}})\\s$`);Qm(this.editor,this,i,()=>{if(!t.isEnabled||t.value===e)return!1;this.editor.execute("heading",{value:e})})})}_addBlockQuoteAutoformats(){this.editor.commands.get("blockQuote")&&Qm(this.editor,this,/^>\s$/,"blockQuote")}_addCodeBlockAutoformats(){const t=this.editor,e=t.model.document.selection;t.commands.get("codeBlock")&&Qm(t,this,/^```$/,()=>{if(e.getFirstPosition().parent.is("element","listItem"))return!1;this.editor.execute("codeBlock",{usePreviousLanguageChoice:!0})})}_addHorizontalLineAutoformats(){this.editor.commands.get("horizontalLine")&&Qm(this.editor,this,/^---$/,"horizontalLine")}}function Xm(t,e){return(n,i)=>{if(!t.commands.get(e).isEnabled)return!1;const o=t.model.schema.getValidRanges(i,e);for(const t of o)n.setAttribute(e,!0,t);n.removeSelectionAttribute(e)}}class tp extends nc{adapter;_debouncedSave;_lastDocumentVersion;_savePromise;_domEmitter;_config;_pendingActions;_makeImmediateSave;_action=null;static get pluginName(){return"Autosave"}static get isOfficialPlugin(){return!0}static get requires(){return[vc]}constructor(t){super(t);const e=t.config.get("autosave")||{},n=e.waitingTime||1e3;this.set("state","synchronized"),this._debouncedSave=ti(this._save.bind(this),n),this._lastDocumentVersion=t.model.document.version,this._savePromise=null,this._domEmitter=new(_e()),this._config=e,this._pendingActions=t.plugins.get(vc),this._makeImmediateSave=!1}init(){const t=this.editor,e=t.model.document;this.listenTo(t,"ready",()=>{this.listenTo(e,"change:data",(t,e)=>{this._saveCallbacks.length&&e.isLocal&&("synchronized"===this.state&&(this.state="waiting",this._setPendingAction()),"waiting"===this.state&&this._debouncedSave())})}),this.listenTo(t,"destroy",()=>this._flush(),{priority:"highest"}),this._domEmitter.listenTo(window,"beforeunload",(t,e)=>{this._pendingActions.hasAny&&(e.returnValue=this._pendingActions.first.message)})}destroy(){this._domEmitter.stopListening(),super.destroy()}save(){return this._debouncedSave.cancel(),this._save()}_flush(){this._debouncedSave.flush()}_save(){return this._savePromise?(this._makeImmediateSave=this.editor.model.document.version>this._lastDocumentVersion,this._savePromise):(this._setPendingAction(),this.state="saving",this._lastDocumentVersion=this.editor.model.document.version,this._savePromise=Promise.resolve().then(()=>Promise.all(this._saveCallbacks.map(t=>t(this.editor)))).finally(()=>{this._savePromise=null}).then(()=>{if(this._makeImmediateSave)return this._makeImmediateSave=!1,this._save();this.editor.model.document.version>this._lastDocumentVersion?(this.state="waiting",this._debouncedSave()):(this.state="synchronized",this._pendingActions.remove(this._action),this._action=null)}).catch(t=>{throw this.state="error",this.state="saving",this._debouncedSave(),t}),this._savePromise)}_setPendingAction(){const t=this.editor.t;this._action||(this._action=this._pendingActions.add(t("Saving changes")))}get _saveCallbacks(){const t=[];return this.adapter&&this.adapter.save&&t.push(this.adapter.save),this._config.save&&t.push(this._config.save),t}}class ep extends oc{attributeKey;constructor(t,e){super(t),this.attributeKey=e}refresh(){const t=this.editor.model,e=t.document;this.value=this._getValueFromFirstAllowedNode(),this.isEnabled=t.schema.checkAttributeInSelection(e.selection,this.attributeKey)}execute(t={}){const e=this.editor.model,n=e.document.selection,i=void 0===t.forceValue?!this.value:t.forceValue;e.change(t=>{if(n.isCollapsed)i?t.setSelectionAttribute(this.attributeKey,!0):t.removeSelectionAttribute(this.attributeKey);else{const o=e.schema.getValidRanges(n.getRanges(),this.attributeKey);for(const e of o)i?t.setAttribute(this.attributeKey,i,e):t.removeAttribute(this.attributeKey,e)}})}_getValueFromFirstAllowedNode(){const t=this.editor.model,e=t.schema,n=t.document.selection;if(n.isCollapsed)return n.hasAttribute(this.attributeKey);for(const t of n.getRanges())for(const n of t.getItems())if(e.checkAttribute(n,this.attributeKey))return n.hasAttribute(this.attributeKey);return!1}}const np="bold";class ip extends nc{static get pluginName(){return"BoldEditing"}static get isOfficialPlugin(){return!0}init(){const t=this.editor,e=this.editor.t;t.model.schema.extend("$text",{allowAttributes:np}),t.model.schema.setAttributeProperties(np,{isFormatting:!0,copyOnEnter:!0}),t.conversion.attributeToElement({model:np,view:"strong",upcastAlso:["b",t=>{const e=t.getStyle("font-weight");return e&&("bold"==e||Number(e)>=600)?{name:!0,styles:["font-weight"]}:null}]}),t.commands.add(np,new ep(t,np)),t.keystrokes.set("CTRL+B",np),t.accessibility.addKeystrokeInfos({keystrokes:[{label:e("Bold text"),keystroke:"CTRL+B"}]})}}function op({editor:t,commandName:e,plugin:n,icon:i,label:o,keystroke:r}){return s=>{const a=t.commands.get(e),l=new s(t.locale);return l.set({label:o,icon:i,keystroke:r,isToggleable:!0}),l.bind("isEnabled").to(a,"isEnabled"),l.bind("isOn").to(a,"value"),l instanceof Gu?l.set({role:"menuitemcheckbox"}):l.set({tooltip:!0}),n.listenTo(l,"execute",()=>{t.execute(e),t.editing.view.focus()}),l}}const rp="bold";class sp extends nc{static get pluginName(){return"BoldUI"}static get isOfficialPlugin(){return!0}init(){const t=this.editor,e=t.locale.t,n=op({editor:t,commandName:rp,plugin:this,icon:Lc,label:e("Bold"),keystroke:"CTRL+B"});t.ui.componentFactory.add(rp,()=>n(Lu)),t.ui.componentFactory.add("menuBar:"+rp,()=>n(Gu))}}class ap extends nc{static get requires(){return[ip,sp]}static get pluginName(){return"Bold"}static get isOfficialPlugin(){return!0}}const lp="code";class cp extends nc{static get pluginName(){return"CodeEditing"}static get isOfficialPlugin(){return!0}static get requires(){return[Lm]}init(){const t=this.editor,e=this.editor.t;t.model.schema.extend("$text",{allowAttributes:lp}),t.model.schema.setAttributeProperties(lp,{isFormatting:!0,copyOnEnter:!1}),t.conversion.attributeToElement({model:lp,view:"code"}),t.commands.add(lp,new ep(t,lp)),t.plugins.get(Lm).registerAttribute(lp),Gm(t,lp,"code","ck-code_selected"),t.accessibility.addKeystrokeInfos({keystrokes:[{label:e("Move out of an inline code style"),keystroke:[["arrowleft","arrowleft"],["arrowright","arrowright"]]}]})}}const dp="code";class up extends nc{static get pluginName(){return"CodeUI"}static get isOfficialPlugin(){return!0}init(){const t=this.editor,e=t.locale.t,n=op({editor:t,commandName:dp,plugin:this,icon:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="m12.5 5.7 5.2 3.9v1.3l-5.6 4c-.1.2-.3.2-.5.2-.3-.1-.6-.7-.6-1l.3-.4 4.7-3.5L11.5 7l-.2-.2c-.1-.3-.1-.6 0-.8.2-.2.5-.4.8-.4a.8.8 0 0 1 .4.1m-5.2 0L2 9.6v1.3l5.6 4c.1.2.3.2.5.2.3-.1.7-.7.6-1 0-.1 0-.3-.2-.4l-5-3.5L8.2 7l.2-.2c.1-.3.1-.6 0-.8-.2-.2-.5-.4-.8-.4a.8.8 0 0 0-.3.1"/></svg>',label:e("Code")});t.ui.componentFactory.add(dp,()=>n(Lu)),t.ui.componentFactory.add("menuBar:"+dp,()=>n(Gu))}}class hp extends nc{static get requires(){return[cp,up]}static get pluginName(){return"Code"}static get isOfficialPlugin(){return!0}}const gp="italic";class mp extends nc{static get pluginName(){return"ItalicEditing"}static get isOfficialPlugin(){return!0}init(){const t=this.editor,e=this.editor.t;t.model.schema.extend("$text",{allowAttributes:gp}),t.model.schema.setAttributeProperties(gp,{isFormatting:!0,copyOnEnter:!0}),t.conversion.attributeToElement({model:gp,view:"i",upcastAlso:["em",{styles:{"font-style":"italic"}}]}),t.commands.add(gp,new ep(t,gp)),t.keystrokes.set("CTRL+I",gp),t.accessibility.addKeystrokeInfos({keystrokes:[{label:e("Italic text"),keystroke:"CTRL+I"}]})}}const pp="italic";class fp extends nc{static get pluginName(){return"ItalicUI"}static get isOfficialPlugin(){return!0}init(){const t=this.editor,e=t.locale.t,n=op({editor:t,commandName:pp,plugin:this,icon:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="m9.586 14.633.021.004q-.054.502.393.962.123.125.274.201h1.474a.6.6 0 1 1 0 1.2H5.304a.6.6 0 0 1 0-1.2h1.15q.711-.106 1.005-.334.235-.182.404-.597l2.416-9.55a1.05 1.05 0 0 0-.281-.823 1.1 1.1 0 0 0-.442-.296H8.15a.6.6 0 0 1 0-1.2h6.443a.6.6 0 1 1 0 1.2h-1.195q-.564.084-.823.296-.323.263-.623.79z"/></svg>',keystroke:"CTRL+I",label:e("Italic")});t.ui.componentFactory.add(pp,()=>n(Lu)),t.ui.componentFactory.add("menuBar:"+pp,()=>n(Gu))}}class bp extends nc{static get requires(){return[mp,fp]}static get pluginName(){return"Italic"}static get isOfficialPlugin(){return!0}}const kp="strikethrough";class wp extends nc{static get pluginName(){return"StrikethroughEditing"}static get isOfficialPlugin(){return!0}init(){const t=this.editor,e=this.editor.t;t.model.schema.extend("$text",{allowAttributes:kp}),t.model.schema.setAttributeProperties(kp,{isFormatting:!0,copyOnEnter:!0}),t.conversion.attributeToElement({model:kp,view:"s",upcastAlso:["del","strike",{styles:{"text-decoration":"line-through"}}]}),t.commands.add(kp,new ep(t,kp)),t.keystrokes.set("CTRL+SHIFT+X","strikethrough"),t.accessibility.addKeystrokeInfos({keystrokes:[{label:e("Strikethrough text"),keystroke:"CTRL+SHIFT+X"}]})}}const _p="strikethrough";class vp extends nc{static get pluginName(){return"StrikethroughUI"}static get isOfficialPlugin(){return!0}init(){const t=this.editor,e=t.locale.t,n=op({editor:t,commandName:_p,plugin:this,icon:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M7 16.4c-.8-.4-1.5-.9-2.2-1.5a.6.6 0 0 1-.2-.5l.3-.6h1c1 1.2 2.1 1.7 3.7 1.7 1 0 1.8-.3 2.3-.6.6-.4.6-1.2.6-1.3.2-1.2-.9-2.1-.9-2.1h2.1c.3.7.4 1.2.4 1.7v.8l-.6 1.2c-.6.8-1.1 1-1.6 1.2a6 6 0 0 1-2.4.6c-1 0-1.8-.3-2.5-.6M6.8 9 6 8.3c-.4-.5-.5-.8-.5-1.6 0-.7.1-1.3.5-1.8.4-.6 1-1 1.6-1.3a6.3 6.3 0 0 1 4.7 0 4 4 0 0 1 1.7 1l.3.7c0 .1.2.4-.2.7-.4.2-.9.1-1 0a3 3 0 0 0-1.2-1c-.4-.2-1-.3-2-.4-.7 0-1.4.2-2 .6-.8.6-1 .8-1 1.5 0 .8.5 1 1.2 1.5.6.4 1.1.7 1.9 1H6.8z"/><path d="M3 10.5V9h14v1.5z"/></svg>',keystroke:"CTRL+SHIFT+X",label:e("Strikethrough")});t.ui.componentFactory.add(_p,()=>n(Lu)),t.ui.componentFactory.add("menuBar:"+_p,()=>n(Gu))}}class yp extends nc{static get requires(){return[wp,vp]}static get pluginName(){return"Strikethrough"}static get isOfficialPlugin(){return!0}}const Cp="underline";class xp extends nc{static get pluginName(){return"UnderlineEditing"}static get isOfficialPlugin(){return!0}init(){const t=this.editor,e=this.editor.t;t.model.schema.extend("$text",{allowAttributes:Cp}),t.model.schema.setAttributeProperties(Cp,{isFormatting:!0,copyOnEnter:!0}),t.conversion.attributeToElement({model:Cp,view:"u",upcastAlso:{styles:{"text-decoration":"underline"}}}),t.commands.add(Cp,new ep(t,Cp)),t.keystrokes.set("CTRL+U","underline"),t.accessibility.addKeystrokeInfos({keystrokes:[{label:e("Underline text"),keystroke:"CTRL+U"}]})}}const Ap="underline";class Ep extends nc{static get pluginName(){return"UnderlineUI"}static get isOfficialPlugin(){return!0}init(){const t=this.editor,e=t.locale.t,n=op({editor:t,commandName:Ap,plugin:this,icon:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M3 18v-1.5h14V18zm2.2-8V3.6c0-.4.4-.6.8-.6.3 0 .7.2.7.6v6.2c0 2 1.3 2.8 3.2 2.8s3.4-.9 3.4-2.9V3.6c0-.3.4-.5.8-.5.3 0 .7.2.7.5V10c0 2.7-2.2 4-4.9 4-2.6 0-4.7-1.2-4.7-4"/></svg>',label:e("Underline"),keystroke:"CTRL+U"});t.ui.componentFactory.add(Ap,()=>n(Lu)),t.ui.componentFactory.add("menuBar:"+Ap,()=>n(Gu))}}class Sp extends nc{static get requires(){return[xp,Ep]}static get pluginName(){return"Underline"}static get isOfficialPlugin(){return!0}}function*Tp(t,e){for(const n of e)n&&t.getAttributeProperties(n[0]).copyOnEnter&&(yield n)}class Ip extends oc{execute(){this.editor.model.change(t=>{this.enterBlock(t),this.fire("afterExecute",{writer:t})})}enterBlock(t){const e=this.editor.model,n=e.document.selection,i=e.schema,o=n.isCollapsed,r=n.getFirstRange(),s=r.start.parent,a=r.end.parent;if(i.isLimit(s)||i.isLimit(a))return o||s!=a||e.deleteContent(n),!1;if(o){const e=Tp(t.model.schema,n.getAttributes());return Pp(t,r.start),t.setSelectionAttribute(e),!0}{const i=!(r.start.isAtStart&&r.end.isAtEnd),o=s==a;if(e.deleteContent(n,{leaveUnmerged:i}),i){if(o)return Pp(t,n.focus),!0;t.setSelection(a,0)}}return!1}}function Pp(t,e){t.split(e),t.setSelection(e.parent.nextSibling,0)}const Mp={insertParagraph:{isSoft:!1},insertLineBreak:{isSoft:!0}};class Np extends Wo{constructor(t){super(t);const e=this.document;let n=!1;e.on("keydown",(t,e)=>{n=e.shiftKey}),e.on("beforeinput",(i,o)=>{if(!this.isEnabled)return;let r=o.inputType;ft.isSafari&&n&&"insertParagraph"==r&&(r="insertLineBreak");const s=o.domEvent,a=Mp[r];if(!a)return;const l=new $i(e,"enter",o.targetRanges[0]);e.fire(l,new qo(t,s,{isSoft:a.isSoft})),l.stop.called&&i.stop()})}observe(){}stopObserving(){}}class Lp extends nc{static get pluginName(){return"Enter"}static get isOfficialPlugin(){return!0}init(){const t=this.editor,e=t.editing.view,n=e.document,i=this.editor.t;e.addObserver(Np),t.commands.add("enter",new Ip(t)),this.listenTo(n,"enter",(i,o)=>{n.isComposing||o.preventDefault(),o.isSoft||(t.execute("enter"),e.scrollToTheSelection())},{priority:"low"}),t.accessibility.addKeystrokeInfos({keystrokes:[{label:i("Insert a hard break (a new paragraph)"),keystroke:"Enter"}]})}}class Vp extends oc{execute(){const t=this.editor.model,e=t.document;t.change(n=>{!function(t,e,n){const i=n.isCollapsed,o=n.getFirstRange(),r=o.start.parent,s=o.end.parent,a=r==s;if(i){const i=Tp(t.schema,n.getAttributes());zp(t,e,o.end),e.removeSelectionAttribute(n.getAttributeKeys()),e.setSelectionAttribute(i)}else{const i=!(o.start.isAtStart&&o.end.isAtEnd);t.deleteContent(n,{leaveUnmerged:i}),a?zp(t,e,n.focus):i&&e.setSelection(s,0)}}(t,n,e.selection),this.fire("afterExecute",{writer:n})})}refresh(){const t=this.editor.model,e=t.document;this.isEnabled=function(t,e){if(e.rangeCount>1)return!1;const n=e.anchor;if(!n||!t.checkChild(n,"softBreak"))return!1;const i=e.getFirstRange(),o=i.start.parent,r=i.end.parent;return!Op(o,t)&&!Op(r,t)||o===r}(t.schema,e.selection)}}function zp(t,e,n){const i=e.createElement("softBreak");t.insertContent(i,n),e.setSelection(i,"after")}function Op(t,e){return!t.is("rootElement")&&(e.isLimit(t)||Op(t.parent,e))}class Rp extends nc{static get pluginName(){return"ShiftEnter"}static get isOfficialPlugin(){return!0}init(){const t=this.editor,e=t.model.schema,n=t.conversion,i=t.editing.view,o=i.document,r=this.editor.t;e.register("softBreak",{allowWhere:"$text",isInline:!0}),n.for("upcast").elementToElement({model:"softBreak",view:"br"}),n.for("downcast").elementToElement({model:"softBreak",view:(t,{writer:e})=>e.createEmptyElement("br")}),i.addObserver(Np),t.commands.add("shiftEnter",new Vp(t)),this.listenTo(o,"enter",(e,n)=>{o.isComposing||n.preventDefault(),n.isSoft&&(t.execute("shiftEnter"),i.scrollToTheSelection())},{priority:"low"}),t.accessibility.addKeystrokeInfos({keystrokes:[{label:r("Insert a soft break (a <code>&lt;br&gt;</code> element)"),keystroke:"Shift+Enter"}]})}}class Dp extends oc{refresh(){this.value=this._getValue(),this.isEnabled=this._checkEnabled()}execute(t={}){const e=this.editor.model,n=e.schema,i=e.document.selection,o=Array.from(i.getSelectedBlocks()),r=void 0===t.forceValue?!this.value:t.forceValue;e.change(t=>{if(r){const e=o.filter(t=>Bp(t)||jp(n,t));this._applyQuote(t,e)}else this._removeQuote(t,o.filter(Bp))})}_getValue(){const t=wn(this.editor.model.document.selection.getSelectedBlocks());return!(!t||!Bp(t))}_checkEnabled(){if(this.value)return!0;const t=this.editor.model.document.selection,e=this.editor.model.schema,n=wn(t.getSelectedBlocks());return!!n&&jp(e,n)}_removeQuote(t,e){Fp(t,e).reverse().forEach(e=>{if(e.start.isAtStart&&e.end.isAtEnd)return void t.unwrap(e.start.parent);if(e.start.isAtStart){const n=t.createPositionBefore(e.start.parent);return void t.move(e,n)}e.end.isAtEnd||t.split(e.end);const n=t.createPositionAfter(e.end.parent);t.move(e,n)})}_applyQuote(t,e){const n=[];Fp(t,e).reverse().forEach(e=>{let i=Bp(e.start);i||(i=t.createElement("blockQuote"),t.wrap(e,i)),n.push(i)}),n.reverse().reduce((e,n)=>e.nextSibling==n?(t.merge(t.createPositionAfter(e)),e):n)}}function Bp(t){return"blockQuote"==t.parent.name?t.parent:null}function Fp(t,e){let n,i=0;const o=[];for(;i<e.length;){const r=e[i],s=e[i+1];n||(n=t.createPositionBefore(r)),s&&r.nextSibling==s||(o.push(t.createRange(n,t.createPositionAfter(r))),n=null),i++}return o}function jp(t,e){const n=t.checkChild(e.parent,"blockQuote"),i=t.checkChild(["$root","blockQuote"],e);return n&&i}class Hp extends nc{static get pluginName(){return"BlockQuoteEditing"}static get isOfficialPlugin(){return!0}static get requires(){return[Lp,Im]}init(){const t=this.editor,e=t.model.schema;t.commands.add("blockQuote",new Dp(t)),e.register("blockQuote",{inheritAllFrom:"$container"}),t.conversion.elementToElement({model:"blockQuote",view:"blockquote"}),t.model.document.registerPostFixer(n=>{const i=t.model.document.differ.getChanges();for(const t of i)if("insert"==t.type){const i=t.position.nodeAfter;if(!i)continue;if(i.is("element","blockQuote")&&i.isEmpty)return n.remove(i),!0;if(i.is("element","blockQuote")&&!e.checkChild(t.position,i))return n.unwrap(i),!0;if(i.is("element")){const t=n.createRangeIn(i);for(const i of t.getItems())if(i.is("element","blockQuote")&&!e.checkChild(n.createPositionBefore(i),i))return n.unwrap(i),!0}}else if("remove"==t.type){const e=t.position.parent;if(e.is("element","blockQuote")&&e.isEmpty)return n.remove(e),!0}return!1});const n=this.editor.editing.view.document,i=t.model.document.selection,o=t.commands.get("blockQuote");this.listenTo(n,"enter",(e,n)=>{i.isCollapsed&&o.value&&i.getLastPosition().parent.isEmpty&&(t.execute("blockQuote"),t.editing.view.scrollToTheSelection(),n.preventDefault(),e.stop())},{context:"blockquote"}),this.listenTo(n,"delete",(e,n)=>{if("backward"!=n.direction||!i.isCollapsed||!o.value)return;const r=i.getLastPosition().parent;r.isEmpty&&!r.previousSibling&&(t.execute("blockQuote"),t.editing.view.scrollToTheSelection(),n.preventDefault(),e.stop())},{context:"blockquote"})}}class Up extends nc{static get pluginName(){return"BlockQuoteUI"}static get isOfficialPlugin(){return!0}init(){const t=this.editor;t.ui.componentFactory.add("blockQuote",()=>{const t=this._createButton(Lu);return t.set({tooltip:!0}),t}),t.ui.componentFactory.add("menuBar:blockQuote",()=>{const t=this._createButton(Gu);return t.set({role:"menuitemcheckbox"}),t})}_createButton(t){const e=this.editor,n=e.locale,i=e.commands.get("blockQuote"),o=new t(e.locale),r=n.t;return o.set({label:r("Block quote"),icon:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M3 10.423a6.5 6.5 0 0 1 6.056-6.408l.038.67C6.448 5.423 5.354 7.663 5.22 10H9c.552 0 .5.432.5.986v4.511c0 .554-.448.503-1 .503h-5c-.552 0-.5-.449-.5-1.003zm8 0a6.5 6.5 0 0 1 6.056-6.408l.038.67c-2.646.739-3.74 2.979-3.873 5.315H17c.552 0 .5.432.5.986v4.511c0 .554-.448.503-1 .503h-5c-.552 0-.5-.449-.5-1.003z"/></svg>',isToggleable:!0}),o.bind("isEnabled").to(i,"isEnabled"),o.bind("isOn").to(i,"value"),this.listenTo(o,"execute",()=>{e.execute("blockQuote"),e.editing.view.focus()}),o}}class $p extends nc{static get requires(){return[Hp,Up]}static get pluginName(){return"BlockQuote"}static get isOfficialPlugin(){return!0}}class Wp extends(Ut()){_stack=[];add(t,e){const n=this._stack,i=n[0];this._insertDescriptor(t);const o=n[0];i===o||qp(i,o)||this.fire("change:top",{oldDescriptor:i,newDescriptor:o,writer:e})}remove(t,e){const n=this._stack,i=n[0];this._removeDescriptor(t);const o=n[0];i===o||qp(i,o)||this.fire("change:top",{oldDescriptor:i,newDescriptor:o,writer:e})}_insertDescriptor(t){const e=this._stack,n=e.findIndex(e=>e.id===t.id);if(qp(t,e[n]))return;n>-1&&e.splice(n,1);let i=0;for(;e[i]&&Kp(e[i],t);)i++;e.splice(i,0,t)}_removeDescriptor(t){const e=this._stack,n=e.findIndex(e=>e.id===t);n>-1&&e.splice(n,1)}}function qp(t,e){return t&&e&&t.priority==e.priority&&Gp(t.classes)==Gp(e.classes)}function Kp(t,e){return t.priority>e.priority||!(t.priority<e.priority)&&Gp(t.classes)>Gp(e.classes)}function Gp(t){return Array.isArray(t)?t.sort().join(","):t}const Qp="ck-widget_selected";function Yp(t){return!!t.is("element")&&!!t.getCustomProperty("widget")}function Jp(t,e,n={}){if(!t.is("containerElement"))throw new Vt("widget-to-widget-wrong-element-type",null,{element:t});return e.setAttribute("contenteditable","false",t),e.addClass("ck-widget",t),e.setCustomProperty("widget",!0,t),t.getFillerOffset=of,e.setCustomProperty("widgetLabel",[],t),n.label&&function(t,e){t.getCustomProperty("widgetLabel").push(e)}(t,n.label),n.hasSelectionHandle&&function(t,e){const n=e.createUIElement("div",{class:"ck ck-widget__selection-handle"},function(t){const e=this.toDomElement(t),n=new Mu;return n.set("content",'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M4 0v1H1v3H0V.5A.5.5 0 0 1 .5 0zm8 0h3.5a.5.5 0 0 1 .5.5V4h-1V1h-3zM4 16H.5a.5.5 0 0 1-.5-.5V12h1v3h3zm8 0v-1h3v-3h1v3.5a.5.5 0 0 1-.5.5z"/><path fill-opacity=".256" d="M1 1h14v14H1z"/><g class="ck-icon__selected-indicator"><path d="M7 0h2v1H7zM0 7h1v2H0zm15 0h1v2h-1zm-8 8h2v1H7z"/><path fill-opacity=".254" d="M1 1h14v14H1z"/></g></svg>'),n.render(),e.appendChild(n.element),e});e.insert(e.createPositionAt(t,0),n),e.addClass(["ck-widget_with-selection-handle"],t)}(t,e),tf(t,e),t}function Zp(t,e,n){if(e.classes&&n.addClass(fn(e.classes),t),e.attributes)for(const i in e.attributes)n.setAttribute(i,e.attributes[i],t)}function Xp(t,e,n){if(e.classes&&n.removeClass(fn(e.classes),t),e.attributes)for(const i in e.attributes)n.removeAttribute(i,t)}function tf(t,e,n=Zp,i=Xp){const o=new Wp;o.on("change:top",(e,o)=>{o.oldDescriptor&&i(t,o.oldDescriptor,o.writer),o.newDescriptor&&n(t,o.newDescriptor,o.writer)}),e.setCustomProperty("addHighlight",(t,e,n)=>o.add(e,n),t),e.setCustomProperty("removeHighlight",(t,e,n)=>o.remove(e,n),t)}function ef(t,e,n={}){return e.addClass(["ck-editor__editable","ck-editor__nested-editable"],t),!1!==n.withAriaRole&&e.setAttribute("role","textbox",t),e.setAttribute("tabindex","-1",t),n.label&&e.setAttribute("aria-label",n.label,t),e.setAttribute("contenteditable",t.isReadOnly?"false":"true",t),t.on("change:isReadOnly",(n,i,o)=>{e.setAttribute("contenteditable",o?"false":"true",t)}),t.on("change:isFocused",(n,i,o)=>{o?e.addClass("ck-editor__nested-editable_focused",t):e.removeClass("ck-editor__nested-editable_focused",t)}),tf(t,e),t}function nf(t,e){const n=t.getSelectedElement();if(n){const i=lf(t);if(i)return e.createRange(e.createPositionAt(n,i))}return e.schema.findOptimalInsertionRange(t)}function of(){return null}function rf(t){const e=t=>{const{width:e,paddingLeft:n,paddingRight:i}=t.ownerDocument.defaultView.getComputedStyle(t);return parseFloat(e)-(parseFloat(n)||0)-(parseFloat(i)||0)},n=t.parentElement;if(!n)return 0;let i=e(n),o=0,r=n;for(;isNaN(i);){if(r=r.parentElement,++o>5)return 0;i=e(r)}return i}const sf="widget-type-around";function af(t,e,n){return!!t&&Yp(t)&&!n.isInline(e)}function lf(t){return t.getAttribute(sf)}const cf=["before","after"],df=(new DOMParser).parseFromString('<svg viewBox="0 0 10 8" xmlns="http://www.w3.org/2000/svg"><path d="M9.055.263v3.972h-6.77M1 4.216l2-2.038m-2 2 2 2.038"/></svg>',"image/svg+xml").firstChild,uf="ck-widget__type-around_disabled";class hf extends nc{_currentFakeCaretModelElement=null;static get pluginName(){return"WidgetTypeAround"}static get isOfficialPlugin(){return!0}static get requires(){return[Lp,Im]}init(){const t=this.editor,e=t.editing.view;this.on("change:isEnabled",(n,i,o)=>{e.change(t=>{for(const n of e.document.roots)o?t.removeClass(uf,n):t.addClass(uf,n)}),o||t.model.change(t=>{t.removeSelectionAttribute(sf)})}),this._enableTypeAroundUIInjection(),this._enableInsertingParagraphsOnButtonClick(),this._enableInsertingParagraphsOnEnterKeypress(),this._enableInsertingParagraphsOnTypingKeystroke(),this._enableTypeAroundFakeCaretActivationUsingKeyboardArrows(),this._enableDeleteIntegration(),this._enableInsertContentIntegration(),this._enableInsertObjectIntegration(),this._enableDeleteContentIntegration()}destroy(){super.destroy(),this._currentFakeCaretModelElement=null}_insertParagraph(t,e){const n=this.editor,i=n.editing.view,o=n.model.schema.getAttributesWithProperty(t,"copyOnReplace",!0);n.execute("insertParagraph",{position:n.model.createPositionAt(t,e),attributes:o}),i.focus(),i.scrollToTheSelection()}_listenToIfEnabled(t,e,n,i){this.listenTo(t,e,(...t)=>{this.isEnabled&&n(...t)},i)}_insertParagraphAccordingToFakeCaretPosition(){const t=this.editor.model.document.selection,e=lf(t);if(!e)return!1;const n=t.getSelectedElement();return this._insertParagraph(n,e),!0}_enableTypeAroundUIInjection(){const t=this.editor,e=t.model.schema,n=t.locale.t,i={before:n("Insert paragraph before block"),after:n("Insert paragraph after block")};t.editing.downcastDispatcher.on("insert",(t,o,r)=>{const s=r.mapper.toViewElement(o.item);s&&af(s,o.item,e)&&(!function(t,e,n){const i=t.createUIElement("div",{class:"ck ck-reset_all ck-widget__type-around"},function(t){const n=this.toDomElement(t);return function(t,e){for(const n of cf){const i=new Yd({tag:"div",attributes:{class:["ck","ck-widget__type-around__button",`ck-widget__type-around__button_${n}`],title:e[n],"aria-hidden":"true"},children:[t.ownerDocument.importNode(df,!0)]});t.appendChild(i.render())}}(n,e),function(t){const e=new Yd({tag:"div",attributes:{class:["ck","ck-widget__type-around__fake-caret"]}});t.appendChild(e.render())}(n),n});t.insert(t.createPositionAt(n,"end"),i)}(r.writer,i,s),s.getCustomProperty("widgetLabel").push(()=>this.isEnabled?n("Press Enter to type after or press Shift + Enter to type before the widget"):""))},{priority:"low"})}_enableTypeAroundFakeCaretActivationUsingKeyboardArrows(){const t=this.editor,e=t.model,n=e.document.selection,i=e.schema,o=t.editing.view;function r(t){return`ck-widget_type-around_show-fake-caret_${t}`}this._listenToIfEnabled(o.document,"arrowKey",(t,e)=>{this._handleArrowKeyPress(t,e)},{context:[Yp,"$text"],priority:"high"}),this._listenToIfEnabled(n,"change:range",(e,n)=>{n.directChange&&t.model.change(t=>{t.removeSelectionAttribute(sf)})}),this._listenToIfEnabled(e.document,"change:data",()=>{const e=n.getSelectedElement();e&&af(t.editing.mapper.toViewElement(e),e,i)||t.model.change(t=>{t.removeSelectionAttribute(sf)})}),this._listenToIfEnabled(t.editing.downcastDispatcher,"selection",(t,e,n)=>{const o=n.writer;if(this._currentFakeCaretModelElement){const t=n.mapper.toViewElement(this._currentFakeCaretModelElement);t&&(o.removeClass(cf.map(r),t),this._currentFakeCaretModelElement=null)}const s=e.selection.getSelectedElement();if(!s)return;const a=n.mapper.toViewElement(s);if(!af(a,s,i))return;const l=lf(e.selection);l&&(o.addClass(r(l),a),this._currentFakeCaretModelElement=s)}),this._listenToIfEnabled(t.ui.focusTracker,"change:isFocused",(e,n,i)=>{i||t.model.change(t=>{t.removeSelectionAttribute(sf)})})}_handleArrowKeyPress(t,e){const n=this.editor,i=n.model,o=i.document.selection,r=i.schema,s=n.editing.view,a=function(t,e){const n=hn(t,e);return"down"===n||"right"===n}(e.keyCode,n.locale.contentLanguageDirection),l=s.document.selection.getSelectedElement();let c;af(l,n.editing.mapper.toModelElement(l),r)?c=this._handleArrowKeyPressOnSelectedWidget(a):o.isCollapsed?c=this._handleArrowKeyPressWhenSelectionNextToAWidget(a):e.shiftKey||(c=this._handleArrowKeyPressWhenNonCollapsedSelection(a)),c&&(e.preventDefault(),t.stop())}_handleArrowKeyPressOnSelectedWidget(t){const e=this.editor.model,n=lf(e.document.selection);return e.change(e=>n?n!==(t?"after":"before")&&(e.removeSelectionAttribute(sf),!0):(e.setSelectionAttribute(sf,t?"after":"before"),!0))}_handleArrowKeyPressWhenSelectionNextToAWidget(t){const e=this.editor,n=e.model,i=n.schema,o=e.plugins.get("Widget"),r=o._getObjectElementNextToSelection(t);return!!af(e.editing.mapper.toViewElement(r),r,i)&&(n.change(e=>{o._setSelectionOverElement(r),e.setSelectionAttribute(sf,t?"before":"after")}),!0)}_handleArrowKeyPressWhenNonCollapsedSelection(t){const e=this.editor,n=e.model,i=n.schema,o=e.editing.mapper,r=n.document.selection,s=t?r.getLastPosition().nodeBefore:r.getFirstPosition().nodeAfter;return!!af(o.toViewElement(s),s,i)&&(n.change(e=>{e.setSelection(s,"on"),e.setSelectionAttribute(sf,t?"after":"before")}),!0)}_enableInsertingParagraphsOnButtonClick(){const t=this.editor,e=t.editing.view;this._listenToIfEnabled(e.document,"mousedown",(n,i)=>{const o=i.domTarget.closest(".ck-widget__type-around__button");if(!o)return;const r=o.classList.contains("ck-widget__type-around__button_before")?"before":"after",s=function(t,e){const n=t.closest(".ck-widget");return e.mapDomToView(n)}(o,e.domConverter),a=t.editing.mapper.toModelElement(s);this._insertParagraph(a,r),i.preventDefault(),n.stop()})}_enableInsertingParagraphsOnEnterKeypress(){const t=this.editor,e=t.model.document.selection,n=t.editing.view;this._listenToIfEnabled(n.document,"enter",(n,i)=>{if("atTarget"!=n.eventPhase)return;const o=e.getSelectedElement(),r=t.editing.mapper.toViewElement(o),s=t.model.schema;let a;this._insertParagraphAccordingToFakeCaretPosition()?a=!0:af(r,o,s)&&(this._insertParagraph(o,i.isSoft?"before":"after"),a=!0),a&&(i.preventDefault(),n.stop())},{context:Yp})}_enableInsertingParagraphsOnTypingKeystroke(){const t=this.editor.editing.view.document;this._listenToIfEnabled(t,"insertText",(e,n)=>{this._insertParagraphAccordingToFakeCaretPosition()&&(n.selection=t.selection)},{priority:"high"}),ft.isAndroid?this._listenToIfEnabled(t,"keydown",(t,e)=>{229==e.keyCode&&this._insertParagraphAccordingToFakeCaretPosition()}):this._listenToIfEnabled(t,"compositionstart",()=>{this._insertParagraphAccordingToFakeCaretPosition()},{priority:"highest"})}_enableDeleteIntegration(){const t=this.editor,e=t.editing.view,n=t.model,i=n.schema;this._listenToIfEnabled(e.document,"delete",(e,o)=>{if("atTarget"!=e.eventPhase)return;const r=lf(n.document.selection);if(!r)return;const s=o.direction,a=n.document.selection.getSelectedElement(),l="forward"==s;if("before"===r===l)t.execute("delete",{selection:n.createSelection(a,"on")});else{const e=i.getNearestSelectionRange(n.createPositionAt(a,r),s);if(e)if(e.isCollapsed){const o=n.createSelection(e.start);if(n.modifySelection(o,{direction:s}),o.focus.isEqual(e.start)){const t=function(t,e){let n=e;for(const i of e.getAncestors({parentFirst:!0})){if(i.childCount>1||t.isLimit(i))break;n=i}return n}(i,e.start.parent);n.deleteContent(n.createSelection(t,"on"),{doNotAutoparagraph:!0})}else n.change(n=>{n.setSelection(e),t.execute(l?"deleteForward":"delete")})}else n.change(n=>{n.setSelection(e),t.execute(l?"deleteForward":"delete")})}o.preventDefault(),e.stop()},{context:Yp})}_enableInsertContentIntegration(){const t=this.editor,e=this.editor.model,n=e.document.selection;this._listenToIfEnabled(t.model,"insertContent",(t,[i,o])=>{if(o&&!o.is("documentSelection"))return;const r=lf(n);return r?(t.stop(),e.change(t=>{const o=n.getSelectedElement(),s=e.createPositionAt(o,r),a=t.createSelection(s),l=e.insertContent(i,a);return t.setSelection(a),l})):void 0},{priority:"high"})}_enableInsertObjectIntegration(){const t=this.editor,e=this.editor.model.document.selection;this._listenToIfEnabled(t.model,"insertObject",(t,n)=>{const[,i,o={}]=n;if(i&&!i.is("documentSelection"))return;const r=lf(e);r&&(o.findOptimalPosition=r,n[3]=o)},{priority:"high"})}_enableDeleteContentIntegration(){const t=this.editor,e=this.editor.model.document.selection;this._listenToIfEnabled(t.model,"deleteContent",(t,[n])=>{n&&!n.is("documentSelection")||lf(e)&&t.stop()},{priority:"high"})}}function gf(t,e,n){const i=t.schema,o=t.createRangeIn(e.root),r="forward"==n?"elementStart":"elementEnd";for(const{previousPosition:t,item:s,type:a}of o.getWalker({startPosition:e,direction:n})){if(i.isLimit(s)&&!i.isInline(s))return t;if(a==r&&i.isBlock(s))return null}return null}function mf(t,e,n){const i="backward"==n?e.end:e.start;if(t.checkChild(i,"$text"))return i;for(const{nextPosition:i}of e.getWalker({direction:n}))if(t.checkChild(i,"$text"))return i;return null}class pf extends nc{_previouslySelected=new Set;static get pluginName(){return"Widget"}static get isOfficialPlugin(){return!0}static get requires(){return[hf,Im]}init(){const t=this.editor,e=t.editing.view,n=e.document,i=t.t;this.editor.editing.downcastDispatcher.on("selection",(e,n,i)=>{const o=i.writer,r=n.selection;if(r.isCollapsed)return;const s=r.getSelectedElement();if(!s)return;const a=t.editing.mapper.toViewElement(s);var l;Yp(a)&&i.consumable.consume(r,"selection")&&o.setSelection(o.createRangeOn(a),{fake:!0,label:(l=a,l.getCustomProperty("widgetLabel").reduce((t,e)=>"function"==typeof e?t?t+". "+e():e():t?t+". "+e:e,""))})}),this.editor.editing.downcastDispatcher.on("selection",(t,e,n)=>{this._clearPreviouslySelectedWidgets(n.writer);const i=n.writer,o=i.document.selection;let r=null;for(const t of o.getRanges())for(const e of t){const t=e.item;Yp(t)&&!ff(t,r)&&(i.addClass(Qp,t),this._previouslySelected.add(t),r=t)}},{priority:"low"}),e.addObserver(nl),this.listenTo(n,"mousedown",(...t)=>this._onMousedown(...t)),this.listenTo(n,"arrowKey",(...t)=>{this._handleSelectionChangeOnArrowKeyPress(...t)},{context:[Yp,"$text"]}),this.listenTo(n,"arrowKey",(...t)=>{this._preventDefaultOnArrowKeyPress(...t)},{context:"$root"}),this.listenTo(n,"arrowKey",function(t){const e=t.model;return(n,i)=>{const o=i.keyCode==an.arrowup,r=i.keyCode==an.arrowdown,s=i.shiftKey,a=e.document.selection;if(!o&&!r)return;const l=r;if(s&&function(t,e){return!t.isCollapsed&&t.isBackward==e}(a,l))return;const c=function(t,e,n){const i=t.model;if(n){const t=e.isCollapsed?e.focus:e.getLastPosition(),n=gf(i,t,"forward");if(!n)return null;const o=i.createRange(t,n),r=mf(i.schema,o,"backward");return r?i.createRange(t,r):null}{const t=e.isCollapsed?e.focus:e.getFirstPosition(),n=gf(i,t,"backward");if(!n)return null;const o=i.createRange(n,t),r=mf(i.schema,o,"forward");return r?i.createRange(r,t):null}}(t,a,l);if(c){if(c.isCollapsed){if(a.isCollapsed)return;if(s)return}(c.isCollapsed||function(t,e,n){const i=t.model,o=t.view.domConverter;if(n){const t=i.createSelection(e.start);i.modifySelection(t),t.focus.isAtEnd||e.start.isEqual(t.focus)||(e=i.createRange(t.focus,e.end))}const r=t.mapper.toViewRange(e),s=o.viewRangeToDom(r),a=Ie.getDomRangeRects(s);let l;for(const t of a)if(void 0!==l){if(Math.round(t.top)>=l)return!1;l=Math.max(l,Math.round(t.bottom))}else l=Math.round(t.bottom);return!0}(t,c,l))&&(e.change(t=>{const n=l?c.end:c.start;if(s){const i=e.createSelection(a.anchor);i.setFocus(n),t.setSelection(i)}else t.setSelection(n)}),n.stop(),i.preventDefault(),i.stopPropagation())}}}(this.editor.editing),{context:"$text"}),this.listenTo(n,"delete",(t,e)=>{this._handleDelete("forward"==e.direction)&&(e.preventDefault(),t.stop())},{context:"$root"}),this.listenTo(n,"tab",(t,e)=>{"atTarget"==t.eventPhase&&(e.shiftKey||this._selectFirstNestedEditable()&&(e.preventDefault(),t.stop()))},{context:Yp,priority:"low"}),this.listenTo(n,"tab",(t,e)=>{e.shiftKey&&this._selectAncestorWidget()&&(e.preventDefault(),t.stop())},{priority:"low"}),this.listenTo(n,"keydown",(t,e)=>{e.keystroke==an.esc&&this._selectAncestorWidget()&&(e.preventDefault(),t.stop())},{priority:"low"}),t.accessibility.addKeystrokeInfoGroup({id:"widget",label:i("Keystrokes that can be used when a widget is selected (for example: image, table, etc.)"),keystrokes:[{label:i("Move focus from an editable area back to the parent widget"),keystroke:"Esc"},{label:i("Insert a new paragraph directly after a widget"),keystroke:"Enter"},{label:i("Insert a new paragraph directly before a widget"),keystroke:"Shift+Enter"},{label:i("Move the caret to allow typing directly before a widget"),keystroke:[["arrowup"],["arrowleft"]]},{label:i("Move the caret to allow typing directly after a widget"),keystroke:[["arrowdown"],["arrowright"]]}]})}_onMousedown(t,e){const n=this.editor,i=n.editing.view,o=i.document;let r=e.target;if(!r)return;if(e.domEvent.detail>=3)return void(this._selectBlockContent(r)&&e.preventDefault());if(!Yp(r)){const t=function(t){let e=t;for(;e;){if(e.is("editableElement")||Yp(e))return e;e=e.parent}return null}(r);if(!t)return;if(Yp(t))r=t;else{const t=function(t,e){const n=xe(e.domEvent);let i=null;if(i=n?t.domConverter.domRangeToView(n):t.createRange(t.createPositionAt(e.target,0)),!i)return null;const o=i.start;if(!o.parent)return null;let r=o.parent;return o.parent.is("editableElement")&&(o.isAtEnd&&o.nodeBefore?r=o.nodeBefore:o.isAtStart&&o.nodeAfter&&(r=o.nodeAfter)),r.is("$text")?r.parent:r}(i,e);if(!t||!Yp(t))return;r=t}}ft.isAndroid&&e.preventDefault(),o.isFocused||i.focus();const s=n.editing.mapper.toModelElement(r);this._setSelectionOverElement(s)}_selectBlockContent(t){const e=this.editor,n=e.model,i=e.editing.mapper,o=n.schema,r=i.findMappedViewAncestor(this.editor.editing.view.createPositionAt(t,0)),s=function(t,e){for(const n of t.getAncestors({includeSelf:!0,parentFirst:!0})){if(e.checkChild(n,"$text"))return n;if(e.isLimit(n)&&!e.isObject(n))break}return null}(i.toModelElement(r),n.schema);return!!s&&(n.change(t=>{const e=o.isLimit(s)?null:function(t,e){const n=new cr({startPosition:t});for(const{item:t}of n){if(e.isLimit(t)||!t.is("element"))return null;if(e.checkChild(t,"$text"))return t}return null}(t.createPositionAfter(s),o),n=t.createPositionAt(s,0),i=e?t.createPositionAt(e,0):t.createPositionAt(s,"end");t.setSelection(t.createRange(n,i))}),!0)}_handleSelectionChangeOnArrowKeyPress(t,e){const n=e.keyCode,i=this.editor.model,o=i.schema,r=i.document.selection,s=r.getSelectedElement(),a=hn(n,this.editor.locale.contentLanguageDirection),l="down"==a||"right"==a,c="up"==a||"down"==a;if(s&&o.isObject(s)){const n=l?r.getLastPosition():r.getFirstPosition(),s=o.getNearestSelectionRange(n,l?"forward":"backward");return void(s&&(i.change(t=>{t.setSelection(s)}),e.preventDefault(),t.stop()))}if(!r.isCollapsed&&!e.shiftKey){const n=r.getFirstPosition(),s=r.getLastPosition(),a=n.nodeAfter,c=s.nodeBefore;return void((a&&o.isObject(a)||c&&o.isObject(c))&&(i.change(t=>{t.setSelection(l?s:n)}),e.preventDefault(),t.stop()))}if(!r.isCollapsed)return;const d=this._getObjectElementNextToSelection(l);if(d&&o.isObject(d)){if(o.isInline(d)&&c)return;this._setSelectionOverElement(d),e.preventDefault(),t.stop()}}_preventDefaultOnArrowKeyPress(t,e){const n=this.editor.model,i=n.schema,o=n.document.selection.getSelectedElement();o&&i.isObject(o)&&(e.preventDefault(),t.stop())}_handleDelete(t){const e=this.editor.model.document.selection;if(!this.editor.model.canEditAt(e))return;if(!e.isCollapsed)return;const n=this._getObjectElementNextToSelection(t);return n?(this.editor.model.change(t=>{let i=e.anchor.parent;for(;i.isEmpty;){const e=i;i=e.parent,t.remove(e)}this._setSelectionOverElement(n)}),!0):void 0}_setSelectionOverElement(t){this.editor.model.change(e=>{e.setSelection(e.createRangeOn(t))})}_getObjectElementNextToSelection(t){const e=this.editor.model,n=e.schema,i=e.document.selection,o=e.createSelection(i);if(e.modifySelection(o,{direction:t?"forward":"backward"}),o.isEqual(i))return null;const r=t?o.focus.nodeBefore:o.focus.nodeAfter;return r&&n.isObject(r)?r:null}_clearPreviouslySelectedWidgets(t){for(const e of this._previouslySelected)t.removeClass(Qp,e);this._previouslySelected.clear()}_selectFirstNestedEditable(){const t=this.editor,e=this.editor.editing.view.document;for(const n of e.selection.getFirstRange().getItems())if(n.is("editableElement")){const e=t.editing.mapper.toModelElement(n);if(!e)continue;const i=t.model.createPositionAt(e,0),o=t.model.schema.getNearestSelectionRange(i,"forward");return t.model.change(t=>{t.setSelection(o)}),!0}return!1}_selectAncestorWidget(){const t=this.editor,e=t.editing.mapper,n=t.editing.view.document.selection.getFirstPosition().parent,i=(n.is("$text")?n.parent:n).findAncestor(Yp);if(!i)return!1;const o=e.toModelElement(i);return!!o&&(t.model.change(t=>{t.setSelection(o,"on")}),!0)}}function ff(t,e){return!!e&&Array.from(t.getAncestors()).includes(e)}class bf extends nc{_toolbarDefinitions=new Map;_balloon;static get requires(){return[Hg]}static get pluginName(){return"WidgetToolbarRepository"}static get isOfficialPlugin(){return!0}init(){const t=this.editor;if(t.plugins.has("BalloonToolbar")){const e=t.plugins.get("BalloonToolbar");this.listenTo(e,"show",e=>{(function(t){const e=t.getSelectedElement();return!(!e||!Yp(e))})(t.editing.view.document.selection)&&e.stop()},{priority:"high"})}this._balloon=this.editor.plugins.get("ContextualBalloon"),this.on("change:isEnabled",()=>{this._updateToolbarsVisibility()}),this.listenTo(t.ui,"update",()=>{this._updateToolbarsVisibility()}),this.listenTo(t.ui.focusTracker,"change:isFocused",()=>{this._updateToolbarsVisibility()},{priority:"low"})}destroy(){super.destroy();for(const t of this._toolbarDefinitions.values())t.view.destroy()}register(t,{ariaLabel:e,items:n,getRelatedElement:i,balloonClassName:o="ck-toolbar-container",positions:r}){if(!n.length)return void zt("widget-toolbar-no-items",{toolbarId:t});const s=this.editor,a=s.t,l=new Vh(s.locale);if(l.ariaLabel=e||a("Widget toolbar"),this._toolbarDefinitions.has(t))throw new Vt("widget-toolbar-duplicated",this,{toolbarId:t});const c={view:l,getRelatedElement:i,balloonClassName:o,itemsConfig:n,positions:r,initialized:!1};s.ui.addToolbar(l,{isContextual:!0,beforeFocus:()=>{const t=i(s.editing.view.document.selection);t&&this._showToolbar(c,t)},afterBlur:()=>{this._hideToolbar(c)}}),this._toolbarDefinitions.set(t,c)}_updateToolbarsVisibility(){let t=0,e=null,n=null;for(const i of this._toolbarDefinitions.values()){const o=i.getRelatedElement(this.editor.editing.view.document.selection);if(this.isEnabled&&o)if(this.editor.ui.focusTracker.isFocused){const r=o.getAncestors().length;r>t&&(t=r,e=o,n=i)}else this._isToolbarVisible(i)&&this._hideToolbar(i);else this._isToolbarInBalloon(i)&&this._hideToolbar(i)}n&&this._showToolbar(n,e)}_hideToolbar(t){this._balloon.remove(t.view),this.stopListening(this._balloon,"change:visibleView")}_showToolbar(t,e){this._isToolbarVisible(t)?kf(this.editor,e,t.positions):this._isToolbarInBalloon(t)||(t.initialized||(t.initialized=!0,t.view.fillFromConfig(t.itemsConfig,this.editor.ui.componentFactory)),this._balloon.add({view:t.view,position:wf(this.editor,e,t.positions),balloonClassName:t.balloonClassName}),this.listenTo(this._balloon,"change:visibleView",()=>{for(const e of this._toolbarDefinitions.values())if(this._isToolbarVisible(e)){const n=e.getRelatedElement(this.editor.editing.view.document.selection);kf(this.editor,n,t.positions)}}))}_isToolbarVisible(t){return this._balloon.visibleView===t.view}_isToolbarInBalloon(t){return this._balloon.hasView(t.view)}}function kf(t,e,n){const i=t.plugins.get("ContextualBalloon"),o=wf(t,e,n);i.updatePosition(o)}function wf(t,e,n){const i=t.editing.view,o=Xu.defaultPositions;return{target:i.domConverter.mapViewToDom(e),positions:n||[o.northArrowSouth,o.northArrowSouthWest,o.northArrowSouthEast,o.southArrowNorth,o.southArrowNorthWest,o.southArrowNorthEast,o.viewportStickyNorth]}}class _f extends(ie()){_referenceCoordinates;_options;_originalWidth;_originalHeight;_originalWidthPercents;_aspectRatio;constructor(t){super(),this.set("activeHandlePosition",null),this.set("proposedWidthPercents",null),this.set("proposedWidth",null),this.set("proposedHeight",null),this.set("proposedHandleHostWidth",null),this.set("proposedHandleHostHeight",null),this._options=t,this._referenceCoordinates=null}get originalWidth(){return this._originalWidth}get originalHeight(){return this._originalHeight}get originalWidthPercents(){return this._originalWidthPercents}get aspectRatio(){return this._aspectRatio}begin(t,e,n){const i=new Ie(e);this.activeHandlePosition=function(t){const e=["top-left","top-right","bottom-right","bottom-left"];for(const n of e)if(t.classList.contains(vf(n)))return n}(t),this._referenceCoordinates=function(t,e){const n=new Ie(t),i=e.split("-"),o={x:"right"==i[1]?n.right:n.left,y:"bottom"==i[0]?n.bottom:n.top};return o.x+=t.ownerDocument.defaultView.scrollX,o.y+=t.ownerDocument.defaultView.scrollY,o}(e,function(t){const e=t.split("-"),n={top:"bottom",bottom:"top",left:"right",right:"left"};return`${n[e[0]]}-${n[e[1]]}`}(this.activeHandlePosition)),this._originalWidth=i.width,this._originalHeight=i.height,this._aspectRatio=i.width/i.height;const o=n.style.width;o&&o.match(/^\d+(\.\d*)?%$/)?this._originalWidthPercents=parseFloat(o):this._originalWidthPercents=function(t,e=new Ie(t)){const n=rf(t);return n?e.width/n*100:0}(n,i)}update(t){this.proposedWidth=t.width,this.proposedHeight=t.height,this.proposedWidthPercents=t.widthPercents,this.proposedHandleHostWidth=t.handleHostWidth,this.proposedHandleHostHeight=t.handleHostHeight}}function vf(t){return`ck-widget__resizer__handle-${t}`}class yf extends ku{constructor(){super();const t=this.bindTemplate;this.setTemplate({tag:"div",attributes:{class:["ck","ck-size-view",t.to("_viewPosition",t=>t?`ck-orientation-${t}`:"")],style:{display:t.if("_isVisible","none",t=>!t)}},children:[{text:t.to("_label")}]})}_bindToState(t,e){this.bind("_isVisible").to(e,"proposedWidth",e,"proposedHeight",(t,e)=>null!==t&&null!==e),this.bind("_label").to(e,"proposedHandleHostWidth",e,"proposedHandleHostHeight",e,"proposedWidthPercents",(e,n,i)=>"px"===t.unit?`${e}×${n}`:`${i}%`),this.bind("_viewPosition").to(e,"activeHandlePosition",e,"proposedHandleHostWidth",e,"proposedHandleHostHeight",(t,e,n)=>e<50||n<50?"above-center":t)}_dismiss(){this.unbind(),this._isVisible=!1}}class Cf extends(ie()){_state;_sizeView;_options;_viewResizerWrapper=null;_initialViewWidth;constructor(t){super(),this._options=t,this.set("isEnabled",!0),this.set("isSelected",!1),this.bind("isVisible").to(this,"isEnabled",this,"isSelected",(t,e)=>t&&e),this.decorate("begin"),this.decorate("cancel"),this.decorate("commit"),this.decorate("updateSize"),this.on("commit",t=>{this.state.proposedWidth||this.state.proposedWidthPercents||(this._cleanup(),t.stop())},{priority:"high"})}get state(){return this._state}show(){this._options.editor.editing.view.change(t=>{t.removeClass("ck-hidden",this._viewResizerWrapper)})}hide(){this._options.editor.editing.view.change(t=>{t.addClass("ck-hidden",this._viewResizerWrapper)})}attach(){const t=this,e=this._options.viewElement;this._options.editor.editing.view.change(n=>{const i=n.createUIElement("div",{class:"ck ck-reset_all ck-widget__resizer"},function(e){const n=this.toDomElement(e);return t._appendHandles(n),t._appendSizeUI(n),n});n.insert(n.createPositionAt(e,"end"),i),n.addClass("ck-widget_with-resizer",e),this._viewResizerWrapper=i,this.isVisible||this.hide()}),this.on("change:isVisible",()=>{this.isVisible?(this.show(),this.redraw()):this.hide()})}begin(t){this._state=new _f(this._options),this._sizeView._bindToState(this._options,this.state),this._initialViewWidth=this._options.viewElement.getStyle("width"),this.state.begin(t,this._getHandleHost(),this._getResizeHost())}updateSize(t){const e=this._proposeNewSize(t);this._options.editor.editing.view.change(t=>{const n=this._options.unit||"%",i=("%"===n?e.widthPercents:e.width)+n;t.setStyle("width",i,this._options.viewElement)});const n=this._getHandleHost(),i=new Ie(n),o=Math.round(i.width),r=Math.round(i.height),s=new Ie(n);e.width=Math.round(s.width),e.height=Math.round(s.height),this.redraw(i),this.state.update({...e,handleHostWidth:o,handleHostHeight:r})}commit(){const t=this._options.unit||"%",e=("%"===t?this.state.proposedWidthPercents:this.state.proposedWidth)+t;this._options.editor.editing.view.change(()=>{this._cleanup(),this._options.onCommit(e)})}cancel(){this._cleanup()}destroy(){this.cancel()}redraw(t){const e=this._domResizerWrapper;if(!((n=e)&&n.ownerDocument&&n.ownerDocument.contains(n)))return;var n;const i=e.parentElement,o=this._getHandleHost(),r=this._viewResizerWrapper,s=[r.getStyle("width"),r.getStyle("height"),r.getStyle("left"),r.getStyle("top")];let a;if(i.isSameNode(o)){const e=t||new Ie(o);a=[e.width+"px",e.height+"px",void 0,void 0]}else a=[o.offsetWidth+"px",o.offsetHeight+"px",o.offsetLeft+"px",o.offsetTop+"px"];"same"!==ue(s,a)&&this._options.editor.editing.view.change(t=>{t.setStyle({width:a[0],height:a[1],left:a[2],top:a[3]},r)})}containsHandle(t){return this._domResizerWrapper.contains(t)}static isResizeHandle(t){return t.classList.contains("ck-widget__resizer__handle")}_cleanup(){this._sizeView._dismiss(),this._options.editor.editing.view.change(t=>{t.setStyle("width",this._initialViewWidth,this._options.viewElement)})}_proposeNewSize(t){const e=this.state,n=(o=t).pageX,i=o.pageY;var o;const r=!this._options.isCentered||this._options.isCentered(this),s={x:e._referenceCoordinates.x-(n+e.originalWidth),y:i-e.originalHeight-e._referenceCoordinates.y};r&&e.activeHandlePosition.endsWith("-right")&&(s.x=n-(e._referenceCoordinates.x+e.originalWidth)),r&&(s.x*=2);let a=Math.abs(e.originalWidth+s.x),l=Math.abs(e.originalHeight+s.y);return"width"==(a/e.aspectRatio>l?"width":"height")?l=a/e.aspectRatio:a=l*e.aspectRatio,{width:Math.round(a),height:Math.round(l),widthPercents:Math.min(Math.round(e.originalWidthPercents/e.originalWidth*a*100)/100,100)}}_getResizeHost(){const t=this._domResizerWrapper.parentElement;return this._options.getResizeHost(t)}_getHandleHost(){const t=this._domResizerWrapper.parentElement;return this._options.getHandleHost(t)}get _domResizerWrapper(){return this._options.editor.editing.view.domConverter.mapViewToDom(this._viewResizerWrapper)}_appendHandles(t){const e=["top-left","top-right","bottom-right","bottom-left"];for(const n of e)t.appendChild(new Yd({tag:"div",attributes:{class:`ck-widget__resizer__handle ${xf(n)}`}}).render())}_appendSizeUI(t){this._sizeView=new yf,this._sizeView.render(),t.appendChild(this._sizeView.element)}}function xf(t){return`ck-widget__resizer__handle-${t}`}class Af extends nc{_resizers=new Map;_observer;_redrawSelectedResizerThrottled;static get pluginName(){return"WidgetResize"}static get isOfficialPlugin(){return!0}init(){const t=this.editor.editing,e=gt.window.document;this.set("selectedResizer",null),this.set("_activeResizer",null),t.view.addObserver(nl),this._observer=new(_e()),this.listenTo(t.view.document,"mousedown",this._mouseDownListener.bind(this),{priority:"high"}),this._observer.listenTo(e,"mousemove",this._mouseMoveListener.bind(this)),this._observer.listenTo(e,"mouseup",this._mouseUpListener.bind(this)),this._redrawSelectedResizerThrottled=Wl(()=>this.redrawSelectedResizer(),200),this.editor.ui.on("update",this._redrawSelectedResizerThrottled),this.editor.model.document.on("change",()=>{for(const[t,e]of this._resizers)t.isAttached()||(this._resizers.delete(t),e.destroy())},{priority:"lowest"}),this._observer.listenTo(gt.window,"resize",this._redrawSelectedResizerThrottled);const n=this.editor.editing.view.document.selection;n.on("change",()=>{const t=n.getSelectedElement(),e=this.getResizerByViewElement(t)||null;e?this.select(e):this.deselect()})}redrawSelectedResizer(){this.selectedResizer&&this.selectedResizer.isVisible&&this.selectedResizer.redraw()}destroy(){super.destroy(),this._observer.stopListening();for(const t of this._resizers.values())t.destroy();this._redrawSelectedResizerThrottled.cancel()}select(t){this.deselect(),this.selectedResizer=t,this.selectedResizer.isSelected=!0}deselect(){this.selectedResizer&&(this.selectedResizer.isSelected=!1),this.selectedResizer=null}attachTo(t){const e=new Cf(t),n=this.editor.plugins;if(e.attach(),n.has("WidgetToolbarRepository")){const t=n.get("WidgetToolbarRepository");e.on("begin",()=>{t.forceDisabled("resize")},{priority:"lowest"}),e.on("cancel",()=>{t.clearForceDisabled("resize")},{priority:"highest"}),e.on("commit",()=>{t.clearForceDisabled("resize")},{priority:"highest"})}this._resizers.set(t.viewElement,e);const i=this.editor.editing.view.document.selection.getSelectedElement();return this.getResizerByViewElement(i)==e&&this.select(e),e}getResizerByViewElement(t){return this._resizers.get(t)}_getResizerByHandle(t){for(const e of this._resizers.values())if(e.containsHandle(t))return e}_mouseDownListener(t,e){const n=e.domTarget;Cf.isResizeHandle(n)&&(this._activeResizer=this._getResizerByHandle(n)||null,this._activeResizer&&(this._activeResizer.begin(n),t.stop(),e.preventDefault()))}_mouseMoveListener(t,e){this._activeResizer&&this._activeResizer.updateSize(e)}_mouseUpListener(){this._activeResizer&&(this._activeResizer.commit(),this._activeResizer=null)}}function Ef(t){return t}function Sf(t,e,n,i){if(e===t)return!0;switch(typeof e){case"object":return function(t,e,n,i){if(null==e)return!0;if(Array.isArray(e))return Tf(t,e,n,i);if(e instanceof Map)return function(t,e,n,i){if(0===e.size)return!0;if(!(t instanceof Map))return!1;for(const[o,r]of e.entries())if(!1===n(t.get(o),r,o,t,e,i))return!1;return!0}(t,e,n,i);if(e instanceof Set)return function(t,e,n,i){return 0===e.size||t instanceof Set&&Tf([...t],[...e],n,i)}(t,e,n,i);const o=Object.keys(e);if(null==t)return 0===o.length;if(0===o.length)return!0;if(i&&i.has(e))return i.get(e)===t;i&&i.set(e,t);try{for(let r=0;r<o.length;r++){const s=o[r];if(!J(t)&&!(s in t))return!1;if(void 0===e[s]&&void 0!==t[s])return!1;if(null===e[s]&&null!==t[s])return!1;if(!n(t[s],e[s],s,t,e,i))return!1}return!0}finally{i&&i.delete(e)}}(t,e,n,i);case"function":return Object.keys(e).length>0?Sf(t,{...e},n,i):Bn(t,e);default:return x(t)?"string"!=typeof e||""===e:Bn(t,e)}}function Tf(t,e,n,i){if(0===e.length)return!0;if(!Array.isArray(t))return!1;const o=new Set;for(let r=0;r<e.length;r++){const s=e[r];let a=!1;for(let l=0;l<t.length;l++){if(o.has(l))continue;let c=!1;if(n(t[l],s,r,t,e,i)&&(c=!0),c){o.add(l),a=!0;break}}if(!a)return!1}return!0}function If(t,e){return function(t,e){return Sf(t,e,function t(e,n,i,o,r,s){return Sf(e,n,t,s)},new Map)}(t,e)}function Pf(t){if(null==t)return Ef;switch(typeof t){case"function":return t;case"object":return Array.isArray(t)&&2===t.length?function(t,e){switch(typeof t){case"object":Object.is(t?.valueOf(),-0)&&(t="-0");break;case"number":t=On(t)}return e=rt(e),function(n){const i=Dn(n,t);return void 0===i?function(t,e){let n;if(n=Array.isArray(e)?e:"string"==typeof e&&zn(e)&&null==t?.[e]?Rn(e):[e],0===n.length)return!1;let i=t;for(let t=0;t<n.length;t++){const e=n[t];if(!(null!=i&&Object.hasOwn(i,e)||(Array.isArray(i)||at(i))&&Hn(e)&&e<i.length))return!1;i=i[e]}return!0}(n,t):void 0===e?void 0===i:If(i,e)}}(t[0],t[1]):(e=X(n=e=t,void 0,n,new Map,void 0),t=>If(t,e));case"string":case"symbol":case"number":return i=t,function(t){return Dn(t,i)}}var e,n,i}Error;class Mf extends Ko{domEventType=["paste","copy","cut","drop","dragover","dragstart","dragend","dragenter","dragleave"];constructor(t){super(t);const e=this.document;function n(t){return(n,i)=>{i.preventDefault();const o=i.dropRange?[i.dropRange]:null,r=new It(e,t);e.fire(r,{dataTransfer:i.dataTransfer,method:n.name,targetRanges:o,target:i.target,domEvent:i.domEvent}),r.stop.called&&i.stopPropagation()}}this.listenTo(e,"paste",n("clipboardInput"),{priority:"low"}),this.listenTo(e,"drop",n("clipboardInput"),{priority:"low"}),this.listenTo(e,"dragover",n("dragging"),{priority:"low"})}onDomEvent(t){const e="clipboardData"in t?t.clipboardData:t.dataTransfer,n="drop"==t.type||"paste"==t.type,i={dataTransfer:new er(e,{cacheFiles:n})};if("drop"==t.type||"dragover"==t.type){const e=xe(t);i.dropRange=e&&this.view.domConverter.domRangeToView(e)}this.fire(t.type,t,i)}}const Nf=["figcaption","li"],Lf=["ol","ul"];function Vf(t,e){if(e.is("$text")||e.is("$textProxy"))return e.data;if(e.is("element","img")&&e.hasAttribute("alt"))return e.getAttribute("alt");if(e.is("element","br"))return"\n";let n="",i=null;for(const o of e.getChildren())n+=Of(o,i)+Vf(t,o),i=o;if(e.is("rawElement")){const i=document.createElement("div");e.render(i,t),n+=zf(i)}return n}function zf(t){let e="";if(t.nodeType===Node.TEXT_NODE)return t.textContent;if("BR"===t.tagName)return"\n";for(const n of t.childNodes)e+=zf(n);return e}function Of(t,e){return e?t.is("element","li")&&!t.isEmpty&&t.getChild(0).is("containerElement")||Lf.includes(t.name)&&Lf.includes(e.name)?"\n\n":t.is("containerElement")||e.is("containerElement")?Nf.includes(t.name)||Nf.includes(e.name)?"\n":t.is("element")&&t.getCustomProperty("dataPipeline:transparentRendering")||e.is("element")&&e.getCustomProperty("dataPipeline:transparentRendering")?"":"\n\n":"":""}class Rf extends nc{_markersToCopy=new Map;static get pluginName(){return"ClipboardMarkersUtils"}static get isOfficialPlugin(){return!0}_registerMarkerToCopy(t,e){this._markersToCopy.set(t,e)}_copySelectedFragmentWithMarkers(t,e,n=t=>t.model.getSelectedContent(t.model.document.selection)){return this.editor.model.change(i=>{const o=i.model.document.selection;i.setSelection(e);const r=this._insertFakeMarkersIntoSelection(i,i.model.document.selection,t),s=n(i),a=this._removeFakeMarkersInsideElement(i,s);for(const[t,e]of Object.entries(r)){a[t]||=i.createRangeIn(s);for(const t of e)i.remove(t)}s.markers.clear();for(const[t,e]of Object.entries(a))s.markers.set(t,e);return i.setSelection(o),s})}_pasteMarkersIntoTransformedElement(t,e){const n=this._getPasteMarkersFromRangeMap(t);return this.editor.model.change(t=>{const i=this._insertFakeMarkersElements(t,n),o=e(t),r=this._removeFakeMarkersInsideElement(t,o);for(const e of Object.values(i).flat())t.remove(e);for(const[e,n]of Object.entries(r))t.model.markers.has(e)||t.addMarker(e,{usingOperation:!0,affectsData:!0,range:n});return o})}_pasteFragmentWithMarkers(t){const e=this._getPasteMarkersFromRangeMap(t.markers);t.markers.clear();for(const n of e)t.markers.set(n.name,n.range);return this.editor.model.insertContent(t)}_forceMarkersCopy(t,e,n={allowedActions:"all",copyPartiallySelected:!0,duplicateOnPaste:!0}){const i=this._markersToCopy.get(t);this._markersToCopy.set(t,n),e(),i?this._markersToCopy.set(t,i):this._markersToCopy.delete(t)}_isMarkerCopyable(t,e){const n=this._getMarkerClipboardConfig(t);if(!n)return!1;if(!e)return!0;const{allowedActions:i}=n;return"all"===i||i.includes(e)}_hasMarkerConfiguration(t){return!!this._getMarkerClipboardConfig(t)}_getMarkerClipboardConfig(t){const[e]=t.split(":");return this._markersToCopy.get(e)||null}_insertFakeMarkersIntoSelection(t,e,n){const i=this._getCopyableMarkersFromSelection(t,e,n);return this._insertFakeMarkersElements(t,i)}_getCopyableMarkersFromSelection(t,e,n){const i=Array.from(e.getRanges()),o=new Set(i.flatMap(e=>Array.from(t.model.markers.getMarkersIntersectingRange(e))));return Array.from(o).filter(t=>{if(!this._isMarkerCopyable(t.name,n))return!1;const{copyPartiallySelected:e}=this._getMarkerClipboardConfig(t.name);if(!e){const e=t.getRange();return i.some(t=>t.containsRange(e,!0))}return!0}).map(t=>({name:"dragstart"===n?this._getUniqueMarkerName(t.name):t.name,range:t.getRange()}))}_getPasteMarkersFromRangeMap(t,e=null){const{model:n}=this.editor;return(t instanceof Map?Array.from(t.entries()):Object.entries(t)).flatMap(([t,i])=>{if(!this._hasMarkerConfiguration(t))return[{name:t,range:i}];if(this._isMarkerCopyable(t,e)){const e=this._getMarkerClipboardConfig(t),o=n.markers.has(t)&&"$graveyard"===n.markers.get(t).getRange().root.rootName;return(e.duplicateOnPaste||o)&&(t=this._getUniqueMarkerName(t)),[{name:t,range:i}]}return[]})}_insertFakeMarkersElements(t,e){const n={},i=e.flatMap(t=>{const{start:e,end:n}=t.range;return[{position:e,marker:t,type:"start"},{position:n,marker:t,type:"end"}]}).sort(({position:t},{position:e})=>t.isBefore(e)?1:-1);for(const{position:e,marker:o,type:r}of i){const i=t.createElement("$marker",{"data-name":o.name,"data-type":r});n[o.name]||(n[o.name]=[]),n[o.name].push(i),t.insert(i,e)}return n}_removeFakeMarkersInsideElement(t,e){return function(t,e=Ef){return null==t?{}:function(t,e){const n={},i=Object.keys(t);for(let o=0;o<i.length;o++){const r=i[o],s=t[r];n[r]=e(s,r,t)}return n}(t,Pf(e))}(this._getAllFakeMarkersFromElement(t,e).reduce((e,n)=>{const i=n.markerElement&&t.createPositionBefore(n.markerElement);let o=e[n.name],r=!1;return o?.start&&o?.end&&(this._getMarkerClipboardConfig(n.name).duplicateOnPaste?e[this._getUniqueMarkerName(n.name)]=e[n.name]:r=!0,o=null),r||(e[n.name]={...o,[n.type]:i}),n.markerElement&&t.remove(n.markerElement),e},{}),n=>new br(n.start||t.createPositionFromPath(e,[0]),n.end||t.createPositionAt(e,"end")))}_getAllFakeMarkersFromElement(t,e){const n=Array.from(t.createRangeIn(e)).flatMap(({item:t})=>{if(!t.is("element","$marker"))return[];const e=t.getAttribute("data-name"),n=t.getAttribute("data-type");return[{markerElement:t,name:e,type:n}]}),i=[],o=[];for(const t of n)"end"===t.type&&(n.some(e=>e.name===t.name&&"start"===e.type)||i.push({markerElement:null,name:t.name,type:"start"})),"start"===t.type&&(n.some(e=>e.name===t.name&&"end"===e.type)||o.unshift({markerElement:null,name:t.name,type:"end"}));return[...i,...n,...o]}_getUniqueMarkerName(t){const e=t.split(":"),n=Mt().substring(1,6);return 3===e.length?`${e.slice(0,2).join(":")}:${n}`:`${e.join(":")}:${n}`}}class Df extends nc{static get pluginName(){return"ClipboardPipeline"}static get isOfficialPlugin(){return!0}static get requires(){return[Rf]}init(){this.editor.editing.view.addObserver(Mf),this._setupPasteDrop(),this._setupCopyCut()}_fireOutputTransformationEvent(t,e,n){const i=this.editor.plugins.get("ClipboardMarkersUtils");this.editor.model.enqueueChange({isUndoable:"cut"===n},()=>{const o=i._copySelectedFragmentWithMarkers(n,e);this.fire("outputTransformation",{dataTransfer:t,content:o,method:n})})}_setupPasteDrop(){const t=this.editor,e=t.model,n=t.editing.view,i=n.document,o=this.editor.plugins.get("ClipboardMarkersUtils");this.listenTo(i,"clipboardInput",(e,n)=>{"paste"!=n.method||t.model.canEditAt(t.model.document.selection)||e.stop()},{priority:"highest"}),this.listenTo(i,"clipboardInput",(t,e)=>{const i=e.dataTransfer;let o;if(e.content)o=e.content;else{let t="";i.getData("text/html")?t=function(t){return t.replace(/<span(?: class="Apple-converted-space"|)>(\s+)<\/span>/g,(t,e)=>1==e.length?" ":e).replace(/<!--[\s\S]*?-->/g,"")}(i.getData("text/html")):i.getData("text/plain")&&(((r=(r=i.getData("text/plain")).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\r?\n\r?\n/g,"</p><p>").replace(/\r?\n/g,"<br>").replace(/\t/g,"&nbsp;&nbsp;&nbsp;&nbsp;").replace(/^\s/,"&nbsp;").replace(/\s$/,"&nbsp;").replace(/\s\s/g," &nbsp;")).includes("</p><p>")||r.includes("<br>"))&&(r=`<p>${r}</p>`),t=r),o=this.editor.data.htmlProcessor.toView(t)}var r;const s=new It(this,"inputTransformation"),a=i.getData("application/ckeditor5-editor-id")||null;this.fire(s,{content:o,dataTransfer:i,sourceEditorId:a,targetRanges:e.targetRanges,method:e.method}),s.stop.called&&t.stop(),n.scrollToTheSelection()},{priority:"low"}),this.listenTo(this,"inputTransformation",(t,n)=>{if(n.content.isEmpty)return;const i=this.editor.data.toModel(n.content,"$clipboardHolder");0!=i.childCount&&(t.stop(),e.change(()=>{this.fire("contentInsertion",{content:i,method:n.method,sourceEditorId:n.sourceEditorId,dataTransfer:n.dataTransfer,targetRanges:n.targetRanges})}))},{priority:"low"}),this.listenTo(this,"contentInsertion",(t,e)=>{e.resultRange=o._pasteFragmentWithMarkers(e.content)},{priority:"low"})}_setupCopyCut(){const t=this.editor,e=t.model.document,n=t.editing.view.document,i=(t,n)=>{const i=n.dataTransfer;n.preventDefault(),this._fireOutputTransformationEvent(i,e.selection,t.name)};this.listenTo(n,"copy",i,{priority:"low"}),this.listenTo(n,"cut",(e,n)=>{t.model.canEditAt(t.model.document.selection)?i(e,n):n.preventDefault()},{priority:"low"}),this.listenTo(this,"outputTransformation",(e,i)=>{const o=t.data.toView(i.content,{isClipboardPipeline:!0});n.fire("clipboardOutput",{dataTransfer:i.dataTransfer,content:o,method:i.method})},{priority:"low"}),this.listenTo(n,"clipboardOutput",(n,i)=>{i.content.isEmpty||(i.dataTransfer.setData("text/html",this.editor.data.htmlProcessor.toData(i.content)),i.dataTransfer.setData("text/plain",Vf(t.data.htmlProcessor.domConverter,i.content)),i.dataTransfer.setData("application/ckeditor5-editor-id",this.editor.id)),"cut"==i.method&&t.model.deleteContent(e.selection)},{priority:"low"})}}const Bf=Re("px");class Ff extends ku{constructor(){super();const t=this.bindTemplate;this.set({isVisible:!1,left:null,top:null,width:null}),this.setTemplate({tag:"div",attributes:{class:["ck","ck-clipboard-drop-target-line",t.if("isVisible","ck-hidden",t=>!t)],style:{left:t.to("left",t=>Bf(t)),top:t.to("top",t=>Bf(t)),width:t.to("width",t=>Bf(t))}}})}}class jf extends nc{removeDropMarkerDelayed=Sn(()=>this.removeDropMarker(),40);_updateDropMarkerThrottled=Wl(t=>this._updateDropMarker(t),40);_reconvertMarkerThrottled=Wl(()=>{this.editor.model.markers.has("drop-target")&&this.editor.editing.reconvertMarker("drop-target")},0);_dropTargetLineView=new Ff;_domEmitter=new(_e());_scrollables=new Map;static get pluginName(){return"DragDropTarget"}static get isOfficialPlugin(){return!0}init(){this._setupDropMarker()}destroy(){this._domEmitter.stopListening();for(const{resizeObserver:t}of this._scrollables.values())t.destroy();return this._updateDropMarkerThrottled.cancel(),this.removeDropMarkerDelayed.cancel(),this._reconvertMarkerThrottled.cancel(),super.destroy()}updateDropMarker(t,e,n,i,o,r){this.removeDropMarkerDelayed.cancel();const s=Hf(this.editor,t,e,n,i,o,r);if(s)return r&&r.containsRange(s)?this.removeDropMarker():void this._updateDropMarkerThrottled(s)}getFinalDropRange(t,e,n,i,o,r){const s=Hf(this.editor,t,e,n,i,o,r);return this.removeDropMarker(),s}removeDropMarker(){const t=this.editor.model;this.removeDropMarkerDelayed.cancel(),this._updateDropMarkerThrottled.cancel(),this._dropTargetLineView.isVisible=!1,t.markers.has("drop-target")&&t.change(t=>{t.removeMarker("drop-target")})}_setupDropMarker(){const t=this.editor;t.ui.view.body.add(this._dropTargetLineView),t.conversion.for("editingDowncast").markerToHighlight({model:"drop-target",view:{classes:["ck-clipboard-drop-target-range"]}}),t.conversion.for("editingDowncast").markerToElement({model:"drop-target",view:(e,{writer:n})=>{if(t.model.schema.checkChild(e.markerRange.start,"$text"))return this._dropTargetLineView.isVisible=!1,this._createDropTargetPosition(n);e.markerRange.isCollapsed?this._updateDropTargetLine(e.markerRange):this._dropTargetLineView.isVisible=!1}})}_updateDropMarker(t){const e=this.editor,n=e.model.markers;e.model.change(e=>{n.has("drop-target")?n.get("drop-target").getRange().isEqual(t)||e.updateMarker("drop-target",{range:t}):e.addMarker("drop-target",{range:t,usingOperation:!1,affectsData:!1})})}_createDropTargetPosition(t){return t.createUIElement("span",{class:"ck ck-clipboard-drop-target-position"},function(t){const e=this.toDomElement(t);return e.append("⁠",t.createElement("span"),"⁠"),e})}_updateDropTargetLine(t){const e=this.editor.editing,n=t.start.nodeBefore,i=t.start.nodeAfter,o=t.start.parent,r=n?e.mapper.toViewElement(n):null,s=r?e.view.domConverter.mapViewToDom(r):null,a=i?e.mapper.toViewElement(i):null,l=a?e.view.domConverter.mapViewToDom(a):null,c=e.mapper.toViewElement(o);if(!c)return;const d=e.view.domConverter.mapViewToDom(c),u=this._getScrollableRect(c),{scrollX:h,scrollY:g}=gt.window,m=s?new Ie(s):null,p=l?new Ie(l):null,f=new Ie(d).excludeScrollbarsAndBorders(),b=m?m.bottom:f.top,k=p?p.top:f.bottom,w=gt.window.getComputedStyle(d),_=b<=k?(b+k)/2:k;if(u.top<_&&_<u.bottom){const t=f.left+parseFloat(w.paddingLeft),e=f.right-parseFloat(w.paddingRight),n=Math.max(t+h,u.left),i=Math.min(e+h,u.right);this._dropTargetLineView.set({isVisible:!0,left:n,top:_+g,width:i-n})}else this._dropTargetLineView.isVisible=!1}_getScrollableRect(t){const e=t.root.rootName;let n;if(this._scrollables.has(e))n=this._scrollables.get(e).domElement;else{n=function(t){let e=t;do{e=e.parentElement;const t=gt.window.getComputedStyle(e).overflowY;if("auto"==t||"scroll"==t)break}while("BODY"!=e.tagName);return e}(this.editor.editing.view.domConverter.mapViewToDom(t)),this._domEmitter.listenTo(n,"scroll",this._reconvertMarkerThrottled,{usePassive:!0});const i=new ze(n,this._reconvertMarkerThrottled);this._scrollables.set(e,{domElement:n,resizeObserver:i})}return new Ie(n).excludeScrollbarsAndBorders()}}function Hf(t,e,n,i,o,r,s){const a=t.model,l=t.editing.mapper;let c=qf(t,e);for(;c;){if(!r)if(a.schema.checkChild(c,"$text")){if(n){const e=n[0].start,r=l.toModelPosition(e);if(!s||Array.from(s.getItems({shallow:!0})).every(t=>a.schema.checkChild(r,t))){if(a.schema.checkChild(r,"$text"))return a.createRange(r);if(e)return $f(t,qf(t,e.parent),i,o)}}}else if(a.schema.isInline(c))return $f(t,c,i,o);if(a.schema.isBlock(c))return $f(t,c,i,o);if(a.schema.checkChild(c,"$block")){const e=Array.from(c.getChildren()).filter(e=>e.is("element")&&!Uf(t,e));let n=0,r=e.length;if(0==r)return a.createRange(a.createPositionAt(c,"end"));for(;n<r-1;){const s=Math.floor((n+r)/2);"before"==Wf(t,e[s],i,o)?r=s:n=s}return $f(t,e[n],i,o)}c=c.parent}return null}function Uf(t,e){const n=t.editing.mapper,i=t.editing.view.domConverter,o=n.toViewElement(e);if(!o)return!0;const r=i.mapViewToDom(o);return"none"!=gt.window.getComputedStyle(r).float}function $f(t,e,n,i){const o=t.model;return o.createRange(o.createPositionAt(e,Wf(t,e,n,i)))}function Wf(t,e,n,i){const o=t.editing.mapper,r=t.editing.view.domConverter,s=o.toViewElement(e),a=r.mapViewToDom(s),l=new Ie(a);return t.model.schema.isInline(e)?n<(l.left+l.right)/2?"before":"after":i<(l.top+l.bottom)/2?"before":"after"}function qf(t,e){const n=t.editing.mapper,i=t.editing.view,o=n.toModelElement(e);if(o)return o;const r=i.createPositionBefore(e),s=n.findMappedViewAncestor(r);return n.toModelElement(s)}class Kf extends nc{_isBlockDragging=!1;_domEmitter=new(_e());static get pluginName(){return"DragDropBlockToolbar"}static get isOfficialPlugin(){return!0}init(){const t=this.editor;if(this.listenTo(t,"change:isReadOnly",(t,e,n)=>{n?(this.forceDisabled("readOnlyMode"),this._isBlockDragging=!1):this.clearForceDisabled("readOnlyMode")}),ft.isAndroid&&this.forceDisabled("noAndroidSupport"),t.plugins.has("BlockToolbar")){const e=t.plugins.get("BlockToolbar").buttonView.element;this._domEmitter.listenTo(e,"dragstart",(t,e)=>this._handleBlockDragStart(e)),this._domEmitter.listenTo(gt.document,"dragover",(t,e)=>this._handleBlockDragging(e)),this._domEmitter.listenTo(gt.document,"drop",(t,e)=>this._handleBlockDragging(e)),this._domEmitter.listenTo(gt.document,"dragend",()=>this._handleBlockDragEnd(),{useCapture:!0}),this.isEnabled&&e.setAttribute("draggable","true"),this.on("change:isEnabled",(t,n,i)=>{e.setAttribute("draggable",i?"true":"false")})}}destroy(){return this._domEmitter.stopListening(),super.destroy()}_handleBlockDragStart(t){if(!this.isEnabled)return;const e=this.editor.model,n=e.document.selection,i=this.editor.editing.view,o=Array.from(n.getSelectedBlocks()),r=e.createRange(e.createPositionBefore(o[0]),e.createPositionAfter(o[o.length-1]));e.change(t=>t.setSelection(r)),this._isBlockDragging=!0,i.focus(),i.getObserver(Mf).onDomEvent(t)}_handleBlockDragging(t){if(!this.isEnabled||!this._isBlockDragging)return;const e=t.clientX+("ltr"==this.editor.locale.contentLanguageDirection?100:-100),n=t.clientY,i=document.elementFromPoint(e,n),o=this.editor.editing.view;i&&i.closest(".ck-editor__editable")&&o.getObserver(Mf).onDomEvent({...t,type:t.type,dataTransfer:t.dataTransfer,target:i,clientX:e,clientY:n,preventDefault:()=>t.preventDefault(),stopPropagation:()=>t.stopPropagation()})}_handleBlockDragEnd(){this._isBlockDragging=!1}}class Gf extends nc{_draggedRange;_draggingUid;_draggableElement;_clearDraggableAttributesDelayed=Sn(()=>this._clearDraggableAttributes(),40);_blockMode=!1;_domEmitter=new(_e());_previewContainer;static get pluginName(){return"DragDrop"}static get isOfficialPlugin(){return!0}static get requires(){return[Df,pf,jf,Kf]}init(){const t=this.editor,e=t.editing.view;this._draggedRange=null,this._draggingUid="",this._draggableElement=null,e.addObserver(Mf),e.addObserver(nl),this._setupDragging(),this._setupContentInsertionIntegration(),this._setupClipboardInputIntegration(),this._setupDraggableAttributeHandling(),this.listenTo(t,"change:isReadOnly",(t,e,n)=>{n?this.forceDisabled("readOnlyMode"):this.clearForceDisabled("readOnlyMode")}),this.on("change:isEnabled",(t,e,n)=>{n||this._finalizeDragging(!1)}),ft.isAndroid&&this.forceDisabled("noAndroidSupport")}destroy(){return this._draggedRange&&(this._draggedRange.detach(),this._draggedRange=null),this._previewContainer&&this._previewContainer.remove(),this._domEmitter.stopListening(),this._clearDraggableAttributesDelayed.cancel(),super.destroy()}_setupDragging(){const t=this.editor,e=t.model,n=t.editing.view,i=n.document,o=t.plugins.get(jf);this.listenTo(i,"dragstart",(t,n)=>{if(n.target?.is("editableElement"))return void n.preventDefault();if(this._prepareDraggedRange(n.target),!this._draggedRange)return void n.preventDefault();this._draggingUid=Mt(),n.dataTransfer.effectAllowed=this.isEnabled?"copyMove":"copy",n.dataTransfer.setData("application/ckeditor5-dragging-uid",this._draggingUid);const i=e.createSelection(this._draggedRange.toRange());this.editor.plugins.get("ClipboardPipeline")._fireOutputTransformationEvent(n.dataTransfer,i,"dragstart");const{dataTransfer:o,domTarget:r,domEvent:s}=n,{clientX:a}=s;this._updatePreview({dataTransfer:o,domTarget:r,clientX:a}),n.stopPropagation(),this.isEnabled||(this._draggedRange.detach(),this._draggedRange=null,this._draggingUid="")},{priority:"low"}),this.listenTo(i,"dragend",(t,e)=>{this._finalizeDragging(!e.dataTransfer.isCanceled&&"move"==e.dataTransfer.dropEffect)},{priority:"low"}),this._domEmitter.listenTo(gt.document,"dragend",()=>{this._blockMode=!1},{useCapture:!0}),this.listenTo(i,"dragenter",()=>{this.isEnabled&&n.focus()}),this.listenTo(i,"dragleave",()=>{o.removeDropMarkerDelayed()}),this.listenTo(i,"dragging",(t,e)=>{if(!this.isEnabled)return void(e.dataTransfer.dropEffect="none");const{clientX:n,clientY:i}=e.domEvent;o.updateDropMarker(e.target,e.targetRanges,n,i,this._blockMode,this._draggedRange),this._draggedRange||(e.dataTransfer.dropEffect="copy"),ft.isGecko||("copy"==e.dataTransfer.effectAllowed?e.dataTransfer.dropEffect="copy":["all","copyMove"].includes(e.dataTransfer.effectAllowed)&&(e.dataTransfer.dropEffect="move")),t.stop()},{priority:"low"})}_setupClipboardInputIntegration(){const t=this.editor,e=t.editing.view.document,n=t.plugins.get(jf);this.listenTo(e,"clipboardInput",(e,i)=>{if("drop"!=i.method)return;const{clientX:o,clientY:r}=i.domEvent,s=n.getFinalDropRange(i.target,i.targetRanges,o,r,this._blockMode,this._draggedRange);return s?(this._draggedRange&&this._draggingUid!=i.dataTransfer.getData("application/ckeditor5-dragging-uid")&&(this._draggedRange.detach(),this._draggedRange=null,this._draggingUid=""),"move"==Qf(i.dataTransfer)&&this._draggedRange&&this._draggedRange.containsRange(s,!0)?(this._finalizeDragging(!1),void e.stop()):void(i.targetRanges=[t.editing.mapper.toViewRange(s)])):(this._finalizeDragging(!1),void e.stop())},{priority:"high"})}_setupContentInsertionIntegration(){const t=this.editor.plugins.get(Df);t.on("contentInsertion",(t,e)=>{if(!this.isEnabled||"drop"!==e.method)return;const n=e.targetRanges.map(t=>this.editor.editing.mapper.toModelRange(t));this.editor.model.change(t=>t.setSelection(n))},{priority:"high"}),t.on("contentInsertion",(t,e)=>{if(!this.isEnabled||"drop"!==e.method)return;const n="move"==Qf(e.dataTransfer),i=!e.resultRange||!e.resultRange.isCollapsed;this._finalizeDragging(i&&n)},{priority:"lowest"})}_setupDraggableAttributeHandling(){const t=this.editor,e=t.editing.view,n=e.document;this.listenTo(n,"mousedown",(i,o)=>{if(ft.isAndroid||!o)return;this._clearDraggableAttributesDelayed.cancel();let r=Yf(o.target);if(ft.isBlink&&!t.isReadOnly&&!r&&!n.selection.isCollapsed){const t=n.selection.getSelectedElement();t&&Yp(t)||(r=n.selection.editableElement)}r&&(e.change(t=>{t.setAttribute("draggable","true",r)}),this._draggableElement=t.editing.mapper.toModelElement(r))}),this.listenTo(n,"mouseup",()=>{ft.isAndroid||this._clearDraggableAttributesDelayed()})}_clearDraggableAttributes(){const t=this.editor.editing;t.view.change(e=>{this._draggableElement&&"$graveyard"!=this._draggableElement.root.rootName&&e.removeAttribute("draggable",t.mapper.toViewElement(this._draggableElement)),this._draggableElement=null})}_finalizeDragging(t){const e=this.editor,n=e.model;e.plugins.get(jf).removeDropMarker(),this._clearDraggableAttributes(),e.plugins.has("WidgetToolbarRepository")&&e.plugins.get("WidgetToolbarRepository").clearForceDisabled("dragDrop"),this._draggingUid="",this._previewContainer&&(this._previewContainer.remove(),this._previewContainer=void 0),this._draggedRange&&(t&&this.isEnabled&&n.change(t=>{const e=n.createSelection(this._draggedRange);n.deleteContent(e,{doNotAutoparagraph:!0});const i=e.getFirstPosition().parent;i.isEmpty&&!n.schema.checkChild(i,"$text")&&n.schema.checkChild(i,"paragraph")&&t.insertElement("paragraph",i,0)}),this._draggedRange.detach(),this._draggedRange=null)}_prepareDraggedRange(t){const e=this.editor,n=e.model,i=n.document.selection,o=t?Yf(t):null;if(o){const t=e.editing.mapper.toModelElement(o);return this._draggedRange=Lr.fromRange(n.createRangeOn(t)),this._blockMode=n.schema.isBlock(t),void(e.plugins.has("WidgetToolbarRepository")&&e.plugins.get("WidgetToolbarRepository").forceDisabled("dragDrop"))}if(i.isCollapsed&&!i.getFirstPosition().parent.isEmpty)return;const r=Array.from(i.getSelectedBlocks()),s=i.getFirstRange();if(0==r.length)return void(this._draggedRange=Lr.fromRange(s));const a=Jf(n,r);if(r.length>1)this._draggedRange=Lr.fromRange(a),this._blockMode=!0;else if(1==r.length){const t=s.start.isTouching(a.start)&&s.end.isTouching(a.end);this._draggedRange=Lr.fromRange(t?a:s),this._blockMode=t}n.change(t=>t.setSelection(this._draggedRange.toRange()))}_updatePreview({dataTransfer:t,domTarget:e,clientX:n}){const i=this.editor.editing.view,o=i.document.selection.editableElement,r=i.domConverter.mapViewToDom(o),s=gt.window.getComputedStyle(r);this._previewContainer?this._previewContainer.firstElementChild&&this._previewContainer.removeChild(this._previewContainer.firstElementChild):(this._previewContainer=ge(gt.document,"div",{style:"position: fixed; left: -999999px;"}),gt.document.body.appendChild(this._previewContainer));const a=new Ie(r);if(r.contains(e))return;const l=parseFloat(s.paddingLeft),c=ge(gt.document,"div");c.className="ck ck-content",c.style.width=s.width,c.style.paddingLeft=`${a.left-n+l}px`,ft.isiOS&&(c.style.backgroundColor="white"),i.domConverter.setContentOf(c,t.getData("text/html")),t.setDragImage(c,0,0),this._previewContainer.appendChild(c)}}function Qf(t){return ft.isGecko?t.dropEffect:["all","copyMove"].includes(t.effectAllowed)?"move":"copy"}function Yf(t){if(t.is("editableElement"))return null;if(t.hasClass("ck-widget__selection-handle"))return t.findAncestor(Yp);if(Yp(t))return t;const e=t.findAncestor(t=>Yp(t)||t.is("editableElement"));return Yp(e)?e:null}function Jf(t,e){const n=e[0],i=e[e.length-1],o=n.getCommonAncestor(i),r=t.createPositionBefore(n),s=t.createPositionAfter(i);if(o&&o.is("element")&&!t.schema.isLimit(o)){const e=t.createRangeOn(o),n=r.isTouching(e.start),i=s.isTouching(e.end);if(n&&i)return Jf(t,[o])}return t.createRange(r,s)}class Zf extends nc{static get pluginName(){return"PastePlainText"}static get isOfficialPlugin(){return!0}static get requires(){return[Df]}init(){const t=this.editor,e=t.model,n=t.editing.view,i=e.document.selection;n.addObserver(Mf),t.plugins.get(Df).on("contentInsertion",(t,n)=>{(function(t,e){let n=e.createRangeIn(t);if(1==t.childCount){const i=t.getChild(0);i.is("element")&&e.schema.isBlock(i)&&!e.schema.isObject(i)&&!e.schema.isLimit(i)&&(n=e.createRangeIn(i))}for(const t of n.getItems()){if(!e.schema.isInline(t))return!1;if(Array.from(t.getAttributeKeys()).find(t=>e.schema.getAttributeProperties(t).isFormatting))return!1}return!0})(n.content,e)&&e.change(t=>{const o=Array.from(i.getAttributes()).filter(([t])=>e.schema.getAttributeProperties(t).isFormatting);i.isCollapsed||e.deleteContent(i,{doNotAutoparagraph:!0}),o.push(...i.getAttributes());const r=t.createRangeIn(n.content);for(const n of r.getItems())for(const i of o)e.schema.checkAttribute(n,i[0])&&t.setAttribute(i[0],i[1],n)})})}}class Xf extends nc{static get pluginName(){return"Clipboard"}static get isOfficialPlugin(){return!0}static get requires(){return[Rf,Df,Gf,Zf]}init(){const t=this.editor,e=this.editor.t;t.accessibility.addKeystrokeInfos({keystrokes:[{label:e("Copy selected content"),keystroke:"CTRL+C"},{label:e("Paste content"),keystroke:"CTRL+V"},{label:e("Paste content as plain text"),keystroke:"CTRL+SHIFT+V"}]})}}function tb(t){const e=t.t,n=t.config.get("codeBlock.languages");for(const t of n)"Plain text"===t.label&&(t.label=e("Plain text")),void 0===t.class&&(t.class=`language-${t.language}`);return n}function eb(t,e,n){const i={};for(const o of t)"class"===e?i[o[e].split(" ").shift()]=o[n]:i[o[e]]=o[n];return i}function nb(t){return t.data.match(/^(\s*)/)[0]}function ib(t){const e=t.document.selection,n=[];if(e.isCollapsed)return[e.anchor];const i=e.getFirstRange().getWalker({ignoreElementEnd:!0,direction:"backward"});for(const{item:e}of i){let i=e.is("$textProxy")?e.textNode:e;const o=i.parent;if(!o.is("element","codeBlock")||i.is("element","softBreak"))continue;for(;i.previousSibling&&!i.previousSibling.is("element","softBreak");)i=i.previousSibling;const r=i.is("$text")?i.startOffset+nb(i).length:i.startOffset,s=t.createPositionAt(o,r);n.every(t=>!t.isEqual(s))&&n.push(s)}return n}function ob(t){const e=wn(t.getSelectedBlocks());return!!e&&e.is("element","codeBlock")}function rb(t,e){return!e.is("rootElement")&&!t.isLimit(e)&&t.checkChild(e.parent,"codeBlock")}function sb(t,e,n,i){const o=eb(e,"language","label"),r=n.getAttribute("language");if(r in o){return t("enter"===i?"Entering %0 code snippet":"Leaving %0 code snippet",o[r])}return t("enter"===i?"Entering code snippet":"Leaving code snippet")}function ab(t,e){for(t.textNode&&(t=e.createPositionBefore(t.textNode));t.nodeBefore&&!t.nodeBefore.is("element","softBreak");)t=e.createPositionBefore(t.nodeBefore);const n=t.nodeAfter;return n&&n.is("$text")?n:null}class lb extends oc{_lastLanguage;constructor(t){super(t),this._lastLanguage=null}refresh(){this.value=this._getValue(),this.isEnabled=this._checkEnabled()}execute(t={}){const e=this.editor,n=e.model,i=n.document.selection,o=tb(e)[0],r=Array.from(i.getSelectedBlocks()),s=null==t.forceValue?!this.value:t.forceValue,a=function(t,e,n){return t.language?t.language:t.usePreviousLanguageChoice&&e?e:n}(t,this._lastLanguage,o.language);n.change(t=>{s?this._applyCodeBlock(t,r,a):this._removeCodeBlock(t,r)})}_getValue(){const t=wn(this.editor.model.document.selection.getSelectedBlocks());return!!t?.is("element","codeBlock")&&t.getAttribute("language")}_checkEnabled(){if(this.value)return!0;const t=this.editor.model.document.selection,e=this.editor.model.schema,n=wn(t.getSelectedBlocks());return!!n&&rb(e,n)}_applyCodeBlock(t,e,n){this._lastLanguage=n;const i=this.editor.model.schema,o=e.filter(t=>rb(i,t));for(const e of o)t.rename(e,"codeBlock"),t.setAttribute("language",n,e),i.removeDisallowedAttributes([e],t),Array.from(e.getChildren()).filter(t=>!i.checkChild(e,t)).forEach(e=>t.remove(e));o.reverse().forEach((e,n)=>{const i=o[n+1];e.previousSibling===i&&(t.appendElement("softBreak",i),t.merge(t.createPositionBefore(e)))})}_removeCodeBlock(t,e){const n=e.filter(t=>t.is("element","codeBlock"));for(const e of n){const n=t.createRangeOn(e);for(const e of Array.from(n.getItems()).reverse())if(e.is("element","softBreak")&&e.parent.is("element","codeBlock")){const{position:n}=t.split(t.createPositionBefore(e)),i=n.nodeAfter;t.rename(i,"paragraph"),t.removeAttribute("language",i),t.remove(e)}t.rename(e,"paragraph"),t.removeAttribute("language",e)}}}class cb extends oc{_indentSequence;constructor(t){super(t),this._indentSequence=t.config.get("codeBlock.indentSequence")}refresh(){this.isEnabled=this._checkEnabled()}execute(){const t=this.editor.model;t.change(e=>{const n=ib(t);for(const i of n){const n=e.createText(this._indentSequence);t.insertContent(n,i)}})}_checkEnabled(){return!!this._indentSequence&&ob(this.editor.model.document.selection)}}class db extends oc{_indentSequence;constructor(t){super(t),this._indentSequence=t.config.get("codeBlock.indentSequence")}refresh(){this.isEnabled=this._checkEnabled()}execute(){const t=this.editor.model;t.change(()=>{const e=ib(t);for(const n of e){const e=ub(t,n,this._indentSequence);e&&t.deleteContent(t.createSelection(e))}})}_checkEnabled(){if(!this._indentSequence)return!1;const t=this.editor.model;return!!ob(t.document.selection)&&ib(t).some(e=>ub(t,e,this._indentSequence))}}function ub(t,e,n){const i=ab(e,t);if(!i)return null;const o=nb(i),r=o.lastIndexOf(n);if(r+n.length!==o.length)return null;if(-1===r)return null;const{parent:s,startOffset:a}=i;return t.createRange(t.createPositionAt(s,a+r),t.createPositionAt(s,a+r+n.length))}function hb(t,e,n=!1){const i=eb(e,"language","class"),o=eb(e,"language","label");return(e,r,s)=>{const{writer:a,mapper:l,consumable:c}=s;if(!c.consume(r.item,"insert"))return;const d=r.item.getAttribute("language"),u=l.toViewPosition(t.createPositionBefore(r.item)),h={};n&&(h["data-language"]=o[d],h.spellcheck="false");const g=i[d]?{class:i[d]}:void 0,m=a.createContainerElement("code",g),p=a.createContainerElement("pre",h,m);a.insert(u,p),l.bindElements(r.item,m)}}const gb="paragraph";class mb extends nc{static get pluginName(){return"CodeBlockEditing"}static get isOfficialPlugin(){return!0}static get requires(){return[Rp]}constructor(t){super(t),t.config.define("codeBlock",{languages:[{language:"plaintext",label:"Plain text"},{language:"c",label:"C"},{language:"cs",label:"C#"},{language:"cpp",label:"C++"},{language:"css",label:"CSS"},{language:"diff",label:"Diff"},{language:"go",label:"Go"},{language:"html",label:"HTML"},{language:"java",label:"Java"},{language:"javascript",label:"JavaScript"},{language:"php",label:"PHP"},{language:"python",label:"Python"},{language:"ruby",label:"Ruby"},{language:"typescript",label:"TypeScript"},{language:"xml",label:"XML"}],indentSequence:"\t"})}init(){const t=this.editor,e=t.model.schema,n=t.model,i=t.editing.view,o=tb(t);t.commands.add("codeBlock",new lb(t)),t.commands.add("indentCodeBlock",new cb(t)),t.commands.add("outdentCodeBlock",new db(t)),this.listenTo(i.document,"tab",(e,n)=>{const i=n.shiftKey?"outdentCodeBlock":"indentCodeBlock";t.commands.get(i).isEnabled&&(t.execute(i),n.stopPropagation(),n.preventDefault(),e.stop())},{context:"pre"}),e.register("codeBlock",{allowWhere:"$block",allowChildren:"$text",disallowChildren:"$inlineObject",allowAttributes:["language"],allowAttributesOf:"$listItem",isBlock:!0}),e.addAttributeCheck((t,n)=>{const i=t.getItem(t.length-2);if(e.getAttributeProperties(n).isFormatting&&i&&"codeBlock"==i.name)return!1}),t.editing.downcastDispatcher.on("insert:codeBlock",hb(n,o,!0)),t.data.downcastDispatcher.on("insert:codeBlock",hb(n,o)),t.data.downcastDispatcher.on("insert:softBreak",function(t){return(e,n,i)=>{if("codeBlock"!==n.item.parent.name)return;const{writer:o,mapper:r,consumable:s}=i;if(!s.consume(n.item,"insert"))return;const a=r.toViewPosition(t.createPositionBefore(n.item));o.insert(a,o.createText("\n"))}}(n),{priority:"high"}),t.data.upcastDispatcher.on("element:code",function(t,e){const n=eb(e,"class","language"),i=e[0].language;return(t,e,o)=>{const r=e.viewItem,s=r.parent;if(!s||!s.is("element","pre"))return;if(e.modelCursor.findAncestor("codeBlock"))return;const{consumable:a,writer:l}=o;if(!a.test(r,{name:!0}))return;const c=l.createElement("codeBlock"),d=[...r.getClassNames()];d.length||d.push("");for(const t of d){const e=n[t];if(e){a.consume(r,{classes:[t]}),l.setAttribute("language",e,c);break}}c.hasAttribute("language")||l.setAttribute("language",i,c),o.convertChildren(r,c),o.safeInsert(c,e.modelCursor)&&(a.consume(r,{name:!0}),o.updateConversionResult(c,e))}}(0,o)),t.data.upcastDispatcher.on("text",(t,e,{consumable:n,writer:i})=>{let o=e.modelCursor;if(!n.test(e.viewItem))return;if(!o.findAncestor("codeBlock"))return;n.consume(e.viewItem);const r=e.viewItem.data.split("\n").map(t=>i.createText(t)),s=r[r.length-1];for(const t of r)if(i.insert(t,o),o=o.getShiftedBy(t.offsetSize),t!==s){const t=i.createElement("softBreak");i.insert(t,o),o=i.createPositionAfter(t)}e.modelRange=i.createRange(e.modelCursor,o),e.modelCursor=o}),t.data.upcastDispatcher.on("element:pre",(t,e,{consumable:n})=>{const i=e.viewItem;if(i.findAncestor("pre"))return;const o=Array.from(i.getChildren()),r=o.find(t=>t.is("element","code"));if(r)for(const t of o)t!==r&&t.is("$text")&&n.consume(t,{name:!0})},{priority:"high"}),this.listenTo(t.editing.view.document,"clipboardInput",(e,i)=>{let o=n.createRange(n.document.selection.anchor);if(i.targetRanges&&(o=t.editing.mapper.toModelRange(i.targetRanges[0])),!o.start.parent.is("element","codeBlock"))return;const r=i.dataTransfer.getData("text/plain"),s=new ol(t.editing.view.document);i.content=function(t,e){const n=t.createDocumentFragment(),i=e.split("\n"),o=i.reduce((e,n,o)=>(e.push(n),o<i.length-1&&e.push(t.createElement("br")),e),[]);return t.appendChild(o,n),n}(s,r)}),t.plugins.has("ClipboardPipeline")&&t.plugins.get(Df).on("contentInsertion",(n,i)=>{const o=t.model,r=o.document.selection;r.anchor.parent.is("element","codeBlock")&&o.change(t=>{const n=t.createRangeIn(i.content);for(const i of[...n.getItems()])i.is("node")&&!e.checkChild(r.anchor,i)&&t.remove(i)})}),this.listenTo(n,"getSelectedContent",(t,[i])=>{const o=i.anchor;!i.isCollapsed&&o.parent.is("element","codeBlock")&&o.hasSameParentAs(i.focus)&&n.change(n=>{const r=t.return;if(o.parent.is("element")&&(r.childCount>1||i.containsEntireContent(o.parent))){const e=n.createElement("codeBlock",o.parent.getAttributes());n.append(r,e);const i=n.createDocumentFragment();return n.append(e,i),void(t.return=i)}const s=r.getChild(0);e.checkAttribute(s,"code")&&n.setAttribute("code",!0,s)})})}afterInit(){const t=this.editor,e=t.commands,n=e.get("indent"),i=e.get("outdent");n&&n.registerChildCommand(e.get("indentCodeBlock"),{priority:"highest"}),i&&i.registerChildCommand(e.get("outdentCodeBlock")),this.listenTo(t.editing.view.document,"enter",(e,n)=>{t.model.document.selection.getLastPosition().parent.is("element","codeBlock")&&(function(t,e){const n=t.model.document,i=t.editing.view,o=n.selection.getLastPosition(),r=o.nodeAfter;return!(e||!n.selection.isCollapsed||!o.isAtStart)&&(!!fb(r)&&(t.model.change(e=>{t.execute("enter");const i=n.selection.anchor.parent.previousSibling;e.rename(i,gb),e.setSelection(i,"in"),t.model.schema.removeDisallowedAttributes([i],e),e.remove(r)}),i.scrollToTheSelection(),!0))}(t,n.isSoft)||function(t,e){const n=t.model,i=n.document,o=t.editing.view,r=i.selection.getLastPosition(),s=r.nodeBefore;let a;if(e||!i.selection.isCollapsed||!r.isAtEnd||!s||!s.previousSibling)return!1;if(fb(s)&&fb(s.previousSibling))a=n.createRange(n.createPositionBefore(s.previousSibling),n.createPositionAfter(s));else if(pb(s)&&fb(s.previousSibling)&&fb(s.previousSibling.previousSibling))a=n.createRange(n.createPositionBefore(s.previousSibling.previousSibling),n.createPositionAfter(s));else{if(!(pb(s)&&fb(s.previousSibling)&&pb(s.previousSibling.previousSibling)&&s.previousSibling.previousSibling&&fb(s.previousSibling.previousSibling.previousSibling)))return!1;a=n.createRange(n.createPositionBefore(s.previousSibling.previousSibling.previousSibling),n.createPositionAfter(s))}return t.model.change(e=>{e.remove(a),t.execute("enter");const n=i.selection.anchor.parent;e.rename(n,gb),t.model.schema.removeDisallowedAttributes([n],e)}),o.scrollToTheSelection(),!0}(t,n.isSoft)||function(t){const e=t.model,n=e.document;let i;const o=ab(n.selection.getLastPosition(),e);o&&o.is("$text")&&(i=nb(o)),t.model.change(e=>{t.execute("shiftEnter"),i&&e.insertText(i,n.selection.anchor)})}(t),n.preventDefault(),e.stop())},{context:"pre"}),this._initAriaAnnouncements()}_initAriaAnnouncements(){const{model:t,ui:e,t:n}=this.editor,i=tb(this.editor);let o=null;t.document.selection.on("change:range",()=>{const r=t.document.selection.focus.parent;e&&o!==r&&r.is("element")&&(o&&o.is("element","codeBlock")&&e.ariaLiveAnnouncer.announce(sb(n,i,o,"leave")),r.is("element","codeBlock")&&e.ariaLiveAnnouncer.announce(sb(n,i,r,"enter")),o=r)})}}function pb(t){return t&&t.is("$text")&&!t.data.match(/\S/)}function fb(t){return t&&t.is("element","softBreak")}class bb extends nc{static get pluginName(){return"CodeBlockUI"}static get isOfficialPlugin(){return!0}init(){const t=this.editor,e=t.t,n=t.ui.componentFactory,i=tb(t),o=this._getLanguageListItemDefinitions(i),r=t.commands.get("codeBlock");n.add("codeBlock",n=>{const i=Bh(n,Dh),s=i.buttonView,a=e("Insert code block");return s.set({label:a,tooltip:!0,icon:Dc,isToggleable:!0}),s.bind("isOn").to(r,"value",t=>!!t),s.on("execute",()=>{t.execute("codeBlock",{usePreviousLanguageChoice:!0}),t.editing.view.focus()}),i.on("execute",e=>{t.execute("codeBlock",{language:e.source._codeBlockLanguage,forceValue:!0}),t.editing.view.focus()}),i.class="ck-code-block-dropdown",i.bind("isEnabled").to(r),Hh(i,o,{role:"menu",ariaLabel:a}),i}),n.add("menuBar:codeBlock",n=>{const i=new Jg(n);i.buttonView.set({role:"menuitem",label:e("Code block"),icon:Dc}),i.bind("isEnabled").to(r);const s=new Zg(n);s.set({ariaLabel:e("Insert code block")});for(const e of o){const o=new pg(n,i),a=new Gu(n);a.bind(...Object.keys(e.model)).to(e.model),a.set({isToggleable:!0,role:"menuitemcheckbox"}),a.delegate("execute").to(i),a.on("execute",()=>{t.execute("codeBlock",{language:e.model._codeBlockLanguage,forceValue:r.value!=e.model._codeBlockLanguage}),t.editing.view.focus()}),o.children.add(a),s.items.add(o)}return i.panelView.children.add(s),i})}_getLanguageListItemDefinitions(t){const e=this.editor.commands.get("codeBlock"),n=new kn;for(const i of t){const t={type:"button",model:new Fg({_codeBlockLanguage:i.language,label:i.label,role:"menuitemradio",withText:!0})};t.model.bind("isOn").to(e,"value",e=>e===t.model._codeBlockLanguage),n.add(t)}return n}}class kb extends nc{static get requires(){return[mb,bb]}static get pluginName(){return"CodeBlock"}static get isOfficialPlugin(){return!0}}class wb extends Ng{view;_toolbarConfig;_elementReplacer;constructor(t,e){super(t),this.view=e,this._toolbarConfig=Nh(t.config.get("toolbar")),this._elementReplacer=new ce,this.listenTo(t.editing.view,"scrollToTheSelection",this._handleScrollToTheSelectionWithStickyPanel.bind(this))}get element(){return this.view.element}init(t){const e=this.editor,n=this.view,i=e.editing.view,o=n.editable,r=i.document.getRoot();o.name=r.rootName,n.render();const s=o.element;this.setEditableElement(o.name,s),n.editable.bind("isFocused").to(this.focusTracker),i.attachDomRoot(s),t&&this._elementReplacer.replace(t,this.element),this._initPlaceholder(),this._initToolbar(),n.menuBarView&&this.initMenuBar(n.menuBarView),this._initDialogPluginIntegration(),this._initContextualBalloonIntegration(),this.fire("ready")}destroy(){super.destroy();const t=this.view,e=this.editor.editing.view;this._elementReplacer.restore(),e.getDomRoot(t.editable.name)&&e.detachDomRoot(t.editable.name),t.destroy()}_initToolbar(){const t=this.view;t.stickyPanel.bind("isActive").to(this.focusTracker,"isFocused"),t.stickyPanel.limiterElement=t.element,t.stickyPanel.bind("viewportTopOffset").to(this,"viewportOffset",({visualTop:t})=>t||0),t.toolbar.fillFromConfig(this._toolbarConfig,this.componentFactory),this.addToolbar(t.toolbar)}_initPlaceholder(){const t=this.editor,e=t.editing.view,n=e.document.getRoot(),i=t.sourceElement;let o;const r=t.config.get("placeholder");r&&(o="string"==typeof r?r:r[this.view.editable.name]),!o&&i&&"textarea"===i.tagName.toLowerCase()&&(o=i.getAttribute("placeholder")),o&&(n.placeholder=o),ci({view:e,element:n,isDirectHost:!1,keepOnFocus:!0})}_initContextualBalloonIntegration(){if(!this.editor.plugins.has("ContextualBalloon"))return;const{stickyPanel:t}=this.view,e=this.editor.plugins.get("ContextualBalloon");e.on("getPositionOptions",e=>{const n=e.return;if(!n||!t.isSticky||!t.element)return;const i=new Ie(t.element).height,o="function"==typeof n.target?n.target():n.target,r="function"==typeof n.limiter?n.limiter():n.limiter;if(o&&r&&new Ie(o).height>=new Ie(r).height-i)return;const s={...n.viewportOffsetConfig},a=(s.top||0)+i;e.return={...n,viewportOffsetConfig:{...s,top:a}}},{priority:"low"});const n=()=>{e.visibleView&&e.updatePosition()};this.listenTo(t,"change:isSticky",n),this.listenTo(this.editor.ui,"change:viewportOffset",n)}_handleScrollToTheSelectionWithStickyPanel(t,e,n){const i=this.view.stickyPanel;if(i.isSticky){const t=new Ie(i.element).height;e.viewportOffset.top+=t}else{const t=()=>{this.editor.editing.view.scrollToTheSelection(n)};this.listenTo(i,"change:isSticky",t),setTimeout(()=>{this.stopListening(i,"change:isSticky",t)},20)}}_initDialogPluginIntegration(){if(!this.editor.plugins.has("Dialog"))return;const t=this.view.stickyPanel,e=this.editor.plugins.get("Dialog");e.on("show",()=>{const n=e.view;n.on("moveTo",(e,i)=>{if(!t.isSticky||n.wasMoved||n.isModal)return;const o=new Ie(t.contentPanelElement);i[1]<o.bottom+$u.defaultOffset&&(i[1]=o.bottom+$u.defaultOffset)},{priority:"high"})},{priority:"low"})}}class _b extends zg{stickyPanel;toolbar;editable;constructor(t,e,n={}){super(t),this.stickyPanel=new qg(t),this.toolbar=new Vh(t,{shouldGroupWhenFull:n.shouldToolbarGroupWhenFull}),n.useMenuBar&&(this.menuBarView=new nm(t)),this.editable=new Rg(t,e,void 0,{label:n.label})}render(){super.render(),this.menuBarView?this.stickyPanel.content.addMany([this.menuBarView,this.toolbar]):this.stickyPanel.content.add(this.toolbar),this.top.add(this.stickyPanel),this.main.add(this.editable)}}class vb extends(_c(kc)){static get editorName(){return"ClassicEditor"}ui;constructor(t,e={}){if(!yb(t)&&void 0!==e.initialData)throw new Vt("editor-create-initial-data",null);super(e),this.config.define("menuBar.isVisible",!1),void 0===this.config.get("initialData")&&this.config.set("initialData",function(t){return yb(t)?(e=t)instanceof HTMLTextAreaElement?e.value:e.innerHTML:t;var e}(t)),yb(t)&&(this.sourceElement=t),this.model.document.createRoot();const n=!this.config.get("toolbar.shouldNotGroupWhenFull"),i=this.config.get("menuBar"),o=new _b(this.locale,this.editing.view,{shouldToolbarGroupWhenFull:n,useMenuBar:i.isVisible,label:this.config.get("label")});this.ui=new wb(this,o),function(t){if(!ot(t.updateSourceElement))throw new Vt("attachtoform-missing-elementapi-interface",t);const e=t.sourceElement;if(function(t){return!!t&&"textarea"===t.tagName.toLowerCase()}(e)&&e.form){let n;const i=e.form,o=()=>t.updateSourceElement();ot(i.submit)&&(n=i.submit,i.submit=()=>{o(),n.apply(i)}),i.addEventListener("submit",o),t.on("destroy",()=>{i.removeEventListener("submit",o),n&&(i.submit=n)})}}(this)}destroy(){return this.sourceElement&&this.updateSourceElement(),this.ui.destroy(),super.destroy()}static create(t,e={}){return new Promise(n=>{const i=new this(t,e);n(i.initPlugins().then(()=>i.ui.init(yb(t)?t:null)).then(()=>i.data.init(i.config.get("initialData"))).then(()=>i.fire("ready")).then(()=>i))})}}function yb(t){return it(t)}class Cb extends oc{constructor(t){super(t),this.affectsData=!1}execute(){const t=this.editor.model,e=t.document.selection;let n=t.schema.getLimitElement(e);if(e.containsEntireContent(n)||!xb(t.schema,n))do{if(n=n.parent,!n)return}while(!xb(t.schema,n));t.change(t=>{t.setSelection(n,"in")})}}function xb(t,e){return t.isLimit(e)&&(t.checkChild(e,"$text")||t.checkChild(e,"paragraph"))}const Ab=dn("Ctrl+A");class Eb extends nc{static get pluginName(){return"SelectAllEditing"}static get isOfficialPlugin(){return!0}init(){const t=this.editor,e=t.t,n=t.editing.view.document;t.commands.add("selectAll",new Cb(t)),this.listenTo(n,"keydown",(e,n)=>{cn(n)===Ab&&(t.execute("selectAll"),n.preventDefault())}),t.accessibility.addKeystrokeInfos({keystrokes:[{label:e("Select all"),keystroke:"CTRL+A"}]})}}class Sb extends nc{static get pluginName(){return"SelectAllUI"}static get isOfficialPlugin(){return!0}init(){const t=this.editor;t.ui.componentFactory.add("selectAll",()=>{const t=this._createButton(Lu);return t.set({tooltip:!0}),t}),t.ui.componentFactory.add("menuBar:selectAll",()=>this._createButton(Gu))}_createButton(t){const e=this.editor,n=e.locale,i=e.commands.get("selectAll"),o=new t(e.locale),r=n.t;return o.set({label:r("Select all"),icon:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M.75 15.5a.75.75 0 0 1 .75.75V18l.008.09A.5.5 0 0 0 2 18.5h1.75a.75.75 0 1 1 0 1.5H1.5l-.144-.007a1.5 1.5 0 0 1-1.35-1.349L0 18.5v-2.25a.75.75 0 0 1 .75-.75m18.5 0a.75.75 0 0 1 .75.75v2.25l-.007.144a1.5 1.5 0 0 1-1.349 1.35L18.5 20h-2.25a.75.75 0 1 1 0-1.5H18a.5.5 0 0 0 .492-.41L18.5 18v-1.75a.75.75 0 0 1 .75-.75m-10.45 3c.11 0 .2.09.2.2v1.1a.2.2 0 0 1-.2.2H7.2a.2.2 0 0 1-.2-.2v-1.1c0-.11.09-.2.2-.2zm4 0c.11 0 .2.09.2.2v1.1a.2.2 0 0 1-.2.2h-1.6a.2.2 0 0 1-.2-.2v-1.1c0-.11.09-.2.2-.2zm.45-5.5a.75.75 0 1 1 0 1.5h-8.5a.75.75 0 1 1 0-1.5zM1.3 11c.11 0 .2.09.2.2v1.6a.2.2 0 0 1-.2.2H.2a.2.2 0 0 1-.2-.2v-1.6c0-.11.09-.2.2-.2zm18.5 0c.11 0 .2.09.2.2v1.6a.2.2 0 0 1-.2.2h-1.1a.2.2 0 0 1-.2-.2v-1.6c0-.11.09-.2.2-.2zm-4.55-2a.75.75 0 1 1 0 1.5H4.75a.75.75 0 1 1 0-1.5zM1.3 7c.11 0 .2.09.2.2v1.6a.2.2 0 0 1-.2.2H.2a.2.2 0 0 1-.2-.2V7.2c0-.11.09-.2.2-.2zm18.5 0c.11 0 .2.09.2.2v1.6a.2.2 0 0 1-.2.2h-1.1a.2.2 0 0 1-.2-.2V7.2c0-.11.09-.2.2-.2zm-4.55-2a.75.75 0 1 1 0 1.5h-2.5a.75.75 0 1 1 0-1.5zm-5 0a.75.75 0 1 1 0 1.5h-5.5a.75.75 0 0 1 0-1.5zm-6.5-5a.75.75 0 0 1 0 1.5H2a.5.5 0 0 0-.492.41L1.5 2v1.75a.75.75 0 0 1-1.5 0V1.5l.007-.144A1.5 1.5 0 0 1 1.356.006L1.5 0zM18.5 0l.144.007a1.5 1.5 0 0 1 1.35 1.349L20 1.5v2.25a.75.75 0 1 1-1.5 0V2l-.008-.09A.5.5 0 0 0 18 1.5h-1.75a.75.75 0 1 1 0-1.5zM8.8 0c.11 0 .2.09.2.2v1.1a.2.2 0 0 1-.2.2H7.2a.2.2 0 0 1-.2-.2V.2c0-.11.09-.2.2-.2zm4 0c.11 0 .2.09.2.2v1.1a.2.2 0 0 1-.2.2h-1.6a.2.2 0 0 1-.2-.2V.2c0-.11.09-.2.2-.2z"/></svg>',keystroke:"Ctrl+A"}),o.bind("isEnabled").to(i,"isEnabled"),this.listenTo(o,"execute",()=>{e.execute("selectAll"),e.editing.view.focus()}),o}}class Tb extends nc{static get requires(){return[Eb,Sb]}static get pluginName(){return"SelectAll"}static get isOfficialPlugin(){return!0}}class Ib extends oc{_stack=[];_createdBatches=new WeakSet;constructor(t){super(t),this.refresh(),this._isEnabledBasedOnSelection=!1,this.listenTo(t.data,"set",(t,e)=>{e[1]={...e[1]};const n=e[1];n.batchType||(n.batchType={isUndoable:!1})},{priority:"high"}),this.listenTo(t.data,"set",(t,e)=>{e[1].batchType.isUndoable||this.clearStack()})}refresh(){this.isEnabled=this._stack.length>0}get createdBatches(){return this._createdBatches}addBatch(t){const e=this.editor.model.document.selection,n={ranges:e.hasOwnRange?Array.from(e.getRanges()):[],isBackward:e.isBackward};this._stack.push({batch:t,selection:n}),this.refresh()}clearStack(){this._stack=[],this.refresh()}_restoreSelection(t,e,n){const i=this.editor.model,o=i.document,r=[],s=t.map(t=>t.getTransformedByOperations(n)),a=s.flat();for(const t of s){const e=t.filter(t=>t.root!=o.graveyard).filter(t=>!Mb(t,a));e.length&&(Pb(e),r.push(e[0]))}r.length&&i.change(t=>{t.setSelection(r,{backward:e})})}_undo(t,e){const n=this.editor.model,i=n.document;this._createdBatches.add(e);const o=t.operations.slice().filter(t=>t.isDocumentOperation);o.reverse();for(const t of o){const o=t.baseVersion+1,r=Array.from(i.history.getOperations(o)),s=sa([t.getReversed()],r,{useRelations:!0,document:this.editor.model.document,padWithNoOps:!1,forceWeakRemove:!0}).operationsA;for(let o of s){const r=o.affectedSelectable;r&&!n.canEditAt(r)&&(o=new Ys(o.baseVersion)),e.addOperation(o),n.applyOperation(o),i.history.setOperationAsUndone(t,o)}}}}function Pb(t){t.sort((t,e)=>t.start.isBefore(e.start)?-1:1);for(let e=1;e<t.length;e++){const n=t[e-1].getJoined(t[e],!0);n&&(e--,t.splice(e,2,n))}}function Mb(t,e){return e.some(e=>e!==t&&e.containsRange(t,!0))}class Nb extends Ib{execute(t=null){const e=t?this._stack.findIndex(e=>e.batch==t):this._stack.length-1,n=this._stack.splice(e,1)[0],i=this.editor.model.createBatch({isUndo:!0});this.editor.model.enqueueChange(i,()=>{this._undo(n.batch,i);const t=this.editor.model.document.history.getOperations(n.batch.baseVersion);this._restoreSelection(n.selection.ranges,n.selection.isBackward,t)}),this.fire("revert",n.batch,i),this.refresh()}}class Lb extends Ib{execute(){const t=this._stack.pop(),e=this.editor.model.createBatch({isUndo:!0});this.editor.model.enqueueChange(e,()=>{const n=t.batch.operations[t.batch.operations.length-1].baseVersion+1,i=this.editor.model.document.history.getOperations(n);this._restoreSelection(t.selection.ranges,t.selection.isBackward,i),this._undo(t.batch,e)}),this.refresh()}}class Vb extends nc{_undoCommand;_redoCommand;_batchRegistry=new WeakSet;static get pluginName(){return"UndoEditing"}static get isOfficialPlugin(){return!0}init(){const t=this.editor,e=t.t;this._undoCommand=new Nb(t),this._redoCommand=new Lb(t),t.commands.add("undo",this._undoCommand),t.commands.add("redo",this._redoCommand),this.listenTo(t.model,"applyOperation",(t,e)=>{const n=e[0];if(!n.isDocumentOperation)return;const i=n.batch,o=this._redoCommand.createdBatches.has(i),r=this._undoCommand.createdBatches.has(i);this._batchRegistry.has(i)||(this._batchRegistry.add(i),i.isUndoable&&(o?this._undoCommand.addBatch(i):r||(this._undoCommand.addBatch(i),this._redoCommand.clearStack())))},{priority:"highest"}),this.listenTo(this._undoCommand,"revert",(t,e,n)=>{this._redoCommand.addBatch(n)}),t.keystrokes.set("CTRL+Z","undo"),t.keystrokes.set("CTRL+Y","redo"),t.keystrokes.set("CTRL+SHIFT+Z","redo"),t.accessibility.addKeystrokeInfos({keystrokes:[{label:e("Undo"),keystroke:"CTRL+Z"},{label:e("Redo"),keystroke:[["CTRL+Y"],["CTRL+SHIFT+Z"]]}]})}}class zb extends nc{static get pluginName(){return"UndoUI"}static get isOfficialPlugin(){return!0}init(){const t=this.editor,e=t.locale,n=t.t,i="ltr"==e.uiLanguageDirection?rd:nd,o="ltr"==e.uiLanguageDirection?nd:rd;this._addButtonsToFactory("undo",n("Undo"),"CTRL+Z",i),this._addButtonsToFactory("redo",n("Redo"),"CTRL+Y",o)}_addButtonsToFactory(t,e,n,i){const o=this.editor;o.ui.componentFactory.add(t,()=>{const o=this._createButton(Lu,t,e,n,i);return o.set({tooltip:!0}),o}),o.ui.componentFactory.add("menuBar:"+t,()=>this._createButton(Gu,t,e,n,i))}_createButton(t,e,n,i,o){const r=this.editor,s=r.locale,a=r.commands.get(e),l=new t(s);return l.set({label:n,icon:o,keystroke:i}),l.bind("isEnabled").to(a,"isEnabled"),this.listenTo(l,"execute",()=>{r.execute(e),r.editing.view.focus()}),l}}class Ob extends nc{static get requires(){return[Vb,zb]}static get pluginName(){return"Undo"}static get isOfficialPlugin(){return!0}}class Rb extends nc{static get requires(){return[Qu,Xf,Lp,Tb,Rp,Pm,Ob]}static get pluginName(){return"Essentials"}static get isOfficialPlugin(){return!0}}class Db extends oc{attributeKey;constructor(t,e){super(t),this.attributeKey=e}refresh(){const t=this.editor.model,e=t.document;this.value=e.selection.getAttribute(this.attributeKey),this.isEnabled=t.schema.checkAttributeInSelection(e.selection,this.attributeKey)}execute(t={}){const e=this.editor.model,n=e.document.selection,i=t.value,o=t.batch,r=t=>{if(n.isCollapsed)i?t.setSelectionAttribute(this.attributeKey,i):t.removeSelectionAttribute(this.attributeKey);else{const o=e.schema.getValidRanges(n.getRanges(),this.attributeKey);for(const e of o)i?t.setAttribute(this.attributeKey,i,e):t.removeAttribute(this.attributeKey,e)}};o?e.enqueueChange(o,t=>{r(t)}):e.change(t=>{r(t)})}}const Bb="fontSize",Fb="fontFamily",jb="fontColor",Hb="fontBackgroundColor";function Ub(t,e){const n={model:{key:t,values:[]},view:{},upcastAlso:{}};for(const t of e)n.model.values.push(t.model),n.view[t.model]=t.view,t.upcastAlso&&(n.upcastAlso[t.model]=t.upcastAlso);return n}function $b(t){return e=>e.getStyle(t).replace(/\s/g,"")}function Wb(t){return(e,{writer:n})=>n.createAttributeElement("span",{style:`${t}:${e}`},{priority:7})}class qb extends Db{constructor(t){super(t,Fb)}}function Kb(t){return t.map(Qb).filter(t=>void 0!==t)}function Gb(t){return t.replace(/["']/g,"").split(",").map(t=>t.trim())}function Qb(t){return"object"==typeof t?t:"default"===t?{title:"Default",model:void 0}:"string"==typeof t?function(t){const e=Gb(t),n=e[0],i=e.map(Yb).join(", ");return{title:n,model:i,view:{name:"span",styles:{"font-family":i},priority:7}}}(t):void 0}function Yb(t){return(t=t.trim()).indexOf(" ")>0&&(t=`'${t}'`),t}class Jb extends nc{static get pluginName(){return"FontFamilyEditing"}static get isOfficialPlugin(){return!0}constructor(t){super(t),t.config.define(Fb,{options:["default","Arial, Helvetica, sans-serif","Courier New, Courier, monospace","Georgia, serif","Lucida Sans Unicode, Lucida Grande, sans-serif","Tahoma, Geneva, sans-serif","Times New Roman, Times, serif","Trebuchet MS, Helvetica, sans-serif","Verdana, Geneva, sans-serif"],supportAllValues:!1})}init(){const t=this.editor;t.model.schema.extend("$text",{allowAttributes:Fb}),t.model.schema.setAttributeProperties(Fb,{isFormatting:!0,copyOnEnter:!0});const e=Kb(t.config.get("fontFamily.options")).filter(t=>t.model),n=Ub(Fb,e);t.config.get("fontFamily.supportAllValues")?(this._prepareAnyValueConverters(),this._prepareCompatibilityConverter()):t.conversion.attributeToElement(n),t.commands.add(Fb,new qb(t))}_prepareAnyValueConverters(){const t=this.editor;t.conversion.for("downcast").attributeToElement({model:Fb,view:(t,{writer:e})=>e.createAttributeElement("span",{style:"font-family:"+t},{priority:7})}),t.conversion.for("upcast").elementToAttribute({model:{key:Fb,value:t=>t.getStyle("font-family")},view:{name:"span",styles:{"font-family":/.*/}}})}_prepareCompatibilityConverter(){this.editor.conversion.for("upcast").elementToAttribute({view:{name:"font",attributes:{face:/.*/}},model:{key:Fb,value:t=>t.getAttribute("face")}})}}class Zb extends nc{static get pluginName(){return"FontFamilyUI"}static get isOfficialPlugin(){return!0}init(){const t=this.editor,e=t.t,n=this._getLocalizedOptions(),i=t.commands.get(Fb),o=e("Font Family"),r=function(t,e){const n=new kn;for(const i of t){const t={type:"button",model:new Fg({commandName:Fb,commandParam:i.model,label:i.title,role:"menuitemradio",withText:!0})};t.model.bind("isOn").to(e,"value",t=>t===i.model||!(!t||!i.model)&&Gb(t)[0].toLowerCase()===Gb(i.model)[0].toLowerCase()),i.view&&"string"!=typeof i.view&&i.view.styles&&t.model.set("labelStyle",`font-family: ${i.view.styles["font-family"]}`),n.add(t)}return n}(n,i);t.ui.componentFactory.add(Fb,e=>{const n=Bh(e);return Hh(n,r,{role:"menu",ariaLabel:o}),n.buttonView.set({label:o,icon:jc,tooltip:!0}),n.extendTemplate({attributes:{class:"ck-font-family-dropdown"}}),n.bind("isEnabled").to(i),this.listenTo(n,"execute",e=>{t.execute(e.source.commandName,{value:e.source.commandParam}),t.editing.view.focus()}),n}),t.ui.componentFactory.add(`menuBar:${Fb}`,e=>{const n=new Jg(e);n.buttonView.set({label:o,icon:jc}),n.bind("isEnabled").to(i);const s=new Zg(e);for(const i of r){const o=new pg(e,n),r=new Gu(e);r.set({role:"menuitemradio",isToggleable:!0}),r.bind(...Object.keys(i.model)).to(i.model),r.delegate("execute").to(n),r.on("execute",()=>{t.execute(i.model.commandName,{value:i.model.commandParam}),t.editing.view.focus()}),o.children.add(r),s.items.add(o)}return n.panelView.children.add(s),n})}_getLocalizedOptions(){const t=this.editor,e=t.t;return Kb(t.config.get(Fb).options).map(t=>("Default"===t.title&&(t.title=e("Default")),t))}}class Xb extends nc{static get requires(){return[Jb,Zb]}static get pluginName(){return"FontFamily"}static get isOfficialPlugin(){return!0}}class tk extends Db{constructor(t){super(t,Bb)}}function ek(t){return t.map(t=>function(t){if("number"==typeof t&&(t=String(t)),"object"==typeof t&&((e=t).title&&e.model&&e.view))return ik(t);var e;const n=function(t){return"string"==typeof t?nk[t]:nk[t.model]}(t);return n?ik(n):"default"===t?{model:void 0,title:"Default"}:function(t){let e;if("object"==typeof t){if(!t.model)throw new Vt("font-size-invalid-definition",null,t);e=parseFloat(t.model)}else e=parseFloat(t);return isNaN(e)}(t)?void 0:function(t){return"string"==typeof t&&(t={title:t,model:`${parseFloat(t)}px`}),t.view={name:"span",styles:{"font-size":t.model}},ik(t)}(t)}(t)).filter(t=>void 0!==t)}const nk={get tiny(){return{title:"Tiny",model:"tiny",view:{name:"span",classes:"text-tiny",priority:7}}},get small(){return{title:"Small",model:"small",view:{name:"span",classes:"text-small",priority:7}}},get big(){return{title:"Big",model:"big",view:{name:"span",classes:"text-big",priority:7}}},get huge(){return{title:"Huge",model:"huge",view:{name:"span",classes:"text-huge",priority:7}}}};function ik(t){return t.view&&"string"!=typeof t.view&&!t.view.priority&&(t.view.priority=7),t}const ok=["x-small","x-small","small","medium","large","x-large","xx-large","xxx-large"];class rk extends nc{static get pluginName(){return"FontSizeEditing"}static get isOfficialPlugin(){return!0}constructor(t){super(t),t.config.define(Bb,{options:["tiny","small","default","big","huge"],supportAllValues:!1})}init(){const t=this.editor;t.model.schema.extend("$text",{allowAttributes:Bb}),t.model.schema.setAttributeProperties(Bb,{isFormatting:!0,copyOnEnter:!0});const e=t.config.get("fontSize.supportAllValues"),n=ek(this.editor.config.get("fontSize.options")).filter(t=>t.model),i=Ub(Bb,n);e?(this._prepareAnyValueConverters(i),this._prepareCompatibilityConverter()):t.conversion.attributeToElement(i),t.commands.add(Bb,new tk(t))}_prepareAnyValueConverters(t){const e=this.editor,n=t.model.values.filter(t=>!fl(String(t))&&!kl(String(t)));if(n.length)throw new Vt("font-size-invalid-use-of-named-presets",null,{presets:n});e.conversion.for("downcast").attributeToElement({model:Bb,view:(t,{writer:e})=>{if(t)return e.createAttributeElement("span",{style:"font-size:"+t},{priority:7})}}),e.conversion.for("upcast").elementToAttribute({model:{key:Bb,value:t=>t.getStyle("font-size")},view:{name:"span",styles:{"font-size":/.*/}}})}_prepareCompatibilityConverter(){this.editor.conversion.for("upcast").elementToAttribute({view:{name:"font",attributes:{size:/^[+-]?\d{1,3}$/}},model:{key:Bb,value:t=>{const e=t.getAttribute("size"),n="-"===e[0]||"+"===e[0];let i=parseInt(e,10);n&&(i=3+i);const o=ok.length-1,r=Math.min(Math.max(i,0),o);return ok[r]}}})}}class sk extends nc{static get pluginName(){return"FontSizeUI"}static get isOfficialPlugin(){return!0}init(){const t=this.editor,e=t.t,n=this._getLocalizedOptions(),i=t.commands.get(Bb),o=e("Font Size"),r=function(t,e){const n=new kn;for(const i of t){const t={type:"button",model:new Fg({commandName:Bb,commandParam:i.model,label:i.title,class:"ck-fontsize-option",role:"menuitemradio",withText:!0})};i.view&&"string"!=typeof i.view&&(i.view.styles&&t.model.set("labelStyle",`font-size:${i.view.styles["font-size"]}`),i.view.classes&&t.model.set("class",`${t.model.class} ${i.view.classes}`)),t.model.bind("isOn").to(e,"value",t=>t===i.model),n.add(t)}return n}(n,i);t.ui.componentFactory.add(Bb,e=>{const n=Bh(e);return Hh(n,r,{role:"menu",ariaLabel:o}),n.buttonView.set({label:o,icon:Hc,tooltip:!0}),n.extendTemplate({attributes:{class:["ck-font-size-dropdown"]}}),n.bind("isEnabled").to(i),this.listenTo(n,"execute",e=>{t.execute(e.source.commandName,{value:e.source.commandParam}),t.editing.view.focus()}),n}),t.ui.componentFactory.add(`menuBar:${Bb}`,e=>{const n=new Jg(e);n.buttonView.set({label:o,icon:Hc}),n.bind("isEnabled").to(i);const s=new Zg(e);for(const i of r){const o=new pg(e,n),r=new Gu(e);r.set({role:"menuitemradio",isToggleable:!0}),r.bind(...Object.keys(i.model)).to(i.model),r.delegate("execute").to(n),r.on("execute",()=>{t.execute(i.model.commandName,{value:i.model.commandParam}),t.editing.view.focus()}),o.children.add(r),s.items.add(o)}return n.panelView.children.add(s),n})}_getLocalizedOptions(){const t=this.editor,e=t.t,n={Default:e("Default"),Tiny:e("Tiny"),Small:e("Small"),Big:e("Big"),Huge:e("Huge")};return ek(t.config.get(Bb).options).map(t=>{const e=n[t.title];return e&&e!=t.title&&(t=Object.assign({},t,{title:e})),t})}}class ak extends nc{static get requires(){return[rk,sk]}static get pluginName(){return"FontSize"}static get isOfficialPlugin(){return!0}normalizeSizeOptions(t){return ek(t)}}class lk extends Db{constructor(t){super(t,jb)}}class ck extends nc{static get pluginName(){return"FontColorEditing"}static get isOfficialPlugin(){return!0}constructor(t){super(t),t.config.define(jb,{colors:[{color:"hsl(0, 0%, 0%)",label:"Black"},{color:"hsl(0, 0%, 30%)",label:"Dim grey"},{color:"hsl(0, 0%, 60%)",label:"Grey"},{color:"hsl(0, 0%, 90%)",label:"Light grey"},{color:"hsl(0, 0%, 100%)",label:"White",hasBorder:!0},{color:"hsl(0, 75%, 60%)",label:"Red"},{color:"hsl(30, 75%, 60%)",label:"Orange"},{color:"hsl(60, 75%, 60%)",label:"Yellow"},{color:"hsl(90, 75%, 60%)",label:"Light green"},{color:"hsl(120, 75%, 60%)",label:"Green"},{color:"hsl(150, 75%, 60%)",label:"Aquamarine"},{color:"hsl(180, 75%, 60%)",label:"Turquoise"},{color:"hsl(210, 75%, 60%)",label:"Light blue"},{color:"hsl(240, 75%, 60%)",label:"Blue"},{color:"hsl(270, 75%, 60%)",label:"Purple"}],columns:5}),t.conversion.for("upcast").elementToAttribute({view:{name:"span",styles:{color:/[\s\S]+/}},model:{key:jb,value:$b("color")}}),t.conversion.for("upcast").elementToAttribute({view:{name:"font",attributes:{color:/^#?\w+$/}},model:{key:jb,value:t=>t.getAttribute("color")}}),t.conversion.for("downcast").attributeToElement({model:jb,view:Wb("color")}),t.commands.add(jb,new lk(t)),t.model.schema.extend("$text",{allowAttributes:jb}),t.model.schema.setAttributeProperties(jb,{isFormatting:!0,copyOnEnter:!0})}}class dk extends nc{commandName;componentName;icon;dropdownLabel;columns;constructor(t,{commandName:e,componentName:n,icon:i,dropdownLabel:o}){super(t),this.commandName=e,this.componentName=n,this.icon=i,this.dropdownLabel=o,this.columns=t.config.get(`${this.componentName}.columns`)}init(){const t=this.editor,e=t.locale,n=e.t,i=t.commands.get(this.commandName),o=t.config.get(this.componentName),r=uh(e,hh(o.colors)),s=o.documentColors,a=!1!==o.colorPicker;t.ui.componentFactory.add(this.componentName,e=>{const l=Bh(e);let c=!1;const d=function({dropdownView:t,colors:e,columns:n,removeButtonLabel:i,colorPickerLabel:o,documentColorsLabel:r,documentColorsCount:s,colorPickerViewConfig:a}){const l=t.locale,c=new rg(l,{colors:e,columns:n,removeButtonLabel:i,colorPickerLabel:o,documentColorsLabel:r,documentColorsCount:s,colorPickerViewConfig:a});return t.colorSelectorView=c,t.panelView.children.add(c),c}({dropdownView:l,colors:r.map(t=>({label:t.label,color:t.model,options:{hasBorder:t.hasBorder}})),columns:this.columns,removeButtonLabel:n("Remove color"),colorPickerLabel:n("Color picker"),documentColorsLabel:0!==s?n("Document colors"):"",documentColorsCount:void 0===s?this.columns:s,colorPickerViewConfig:!!a&&(o.colorPicker||{})});return d.bind("selectedColor").to(i,"value"),l.buttonView.set({label:this.dropdownLabel,icon:this.icon,tooltip:!0}),l.extendTemplate({attributes:{class:"ck-color-ui-dropdown"}}),l.bind("isEnabled").to(i),d.on("execute",(e,n)=>{l.isOpen&&t.execute(this.commandName,{value:n.value,batch:this._undoStepBatch}),"colorPicker"!==n.source&&t.editing.view.focus(),"colorPickerSaveButton"===n.source&&(l.isOpen=!1)}),d.on("colorPicker:show",()=>{this._undoStepBatch=t.model.createBatch()}),d.on("colorPicker:cancel",()=>{this._undoStepBatch.operations.length&&(l.isOpen=!1,t.execute("undo",this._undoStepBatch)),t.editing.view.focus()}),l.on("change:isOpen",(e,n,i)=>{c||(c=!0,l.colorSelectorView.appendUI()),i&&(0!==s&&d.updateDocumentColors(t.model,this.componentName),d.updateSelectedColors(),d.showColorGridsFragment())}),$h(l,()=>l.colorSelectorView.colorGridsFragmentView.staticColorsGrid.items.find(t=>t.isOn)),l}),t.ui.componentFactory.add(`menuBar:${this.componentName}`,e=>{const o=new Jg(e);o.buttonView.set({label:this.dropdownLabel,icon:this.icon}),o.bind("isEnabled").to(i);let a=!1;const l=new rg(e,{colors:r.map(t=>({label:t.label,color:t.model,options:{hasBorder:t.hasBorder}})),columns:this.columns,removeButtonLabel:n("Remove color"),colorPickerLabel:n("Color picker"),documentColorsLabel:0!==s?n("Document colors"):"",documentColorsCount:void 0===s?this.columns:s,colorPickerViewConfig:!1});return l.bind("selectedColor").to(i,"value"),l.delegate("execute").to(o),l.on("execute",(e,n)=>{t.execute(this.commandName,{value:n.value,batch:this._undoStepBatch}),t.editing.view.focus()}),o.on("change:isOpen",(e,n,i)=>{a||(a=!0,l.appendUI()),i&&(0!==s&&l.updateDocumentColors(t.model,this.componentName),l.updateSelectedColors(),l.showColorGridsFragment())}),o.panelView.children.add(l),o})}}class uk extends dk{constructor(t){const e=t.locale.t;super(t,{commandName:jb,componentName:jb,icon:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M12.4 10.3 10 4.5l-2.4 5.8zm.5 1.2H7.1L5.7 15H4.2l5-12h1.6l5 12h-1.5L13 11.5zm3.1 7H4a1 1 0 0 1 0-2h12a1 1 0 0 1 0 2"/></svg>',dropdownLabel:e("Font Color")})}static get pluginName(){return"FontColorUI"}}class hk extends nc{static get requires(){return[ck,uk]}static get pluginName(){return"FontColor"}static get isOfficialPlugin(){return!0}}class gk extends Db{constructor(t){super(t,Hb)}}class mk extends nc{static get pluginName(){return"FontBackgroundColorEditing"}static get isOfficialPlugin(){return!0}constructor(t){super(t),t.config.define(Hb,{colors:[{color:"hsl(0, 0%, 0%)",label:"Black"},{color:"hsl(0, 0%, 30%)",label:"Dim grey"},{color:"hsl(0, 0%, 60%)",label:"Grey"},{color:"hsl(0, 0%, 90%)",label:"Light grey"},{color:"hsl(0, 0%, 100%)",label:"White",hasBorder:!0},{color:"hsl(0, 75%, 60%)",label:"Red"},{color:"hsl(30, 75%, 60%)",label:"Orange"},{color:"hsl(60, 75%, 60%)",label:"Yellow"},{color:"hsl(90, 75%, 60%)",label:"Light green"},{color:"hsl(120, 75%, 60%)",label:"Green"},{color:"hsl(150, 75%, 60%)",label:"Aquamarine"},{color:"hsl(180, 75%, 60%)",label:"Turquoise"},{color:"hsl(210, 75%, 60%)",label:"Light blue"},{color:"hsl(240, 75%, 60%)",label:"Blue"},{color:"hsl(270, 75%, 60%)",label:"Purple"}],columns:5}),t.data.addStyleProcessorRules(Nl),t.conversion.for("upcast").elementToAttribute({view:{name:"span",styles:{"background-color":/[\s\S]+/}},model:{key:Hb,value:$b("background-color")}}),t.conversion.for("downcast").attributeToElement({model:Hb,view:Wb("background-color")}),t.commands.add(Hb,new gk(t)),t.model.schema.extend("$text",{allowAttributes:Hb}),t.model.schema.setAttributeProperties(Hb,{isFormatting:!0,copyOnEnter:!0})}}class pk extends dk{constructor(t){const e=t.locale.t;super(t,{commandName:Hb,componentName:Hb,icon:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M4 2h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2m8.38 9.262H7.62L10 5.506zm.532 1.285L14.34 16h1.426L10.804 4H9.196L4.234 16H5.66l1.428-3.453z"/></svg>',dropdownLabel:e("Font Background Color")})}static get pluginName(){return"FontBackgroundColorUI"}}class fk extends nc{static get requires(){return[mk,pk]}static get pluginName(){return"FontBackgroundColor"}static get isOfficialPlugin(){return!0}}class bk extends oc{constructor(t){super(t),this._isEnabledBasedOnSelection=!1}refresh(){const t=this.editor.model,e=wn(t.document.selection.getSelectedBlocks());this.value=!!e&&e.is("element","paragraph"),this.isEnabled=!!e&&kk(e,t.schema)}execute(t={}){const e=this.editor.model,n=e.document,i=t.selection||n.selection;e.canEditAt(i)&&e.change(t=>{const n=i.getSelectedBlocks();for(const i of n)!i.is("element","paragraph")&&kk(i,e.schema)&&t.rename(i,"paragraph")})}}function kk(t,e){return e.checkChild(t.parent,"paragraph")&&!e.isObject(t)}class wk extends oc{constructor(t){super(t),this._isEnabledBasedOnSelection=!1}execute(t){const e=this.editor.model,n=t.attributes;let i=t.position;return e.canEditAt(i)?e.change(t=>{if(i=this._findPositionToInsertParagraph(i,t),!i)return null;const o=t.createElement("paragraph");return n&&e.schema.setAllowedAttributes(o,n,t),e.insertContent(o,i),t.setSelection(o,"in"),t.createPositionAt(o,0)}):null}_findPositionToInsertParagraph(t,e){const n=this.editor.model;if(n.schema.checkChild(t,"paragraph"))return t;const i=n.schema.findAllowedParent(t,"paragraph");if(!i)return null;const o=t.parent,r=n.schema.checkChild(o,"$text");return o.isEmpty||r&&t.isAtEnd?n.createPositionAfter(o):!o.isEmpty&&r&&t.isAtStart?n.createPositionBefore(o):e.split(t,i).position}}class _k extends nc{static get pluginName(){return"Paragraph"}static get isOfficialPlugin(){return!0}init(){const t=this.editor,e=t.model;t.commands.add("paragraph",new bk(t)),t.commands.add("insertParagraph",new wk(t)),e.schema.register("paragraph",{inheritAllFrom:"$block"}),t.conversion.elementToElement({model:"paragraph",view:"p"}),t.conversion.for("upcast").elementToElement({model:(t,{writer:e})=>_k.paragraphLikeElements.has(t.name)?t.isEmpty?null:e.createElement("paragraph"):null,view:/.+/,converterPriority:"low"})}static paragraphLikeElements=new Set(["blockquote","dd","div","dt","h1","h2","h3","h4","h5","h6","li","p","td","th"])}class vk extends oc{modelElements;constructor(t,e){super(t),this.modelElements=e}refresh(){const t=wn(this.editor.model.document.selection.getSelectedBlocks());this.value=!!t&&this.modelElements.includes(t.name)&&t.name,this.isEnabled=!!t&&this.modelElements.some(e=>yk(t,e,this.editor.model.schema))}execute(t){const e=this.editor.model,n=e.document,i=t.value;e.change(t=>{const o=Array.from(n.selection.getSelectedBlocks()).filter(t=>yk(t,i,e.schema));for(const e of o)e.is("element",i)||t.rename(e,i)})}}function yk(t,e,n){return n.checkChild(t.parent,e)&&!n.isObject(t)}const Ck="paragraph";class xk extends nc{static get pluginName(){return"HeadingEditing"}static get isOfficialPlugin(){return!0}constructor(t){super(t),t.config.define("heading",{options:[{model:"paragraph",title:"Paragraph",class:"ck-heading_paragraph"},{model:"heading1",view:"h2",title:"Heading 1",class:"ck-heading_heading1"},{model:"heading2",view:"h3",title:"Heading 2",class:"ck-heading_heading2"},{model:"heading3",view:"h4",title:"Heading 3",class:"ck-heading_heading3"}]})}static get requires(){return[_k]}init(){const t=this.editor,e=t.config.get("heading.options"),n=[];for(const i of e)"paragraph"!==i.model&&(t.model.schema.register(i.model,{inheritAllFrom:"$block"}),t.conversion.elementToElement(i),n.push(i.model));this._addDefaultH1Conversion(t),t.commands.add("heading",new vk(t,n))}afterInit(){const t=this.editor,e=t.commands.get("enter"),n=t.config.get("heading.options");e&&this.listenTo(e,"afterExecute",(e,i)=>{const o=t.model.document.selection.getFirstPosition().parent;n.some(t=>o.is("element",t.model))&&!o.is("element",Ck)&&0===o.childCount&&i.writer.rename(o,Ck)})}_addDefaultH1Conversion(t){t.conversion.for("upcast").elementToElement({model:"heading1",view:"h1",converterPriority:Nt.low+1})}}class Ak extends nc{static get pluginName(){return"HeadingUI"}static get isOfficialPlugin(){return!0}init(){const t=this.editor,e=t.t,n=function(t){const e=t.t,n={Paragraph:e("Paragraph"),"Heading 1":e("Heading 1"),"Heading 2":e("Heading 2"),"Heading 3":e("Heading 3"),"Heading 4":e("Heading 4"),"Heading 5":e("Heading 5"),"Heading 6":e("Heading 6")};return t.config.get("heading.options").map(t=>{const e=n[t.title];return e&&e!=t.title&&(t.title=e),t})}(t),i=e("Choose heading"),o=e("Heading");t.ui.componentFactory.add("heading",e=>{const r={},s=new kn,a=t.commands.get("heading"),l=t.commands.get("paragraph"),c=[a];for(const t of n){const e={type:"button",model:new Fg({label:t.title,class:t.class,role:"menuitemradio",withText:!0})};"paragraph"===t.model?(e.model.bind("isOn").to(l,"value"),e.model.set("commandName","paragraph"),c.push(l)):(e.model.bind("isOn").to(a,"value",e=>e===t.model),e.model.set({commandName:"heading",commandValue:t.model})),s.add(e),r[t.model]=t.title}const d=Bh(e);return Hh(d,s,{ariaLabel:o,role:"menu"}),d.buttonView.set({ariaLabel:o,ariaLabelledBy:void 0,isOn:!1,withText:!0,tooltip:o}),d.extendTemplate({attributes:{class:["ck-heading-dropdown"]}}),d.bind("isEnabled").toMany(c,"isEnabled",(...t)=>t.some(t=>t)),d.buttonView.bind("label").to(a,"value",l,"value",(t,e)=>{const n=e?"paragraph":t;return"boolean"==typeof n?i:r[n]?r[n]:i}),d.buttonView.bind("ariaLabel").to(a,"value",l,"value",(t,e)=>{const n=e?"paragraph":t;return"boolean"==typeof n?o:r[n]?`${r[n]}, ${o}`:o}),this.listenTo(d,"execute",e=>{const{commandName:n,commandValue:i}=e.source;t.execute(n,i?{value:i}:void 0),t.editing.view.focus()}),d}),t.ui.componentFactory.add("menuBar:heading",i=>{const o=new Jg(i),r=t.commands.get("heading"),s=t.commands.get("paragraph"),a=[r],l=new Zg(i);o.set({class:"ck-heading-dropdown"}),l.set({ariaLabel:e("Heading"),role:"menu"}),o.buttonView.set({label:e("Heading")}),o.panelView.children.add(l);for(const e of n){const n=new pg(i,o),c=new Gu(i);n.children.add(c),l.items.add(n),c.set({isToggleable:!0,label:e.title,role:"menuitemradio",class:e.class}),c.delegate("execute").to(o),c.on("execute",()=>{const n="paragraph"===e.model?"paragraph":"heading";t.execute(n,{value:e.model}),t.editing.view.focus()}),"paragraph"===e.model?(c.bind("isOn").to(s,"value"),a.push(s)):c.bind("isOn").to(r,"value",t=>t===e.model)}return o.bind("isEnabled").toMany(a,"isEnabled",(...t)=>t.some(t=>t)),o})}}class Ek extends nc{static get requires(){return[xk,Ak]}static get pluginName(){return"Heading"}static get isOfficialPlugin(){return!0}}new Set(["paragraph","heading1","heading2","heading3","heading4","heading5","heading6"]);class Sk extends oc{refresh(){const t=this.editor.model,e=t.document;this.value=e.selection.getAttribute("highlight"),this.isEnabled=t.schema.checkAttributeInSelection(e.selection,"highlight")}execute(t={}){const e=this.editor.model,n=e.document.selection,i=t.value;e.change(t=>{if(n.isCollapsed){const e=n.getFirstPosition();if(n.hasAttribute("highlight")){const n=t=>t.item.hasAttribute("highlight")&&t.item.getAttribute("highlight")===this.value,o=e.getLastMatchingPosition(n,{direction:"backward"}),r=e.getLastMatchingPosition(n),s=t.createRange(o,r);i&&this.value!==i?(e.isEqual(r)||t.setAttribute("highlight",i,s),t.setSelectionAttribute("highlight",i)):(e.isEqual(r)||t.removeAttribute("highlight",s),t.removeSelectionAttribute("highlight"))}else i&&t.setSelectionAttribute("highlight",i)}else{const o=e.schema.getValidRanges(n.getRanges(),"highlight");for(const e of o)i?t.setAttribute("highlight",i,e):t.removeAttribute("highlight",e)}})}}class Tk extends nc{static get pluginName(){return"HighlightEditing"}static get isOfficialPlugin(){return!0}constructor(t){super(t),t.config.define("highlight",{options:[{model:"yellowMarker",class:"marker-yellow",title:"Yellow marker",color:"var(--ck-content-highlight-marker-yellow)",type:"marker"},{model:"greenMarker",class:"marker-green",title:"Green marker",color:"var(--ck-content-highlight-marker-green)",type:"marker"},{model:"pinkMarker",class:"marker-pink",title:"Pink marker",color:"var(--ck-content-highlight-marker-pink)",type:"marker"},{model:"blueMarker",class:"marker-blue",title:"Blue marker",color:"var(--ck-content-highlight-marker-blue)",type:"marker"},{model:"redPen",class:"pen-red",title:"Red pen",color:"var(--ck-content-highlight-pen-red)",type:"pen"},{model:"greenPen",class:"pen-green",title:"Green pen",color:"var(--ck-content-highlight-pen-green)",type:"pen"}]})}init(){const t=this.editor;t.model.schema.extend("$text",{allowAttributes:"highlight"});const e=t.config.get("highlight.options");t.conversion.attributeToElement(function(t){const e={model:{key:"highlight",values:[]},view:{}};for(const n of t)e.model.values.push(n.model),e.view[n.model]={name:"mark",classes:n.class};return e}(e)),t.commands.add("highlight",new Sk(t))}}class Ik extends nc{get localizedOptionTitles(){const t=this.editor.t;return{"Yellow marker":t("Yellow marker"),"Green marker":t("Green marker"),"Pink marker":t("Pink marker"),"Blue marker":t("Blue marker"),"Red pen":t("Red pen"),"Green pen":t("Green pen")}}static get pluginName(){return"HighlightUI"}static get isOfficialPlugin(){return!0}init(){const t=this.editor.config.get("highlight.options");for(const e of t)this._addHighlighterButton(e);this._addRemoveHighlightButton(),this._addDropdown(t),this._addMenuBarButton(t)}_addRemoveHighlightButton(){const t=this.editor.t,e=this.editor.commands.get("highlight");this._addButton("removeHighlight",t("Remove highlight"),Fc,null,t=>{t.bind("isEnabled").to(e,"isEnabled")})}_addHighlighterButton(t){const e=this.editor.commands.get("highlight");this._addButton("highlight:"+t.model,t.title,Pk(t.type),t.model,function(n){n.bind("isEnabled").to(e,"isEnabled"),n.bind("isOn").to(e,"value",e=>e===t.model),n.iconView.fillColor=t.color,n.isToggleable=!0})}_addButton(t,e,n,i,o){const r=this.editor;r.ui.componentFactory.add(t,t=>{const s=new Lu(t),a=this.localizedOptionTitles[e]?this.localizedOptionTitles[e]:e;return s.set({label:a,icon:n,tooltip:!0}),s.on("execute",()=>{r.execute("highlight",{value:i}),r.editing.view.focus()}),o(s),s})}_addDropdown(t){const e=this.editor,n=e.t,i=e.ui.componentFactory,o=t[0],r=t.reduce((t,e)=>(t[e.model]=e,t),{});i.add("highlight",s=>{const a=e.commands.get("highlight"),l=Bh(s,Dh),c=l.buttonView;function d(t,e){const n=t&&t!==c.lastExecuted?t:c.lastExecuted;return r[n][e]}return c.set({label:n("Highlight"),tooltip:!0,lastExecuted:o.model,commandValue:o.model,isToggleable:!0}),c.bind("icon").to(a,"value",t=>Pk(d(t,"type"))),c.bind("color").to(a,"value",t=>d(t,"color")),c.bind("commandValue").to(a,"value",t=>d(t,"model")),c.bind("isOn").to(a,"value",t=>!!t),c.delegate("execute").to(l),l.bind("isEnabled").to(a,"isEnabled"),Fh(l,()=>{const e=t.map(t=>{const e=i.create("highlight:"+t.model);return this.listenTo(e,"execute",()=>{l.buttonView.set({lastExecuted:t.model})}),e});return e.push(new Ph),e.push(i.create("removeHighlight")),e},{enableActiveItemFocusOnDropdownOpen:!0,ariaLabel:n("Text highlight toolbar")}),function(t){t.buttonView.actionView.iconView.bind("fillColor").to(t.buttonView,"color")}(l),c.on("execute",()=>{e.execute("highlight",{value:c.commandValue})}),this.listenTo(l,"execute",()=>{e.editing.view.focus()}),l})}_addMenuBarButton(t){const e=this.editor,n=e.t,i=e.commands.get("highlight");e.ui.componentFactory.add("menuBar:highlight",o=>{const r=new Jg(o);r.buttonView.set({label:n("Highlight"),icon:Pk("marker")}),r.bind("isEnabled").to(i),r.buttonView.iconView.fillColor="transparent";const s=new Zg(o);for(const n of t){const t=new pg(o,r),a=new Gu(o);a.set({label:n.title,icon:Pk(n.type),role:"menuitemradio",isToggleable:!0}),a.iconView.fillColor=n.color,a.delegate("execute").to(r),a.bind("isOn").to(i,"value",t=>t===n.model),a.on("execute",()=>{e.execute("highlight",{value:n.model}),e.editing.view.focus()}),t.children.add(a),s.items.add(t)}s.items.add(new Sh(o));const a=new pg(o,r),l=new Gu(o);return l.set({label:n("Remove highlight"),icon:Fc}),l.delegate("execute").to(r),l.on("execute",()=>{e.execute("highlight",{value:null}),e.editing.view.focus()}),a.children.add(l),s.items.add(a),r.panelView.children.add(s),r})}}function Pk(t){return"marker"===t?'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M10.798 1.59 3.002 12.875l1.895 1.852 2.521 1.402 6.997-12.194z" class="ck-icon__fill"/><path d="m2.556 16.727.234-.348q-.445-.226-.498-.426-.054-.206.115-.837.14-.375.169-.595a4.5 4.5 0 0 0 0-.725q-.313-.931-.284-1.26.03-.327.475-.862l6.77-9.414q.808-1.365 3.199.18 2.39 1.549 1.784 2.686l-5.877 10.36q-.237.618-.526.782-.29.163-1.232.21-.543.196-.738.318t-.526.47q-.44.397-.632.397-.143 0-.524-.226l-.31.41zm-.279.415 1.575 1.103-.392.515H1.19zm8.1-13.656-4.953 6.9L8.75 12.57l4.247-7.574q.263-.375-1.092-1.192-1.354-.819-1.528-.32zM8.244 18.5 9.59 17h9.406v1.5z"/></svg>':'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M10.126 2.268 2.002 13.874l1.895 1.852 2.521 1.402L14.47 5.481l-1.543-2.568z" class="ck-icon__fill"/><path d="m4.5 18.088-2.645-1.852-.04-2.95-.006-.005.006-.008v-.025l.011.008L8.73 2.97q.249-.348.567-.557l-1.212.308L4.604 7.9l-.83-.558 3.694-5.495 2.708-.69 1.65 1.145.046.018.85-1.216 2.16 1.512-.856 1.222c.828.967 1.144 2.141.432 3.158L7.55 17.286l.006.005zm-.634.166-1.976.516-.026-1.918zM9.968 3.817l-.006-.004-6.123 9.184 3.277 2.294 6.108-9.162.005.003c.317-.452-.16-1.332-1.064-1.966-.891-.624-1.865-.776-2.197-.349M8.245 18.5 9.59 17h9.406v1.5z"/></svg>'}class Mk extends nc{static get requires(){return[Tk,Ik]}static get pluginName(){return"Highlight"}static get isOfficialPlugin(){return!0}}class Nk extends oc{refresh(){const t=this.editor.model,e=t.schema,n=t.document.selection;this.isEnabled=function(t,e,n){const i=function(t,e){const n=nf(t,e).start.parent;return n.isEmpty&&!n.is("element","$root")?n.parent:n}(t,n);return e.checkChild(i,"horizontalLine")}(n,e,t)}execute(){const t=this.editor.model;t.change(e=>{const n=e.createElement("horizontalLine");t.insertObject(n,null,null,{setSelection:"after"})})}}class Lk extends nc{static get pluginName(){return"HorizontalLineEditing"}static get isOfficialPlugin(){return!0}init(){const t=this.editor,e=t.model.schema,n=t.t,i=t.conversion;e.register("horizontalLine",{inheritAllFrom:"$blockObject"}),i.for("dataDowncast").elementToElement({model:"horizontalLine",view:(t,{writer:e})=>e.createEmptyElement("hr")}),i.for("editingDowncast").elementToStructure({model:"horizontalLine",view:(t,{writer:e})=>{const i=n("Horizontal line"),o=e.createContainerElement("div",null,e.createEmptyElement("hr"));return e.addClass("ck-horizontal-line",o),e.setCustomProperty("hr",!0,o),function(t,e,n){return e.setCustomProperty("horizontalLine",!0,t),Jp(t,e,{label:n})}(o,e,i)}}),i.for("upcast").elementToElement({view:"hr",model:"horizontalLine"}),t.commands.add("horizontalLine",new Nk(t))}}class Vk extends nc{static get pluginName(){return"HorizontalLineUI"}static get isOfficialPlugin(){return!0}init(){const t=this.editor;t.ui.componentFactory.add("horizontalLine",()=>{const t=this._createButton(Lu);return t.set({tooltip:!0}),t}),t.ui.componentFactory.add("menuBar:horizontalLine",()=>this._createButton(Gu))}_createButton(t){const e=this.editor,n=e.locale,i=e.commands.get("horizontalLine"),o=new t(e.locale),r=n.t;return o.set({label:r("Horizontal line"),icon:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M2 9h16v2H2z"/></svg>'}),o.bind("isEnabled").to(i,"isEnabled"),this.listenTo(o,"execute",()=>{e.execute("horizontalLine"),e.editing.view.focus()}),o}}class zk extends nc{static get requires(){return[Lk,Vk,pf]}static get pluginName(){return"HorizontalLine"}static get isOfficialPlugin(){return!0}}class Ok extends oc{refresh(){const t=this.editor.model,e=t.schema,n=t.document.selection,i=Rk(n);this.isEnabled=function(t,e,n){const i=function(t,e){const n=nf(t,e).start.parent;return n.isEmpty&&!n.is("rootElement")?n.parent:n}(t,n);return e.checkChild(i,"rawHtml")}(n,e,t),this.value=i?i.getAttribute("value")||"":null}execute(t){const e=this.editor.model,n=e.document.selection;e.change(i=>{let o;null!==this.value?o=Rk(n):(o=i.createElement("rawHtml"),e.insertObject(o,null,null,{setSelection:"on"})),i.setAttribute("value",t,o)})}}function Rk(t){const e=t.getSelectedElement();return e&&e.is("element","rawHtml")?e:null}class Dk extends nc{_widgetButtonViewReferences=new Set;static get pluginName(){return"HtmlEmbedEditing"}static get isOfficialPlugin(){return!0}constructor(t){super(t),t.config.define("htmlEmbed",{showPreviews:!1,sanitizeHtml:t=>(zt("html-embed-provide-sanitize-function"),{html:t,hasChanged:!1})})}init(){const t=this.editor;t.model.schema.register("rawHtml",{inheritAllFrom:"$blockObject",allowAttributes:["value"]}),t.commands.add("htmlEmbed",new Ok(t)),this._setupConversion()}_setupConversion(){const t=this.editor,e=t.t,n=t.editing.view,i=this._widgetButtonViewReferences,o=t.config.get("htmlEmbed");function r({editor:t,domElement:n,state:o,props:r}){n.textContent="";const a=n.ownerDocument;let l;if(o.isEditable){const t={isDisabled:!1,placeholder:r.textareaPlaceholder};l=s({domDocument:a,state:o,props:t}),n.append(l)}else if(o.showPreviews){const i={sanitizeHtml:r.sanitizeHtml};n.append(function({editor:t,domDocument:n,state:i,props:o}){const r=o.sanitizeHtml(i.getRawHtmlValue()),s=ge(n,"div",{class:"ck ck-reset_all raw-html-embed__preview-placeholder"},i.getRawHtmlValue().length>0?e("No preview available"):e("Empty snippet content")),a=ge(n,"div",{class:"raw-html-embed__preview-content",dir:t.locale.contentLanguageDirection}),l=n.createRange().createContextualFragment(r.html);a.appendChild(l);return ge(n,"div",{class:"raw-html-embed__preview"},[s,a])}({domDocument:a,state:o,props:i,editor:t}))}else{const t={isDisabled:!0,placeholder:r.textareaPlaceholder};n.append(s({domDocument:a,state:o,props:t}))}const c={onEditClick:r.onEditClick,onSaveClick:()=>{r.onSaveClick(l.value)},onCancelClick:r.onCancelClick};n.prepend(function({editor:t,domDocument:e,state:n,props:o}){const r=ge(e,"div",{class:"raw-html-embed__buttons-wrapper"});if(n.isEditable){const e=Bk(t,"save",o.onSaveClick),n=Bk(t,"cancel",o.onCancelClick);r.append(e.element,n.element),i.add(e).add(n)}else{const e=Bk(t,"edit",o.onEditClick);r.append(e.element),i.add(e)}return r}({editor:t,domDocument:a,state:o,props:c}))}function s({domDocument:t,state:e,props:n}){const i=ge(t,"textarea",{placeholder:n.placeholder,class:"ck ck-reset ck-input ck-input-text raw-html-embed__source"});return i.disabled=n.isDisabled,i.value=e.getRawHtmlValue(),i}this.editor.editing.view.on("render",()=>{for(const t of i){if(t.element&&t.element.isConnected)return;t.destroy(),i.delete(t)}},{priority:"lowest"}),t.data.registerRawContentMatcher({name:"div",classes:"raw-html-embed"}),t.conversion.for("upcast").elementToElement({view:{name:"div",classes:"raw-html-embed"},model:(t,{writer:e})=>e.createElement("rawHtml",{value:t.getCustomProperty("$rawContent")})}),t.conversion.for("dataDowncast").elementToElement({model:"rawHtml",view:(t,{writer:e})=>e.createRawElement("div",{class:"raw-html-embed"},function(e){e.innerHTML=t.getAttribute("value")||""})}),t.conversion.for("editingDowncast").elementToStructure({model:{name:"rawHtml",attributes:["value"]},view:(i,{writer:s})=>{let a,l,c;const d=s.createRawElement("div",{class:"raw-html-embed__content-wrapper"},function(e){a=e,r({editor:t,domElement:e,state:l,props:c}),a.addEventListener("mousedown",()=>{if(l.isEditable){const e=t.model;e.document.selection.getSelectedElement()!==i&&e.change(t=>t.setSelection(i,"on"))}},!0)}),u={makeEditable(){l=Object.assign({},l,{isEditable:!0}),r({domElement:a,editor:t,state:l,props:c}),n.change(t=>{t.setAttribute("data-cke-ignore-events","true",d)}),a.querySelector("textarea").focus()},save(e){e!==l.getRawHtmlValue()?(t.execute("htmlEmbed",e),t.editing.view.focus()):this.cancel()},cancel(){l=Object.assign({},l,{isEditable:!1}),r({domElement:a,editor:t,state:l,props:c}),t.editing.view.focus(),n.change(t=>{t.removeAttribute("data-cke-ignore-events",d)})}};l={showPreviews:o.showPreviews,isEditable:!1,getRawHtmlValue:()=>i.getAttribute("value")||""},c={sanitizeHtml:o.sanitizeHtml,textareaPlaceholder:e("Paste raw HTML here..."),onEditClick(){u.makeEditable()},onSaveClick(t){u.save(t)},onCancelClick(){u.cancel()}};const h=s.createContainerElement("div",{class:"raw-html-embed","data-html-embed-label":e("HTML snippet"),dir:t.locale.uiLanguageDirection},d);return s.setCustomProperty("rawHtmlApi",u,h),s.setCustomProperty("rawHtml",!0,h),Jp(h,s,{label:e("HTML snippet"),hasSelectionHandle:!0})}})}}function Bk(t,e,n){const{t:i}=t.locale,o=new Lu(t.locale),r=t.commands.get("htmlEmbed");return o.set({class:`raw-html-embed__${e}-button`,icon:td,tooltip:!0,tooltipPosition:"rtl"===t.locale.uiLanguageDirection?"e":"w"}),o.render(),"edit"===e?(o.set({icon:td,label:i("Edit source")}),o.bind("isEnabled").to(r)):"save"===e?(o.set({icon:Rc,label:i("Save changes")}),o.bind("isEnabled").to(r)):o.set({icon:zc,label:i("Cancel")}),o.on("execute",n),o}class Fk extends nc{static get pluginName(){return"HtmlEmbedUI"}static get isOfficialPlugin(){return!0}init(){const t=this.editor,e=t.locale.t;t.ui.componentFactory.add("htmlEmbed",()=>{const t=this._createButton(Lu);return t.set({tooltip:!0,label:e("Insert HTML")}),t}),t.ui.componentFactory.add("menuBar:htmlEmbed",()=>{const t=this._createButton(Gu);return t.set({label:e("HTML snippet")}),t})}_createButton(t){const e=this.editor,n=e.commands.get("htmlEmbed"),i=new t(e.locale);return i.set({icon:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M17 0a2 2 0 0 1 2 2v7a1 1 0 0 1 1 1v5a1 1 0 0 1-.883.993l-.118.006L19 17a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2l-.001-1.001-.116-.006A1 1 0 0 1 0 15v-5a1 1 0 0 1 .999-1L1 2a2 2 0 0 1 2-2zm.499 15.999h-15L2.5 17a.5.5 0 0 0 .5.5h14a.5.5 0 0 0 .5-.5zm-3.478-6.013-.014.014H14v.007l-1.525 1.525-1.46-1.46-.015.013V10h-1v5h1v-3.53l1.428 1.43.048.043.131-.129L14 11.421V15h1v-5h-.965zM2 10H1v5h1v-2h2v2h1v-5H4v2H2zm7 0H6v1h1v4h1v-4h1zm8 0h-1v5h3v-1h-2zm0-8.5H3a.5.5 0 0 0-.5.5l-.001 6.999h15L17.5 2a.5.5 0 0 0-.5-.5M10 7v1H4V7zm3-2v1H4V5zm-3-2v1H4V3z"/></svg>'}),i.bind("isEnabled").to(n,"isEnabled"),this.listenTo(i,"execute",()=>{e.execute("htmlEmbed"),e.editing.view.focus(),e.editing.view.document.selection.getSelectedElement().getCustomProperty("rawHtmlApi").makeEditable()}),i}}class jk extends nc{static get requires(){return[Dk,Fk,pf]}static get pluginName(){return"HtmlEmbed"}static get isOfficialPlugin(){return!0}}const Hk=/\p{Lu}?\p{Ll}+|[0-9]+|\p{Lu}+(?!\p{Ll})|\p{Emoji_Presentation}|\p{Extended_Pictographic}|\p{L}+/gu;function Uk(t,e,n,i){e&&function(t,e,n){if(e.attributes)for(const[i]of Object.entries(e.attributes))t.removeAttribute(i,n);if(e.styles)for(const i of Object.keys(e.styles))t.removeStyle(i,n);e.classes&&t.removeClass(e.classes,n)}(t,e,i),n&&$k(t,n,i)}function $k(t,e,n){if(e.attributes)for(const[i,o]of Object.entries(e.attributes))t.setAttribute(i,o,n);e.styles&&t.setStyle(e.styles,n),e.classes&&t.addClass(e.classes,n)}function Wk(t,e,n,i,o){const r=e.getAttribute(n),s={};for(const t of["attributes","styles","classes"]){if(t!=i){r&&r[t]&&(s[t]=r[t]);continue}if("classes"==i){const e=new Set(r&&r.classes||[]);o(e),e.size&&(s[t]=Array.from(e));continue}const e=new Map(Object.entries(r&&r[t]||{}));o(e),e.size&&(s[t]=Object.fromEntries(e))}Object.keys(s).length?e.is("documentSelection")?t.setSelectionAttribute(n,s):t.setAttribute(n,s,e):r&&(e.is("documentSelection")?t.removeSelectionAttribute(n):t.removeAttribute(n,e))}function qk(t,e,n){for(const i of e.getItems({shallow:!0})){const e=i.getAttribute(t);e&&e.attributes&&Object.keys(e.attributes).length?Object.keys(e).length>1&&n.setAttribute(t,{attributes:e.attributes},i):n.removeAttribute(t,i)}}function Kk(t){return`html${e=t,function(t){const e=function(t){return Array.from(t.match(Hk)??[])}(function(t){return"string"!=typeof t&&(t=Sc(t)),t.replace(/['\u2019]/g,"")}(t).trim());let n="";for(let t=0;t<e.length;t++){const i=e[t];n&&(n+=" "),i===i.toUpperCase()?n+=i:n+=i[0].toUpperCase()+i.slice(1).toLowerCase()}return n}(e).replace(/ /g,"")}Attributes`;var e}function Gk({model:t}){return(e,n)=>n.writer.createElement(t,{htmlContent:e.getCustomProperty("$rawContent")})}function Qk(t,{view:e,isInline:n}){const i=t.t;return(t,{writer:o})=>{const r=i("HTML object"),s=Yk(e,t,o),a=t.getAttribute(Kk(e));return o.addClass("html-object-embed__content",s),a&&$k(o,a,s),Jp(o.createContainerElement(n?"span":"div",{class:"html-object-embed","data-html-object-embed-label":r},s),o,{label:r})}}function Yk(t,e,n){return n.createRawElement(t,null,(t,n)=>{n.setContentOf(t,e.getAttribute("htmlContent"))})}function Jk({model:t,view:e},n){return(i,{writer:o,consumable:r})=>{if(!i.hasAttribute(t))return null;const s=o.createContainerElement(e),a=i.getAttribute(t);return r.consume(i,`attribute:${t}`),$k(o,a,s),s.getFillerOffset=()=>null,n?Jp(s,o):s}}function Zk({priority:t,view:e}){return(n,i)=>{if(!n)return;const{writer:o}=i,r=o.createAttributeElement(e,null,{priority:t});return $k(o,n,r),r}}function Xk({view:t},e){return n=>{n.on(`element:${t}`,(t,n,i)=>{if(!n.modelRange||n.modelRange.isCollapsed)return;const o=e.processViewAttributes(n.viewItem,i);o&&i.writer.setAttribute(Kk(n.viewItem.name),o,n.modelRange)},{priority:"low"})}}function tw({view:t,model:e}){return n=>{n.on(`attribute:${Kk(t)}:${e}`,(t,e,n)=>{if(!n.consumable.consume(e.item,t.name))return;const{attributeOldValue:i,attributeNewValue:o}=e;Uk(n.writer,i,o,n.mapper.toViewElement(e.item))})}}const ew=[{model:"codeBlock",view:"pre"},{model:"paragraph",view:"p"},{model:"blockQuote",view:"blockquote"},{model:"listItem",view:"li"},{model:"pageBreak",view:"div"},{model:"rawHtml",view:"div"},{model:"table",view:"table"},{model:"tableRow",view:"tr"},{model:"tableCell",view:"td"},{model:"tableCell",view:"th"},{model:"tableColumnGroup",view:"colgroup"},{model:"tableColumn",view:"col"},{model:"caption",view:"caption"},{model:"caption",view:"figcaption"},{model:"imageBlock",view:"img"},{model:"imageInline",view:"img"},{model:"horizontalLine",view:"hr"},{model:"htmlP",view:"p",modelSchema:{inheritAllFrom:"$block"}},{model:"htmlBlockquote",view:"blockquote",modelSchema:{inheritAllFrom:"$container"}},{model:"htmlTable",view:"table",modelSchema:{allowWhere:"$block",isBlock:!0}},{model:"htmlTbody",view:"tbody",modelSchema:{allowIn:"htmlTable",isBlock:!1}},{model:"htmlThead",view:"thead",modelSchema:{allowIn:"htmlTable",isBlock:!1}},{model:"htmlTfoot",view:"tfoot",modelSchema:{allowIn:"htmlTable",isBlock:!1}},{model:"htmlCaption",view:"caption",modelSchema:{allowIn:"htmlTable",allowChildren:"$text",isBlock:!1}},{model:"htmlColgroup",view:"colgroup",modelSchema:{allowIn:"htmlTable",allowChildren:"col",isBlock:!1}},{model:"htmlCol",view:"col",modelSchema:{allowIn:"htmlColgroup",isBlock:!1}},{model:"htmlTr",view:"tr",modelSchema:{allowIn:["htmlTable","htmlThead","htmlTbody"],isLimit:!0}},{model:"htmlTd",view:"td",modelSchema:{allowIn:"htmlTr",allowContentOf:"$container",isLimit:!0,isBlock:!1}},{model:"htmlTh",view:"th",modelSchema:{allowIn:"htmlTr",allowContentOf:"$container",isLimit:!0,isBlock:!1}},{model:"htmlFigure",view:"figure",modelSchema:{inheritAllFrom:"$container",isBlock:!1}},{model:"htmlFigcaption",view:"figcaption",modelSchema:{allowIn:"htmlFigure",allowChildren:"$text",isBlock:!1}},{model:"htmlAddress",view:"address",modelSchema:{inheritAllFrom:"$container",isBlock:!1}},{model:"htmlAside",view:"aside",modelSchema:{inheritAllFrom:"$container",isBlock:!1}},{model:"htmlMain",view:"main",modelSchema:{inheritAllFrom:"$container",isBlock:!1}},{model:"htmlDetails",view:"details",modelSchema:{inheritAllFrom:"$container",isBlock:!1}},{model:"htmlSummary",view:"summary",modelSchema:{allowChildren:["htmlH1","htmlH2","htmlH3","htmlH4","htmlH5","htmlH6","$text"],allowIn:"htmlDetails",isBlock:!1}},{model:"htmlDiv",view:"div",paragraphLikeModel:"htmlDivParagraph",modelSchema:{inheritAllFrom:"$container"}},{model:"htmlFieldset",view:"fieldset",modelSchema:{inheritAllFrom:"$container",isBlock:!1}},{model:"htmlLegend",view:"legend",modelSchema:{allowIn:"htmlFieldset",allowChildren:"$text"}},{model:"htmlHeader",view:"header",modelSchema:{inheritAllFrom:"$container",isBlock:!1}},{model:"htmlFooter",view:"footer",modelSchema:{inheritAllFrom:"$container",isBlock:!1}},{model:"htmlForm",view:"form",modelSchema:{inheritAllFrom:"$container",isBlock:!0}},{model:"htmlHgroup",view:"hgroup",modelSchema:{allowIn:["$root","$container"],allowChildren:["paragraph","htmlP","htmlH1","htmlH2","htmlH3","htmlH4","htmlH5","htmlH6"],isBlock:!1}},{model:"htmlH1",view:"h1",modelSchema:{inheritAllFrom:"$block"}},{model:"htmlH2",view:"h2",modelSchema:{inheritAllFrom:"$block"}},{model:"htmlH3",view:"h3",modelSchema:{inheritAllFrom:"$block"}},{model:"htmlH4",view:"h4",modelSchema:{inheritAllFrom:"$block"}},{model:"htmlH5",view:"h5",modelSchema:{inheritAllFrom:"$block"}},{model:"htmlH6",view:"h6",modelSchema:{inheritAllFrom:"$block"}},{model:"$htmlList",modelSchema:{allowWhere:"$container",allowChildren:["$htmlList","htmlLi"],isBlock:!1}},{model:"htmlDir",view:"dir",modelSchema:{inheritAllFrom:"$htmlList"}},{model:"htmlMenu",view:"menu",modelSchema:{inheritAllFrom:"$htmlList"}},{model:"htmlUl",view:"ul",modelSchema:{inheritAllFrom:"$htmlList"}},{model:"htmlOl",view:"ol",modelSchema:{inheritAllFrom:"$htmlList"}},{model:"htmlLi",view:"li",modelSchema:{allowIn:"$htmlList",allowChildren:"$text",isBlock:!1}},{model:"htmlPre",view:"pre",modelSchema:{inheritAllFrom:"$block"}},{model:"htmlArticle",view:"article",modelSchema:{inheritAllFrom:"$container",isBlock:!1}},{model:"htmlSection",view:"section",modelSchema:{inheritAllFrom:"$container",isBlock:!1}},{model:"htmlNav",view:"nav",modelSchema:{inheritAllFrom:"$container",isBlock:!1}},{model:"htmlDivDl",view:"div",modelSchema:{allowChildren:["htmlDt","htmlDd"],allowIn:"htmlDl"}},{model:"htmlDl",view:"dl",modelSchema:{allowWhere:"$container",allowChildren:["htmlDt","htmlDd","htmlDivDl"],isBlock:!1}},{model:"htmlDt",view:"dt",modelSchema:{allowChildren:"$block",isBlock:!1}},{model:"htmlDd",view:"dd",modelSchema:{allowChildren:"$block",isBlock:!1}},{model:"htmlCenter",view:"center",modelSchema:{inheritAllFrom:"$container",isBlock:!1}},{model:"htmlHr",view:"hr",isEmpty:!0,modelSchema:{inheritAllFrom:"$blockObject"}}],nw=[{model:"htmlLiAttributes",view:"li",appliesToBlock:!0,coupledAttribute:"listItemId"},{model:"htmlOlAttributes",view:"ol",appliesToBlock:!0,coupledAttribute:"listItemId"},{model:"htmlUlAttributes",view:"ul",appliesToBlock:!0,coupledAttribute:"listItemId"},{model:"htmlFigureAttributes",view:"figure",appliesToBlock:"table"},{model:"htmlTheadAttributes",view:"thead",appliesToBlock:"table"},{model:"htmlTbodyAttributes",view:"tbody",appliesToBlock:"table"},{model:"htmlFigureAttributes",view:"figure",appliesToBlock:"imageBlock"},{model:"htmlAcronym",view:"acronym",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlTt",view:"tt",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlFont",view:"font",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlTime",view:"time",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlVar",view:"var",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlBig",view:"big",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlSmall",view:"small",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlSamp",view:"samp",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlQ",view:"q",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlOutput",view:"output",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlKbd",view:"kbd",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlBdi",view:"bdi",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlBdo",view:"bdo",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlAbbr",view:"abbr",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlA",view:"a",priority:5,coupledAttribute:"linkHref",attributeProperties:{isFormatting:!0}},{model:"htmlStrong",view:"strong",coupledAttribute:"bold",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlB",view:"b",coupledAttribute:"bold",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlI",view:"i",coupledAttribute:"italic",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlEm",view:"em",coupledAttribute:"italic",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlS",view:"s",coupledAttribute:"strikethrough",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlDel",view:"del",coupledAttribute:"strikethrough",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlIns",view:"ins",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlU",view:"u",coupledAttribute:"underline",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlSub",view:"sub",coupledAttribute:"subscript",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlSup",view:"sup",coupledAttribute:"superscript",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlCode",view:"code",coupledAttribute:"code",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlMark",view:"mark",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlSpan",view:"span",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlCite",view:"cite",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlLabel",view:"label",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlDfn",view:"dfn",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlObject",view:"object",isObject:!0,modelSchema:{inheritAllFrom:"$inlineObject"}},{model:"htmlIframe",view:"iframe",isObject:!0,modelSchema:{inheritAllFrom:"$inlineObject"}},{model:"htmlInput",view:"input",isObject:!0,modelSchema:{inheritAllFrom:"$inlineObject"}},{model:"htmlButton",view:"button",isObject:!0,modelSchema:{inheritAllFrom:"$inlineObject"}},{model:"htmlTextarea",view:"textarea",isObject:!0,modelSchema:{inheritAllFrom:"$inlineObject"}},{model:"htmlSelect",view:"select",isObject:!0,modelSchema:{inheritAllFrom:"$inlineObject"}},{model:"htmlVideo",view:"video",isObject:!0,modelSchema:{inheritAllFrom:"$inlineObject"}},{model:"htmlEmbed",view:"embed",isObject:!0,modelSchema:{inheritAllFrom:"$inlineObject"}},{model:"htmlOembed",view:"oembed",isObject:!0,modelSchema:{inheritAllFrom:"$inlineObject"}},{model:"htmlAudio",view:"audio",isObject:!0,modelSchema:{inheritAllFrom:"$inlineObject"}},{model:"htmlImg",view:"img",isObject:!0,modelSchema:{inheritAllFrom:"$inlineObject"}},{model:"htmlCanvas",view:"canvas",isObject:!0,modelSchema:{inheritAllFrom:"$inlineObject"}},{model:"htmlMeter",view:"meter",isObject:!0,modelSchema:{inheritAllFrom:"$inlineObject"}},{model:"htmlProgress",view:"progress",isObject:!0,modelSchema:{inheritAllFrom:"$inlineObject"}},{model:"htmlScript",view:"script",modelSchema:{allowWhere:["$text","$block"],isInline:!0}},{model:"htmlStyle",view:"style",modelSchema:{allowWhere:["$text","$block"],isInline:!0}},{model:"htmlCustomElement",view:"$customElement",modelSchema:{allowWhere:["$text","$block"],allowAttributesOf:"$inlineObject",isInline:!0}}];class iw extends nc{_definitions=[];static get pluginName(){return"DataSchema"}static get isOfficialPlugin(){return!0}init(){for(const t of ew)this.registerBlockElement(t);for(const t of nw)this.registerInlineElement(t)}registerBlockElement(t){this._definitions.push({...t,isBlock:!0})}registerInlineElement(t){this._definitions.push({...t,isInline:!0})}extendBlockElement(t){this._extendDefinition({...t,isBlock:!0})}extendInlineElement(t){this._extendDefinition({...t,isInline:!0})}getDefinitionsForView(t,e=!1){const n=new Set;for(const i of this._getMatchingViewDefinitions(t)){if(e)for(const t of this._getReferences(i.model))n.add(t);n.add(i)}return n}getDefinitionsForModel(t){return this._definitions.filter(e=>e.model==t)}_getMatchingViewDefinitions(t){return this._definitions.filter(e=>e.view&&function(t,e){return"string"==typeof t?t===e:t instanceof RegExp&&t.test(e)}(t,e.view))}*_getReferences(t){const e=["inheritAllFrom","inheritTypesFrom","allowWhere","allowContentOf","allowAttributesOf"],n=this._definitions.filter(e=>e.model==t);for(const{modelSchema:i}of n)if(i)for(const n of e)for(const e of fn(i[n]||[])){const n=this._definitions.filter(t=>t.model==e);for(const i of n)e!==t&&(yield*this._getReferences(i.model),yield i)}}_extendDefinition(t){const e=Array.from(this._definitions.entries()).filter(([,e])=>e.model==t.model);if(0!=e.length)for(const[n,i]of e)this._definitions[n]=ct({},i,t,(t,e)=>Array.isArray(t)?t.concat(e):void 0);else this._definitions.push(t)}}class ow extends nc{_dataSchema;_allowedAttributes;_disallowedAttributes;_allowedElements;_disallowedElements;_dataInitialized;_coupledAttributes;constructor(t){super(t),this._dataSchema=t.plugins.get("DataSchema"),this._allowedAttributes=new vi,this._disallowedAttributes=new vi,this._allowedElements=new Set,this._disallowedElements=new Set,this._dataInitialized=!1,this._coupledAttributes=null,this._registerElementsAfterInit(),this._registerElementHandlers(),this._registerCoupledAttributesPostFixer(),this._registerAssociatedHtmlAttributesPostFixer()}static get pluginName(){return"DataFilter"}static get isOfficialPlugin(){return!0}static get requires(){return[iw,pf]}loadAllowedConfig(t){for(const e of t){const t=e.name||/[\s\S]+/,n=cw(e);this.allowElement(t),n.forEach(t=>this.allowAttributes(t))}}loadDisallowedConfig(t){for(const e of t){const t=e.name||/[\s\S]+/,n=cw(e);0==n.length?this.disallowElement(t):n.forEach(t=>this.disallowAttributes(t))}}loadAllowedEmptyElementsConfig(t){for(const e of t)this.allowEmptyElement(e)}allowElement(t){for(const e of this._dataSchema.getDefinitionsForView(t,!0))this._addAllowedElement(e),this._coupledAttributes=null}disallowElement(t){for(const e of this._dataSchema.getDefinitionsForView(t,!1))this._disallowedElements.add(e.view)}allowEmptyElement(t){for(const e of this._dataSchema.getDefinitionsForView(t,!0))e.isInline&&this._dataSchema.extendInlineElement({...e,allowEmpty:!0})}allowAttributes(t){this._allowedAttributes.add(t)}disallowAttributes(t){this._disallowedAttributes.add(t)}processViewAttributes(t,e){const{consumable:n}=e;return rw(t,this._disallowedAttributes,n),function(t,{attributes:e,classes:n,styles:i}){return e.length||n.length||i.length?{...e.length&&{attributes:sw(t,e)},...i.length&&{styles:aw(t,i)},...n.length&&{classes:n}}:null}(t,rw(t,this._allowedAttributes,n))}_addAllowedElement(t){if(!this._allowedElements.has(t)){if(this._allowedElements.add(t),"appliesToBlock"in t&&"string"==typeof t.appliesToBlock)for(const e of this._dataSchema.getDefinitionsForModel(t.appliesToBlock))e.isBlock&&this._addAllowedElement(e);this._dataInitialized&&this.editor.data.once("set",()=>{this._fireRegisterEvent(t)},{priority:Nt.highest+1})}}_registerElementsAfterInit(){this.editor.data.on("init",()=>{this._dataInitialized=!0;for(const t of this._allowedElements)this._fireRegisterEvent(t)},{priority:Nt.highest+1})}_registerElementHandlers(){this.on("register",(t,e)=>{const n=this.editor.model.schema;if(e.isObject&&!n.isRegistered(e.model))this._registerObjectElement(e);else if(e.isBlock)this._registerBlockElement(e);else{if(!e.isInline)throw new Vt("data-filter-invalid-definition",null,e);this._registerInlineElement(e)}t.stop()},{priority:"lowest"})}_registerCoupledAttributesPostFixer(){const t=this.editor.model,e=t.document.selection;t.document.registerPostFixer(e=>{const n=t.document.differ.getChanges();let i=!1;const o=this._getCoupledAttributesMap();for(const t of n){if("attribute"!=t.type||null!==t.attributeNewValue)continue;const n=o.get(t.attributeKey);if(n)for(const{item:o}of t.range.getWalker())for(const t of n)o.hasAttribute(t)&&(e.removeAttribute(t,o),i=!0)}return i}),this.listenTo(e,"change:attribute",(n,{attributeKeys:i})=>{const o=new Set,r=this._getCoupledAttributesMap();for(const t of i){if(e.hasAttribute(t))continue;const n=r.get(t);if(n)for(const t of n)e.hasAttribute(t)&&o.add(t)}0!=o.size&&t.change(t=>{for(const e of o)t.removeSelectionAttribute(e)})})}_registerAssociatedHtmlAttributesPostFixer(){const t=this.editor.model;t.document.registerPostFixer(e=>{const n=t.document.differ.getChanges();let i=!1;for(const o of n)if("insert"===o.type&&"$text"!==o.name)for(const n of o.attributes.keys())n.startsWith("html")&&n.endsWith("Attributes")&&(t.schema.checkAttribute(o.name,n)||(e.removeAttribute(n,o.position.nodeAfter),i=!0));return i})}_getCoupledAttributesMap(){if(this._coupledAttributes)return this._coupledAttributes;this._coupledAttributes=new Map;for(const t of this._allowedElements)if(t.coupledAttribute&&t.model){const e=this._coupledAttributes.get(t.coupledAttribute);e?e.push(t.model):this._coupledAttributes.set(t.coupledAttribute,[t.model])}return this._coupledAttributes}_fireRegisterEvent(t){t.view&&this._disallowedElements.has(t.view)||this.fire(t.view?`register:${t.view}`:"register",t)}_registerObjectElement(t){const e=this.editor,n=e.model.schema,i=e.conversion,{view:o,model:r}=t;n.register(r,t.modelSchema),o&&(n.extend(t.model,{allowAttributes:[Kk(o),"htmlContent"]}),e.data.registerRawContentMatcher({name:o}),i.for("upcast").elementToElement({view:o,model:Gk(t),converterPriority:Nt.low+2}),i.for("upcast").add(Xk(t,this)),i.for("editingDowncast").elementToStructure({model:{name:r,attributes:[Kk(o)]},view:Qk(e,t)}),i.for("dataDowncast").elementToElement({model:r,view:(t,{writer:e})=>Yk(o,t,e)}),i.for("dataDowncast").add(tw(t)))}_registerBlockElement(t){const e=this.editor,n=e.model.schema,i=e.conversion,{view:o,model:r}=t;if(!n.isRegistered(t.model)){if(!t.modelSchema)return;if(n.register(t.model,t.modelSchema),!o)return;i.for("upcast").elementToElement({model:r,view:o,converterPriority:Nt.low+2}),i.for("downcast").elementToElement({model:r,view:(e,{writer:n})=>t.isEmpty?n.createEmptyElement(o):n.createContainerElement(o)})}o&&(n.extend(t.model,{allowAttributes:Kk(o)}),i.for("upcast").add(Xk(t,this)),i.for("downcast").add(tw(t)))}_registerInlineElement(t){const e=this.editor,n=e.model.schema,i=e.conversion,o=t.model;if(!t.appliesToBlock&&(n.extend("$text",{allowAttributes:o}),t.attributeProperties&&n.setAttributeProperties(o,t.attributeProperties),i.for("upcast").add(function({view:t,model:e,allowEmpty:n},i){return e=>{e.on(`element:${t}`,(t,e,r)=>{let s=i.processViewAttributes(e.viewItem,r);if(s||r.consumable.test(e.viewItem,{name:!0})){if(s=s||{},r.consumable.consume(e.viewItem,{name:!0}),e.modelRange||(e=Object.assign(e,r.convertChildren(e.viewItem,e.modelCursor))),n&&e.modelRange.isCollapsed&&Object.keys(s).length){const t=r.writer.createElement("htmlEmptyElement");if(!r.safeInsert(t,e.modelCursor))return;const n=r.getSplitParts(t);return e.modelRange=r.writer.createRange(e.modelRange.start,r.writer.createPositionAfter(n[n.length-1])),r.updateConversionResult(t,e),void o(t,s,r)}for(const t of e.modelRange.getItems())o(t,s,r)}},{priority:"low"})};function o(t,n,i){if(i.schema.checkAttribute(t,e)){const o=function(t,e){const n=rt(t);let i="attributes";for(i in e)n[i]="classes"==i?Array.from(new Set([...t[i]||[],...e[i]])):{...t[i],...e[i]};return n}(n,t.getAttribute(e)||{});i.writer.setAttribute(e,o,t)}}}(t,this)),i.for("downcast").attributeToElement({model:o,view:Zk(t)}),t.allowEmpty)){if(n.setAttributeProperties(o,{copyFromObject:!1}),!n.isRegistered("htmlEmptyElement")){n.register("htmlEmptyElement",{inheritAllFrom:"$inlineObject"});const t=t=>Array.from(t.getAttributeKeys()).some(t=>t.startsWith("html"));e.model.document.registerPostFixer(n=>{const i=e.model.document.differ.getChanges(),o=new Set;for(const e of i)if("remove"!==e.type){if("attribute"===e.type&&null===e.attributeNewValue)for(const{item:n}of e.range)n.is("element","htmlEmptyElement")&&!t(n)&&o.add(n);if("insert"===e.type&&e.position.nodeAfter){const i=e.position.nodeAfter;for(const{item:e}of n.createRangeOn(i))e.is("element","htmlEmptyElement")&&!t(e)&&o.add(e)}}for(const t of o)n.remove(t);return o.size>0})}e.data.htmlProcessor.domConverter.registerInlineObjectMatcher(e=>e.name==t.view&&e.isEmpty&&Array.from(e.getAttributeKeys()).length?{name:!0}:null),i.for("editingDowncast").elementToElement({model:"htmlEmptyElement",view:Jk(t,!0)}),i.for("dataDowncast").elementToElement({model:"htmlEmptyElement",view:Jk(t)})}}}function rw(t,e,n){const i=e.matchAll(t)||[],o=t.document.stylesProcessor;return i.reduce((e,{match:i})=>{for(const[r,s]of i.attributes||[])if("style"==r){const i=s,r=o.getRelatedStyles(i).filter(t=>t.split("-").length>i.split("-").length).sort((t,e)=>e.split("-").length-t.split("-").length);for(const i of r)n.consume(t,{styles:[i]})&&e.styles.push(i);n.consume(t,{styles:[i]})&&e.styles.push(i)}else if("class"==r){const i=s;n.consume(t,{classes:[i]})&&e.classes.push(i)}else n.consume(t,{attributes:[r]})&&e.attributes.push(r);return e},{attributes:[],classes:[],styles:[]})}function sw(t,e){const n={};for(const i of e){const e=t.getAttribute(i);void 0!==e&&je(i)&&(n[i]=e)}return n}function aw(t,e){const n=new xi(t.document.stylesProcessor);for(const i of e){const e=t.getStyle(i);void 0!==e&&n.set(i,e)}return Object.fromEntries(n.getStylesEntries())}function lw(t,e){const{name:n}=t,i=t[e];return E(i)?Object.entries(i).map(([t,i])=>({name:n,[e]:{[t]:i}})):Array.isArray(i)?i.map(t=>({name:n,[e]:[t]})):[t]}function cw(t){const{name:e,attributes:n,classes:i,styles:o}=t,r=[];return n&&r.push(...lw({name:e,attributes:n},"attributes")),i&&r.push(...lw({name:e,classes:i},"classes")),o&&r.push(...lw({name:e,styles:o},"styles")),r}class dw extends nc{static get requires(){return[ow]}static get pluginName(){return"CodeBlockElementSupport"}static get isOfficialPlugin(){return!0}init(){if(!this.editor.plugins.has("CodeBlockEditing"))return;const t=this.editor.plugins.get(ow);t.on("register:pre",(e,n)=>{if("codeBlock"!==n.model)return;const i=this.editor,o=i.model.schema,r=i.conversion;o.extend("codeBlock",{allowAttributes:["htmlPreAttributes","htmlContentAttributes"]}),r.for("upcast").add(function(t){return e=>{e.on("element:code",(e,n,i)=>{const o=n.viewItem,r=o.parent;function s(e,o){const r=t.processViewAttributes(e,i);r&&i.writer.setAttribute(o,r,n.modelRange)}r&&r.is("element","pre")&&(s(r,"htmlPreAttributes"),s(o,"htmlContentAttributes"))},{priority:"low"})}}(t)),r.for("downcast").add(t=>{t.on("attribute:htmlPreAttributes:codeBlock",(t,e,n)=>{if(!n.consumable.consume(e.item,t.name))return;const{attributeOldValue:i,attributeNewValue:o}=e,r=n.mapper.toViewElement(e.item).parent;Uk(n.writer,i,o,r)}),t.on("attribute:htmlContentAttributes:codeBlock",(t,e,n)=>{if(!n.consumable.consume(e.item,t.name))return;const{attributeOldValue:i,attributeNewValue:o}=e,r=n.mapper.toViewElement(e.item);Uk(n.writer,i,o,r)})}),e.stop()})}}class uw extends nc{static get requires(){return[ow]}static get pluginName(){return"DualContentModelElementSupport"}static get isOfficialPlugin(){return!0}init(){this.editor.plugins.get(ow).on("register",(t,e)=>{const n=e,i=this.editor,o=i.model.schema,r=i.conversion;if(!n.paragraphLikeModel)return;if(o.isRegistered(n.model)||o.isRegistered(n.paragraphLikeModel))return;const s={model:n.paragraphLikeModel,view:n.view};o.register(n.model,n.modelSchema),o.register(s.model,{inheritAllFrom:"$block"}),r.for("upcast").elementToElement({view:n.view,model:(t,{writer:e})=>this._hasBlockContent(t)?e.createElement(n.model):e.createElement(s.model),converterPriority:Nt.low+.5}),r.for("downcast").elementToElement({view:n.view,model:n.model}),this._addAttributeConversion(n),r.for("downcast").elementToElement({view:s.view,model:s.model}),this._addAttributeConversion(s),t.stop()})}_hasBlockContent(t){const e=this.editor.editing.view,n=e.domConverter.blockElements;for(const i of e.createRangeIn(t).getItems())if(i.is("element")&&n.includes(i.name))return!0;return!1}_addAttributeConversion(t){const e=this.editor,n=e.conversion,i=e.plugins.get(ow);e.model.schema.extend(t.model,{allowAttributes:Kk(t.view)}),n.for("upcast").add(Xk(t,i)),n.for("downcast").add(tw(t))}}class hw extends nc{static get requires(){return[iw,Lp]}static get pluginName(){return"HeadingElementSupport"}static get isOfficialPlugin(){return!0}init(){const t=this.editor;if(!t.plugins.has("HeadingEditing"))return;const e=t.config.get("heading.options");this.registerHeadingElements(t,e)}registerHeadingElements(t,e){const n=t.plugins.get(iw),i=[];for(const t of e)"model"in t&&"view"in t&&(n.registerBlockElement({view:t.view,model:t.model}),i.push(t.model));n.extendBlockElement({model:"htmlHgroup",modelSchema:{allowChildren:i}}),n.extendBlockElement({model:"htmlSummary",modelSchema:{allowChildren:i}})}}function gw(t,e,n){const i=t.createRangeOn(e);for(const{item:t}of i.getWalker())if(t.is("element",n))return t}class mw extends nc{static get requires(){return[ow]}static get pluginName(){return"ImageElementSupport"}static get isOfficialPlugin(){return!0}init(){const t=this.editor;if(!t.plugins.has("ImageInlineEditing")&&!t.plugins.has("ImageBlockEditing"))return;const e=t.model.schema,n=t.conversion,i=t.plugins.get(ow);i.on("register:figure",()=>{n.for("upcast").add(function(t){return e=>{e.on("element:figure",(e,n,i)=>{const o=n.viewItem;if(!n.modelRange||!o.hasClass("image"))return;const r=t.processViewAttributes(o,i);r&&i.writer.setAttribute("htmlFigureAttributes",r,n.modelRange)},{priority:"low"})}}(i))}),i.on("register:img",(o,r)=>{"imageBlock"!==r.model&&"imageInline"!==r.model||(e.isRegistered("imageBlock")&&e.extend("imageBlock",{allowAttributes:["htmlImgAttributes","htmlFigureAttributes","htmlLinkAttributes"]}),e.isRegistered("imageInline")&&e.extend("imageInline",{allowAttributes:["htmlA","htmlImgAttributes"]}),n.for("upcast").add(function(t){return e=>{e.on("element:img",(e,n,i)=>{if(!n.modelRange)return;const o=n.viewItem,r=t.processViewAttributes(o,i);r&&i.writer.setAttribute("htmlImgAttributes",r,n.modelRange)},{priority:"low"})}}(i)),n.for("downcast").add(t=>{function e(e,n){t.on(`attribute:${n}:imageBlock`,(t,n,i)=>{if(!i.consumable.test(n.item,t.name))return;const{attributeOldValue:o,attributeNewValue:r}=n,s=i.mapper.toViewElement(n.item),a=gw(i.writer,s,e);a&&(Uk(i.writer,o,r,a),i.consumable.consume(n.item,t.name))},{priority:"low"}),"a"===e&&t.on("attribute:linkHref:imageBlock",(t,e,n)=>{if(!n.consumable.consume(e.item,"attribute:htmlLinkAttributes:imageBlock"))return;const i=n.mapper.toViewElement(e.item),o=gw(n.writer,i,"a");$k(n.writer,e.item.getAttribute("htmlLinkAttributes"),o)},{priority:"low"})}var n;n="htmlImgAttributes",t.on(`attribute:${n}:imageInline`,(t,e,n)=>{if(!n.consumable.consume(e.item,t.name))return;const{attributeOldValue:i,attributeNewValue:o}=e,r=n.mapper.toViewElement(e.item);Uk(n.writer,i,o,r)},{priority:"low"}),e("img","htmlImgAttributes"),e("figure","htmlFigureAttributes"),e("a","htmlLinkAttributes")}),t.plugins.has("LinkImage")&&n.for("upcast").add(function(t,e){const n=e.plugins.get("ImageUtils");return e=>{e.on("element:a",(e,i,o)=>{const r=i.viewItem;if(!n.findViewImgElement(r))return;const s=i.modelCursor.parent;if(!s.is("element","imageBlock"))return;const a=t.processViewAttributes(r,o);a&&o.writer.setAttribute("htmlLinkAttributes",a,s)},{priority:"low"})}}(i,t)),o.stop())})}}class pw extends nc{static get requires(){return[ow]}static get pluginName(){return"MediaEmbedElementSupport"}static get isOfficialPlugin(){return!0}init(){const t=this.editor;if(!t.plugins.has("MediaEmbed")||t.config.get("mediaEmbed.previewsInData"))return;const e=t.model.schema,n=t.conversion,i=this.editor.plugins.get(ow),o=this.editor.plugins.get(iw),r=t.config.get("mediaEmbed.elementName");o.registerBlockElement({model:"media",view:r}),i.on("register:figure",()=>{n.for("upcast").add(function(t){return e=>{e.on("element:figure",(e,n,i)=>{const o=n.viewItem;if(!n.modelRange||!o.hasClass("media"))return;const r=t.processViewAttributes(o,i);r&&i.writer.setAttribute("htmlFigureAttributes",r,n.modelRange)},{priority:"low"})}}(i))}),i.on(`register:${r}`,(t,o)=>{"media"===o.model&&(e.extend("media",{allowAttributes:[Kk(r),"htmlFigureAttributes"]}),n.for("upcast").add(function(t,e){const n=(n,i,o)=>{!function(e,n){const r=t.processViewAttributes(e,o);r&&o.writer.setAttribute(n,r,i.modelRange)}(i.viewItem,Kk(e))};return t=>{t.on(`element:${e}`,n,{priority:"low"})}}(i,r)),n.for("dataDowncast").add(function(t){return e=>{function n(t,n){e.on(`attribute:${n}:media`,(e,n,i)=>{if(!i.consumable.consume(n.item,e.name))return;const{attributeOldValue:o,attributeNewValue:r}=n,s=i.mapper.toViewElement(n.item),a=gw(i.writer,s,t);Uk(i.writer,o,r,a)})}n(t,Kk(t)),n("figure","htmlFigureAttributes")}}(r)),t.stop())})}}class fw extends nc{static get requires(){return[ow]}static get pluginName(){return"ScriptElementSupport"}static get isOfficialPlugin(){return!0}init(){const t=this.editor.plugins.get(ow);t.on("register:script",(e,n)=>{const i=this.editor,o=i.model.schema,r=i.conversion;o.register("htmlScript",n.modelSchema),o.extend("htmlScript",{allowAttributes:["htmlScriptAttributes","htmlContent"],isContent:!0}),i.data.registerRawContentMatcher({name:"script"}),r.for("upcast").elementToElement({view:"script",model:Gk(n)}),r.for("upcast").add(Xk(n,t)),r.for("downcast").elementToElement({model:"htmlScript",view:(t,{writer:e})=>Yk("script",t,e)}),r.for("downcast").add(tw(n)),e.stop()})}}const bw=["width","max-width","min-width","height","min-height","max-height"];class kw extends nc{static get requires(){return[ow]}static get pluginName(){return"TableElementSupport"}static get isOfficialPlugin(){return!0}init(){const t=this.editor;if(!t.plugins.has("TableEditing"))return;const e=t.model.schema,n=t.conversion,i=t.plugins.get(ow),o=t.plugins.get("TableUtils");i.on("register:figure",()=>{n.for("upcast").add(function(t){return e=>{e.on("element:figure",(e,n,i)=>{const o=n.viewItem;if(!n.modelRange||!o.hasClass("table"))return;const r=t.processViewAttributes(o,i);r&&i.writer.setAttribute("htmlFigureAttributes",r,n.modelRange)},{priority:"low"})}}(i))}),i.on("register:table",(r,s)=>{"table"===s.model&&(e.extend("table",{allowAttributes:["htmlTableAttributes","htmlFigureAttributes","htmlTheadAttributes","htmlTbodyAttributes"]}),n.for("upcast").add(function(t){return e=>{e.on("element:table",(e,n,i)=>{if(!n.modelRange)return;const o=n.viewItem;r(o,"htmlTableAttributes");for(const t of o.getChildren())t.is("element","thead")&&r(t,"htmlTheadAttributes"),t.is("element","tbody")&&r(t,"htmlTbodyAttributes");function r(e,o){const r=t.processViewAttributes(e,i);r&&i.writer.setAttribute(o,r,n.modelRange)}},{priority:"low"})}}(i)),n.for("downcast").add(t=>{function e(e,n){t.on(`attribute:${n}:table`,(t,i,o)=>{if(!o.consumable.test(i.item,t.name))return;const r=o.mapper.toViewElement(i.item),s=gw(o.writer,r,e);if(s)if(o.consumable.consume(i.item,t.name),"htmlTableAttributes"===n&&r!==s){const t=ww(i.attributeOldValue),e=ww(i.attributeNewValue);Uk(o.writer,t.tableAttributes,e.tableAttributes,s),Uk(o.writer,t.figureAttributes,e.figureAttributes,r)}else Uk(o.writer,i.attributeOldValue,i.attributeNewValue,s)})}e("table","htmlTableAttributes"),e("figure","htmlFigureAttributes"),e("thead","htmlTheadAttributes"),e("tbody","htmlTbodyAttributes")}),t.model.document.registerPostFixer(function(t,e){return n=>{const i=t.document.differ.getChanges();let o=!1;for(const t of i){if("attribute"!=t.type||"headingRows"!=t.attributeKey)continue;const i=t.range.start.nodeAfter,r=i.getAttribute("htmlTheadAttributes"),s=i.getAttribute("htmlTbodyAttributes");r&&!t.attributeNewValue?(n.removeAttribute("htmlTheadAttributes",i),o=!0):s&&t.attributeNewValue==e.getRows(i)&&(n.removeAttribute("htmlTbodyAttributes",i),o=!0)}return o}}(t.model,o)),r.stop())})}}function ww(t){const e={},n={...t};if(!t||!("styles"in t))return{figureAttributes:e,tableAttributes:n};n.styles={};for(const[i,o]of Object.entries(t.styles))bw.includes(i)?e.styles={...e.styles,[i]:o}:n.styles={...n.styles,[i]:o};return{figureAttributes:e,tableAttributes:n}}class _w extends nc{static get requires(){return[ow]}static get pluginName(){return"StyleElementSupport"}static get isOfficialPlugin(){return!0}init(){const t=this.editor.plugins.get(ow);t.on("register:style",(e,n)=>{const i=this.editor,o=i.model.schema,r=i.conversion;o.register("htmlStyle",n.modelSchema),o.extend("htmlStyle",{allowAttributes:["htmlStyleAttributes","htmlContent"],isContent:!0}),i.data.registerRawContentMatcher({name:"style"}),r.for("upcast").elementToElement({view:"style",model:Gk(n)}),r.for("upcast").add(Xk(n,t)),r.for("downcast").elementToElement({model:"htmlStyle",view:(t,{writer:e})=>Yk("style",t,e)}),r.for("downcast").add(tw(n)),e.stop()})}}class vw extends nc{static get requires(){return[ow]}static get pluginName(){return"ListElementSupport"}static get isOfficialPlugin(){return!0}init(){const t=this.editor;if(!t.plugins.has("ListEditing"))return;const e=t.model.schema,n=t.conversion,i=t.plugins.get(ow),o=t.plugins.get("ListEditing"),r=t.plugins.get("ListUtils"),s=["ul","ol","li"];o.registerDowncastStrategy({scope:"item",attributeName:"htmlLiAttributes",setAttributeOnDowncast:$k}),o.registerDowncastStrategy({scope:"list",attributeName:"htmlUlAttributes",setAttributeOnDowncast:$k}),o.registerDowncastStrategy({scope:"list",attributeName:"htmlOlAttributes",setAttributeOnDowncast:$k}),i.on("register",(t,o)=>{if(!s.includes(o.view))return;if(t.stop(),e.checkAttribute("$block","htmlLiAttributes"))return;const r=s.map(t=>Kk(t));e.extend("$listItem",{allowAttributes:r}),n.for("upcast").add(t=>{t.on("element:ul",yw("htmlUlAttributes",i),{priority:"low"}),t.on("element:ol",yw("htmlOlAttributes",i),{priority:"low"}),t.on("element:li",yw("htmlLiAttributes",i),{priority:"low"})})}),o.on("postFixer",(t,{listNodes:e,writer:n})=>{for(const{node:i,previousNodeInList:o}of e)if(o){if(o.getAttribute("listType")==i.getAttribute("listType")){const e=Cw(o.getAttribute("listType")),r=o.getAttribute(e);!si(i.getAttribute(e),r)&&n.model.schema.checkAttribute(i,e)&&(n.setAttribute(e,r,i),t.return=!0)}if(o.getAttribute("listItemId")==i.getAttribute("listItemId")){const e=o.getAttribute("htmlLiAttributes");!si(i.getAttribute("htmlLiAttributes"),e)&&n.model.schema.checkAttribute(i,"htmlLiAttributes")&&(n.setAttribute("htmlLiAttributes",e,i),t.return=!0)}}}),o.on("postFixer",(t,{listNodes:e,writer:n})=>{for(const{node:i}of e){const e=i.getAttribute("listType");!r.isNumberedListType(e)&&i.getAttribute("htmlOlAttributes")&&(n.removeAttribute("htmlOlAttributes",i),t.return=!0),r.isNumberedListType(e)&&i.getAttribute("htmlUlAttributes")&&(n.removeAttribute("htmlUlAttributes",i),t.return=!0)}})}afterInit(){const t=this.editor;if(!t.commands.get("indentList"))return;const e=t.commands.get("indentList");this.listenTo(e,"afterExecute",(e,n)=>{t.model.change(e=>{for(const i of n){const n=Cw(i.getAttribute("listType"));t.model.schema.checkAttribute(i,n)&&e.setAttribute(n,{},i)}})})}}function yw(t,e){return(n,i,o)=>{const r=i.viewItem;i.modelRange||Object.assign(i,o.convertChildren(i.viewItem,i.modelCursor));const s=e.processViewAttributes(r,o);for(const e of i.modelRange.getItems({shallow:!0}))e.hasAttribute("listItemId")&&(e.hasAttribute("htmlUlAttributes")||e.hasAttribute("htmlOlAttributes")||o.writer.model.schema.checkAttribute(e,t)&&o.writer.setAttribute(t,s||{},e))}}function Cw(t){return"numbered"===t||"customNumbered"==t?"htmlOlAttributes":"htmlUlAttributes"}class xw extends nc{static get requires(){return[ow]}static get pluginName(){return"HorizontalLineElementSupport"}static get isOfficialPlugin(){return!0}init(){const t=this.editor;if(!t.plugins.has("HorizontalLineEditing"))return;const e=t.model.schema,n=t.conversion,i=t.plugins.get(ow);i.on("register:hr",(t,o)=>{"horizontalLine"===o.model&&(e.extend("horizontalLine",{allowAttributes:["htmlHrAttributes"]}),n.for("upcast").add(Xk(o,i)),n.for("downcast").add(t=>{t.on("attribute:htmlHrAttributes:horizontalLine",(t,e,n)=>{if(!n.consumable.test(e.item,t.name))return;const{attributeOldValue:i,attributeNewValue:o}=e,r=n.mapper.toViewElement(e.item),s=gw(n.writer,r,"hr");s&&(Uk(n.writer,i,o,s),n.consumable.consume(e.item,t.name))},{priority:"low"})}),t.stop())})}}class Aw extends nc{static get requires(){return[ow,iw]}static get pluginName(){return"CustomElementSupport"}static get isOfficialPlugin(){return!0}init(){const t=this.editor.plugins.get(ow),e=this.editor.plugins.get(iw);t.on("register:$customElement",(n,i)=>{n.stop();const o=this.editor,r=o.model.schema,s=o.conversion,a=o.editing.view.domConverter.unsafeElements,l=o.data.htmlProcessor.domConverter.preElements;r.register(i.model,i.modelSchema),r.extend(i.model,{allowAttributes:["htmlElementName","htmlCustomElementAttributes","htmlContent"],isContent:!0}),o.data.htmlProcessor.domConverter.registerRawContentMatcher({name:"template"}),s.for("upcast").elementToElement({view:/.*/,model:(n,r)=>{if("$comment"==n.name)return null;if(!function(t){try{document.createElement(t)}catch{return!1}return!0}(n.name))return null;if(e.getDefinitionsForView(n.name).size)return null;a.includes(n.name)||a.push(n.name),l.includes(n.name)||l.push(n.name);const s=r.writer.createElement(i.model,{htmlElementName:n.name}),c=t.processViewAttributes(n,r);let d;if(c&&r.writer.setAttribute("htmlCustomElementAttributes",c,s),n.is("element","template")&&n.getCustomProperty("$rawContent"))d=n.getCustomProperty("$rawContent");else{const t=new ol(n.document).createDocumentFragment(n),e=o.data.htmlProcessor.domConverter.viewToDom(t),i=e.firstChild;for(;i.firstChild;)e.appendChild(i.firstChild);i.remove(),d=o.data.htmlProcessor.htmlWriter.getHtml(e)}r.writer.setAttribute("htmlContent",d,s);for(const{item:t}of o.editing.view.createRangeIn(n))r.consumable.consume(t,{name:!0});return s},converterPriority:"low"}),s.for("editingDowncast").elementToElement({model:{name:i.model,attributes:["htmlElementName","htmlCustomElementAttributes","htmlContent"]},view:(t,{writer:e})=>{const n=t.getAttribute("htmlElementName"),i=e.createRawElement(n);return t.hasAttribute("htmlCustomElementAttributes")&&$k(e,t.getAttribute("htmlCustomElementAttributes"),i),i}}),s.for("dataDowncast").elementToElement({model:{name:i.model,attributes:["htmlElementName","htmlCustomElementAttributes","htmlContent"]},view:(t,{writer:e})=>{const n=t.getAttribute("htmlElementName"),i=t.getAttribute("htmlContent"),o=e.createRawElement(n,null,(t,e)=>{e.setContentOf(t,i)});return t.hasAttribute("htmlCustomElementAttributes")&&$k(e,t.getAttribute("htmlCustomElementAttributes"),o),o}})})}}class Ew extends nc{static get pluginName(){return"GeneralHtmlSupport"}static get isOfficialPlugin(){return!0}static get requires(){return[ow,dw,uw,hw,mw,pw,fw,kw,_w,vw,xw,Aw]}init(){const t=this.editor,e=t.plugins.get(ow);e.loadAllowedEmptyElementsConfig(t.config.get("htmlSupport.allowEmpty")||[]),e.loadAllowedConfig(t.config.get("htmlSupport.allow")||[]),e.loadDisallowedConfig(t.config.get("htmlSupport.disallow")||[])}afterInit(){const t=this.editor.commands.get("removeFormat");t?.registerCustomAttribute(t=>t.startsWith("html")&&t.endsWith("Attributes"),qk)}getGhsAttributeNameForElement(t){const e=this.editor.plugins.get("DataSchema"),n=Array.from(e.getDefinitionsForView(t,!1)),i=n.find(t=>t.isInline&&!n[0].isObject);return i?i.model:Kk(t)}addModelHtmlClass(t,e,n){const i=this.editor.model,o=this.getGhsAttributeNameForElement(t);i.change(t=>{for(const r of Sw(i,n,o))Wk(t,r,o,"classes",t=>{for(const n of fn(e))t.add(n)})})}removeModelHtmlClass(t,e,n){const i=this.editor.model,o=this.getGhsAttributeNameForElement(t);i.change(t=>{for(const r of Sw(i,n,o))Wk(t,r,o,"classes",t=>{for(const n of fn(e))t.delete(n)})})}setModelHtmlAttributes(t,e,n){const i=this.editor.model,o=this.getGhsAttributeNameForElement(t);i.change(t=>{for(const r of Sw(i,n,o))Wk(t,r,o,"attributes",t=>{for(const[n,i]of Object.entries(e))t.set(n,i)})})}removeModelHtmlAttributes(t,e,n){const i=this.editor.model,o=this.getGhsAttributeNameForElement(t);i.change(t=>{for(const r of Sw(i,n,o))Wk(t,r,o,"attributes",t=>{for(const n of fn(e))t.delete(n)})})}setModelHtmlStyles(t,e,n){const i=this.editor.model,o=this.getGhsAttributeNameForElement(t);i.change(t=>{for(const r of Sw(i,n,o))Wk(t,r,o,"styles",t=>{for(const[n,i]of Object.entries(e))t.set(n,i)})})}removeModelHtmlStyles(t,e,n){const i=this.editor.model,o=this.getGhsAttributeNameForElement(t);i.change(t=>{for(const r of Sw(i,n,o))Wk(t,r,o,"styles",t=>{for(const n of fn(e))t.delete(n)})})}}function*Sw(t,e,n){if(e)if(!(Symbol.iterator in e)&&e.is("documentSelection")&&e.isCollapsed)t.schema.checkAttributeInSelection(e,n)&&(yield e);else for(const i of function(t,e,n){return!(Symbol.iterator in e)&&(e.is("node")||e.is("$text")||e.is("$textProxy"))?t.schema.checkAttribute(e,n)?[t.createRangeOn(e)]:[]:t.schema.getValidRanges(t.createSelection(e).getRanges(),n)}(t,e,n))yield*i.getItems({shallow:!0})}function Tw(t){return t}function Iw(t){return t.createContainerElement("figure",{class:"image"},[t.createEmptyElement("img"),t.createSlot("children")])}function Pw(t,e){const n=t.plugins.get("ImageUtils"),i=t.plugins.has("ImageInlineEditing")&&t.plugins.has("ImageBlockEditing");return t=>n.isInlineImageView(t)?i&&("block"==t.getStyle("display")||t.findAncestor(n.isBlockImageView)?"imageBlock":"imageInline")!==e?null:o(t):null;function o(t){const e={name:!0};return t.hasAttribute("src")&&(e.attributes=["src"]),e}}function Mw(t,e){const n=wn(e.getSelectedBlocks());return!n||t.isObject(n)||n.isEmpty&&"listItem"!=n.name?"imageBlock":"imageInline"}function Nw(t){return t&&t.endsWith("px")?parseInt(t):null}function Lw(t){const e=Nw(t.getStyle("width")),n=Nw(t.getStyle("height"));return!(!e||!n)}const Vw=/^(image|image-inline)$/;class zw extends nc{_domEmitter=new(_e());static get pluginName(){return"ImageUtils"}static get isOfficialPlugin(){return!0}isImage(t){return this.isInlineImage(t)||this.isBlockImage(t)}isInlineImageView(t){return!!t&&t.is("element","img")}isBlockImageView(t){return!!t&&t.is("element","figure")&&t.hasClass("image")}insertImage(t={},e=null,n=null,i={}){const o=this.editor,r=o.model,s=r.document.selection,a=Ow(o,e||s,n);t={...Object.fromEntries(s.getAttributes()),...t};for(const e in t)r.schema.checkAttribute(a,e)||delete t[e];return r.change(n=>{const{setImageSizes:o=!0}=i,s=n.createElement(a,t);return r.insertObject(s,e,null,{setSelection:"on",findOptimalPosition:e||"imageInline"==a?void 0:"auto"}),s.parent?(o&&this.setImageNaturalSizeAttributes(s),s):null})}setImageNaturalSizeAttributes(t){const e=t.getAttribute("src");e&&(t.getAttribute("width")||t.getAttribute("height")||this.editor.model.change(n=>{const i=new gt.window.Image;this._domEmitter.listenTo(i,"load",()=>{t.getAttribute("width")||t.getAttribute("height")||this.editor.model.enqueueChange(n.batch,e=>{e.setAttribute("width",i.naturalWidth,t),e.setAttribute("height",i.naturalHeight,t)}),this._domEmitter.stopListening(i,"load")}),i.src=e}))}getClosestSelectedImageWidget(t){const e=t.getFirstPosition();if(!e)return null;const n=t.getSelectedElement();if(n&&this.isImageWidget(n))return n;let i=e.parent;for(;i;){if(i.is("element")&&this.isImageWidget(i))return i;i=i.parent}return null}getClosestSelectedImageElement(t){const e=t.getSelectedElement();return this.isImage(e)?e:t.getFirstPosition().findAncestor("imageBlock")}getImageWidgetFromImageView(t){return t.findAncestor({classes:Vw})}isImageAllowed(){const t=this.editor.model.document.selection;return function(t,e){if("imageBlock"==Ow(t,e,null)){const n=function(t,e){const n=nf(t,e).start.parent;return n.isEmpty&&!n.is("element","$root")?n.parent:n}(e,t.model);if(t.model.schema.checkChild(n,"imageBlock"))return!0}else if(t.model.schema.checkChild(e.focus,"imageInline"))return!0;return!1}(this.editor,t)&&function(t){return[...t.focus.getAncestors()].every(t=>!t.is("element","imageBlock"))}(t)}toImageWidget(t,e,n){return e.setCustomProperty("image",!0,t),Jp(t,e,{label:()=>{const e=this.findViewImgElement(t).getAttribute("alt");return e?`${e} ${n}`:n}})}isImageWidget(t){return!!t.getCustomProperty("image")&&Yp(t)}isBlockImage(t){return!!t&&t.is("element","imageBlock")}isInlineImage(t){return!!t&&t.is("element","imageInline")}findViewImgElement(t){if(this.isInlineImageView(t))return t;const e=this.editor.editing.view;for(const{item:n}of e.createRangeIn(t))if(this.isInlineImageView(n))return n}destroy(){return this._domEmitter.stopListening(),super.destroy()}}function Ow(t,e,n){const i=t.model.schema,o=t.config.get("image.insert.type");return t.plugins.has("ImageBlockEditing")?t.plugins.has("ImageInlineEditing")?n||("inline"===o?"imageInline":"auto"!==o?"imageBlock":e.is("selection")?Mw(i,e):i.checkChild(e,"imageInline")?"imageInline":"imageBlock"):"imageBlock":"imageInline"}const Rw=new RegExp(String(/^(http(s)?:\/\/)?[\w-]+\.[\w.~:/[\]@!$&'()*+,;=%-]+/.source+/\.(jpg|jpeg|png|gif|ico|webp|JPG|JPEG|PNG|GIF|ICO|WEBP)/.source+/(\?[\w.~:/[\]@!$&'()*+,;=%-]*)?/.source+/(#[\w.~:/[\]@!$&'()*+,;=%-]*)?$/.source));class Dw extends nc{static get requires(){return[Xf,zw,Ob,Im]}static get pluginName(){return"AutoImage"}static get isOfficialPlugin(){return!0}_timeoutId;_positionToInsert;constructor(t){super(t),this._timeoutId=null,this._positionToInsert=null}init(){const t=this.editor,e=t.model.document,n=t.plugins.get("ClipboardPipeline");this.listenTo(n,"inputTransformation",()=>{const t=e.selection.getFirstRange(),n=ma.fromPosition(t.start);n.stickiness="toPrevious";const i=ma.fromPosition(t.end);i.stickiness="toNext",e.once("change:data",()=>{this._embedImageBetweenPositions(n,i),n.detach(),i.detach()},{priority:"high"})}),t.commands.get("undo").on("execute",()=>{this._timeoutId&&(gt.window.clearTimeout(this._timeoutId),this._positionToInsert.detach(),this._timeoutId=null,this._positionToInsert=null)},{priority:"high"})}_embedImageBetweenPositions(t,e){const n=this.editor,i=new Lr(t,e),o=i.getWalker({ignoreElementEnd:!0}),r=Object.fromEntries(n.model.document.selection.getAttributes()),s=this.editor.plugins.get("ImageUtils");let a="";for(const t of o)t.item.is("$textProxy")&&(a+=t.item.data);a=a.trim(),a.match(Rw)?(this._positionToInsert=ma.fromPosition(t),this._timeoutId=setTimeout(()=>{n.commands.get("insertImage").isEnabled?(n.model.change(t=>{let e;this._timeoutId=null,t.remove(i),i.detach(),"$graveyard"!==this._positionToInsert.root.rootName&&(e=this._positionToInsert.toPosition()),s.insertImage({...r,src:a},e),this._positionToInsert.detach(),this._positionToInsert=null}),n.plugins.get("Delete").requestUndoOnBackspace()):i.detach()},100)):i.detach()}}class Bw extends oc{refresh(){const t=this.editor.plugins.get("ImageUtils").getClosestSelectedImageElement(this.editor.model.document.selection);this.isEnabled=!!t,this.isEnabled&&t.hasAttribute("alt")?this.value=t.getAttribute("alt"):this.value=!1}execute(t){const e=this.editor,n=e.plugins.get("ImageUtils"),i=e.model,o=n.getClosestSelectedImageElement(i.document.selection);i.change(e=>{e.setAttribute("alt",t.newValue,o)})}}class Fw extends nc{static get requires(){return[zw]}static get pluginName(){return"ImageTextAlternativeEditing"}static get isOfficialPlugin(){return!0}init(){this.editor.commands.add("imageTextAlternative",new Bw(this.editor))}}class jw extends ku{focusTracker;keystrokes;labeledInput;backButtonView;saveButtonView;children;_focusables;_focusCycler;constructor(t){super(t),this.focusTracker=new _n,this.keystrokes=new xn,this.backButtonView=this._createBackButton(),this.saveButtonView=this._createSaveButton(),this.labeledInput=this._createLabeledInputView(),this.children=this.createCollection([this._createHeaderView()]),this.children.add(new Dg(t,{children:[this.labeledInput,this.saveButtonView],class:["ck-form__row_with-submit","ck-form__row_large-top-padding"]})),this._focusables=new Qd,this.keystrokes.set("Esc",(t,e)=>{this.fire("cancel"),e()}),this._focusCycler=new Ou({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.setTemplate({tag:"form",attributes:{class:["ck","ck-form","ck-text-alternative-form","ck-responsive-form"],tabindex:"-1"},children:this.children})}render(){super.render(),Eu({view:this}),[this.backButtonView,this.labeledInput,this.saveButtonView].forEach(t=>{this._focusables.add(t),this.focusTracker.add(t.element)}),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}_createBackButton(){const t=this.locale.t,e=new Lu(this.locale);return e.set({class:"ck-button-back",label:t("Back"),icon:ed,tooltip:!0}),e.delegate("execute").to(this,"cancel"),e}_createSaveButton(){const t=this.locale.t,e=new Lu(this.locale);return e.set({label:t("Save"),withText:!0,type:"submit",class:"ck-button-action ck-button-bold"}),e}_createHeaderView(){const t=this.locale.t,e=new zu(this.locale,{label:t("Text Alternative")});return e.children.add(this.backButtonView,0),e}_createLabeledInputView(){const t=this.locale.t,e=new kh(this.locale,Kh);return e.label=t("Text alternative"),e.class="ck-labeled-field-view_full-width",e}}function Hw(t){const e=t.editing.view,n=Xu.defaultPositions,i=t.plugins.get("ImageUtils");return{target:e.domConverter.mapViewToDom(i.getClosestSelectedImageWidget(e.document.selection)),positions:[n.northArrowSouth,n.northArrowSouthWest,n.northArrowSouthEast,n.southArrowNorth,n.southArrowNorthWest,n.southArrowNorthEast,n.viewportStickyNorth]}}class Uw extends nc{_balloon;_form;static get requires(){return[Hg]}static get pluginName(){return"ImageTextAlternativeUI"}static get isOfficialPlugin(){return!0}init(){this._createButton()}destroy(){super.destroy(),this._form&&this._form.destroy()}_createButton(){const t=this.editor,e=t.t;t.ui.componentFactory.add("imageTextAlternative",n=>{const i=t.commands.get("imageTextAlternative"),o=new Lu(n);return o.set({label:e("Change image text alternative"),icon:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M3.035 1C2.446 1 2 1.54 2 2.098V10.5h1.5v-8h13v8H18V2.098C18 1.539 17.48 1 16.9 1zm10.453 2.61a1.89 1.89 0 0 0-1.442.736 1.89 1.89 0 0 0 1.011 2.976 1.9 1.9 0 0 0 2.253-1.114 1.887 1.887 0 0 0-1.822-2.598M7.463 8.163a.6.6 0 0 0-.432.154L5.071 10.5h5.119L7.88 8.348a.63.63 0 0 0-.417-.185m6.236 1.059a.62.62 0 0 0-.42.164L12.07 10.5h2.969l-.92-1.113a.62.62 0 0 0-.42-.165M.91 11.5a.91.91 0 0 0-.91.912v6.877c0 .505.405.91.91.91h18.178a.91.91 0 0 0 .912-.91v-6.877a.91.91 0 0 0-.912-.912zM3.668 13h1.947l2.135 5.7H5.898l-.28-.946H3.601l-.278.945H1.516zm4.947 0h1.801v4.3h2.7v1.4h-4.5zm4.5 0h5.4v1.4h-1.798v4.3h-1.701v-4.3h-1.9zm-8.517 1.457-.614 2.059h1.262z"/></svg>',tooltip:!0}),o.bind("isEnabled").to(i,"isEnabled"),o.bind("isOn").to(i,"value",t=>!!t),this.listenTo(o,"execute",()=>{this._showForm()}),o})}_createForm(){const t=this.editor,e=t.editing.view.document,n=t.plugins.get("ImageUtils");this._balloon=this.editor.plugins.get("ContextualBalloon"),this._form=new(xu(jw))(t.locale),this._form.render(),this.listenTo(this._form,"submit",()=>{t.execute("imageTextAlternative",{newValue:this._form.labeledInput.fieldView.element.value}),this._hideForm(!0)}),this.listenTo(this._form,"cancel",()=>{this._hideForm(!0)}),this.listenTo(t.ui,"update",()=>{n.getClosestSelectedImageWidget(e.selection)?this._isVisible&&function(t){const e=t.plugins.get("ContextualBalloon");if(t.plugins.get("ImageUtils").getClosestSelectedImageWidget(t.editing.view.document.selection)){const n=Hw(t);e.updatePosition(n)}}(t):this._hideForm(!0)}),Cu({emitter:this._form,activator:()=>this._isVisible,contextElements:()=>[this._balloon.view.element],callback:()=>this._hideForm()})}_showForm(){if(this._isVisible)return;this._form||this._createForm();const t=this.editor,e=t.commands.get("imageTextAlternative"),n=this._form.labeledInput;this._form.disableCssTransitions(),this._isInBalloon||this._balloon.add({view:this._form,position:Hw(t)}),n.fieldView.value=n.fieldView.element.value=e.value||"",this._form.labeledInput.fieldView.select(),this._form.enableCssTransitions()}_hideForm(t=!1){this._isInBalloon&&(this._form.focusTracker.isFocused&&this._form.saveButtonView.focus(),this._balloon.remove(this._form),t&&this.editor.editing.view.focus())}get _isVisible(){return!!this._balloon&&this._balloon.visibleView===this._form}get _isInBalloon(){return!!this._balloon&&this._balloon.hasView(this._form)}}class $w extends nc{static get requires(){return[Fw,Uw]}static get pluginName(){return"ImageTextAlternative"}static get isOfficialPlugin(){return!0}}function Ww(t,e){const n=(e,n,i)=>{if(!i.consumable.consume(n.item,e.name))return;const o=i.writer,r=i.mapper.toViewElement(n.item),s=t.findViewImgElement(r);null===n.attributeNewValue?(o.removeAttribute("srcset",s),o.removeAttribute("sizes",s)):n.attributeNewValue&&(o.setAttribute("srcset",n.attributeNewValue,s),o.setAttribute("sizes","100vw",s))};return t=>{t.on(`attribute:srcset:${e}`,n)}}function qw(t,e,n){const i=(e,n,i)=>{if(!i.consumable.consume(n.item,e.name))return;const o=i.writer,r=i.mapper.toViewElement(n.item),s=t.findViewImgElement(r);o.setAttribute(n.attributeKey,n.attributeNewValue||"",s)};return t=>{t.on(`attribute:${n}:${e}`,i)}}class Kw extends Wo{observe(t){this.listenTo(t,"load",(t,e)=>{const n=e.target;this.checkShouldIgnoreEventFromTarget(n)||"IMG"==n.tagName&&this._fireEvents(e)},{useCapture:!0})}stopObserving(t){this.stopListening(t)}_fireEvents(t){this.isEnabled&&(this.document.fire("layoutChanged"),this.document.fire("imageLoaded",t))}}class Gw extends oc{constructor(t){super(t);const e=t.config.get("image.insert.type");t.plugins.has("ImageBlockEditing")||"block"===e&&zt("image-block-plugin-required"),t.plugins.has("ImageInlineEditing")||"inline"===e&&zt("image-inline-plugin-required")}refresh(){const t=this.editor.plugins.get("ImageUtils");this.isEnabled=t.isImageAllowed()}execute(t){const e=fn(t.source),n=this.editor.model.document.selection,i=this.editor.plugins.get("ImageUtils"),o=Object.fromEntries(n.getAttributes());e.forEach((e,r)=>{const s=n.getSelectedElement();if("string"==typeof e&&(e={src:e}),r&&s&&i.isImage(s)){const n=this.editor.model.createPositionAfter(s);i.insertImage({...e,...o},n,t.imageType)}else t.breakBlock?i.insertImage({...e,...o},n.getFirstPosition(),t.imageType):i.insertImage({...e,...o},null,t.imageType)})}}class Qw extends oc{constructor(t){super(t),this.decorate("cleanupImage")}refresh(){const t=this.editor.plugins.get("ImageUtils"),e=this.editor.model.document.selection.getSelectedElement();this.isEnabled=t.isImage(e),this.value=this.isEnabled?e.getAttribute("src"):null}execute(t){const e=this.editor.model.document.selection.getSelectedElement(),n=this.editor.plugins.get("ImageUtils");this.editor.model.change(i=>{i.setAttribute("src",t.source,e),this.cleanupImage(i,e),n.setImageNaturalSizeAttributes(e)})}cleanupImage(t,e){t.removeAttribute("srcset",e),t.removeAttribute("sizes",e),t.removeAttribute("sources",e),t.removeAttribute("width",e),t.removeAttribute("height",e),t.removeAttribute("alt",e)}}class Yw extends nc{static get requires(){return[zw]}static get pluginName(){return"ImageEditing"}static get isOfficialPlugin(){return!0}init(){const t=this.editor,e=t.conversion;t.editing.view.addObserver(Kw),e.for("upcast").attributeToAttribute({view:{name:"img",key:"alt"},model:"alt"}).attributeToAttribute({view:{name:"img",key:"srcset"},model:"srcset"});const n=new Gw(t),i=new Qw(t);t.commands.add("insertImage",n),t.commands.add("replaceImageSource",i),t.commands.add("imageInsert",n)}}class Jw extends nc{static get requires(){return[zw]}static get pluginName(){return"ImageSizeAttributes"}static get isOfficialPlugin(){return!0}afterInit(){this._registerSchema(),this._registerConverters("imageBlock"),this._registerConverters("imageInline")}_registerSchema(){const t=this.editor.model.schema;this.editor.plugins.has("ImageBlockEditing")&&t.extend("imageBlock",{allowAttributes:["width","height"]}),this.editor.plugins.has("ImageInlineEditing")&&t.extend("imageInline",{allowAttributes:["width","height"]})}_registerConverters(t){const e=this.editor,n=e.plugins.get("ImageUtils"),i="imageBlock"===t?"figure":"img";function o(e,i,o,r,s=!1){e.on(`attribute:${i}:${t}`,(e,i,a)=>{if(!a.consumable.consume(i.item,e.name))return;const l=a.writer,c=a.mapper.toViewElement(i.item),d=n.findViewImgElement(c);null!==i.attributeNewValue?l.setAttribute(o,i.attributeNewValue,d):l.removeAttribute(o,d);const u=i.item.getAttribute("width"),h=i.item.getAttribute("height"),g=u&&h;if(g&&s&&l.setAttribute("loading","lazy",d),i.item.hasAttribute("sources"))return;const m=i.item.hasAttribute("resizedWidth");("imageInline"!==t||m||r)&&g&&l.setStyle("aspect-ratio",`${u}/${h}`,d)})}e.conversion.for("upcast").attributeToAttribute({view:{name:i,styles:{width:/.+/}},model:{key:"width",value:t=>Lw(t)?Nw(t.getStyle("width")):null}}).attributeToAttribute({view:{name:i,key:"width"},model:"width"}).attributeToAttribute({view:{name:i,styles:{height:/.+/}},model:{key:"height",value:t=>Lw(t)?Nw(t.getStyle("height")):null}}).attributeToAttribute({view:{name:i,key:"height"},model:"height"}),e.conversion.for("editingDowncast").add(t=>{o(t,"width","width",!0,!0),o(t,"height","height",!0,!0)}),e.conversion.for("dataDowncast").add(t=>{o(t,"width","width",!1),o(t,"height","height",!1)}),e.conversion.for("upcast").add(t=>{t.on("element:img",(t,e,n)=>{const i=e.viewItem.getAttribute("width"),o=e.viewItem.getAttribute("height");i&&o&&n.consumable.consume(e.viewItem,{styles:["aspect-ratio"]})})})}}class Zw extends oc{_modelElementName;constructor(t,e){super(t),this._modelElementName=e}refresh(){const t=this.editor.plugins.get("ImageUtils"),e=t.getClosestSelectedImageElement(this.editor.model.document.selection);"imageBlock"===this._modelElementName?this.isEnabled=t.isInlineImage(e):this.isEnabled=t.isBlockImage(e)}execute(t={}){const e=this.editor,n=this.editor.model,i=e.plugins.get("ImageUtils"),o=i.getClosestSelectedImageElement(n.document.selection),r=Object.fromEntries(o.getAttributes());return r.src||r.uploadId?n.change(e=>{const{setImageSizes:s=!0}=t,a=Array.from(n.markers).filter(t=>t.getRange().containsItem(o)),l=i.insertImage(r,n.createSelection(o,"on"),this._modelElementName,{setImageSizes:s});if(!l)return null;const c=e.createRangeOn(l);for(const t of a){const n=t.getRange(),i="$graveyard"!=n.root.rootName?n.getJoined(c,!0):c;e.updateMarker(t,{range:i})}return{oldElement:o,newElement:l}}):null}}class Xw extends nc{static get requires(){return[zw]}static get pluginName(){return"ImagePlaceholder"}static get isOfficialPlugin(){return!0}afterInit(){this._setupSchema(),this._setupConversion(),this._setupLoadListener()}_setupSchema(){const t=this.editor.model.schema;t.isRegistered("imageBlock")&&t.extend("imageBlock",{allowAttributes:["placeholder"]}),t.isRegistered("imageInline")&&t.extend("imageInline",{allowAttributes:["placeholder"]})}_setupConversion(){const t=this.editor,e=t.conversion,n=t.plugins.get("ImageUtils");e.for("editingDowncast").add(t=>{t.on("attribute:placeholder",(t,e,i)=>{if(!i.consumable.test(e.item,t.name))return;if(!e.item.is("element","imageBlock")&&!e.item.is("element","imageInline"))return;i.consumable.consume(e.item,t.name);const o=i.writer,r=i.mapper.toViewElement(e.item),s=n.findViewImgElement(r);e.attributeNewValue?(o.addClass("image_placeholder",s),o.setStyle("background-image",`url(${e.attributeNewValue})`,s),o.setCustomProperty("editingPipeline:doNotReuseOnce",!0,s)):(o.removeClass("image_placeholder",s),o.removeStyle("background-image",s))})})}_setupLoadListener(){const t=this.editor,e=t.model,n=t.editing,i=n.view,o=t.plugins.get("ImageUtils");i.addObserver(Kw),this.listenTo(i.document,"imageLoaded",(t,r)=>{const s=i.domConverter.mapDomToView(r.target);if(!s)return;const a=o.getImageWidgetFromImageView(s);if(!a)return;const l=n.mapper.toModelElement(a);l&&l.hasAttribute("placeholder")&&e.enqueueChange({isUndoable:!1},t=>{t.removeAttribute("placeholder",l)})})}}class t_ extends nc{static get requires(){return[Yw,Jw,zw,Xw,Df]}static get pluginName(){return"ImageBlockEditing"}static get isOfficialPlugin(){return!0}init(){const t=this.editor;t.model.schema.register("imageBlock",{inheritAllFrom:"$blockObject",allowAttributes:["alt","src","srcset"]}),this._setupConversion(),t.plugins.has("ImageInlineEditing")&&(t.commands.add("imageTypeBlock",new Zw(this.editor,"imageBlock")),this._setupClipboardIntegration())}_setupConversion(){const t=this.editor,e=t.t,n=t.conversion,i=t.plugins.get("ImageUtils");n.for("dataDowncast").elementToStructure({model:"imageBlock",view:(t,{writer:e})=>Iw(e)}),n.for("editingDowncast").elementToStructure({model:"imageBlock",view:(t,{writer:n})=>i.toImageWidget(Iw(n),n,e("image widget"))}),n.for("downcast").add(qw(i,"imageBlock","src")).add(qw(i,"imageBlock","alt")).add(Ww(i,"imageBlock")),n.for("upcast").elementToElement({view:Pw(t,"imageBlock"),model:(t,{writer:e})=>e.createElement("imageBlock",t.hasAttribute("src")?{src:t.getAttribute("src")}:void 0)}).add(function(t){const e=(e,n,i)=>{if(!i.consumable.test(n.viewItem,{name:!0,classes:"image"}))return;const o=t.findViewImgElement(n.viewItem);if(!o||!i.consumable.test(o,{name:!0}))return;i.consumable.consume(n.viewItem,{name:!0,classes:"image"});const r=wn(i.convertItem(o,n.modelCursor).modelRange.getItems());r?(i.convertChildren(n.viewItem,r),i.updateConversionResult(r,n)):i.consumable.revert(n.viewItem,{name:!0,classes:"image"})};return t=>{t.on("element:figure",e)}}(i))}_setupClipboardIntegration(){const t=this.editor,e=t.model,n=t.editing.view,i=t.plugins.get("ImageUtils"),o=t.plugins.get("ClipboardPipeline");this.listenTo(o,"inputTransformation",(o,r)=>{const s=Array.from(r.content.getChildren());let a;if(!s.every(i.isInlineImageView))return;a=r.targetRanges?t.editing.mapper.toModelRange(r.targetRanges[0]):e.document.selection.getFirstRange();const l=e.createSelection(a);if("imageBlock"===Mw(e.schema,l)){const t=new ol(n.document),e=s.map(e=>t.createElement("figure",{class:"image"},e));r.content=t.createDocumentFragment(e)}}),this.listenTo(o,"contentInsertion",(t,n)=>{"paste"===n.method&&e.change(t=>{const e=t.createRangeIn(n.content);for(const t of e.getItems())t.is("element","imageBlock")&&i.setImageNaturalSizeAttributes(t)})})}}class e_ extends ku{focusTracker;keystrokes;_focusables;_focusCycler;children;constructor(t,e=[]){super(t),this.focusTracker=new _n,this.keystrokes=new xn,this._focusables=new Qd,this.children=this.createCollection(),this._focusCycler=new Ou({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}});for(const t of e)this.children.add(t),this._focusables.add(t),t instanceof dh&&this._focusables.addMany(t.children);this.setTemplate({tag:"form",attributes:{class:["ck","ck-image-insert-form"],tabindex:-1},children:this.children})}render(){super.render(),Eu({view:this});for(const t of this._focusables)this.focusTracker.add(t.element);this.keystrokes.listenTo(this.element);const t=t=>t.stopPropagation();this.keystrokes.set("arrowright",t),this.keystrokes.set("arrowleft",t),this.keystrokes.set("arrowup",t),this.keystrokes.set("arrowdown",t)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){this._focusCycler.focusFirst()}}class n_ extends nc{static get pluginName(){return"ImageInsertUI"}static get isOfficialPlugin(){return!0}static get requires(){return[zw]}dropdownView;_integrations=new Map;constructor(t){super(t),t.config.define("image.insert.integrations",["upload","assetManager","url"])}init(){const t=this.editor,e=t.model.document.selection,n=t.plugins.get("ImageUtils");this.set("isImageSelected",!1),this.listenTo(t.model.document,"change",()=>{this.isImageSelected=n.isImage(e.getSelectedElement())});const i=t=>this._createToolbarComponent(t);t.ui.componentFactory.add("insertImage",i),t.ui.componentFactory.add("imageInsert",i),t.ui.componentFactory.add("menuBar:insertImage",t=>this._createMenuBarComponent(t))}registerIntegration({name:t,observable:e,buttonViewCreator:n,formViewCreator:i,menuBarButtonViewCreator:o,requiresForm:r=!1,override:s=!1}){this._integrations.has(t)&&!s&&zt("image-insert-integration-exists",{name:t}),this._integrations.set(t,{observable:e,buttonViewCreator:n,menuBarButtonViewCreator:o,formViewCreator:i,requiresForm:r})}_createToolbarComponent(t){const e=this.editor,n=t.t,i=this._prepareIntegrations();if(!i.length)return null;let o;const r=i[0];if(1==i.length){if(!r.requiresForm)return r.buttonViewCreator(!0);o=r.buttonViewCreator(!0)}else{const e=r.buttonViewCreator(!1);o=new Dh(t,e),o.tooltip=!0,o.bind("label").to(this,"isImageSelected",t=>n(t?"Replace image":"Insert image"))}const s=this.dropdownView=Bh(t,o),a=i.map(({observable:t})=>"function"==typeof t?t():t);return s.bind("isEnabled").toMany(a,"isEnabled",(...t)=>t.some(t=>t)),s.once("change:isOpen",()=>{const t=i.flatMap(({formViewCreator:t})=>t(1==i.length)),n=new e_(e.locale,t);s.panelView.children.add(n)}),s}_createMenuBarComponent(t){const e=t.t,n=this._prepareIntegrations();if(!n.length)return null;const i=n.flatMap(({menuBarButtonViewCreator:t})=>t(1==n.length)),o=new Jg(t),r=new Zg(t);o.panelView.children.add(r),o.buttonView.set({icon:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M6.66 9.118a.693.693 0 0 1 .956.032l3.65 3.411 2.422-2.238a.695.695 0 0 1 .945 0L17.5 13.6V2.5h-15v11.1zM17.8 1c.652 0 1.2.47 1.2 1.1v14.362c0 .64-.532 1.038-1.184 1.038H2.184C1.532 17.5 1 17.103 1 16.462V2.1C1 1.47 1.537 1 2.2 1zm-5.655 6a2.13 2.13 0 0 1 .157-2.364A2.133 2.133 0 1 1 12.145 7"/></svg>',label:e("Image")});for(const e of i){const n=new pg(t,o);n.children.add(e),r.items.add(n),e.delegate("execute").to(o)}return o}_prepareIntegrations(){const t=this.editor.config.get("image.insert.integrations"),e=[];if(!t.length)return zt("image-insert-integrations-not-specified"),e;for(const n of t)this._integrations.has(n)?e.push(this._integrations.get(n)):["upload","assetManager","url"].includes(n)||zt("image-insert-unknown-integration",{item:n});return e.length||zt("image-insert-integrations-not-registered"),e}}class i_ extends nc{static get requires(){return[t_,pf,$w,n_]}static get pluginName(){return"ImageBlock"}static get isOfficialPlugin(){return!0}}class o_ extends nc{static get requires(){return[Yw,Jw,zw,Xw,Df]}static get pluginName(){return"ImageInlineEditing"}static get isOfficialPlugin(){return!0}init(){const t=this.editor;t.model.schema.register("imageInline",{inheritAllFrom:"$inlineObject",allowAttributes:["alt","src","srcset"],disallowIn:["caption"]}),this._setupConversion(),t.plugins.has("ImageBlockEditing")&&(t.commands.add("imageTypeInline",new Zw(this.editor,"imageInline")),this._setupClipboardIntegration())}_setupConversion(){const t=this.editor,e=t.t,n=t.conversion,i=t.plugins.get("ImageUtils");n.for("dataDowncast").elementToElement({model:"imageInline",view:(t,{writer:e})=>e.createEmptyElement("img")}),n.for("editingDowncast").elementToStructure({model:"imageInline",view:(t,{writer:n})=>i.toImageWidget(function(t){return t.createContainerElement("span",{class:"image-inline"},t.createEmptyElement("img"))}(n),n,e("image widget"))}),n.for("downcast").add(qw(i,"imageInline","src")).add(qw(i,"imageInline","alt")).add(Ww(i,"imageInline")),n.for("upcast").elementToElement({view:Pw(t,"imageInline"),model:(t,{writer:e})=>e.createElement("imageInline",t.hasAttribute("src")?{src:t.getAttribute("src")}:void 0)})}_setupClipboardIntegration(){const t=this.editor,e=t.model,n=t.editing.view,i=t.plugins.get("ImageUtils"),o=t.plugins.get("ClipboardPipeline");this.listenTo(o,"inputTransformation",(o,r)=>{const s=Array.from(r.content.getChildren());let a;if(!s.every(i.isBlockImageView))return;a=r.targetRanges?t.editing.mapper.toModelRange(r.targetRanges[0]):e.document.selection.getFirstRange();const l=e.createSelection(a);if("imageInline"===Mw(e.schema,l)){const t=new ol(n.document),e=s.map(e=>1===e.childCount?(Array.from(e.getAttributes()).forEach(n=>t.setAttribute(...n,i.findViewImgElement(e))),e.getChild(0)):e);r.content=t.createDocumentFragment(e)}}),this.listenTo(o,"contentInsertion",(t,n)=>{"paste"===n.method&&e.change(t=>{const e=t.createRangeIn(n.content);for(const t of e.getItems())t.is("element","imageInline")&&i.setImageNaturalSizeAttributes(t)})})}}class r_ extends nc{static get requires(){return[o_,pf,$w,n_]}static get pluginName(){return"ImageInline"}static get isOfficialPlugin(){return!0}}class s_ extends nc{static get pluginName(){return"ImageCaptionUtils"}static get isOfficialPlugin(){return!0}static get requires(){return[zw]}getCaptionFromImageModelElement(t){for(const e of t.getChildren())if(e&&e.is("element","caption"))return e;return null}getCaptionFromModelSelection(t){const e=this.editor.plugins.get("ImageUtils"),n=t.getFirstPosition().findAncestor("caption");return n&&e.isBlockImage(n.parent)?n:null}matchImageCaptionViewElement(t){const e=this.editor.plugins.get("ImageUtils");return"figcaption"==t.name&&e.isBlockImageView(t.parent)?{name:!0}:null}}class a_ extends oc{refresh(){const t=this.editor,e=t.plugins.get("ImageCaptionUtils"),n=t.plugins.get("ImageUtils");if(!t.plugins.has(t_))return this.isEnabled=!1,void(this.value=!1);const i=t.model.document.selection,o=i.getSelectedElement();if(!o){const t=e.getCaptionFromModelSelection(i);return this.isEnabled=!!t,void(this.value=!!t)}this.isEnabled=n.isImage(o),this.isEnabled?this.value=!!e.getCaptionFromImageModelElement(o):this.value=!1}execute(t={}){const{focusCaptionOnShow:e}=t;this.editor.model.change(t=>{this.value?this._hideImageCaption(t):this._showImageCaption(t,e)})}_showImageCaption(t,e){const n=this.editor.model.document.selection,i=this.editor.plugins.get("ImageCaptionEditing"),o=this.editor.plugins.get("ImageUtils");let r=n.getSelectedElement();const s=i._getSavedCaption(r);o.isInlineImage(r)&&(this.editor.execute("imageTypeBlock"),r=n.getSelectedElement());const a=s||t.createElement("caption");t.append(a,r),e&&t.setSelection(a,"in")}_hideImageCaption(t){const e=this.editor,n=e.model.document.selection,i=e.plugins.get("ImageCaptionEditing"),o=e.plugins.get("ImageCaptionUtils");let r,s=n.getSelectedElement();s?r=o.getCaptionFromImageModelElement(s):(r=o.getCaptionFromModelSelection(n),s=r.parent),i._saveCaption(s,r),t.setSelection(s,"on"),t.remove(r)}}class l_ extends nc{static get requires(){return[zw,s_]}static get pluginName(){return"ImageCaptionEditing"}static get isOfficialPlugin(){return!0}_savedCaptionsMap;constructor(t){super(t),this._savedCaptionsMap=new WeakMap}init(){const t=this.editor,e=t.model.schema;e.isRegistered("caption")?e.extend("caption",{allowIn:"imageBlock"}):e.register("caption",{allowIn:"imageBlock",allowContentOf:"$block",isLimit:!0}),t.commands.add("toggleImageCaption",new a_(this.editor)),this._setupConversion(),this._setupImageTypeCommandsIntegration(),this._registerCaptionReconversion()}_setupConversion(){const t=this.editor,e=t.editing.view,n=t.plugins.get("ImageUtils"),i=t.plugins.get("ImageCaptionUtils"),o=t.t;t.conversion.for("upcast").elementToElement({view:t=>i.matchImageCaptionViewElement(t),model:"caption"}),t.conversion.for("dataDowncast").elementToElement({model:"caption",view:(t,{writer:e})=>n.isBlockImage(t.parent)?e.createContainerElement("figcaption"):null}),t.conversion.for("editingDowncast").elementToElement({model:"caption",view:(t,{writer:i})=>{if(!n.isBlockImage(t.parent))return null;const r=i.createEditableElement("figcaption");i.setCustomProperty("imageCaption",!0,r),r.placeholder=o("Enter image caption"),ci({view:e,element:r,keepOnFocus:!0});const s=t.parent.getAttribute("alt");return ef(r,i,{label:s?o("Caption for image: %0",[s]):o("Caption for the image")})}})}_setupImageTypeCommandsIntegration(){const t=this.editor,e=t.plugins.get("ImageUtils"),n=t.plugins.get("ImageCaptionUtils"),i=t.commands.get("imageTypeInline"),o=t.commands.get("imageTypeBlock"),r=t=>{if(!t.return)return;const{oldElement:i,newElement:o}=t.return;if(!i)return;if(e.isBlockImage(i)){const t=n.getCaptionFromImageModelElement(i);if(t)return void this._saveCaption(o,t)}const r=this._getSavedCaption(i);r&&this._saveCaption(o,r)};i&&this.listenTo(i,"execute",r,{priority:"low"}),o&&this.listenTo(o,"execute",r,{priority:"low"})}_getSavedCaption(t){const e=this._savedCaptionsMap.get(t);return e?Hr.fromJSON(e):null}_saveCaption(t,e){this._savedCaptionsMap.set(t,e.toJSON())}_registerCaptionReconversion(){const t=this.editor,e=t.model,n=t.plugins.get("ImageUtils"),i=t.plugins.get("ImageCaptionUtils");e.document.on("change:data",()=>{const o=e.document.differ.getChanges();for(const e of o){if("alt"!==e.attributeKey)continue;const o=e.range.start.nodeAfter;if(n.isBlockImage(o)){const e=i.getCaptionFromImageModelElement(o);if(!e)return;t.editing.reconvertItem(e)}}})}}class c_ extends nc{static get requires(){return[s_]}static get pluginName(){return"ImageCaptionUI"}static get isOfficialPlugin(){return!0}init(){const t=this.editor,e=t.editing.view,n=t.plugins.get("ImageCaptionUtils"),i=t.t;t.ui.componentFactory.add("toggleImageCaption",o=>{const r=t.commands.get("toggleImageCaption"),s=new Lu(o);return s.set({icon:Oc,tooltip:!0,isToggleable:!0}),s.bind("isOn","isEnabled").to(r,"value","isEnabled"),s.bind("label").to(r,"value",t=>i(t?"Toggle caption off":"Toggle caption on")),this.listenTo(s,"execute",()=>{t.execute("toggleImageCaption",{focusCaptionOnShow:!0});const i=n.getCaptionFromModelSelection(t.model.document.selection);if(i){const n=t.editing.mapper.toViewElement(i);e.scrollToTheSelection(),e.change(t=>{t.addClass("image__caption_highlighted",n)})}t.editing.view.focus()}),s})}}class d_ extends nc{static get requires(){return[l_,c_]}static get pluginName(){return"ImageCaption"}static get isOfficialPlugin(){return!0}}function u_(t){const e=t.map(t=>t.replace("+","\\+"));return new RegExp(`^image\\/(${e.join("|")})$`)}function h_(t,e){return t.type?t.type:e.match(/data:(image\/\w+);base64/)?e.match(/data:(image\/\w+);base64/)[1].toLowerCase():"image/jpeg"}class g_ extends nc{static get pluginName(){return"ImageUploadUI"}static get isOfficialPlugin(){return!0}init(){const t=this.editor;t.ui.componentFactory.add("uploadImage",()=>this._createToolbarButton()),t.ui.componentFactory.add("imageUpload",()=>this._createToolbarButton()),t.ui.componentFactory.add("menuBar:uploadImage",()=>this._createMenuBarButton("standalone")),t.plugins.has("ImageInsertUI")&&t.plugins.get("ImageInsertUI").registerIntegration({name:"upload",observable:()=>t.commands.get("uploadImage"),buttonViewCreator:()=>this._createToolbarButton(),formViewCreator:()=>this._createDropdownButton(),menuBarButtonViewCreator:t=>this._createMenuBarButton(t?"insertOnly":"insertNested")})}_createButton(t){const e=this.editor,n=e.locale,i=e.commands.get("uploadImage"),o=e.config.get("image.upload.types"),r=u_(o),s=new t(e.locale),a=n.t;return s.set({acceptedType:o.map(t=>`image/${t}`).join(","),allowMultipleFiles:!0,label:a("Upload from computer"),icon:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M1.201 1C.538 1 0 1.47 0 2.1v14.363c0 .64.534 1.037 1.186 1.037h9.494a3 3 0 0 1-.414-.287 3 3 0 0 1-1.055-2.03 3 3 0 0 1 .693-2.185l.383-.455-.02.018-3.65-3.41a.695.695 0 0 0-.957-.034L1.5 13.6V2.5h15v5.535a2.97 2.97 0 0 1 1.412.932l.088.105V2.1c0-.63-.547-1.1-1.2-1.1zm11.713 2.803a2.146 2.146 0 0 0-2.049 1.992 2.14 2.14 0 0 0 1.28 2.096 2.13 2.13 0 0 0 2.644-3.11 2.13 2.13 0 0 0-1.875-.978"/><path d="M15.522 19.1a.79.79 0 0 0 .79-.79v-5.373l2.059 2.455a.79.79 0 1 0 1.211-1.015l-3.352-3.995a.79.79 0 0 0-.995-.179.8.8 0 0 0-.299.221l-3.35 3.99a.79.79 0 1 0 1.21 1.017l1.936-2.306v5.185c0 .436.353.79.79.79"/><path d="M15.522 19.1a.79.79 0 0 0 .79-.79v-5.373l2.059 2.455a.79.79 0 1 0 1.211-1.015l-3.352-3.995a.79.79 0 0 0-.995-.179.8.8 0 0 0-.299.221l-3.35 3.99a.79.79 0 1 0 1.21 1.017l1.936-2.306v5.185c0 .436.353.79.79.79"/></svg>'}),s.bind("isEnabled").to(i),s.on("done",(t,n)=>{const i=Array.from(n).filter(t=>r.test(t.type));i.length&&(e.execute("uploadImage",{file:i}),e.editing.view.focus())}),s}_createToolbarButton(){const t=this.editor.locale.t,e=this.editor.plugins.get("ImageInsertUI"),n=this.editor.commands.get("uploadImage"),i=this._createButton(sh);return i.tooltip=!0,i.bind("label").to(e,"isImageSelected",n,"isAccessAllowed",(e,n)=>t(n?e?"Replace image from computer":"Upload image from computer":"You have no image upload permissions.")),i}_createDropdownButton(){const t=this.editor.locale.t,e=this.editor.plugins.get("ImageInsertUI"),n=this._createButton(sh);return n.withText=!0,n.bind("label").to(e,"isImageSelected",e=>t(e?"Replace from computer":"Upload from computer")),n.on("execute",()=>{e.dropdownView.isOpen=!1}),n}_createMenuBarButton(t){const e=this.editor.locale.t,n=this._createButton(tm);switch(n.withText=!0,t){case"standalone":n.label=e("Image from computer");break;case"insertOnly":n.label=e("Image");break;case"insertNested":n.label=e("From computer")}return n}}class m_ extends nc{static get pluginName(){return"ImageUploadProgress"}static get isOfficialPlugin(){return!0}placeholder;constructor(t){super(t),this.placeholder="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="}init(){const t=this.editor;t.plugins.has("ImageBlockEditing")&&t.editing.downcastDispatcher.on("attribute:uploadStatus:imageBlock",this.uploadStatusChange),t.plugins.has("ImageInlineEditing")&&t.editing.downcastDispatcher.on("attribute:uploadStatus:imageInline",this.uploadStatusChange)}uploadStatusChange=(t,e,n)=>{const i=this.editor,o=e.item,r=o.getAttribute("uploadId");if(!n.consumable.consume(e.item,t.name))return;const s=i.plugins.get("ImageUtils"),a=i.plugins.get(Cc),l=r?e.attributeNewValue:null,c=this.placeholder,d=i.editing.mapper.toViewElement(o),u=n.writer;if("reading"==l)return p_(d,u),void f_(s,c,d,u);if("uploading"==l){const t=a.loaders.get(r);return p_(d,u),void(t?(b_(d,u),function(t,e,n,i){const o=function(t){const e=t.createUIElement("div",{class:"ck-progress-bar"});return t.setCustomProperty("progressBar",!0,e),e}(e);e.insert(e.createPositionAt(t,"end"),o),n.on("change:uploadedPercent",(t,e,n)=>{i.change(t=>{t.setStyle("width",n+"%",o)})})}(d,u,t,i.editing.view),function(t,e,n,i){if(i.data){const o=t.findViewImgElement(e);n.setAttribute("src",i.data,o)}}(s,d,u,t)):f_(s,c,d,u))}"complete"==l&&a.loaders.get(r)&&function(t,e,n){const i=e.createUIElement("div",{class:"ck-image-upload-complete-icon"});e.insert(e.createPositionAt(t,"end"),i),setTimeout(()=>{n.change(t=>t.remove(t.createRangeOn(i)))},3e3)}(d,u,i.editing.view),function(t,e){w_(t,e,"progressBar")}(d,u),b_(d,u),function(t,e){e.removeClass("ck-appear",t)}(d,u)}}function p_(t,e){t.hasClass("ck-appear")||e.addClass("ck-appear",t)}function f_(t,e,n,i){n.hasClass("ck-image-upload-placeholder")||i.addClass("ck-image-upload-placeholder",n);const o=t.findViewImgElement(n);o.getAttribute("src")!==e&&i.setAttribute("src",e,o),k_(n,"placeholder")||i.insert(i.createPositionAfter(o),function(t){const e=t.createUIElement("div",{class:"ck-upload-placeholder-loader"});return t.setCustomProperty("placeholder",!0,e),e}(i))}function b_(t,e){t.hasClass("ck-image-upload-placeholder")&&e.removeClass("ck-image-upload-placeholder",t),w_(t,e,"placeholder")}function k_(t,e){for(const n of t.getChildren())if(n.getCustomProperty(e))return n}function w_(t,e,n){const i=k_(t,n);i&&e.remove(e.createRangeOn(i))}class __ extends oc{constructor(t){super(t),this.set("isAccessAllowed",!0)}refresh(){const t=this.editor,e=t.plugins.get("ImageUtils"),n=t.model.document.selection.getSelectedElement();this.isEnabled=e.isImageAllowed()||e.isImage(n)}execute(t){const e=fn(t.file),n=this.editor.model.document.selection,i=this.editor.plugins.get("ImageUtils"),o=Object.fromEntries(n.getAttributes());e.forEach((t,e)=>{const r=n.getSelectedElement();if(e&&r&&i.isImage(r)){const e=this.editor.model.createPositionAfter(r);this._uploadImage(t,o,e)}else this._uploadImage(t,o)})}_uploadImage(t,e,n){const i=this.editor,o=i.plugins.get(Cc).createLoader(t),r=i.plugins.get("ImageUtils");o&&r.insertImage({...e,uploadId:o.id},n)}}class v_ extends nc{static get requires(){return[Cc,Bg,Df,zw]}static get pluginName(){return"ImageUploadEditing"}static get isOfficialPlugin(){return!0}_uploadImageElements;_uploadedImages=new Map;constructor(t){super(t),t.config.define("image",{upload:{types:["jpeg","png","gif","bmp","webp","tiff"]}}),this._uploadImageElements=new Map}init(){const t=this.editor,e=t.model.document,n=t.conversion,i=t.plugins.get(Cc),o=t.plugins.get("ImageUtils"),r=t.plugins.get("ClipboardPipeline"),s=u_(t.config.get("image.upload.types")),a=new __(t);t.commands.add("uploadImage",a),t.commands.add("imageUpload",a),n.for("upcast").attributeToAttribute({view:{name:"img",key:"uploadId"},model:"uploadId"}).add(t=>t.on("element:img",(t,e,n)=>{if(!n.consumable.test(e.viewItem,{attributes:["data-ck-upload-id"]}))return;const o=e.viewItem.getAttribute("data-ck-upload-id");if(!o)return;const[r]=Array.from(e.modelRange.getItems({shallow:!0})),s=i.loaders.get(o);r&&(n.writer.setAttribute("uploadId",o,r),n.consumable.consume(e.viewItem,{attributes:["data-ck-upload-id"]}),s&&s.data&&n.writer.setAttribute("uploadStatus",s.status,r))},{priority:"low"})),this.listenTo(t.editing.view.document,"clipboardInput",(e,n)=>{if(i=n.dataTransfer,Array.from(i.types).includes("text/html")&&""!==i.getData("text/html"))return;var i;const o=Array.from(n.dataTransfer.files).filter(t=>!!t&&s.test(t.type));if(o.length&&(e.stop(),t.model.change(e=>{n.targetRanges&&e.setSelection(n.targetRanges.map(e=>t.editing.mapper.toModelRange(e))),t.execute("uploadImage",{file:o})}),!t.commands.get("uploadImage").isAccessAllowed)){const e=t.plugins.get("Notification"),n=t.locale.t;e.showWarning(n("You have no image upload permissions."),{namespace:"image"})}}),this.listenTo(r,"inputTransformation",(e,n)=>{const r=Array.from(t.editing.view.createRangeIn(n.content)).map(t=>t.item).filter(t=>function(t,e){return!(!t.isInlineImageView(e)||!e.getAttribute("src")||!e.getAttribute("src").match(/^data:image\/\w+;base64,/g)&&!e.getAttribute("src").match(/^blob:/g))}(o,t)&&!t.getAttribute("uploadProcessed")).map(t=>{return{promise:(e=t,new Promise((t,n)=>{const i=e.getAttribute("src");fetch(i).then(t=>t.blob()).then(e=>{const n=h_(e,i),o=n.replace("image/",""),r=new File([e],`image.${o}`,{type:n});t(r)}).catch(e=>e&&"TypeError"===e.name?function(t){return function(t){return new Promise((e,n)=>{const i=gt.document.createElement("img");i.addEventListener("load",()=>{const t=gt.document.createElement("canvas");t.width=i.width,t.height=i.height,t.getContext("2d").drawImage(i,0,0),t.toBlob(t=>t?e(t):n())}),i.addEventListener("error",()=>n()),i.src=t})}(t).then(e=>{const n=h_(e,t),i=n.replace("image/","");return new File([e],`image.${i}`,{type:n})})}(i).then(t).catch(n):n(e))})),imageElement:t};var e});if(!r.length)return;const s=new ol(t.editing.view.document);for(const t of r){s.setAttribute("uploadProcessed",!0,t.imageElement);const e=i.createLoader(t.promise);e&&(s.setAttribute("src","",t.imageElement),s.setAttribute("uploadId",e.id,t.imageElement))}}),t.editing.view.document.on("dragover",(t,e)=>{e.preventDefault()}),e.on("change",()=>{const n=e.differ.getChanges({includeChangesInGraveyard:!0}).reverse(),o=new Set;for(const e of n)if("insert"==e.type&&"$text"!=e.name){const n=e.position.nodeAfter,r="$graveyard"==e.position.root.rootName;for(const e of y_(t,n)){const n=e.getAttribute("uploadId");if(!n)continue;const s=i.loaders.get(n);s?r?o.has(n)||Array.from(this._uploadImageElements.get(n)).every(t=>"$graveyard"==t.root.rootName)&&s.abort():(o.add(n),this._uploadImageElements.has(n)?this._uploadImageElements.get(n).add(e):this._uploadImageElements.set(n,new Set([e])),"idle"==s.status&&this._readAndUpload(s)):!r&&this._uploadedImages.has(n)&&t.model.enqueueChange({isUndoable:!1},t=>{t.setAttribute("uploadStatus","complete",e),this.fire("uploadComplete",{data:this._uploadedImages.get(n),imageElement:e})})}}}),this.on("uploadComplete",(t,{imageElement:e,data:n})=>{const i=n.urls?n.urls:n;this.editor.model.change(t=>{t.setAttribute("src",i.default,e),this._parseAndSetSrcsetAttributeOnImage(i,e,t),o.setImageNaturalSizeAttributes(e)})},{priority:"low"})}afterInit(){const t=this.editor.model.schema;this.editor.plugins.has("ImageBlockEditing")&&(t.extend("imageBlock",{allowAttributes:["uploadId","uploadStatus"]}),this._registerConverters("imageBlock")),this.editor.plugins.has("ImageInlineEditing")&&(t.extend("imageInline",{allowAttributes:["uploadId","uploadStatus"]}),this._registerConverters("imageInline"))}_readAndUpload(t){const e=this.editor,n=e.model,i=e.locale.t,o=e.plugins.get(Cc),r=e.plugins.get(Bg),s=e.plugins.get("ImageUtils"),a=this._uploadImageElements;return n.enqueueChange({isUndoable:!1},e=>{const n=a.get(t.id);for(const t of n)e.setAttribute("uploadStatus","reading",t)}),t.read().then(()=>{const o=t.upload();e.ui&&e.ui.ariaLiveAnnouncer.announce(i("Uploading image"));for(const i of a.get(t.id)){if(ft.isSafari){const t=e.editing.mapper.toViewElement(i),n=s.findViewImgElement(t);e.editing.view.once("render",()=>{if(!n.parent)return;const t=e.editing.view.domConverter.mapViewToDom(n.parent);if(!t)return;const i=t.style.display;t.style.display="none",t._ckHack=t.offsetHeight,t.style.display=i})}n.enqueueChange({isUndoable:!1},t=>{t.setAttribute("uploadStatus","uploading",i)})}return o}).then(o=>{n.enqueueChange({isUndoable:!1},n=>{for(const e of a.get(t.id))n.setAttribute("uploadStatus","complete",e),this.fire("uploadComplete",{data:o,imageElement:e});e.ui&&e.ui.ariaLiveAnnouncer.announce(i("Image upload complete")),this._uploadedImages.set(t.id,o)}),l()}).catch(o=>{if(e.ui&&e.ui.ariaLiveAnnouncer.announce(i("Error during image upload")),"error"!==t.status&&"aborted"!==t.status)throw o;"error"==t.status&&o&&r.showWarning(o,{title:i("Upload failed"),namespace:"upload"}),n.enqueueChange({isUndoable:!1},e=>{for(const n of a.get(t.id))"$graveyard"!==n.root.rootName&&e.remove(n)}),l()});function l(){n.enqueueChange({isUndoable:!1},e=>{for(const n of a.get(t.id))e.removeAttribute("uploadId",n),e.removeAttribute("uploadStatus",n);a.delete(t.id)}),o.destroyLoader(t)}}_parseAndSetSrcsetAttributeOnImage(t,e,n){let i=0;const o=Object.keys(t).filter(t=>{const e=parseInt(t,10);if(!isNaN(e))return i=Math.max(i,e),!0}).map(e=>`${t[e]} ${e}w`).join(", ");if(""!=o){const t={srcset:o};e.hasAttribute("width")||e.hasAttribute("height")||(t.width=i),n.setAttributes(t,e)}}_registerConverters(t){const{conversion:e,plugins:n}=this.editor,i=n.get(Cc),o=n.get(zw);e.for("dataDowncast").add(e=>{e.on(`attribute:uploadId:${t}`,(t,e,n)=>{if(!n.consumable.test(e.item,t.name))return;const r=i.loaders.get(e.attributeNewValue);if(!r||!r.data)return null;const s=n.mapper.toViewElement(e.item),a=o.findViewImgElement(s);a&&(n.consumable.consume(e.item,t.name),n.writer.setAttribute("data-ck-upload-id",r.id,a))})})}}function y_(t,e){const n=t.plugins.get("ImageUtils");return Array.from(t.model.createRangeOn(e)).filter(t=>n.isImage(t.item)).map(t=>t.item)}class C_ extends nc{static get pluginName(){return"ImageUpload"}static get isOfficialPlugin(){return!0}static get requires(){return[v_,g_,m_]}}class x_ extends ku{urlInputView;keystrokes;constructor(t){super(t),this.set("imageURLInputValue",""),this.set("isImageSelected",!1),this.set("isEnabled",!0),this.keystrokes=new xn,this.urlInputView=this._createUrlInputView(),this.setTemplate({tag:"form",attributes:{class:["ck","ck-image-insert-url"],tabindex:"-1"},children:[this.urlInputView,{tag:"div",attributes:{class:["ck","ck-image-insert-url__action-row"]}}]})}render(){super.render(),Eu({view:this}),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.keystrokes.destroy()}_createUrlInputView(){const t=this.locale,e=t.t,n=new kh(t,Kh);return n.bind("label").to(this,"isImageSelected",t=>e(t?"Update image URL":"Insert image via URL")),n.bind("isEnabled").to(this),n.fieldView.inputMode="url",n.fieldView.placeholder="https://example.com/image.png",n.fieldView.bind("value").to(this,"imageURLInputValue",t=>t||""),n.fieldView.on("input",()=>{this.imageURLInputValue=n.fieldView.element.value.trim()}),n}focus(){this.urlInputView.focus()}}class A_ extends nc{_imageInsertUI;_formView;static get pluginName(){return"ImageInsertViaUrlUI"}static get isOfficialPlugin(){return!0}static get requires(){return[n_,Wu]}init(){this.editor.ui.componentFactory.add("insertImageViaUrl",()=>this._createToolbarButton()),this.editor.ui.componentFactory.add("menuBar:insertImageViaUrl",()=>this._createMenuBarButton("standalone"))}afterInit(){this._imageInsertUI=this.editor.plugins.get("ImageInsertUI"),this._imageInsertUI.registerIntegration({name:"url",observable:()=>this.editor.commands.get("insertImage"),buttonViewCreator:()=>this._createToolbarButton(),formViewCreator:()=>this._createDropdownButton(),menuBarButtonViewCreator:t=>this._createMenuBarButton(t?"insertOnly":"insertNested")})}_createInsertUrlButton(t){const e=new t(this.editor.locale);return e.icon='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M1.201 1C.538 1 0 1.47 0 2.1v14.363c0 .64.534 1.037 1.186 1.037h7.029a5.4 5.4 0 0 1 .615-4.338l.762-1.232-2.975-2.78a.696.696 0 0 0-.957-.033L1.5 13.6V2.5h15v6.023q.675.195 1.307.573l.058.033q.068.042.135.086V2.1c0-.63-.547-1.1-1.2-1.1zm11.713 2.803a2.15 2.15 0 0 0-1.611.834 2.1 2.1 0 0 0-.438 1.158 2.14 2.14 0 0 0 1.277 2.096 2.132 2.132 0 0 0 2.645-3.11 2.13 2.13 0 0 0-1.873-.978"/><path d="M16.63 10.294a3.003 3.003 0 0 0-4.142.887l-.117.177a.65.65 0 0 0-.096.492.66.66 0 0 0 .278.418.7.7 0 0 0 .944-.234 1.74 1.74 0 0 1 2.478-.463 1.87 1.87 0 0 1 .476 2.55.64.64 0 0 0-.071.5.65.65 0 0 0 .309.396.627.627 0 0 0 .869-.19l.027-.041a3.226 3.226 0 0 0-.956-4.492Zm-6.061 3.78-.044.066a3.23 3.23 0 0 0 .82 4.403 3.005 3.005 0 0 0 4.275-.798l.13-.197a.63.63 0 0 0 .092-.475.64.64 0 0 0-.268-.402.713.713 0 0 0-.99.26l-.018.029a1.74 1.74 0 0 1-2.477.461 1.87 1.87 0 0 1-.475-2.55l.029-.047a.65.65 0 0 0 .086-.485.66.66 0 0 0-.275-.408l-.04-.027a.61.61 0 0 0-.845.17"/><path d="M15.312 13.925c.24-.36.154-.838-.19-1.067-.346-.23-.82-.124-1.059.236l-1.268 1.907c-.239.36-.153.838.192 1.067.345.23.818.123 1.057-.236z"/></svg>',e.on("execute",()=>{this._showModal()}),e}_createToolbarButton(){const t=this.editor.locale.t,e=this._createInsertUrlButton(Lu);return e.tooltip=!0,e.bind("label").to(this._imageInsertUI,"isImageSelected",e=>t(e?"Update image URL":"Insert image via URL")),e}_createDropdownButton(){const t=this.editor.locale.t,e=this._createInsertUrlButton(Lu);return e.withText=!0,e.bind("label").to(this._imageInsertUI,"isImageSelected",e=>t(e?"Update image URL":"Insert via URL")),e}_createMenuBarButton(t){const e=this.editor.locale.t,n=this._createInsertUrlButton(Gu);switch(n.withText=!0,t){case"standalone":n.label=e("Image via URL");break;case"insertOnly":n.label=e("Image");break;case"insertNested":n.label=e("Via URL")}return n}_createInsertUrlView(){const t=this.editor,e=t.locale,n=t.commands.get("replaceImageSource"),i=t.commands.get("insertImage"),o=new x_(e);return o.bind("isImageSelected").to(this._imageInsertUI),o.bind("isEnabled").toMany([i,n],"isEnabled",(...t)=>t.some(t=>t)),o}_showModal(){const t=this.editor,e=t.locale.t,n=t.plugins.get("Dialog");this._formView||(this._formView=this._createInsertUrlView(),this._formView.on("submit",()=>this._handleSave()));const i=t.commands.get("replaceImageSource");this._formView.imageURLInputValue=i.value||"",n.show({id:"insertImageViaUrl",title:e("Image via URL"),isModal:!0,content:this._formView,actionButtons:[{label:e("Cancel"),withText:!0,onExecute:()=>n.hide()},{label:this._imageInsertUI.isImageSelected?e("Save"):e("Insert"),class:"ck-button-action",withText:!0,onExecute:()=>this._handleSave()}]})}_handleSave(){this.editor.commands.get("replaceImageSource").isEnabled?this.editor.execute("replaceImageSource",{source:this._formView.imageURLInputValue}):this.editor.execute("insertImage",{source:this._formView.imageURLInputValue}),this.editor.plugins.get("Dialog").hide()}}class E_ extends nc{static get pluginName(){return"ImageInsertViaUrl"}static get isOfficialPlugin(){return!0}static get requires(){return[A_,n_]}}class S_ extends nc{static get pluginName(){return"ImageInsert"}static get isOfficialPlugin(){return!0}static get requires(){return[C_,E_,n_]}}class T_ extends oc{refresh(){const t=this.editor,e=t.plugins.get("ImageUtils").getClosestSelectedImageElement(t.model.document.selection);this.isEnabled=!!e,e&&e.hasAttribute("resizedWidth")?this.value={width:e.getAttribute("resizedWidth"),height:null}:this.value=null}execute(t){const e=this.editor,n=e.model,i=e.plugins.get("ImageUtils"),o=i.getClosestSelectedImageElement(n.document.selection);this.value={width:t.width,height:null},o&&n.change(e=>{e.setAttribute("resizedWidth",t.width,o),e.removeAttribute("resizedHeight",o),i.setImageNaturalSizeAttributes(o)})}}class I_ extends nc{static get requires(){return[zw]}static get pluginName(){return"ImageResizeEditing"}static get isOfficialPlugin(){return!0}constructor(t){super(t),t.config.define("image",{resizeUnit:"%",resizeOptions:[{name:"resizeImage:original",value:null,icon:"original"},{name:"resizeImage:custom",value:"custom",icon:"custom"},{name:"resizeImage:25",value:"25",icon:"small"},{name:"resizeImage:50",value:"50",icon:"medium"},{name:"resizeImage:75",value:"75",icon:"large"}]})}init(){const t=this.editor,e=new T_(t);this._registerConverters("imageBlock"),this._registerConverters("imageInline"),t.commands.add("resizeImage",e),t.commands.add("imageResize",e)}afterInit(){this._registerSchema()}_registerSchema(){const t=this.editor.model.schema;this.editor.plugins.has("ImageBlockEditing")&&(t.extend("imageBlock",{allowAttributes:["resizedWidth","resizedHeight"]}),t.setAttributeProperties("resizedWidth",{isFormatting:!0}),t.setAttributeProperties("resizedHeight",{isFormatting:!0})),this.editor.plugins.has("ImageInlineEditing")&&(t.extend("imageInline",{allowAttributes:["resizedWidth","resizedHeight"]}),t.setAttributeProperties("resizedWidth",{isFormatting:!0}),t.setAttributeProperties("resizedHeight",{isFormatting:!0}))}_registerConverters(t){const e=this.editor,n=e.plugins.get("ImageUtils");e.conversion.for("downcast").add(e=>e.on(`attribute:resizedWidth:${t}`,(t,e,n)=>{if(!n.consumable.consume(e.item,t.name))return;const i=n.writer,o=n.mapper.toViewElement(e.item);null!==e.attributeNewValue?(i.setStyle("width",e.attributeNewValue,o),i.addClass("image_resized",o)):(i.removeStyle("width",o),i.removeClass("image_resized",o))})),e.conversion.for("dataDowncast").attributeToAttribute({model:{name:t,key:"resizedHeight"},view:t=>({key:"style",value:{height:t}})}),e.conversion.for("editingDowncast").add(e=>e.on(`attribute:resizedHeight:${t}`,(e,i,o)=>{if(!o.consumable.consume(i.item,e.name))return;const r=o.writer,s=o.mapper.toViewElement(i.item),a="imageInline"===t?n.findViewImgElement(s):s;null!==i.attributeNewValue?r.setStyle("height",i.attributeNewValue,a):r.removeStyle("height",a)})),e.conversion.for("upcast").attributeToAttribute({view:{name:"imageBlock"===t?"figure":"img",styles:{width:/.+/}},model:{key:"resizedWidth",value:t=>Lw(t)?null:t.getStyle("width")}}),e.conversion.for("upcast").attributeToAttribute({view:{name:"imageBlock"===t?"figure":"img",styles:{height:/.+/}},model:{key:"resizedHeight",value:t=>Lw(t)?null:t.getStyle("height")}}),e.conversion.for("upcast").add(e=>{e.on("element:"+("imageBlock"===t?"figure":"img"),(t,e,n)=>{n.consumable.consume(e.viewItem,{classes:["image_resized"]})})})}}const P_=(()=>({small:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M2.5 16.5v1h-1v-1zm2 0v1h-1v-1zm2 0v1h-1v-1zm2 0v1h-1v-1zm2 0v1h-1v-1zm2 0v1h-1v-1zm2 0v1h-1v-1zm2 0v1h-1v-1zm2 0v1h-1v-1zM1 15v1H0v-1zm19 0v1h-1v-1zM1 13v1H0v-1zm19 0v1h-1v-1zM1 11v1H0v-1zm19 0v1h-1v-1zM1 9v1H0V9zm19 0v1h-1V9zM1 7v1H0V7zm19 0v1h-1V7zM1 5v1H0V5zm19 0v1h-1V5zm0-2v1h-1V3zM1 3v1H0V3zm13.5-1.5v1h-1v-1zm2 0v1h-1v-1zm2 0v1h-1v-1zm-8 0v1h-1v-1zm-2 0v1h-1v-1zm-2 0v1h-1v-1zm-2 0v1h-1v-1zm8 0v1h-1v-1zm-10 0v1h-1v-1z"/><path d="M7 9.5H2a2 2 0 0 0-2 2v4a2 2 0 0 0 2 2h5a2 2 0 0 0 2-2v-4a2 2 0 0 0-2-2M7 11a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5H2a.5.5 0 0 1-.5-.5v-4A.5.5 0 0 1 2 11z"/></svg>',medium:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M2.5 16.5v1h-1v-1zm2 0v1h-1v-1zm2 0v1h-1v-1zm2 0v1h-1v-1zm2 0v1h-1v-1zm2 0v1h-1v-1zm2 0v1h-1v-1zm2 0v1h-1v-1zm2 0v1h-1v-1zM1 15v1H0v-1zm19 0v1h-1v-1zM1 13v1H0v-1zm19 0v1h-1v-1zM1 11v1H0v-1zm19 0v1h-1v-1zM1 9v1H0V9zm19 0v1h-1V9zM1 7v1H0V7zm19 0v1h-1V7zM1 5v1H0V5zm19 0v1h-1V5zm0-2v1h-1V3zM1 3v1H0V3zm13.5-1.5v1h-1v-1zm2 0v1h-1v-1zm2 0v1h-1v-1zm-8 0v1h-1v-1zm-2 0v1h-1v-1zm-2 0v1h-1v-1zm-2 0v1h-1v-1zm8 0v1h-1v-1zm-10 0v1h-1v-1z"/><path d="M10 7.5H2a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2v-6a2 2 0 0 0-2-2M10 9a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-.5.5H2a.5.5 0 0 1-.5-.5v-6A.5.5 0 0 1 2 9z"/></svg>',large:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M2.5 16.5v1h-1v-1zm2 0v1h-1v-1zm2 0v1h-1v-1zm2 0v1h-1v-1zm2 0v1h-1v-1zm2 0v1h-1v-1zm2 0v1h-1v-1zm2 0v1h-1v-1zm2 0v1h-1v-1zM1 15v1H0v-1zm19 0v1h-1v-1zM1 13v1H0v-1zm19 0v1h-1v-1zM1 11v1H0v-1zm19 0v1h-1v-1zM1 9v1H0V9zm19 0v1h-1V9zM1 7v1H0V7zm19 0v1h-1V7zM1 5v1H0V5zm19 0v1h-1V5zm0-2v1h-1V3zM1 3v1H0V3zm13.5-1.5v1h-1v-1zm2 0v1h-1v-1zm2 0v1h-1v-1zm-8 0v1h-1v-1zm-2 0v1h-1v-1zm-2 0v1h-1v-1zm-2 0v1h-1v-1zm8 0v1h-1v-1zm-10 0v1h-1v-1z"/><path d="M13 5.5H2a2 2 0 0 0-2 2v8a2 2 0 0 0 2 2h11a2 2 0 0 0 2-2v-8a2 2 0 0 0-2-2M13 7a.5.5 0 0 1 .5.5v8a.5.5 0 0 1-.5.5H2a.5.5 0 0 1-.5-.5v-8A.5.5 0 0 1 2 7z"/></svg>',custom:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M.95 1.43a.95.95 0 0 0-.95.95v3.1a.95.95 0 0 0 .95.95h.75v6.3H.95a.95.95 0 0 0-.95.95v3.1a.95.95 0 0 0 .95.95h3.1a.95.95 0 0 0 .95-.95v-.65h1.932l1.539-1.5H5v-.95a.95.95 0 0 0-.95-.95H3.2v-6.3h.85A.95.95 0 0 0 5 5.48v-.55h10v.55a.95.95 0 0 0 .95.95h3.1a.95.95 0 0 0 .95-.95v-3.1a.95.95 0 0 0-.95-.95h-3.1a.95.95 0 0 0-.95.95v1.05H5V2.38a.95.95 0 0 0-.95-.95zm.55 3.5v-2h2v2zm0 9.3v2h2v-2zm15-11.3v2h2v-2zM8.139 20.004v-2.388l7.045-7.048 2.391 2.391-7.046 7.046zm11.421-9.101a.6.6 0 0 1-.138.206l-1.165 1.168-2.391-2.391 1.167-1.163a.6.6 0 0 1 .206-.138.6.6 0 0 1 .243-.049.63.63 0 0 1 .449.187l1.491 1.488c.059.059.108.129.138.206s.049.16.049.243a.6.6 0 0 1-.049.243"/></svg>',original:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M2.5 17v1h-1v-1zm2 0v1h-1v-1zm2 0v1h-1v-1zm2 0v1h-1v-1zm2 0v1h-1v-1zm2 0v1h-1v-1zm2 0v1h-1v-1zm2 0v1h-1v-1zm2 0v1h-1v-1zM1 15.5v1H0v-1zm19 0v1h-1v-1zm-19-2v1H0v-1zm19 0v1h-1v-1zm-19-2v1H0v-1zm19 0v1h-1v-1zm-19-2v1H0v-1zm19 0v1h-1v-1zm-19-2v1H0v-1zm19 0v1h-1v-1zm-19-2v1H0v-1zm19 0v1h-1v-1zm0-2v1h-1v-1zm-19 0v1H0v-1zM14.5 2v1h-1V2zm2 0v1h-1V2zm2 0v1h-1V2zm-8 0v1h-1V2zm-2 0v1h-1V2zm-2 0v1h-1V2zm-2 0v1h-1V2zm8 0v1h-1V2zm-10 0v1h-1V2z"/><path d="M18.095 2H1.905C.853 2 0 2.895 0 4v12c0 1.105.853 2 1.905 2h16.19C19.147 18 20 17.105 20 16V4c0-1.105-.853-2-1.905-2m0 1.5c.263 0 .476.224.476.5v12c0 .276-.213.5-.476.5H1.905a.49.49 0 0 1-.476-.5V4c0-.276.213-.5.476-.5z"/></svg>'}))();class M_ extends nc{static get requires(){return[I_]}static get pluginName(){return"ImageResizeButtons"}static get isOfficialPlugin(){return!0}_resizeUnit;constructor(t){super(t),this._resizeUnit=t.config.get("image.resizeUnit")}init(){const t=this.editor,e=t.config.get("image.resizeOptions"),n=t.commands.get("resizeImage");this.bind("isEnabled").to(n);for(const t of e)this._registerImageResizeButton(t);this._registerImageResizeDropdown(e)}_registerImageResizeButton(t){const e=this.editor,{name:n,value:i,icon:o}=t;e.ui.componentFactory.add(n,n=>{const r=new Lu(n),s=e.commands.get("resizeImage"),a=this._getOptionLabelValue(t,!0);if(!P_[o])throw new Vt("imageresizebuttons-missing-icon",e,t);if(r.set({label:a,icon:P_[o],tooltip:a,isToggleable:!0}),r.bind("isEnabled").to(this),e.plugins.has("ImageCustomResizeUI")&&N_(t)){const t=e.plugins.get("ImageCustomResizeUI");this.listenTo(r,"execute",()=>{t._showForm(this._resizeUnit)})}else{const t=i?i+this._resizeUnit:null;r.bind("isOn").to(s,"value",s,"isEnabled",L_(t)),this.listenTo(r,"execute",()=>{e.execute("resizeImage",{width:t})})}return r})}_registerImageResizeDropdown(t){const e=this.editor,n=e.t,i=t.find(t=>!t.value),o=o=>{const r=e.commands.get("resizeImage"),s=Bh(o,Ah),a=s.buttonView,l=n("Resize image");return a.set({tooltip:l,commandValue:i.value,icon:P_.medium,isToggleable:!0,label:this._getOptionLabelValue(i),withText:!0,class:"ck-resize-image-button",ariaLabel:l,ariaLabelledBy:void 0}),a.bind("label").to(r,"value",t=>t&&t.width?t.width:this._getOptionLabelValue(i)),s.bind("isEnabled").to(this),Hh(s,()=>this._getResizeDropdownListItemDefinitions(t,r),{ariaLabel:n("Image resize list"),role:"menu"}),this.listenTo(s,"execute",t=>{"onClick"in t.source?t.source.onClick():(e.execute(t.source.commandName,{width:t.source.commandValue}),e.editing.view.focus())}),s};e.ui.componentFactory.add("resizeImage",o),e.ui.componentFactory.add("imageResize",o)}_getOptionLabelValue(t,e=!1){const n=this.editor.t;return t.label?t.label:e?N_(t)?n("Custom image size"):t.value?n("Resize image to %0",t.value+this._resizeUnit):n("Resize image to the original size"):N_(t)?n("Custom"):t.value?t.value+this._resizeUnit:n("Original")}_getResizeDropdownListItemDefinitions(t,e){const{editor:n}=this,i=new kn,o=t.map(t=>N_(t)?{...t,valueWithUnits:"custom"}:t.value?{...t,valueWithUnits:`${t.value}${this._resizeUnit}`}:{...t,valueWithUnits:null});for(const t of o){let r=null;if(n.plugins.has("ImageCustomResizeUI")&&N_(t)){const i=n.plugins.get("ImageCustomResizeUI");r={type:"button",model:new Fg({label:this._getOptionLabelValue(t),role:"menuitemradio",withText:!0,icon:null,onClick:()=>{i._showForm(this._resizeUnit)}})};const s=Object.values(o).map(t=>t.valueWithUnits);r.model.bind("isOn").to(e,"value",e,"isEnabled",V_(s))}else r={type:"button",model:new Fg({commandName:"resizeImage",commandValue:t.valueWithUnits,label:this._getOptionLabelValue(t),role:"menuitemradio",withText:!0,icon:null})},r.model.bind("isOn").to(e,"value",e,"isEnabled",L_(t.valueWithUnits));r.model.bind("isEnabled").to(e,"isEnabled"),i.add(r)}return i}}function N_(t){return"custom"===t.value}function L_(t){return(e,n)=>!(void 0===e||!n)&&(null===t&&e===t||null!==e&&e.width===t)}function V_(t){return(e,n)=>!t.some(t=>L_(t)(e,n))}const z_="image_resized";class O_ extends nc{static get requires(){return[Af,zw]}static get pluginName(){return"ImageResizeHandles"}static get isOfficialPlugin(){return!0}init(){const t=this.editor.commands.get("resizeImage");this.bind("isEnabled").to(t),this._setupResizerCreator()}_setupResizerCreator(){const t=this.editor,e=t.editing.view,n=t.plugins.get("ImageUtils");e.addObserver(Kw),this.listenTo(e.document,"imageLoaded",(i,o)=>{if(!o.target.matches("figure.image.ck-widget > img,figure.image.ck-widget > picture > img,figure.image.ck-widget > a > img,figure.image.ck-widget > a > picture > img,span.image-inline.ck-widget > img,span.image-inline.ck-widget > picture > img"))return;const r=t.editing.view.domConverter,s=r.domToView(o.target),a=n.getImageWidgetFromImageView(s);let l=this.editor.plugins.get(Af).getResizerByViewElement(a);if(l)return void l.redraw();const c=t.editing.mapper,d=c.toModelElement(a);l=t.plugins.get(Af).attachTo({unit:t.config.get("image.resizeUnit"),modelElement:d,viewElement:a,editor:t,getHandleHost:t=>t.querySelector("img"),getResizeHost:()=>r.mapViewToDom(c.toViewElement(d)),isCentered:()=>"alignCenter"==d.getAttribute("imageStyle"),onCommit(n){e.change(t=>{t.removeClass(z_,a)}),t.execute("resizeImage",{width:n})}}),l.on("updateSize",()=>{a.hasClass(z_)||e.change(t=>{t.addClass(z_,a)});const t="imageInline"===d.name?s:a;t.getStyle("height")&&e.change(e=>{e.removeStyle("height",t)})}),l.bind("isEnabled").to(this)})}}function R_(t){if(!t)return null;const[,e,n]=t.trim().match(/([.,\d]+)(%|px)$/)||[],i=Number.parseFloat(e);return Number.isNaN(i)?null:{value:i,unit:n}}function D_(t,e,n){return"px"===n?{value:e.value,unit:"px"}:{value:e.value/t*100,unit:"%"}}function B_(t){const{editing:e}=t,n=t.plugins.get("ImageUtils").getClosestSelectedImageElement(t.model.document.selection);if(!n)return null;const i=e.mapper.toViewElement(n);return{model:n,view:i,dom:e.view.domConverter.mapViewToDom(i)}}class F_ extends ku{focusTracker;keystrokes;unit;backButtonView;saveButtonView;labeledInput;children;_focusables;_focusCycler;_validators;constructor(t,e,n){super(t),this.focusTracker=new _n,this.keystrokes=new xn,this.unit=e,this.backButtonView=this._createBackButton(),this.saveButtonView=this._createSaveButton(),this.labeledInput=this._createLabeledInputView(),this.children=this.createCollection([this._createHeaderView()]),this.children.add(new Dg(t,{children:[this.labeledInput,this.saveButtonView],class:["ck-form__row_with-submit","ck-form__row_large-top-padding"]})),this._focusables=new Qd,this._validators=n,this.keystrokes.set("Esc",(t,e)=>{this.fire("cancel"),e()}),this._focusCycler=new Ou({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.setTemplate({tag:"form",attributes:{class:["ck","ck-form","ck-image-custom-resize-form","ck-responsive-form"],tabindex:"-1"},children:this.children})}render(){super.render(),Eu({view:this}),[this.backButtonView,this.labeledInput,this.saveButtonView].forEach(t=>{this._focusables.add(t),this.focusTracker.add(t.element)}),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}_createBackButton(){const t=this.locale.t,e=new Lu(this.locale);return e.set({class:"ck-button-back",label:t("Back"),icon:ed,tooltip:!0}),e.delegate("execute").to(this,"cancel"),e}_createSaveButton(){const t=this.locale.t,e=new Lu(this.locale);return e.set({label:t("Save"),withText:!0,type:"submit",class:"ck-button-action ck-button-bold"}),e}_createHeaderView(){const t=this.locale.t,e=new zu(this.locale,{label:t("Image Resize")});return e.children.add(this.backButtonView,0),e}_createLabeledInputView(){const t=this.locale.t,e=new kh(this.locale,Gh);return e.label=t("Resize image (in %0)",this.unit),e.class="ck-labeled-field-view_full-width",e.fieldView.set({step:.1}),e}isValid(){this.resetFormStatus();for(const t of this._validators){const e=t(this);if(e)return this.labeledInput.errorText=e,!1}return!0}resetFormStatus(){this.labeledInput.errorText=null}get rawSize(){const{element:t}=this.labeledInput.fieldView;return t?t.value:null}get parsedSize(){const{rawSize:t}=this;if(null===t)return null;const e=Number.parseFloat(t);return Number.isNaN(e)?null:e}get sizeWithUnits(){const{parsedSize:t,unit:e}=this;return null===t?null:`${t}${e}`}}class j_ extends nc{_balloon;_form;static get requires(){return[Hg]}static get pluginName(){return"ImageCustomResizeUI"}static get isOfficialPlugin(){return!0}destroy(){super.destroy(),this._form&&this._form.destroy()}_createForm(t){const e=this.editor;this._balloon=this.editor.plugins.get("ContextualBalloon"),this._form=new(xu(F_))(e.locale,t,function(t){const e=t.t;return[t=>""===t.rawSize.trim()?e("The value must not be empty."):null===t.parsedSize?e("The value should be a plain number."):void 0]}(e)),this._form.render(),this.listenTo(this._form,"submit",()=>{this._form.isValid()&&(e.execute("resizeImage",{width:this._form.sizeWithUnits}),this._hideForm(!0))}),this.listenTo(this._form.labeledInput,"change:errorText",()=>{e.ui.update()}),this.listenTo(this._form,"cancel",()=>{this._hideForm(!0)}),Cu({emitter:this._form,activator:()=>this._isVisible,contextElements:()=>[this._balloon.view.element],callback:()=>this._hideForm()})}_showForm(t){if(this._isVisible)return;this._form||this._createForm(t);const e=this.editor,n=this._form.labeledInput;this._form.disableCssTransitions(),this._form.resetFormStatus(),this._isInBalloon||this._balloon.add({view:this._form,position:Hw(e)});const i=function(t,e){const n=B_(t);if(!n)return null;const i=R_(n.model.getAttribute("resizedWidth")||null);return i?i.unit===e?i:D_(rf(n.dom),{value:new Ie(n.dom).width},e):null}(e,t),o=i?i.value.toFixed(1):"",r=function(t,e){const n=B_(t);if(!n)return null;const i=rf(n.dom),o=R_(window.getComputedStyle(n.dom).minWidth)||{value:1};return{unit:e,lower:Math.max(.1,D_(i,o,e).value),upper:"px"===e?i:100}}(e,t);n.fieldView.value=n.fieldView.element.value=o,r&&Object.assign(n.fieldView,{min:r.lower.toFixed(1),max:Math.ceil(r.upper).toFixed(1)}),this._form.labeledInput.fieldView.select(),this._form.enableCssTransitions()}_hideForm(t=!1){this._isInBalloon&&(this._form.focusTracker.isFocused&&this._form.saveButtonView.focus(),this._balloon.remove(this._form),t&&this.editor.editing.view.focus())}get _isVisible(){return!!this._balloon&&this._balloon.visibleView===this._form}get _isInBalloon(){return!!this._balloon&&this._balloon.hasView(this._form)}}class H_ extends nc{static get requires(){return[I_,O_,j_,M_]}static get pluginName(){return"ImageResize"}static get isOfficialPlugin(){return!0}}class U_ extends oc{_defaultStyles;_styles;constructor(t,e){super(t),this._defaultStyles={imageBlock:!1,imageInline:!1},this._styles=new Map(e.map(t=>{if(t.isDefault)for(const e of t.modelElements)this._defaultStyles[e]=t.name;return[t.name,t]}))}refresh(){const t=this.editor.plugins.get("ImageUtils").getClosestSelectedImageElement(this.editor.model.document.selection);this.isEnabled=!!t,this.isEnabled?t.hasAttribute("imageStyle")?this.value=t.getAttribute("imageStyle"):this.value=this._defaultStyles[t.name]:this.value=!1}execute(t={}){const e=this.editor,n=e.model,i=e.plugins.get("ImageUtils");n.change(e=>{const o=t.value,{setImageSizes:r=!0}=t;let s=i.getClosestSelectedImageElement(n.document.selection);o&&this.shouldConvertImageType(o,s)&&(this.editor.execute(i.isBlockImage(s)?"imageTypeInline":"imageTypeBlock",{setImageSizes:r}),s=i.getClosestSelectedImageElement(n.document.selection)),!o||this._styles.get(o).isDefault?e.removeAttribute("imageStyle",s):e.setAttribute("imageStyle",o,s),r&&i.setImageNaturalSizeAttributes(s)})}shouldConvertImageType(t,e){return!this._styles.get(t).modelElements.includes(e.name)}}const $_={get inline(){return{name:"inline",title:"In line",icon:Yc,modelElements:["imageInline"],isDefault:!0}},get alignLeft(){return{name:"alignLeft",title:"Left aligned image",icon:Gc,modelElements:["imageBlock","imageInline"],className:"image-style-align-left"}},get alignBlockLeft(){return{name:"alignBlockLeft",title:"Left aligned image",icon:Jc,modelElements:["imageBlock"],className:"image-style-block-align-left"}},get alignCenter(){return{name:"alignCenter",title:"Centered image",icon:Kc,modelElements:["imageBlock"],className:"image-style-align-center"}},get alignRight(){return{name:"alignRight",title:"Right aligned image",icon:Qc,modelElements:["imageBlock","imageInline"],className:"image-style-align-right"}},get alignBlockRight(){return{name:"alignBlockRight",title:"Right aligned image",icon:Zc,modelElements:["imageBlock"],className:"image-style-block-align-right"}},get block(){return{name:"block",title:"Centered image",icon:Kc,modelElements:["imageBlock"],isDefault:!0}},get side(){return{name:"side",title:"Side image",icon:Qc,modelElements:["imageBlock"],className:"image-style-side"}}},W_=(()=>({full:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M2 3h16v1.5H2zm0 12h16v1.5H2z" opacity=".5"/><path d="M18 7v5.5a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1m-1.505.5H3.504V12h12.991z"/></svg>',left:Jc,right:Zc,center:Kc,inlineLeft:Gc,inlineRight:Qc,inline:Yc}))(),q_=[{name:"imageStyle:wrapText",title:"Wrap text",defaultItem:"imageStyle:alignLeft",items:["imageStyle:alignLeft","imageStyle:alignRight"]},{name:"imageStyle:breakText",title:"Break text",defaultItem:"imageStyle:block",items:["imageStyle:alignBlockLeft","imageStyle:block","imageStyle:alignBlockRight"]}];function K_(t){zt("image-style-configuration-definition-invalid",t)}const G_={normalizeStyles:function(t){return(t.configuredStyles.options||[]).map(t=>{return"string"==typeof(e="string"==typeof(e=t)?$_[e]?{...$_[e]}:{name:e}:function(t,e){const n={...e};for(const i in t)Object.prototype.hasOwnProperty.call(e,i)||(n[i]=t[i]);return n}($_[e.name],e)).icon&&(e.icon=W_[e.icon]||e.icon),e;var e}).filter(e=>function(t,{isBlockPluginLoaded:e,isInlinePluginLoaded:n}){const{modelElements:i,name:o}=t;if(!(i&&i.length&&o))return K_({style:t}),!1;{const o=[e?"imageBlock":null,n?"imageInline":null];if(!i.some(t=>o.includes(t)))return zt("image-style-missing-dependency",{style:t,missingPlugins:i.map(t=>"imageBlock"===t?"ImageBlockEditing":"ImageInlineEditing")}),!1}return!0}(e,t))},getDefaultStylesConfiguration:function(t,e){return t&&e?{options:["inline","alignLeft","alignRight","alignCenter","alignBlockLeft","alignBlockRight","block","side"]}:t?{options:["block","side"]}:e?{options:["inline","alignLeft","alignRight"]}:{}},getDefaultDropdownDefinitions:function(t){return t.has("ImageBlockEditing")&&t.has("ImageInlineEditing")?[...q_]:[]},warnInvalidStyle:K_};function Q_(t,e){for(const n of e)if(n.name===t)return n}class Y_ extends nc{static get pluginName(){return"ImageStyleEditing"}static get isOfficialPlugin(){return!0}static get requires(){return[zw]}normalizedStyles;init(){const t=this.editor,e=t.plugins.has("ImageBlockEditing"),n=t.plugins.has("ImageInlineEditing");t.config.define("image.styles",G_.getDefaultStylesConfiguration(e,n)),this.normalizedStyles=G_.normalizeStyles({configuredStyles:t.config.get("image.styles"),isBlockPluginLoaded:e,isInlinePluginLoaded:n}),this._setupConversion(e,n),this._setupPostFixer(),t.commands.add("imageStyle",new U_(t,this.normalizedStyles))}_setupConversion(t,e){const n=this.editor,i=n.model.schema,o=(r=this.normalizedStyles,(t,e,n)=>{if(!n.consumable.consume(e.item,t.name))return;const i=Q_(e.attributeNewValue,r),o=Q_(e.attributeOldValue,r),s=n.mapper.toViewElement(e.item),a=n.writer;o&&a.removeClass(o.className,s),i&&a.addClass(i.className,s)});var r;const s=function(t){const e={imageInline:t.filter(t=>!t.isDefault&&t.modelElements.includes("imageInline")),imageBlock:t.filter(t=>!t.isDefault&&t.modelElements.includes("imageBlock"))};return(t,n,i)=>{if(!n.modelRange)return;const o=n.viewItem,r=wn(n.modelRange.getItems());if(r&&i.schema.checkAttribute(r,"imageStyle"))for(const t of e[r.name])i.consumable.consume(o,{classes:t.className})&&i.writer.setAttribute("imageStyle",t.name,r)}}(this.normalizedStyles);n.editing.downcastDispatcher.on("attribute:imageStyle",o),n.data.downcastDispatcher.on("attribute:imageStyle",o),t&&(i.extend("imageBlock",{allowAttributes:"imageStyle"}),i.setAttributeProperties("imageStyle",{isFormatting:!0}),n.data.upcastDispatcher.on("element:figure",s,{priority:"low"})),e&&(i.extend("imageInline",{allowAttributes:"imageStyle"}),i.setAttributeProperties("imageStyle",{isFormatting:!0}),n.data.upcastDispatcher.on("element:img",s,{priority:"low"}))}_setupPostFixer(){const t=this.editor,e=t.model.document,n=t.plugins.get(zw),i=new Map(this.normalizedStyles.map(t=>[t.name,t]));e.registerPostFixer(t=>{let o=!1;for(const r of e.differ.getChanges())if("insert"==r.type||"attribute"==r.type&&"imageStyle"==r.attributeKey){let e="insert"==r.type?r.position.nodeAfter:r.range.start.nodeAfter;if(e&&e.is("element","paragraph")&&e.childCount>0&&(e=e.getChild(0)),!n.isImage(e))continue;const s=e.getAttribute("imageStyle");if(!s)continue;const a=i.get(s);a&&a.modelElements.includes(e.name)||(t.removeAttribute("imageStyle",e),o=!0)}return o})}}class J_ extends nc{static get requires(){return[Y_]}static get pluginName(){return"ImageStyleUI"}static get isOfficialPlugin(){return!0}get localizedDefaultStylesTitles(){const t=this.editor.t;return{"Wrap text":t("Wrap text"),"Break text":t("Break text"),"In line":t("In line"),"Full size image":t("Full size image"),"Side image":t("Side image"),"Left aligned image":t("Left aligned image"),"Centered image":t("Centered image"),"Right aligned image":t("Right aligned image")}}init(){const t=this.editor.plugins,e=this.editor.config.get("image.toolbar")||[],n=Z_(t.get("ImageStyleEditing").normalizedStyles,this.localizedDefaultStylesTitles);for(const t of n)this._createButton(t);const i=Z_([...e.filter(x),...G_.getDefaultDropdownDefinitions(t)],this.localizedDefaultStylesTitles);for(const t of i)this._createDropdown(t,n)}_createDropdown(t,e){const n=this.editor.ui.componentFactory;n.add(t.name,i=>{let o;const{defaultItem:r,items:s,title:a}=t,l=s.filter(t=>e.find(({name:e})=>X_(e)===t)).map(t=>{const e=n.create(t);return t===r&&(o=e),e});s.length!==l.length&&G_.warnInvalidStyle({dropdown:t});const c=Bh(i,Dh),d=c.buttonView,u=d.arrowView;return Fh(c,l,{enableActiveItemFocusOnDropdownOpen:!0}),d.set({label:tv(a,o.label),class:null,tooltip:!0}),u.unbind("label"),u.set({label:a}),d.bind("icon").toMany(l,"isOn",(...t)=>{const e=t.findIndex(Tw);return e<0?o.icon:l[e].icon}),d.bind("label").toMany(l,"isOn",(...t)=>{const e=t.findIndex(Tw);return tv(a,e<0?o.label:l[e].label)}),d.bind("isOn").toMany(l,"isOn",(...t)=>t.some(Tw)),d.bind("class").toMany(l,"isOn",(...t)=>t.some(Tw)?"ck-splitbutton_flatten":void 0),d.on("execute",()=>{l.some(({isOn:t})=>t)?c.isOpen=!c.isOpen:o.fire("execute")}),c.bind("isEnabled").toMany(l,"isEnabled",(...t)=>t.some(Tw)),this.listenTo(c,"execute",()=>{this.editor.editing.view.focus()}),c})}_createButton(t){const e=t.name;this.editor.ui.componentFactory.add(X_(e),n=>{const i=this.editor.commands.get("imageStyle"),o=new Lu(n);return o.set({label:t.title,icon:t.icon,tooltip:!0,isToggleable:!0}),o.bind("isEnabled").to(i,"isEnabled"),o.bind("isOn").to(i,"value",t=>t===e),o.on("execute",this._executeCommand.bind(this,e)),o})}_executeCommand(t){this.editor.execute("imageStyle",{value:t}),this.editor.editing.view.focus()}}function Z_(t,e){for(const n of t)e[n.title]&&(n.title=e[n.title]);return t}function X_(t){return`imageStyle:${t}`}function tv(t,e){return(t?t+": ":"")+e}class ev extends nc{static get requires(){return[Y_,J_]}static get pluginName(){return"ImageStyle"}static get isOfficialPlugin(){return!0}}class nv extends nc{static get requires(){return[bf,zw]}static get pluginName(){return"ImageToolbar"}static get isOfficialPlugin(){return!0}afterInit(){const t=this.editor,e=t.t,n=t.plugins.get(bf),i=t.plugins.get("ImageUtils");var o;n.register("image",{ariaLabel:e("Image toolbar"),items:(o=t.config.get("image.toolbar")||[],o.map(t=>x(t)?t.name:t)),getRelatedElement:t=>i.getClosestSelectedImageWidget(t)})}}class iv extends nc{static get pluginName(){return"IndentEditing"}static get isOfficialPlugin(){return!0}init(){const t=this.editor;t.commands.add("indent",new sc(t)),t.commands.add("outdent",new sc(t))}}class ov extends nc{static get pluginName(){return"IndentUI"}static get isOfficialPlugin(){return!0}init(){const t=this.editor,e=t.locale,n=t.t,i="ltr"==e.uiLanguageDirection?Uc:Xc,o="ltr"==e.uiLanguageDirection?Xc:Uc;this._defineButton("indent",n("Increase indent"),i),this._defineButton("outdent",n("Decrease indent"),o)}_defineButton(t,e,n){const i=this.editor;i.ui.componentFactory.add(t,()=>{const i=this._createButton(Lu,t,e,n);return i.set({tooltip:!0}),i}),i.ui.componentFactory.add("menuBar:"+t,()=>this._createButton(Gu,t,e,n))}_createButton(t,e,n,i){const o=this.editor,r=o.commands.get(e),s=new t(o.locale);return s.set({label:n,icon:i}),s.bind("isEnabled").to(r,"isEnabled"),this.listenTo(s,"execute",()=>{o.execute(e),o.editing.view.focus()}),s}}class rv extends nc{static get pluginName(){return"Indent"}static get isOfficialPlugin(){return!0}static get requires(){return[iv,ov]}}class sv extends oc{_indentBehavior;constructor(t,e){super(t),this._indentBehavior=e}refresh(){const t=wn(this.editor.model.document.selection.getSelectedBlocks());t&&this._isIndentationChangeAllowed(t)?this.isEnabled=this._indentBehavior.checkEnabled(t.getAttribute("blockIndent")):this.isEnabled=!1}execute(){const t=this.editor.model,e=this._getBlocksToChange();t.change(t=>{for(const n of e){const e=n.getAttribute("blockIndent"),i=this._indentBehavior.getNextIndent(e);i?t.setAttribute("blockIndent",i,n):t.removeAttribute("blockIndent",n)}})}_getBlocksToChange(){const t=this.editor.model.document.selection;return Array.from(t.getSelectedBlocks()).filter(t=>this._isIndentationChangeAllowed(t))}_isIndentationChangeAllowed(t){const e=this.editor;return!!e.model.schema.checkAttribute(t,"blockIndent")&&(!e.plugins.has("ListUtils")||(!this._indentBehavior.isForward||!e.plugins.get("ListUtils").isListItemBlock(t)))}}class av{isForward;offset;unit;constructor(t){this.isForward="forward"===t.direction,this.offset=t.offset,this.unit=t.unit}checkEnabled(t){const e=parseFloat(t||"0");return this.isForward||e>0}getNextIndent(t){const e=parseFloat(t||"0");if(t&&!t.endsWith(this.unit))return this.isForward?this.offset+this.unit:void 0;const n=e+(this.isForward?this.offset:-this.offset);return n>0?n+this.unit:void 0}}class lv{isForward;classes;constructor(t){this.isForward="forward"===t.direction,this.classes=t.classes}checkEnabled(t){const e=this.classes.indexOf(t);return this.isForward?e<this.classes.length-1:e>=0}getNextIndent(t){const e=this.classes.indexOf(t),n=this.isForward?1:-1;return this.classes[e+n]}}const cv=["paragraph","heading1","heading2","heading3","heading4","heading5","heading6"];class dv extends nc{constructor(t){super(t),t.config.define("indentBlock",{offset:40,unit:"px"})}static get pluginName(){return"IndentBlock"}static get isOfficialPlugin(){return!0}init(){const t=this.editor,e=t.config.get("indentBlock");e.classes&&e.classes.length?(this._setupConversionUsingClasses(e.classes),t.commands.add("indentBlock",new sv(t,new lv({direction:"forward",classes:e.classes}))),t.commands.add("outdentBlock",new sv(t,new lv({direction:"backward",classes:e.classes})))):(t.data.addStyleProcessorRules(Ul),this._setupConversionUsingOffset(),t.commands.add("indentBlock",new sv(t,new av({direction:"forward",offset:e.offset,unit:e.unit}))),t.commands.add("outdentBlock",new sv(t,new av({direction:"backward",offset:e.offset,unit:e.unit}))))}afterInit(){const t=this.editor,e=t.model.schema,n=t.commands.get("indent"),i=t.commands.get("outdent"),o=t.config.get("heading.options");(o&&o.map(t=>t.model)||cv).forEach(t=>{e.isRegistered(t)&&e.extend(t,{allowAttributes:"blockIndent"})}),e.setAttributeProperties("blockIndent",{isFormatting:!0}),n.registerChildCommand(t.commands.get("indentBlock")),i.registerChildCommand(t.commands.get("outdentBlock"))}_setupConversionUsingOffset(){const t=this.editor.conversion,e="rtl"===this.editor.locale.contentLanguageDirection?"margin-right":"margin-left";t.for("upcast").attributeToAttribute({view:{styles:{[e]:/[\s\S]+/}},model:{key:"blockIndent",value:t=>{if(!t.is("element","li"))return t.getStyle(e)}}}),t.for("downcast").attributeToAttribute({model:"blockIndent",view:t=>({key:"style",value:{[e]:t}})})}_setupConversionUsingClasses(t){const e={model:{key:"blockIndent",values:[]},view:{}};for(const n of t)e.model.values.push(n),e.view[n]={key:"class",value:[n]};this.editor.conversion.attributeToAttribute(e)}}function uv(t){return function(t){return t.substring(0,1).toUpperCase()+t.substring(1)}(Sc(t))}class hv{_definitions=new Set;get length(){return this._definitions.size}add(t){Array.isArray(t)?t.forEach(t=>this._definitions.add(t)):this._definitions.add(t)}getDispatcher(){return t=>{t.on("attribute:linkHref",(t,e,n)=>{if(!n.consumable.test(e.item,"attribute:linkHref"))return;if(!e.item.is("selection")&&!n.schema.isInline(e.item))return;const i=n.writer,o=i.document.selection;for(const t of this._definitions){const r=i.createAttributeElement("a",t.attributes,{priority:5});t.classes&&i.addClass(t.classes,r);for(const e in t.styles)i.setStyle(e,t.styles[e],r);i.setCustomProperty("link",!0,r),t.callback(e.attributeNewValue)?e.item.is("selection")?i.wrap(o.getFirstRange(),r):i.wrap(n.mapper.toViewRange(e.range),r):i.unwrap(n.mapper.toViewRange(e.range),r)}},{priority:"high"})}}getDispatcherForLinkedImage(){return t=>{t.on("attribute:linkHref:imageBlock",(t,e,{writer:n,mapper:i})=>{const o=i.toViewElement(e.item),r=Array.from(o.getChildren()).find(t=>t.is("element","a"));if(r)for(const t of this._definitions){const i=An(t.attributes);if(t.callback(e.attributeNewValue)){for(const[t,e]of i)"class"===t?n.addClass(e,r):n.setAttribute(t,e,r);t.classes&&n.addClass(t.classes,r);for(const e in t.styles)n.setStyle(e,t.styles[e],r)}else{for(const[t,e]of i)"class"===t?n.removeClass(e,r):n.removeAttribute(t,r);t.classes&&n.removeClass(t.classes,r);for(const e in t.styles)n.removeStyle(e,r)}}})}}}const gv=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g,mv=/^[\S]+@((?![-_])(?:[-\w\u00a1-\uffff]{0,63}[^-_]\.))+(?:[a-z\u00a1-\uffff]{2,})$/i,pv=/^((\w+:(\/{2,})?)|(\W))/i,fv=["https?","ftps?","mailto"],bv="Ctrl+K";function kv(t,{writer:e}){const n=e.createAttributeElement("a",{href:t},{priority:5});return e.setCustomProperty("link",!0,n),n}function wv(t,e=fv){const n=String(t),i=e.join("|");return function(t,e){return!!t.replace(gv,"").match(e)}(n,new RegExp(`${"^(?:(?:<protocols>):|[^a-z]|[a-z+.-]+(?:[^a-z+.:-]|$))".replace("<protocols>",i)}`,"i"))?n:"#"}function _v(t,e){return!!t&&e.checkAttribute(t.name,"linkHref")}function vv(t,e){const n=(i=t,mv.test(i)?"mailto:":e);var i;const o=!!n&&!yv(t);return t&&o?n+t:t}function yv(t){return pv.test(t)}function Cv(t){let e="";for(const n of t.getItems()){if(!n.is("$text")&&!n.is("$textProxy"))return;e+=n.data}return e}class xv extends oc{manualDecorators=new kn;automaticDecorators=new hv;restoreManualDecoratorStates(){for(const t of this.manualDecorators)t.value=this._getDecoratorStateFromModel(t.id)}refresh(){const t=this.editor.model,e=t.document.selection,n=e.getSelectedElement()||wn(e.getSelectedBlocks());_v(n,t.schema)?(this.value=n.getAttribute("linkHref"),this.isEnabled=t.schema.checkAttribute(n,"linkHref")):(this.value=e.getAttribute("linkHref"),this.isEnabled=t.schema.checkAttributeInSelection(e,"linkHref"));for(const t of this.manualDecorators)t.value=this._getDecoratorStateFromModel(t.id)}execute(t,e={},n){const i=this.editor.model,o=i.document.selection,r=[],s=[];for(const t in e)e[t]?r.push(t):s.push(t);i.change(e=>{const a=n=>{e.setAttribute("linkHref",t,n),r.forEach(t=>e.setAttribute(t,!0,n)),s.forEach(t=>e.removeAttribute(t,n))},l=(o,r)=>{const s=Cv(o);if(!s)return o;let l=n;if(l||(l=r&&r==s?t:s),l!=s){const t=function(t,e){const n=Tt(t,e),i={equal:0,insert:0,delete:0},o=[];let r="",s="";for(const a of[...n,null])"insert"==a?s+=e[i.equal+i.insert]:"delete"==a?r+=t[i.equal+i.delete]:(r.length||s.length)&&(o.push({offset:i.equal,actual:r,expected:s}),r="",s=""),a&&i[a]++;return o}(s,l);let n=0;for(const{offset:r,actual:s,expected:l}of t){const t=r+n,c=e.createRange(o.start.getShiftedBy(t),o.start.getShiftedBy(t+s.length)),d=Av(c,o).getAttributes(),u=Array.from(d).filter(([t])=>i.schema.getAttributeProperties(t).isFormatting),h=e.createText(l,u);a(h),i.insertContent(h,c),n+=l.length}return e.createRange(o.start,o.start.getShiftedBy(l.length))}},c=t=>{const{plugins:n}=this.editor;if(e.setSelection(t.end),n.has("TwoStepCaretMovement"))n.get("TwoStepCaretMovement")._handleForwardMovement();else for(const t of["linkHref",...r,...s])e.removeSelectionAttribute(t)};if(o.isCollapsed){const s=o.getFirstPosition();if(o.hasAttribute("linkHref")){const t=o.getAttribute("linkHref"),e=qm(s,"linkHref",t,i),n=l(e,t);a(n||e),n&&c(n)}else if(""!==t){const a=An(o.getAttributes());a.set("linkHref",t),r.forEach(t=>{a.set(t,!0)}),c(i.insertContent(e.createText(n||t,a),s))}}else{const t=Array.from(o.getRanges()),n=i.schema.getValidRanges(t,"linkHref"),r=[];for(const t of o.getSelectedBlocks())i.schema.checkAttribute(t,"linkHref")&&r.push(e.createRangeOn(t));const s=r.slice();for(const t of n)this._isRangeToUpdate(t,r)&&s.push(t);const c=t.map(t=>({start:ma.fromPosition(t.start,"toPrevious"),end:ma.fromPosition(t.end,"toNext")}));for(let t of s)t=l(t,(t.start.textNode||t.start.nodeAfter).getAttribute("linkHref"))||t,a(t);e.setSelection(c.map(t=>{const e=t.start.toPosition(),n=t.end.toPosition();return t.start.detach(),t.end.detach(),i.createRange(e,n)}))}})}_getDecoratorStateFromModel(t){const e=this.editor.model,n=e.document.selection,i=n.getSelectedElement();return _v(i,e.schema)?i.getAttribute(t):n.getAttribute(t)}_isRangeToUpdate(t,e){for(const n of e)if(n.containsRange(t))return!1;return!0}}function Av(t,e){if(!t.isCollapsed)return wn(t.getItems());const n=t.start;return n.textNode?n.textNode:!n.nodeBefore||n.isEqual(e.start)?n.nodeAfter:n.nodeBefore}class Ev extends oc{refresh(){const t=this.editor.model,e=t.document.selection,n=e.getSelectedElement();_v(n,t.schema)?this.isEnabled=t.schema.checkAttribute(n,"linkHref"):this.isEnabled=t.schema.checkAttributeInSelection(e,"linkHref")}execute(){const t=this.editor,e=this.editor.model,n=e.document.selection,i=t.commands.get("link");e.change(t=>{const o=n.isCollapsed?[qm(n.getFirstPosition(),"linkHref",n.getAttribute("linkHref"),e)]:e.schema.getValidRanges(n.getRanges(),"linkHref");for(const e of o)if(t.removeAttribute("linkHref",e),i)for(const n of i.manualDecorators)t.removeAttribute(n.id,e)})}}class Sv extends(ie()){id;defaultValue;label;attributes;classes;styles;constructor({id:t,label:e,attributes:n,classes:i,styles:o,defaultValue:r}){super(),this.id=t,this.set("value",void 0),this.defaultValue=r,this.label=e,this.attributes=n,this.classes=i,this.styles=o}_createPattern(){return{attributes:this.attributes,classes:this.classes,styles:this.styles}}}const Tv="automatic",Iv=/^(https?:)?\/\//;class Pv extends nc{_linkOpeners=[];static get pluginName(){return"LinkEditing"}static get isOfficialPlugin(){return!0}static get requires(){return[Lm,km,Df]}constructor(t){super(t),t.config.define("link",{allowCreatingEmptyLinks:!1,addTargetToExternalLinks:!1,toolbar:["linkPreview","|","editLink","linkProperties","unlink"]})}init(){const t=this.editor,e=this.editor.config.get("link.allowedProtocols");t.model.schema.extend("$text",{allowAttributes:"linkHref"}),t.conversion.for("dataDowncast").attributeToElement({model:"linkHref",view:kv}),t.conversion.for("editingDowncast").attributeToElement({model:"linkHref",view:(t,n)=>kv(wv(t,e),n)}),t.conversion.for("upcast").elementToAttribute({view:{name:"a",attributes:{href:!0}},model:{key:"linkHref",value:t=>t.getAttribute("href")}}),t.commands.add("link",new xv(t)),t.commands.add("unlink",new Ev(t));const n=function(t,e){const n={"Open in a new tab":t("Open in a new tab"),Downloadable:t("Downloadable")};return e.forEach(t=>("label"in t&&n[t.label]&&(t.label=n[t.label]),t)),e}(t.t,function(t){const e=[];if(t)for(const[n,i]of Object.entries(t)){const t=Object.assign({},i,{id:`link${uv(n)}`});e.push(t)}return e}(t.config.get("link.decorators")));this._enableAutomaticDecorators(n.filter(t=>t.mode===Tv)),this._enableManualDecorators(n.filter(t=>"manual"===t.mode)),t.plugins.get(Lm).registerAttribute("linkHref"),Gm(t,"linkHref","a","ck-link_selected"),this._enableLinkOpen(),this._enableSelectionAttributesFixer(),this._enableClipboardIntegration()}_registerLinkOpener(t){this._linkOpeners.push(t)}_enableAutomaticDecorators(t){const e=this.editor,n=e.commands.get("link").automaticDecorators;e.config.get("link.addTargetToExternalLinks")&&n.add({id:"linkIsExternal",mode:Tv,callback:t=>!!t&&Iv.test(t),attributes:{target:"_blank",rel:"noopener noreferrer"}}),n.add(t),n.length&&e.conversion.for("downcast").add(n.getDispatcher())}_enableManualDecorators(t){if(!t.length)return;const e=this.editor,n=e.commands.get("link").manualDecorators;t.forEach(t=>{e.model.schema.extend("$text",{allowAttributes:t.id});const i=new Sv(t);n.add(i),e.conversion.for("downcast").attributeToElement({model:i.id,view:(t,{writer:e,schema:n},{item:o})=>{if((o.is("selection")||n.isInline(o))&&t){const t=e.createAttributeElement("a",i.attributes,{priority:5});i.classes&&e.addClass(i.classes,t);for(const n in i.styles)e.setStyle(n,i.styles[n],t);return e.setCustomProperty("link",!0,t),t}}}),e.conversion.for("upcast").elementToAttribute({view:{name:"a",...i._createPattern()},model:{key:i.id}})})}_enableLinkOpen(){const t=this.editor,e=t.editing.view.document,n=t=>{var e;this._linkOpeners.some(e=>e(t))||(e=t,window.open(e,"_blank","noopener"))};this.listenTo(e,"click",(t,e)=>{if(!(ft.isMac?e.domEvent.metaKey:e.domEvent.ctrlKey))return;let i=e.domTarget;if("a"!=i.tagName.toLowerCase()&&(i=i.closest("a")),!i)return;const o=i.getAttribute("href");o&&(t.stop(),e.preventDefault(),n(o))},{context:"$capture"}),this.listenTo(e,"keydown",(e,i)=>{const o=t.commands.get("link").value;o&&i.keyCode===an.enter&&i.altKey&&(e.stop(),n(o))})}_enableSelectionAttributesFixer(){const t=this.editor.model,e=t.document.selection;this.listenTo(e,"change:attribute",(n,{attributeKeys:i})=>{i.includes("linkHref")&&!e.hasAttribute("linkHref")&&t.change(e=>{var n;!function(t,e){t.removeSelectionAttribute("linkHref");for(const n of e)t.removeSelectionAttribute(n)}(e,(n=t.schema,n.getDefinition("$text").allowAttributes.filter(t=>t.startsWith("link"))))})})}_enableClipboardIntegration(){const t=this.editor,e=t.model,n=this.editor.config.get("link.defaultProtocol");n&&this.listenTo(t.plugins.get("ClipboardPipeline"),"contentInsertion",(t,i)=>{e.change(t=>{const e=t.createRangeIn(i.content);for(const i of e.getItems())if(i.hasAttribute("linkHref")){const e=vv(i.getAttribute("linkHref"),n);t.setAttribute("linkHref",e,i)}})})}}class Mv extends Lu{constructor(t){super(t);const e=this.bindTemplate;this.set({href:void 0,withText:!0}),this.extendTemplate({attributes:{class:["ck-link-toolbar__preview"],href:e.to("href"),target:"_blank",rel:"noopener noreferrer"},on:{click:e.to(t=>{if(this.href){const e=()=>t.preventDefault();this.fire("navigate",this.href,e)}})}}),this.template.tag="a"}}class Nv extends ku{focusTracker=new _n;keystrokes=new xn;backButtonView;saveButtonView;displayedTextInputView;urlInputView;children;providersListChildren;_validators;_focusables=new Qd;_focusCycler;constructor(t,e){super(t),this._validators=e,this.backButtonView=this._createBackButton(),this.saveButtonView=this._createSaveButton(),this.displayedTextInputView=this._createDisplayedTextInput(),this.urlInputView=this._createUrlInput(),this.providersListChildren=this.createCollection(),this.children=this.createCollection([this._createHeaderView()]),this._createFormChildren(),this.listenTo(this.providersListChildren,"add",()=>{this.stopListening(this.providersListChildren,"add"),this.children.add(this._createProvidersListView())}),this._focusCycler=new Ou({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.setTemplate({tag:"form",attributes:{class:["ck","ck-form","ck-link-form","ck-responsive-form"],tabindex:"-1"},children:this.children})}render(){super.render(),Eu({view:this}),[this.urlInputView,this.saveButtonView,...this.providersListChildren,this.backButtonView,this.displayedTextInputView].forEach(t=>{this._focusables.add(t),this.focusTracker.add(t.element)}),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){this._focusCycler.focusFirst()}isValid(){this.resetFormStatus();for(const t of this._validators){const e=t(this);if(e)return this.urlInputView.errorText=e,!1}return!0}resetFormStatus(){this.urlInputView.errorText=null}_createBackButton(){const t=this.locale.t,e=new Lu(this.locale);return e.set({class:"ck-button-back",label:t("Back"),icon:ed,tooltip:!0}),e.delegate("execute").to(this,"cancel"),e}_createSaveButton(){const t=this.locale.t,e=new Lu(this.locale);return e.set({label:t("Insert"),tooltip:!1,withText:!0,type:"submit",class:"ck-button-action ck-button-bold"}),e}_createHeaderView(){const t=this.locale.t,e=new zu(this.locale,{label:t("Link")});return e.children.add(this.backButtonView,0),e}_createProvidersListView(){const t=new Ih(this.locale);return t.extendTemplate({attributes:{class:["ck-link-form__providers-list"]}}),t.items.bindTo(this.providersListChildren).using(t=>{const e=new Eh(this.locale);return e.children.add(t),e}),t}_createDisplayedTextInput(){const t=this.locale.t,e=new kh(this.locale,Kh);return e.label=t("Displayed text"),e.class="ck-labeled-field-view_full-width",e}_createUrlInput(){const t=this.locale.t,e=new kh(this.locale,Kh);return e.fieldView.inputMode="url",e.label=t("Link URL"),e.class="ck-labeled-field-view_full-width",e}_createFormChildren(){this.children.add(new Dg(this.locale,{children:[this.displayedTextInputView],class:["ck-form__row_large-top-padding"]})),this.children.add(new Dg(this.locale,{children:[this.urlInputView,this.saveButtonView],class:["ck-form__row_with-submit","ck-form__row_large-top-padding","ck-form__row_large-bottom-padding"]}))}get url(){const{element:t}=this.urlInputView.fieldView;return t?t.value.trim():null}}class Lv extends ku{focusTracker=new _n;keystrokes=new xn;backButtonView;listView;listChildren;emptyListInformation;children;_focusables=new Qd;_focusCycler;constructor(t){super(t),this.listChildren=this.createCollection(),this.backButtonView=this._createBackButton(),this.listView=this._createListView(),this.emptyListInformation=this._createEmptyLinksListItemView(),this.children=this.createCollection([this._createHeaderView(),this.emptyListInformation]),this.set("title",""),this.set("emptyListPlaceholder",""),this.set("hasItems",!1),this.listenTo(this.listChildren,"change",()=>{this.hasItems=this.listChildren.length>0}),this.on("change:hasItems",(t,e,n)=>{n?(this.children.remove(this.emptyListInformation),this.children.add(this.listView)):(this.children.remove(this.listView),this.children.add(this.emptyListInformation))}),this.keystrokes.set("Esc",(t,e)=>{this.fire("cancel"),e()}),this._focusCycler=new Ou({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.setTemplate({tag:"div",attributes:{class:["ck","ck-link-providers"],tabindex:"-1"},children:this.children})}render(){super.render(),[this.listView,this.backButtonView].forEach(t=>{this._focusables.add(t),this.focusTracker.add(t.element)}),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){this._focusCycler.focusFirst()}_createListView(){const t=new Ih(this.locale);return t.extendTemplate({attributes:{class:["ck-link-providers__list"]}}),t.items.bindTo(this.listChildren).using(t=>{const e=new Eh(this.locale);return e.children.add(t),e}),t}_createBackButton(){const t=this.locale.t,e=new Lu(this.locale);return e.set({class:"ck-button-back",label:t("Back"),icon:ed,tooltip:!0}),e.delegate("execute").to(this,"cancel"),e}_createHeaderView(){const t=new zu(this.locale);return t.bind("label").to(this,"title"),t.children.add(this.backButtonView,0),t}_createEmptyLinksListItemView(){const t=new ku(this.locale);return t.setTemplate({tag:"p",attributes:{class:["ck","ck-link__empty-list-info"]},children:[{text:this.bindTemplate.to("emptyListPlaceholder")}]}),t}}class Vv extends ku{focusTracker=new _n;keystrokes=new xn;backButtonView;children;listChildren;_focusables=new Qd;_focusCycler;constructor(t){super(t),this.backButtonView=this._createBackButton(),this.listChildren=this.createCollection(),this.children=this.createCollection([this._createHeaderView(),this._createListView()]),this._focusCycler=new Ou({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.setTemplate({tag:"div",attributes:{class:["ck","ck-link-properties"],tabindex:"-1"},children:this.children}),this.keystrokes.set("Esc",(t,e)=>{this.fire("back"),e()})}render(){super.render(),[...this.listChildren,this.backButtonView].forEach(t=>{this._focusables.add(t),this.focusTracker.add(t.element)}),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){this._focusCycler.focusFirst()}_createBackButton(){const t=this.locale.t,e=new Lu(this.locale);return e.set({class:"ck-button-back",label:t("Back"),icon:ed,tooltip:!0}),e.delegate("execute").to(this,"back"),e}_createHeaderView(){const t=this.locale.t,e=new zu(this.locale,{label:t("Link properties")});return e.children.add(this.backButtonView,0),e}_createListView(){const t=new Ih(this.locale);return t.extendTemplate({attributes:{class:["ck-link__list"]}}),t.items.bindTo(this.listChildren).using(t=>{const e=new Eh(this.locale);return e.children.add(t),e}),t}}class zv extends Lu{arrowView;constructor(t){super(t),this.set({withText:!0}),this.arrowView=this._createArrowView(),this.extendTemplate({attributes:{class:["ck-link__button"]}})}render(){super.render(),this.children.add(this.arrowView)}_createArrowView(){const t=new Mu;return t.content=Wc,t}}const Ov="link-ui";class Rv extends nc{toolbarView=null;formView=null;linkProviderItemsView=null;propertiesView=null;_balloon;_linksProviders=new kn;static get requires(){return[Hg,Pv]}static get pluginName(){return"LinkUI"}static get isOfficialPlugin(){return!0}init(){const t=this.editor,e=this.editor.t;this.set("selectedLinkableText",void 0),t.editing.view.addObserver(el),this._balloon=t.plugins.get(Hg),this._registerComponents(),this._registerEditingOpeners(),this._enableBalloonActivators(),t.conversion.for("editingDowncast").markerToHighlight({model:Ov,view:{classes:["ck-fake-link-selection"]}}),t.conversion.for("editingDowncast").markerToElement({model:Ov,view:(t,{writer:e})=>{if(!t.markerRange.isCollapsed)return null;const n=e.createUIElement("span");return e.addClass(["ck-fake-link-selection","ck-fake-link-selection_collapsed"],n),n}}),t.accessibility.addKeystrokeInfos({keystrokes:[{label:e("Create link"),keystroke:bv},{label:e("Move out of a link"),keystroke:[["arrowleft","arrowleft"],["arrowright","arrowright"]]}]})}destroy(){super.destroy(),this.propertiesView&&this.propertiesView.destroy(),this.formView&&this.formView.destroy(),this.toolbarView&&this.toolbarView.destroy(),this.linkProviderItemsView&&this.linkProviderItemsView.destroy()}registerLinksListProvider(t){const e=this._linksProviders.filter(e=>(e.order||0)<=(t.order||0)).length;this._linksProviders.add(t,e)}_createViews(){const t=this.editor.commands.get("link");this.toolbarView=this._createToolbarView(),this.formView=this._createFormView(),t.manualDecorators.length&&(this.propertiesView=this._createPropertiesView()),this._enableUserBalloonInteractions()}_createToolbarView(){const t=this.editor,e=new Vh(t.locale),n=t.commands.get("link");e.class="ck-link-toolbar";let i=t.config.get("link.toolbar");return n.manualDecorators.length||(i=i.filter(t=>"linkProperties"!==t)),e.fillFromConfig(i,t.ui.componentFactory),e.keystrokes.set("Esc",(t,e)=>{this._hideUI(),e()}),e.keystrokes.set(bv,(t,e)=>{this._addFormView(),e()}),t.ui.addToolbar(e,{isContextual:!0,beforeFocus:()=>{this._getSelectedLinkElement()&&!this._isToolbarVisible&&this._showUI(!0)},afterBlur:()=>{this._hideUI(!1)}}),e}_createFormView(){const t=this.editor,e=t.locale.t,n=t.commands.get("link"),i=t.config.get("link.defaultProtocol"),o=new(xu(Nv))(t.locale,function(t){const e=t.t,n=t.config.get("link.allowCreatingEmptyLinks");return[t=>{if(!n&&!t.url.length)return e("Link URL must not be empty.")}]}(t));return o.displayedTextInputView.bind("isEnabled").to(this,"selectedLinkableText",t=>void 0!==t),o.urlInputView.bind("isEnabled").to(n,"isEnabled"),o.saveButtonView.bind("isEnabled").to(n,"isEnabled"),o.saveButtonView.bind("label").to(n,"value",t=>e(t?"Update":"Insert")),this.listenTo(o,"submit",()=>{if(o.isValid()){const e=vv(o.urlInputView.fieldView.element.value,i),n=o.displayedTextInputView.fieldView.element.value;t.execute("link",e,this._getDecoratorSwitchesState(),n!==this.selectedLinkableText?n:void 0),this._closeFormView()}}),this.listenTo(o.urlInputView,"change:errorText",()=>{t.ui.update()}),this.listenTo(o,"cancel",()=>{this._closeFormView()}),o.keystrokes.set("Esc",(t,e)=>{this._closeFormView(),e()}),o.providersListChildren.bindTo(this._linksProviders).using(t=>this._createLinksListProviderButton(t)),o}_createLinkProviderListView(t){return t.getListItems().map(({href:t,label:e,icon:n})=>{const i=new Lu;return i.set({label:e,icon:n,tooltip:!1,withText:!0}),i.on("execute",()=>{this.formView.resetFormStatus(),this.formView.urlInputView.fieldView.value=t,this.editor.editing.view.focus(),this._removeLinksProviderView(),this.formView.focus()}),i})}_createLinkProviderItemsView(t){const e=this.editor,n=e.locale.t,i=new Lv(e.locale),{emptyListPlaceholder:o,label:r}=t;return i.emptyListPlaceholder=o||n("No links available"),i.title=r,this.listenTo(i,"cancel",()=>{e.editing.view.focus(),this._removeLinksProviderView(),this.formView.focus()}),i}_createPropertiesView(){const t=this.editor,e=this.editor.commands.get("link"),n=new(xu(Vv))(t.locale);return this.listenTo(n,"back",()=>{t.editing.view.focus(),this._removePropertiesView()}),n.listChildren.bindTo(e.manualDecorators).using(n=>{const i=new rh(t.locale);return i.set({label:n.label,withText:!0}),i.bind("isOn").toMany([n,e],"value",(t,e)=>void 0===e&&void 0===t?!!n.defaultValue:!!t),i.on("execute",()=>{n.set("value",!i.isOn),t.execute("link",e.value,this._getDecoratorSwitchesState())}),i}),n}_getDecoratorSwitchesState(){const t=this.editor.commands.get("link");return Array.from(t.manualDecorators).reduce((e,n)=>{const i=void 0===t.value&&void 0===n.value?n.defaultValue:n.value;return{...e,[n.id]:!!i}},{})}_registerEditingOpeners(){this.editor.plugins.get(Pv)._registerLinkOpener(t=>{const e=this._getLinkProviderLinkByHref(t);if(!e)return!1;const{item:n,provider:i}=e;return!!i.navigate&&i.navigate(n)})}_registerComponents(){const t=this.editor;t.ui.componentFactory.add("link",()=>{const t=this._createButton(Lu);return t.set({tooltip:!0}),t}),t.ui.componentFactory.add("menuBar:link",()=>{const t=this._createButton(Gu);return t.set({role:"menuitemcheckbox"}),t}),t.ui.componentFactory.add("linkPreview",e=>{const n=new Mv(e),i=t.config.get("link.allowedProtocols"),o=t.commands.get("link"),r=e.t;n.bind("isEnabled").to(o,"value",t=>!!t),n.bind("href").to(o,"value",t=>t&&wv(t,i));const s=t=>{if(!t)return n.label=void 0,n.icon=void 0,void(n.tooltip=r("Open link in new tab"));const e=this._getLinkProviderLinkByHref(t);if(e){const{label:t,tooltip:i,icon:o}=e.item;n.label=t,n.tooltip=i||!1,n.icon=o}else n.label=t,n.icon=void 0,n.tooltip=r("Open link in new tab")};return s(o.value),this.listenTo(o,"change:value",(t,e,n)=>{s(n)}),this.listenTo(n,"navigate",(t,e,n)=>{const i=this._getLinkProviderLinkByHref(e);if(!i)return;const{provider:o,item:r}=i,{navigate:s}=o;s&&s(r)&&(t.stop(),n())}),n}),t.ui.componentFactory.add("unlink",e=>{const n=t.commands.get("unlink"),i=new Lu(e),o=e.t;return i.set({label:o("Unlink"),icon:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="m11.077 15 .991-1.416a.75.75 0 1 1 1.229.86l-1.148 1.64a.8.8 0 0 1-.217.206 5.251 5.251 0 0 1-8.503-5.955.7.7 0 0 1 .12-.274l1.147-1.639a.75.75 0 1 1 1.228.86L4.933 10.7l.006.003a3.75 3.75 0 0 0 6.132 4.294zm5.494-5.335a.8.8 0 0 1-.12.274l-1.147 1.639a.75.75 0 1 1-1.228-.86l.86-1.23a3.75 3.75 0 0 0-6.144-4.301l-.86 1.229a.75.75 0 0 1-1.229-.86l1.148-1.64a.8.8 0 0 1 .217-.206 5.251 5.251 0 0 1 8.503 5.955m-4.563-2.532a.75.75 0 0 1 .184 1.045l-3.155 4.505a.75.75 0 1 1-1.229-.86l3.155-4.506a.75.75 0 0 1 1.045-.184m4.919 10.562-1.414 1.414a.75.75 0 1 1-1.06-1.06l1.414-1.415-1.415-1.414a.75.75 0 0 1 1.061-1.06l1.414 1.414 1.414-1.415a.75.75 0 0 1 1.061 1.061l-1.414 1.414 1.414 1.415a.75.75 0 0 1-1.06 1.06z"/></svg>',tooltip:!0}),i.bind("isEnabled").to(n),this.listenTo(i,"execute",()=>{t.execute("unlink"),this._hideUI()}),i}),t.ui.componentFactory.add("editLink",e=>{const n=t.commands.get("link"),i=new Lu(e),o=e.t;return i.set({label:o("Edit link"),icon:td,tooltip:!0}),i.bind("isEnabled").to(n),this.listenTo(i,"execute",()=>{this._addFormView()}),i}),t.ui.componentFactory.add("linkProperties",e=>{const n=t.commands.get("link"),i=new Lu(e),o=e.t;return i.set({label:o("Link properties"),icon:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M3.734 6.375H1.75a.75.75 0 0 1 0-1.5h1.984a2.626 2.626 0 0 1 5.032 0h9.48a.75.75 0 0 1 0 1.5h-9.48a2.626 2.626 0 0 1-5.032 0Zm1.141-.75a1.375 1.375 0 1 1 2.75 0 1.375 1.375 0 0 1-2.75 0ZM16.263 14.625h1.983a.75.75 0 0 1 0 1.5h-1.983a2.626 2.626 0 0 1-5.033 0H1.75a.75.75 0 0 1 0-1.5h9.48a2.626 2.626 0 0 1 5.033 0Zm-1.142.75a1.375 1.375 0 1 1-2.75 0 1.375 1.375 0 0 1 2.75 0Z"/></svg>\n',tooltip:!0}),i.bind("isEnabled").to(n,"isEnabled",n,"value",n,"manualDecorators",(t,e,n)=>t&&!!e&&n.length>0),this.listenTo(i,"execute",()=>{this._addPropertiesView()}),i})}_createLinksListProviderButton(t){const e=this.editor.locale,n=new zv(e);return n.set({label:t.label}),this.listenTo(n,"execute",()=>{this._showLinksProviderView(t)}),n}_createButton(t){const e=this.editor,n=e.locale,i=e.commands.get("link"),o=new t(e.locale),r=n.t;return o.set({label:r("Link"),icon:$c,keystroke:bv,isToggleable:!0}),o.bind("isEnabled").to(i,"isEnabled"),o.bind("isOn").to(i,"value",t=>!!t),this.listenTo(o,"execute",()=>{e.editing.view.scrollToTheSelection(),this._showUI(!0),this._getSelectedLinkElement()&&this._addFormView()}),o}_enableBalloonActivators(){const t=this.editor,e=t.editing.view.document;this.listenTo(e,"click",()=>{this._getSelectedLinkElement()&&this._showUI()}),t.keystrokes.set(bv,(e,n)=>{n(),t.commands.get("link").isEnabled&&(t.editing.view.scrollToTheSelection(),this._showUI(!0))})}_enableUserBalloonInteractions(){this.editor.keystrokes.set("Tab",(t,e)=>{this._isToolbarVisible&&!this.toolbarView.focusTracker.isFocused&&(this.toolbarView.focus(),e())},{priority:"high"}),this.editor.keystrokes.set("Esc",(t,e)=>{this._isUIVisible&&(this._hideUI(),e())}),Cu({emitter:this.formView,activator:()=>this._isUIInPanel,contextElements:()=>[this._balloon.view.element],callback:()=>{this._hideUI(!1)}})}_addToolbarView(){this.toolbarView||this._createViews(),this._isToolbarInPanel||this._balloon.add({view:this.toolbarView,position:this._getBalloonPositionData(),balloonClassName:"ck-toolbar-container"})}_addFormView(){if(this.formView||this._createViews(),this._isFormInPanel)return;const t=this.editor.commands.get("link");this.formView.disableCssTransitions(),this.formView.resetFormStatus(),this.formView.backButtonView.isVisible=t.isEnabled&&!!t.value,this._balloon.add({view:this.formView,position:this._getBalloonPositionData()}),this.selectedLinkableText=this._getSelectedLinkableText(),this.formView.displayedTextInputView.fieldView.value=this.selectedLinkableText||"",this.formView.urlInputView.fieldView.value=t.value||"",this._balloon.visibleView===this.formView&&this.formView.urlInputView.fieldView.select(),this.formView.enableCssTransitions()}_addPropertiesView(){this.propertiesView||this._createViews(),this._arePropertiesInPanel||(this.propertiesView.disableCssTransitions(),this._balloon.add({view:this.propertiesView,position:this._getBalloonPositionData()}),this.propertiesView.enableCssTransitions(),this.propertiesView.focus())}_showLinksProviderView(t){this.linkProviderItemsView&&this._removeLinksProviderView(),this.linkProviderItemsView=this._createLinkProviderItemsView(t),this._addLinkProviderItemsView(t)}_addLinkProviderItemsView(t){this.linkProviderItemsView.listChildren.clear(),this.linkProviderItemsView.listChildren.addMany(this._createLinkProviderListView(t)),this._balloon.add({view:this.linkProviderItemsView,position:this._getBalloonPositionData()}),this.linkProviderItemsView.focus()}_closeFormView(){const t=this.editor.commands.get("link");this.selectedLinkableText=void 0,void 0!==t.value?this._removeFormView():this._hideUI()}_removePropertiesView(){this._arePropertiesInPanel&&this._balloon.remove(this.propertiesView)}_removeLinksProviderView(){this._isLinksListInPanel&&this._balloon.remove(this.linkProviderItemsView)}_removeFormView(t=!0){this._isFormInPanel&&(this.formView.saveButtonView.focus(),this.formView.displayedTextInputView.fieldView.reset(),this.formView.urlInputView.fieldView.reset(),this._balloon.remove(this.formView),t&&this.editor.editing.view.focus(),this._hideFakeVisualSelection())}_showUI(t=!1){this.formView||this._createViews(),this._getSelectedLinkElement()?(this._isToolbarVisible?this._addFormView():this._addToolbarView(),t&&this._balloon.showStack("main")):(this._showFakeVisualSelection(),this._addToolbarView(),t&&this._balloon.showStack("main"),this._addFormView()),this._startUpdatingUI()}_hideUI(t=!0){const e=this.editor;this._isUIInPanel&&(this.stopListening(e.ui,"update"),this.stopListening(this._balloon,"change:visibleView"),t&&e.editing.view.focus(),this._removeLinksProviderView(),this._removePropertiesView(),this._removeFormView(t),this._isToolbarInPanel&&this._balloon.remove(this.toolbarView),this._hideFakeVisualSelection())}_startUpdatingUI(){const t=this.editor,e=t.editing.view.document;let n=this._getSelectedLinkElement(),i=r();const o=()=>{const t=this._getSelectedLinkElement(),e=r();n&&!t||!n&&e!==i?this._hideUI():this._isUIVisible&&this._balloon.updatePosition(this._getBalloonPositionData()),n=t,i=e};function r(){return e.selection.focus.getAncestors().reverse().find(t=>t.is("element"))}this.listenTo(t.ui,"update",o),this.listenTo(this._balloon,"change:visibleView",o)}get _arePropertiesInPanel(){return!!this.propertiesView&&this._balloon.hasView(this.propertiesView)}get _isLinksListInPanel(){return!!this.linkProviderItemsView&&this._balloon.hasView(this.linkProviderItemsView)}get _isFormInPanel(){return!!this.formView&&this._balloon.hasView(this.formView)}get _isToolbarInPanel(){return!!this.toolbarView&&this._balloon.hasView(this.toolbarView)}get _isPropertiesVisible(){return!!this.propertiesView&&this._balloon.visibleView===this.propertiesView}get _isFormVisible(){return!!this.formView&&this._balloon.visibleView==this.formView}get _isToolbarVisible(){return!!this.toolbarView&&this._balloon.visibleView===this.toolbarView}get _isUIInPanel(){return this._arePropertiesInPanel||this._isLinksListInPanel||this._isFormInPanel||this._isToolbarInPanel}get _isUIVisible(){return this._isPropertiesVisible||this._isLinksListInPanel||this._isFormVisible||this._isToolbarVisible}_getBalloonPositionData(){const t=this.editor.editing.view,e=t.document;if(this.editor.model.markers.has(Ov)){const e=this.editor.editing.mapper.markerNameToElements(Ov);if(e){const n=Array.from(e),i=t.createRange(t.createPositionBefore(n[0]),t.createPositionAfter(n[n.length-1]));return{target:t.domConverter.viewRangeToDom(i)}}}return{target:()=>{const n=this._getSelectedLinkElement();return n?t.domConverter.mapViewToDom(n):t.domConverter.viewRangeToDom(e.selection.getFirstRange())}}}_getSelectedLinkElement(){const t=this.editor.editing.view,e=t.document.selection,n=e.getSelectedElement();if(e.isCollapsed||n&&Yp(n))return Dv(e.getFirstPosition());{const n=e.getFirstRange().getTrimmed(),i=Dv(n.start),o=Dv(n.end);return i&&i==o&&t.createRangeIn(i).getTrimmed().isEqual(n)?i:null}}_getSelectedLinkableText(){const t=this.editor.model,e=this.editor.editing,n=this._getSelectedLinkElement();if(!n)return Cv(t.document.selection.getFirstRange());const i=e.view.createRangeOn(n);return Cv(e.mapper.toModelRange(i))}_getLinkProviderLinkByHref(t){if(!t)return null;for(const e of this._linksProviders){const n=e.getItem?e.getItem(t):e.getListItems().find(e=>e.href===t);if(n)return{provider:e,item:n}}return null}_showFakeVisualSelection(){const t=this.editor.model;t.change(e=>{const n=t.document.selection.getFirstRange();if(t.markers.has(Ov))e.updateMarker(Ov,{range:n});else if(n.start.isAtEnd){const i=n.start.getLastMatchingPosition(({item:e})=>!t.schema.isContent(e),{boundaries:n});e.addMarker(Ov,{usingOperation:!1,affectsData:!1,range:e.createRange(i,n.end)})}else e.addMarker(Ov,{usingOperation:!1,affectsData:!1,range:n})})}_hideFakeVisualSelection(){const t=this.editor.model;t.markers.has(Ov)&&t.change(t=>{t.removeMarker(Ov)})}}function Dv(t){return t.getAncestors().find(t=>{return(e=t).is("attributeElement")&&!!e.getCustomProperty("link");var e})||null}const Bv=new RegExp("(^|\\s)(((?:(?:(?:https?|ftp):)?\\/\\/)(?:\\S+(?::\\S*)?@)?(?:(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[1-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(((?!www\\.)|(www\\.))(?![-_])(?:[-_a-z0-9\\u00a1-\\uffff]{1,63}\\.)+(?:[a-z\\u00a1-\\uffff]{2,63}))|localhost)(?::\\d{2,5})?(?:[/?#]\\S*)?)|((www.|(\\S+@))((?![-_])(?:[-_a-z0-9\\u00a1-\\uffff]{1,63}\\.))+(?:[a-z\\u00a1-\\uffff]{2,63})))$","i");class Fv extends nc{static get requires(){return[Im,Pv]}static get pluginName(){return"AutoLink"}static get isOfficialPlugin(){return!0}init(){const t=this.editor.model.document.selection;t.on("change:range",()=>{this.isEnabled=!t.anchor.parent.is("element","codeBlock")}),this._enableTypingHandling()}afterInit(){this._enableEnterHandling(),this._enableShiftEnterHandling(),this._enablePasteLinking()}_expandLinkRange(t,e){return e.textNode&&e.textNode.hasAttribute("linkHref")?qm(e,"linkHref",e.textNode.getAttribute("linkHref"),t):null}_selectEntireLinks(t,e){const n=this.editor.model,i=n.document.selection,o=i.getFirstPosition(),r=i.getLastPosition();let s=e.getJoined(this._expandLinkRange(n,o)||e);s&&(s=s.getJoined(this._expandLinkRange(n,r)||e)),s&&(s.start.isBefore(o)||s.end.isAfter(r))&&t.setSelection(s)}_enablePasteLinking(){const t=this.editor,e=t.model,n=e.document.selection,i=t.plugins.get("ClipboardPipeline"),o=t.commands.get("link");i.on("inputTransformation",(t,i)=>{if(!this.isEnabled||!o.isEnabled||n.isCollapsed||"paste"!==i.method)return;if(n.rangeCount>1)return;const r=n.getFirstRange(),s=i.dataTransfer.getData("text/plain");if(!s)return;const a=s.match(Bv);a&&a[2]===s&&(e.change(t=>{this._selectEntireLinks(t,r),o.execute(s)}),t.stop())},{priority:"high"})}_enableTypingHandling(){const t=this.editor,e=new Nm(t.model,t=>{let e=t;if(!function(t){return t.length>4&&" "===t[t.length-1]&&" "!==t[t.length-2]}(e))return;e=e.slice(0,-1),"!.:,;?".includes(e[e.length-1])&&(e=e.slice(0,-1));const n=jv(e);return n?{url:n,removedTrailingCharacters:t.length-e.length}:void 0});e.on("matched:data",(e,n)=>{const{batch:i,range:o,url:r,removedTrailingCharacters:s}=n;if(!i.isTyping)return;const a=o.end.getShiftedBy(-s),l=a.getShiftedBy(-r.length),c=t.model.createRange(l,a);this._applyAutoLink(r,c)}),e.bind("isEnabled").to(this)}_enableEnterHandling(){const t=this.editor,e=t.model,n=t.commands.get("enter");n&&n.on("execute",()=>{const t=e.document.selection.getFirstPosition();let n;n=t.parent.previousSibling?.is("element")?e.createRangeIn(t.parent.previousSibling):e.createRange(e.createPositionAt(t.parent,0),t),this._checkAndApplyAutoLinkOnRange(n)})}_enableShiftEnterHandling(){const t=this.editor,e=t.model,n=t.commands.get("shiftEnter");n&&n.on("execute",()=>{const t=e.document.selection.getFirstPosition(),n=e.createRange(e.createPositionAt(t.parent,0),t.getShiftedBy(-1));this._checkAndApplyAutoLinkOnRange(n)})}_checkAndApplyAutoLinkOnRange(t){const e=this.editor.model,{text:n,range:i}=Mm(t,e),o=jv(n);if(o){const t=e.createRange(i.end.getShiftedBy(-o.length),i.end);this._applyAutoLink(o,t)}}_applyAutoLink(t,e){const n=this.editor.model,i=vv(t,this.editor.config.get("link.defaultProtocol"));this.isEnabled&&function(t,e){return e.schema.checkAttributeInSelection(e.createSelection(t),"linkHref")}(e,n)&&yv(i)&&!function(t){const e=t.start.nodeAfter;return!!e&&e.hasAttribute("linkHref")}(e)&&this._persistAutoLink(i,e)}_persistAutoLink(t,e){const n=this.editor.model,i=this.editor.plugins.get("Delete");n.enqueueChange(o=>{o.setAttribute("linkHref",t,e),n.enqueueChange(()=>{i.requestUndoOnBackspace()})})}}function jv(t){const e=Bv.exec(t);return e?e[2]:null}class Hv extends nc{static get requires(){return[Pv,Rv,Fv]}static get pluginName(){return"Link"}static get isOfficialPlugin(){return!0}}class Uv extends nc{static get requires(){return["ImageEditing","ImageUtils",Pv]}static get pluginName(){return"LinkImageEditing"}static get isOfficialPlugin(){return!0}afterInit(){const t=this.editor,e=t.model.schema;t.plugins.has("ImageBlockEditing")&&e.extend("imageBlock",{allowAttributes:["linkHref"]}),t.conversion.for("upcast").add(function(t){const e=t.plugins.has("ImageInlineEditing"),n=t.plugins.get("ImageUtils");return t=>{t.on("element:a",(t,i,o)=>{const r=i.viewItem,s=n.findViewImgElement(r);if(!s)return;const a=s.findAncestor(t=>n.isBlockImageView(t));if(e&&!a)return;if(!o.consumable.consume(r,{attributes:["href"]}))return;const l=r.getAttribute("href");if(!l)return;let c=i.modelCursor.parent;if(!c.is("element","imageBlock")){const t=o.convertItem(s,i.modelCursor);i.modelRange=t.modelRange,i.modelCursor=t.modelCursor,c=i.modelCursor.nodeBefore}c&&c.is("element","imageBlock")&&o.writer.setAttribute("linkHref",l,c)},{priority:"high"})}}(t)),t.conversion.for("downcast").add(function(t){const e=t.plugins.get("ImageUtils");return t=>{t.on("attribute:linkHref:imageBlock",(t,n,i)=>{if(!i.consumable.consume(n.item,t.name))return;const o=i.mapper.toViewElement(n.item),r=i.writer,s=Array.from(o.getChildren()).find(t=>t.is("element","a")),a=e.findViewImgElement(o),l=a.parent.is("element","picture")?a.parent:a;if(s)n.attributeNewValue?r.setAttribute("href",n.attributeNewValue,s):(r.move(r.createRangeOn(l),r.createPositionAt(o,0)),r.remove(s));else{const t=r.createContainerElement("a",{href:n.attributeNewValue});r.insert(r.createPositionAt(o,0),t),r.move(r.createRangeOn(l),r.createPositionAt(t,0))}},{priority:"high"})}}(t)),this._enableAutomaticDecorators(),this._enableManualDecorators()}_enableAutomaticDecorators(){const t=this.editor,e=t.commands.get("link").automaticDecorators;e.length&&t.conversion.for("downcast").add(e.getDispatcherForLinkedImage())}_enableManualDecorators(){const t=this.editor,e=t.commands.get("link");for(const n of e.manualDecorators)t.plugins.has("ImageBlockEditing")&&t.model.schema.extend("imageBlock",{allowAttributes:n.id}),t.plugins.has("ImageInlineEditing")&&t.model.schema.extend("imageInline",{allowAttributes:n.id}),t.conversion.for("downcast").add($v(n)),t.conversion.for("upcast").add(Wv(t,n))}}function $v(t){return e=>{e.on(`attribute:${t.id}:imageBlock`,(e,n,i)=>{const o=i.mapper.toViewElement(n.item),r=Array.from(o.getChildren()).find(t=>t.is("element","a"));if(r)if(void 0!==t.value){for(const[e,n]of An(t.attributes))i.writer.setAttribute(e,n,r);t.classes&&i.writer.addClass(t.classes,r);for(const e in t.styles)i.writer.setStyle(e,t.styles[e],r)}else{for(const e in t.attributes)i.writer.removeAttribute(e,r);t.classes&&i.writer.removeClass(t.classes,r);for(const e in t.styles)i.writer.removeStyle(e,r)}})}}function Wv(t,e){const n=t.plugins.has("ImageInlineEditing"),i=t.plugins.get("ImageUtils");return t=>{t.on("element:a",(t,o,r)=>{const s=o.viewItem,a=i.findViewImgElement(s);if(!a)return;const l=a.findAncestor(t=>i.isBlockImageView(t));if(n&&!l)return;const c=new vi(e._createPattern()).match(s);if(!c)return;if(!r.consumable.consume(s,c.match))return;const d=o.modelCursor.nodeBefore||o.modelCursor.parent;r.writer.setAttribute(e.id,!0,d)},{priority:"high"})}}class qv extends nc{static get requires(){return[Pv,Rv,"ImageBlockEditing"]}static get pluginName(){return"LinkImageUI"}static get isOfficialPlugin(){return!0}init(){const t=this.editor,e=t.editing.view.document;this.listenTo(e,"click",(e,n)=>{this._isSelectedLinkedImage(t.model.document.selection)&&(n.preventDefault(),e.stop())},{priority:"high"}),this._createToolbarLinkImageButton()}_createToolbarLinkImageButton(){const t=this.editor,e=t.t;t.ui.componentFactory.add("linkImage",n=>{const i=new Lu(n),o=t.plugins.get("LinkUI"),r=t.commands.get("link");return i.set({isEnabled:!0,label:e("Link image"),icon:$c,keystroke:bv,tooltip:!0,isToggleable:!0}),i.bind("isEnabled").to(r,"isEnabled"),i.bind("isOn").to(r,"value",t=>!!t),this.listenTo(i,"execute",()=>{this._isSelectedLinkedImage(t.model.document.selection)?o._addToolbarView():o._showUI(!0)}),i})}_isSelectedLinkedImage(t){const e=t.getSelectedElement();return this.editor.plugins.get("ImageUtils").isImage(e)&&e.hasAttribute("linkHref")}}class Kv extends nc{static get requires(){return[Uv,qv]}static get pluginName(){return"LinkImage"}static get isOfficialPlugin(){return!0}}class Gv{_startElement;_referenceIndent;_isForward;_includeSelf;_sameAttributes;_sameIndent;_lowerIndent;_higherIndent;constructor(t,e){this._startElement=t,this._referenceIndent=t.getAttribute("listIndent"),this._isForward="forward"==e.direction,this._includeSelf=!!e.includeSelf,this._sameAttributes=fn(e.sameAttributes||[]),this._sameIndent=!!e.sameIndent,this._lowerIndent=!!e.lowerIndent,this._higherIndent=!!e.higherIndent}static first(t,e){return wn(new this(t,e)[Symbol.iterator]())}*[Symbol.iterator](){const t=[];for(const{node:e}of new Qv(this._getStartNode(),this._isForward?"forward":"backward")){const n=e.getAttribute("listIndent");if(n<this._referenceIndent){if(!this._lowerIndent)break;this._referenceIndent=n}else if(n>this._referenceIndent){if(!this._higherIndent)continue;if(!this._isForward){t.push(e);continue}}else{if(!this._sameIndent){if(this._higherIndent){t.length&&(yield*t,t.length=0);break}continue}if(this._sameAttributes.some(t=>e.getAttribute(t)!==this._startElement.getAttribute(t)))break}t.length&&(yield*t,t.length=0),yield e}}_getStartNode(){return this._includeSelf?this._startElement:this._isForward?this._startElement.nextSibling:this._startElement.previousSibling}}class Qv{_node;_isForward;_previousNodesByIndent=[];_previous=null;_previousNodeIndent=null;constructor(t,e="forward"){this._node=t,this._isForward="forward"===e}[Symbol.iterator](){return this}next(){if(!Zv(this._node))return{done:!0,value:void 0};const t=this._node.getAttribute("listIndent");let e=null;if(this._previous){const n=this._previousNodeIndent;t>n?this._previousNodesByIndent[n]=this._previous:t<n?(e=this._previousNodesByIndent[t]||null,this._previousNodesByIndent.length=t):e=this._previous}const n={node:this._node,previous:this._previous,previousNodeInList:e};return this._previous=this._node,this._previousNodeIndent=t,this._node=this._isForward?this._node.nextSibling:this._node.previousSibling,{value:n,done:!1}}}class Yv{_listHead;constructor(t){this._listHead=t}[Symbol.iterator](){return new Qv(this._listHead)}}class Jv{static next(){return Mt()}}function Zv(t){return!!t&&t.is("element")&&t.hasAttribute("listItemId")}function Xv(t,e={}){return[...ty(t,{...e,direction:"backward"}),...ty(t,{...e,direction:"forward"})]}function ty(t,e={}){const n="forward"==e.direction,i=Array.from(new Gv(t,{...e,includeSelf:n,sameIndent:!0,sameAttributes:"listItemId"}));return n?i:i.reverse()}function ey(t,e){const n=new Gv(t,{sameIndent:!0,sameAttributes:"listType",...e}),i=new Gv(t,{sameIndent:!0,sameAttributes:"listType",includeSelf:!0,direction:"forward",...e});return[...Array.from(n).reverse(),...i]}function ny(t){return!Gv.first(t,{sameIndent:!0,sameAttributes:"listItemId"})}function iy(t){return!Gv.first(t,{direction:"forward",sameIndent:!0,sameAttributes:"listItemId"})}function oy(t,e={}){t=fn(t);const n=!1!==e.withNested,i=new Set;for(const e of t)for(const t of Xv(e,{higherIndent:n}))i.add(t);return uy(i)}function ry(t){t=fn(t);const e=new Set;for(const n of t)for(const t of ey(n))e.add(t);return uy(e)}function sy(t,e){const n=ty(t,{direction:"forward"}),i=Jv.next();for(const t of n)e.setAttribute("listItemId",i,t);return n}function ay(t,e,n){const i={};for(const[t,n]of e.getAttributes())t.startsWith("list")&&(i[t]=n);const o=ty(t,{direction:"forward"});for(const t of o)n.setAttributes(i,t);return o}function ly(t,e,{expand:n,indentBy:i=1}={}){t=fn(t);const o=n?oy(t):t;for(const t of o){const n=t.getAttribute("listIndent")+i;n<0?cy(t,e):e.setAttribute("listIndent",n,t)}return o}function cy(t,e){t=fn(t);for(const n of t)n.is("element","listItem")&&e.rename(n,"paragraph");for(const n of t)for(const t of n.getAttributeKeys())t.startsWith("list")&&e.removeAttribute(t,n);return t}function dy(t){if(!t.length)return!1;const e=t[0].getAttribute("listItemId");return!!e&&!t.some(t=>t.getAttribute("listItemId")!=e)}function uy(t){return Array.from(t).filter(t=>"$graveyard"!==t.root.rootName).sort((t,e)=>t.index-e.index)}function hy(t){const e=t.document.selection.getSelectedElement();return e&&t.schema.isObject(e)&&t.schema.isBlock(e)?e:null}function gy(t,e){return e.checkChild(t.parent,"listItem")&&e.checkChild(t,"$text")&&!e.isObject(t)}function my(t){return"numbered"==t||"customNumbered"==t}function py(t,e,n){return ty(e,{direction:"forward"}).pop().index>t.index?ay(t,e,n):[]}class fy extends oc{_direction;constructor(t,e){super(t),this._direction=e}refresh(){this.isEnabled=this._checkEnabled()}execute(){const t=this.editor.model,e=by(t.document.selection);t.change(t=>{const n=[];dy(e)&&!ny(e[0])?("forward"==this._direction&&n.push(...ly(e,t)),n.push(...sy(e[0],t))):"forward"==this._direction?n.push(...ly(e,t,{expand:!0})):n.push(...function(t,e){const n=oy(t=fn(t)),i=new Set,o=Math.min(...n.map(t=>t.getAttribute("listIndent"))),r=new Map;for(const t of n)r.set(t,Gv.first(t,{lowerIndent:!0}));for(const t of n){if(i.has(t))continue;i.add(t);const n=t.getAttribute("listIndent")-1;if(n<0)cy(t,e);else{if(t.getAttribute("listIndent")==o){const n=py(t,r.get(t),e);for(const t of n)i.add(t);if(n.length)continue}e.setAttribute("listIndent",n,t)}}return uy(i)}(e,t));for(const e of n){if(!e.hasAttribute("listType"))continue;const n=Gv.first(e,{sameIndent:!0});n&&t.setAttribute("listType",n.getAttribute("listType"),e)}this._fireAfterExecute(n)})}_fireAfterExecute(t){this.fire("afterExecute",uy(new Set(t)))}_checkEnabled(){let t=by(this.editor.model.document.selection),e=t[0];if(!e)return!1;if("backward"==this._direction)return!0;if(dy(t)&&!ny(t[0]))return!0;t=oy(t),e=t[0];const n=Gv.first(e,{sameIndent:!0});return!!n&&n.getAttribute("listType")==e.getAttribute("listType")}}function by(t){const e=Array.from(t.getSelectedBlocks()),n=e.findIndex(t=>!Zv(t));return-1!=n&&(e.length=n),e}class ky extends oc{type;_listWalkerOptions;constructor(t,e,n={}){super(t),this.type=e,this._listWalkerOptions=n.multiLevel?{higherIndent:!0,lowerIndent:!0,sameAttributes:[]}:void 0}refresh(){this.value=this._getValue(),this.isEnabled=this._checkEnabled()}execute(t={}){const e=this.editor.model,n=e.document,i=hy(e),o=Array.from(n.selection.getSelectedBlocks()).filter(t=>e.schema.checkAttribute(t,"listType")||gy(t,e.schema)),r=void 0!==t.forceValue?!t.forceValue:this.value;e.change(s=>{if(r){const t=o[o.length-1],e=ty(t,{direction:"forward"}),n=[];e.length>1&&n.push(...sy(e[1],s)),n.push(...cy(o,s)),n.push(...function(t,e){const n=[];let i=Number.POSITIVE_INFINITY;for(const{node:o}of new Qv(t.nextSibling)){const t=o.getAttribute("listIndent");if(0==t)break;t<i&&(i=t);const r=t-i;e.setAttribute("listIndent",r,o),n.push(o)}return n}(t,s)),this._fireAfterExecute(n)}else if((i||n.selection.isCollapsed)&&Zv(o[0])){const e=ey(i||o[0],this._listWalkerOptions);for(const n of e)s.setAttributes({...t.additionalAttributes,listType:this.type},n);this._fireAfterExecute(e)}else{const n=[];for(const i of o)if(i.hasAttribute("listType"))for(const e of oy(i,{withNested:!1}))e.getAttribute("listType")!=this.type&&(s.setAttributes({...t.additionalAttributes,listType:this.type},e),n.push(e));else!i.is("element","listItem")&&gy(i,e.schema)&&s.rename(i,"listItem"),s.setAttributes({...t.additionalAttributes,listIndent:0,listItemId:Jv.next(),listType:this.type},i),n.push(i);this._fireAfterExecute(n)}})}_fireAfterExecute(t){this.fire("afterExecute",uy(new Set(t)))}_getValue(){const t=this.editor.model.document.selection,e=Array.from(t.getSelectedBlocks());if(!e.length)return!1;for(const t of e)if(t.getAttribute("listType")!=this.type)return!1;return!0}_checkEnabled(){const t=this.editor.model,e=t.schema,n=t.document.selection,i=Array.from(n.getSelectedBlocks());if(!i.length)return!1;if(this.value)return!0;for(const t of i)if(e.checkAttribute(t,"listType")||gy(t,e))return!0;return!1}}class wy extends oc{_direction;constructor(t,e){super(t),this._direction=e}refresh(){this.isEnabled=this._checkEnabled()}execute({shouldMergeOnBlocksContentLevel:t=!1}={}){const e=this.editor.model,n=e.document.selection,i=[];e.change(o=>{const{firstElement:r,lastElement:s}=this._getMergeSubjectElements(n,t),a=r.getAttribute("listIndent")||0,l=s.getAttribute("listIndent"),c=s.getAttribute("listItemId");if(a!=l){const t=(d=s,Array.from(new Gv(d,{direction:"forward",higherIndent:!0})));i.push(...ly([s,...t],o,{indentBy:a-l,expand:a<l}))}var d;if(t){let t=n;n.isCollapsed&&(t=o.createSelection(o.createRange(o.createPositionAt(r,"end"),o.createPositionAt(s,0)))),e.deleteContent(t,{doNotResetEntireContent:n.isCollapsed});const a=t.getLastPosition().parent,l=a.nextSibling;i.push(a),l&&l!==s&&l.getAttribute("listItemId")==c&&i.push(...ay(l,a,o))}else i.push(...ay(s,r,o));this._fireAfterExecute(i)})}_fireAfterExecute(t){this.fire("afterExecute",uy(new Set(t)))}_checkEnabled(){const t=this.editor.model,e=t.document.selection,n=hy(t);if(e.isCollapsed||n){const t=n||e.getFirstPosition().parent;if(!Zv(t))return!1;const i="backward"==this._direction?t.previousSibling:t.nextSibling;if(!i)return!1;if(dy([t,i]))return!1}else{const t=e.getLastPosition(),n=e.getFirstPosition();if(t.parent===n.parent)return!1;if(!Zv(t.parent))return!1}return!0}_getMergeSubjectElements(t,e){const n=hy(this.editor.model);let i,o;if(t.isCollapsed||n){const r=n||t.getFirstPosition().parent,s=ny(r);"backward"==this._direction?(o=r,i=s&&!e?Gv.first(r,{sameIndent:!0,lowerIndent:!0}):r.previousSibling):(i=r,o=r.nextSibling)}else i=t.getFirstPosition().parent,o=t.getLastPosition().parent;return{firstElement:i,lastElement:o}}}class _y extends oc{_direction;constructor(t,e){super(t),this._direction=e}refresh(){this.isEnabled=this._checkEnabled()}execute(){this.editor.model.change(t=>{const e=sy(this._getStartBlock(),t);this._fireAfterExecute(e)})}_fireAfterExecute(t){this.fire("afterExecute",uy(new Set(t)))}_checkEnabled(){const t=this.editor.model.document.selection,e=this._getStartBlock();return t.isCollapsed&&Zv(e)&&!ny(e)}_getStartBlock(){const t=this.editor.model.document.selection.getFirstPosition().parent;return"before"==this._direction?t:t.nextSibling}}class vy extends nc{static get pluginName(){return"ListItemBoldIntegration"}static get isOfficialPlugin(){return!0}static get requires(){return[$y]}init(){const t=this.editor,e=t.plugins.get("ListFormatting"),n=t.plugins.get($y);t.plugins.has("BoldEditing")&&this.editor.config.get("list.enableListItemMarkerFormatting")&&(e.registerFormatAttribute("bold","listItemBold"),n.registerDowncastStrategy({scope:"item",attributeName:"listItemBold",setAttributeOnDowncast(t,e,n,i){e&&(t.addClass("ck-list-marker-bold",n),!ft.isSafari||i&&i.dataPipeline||t.setStyle("--ck-content-list-marker-dummy-bold","0",n))}}))}afterInit(){const t=this.editor,e=t.model;t.plugins.has("BoldEditing")&&this.editor.config.get("list.enableListItemMarkerFormatting")&&(e.schema.extend("$listItem",{allowAttributes:"listItemBold"}),e.schema.setAttributeProperties("listItemBold",{isFormatting:!0}),e.schema.addAttributeCheck(t=>{if(!t.last.getAttribute("listItemId"))return!1},"listItemBold"),t.conversion.for("upcast").attributeToAttribute({model:"listItemBold",view:{name:"li",classes:"ck-list-marker-bold"}}))}}class yy extends nc{static get pluginName(){return"ListItemItalicIntegration"}static get isOfficialPlugin(){return!0}static get requires(){return[$y]}init(){const t=this.editor,e=t.plugins.get("ListFormatting"),n=t.plugins.get($y);t.plugins.has("ItalicEditing")&&this.editor.config.get("list.enableListItemMarkerFormatting")&&(e.registerFormatAttribute("italic","listItemItalic"),n.registerDowncastStrategy({scope:"item",attributeName:"listItemItalic",setAttributeOnDowncast(t,e,n,i){e&&(t.addClass("ck-list-marker-italic",n),!ft.isSafari||i&&i.dataPipeline||t.setStyle("--ck-content-list-marker-dummy-italic","0",n))}}))}afterInit(){const t=this.editor,e=t.model;t.plugins.has("ItalicEditing")&&this.editor.config.get("list.enableListItemMarkerFormatting")&&(e.schema.extend("$listItem",{allowAttributes:"listItemItalic"}),e.schema.setAttributeProperties("listItemItalic",{isFormatting:!0}),e.schema.addAttributeCheck(t=>{if(!t.last.getAttribute("listItemId"))return!1},"listItemItalic"),t.conversion.for("upcast").attributeToAttribute({model:"listItemItalic",view:{name:"li",classes:"ck-list-marker-italic"}}))}}class Cy extends nc{static get pluginName(){return"ListItemFontSizeIntegration"}static get isOfficialPlugin(){return!0}static get requires(){return[$y]}init(){const t=this.editor,e=t.plugins.get("ListFormatting"),n=t.plugins.get($y);if(!t.plugins.has("FontSizeEditing")||!this.editor.config.get("list.enableListItemMarkerFormatting"))return;const i=ek(t.config.get("fontSize.options"));e.registerFormatAttribute("fontSize","listItemFontSize"),n.registerDowncastStrategy({scope:"item",attributeName:"listItemFontSize",setAttributeOnDowncast(t,e,n,o){if(e){const r=i.find(t=>t.model==e);r&&r.view&&"string"!=typeof r.view?r.view.styles?(t.addClass("ck-list-marker-font-size",n),t.setStyle("--ck-content-list-marker-font-size",r.view.styles["font-size"],n)):r.view.classes&&(t.addClass(`ck-list-marker-font-size-${e}`,n),!ft.isSafari||o&&o.dataPipeline||t.setStyle("--ck-content-list-marker-dummy-font-size","0",n)):(t.addClass("ck-list-marker-font-size",n),t.setStyle("--ck-content-list-marker-font-size",e,n))}}})}afterInit(){const t=this.editor,e=t.model;if(!t.plugins.has("FontSizeEditing")||!this.editor.config.get("list.enableListItemMarkerFormatting"))return;e.schema.extend("$listItem",{allowAttributes:"listItemFontSize"}),e.schema.setAttributeProperties("listItemFontSize",{isFormatting:!0}),e.schema.addAttributeCheck(t=>{if(!t.last.getAttribute("listItemId"))return!1},"listItemFontSize"),t.conversion.for("upcast").elementToAttribute({model:{key:"listItemFontSize",value:t=>t.getStyle("--ck-content-list-marker-font-size")},view:{name:"li",classes:"ck-list-marker-font-size",styles:{"--ck-content-list-marker-font-size":/.*/}}});const n=ek(t.config.get("fontSize.options"));for(const e of n)e.model&&e.view&&t.conversion.for("upcast").elementToAttribute({model:{key:"listItemFontSize",value:e.model},view:{name:"li",classes:`ck-list-marker-font-size-${e.model}`}})}}class xy extends nc{static get pluginName(){return"ListItemFontColorIntegration"}static get isOfficialPlugin(){return!0}static get requires(){return[$y]}init(){const t=this.editor,e=t.plugins.get("ListFormatting"),n=t.plugins.get($y);t.plugins.has("FontColorEditing")&&this.editor.config.get("list.enableListItemMarkerFormatting")&&(e.registerFormatAttribute("fontColor","listItemFontColor"),n.registerDowncastStrategy({scope:"item",attributeName:"listItemFontColor",setAttributeOnDowncast(t,e,n){e&&(t.addClass("ck-list-marker-color",n),t.setStyle("--ck-content-list-marker-color",e,n))}}))}afterInit(){const t=this.editor,e=t.model;t.plugins.has("FontColorEditing")&&this.editor.config.get("list.enableListItemMarkerFormatting")&&(e.schema.extend("$listItem",{allowAttributes:"listItemFontColor"}),e.schema.setAttributeProperties("listItemFontColor",{isFormatting:!0}),e.schema.addAttributeCheck(t=>{if(!t.last.getAttribute("listItemId"))return!1},"listItemFontColor"),t.conversion.for("upcast").attributeToAttribute({model:{key:"listItemFontColor",value:t=>t.getStyle("--ck-content-list-marker-color")},view:{name:"li",classes:"ck-list-marker-color",styles:{"--ck-content-list-marker-color":/.*/}}}))}}class Ay extends nc{static get pluginName(){return"ListItemFontFamilyIntegration"}static get isOfficialPlugin(){return!0}static get requires(){return[$y]}init(){const t=this.editor,e=t.plugins.get("ListFormatting"),n=t.plugins.get($y);t.plugins.has("FontFamilyEditing")&&this.editor.config.get("list.enableListItemMarkerFormatting")&&(e.registerFormatAttribute("fontFamily","listItemFontFamily"),n.registerDowncastStrategy({scope:"item",attributeName:"listItemFontFamily",setAttributeOnDowncast(t,e,n){e&&(t.addClass("ck-list-marker-font-family",n),t.setStyle("--ck-content-list-marker-font-family",e,n))}}))}afterInit(){const t=this.editor,e=t.model;t.plugins.has("FontFamilyEditing")&&this.editor.config.get("list.enableListItemMarkerFormatting")&&(e.schema.extend("$listItem",{allowAttributes:"listItemFontFamily"}),e.schema.setAttributeProperties("listItemFontFamily",{isFormatting:!0}),e.schema.addAttributeCheck(t=>{if(!t.last.getAttribute("listItemId"))return!1},"listItemFontFamily"),t.conversion.for("upcast").attributeToAttribute({model:{key:"listItemFontFamily",value:t=>t.getStyle("--ck-content-list-marker-font-family")},view:{name:"li",classes:"ck-list-marker-font-family",styles:{"--ck-content-list-marker-font-family":/.*/}}}))}}class Ey extends nc{_loadedFormatting={};static get pluginName(){return"ListFormatting"}static get isOfficialPlugin(){return!0}static get requires(){return[vy,yy,Cy,xy,Ay]}constructor(t){super(t),t.config.define("list.enableListItemMarkerFormatting",!0)}afterInit(){this.editor.config.get("list.enableListItemMarkerFormatting")&&this._registerPostfixerForListItemFormatting()}_registerPostfixerForListItemFormatting(){const t=this.editor.model;t.document.registerPostFixer(e=>{const n=t.document.differ.getChanges(),i=new Set;let o=!1;for(const t of n)if("attribute"===t.type)("listItemId"==t.attributeKey||"listType"==t.attributeKey||this._isInlineOrSelectionFormatting(t.attributeKey)||Object.values(this._loadedFormatting).includes(t.attributeKey))&&(Zv(t.range.start.nodeAfter)?i.add(t.range.start.nodeAfter):Zv(t.range.start.parent)&&i.add(t.range.start.parent));else if(Zv(t.position.nodeAfter)&&i.add(t.position.nodeAfter),Zv(t.position.nodeBefore)&&i.add(t.position.nodeBefore),Zv(t.position.parent)&&i.add(t.position.parent),"insert"==t.type&&"$text"!=t.name){const n=e.createRangeIn(t.position.nodeAfter);for(const t of n.getItems())Zv(t)&&i.add(t)}for(const n of i){const i=Sy(t,n,Object.keys(this._loadedFormatting));for(const[t,r]of Object.entries(i)){const i=this._loadedFormatting[t];(r&&Iy(e,n,i,r)||!r&&Py(e,n,i))&&(o=!0)}}return o})}registerFormatAttribute(t,e){this._loadedFormatting[t]=e}_isInlineOrSelectionFormatting(t){return t.replace(/^selection:/,"")in this._loadedFormatting}}function Sy(t,e,n){return ny(e)?Ty(t,e,n):Ty(t,Xv(e)[0],n)}function Ty(t,e,n){if(!function(t){return["numbered","bulleted","customNumbered","customBulleted"].includes(t.getAttribute("listType"))}(e)||t.schema.isLimit(e))return Object.fromEntries(n.map(t=>[t]));if(e.isEmpty)return Object.fromEntries(n.map(t=>[t,e.getAttribute(`selection:${t}`)]));const i=new Set(n),o={},r=t.createRangeIn(e).getWalker({ignoreElementEnd:!0});for(const{item:e}of r){for(const n of i)if(t.schema.checkAttribute(e,n)){const t=e.getAttribute(n);void 0===t?(i.delete(n),o[n]=void 0):void 0===o[n]?o[n]=t:o[n]!==t&&(i.delete(n),o[n]=void 0)}else n in o||(o[n]=void 0);if(!i.size)break;t.schema.isLimit(e)&&r.jumpTo(t.createPositionAfter(e))}return o}function Iy(t,e,n,i){const o=Xv(e);let r=!1;for(const e of o)e.hasAttribute(n)&&e.getAttribute(n)===i||(t.setAttribute(n,i,e),r=!0);return r}function Py(t,e,n){const i=Xv(e);let o=!1;for(const e of i)e.hasAttribute(n)&&(t.removeAttribute(n,e),o=!0);return o}class My extends nc{static get pluginName(){return"ListUtils"}static get isOfficialPlugin(){return!0}expandListBlocksToCompleteList(t){return ry(t)}isFirstBlockOfListItem(t){return ny(t)}isListItemBlock(t){return Zv(t)}expandListBlocksToCompleteItems(t,e={}){return oy(t,e)}isNumberedListType(t){return my(t)}}function Ny(t){return t.is("element","ol")||t.is("element","ul")}function Ly(t){return t.is("element","li")}function Vy(t,e,n,i=Ry(n,e)){return t.createAttributeElement(Oy(n),null,{priority:2*e/100-100,id:i})}function zy(t,e,n){return t.createAttributeElement("li",null,{priority:(2*e+1)/100-100,id:n})}function Oy(t){return"numbered"==t||"customNumbered"==t?"ol":"ul"}function Ry(t,e){return`list-${t}-${e}`}function Dy(t,e,n){const i=t.nodeBefore;if(Zv(i)){let t=i;for(const{node:o}of new Qv(t,"backward")){if(t=o,n.has(t))return;if(n.add(t),e.has(i))return}e.add(t)}else{const n=t.nodeAfter;Zv(n)&&e.add(n)}}function By(t,e,n,{dataPipeline:i}={}){const o=function(t){return(e,n)=>{const i=[];for(const n of t)e.hasAttribute(n)&&i.push(`attribute:${n}`);return!!i.every(t=>!1!==n.test(e,t))&&(i.forEach(t=>n.consume(e,t)),!0)}}(t);return(r,s,a)=>{const{writer:l,mapper:c,consumable:d}=a,u=s.item;if(!t.includes(s.attributeKey))return;if(!o(u,d))return;const h={...a.options,dataPipeline:i},g=function(t,e,n){const i=n.createRangeOn(t);return e.toViewRange(i).getTrimmed().end.nodeBefore}(u,c,n);jy(g,l,c),function(t,e){let n=t.parent;for(;n.is("attributeElement")&&["ul","ol","li"].includes(n.name);){const i=n.parent;e.unwrap(e.createRangeOn(t),n),n=i}}(g,l);const m=function(t,e,n,i,{dataPipeline:o}){let r=i.createRangeOn(e);if(!ny(t))return r;for(const s of n){if("itemMarker"!=s.scope)continue;const n=s.createElement(i,t,{dataPipeline:o});if(!n)continue;if(i.setCustomProperty("listItemMarker",!0,n),s.canInjectMarkerIntoElement&&s.canInjectMarkerIntoElement(t)?i.insert(i.createPositionAt(e,0),n):(i.insert(r.start,n),r=i.createRange(i.createPositionBefore(n),i.createPositionAfter(e))),!s.createWrapperElement||!s.canWrapElement)continue;const a=s.createWrapperElement(i,t,{dataPipeline:o});i.setCustomProperty("listItemWrapper",!0,a),s.canWrapElement(t)?r=i.wrap(r,a):(r=i.wrap(i.createRangeOn(n),a),r=i.createRange(r.start,i.createPositionAfter(e)))}return r}(u,g,e,l,h);!function(t,e,n,i,o){if(!t.hasAttribute("listIndent"))return;const r=t.getAttribute("listIndent");let s=t;for(let t=r;t>=0;t--){const r=zy(i,t,s.getAttribute("listItemId")),a=Vy(i,t,s.getAttribute("listType"));for(const t of n)"list"!=t.scope&&"item"!=t.scope||!s.hasAttribute(t.attributeName)||t.setAttributeOnDowncast(i,s.getAttribute(t.attributeName),"list"==t.scope?a:r,o);if(e=i.wrap(e,r),e=i.wrap(e,a),0==t)break;if(s=Gv.first(s,{lowerIndent:!0}),!s)break}}(u,m,e,l,h)}}function Fy(t,{dataPipeline:e}={}){return(n,{writer:i})=>{if(!Hy(n,t))return null;if(!e)return i.createContainerElement("span",{class:"ck-list-bogus-paragraph"});const o=i.createContainerElement("p");return i.setCustomProperty("dataPipeline:transparentRendering",!0,o),o}}function jy(t,e,n){for(;t.parent.is("attributeElement")&&t.parent.getCustomProperty("listItemWrapper");)e.unwrap(e.createRangeOn(t),t.parent);const i=[];o(e.createPositionBefore(t).getWalker({direction:"backward"})),o(e.createRangeIn(t).getWalker());for(const t of i)e.remove(t);function o(t){for(const{item:e}of t){if(e.is("element")&&n.toModelElement(e))break;e.is("element")&&e.getCustomProperty("listItemMarker")&&i.push(e)}}}function Hy(t,e,n=Xv(t)){if(!Zv(t))return!1;for(const n of t.getAttributeKeys())if(!n.startsWith("selection:")&&"htmlEmptyBlock"!=n&&!e.includes(n))return!1;return n.length<2}const Uy=["listType","listIndent","listItemId"];class $y extends nc{_downcastStrategies=[];static get pluginName(){return"ListEditing"}static get isOfficialPlugin(){return!0}static get requires(){return[Lp,Im,My,Df,Ey]}constructor(t){super(t),t.config.define("list.multiBlock",!0)}init(){const t=this.editor,e=t.model,n=t.config.get("list.multiBlock");if(t.plugins.has("LegacyListEditing"))throw new Vt("list-feature-conflict",this,{conflictPlugin:"LegacyListEditing"});e.schema.register("$listItem",{allowAttributes:Uy}),n?(e.schema.extend("$container",{allowAttributesOf:"$listItem"}),e.schema.extend("$block",{allowAttributesOf:"$listItem"}),e.schema.extend("$blockObject",{allowAttributesOf:"$listItem"})):e.schema.register("listItem",{inheritAllFrom:"$block",allowAttributesOf:"$listItem"});for(const t of Uy)e.schema.setAttributeProperties(t,{copyOnReplace:!0});t.commands.add("numberedList",new ky(t,"numbered")),t.commands.add("bulletedList",new ky(t,"bulleted")),t.commands.add("customNumberedList",new ky(t,"customNumbered",{multiLevel:!0})),t.commands.add("customBulletedList",new ky(t,"customBulleted",{multiLevel:!0})),t.commands.add("indentList",new fy(t,"forward")),t.commands.add("outdentList",new fy(t,"backward")),t.commands.add("splitListItemBefore",new _y(t,"before")),t.commands.add("splitListItemAfter",new _y(t,"after")),n&&(t.commands.add("mergeListItemBackward",new wy(t,"backward")),t.commands.add("mergeListItemForward",new wy(t,"forward"))),this._setupDeleteIntegration(),this._setupEnterIntegration(),this._setupTabIntegration(),this._setupClipboardIntegration(),this._setupAccessibilityIntegration(),this._setupListItemIdConversionStrategy()}afterInit(){const t=this.editor.commands,e=t.get("indent"),n=t.get("outdent");e&&e.registerChildCommand(t.get("indentList"),{priority:"high"}),n&&n.registerChildCommand(t.get("outdentList"),{priority:"lowest"}),this._setupModelPostFixing(),this._setupConversion()}registerDowncastStrategy(t){this._downcastStrategies.push(t)}getListAttributeNames(){return[...Uy,...this._downcastStrategies.map(t=>t.attributeName)]}_setupDeleteIntegration(){const t=this.editor,e=t.commands.get("mergeListItemBackward"),n=t.commands.get("mergeListItemForward");this.listenTo(t.editing.view.document,"delete",(i,o)=>{const r=t.model.document.selection;hy(t.model)||t.model.change(()=>{const s=r.getFirstPosition();if(r.isCollapsed&&"backward"==o.direction){if(!s.isAtStart)return;const n=s.parent;if(!Zv(n))return;if(Gv.first(n,{sameAttributes:"listType",sameIndent:!0})||0!==n.getAttribute("listIndent")){if(!e||!e.isEnabled)return;e.execute({shouldMergeOnBlocksContentLevel:Wy(t.model,"backward")})}else iy(n)||t.execute("splitListItemAfter"),t.execute("outdentList");o.preventDefault(),i.stop()}else{if(r.isCollapsed&&!r.getLastPosition().isAtEnd)return;if(!n||!n.isEnabled)return;n.execute({shouldMergeOnBlocksContentLevel:Wy(t.model,"forward")}),o.preventDefault(),i.stop()}})},{context:"li"})}_setupEnterIntegration(){const t=this.editor,e=t.model,n=t.commands,i=n.get("enter");this.listenTo(t.editing.view.document,"enter",(n,i)=>{const o=e.document,r=o.selection.getFirstPosition().parent;if(o.selection.isCollapsed&&Zv(r)&&r.isEmpty&&!i.isSoft){const e=ny(r),o=iy(r);e&&o?(t.execute("outdentList"),i.preventDefault(),n.stop()):e&&!o?(t.execute("splitListItemAfter"),i.preventDefault(),n.stop()):o&&(t.execute("splitListItemBefore"),i.preventDefault(),n.stop())}},{context:"li"}),this.listenTo(i,"afterExecute",()=>{const e=n.get("splitListItemBefore");e.refresh(),e.isEnabled&&2===Xv(t.model.document.selection.getLastPosition().parent).length&&e.execute()})}_setupTabIntegration(){const t=this.editor;this.listenTo(t.editing.view.document,"tab",(e,n)=>{const i=n.shiftKey?"outdentList":"indentList";this.editor.commands.get(i).isEnabled&&(t.execute(i),n.stopPropagation(),n.preventDefault(),e.stop())},{context:"li"})}_setupConversion(){const t=this.editor,e=t.model,n=this.getListAttributeNames(),i=t.config.get("list.multiBlock"),o=i?"paragraph":"listItem";t.conversion.for("upcast").elementToElement({view:"li",model:(t,{writer:e})=>e.createElement(o,{listType:""})}).elementToElement({view:"p",model:(t,{writer:e})=>t.parent&&t.parent.is("element","li")?e.createElement(o,{listType:""}):null,converterPriority:"high"}).add(t=>{t.on("element:li",(t,e,n)=>{const{writer:i,schema:o}=n;if(!e.modelRange)return;const r=Array.from(e.modelRange.getItems({shallow:!0})).filter(t=>o.checkAttribute(t,"listItemId"));if(!r.length)return;const s=e.viewItem.getAttribute("data-list-item-id")||Jv.next();n.consumable.consume(e.viewItem,{attributes:"data-list-item-id"});const a=function(t){let e=0,n=t.parent;for(;n;){if(Ly(n))e++;else{const t=n.previousSibling;t&&Ly(t)&&e++}n=n.parent}return e}(e.viewItem);let l=e.viewItem.parent&&e.viewItem.parent.is("element","ol")?"numbered":"bulleted";const c=r[0].getAttribute("listType");c&&(l=c);const d={listItemId:s,listIndent:a,listType:l};for(const t of r)t.hasAttribute("listItemId")||i.setAttributes(d,t);r.length>1&&r[1].getAttribute("listItemId")!=d.listItemId&&n.keepEmptyElement(r[0])})}),i||t.conversion.for("downcast").elementToElement({model:"listItem",view:"p"}),t.conversion.for("editingDowncast").elementToElement({model:o,view:Fy(n),converterPriority:"high"}).add(t=>{var i;t.on("attribute",By(n,this._downcastStrategies,e)),t.on("remove",(i=e.schema,(t,e,n)=>{const{writer:o,mapper:r}=n,s=t.name.split(":")[1];if(!i.checkAttribute(s,"listItemId"))return;const a=r.toViewPosition(e.position),l=e.position.getShiftedBy(e.length),c=r.toViewPosition(l,{isPhantom:!0}),d=o.createRange(a,c).getTrimmed().end.nodeBefore;d&&jy(d,o,r)}))}),t.conversion.for("dataDowncast").elementToElement({model:o,view:Fy(n,{dataPipeline:!0}),converterPriority:"high"}).add(t=>{t.on("attribute",By(n,this._downcastStrategies,e,{dataPipeline:!0}))});const r=(s=this._downcastStrategies,a=t.editing.view,(t,e)=>{if(e.modelPosition.offset>0)return;const n=e.modelPosition.parent;if(!Zv(n))return;if(!s.some(t=>"itemMarker"==t.scope&&t.canInjectMarkerIntoElement&&t.canInjectMarkerIntoElement(n)))return;const i=e.mapper.toViewElement(n),o=a.createRangeIn(i),r=o.getWalker();let l=o.start;for(const{item:t}of r){if(t.is("element")&&e.mapper.toModelElement(t)||t.is("$textProxy"))break;t.is("element")&&t.getCustomProperty("listItemMarker")&&(l=a.createPositionAfter(t),r.skip(({previousPosition:t})=>!t.isEqual(l)))}e.viewPosition=l});var s,a;t.editing.mapper.on("modelToViewPosition",r),t.data.mapper.on("modelToViewPosition",r),this.listenTo(e.document,"change:data",function(t,e,n,i){return()=>{const i=t.document.differ.getChanges(),s=[],a=new Set,l=new Set,c=new Set;for(const t of i)if("insert"==t.type&&"$text"!=t.name)Dy(t.position,a,c),t.attributes.has("listItemId")?l.add(t.position.nodeAfter):Dy(t.position.getShiftedBy(t.length),a,c);else if("remove"==t.type&&t.attributes.has("listItemId"))Dy(t.position,a,c);else if("attribute"==t.type){const e=t.range.start.nodeAfter;n.includes(t.attributeKey)?(Dy(t.range.start,a,c),null===t.attributeNewValue?(Dy(t.range.start.getShiftedBy(1),a,c),r(e)&&s.push(e)):l.add(e)):Zv(e)&&r(e)&&s.push(e)}for(const t of a.values())s.push(...o(t,l));for(const t of new Set(s))e.reconvertItem(t)};function o(t,e){const i=[],o=new Set,a=[];for(const{node:l,previous:c}of new Qv(t)){if(o.has(l))continue;const t=l.getAttribute("listIndent");c&&t<c.getAttribute("listIndent")&&(a.length=t+1),a[t]={modelAttributes:Object.fromEntries(Array.from(l.getAttributes()).filter(([t])=>n.includes(t))),modelElement:l};const d=ty(l,{direction:"forward"});for(const t of d)o.add(t),(r(t,d)||s(t,a,e))&&i.push(t)}return i}function r(t,o){const r=e.mapper.toViewElement(t);if(!r)return!1;if(i.fire("checkElement",{modelElement:t,viewElement:r}))return!0;if(!t.is("element","paragraph")&&!t.is("element","listItem"))return!1;const s=Hy(t,n,o);return!(!s||!r.is("element","p"))||!(s||!r.is("element","span"))}function s(t,n,o){if(o.has(t))return!1;const r=e.mapper.toViewElement(t);let s=n.length-1;for(let t=r.parent;!t.is("editableElement");t=t.parent){const e=Ly(t),o=Ny(t);if(!o&&!e)continue;const r="checkAttributes:"+(e?"item":"list");if(i.fire(r,{viewElement:t,modelAttributes:n[s].modelAttributes,modelReferenceElement:n[s].modelElement}))break;if(o&&(s--,s<0))return!1}return!0}}(e,t.editing,n,this),{priority:"high"}),this.on("checkAttributes:item",(t,{viewElement:e,modelAttributes:n})=>{e.id!=n.listItemId&&(t.return=!0,t.stop())}),this.on("checkAttributes:list",(t,{viewElement:e,modelAttributes:n})=>{e.name==Oy(n.listType)&&e.id==Ry(n.listType,n.listIndent)||(t.return=!0,t.stop())})}_setupModelPostFixing(){const t=this.editor.model,e=this.getListAttributeNames();t.document.registerPostFixer(n=>function(t,e,n,i){const o=t.document.differ.getChanges(),r=new Set,s=new Set,a=i.editor.config.get("list.multiBlock");let l=!1;for(const i of o){if("insert"==i.type&&"$text"!=i.name){const o=i.position.nodeAfter;if(!t.schema.checkAttribute(o,"listItemId"))for(const t of Array.from(o.getAttributeKeys()))n.includes(t)&&(e.removeAttribute(t,o),l=!0);Dy(i.position,s,r),i.attributes.has("listItemId")||Dy(i.position.getShiftedBy(i.length),s,r);for(const{item:e,previousPosition:n}of t.createRangeIn(o))Zv(e)&&Dy(n,s,r)}else"remove"==i.type?Dy(i.position,s,r):"attribute"==i.type&&n.includes(i.attributeKey)&&(Dy(i.range.start,s,r),null===i.attributeNewValue&&Dy(i.range.start.getShiftedBy(1),s,r));if(!a&&"attribute"==i.type&&Uy.includes(i.attributeKey)){const t=i.range.start.nodeAfter;null===i.attributeNewValue&&t&&t.is("element","listItem")?(e.rename(t,"paragraph"),l=!0):null===i.attributeOldValue&&t&&t.is("element")&&"listItem"!=t.name&&(e.rename(t,"listItem"),l=!0)}}const c=new Set;for(const t of s.values())l=i.fire("postFixer",{listNodes:new Yv(t),listHead:t,writer:e,seenIds:c})||l;return l}(t,n,e,this)),this.on("postFixer",(t,{listNodes:e,writer:n})=>{t.return=function(t,e){let n=0,i=-1,o=null,r=!1;for(const{node:s}of t){const t=s.getAttribute("listIndent");if(t>n){let a;null===o?(o=t-n,a=n):(o>t&&(o=t),a=t-o),a>i+1&&(a=i+1),e.setAttribute("listIndent",a,s),r=!0,i=a}else o=null,n=t+1,i=t}return r}(e,n)||t.return},{priority:"high"}),this.on("postFixer",(t,{listNodes:e,writer:n,seenIds:i})=>{t.return=function(t,e,n){const i=new Set;let o=!1;for(const{node:r}of t){if(i.has(r))continue;let t=r.getAttribute("listType"),s=r.getAttribute("listItemId");if(e.has(s)&&(s=Jv.next()),e.add(s),r.is("element","listItem"))r.getAttribute("listItemId")!=s&&(n.setAttribute("listItemId",s,r),o=!0);else for(const e of ty(r,{direction:"forward"}))i.add(e),e.getAttribute("listType")!=t&&(s=Jv.next(),t=e.getAttribute("listType")),e.getAttribute("listItemId")!=s&&(n.setAttribute("listItemId",s,e),o=!0)}return o}(e,i,n)||t.return},{priority:"high"})}_setupClipboardIntegration(){const t=this.editor.model,e=this.editor.plugins.get("ClipboardPipeline");this.listenTo(t,"insertContent",function(t){return(e,[n,i])=>{const o=n.is("documentFragment")?Array.from(n.getChildren()):[n];if(!o.length)return;const r=(i?t.createSelection(i):t.document.selection).getFirstPosition();let s;if(Zv(r.parent))s=r.parent;else{if(!Zv(r.nodeBefore)||!Zv(r.nodeAfter))return;s=r.nodeBefore}t.change(t=>{const e=s.getAttribute("listType"),n=s.getAttribute("listIndent"),i=o[0].getAttribute("listIndent")||0,r=Math.max(n-i,0);for(const n of o){const i=Zv(n);s.is("element","listItem")&&n.is("element","paragraph")&&t.rename(n,"listItem"),t.setAttributes({listIndent:(i?n.getAttribute("listIndent"):0)+r,listItemId:i?n.getAttribute("listItemId"):Jv.next(),listType:e},n)}})}}(t),{priority:"high"}),this.listenTo(e,"outputTransformation",(e,n)=>{t.change(t=>{const e=Array.from(n.content.getChildren()),i=e[e.length-1];if(e.length>1&&i.is("element")&&i.isEmpty&&e.slice(0,-1).every(Zv)&&t.remove(i),"copy"==n.method||"cut"==n.method){const e=Array.from(n.content.getChildren());dy(e)&&cy(e,t)}})})}_setupAccessibilityIntegration(){const t=this.editor,e=t.t;t.accessibility.addKeystrokeInfoGroup({id:"list",label:e("Keystrokes that can be used in a list"),keystrokes:[{label:e("Increase list item indent"),keystroke:"Tab"},{label:e("Decrease list item indent"),keystroke:"Shift+Tab"}]})}_setupListItemIdConversionStrategy(){this.registerDowncastStrategy({scope:"item",attributeName:"listItemId",setAttributeOnDowncast(t,e,n,i){i&&(i.skipListItemIds||i.isClipboardPipeline)||t.setAttribute("data-list-item-id",e,n)}})}}function Wy(t,e){const n=t.document.selection;if(!n.isCollapsed)return!hy(t);if("forward"===e)return!0;const i=n.getFirstPosition().parent,o=i.previousSibling;return!t.schema.isObject(o)&&(!!o.isEmpty||dy([i,o]))}function qy(t,e,n,i){t.ui.componentFactory.add(e,()=>{const o=Ky(Lu,t,e,n,i);return o.set({tooltip:!0,isToggleable:!0}),o}),t.ui.componentFactory.add(`menuBar:${e}`,()=>{const o=Ky(Gu,t,e,n,i);return o.set({role:"menuitemcheckbox",isToggleable:!0}),o})}function Ky(t,e,n,i,o){const r=e.commands.get(n),s=new t(e.locale);return s.set({label:i,icon:o}),s.bind("isOn","isEnabled").to(r,"value","isEnabled"),s.on("execute",()=>{e.execute(n),e.editing.view.focus()}),s}class Gy extends nc{static get pluginName(){return"ListUI"}static get isOfficialPlugin(){return!0}init(){const t=this.editor.t;this.editor.ui.componentFactory.has("numberedList")||qy(this.editor,"numberedList",t("Numbered List"),qc),this.editor.ui.componentFactory.has("bulletedList")||qy(this.editor,"bulletedList",t("Bulleted List"),Vc)}}class Qy extends nc{static get requires(){return[$y,Gy]}static get pluginName(){return"List"}static get isOfficialPlugin(){return!0}}class Yy extends oc{refresh(){const t=this._getValue();this.value=t,this.isEnabled=null!=t}execute({startIndex:t=1}={}){const e=this.editor.model,n=e.document;let i=Array.from(n.selection.getSelectedBlocks()).filter(t=>Zv(t)&&my(t.getAttribute("listType")));i=ry(i),e.change(e=>{for(const n of i)e.setAttribute("listStart",t>=0?t:1,n)})}_getValue(){const t=wn(this.editor.model.document.selection.getSelectedBlocks());return t&&Zv(t)&&my(t.getAttribute("listType"))?t.getAttribute("listStart"):null}}const Jy={},Zy={},Xy={},tC=[{listStyle:"disc",typeAttribute:"disc",listType:"bulleted"},{listStyle:"circle",typeAttribute:"circle",listType:"bulleted"},{listStyle:"square",typeAttribute:"square",listType:"bulleted"},{listStyle:"decimal",typeAttribute:"1",listType:"numbered"},{listStyle:"decimal-leading-zero",typeAttribute:null,listType:"numbered"},{listStyle:"lower-roman",typeAttribute:"i",listType:"numbered"},{listStyle:"upper-roman",typeAttribute:"I",listType:"numbered"},{listStyle:"lower-alpha",typeAttribute:"a",listType:"numbered"},{listStyle:"upper-alpha",typeAttribute:"A",listType:"numbered"},{listStyle:"lower-latin",typeAttribute:"a",listType:"numbered"},{listStyle:"upper-latin",typeAttribute:"A",listType:"numbered"}];for(const{listStyle:t,typeAttribute:e,listType:n}of tC)Jy[t]=n,Zy[t]=e,e&&(Xy[e]=t);function eC(){return tC.map(t=>t.listStyle)}function nC(t){return Jy[t]||null}function iC(t){return Xy[t]||null}function oC(t){return Zy[t]||null}class rC extends oc{defaultType;_supportedTypes;constructor(t,e,n){super(t),this.defaultType=e,this._supportedTypes=n}refresh(){this.value=this._getValue(),this.isEnabled=this._checkEnabled()}execute(t={}){const e=this.editor.model,n=e.document;e.change(e=>{this._tryToConvertItemsToList(t);let i=Array.from(n.selection.getSelectedBlocks()).filter(t=>t.hasAttribute("listType"));if(i.length){i=ry(i);for(const n of i)e.setAttribute("listStyle",t.type||this.defaultType,n)}})}isStyleTypeSupported(t){return!this._supportedTypes||this._supportedTypes.includes(t)}_getValue(){const t=wn(this.editor.model.document.selection.getSelectedBlocks());return Zv(t)?t.getAttribute("listStyle"):null}_checkEnabled(){const t=this.editor,e=t.commands.get("numberedList"),n=t.commands.get("bulletedList");return e.isEnabled||n.isEnabled}_tryToConvertItemsToList(t){if(!t.type)return;const e=nC(t.type);if(!e)return;const n=this.editor,i=`${e}List`;n.commands.get(i).value||n.execute(i)}}class sC extends oc{refresh(){const t=this._getValue();this.value=t,this.isEnabled=null!=t}execute(t={}){const e=this.editor.model,n=e.document;let i=Array.from(n.selection.getSelectedBlocks()).filter(t=>Zv(t)&&"numbered"==t.getAttribute("listType"));i=ry(i),e.change(e=>{for(const n of i)e.setAttribute("listReversed",!!t.reversed,n)})}_getValue(){const t=wn(this.editor.model.document.selection.getSelectedBlocks());return Zv(t)&&"numbered"==t.getAttribute("listType")?t.getAttribute("listReversed"):null}}function aC(t){return(e,n,i)=>{const{writer:o,schema:r,consumable:s}=i;if(!1===s.test(n.viewItem,t.viewConsumables))return;n.modelRange||Object.assign(n,i.convertChildren(n.viewItem,n.modelCursor));let a=!1;for(const e of n.modelRange.getItems({shallow:!0}))r.checkAttribute(e,t.attributeName)&&t.appliesToListItem(e)&&(e.hasAttribute(t.attributeName)||(o.setAttribute(t.attributeName,t.getAttributeOnUpcast(n.viewItem),e),a=!0));a&&s.consume(n.viewItem,t.viewConsumables)}}class lC extends nc{static get pluginName(){return"ListPropertiesUtils"}static get isOfficialPlugin(){return!0}getAllSupportedStyleTypes(){return eC()}getListTypeFromListStyleType(t){return nC(t)}getListStyleTypeFromTypeAttribute(t){return iC(t)}getTypeAttributeFromListStyleType(t){return oC(t)}}function cC(t){const{startIndex:e,reversed:n,styles:i}=t;return{styles:dC(i),startIndex:e||!1,reversed:n||!1}}function dC(t){const e={listTypes:["bulleted","numbered"],useAttribute:!1};return!0===t||(t?Array.isArray(t)||"string"==typeof t?e.listTypes=fn(t):(e.listTypes=t.listTypes?fn(t.listTypes):e.listTypes,e.useAttribute=!!t.useAttribute,t.listStyleTypes&&(e.listStyleTypes=t.listStyleTypes)):e.listTypes=[]),e}const uC="default";class hC extends nc{static get requires(){return[$y,lC]}static get pluginName(){return"ListPropertiesEditing"}static get isOfficialPlugin(){return!0}constructor(t){super(t),t.config.define("list.properties",{styles:!0,startIndex:!1,reversed:!1})}init(){const t=this.editor,e=t.model,n=t.plugins.get($y),i=function(t){const e=[],n=cC(t);if(t.styles){const t=n.styles.useAttribute;e.push({attributeName:"listStyle",defaultValue:uC,viewConsumables:{styles:"list-style-type"},addCommand(e){let n=eC();t&&(n=n.filter(t=>!!oC(t))),e.commands.add("listStyle",new rC(e,uC,n))},appliesToListItem:t=>"numbered"==t.getAttribute("listType")||"bulleted"==t.getAttribute("listType"),hasValidAttribute(t){if(!this.appliesToListItem(t))return!t.hasAttribute("listStyle");if(!t.hasAttribute("listStyle"))return!1;const e=t.getAttribute("listStyle");return e==uC||nC(e)==t.getAttribute("listType")},setAttributeOnDowncast(e,n,i){if(n&&n!==uC){if(!t)return void e.setStyle("list-style-type",n,i);{const t=oC(n);if(t)return void e.setAttribute("type",t,i)}}e.removeStyle("list-style-type",i),e.removeAttribute("type",i)},getAttributeOnUpcast(t){const e=t.getStyle("list-style-type");if(e)return function(t){switch(t){case"lower-alpha":return"lower-latin";case"upper-alpha":return"upper-latin";default:return t}}(e);const n=t.getAttribute("type");return n?iC(n):uC}})}return t.reversed&&e.push({attributeName:"listReversed",defaultValue:!1,viewConsumables:{attributes:"reversed"},addCommand(t){t.commands.add("listReversed",new sC(t))},appliesToListItem:t=>"numbered"==t.getAttribute("listType"),hasValidAttribute(t){return this.appliesToListItem(t)==t.hasAttribute("listReversed")},setAttributeOnDowncast(t,e,n){e?t.setAttribute("reversed","reversed",n):t.removeAttribute("reversed",n)},getAttributeOnUpcast:t=>t.hasAttribute("reversed")}),t.startIndex&&e.push({attributeName:"listStart",defaultValue:1,viewConsumables:{attributes:"start"},addCommand(t){t.commands.add("listStart",new Yy(t))},appliesToListItem:t=>my(t.getAttribute("listType")),hasValidAttribute(t){return this.appliesToListItem(t)==t.hasAttribute("listStart")},setAttributeOnDowncast(t,e,n){0==e||e>1?t.setAttribute("start",e,n):t.removeAttribute("start",n)},getAttributeOnUpcast(t){const e=t.getAttribute("start");return e>=0?e:1}}),e}(t.config.get("list.properties"));for(const o of i)o.addCommand(t),e.schema.extend("$listItem",{allowAttributes:o.attributeName}),n.registerDowncastStrategy({scope:"list",attributeName:o.attributeName,setAttributeOnDowncast(t,e,n){o.setAttributeOnDowncast(t,e,n)}});t.conversion.for("upcast").add(t=>{for(const e of i)t.on("element:ol",aC(e)),t.on("element:ul",aC(e))}),n.on("checkAttributes:list",(t,{viewElement:e,modelAttributes:n,modelReferenceElement:o})=>{for(const r of i)r.appliesToListItem(o)&&r.getAttributeOnUpcast(e)!=n[r.attributeName]&&(t.return=!0,t.stop())}),this.listenTo(t.commands.get("indentList"),"afterExecute",(t,n)=>{e.change(t=>{for(const e of n)for(const n of i)n.appliesToListItem(e)&&t.setAttribute(n.attributeName,n.defaultValue,e)})}),n.on("postFixer",(t,{listNodes:e,writer:n})=>{for(const{node:o}of e)for(const e of i)e.hasValidAttribute(o)||(e.appliesToListItem(o)?n.setAttribute(e.attributeName,e.defaultValue,o):n.removeAttribute(e.attributeName,o),t.return=!0)}),n.on("postFixer",(t,{listNodes:e,writer:n})=>{for(const{node:o,previousNodeInList:r}of e)if(r&&r.getAttribute("listType")==o.getAttribute("listType"))for(const e of i){const{attributeName:i}=e;if(!e.appliesToListItem(o))continue;const s=r.getAttribute(i);o.getAttribute(i)!=s&&(n.setAttribute(i,s,o),t.return=!0)}})}}class gC extends ku{children;stylesView=null;additionalPropertiesCollapsibleView=null;startIndexFieldView=null;reversedSwitchButtonView=null;focusTracker=new _n;keystrokes=new xn;focusables=new Qd;focusCycler;constructor(t,{enabledProperties:e,styleButtonViews:n,styleGridAriaLabel:i}){super(t);const o=["ck","ck-list-properties"];this.children=this.createCollection(),this.focusCycler=new Ou({focusables:this.focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),n&&n.length?(this.stylesView=this._createStylesView(n,i),this.children.add(this.stylesView)):o.push("ck-list-properties_without-styles"),(e.startIndex||e.reversed)&&(this._addNumberedListPropertyViews(e),o.push("ck-list-properties_with-numbered-properties")),this.setTemplate({tag:"div",attributes:{class:o},children:this.children})}render(){if(super.render(),this.stylesView){this.focusables.add(this.stylesView),this.focusTracker.add(this.stylesView.element),(this.startIndexFieldView||this.reversedSwitchButtonView)&&(this.focusables.add(this.children.last.buttonView),this.focusTracker.add(this.children.last.buttonView.element));for(const t of this.stylesView.children)this.stylesView.focusTracker.add(t.element);Su({keystrokeHandler:this.stylesView.keystrokes,focusTracker:this.stylesView.focusTracker,gridItems:this.stylesView.children,numberOfColumns:()=>gt.window.getComputedStyle(this.stylesView.element).getPropertyValue("grid-template-columns").split(" ").length,uiLanguageDirection:this.locale&&this.locale.uiLanguageDirection})}if(this.startIndexFieldView){this.focusables.add(this.startIndexFieldView),this.focusTracker.add(this.startIndexFieldView.element);const t=t=>t.stopPropagation();this.keystrokes.set("arrowright",t),this.keystrokes.set("arrowleft",t),this.keystrokes.set("arrowup",t),this.keystrokes.set("arrowdown",t)}this.reversedSwitchButtonView&&(this.focusables.add(this.reversedSwitchButtonView),this.focusTracker.add(this.reversedSwitchButtonView.element)),this.keystrokes.listenTo(this.element)}focus(){this.focusCycler.focusFirst()}focusLast(){this.focusCycler.focusLast()}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}_createStylesView(t,e){const n=new ku(this.locale);return n.children=n.createCollection(),n.children.addMany(t),n.setTemplate({tag:"div",attributes:{"aria-label":e,class:["ck","ck-list-styles-list"]},children:n.children}),n.children.delegate("execute").to(this),n.focus=function(){for(const t of this.children)if(t instanceof Lu&&t.isOn)return void t.focus();this.children.first.focus()},n.focusTracker=new _n,n.keystrokes=new xn,n.render(),n.keystrokes.listenTo(n.element),n}_addNumberedListPropertyViews(t){const e=this.locale.t,n=[];t.startIndex&&(this.startIndexFieldView=this._createStartIndexField(),n.push(this.startIndexFieldView)),t.reversed&&(this.reversedSwitchButtonView=this._createReversedSwitchButton(),n.push(this.reversedSwitchButtonView)),this.stylesView?(this.additionalPropertiesCollapsibleView=new dh(this.locale,n),this.additionalPropertiesCollapsibleView.set({label:e("List properties"),isCollapsed:!0}),this.additionalPropertiesCollapsibleView.buttonView.bind("isEnabled").toMany(n,"isEnabled",(...t)=>t.some(t=>t)),this.additionalPropertiesCollapsibleView.buttonView.on("change:isEnabled",(t,e,n)=>{n||(this.additionalPropertiesCollapsibleView.isCollapsed=!0)}),this.children.add(this.additionalPropertiesCollapsibleView)):this.children.addMany(n)}_createStartIndexField(){const t=this.locale.t,e=new kh(this.locale,Gh);return e.set({label:t("Start at"),class:"ck-numbered-list-properties__start-index"}),e.fieldView.set({min:0,step:1,value:1,inputMode:"numeric"}),e.fieldView.on("input",()=>{const n=e.fieldView.element,i=n.valueAsNumber;Number.isNaN(i)?e.errorText=t("Invalid start index value."):n.checkValidity()?this.fire("listStart",{startIndex:i}):e.errorText=t("Start index must be greater than 0.")}),e}_createReversedSwitchButton(){const t=this.locale.t,e=new rh(this.locale);return e.set({withText:!0,label:t("Reversed order"),class:"ck-numbered-list-properties__reversed-order"}),e.delegate("execute").to(this,"listReversed"),e}}class mC extends nc{static get pluginName(){return"ListPropertiesUI"}static get isOfficialPlugin(){return!0}init(){const t=this.editor,e=t.locale.t,n=t.config.get("list.properties"),i=cC(n),o=i.styles.listTypes;if(o.includes("bulleted")){const n=[{label:e("Toggle the disc list style"),tooltip:e("Disc"),type:"disc",icon:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 44 44"><path fill-opacity=".163" d="M35 29a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1z"/><path d="M11 27a3 3 0 1 1 0 6 3 3 0 0 1 0-6m0-9a3 3 0 1 1 0 6 3 3 0 0 1 0-6m0-9a3 3 0 1 1 0 6 3 3 0 0 1 0-6"/></svg>'},{label:e("Toggle the circle list style"),tooltip:e("Circle"),type:"circle",icon:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 44 44"><path fill-opacity=".163" d="M35 29a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1z"/><path d="M11 27a3 3 0 1 1 0 6 3 3 0 0 1 0-6m0 1a2 2 0 1 0 0 4 2 2 0 0 0 0-4m0-10a3 3 0 1 1 0 6 3 3 0 0 1 0-6m0 1a2 2 0 1 0 0 4 2 2 0 0 0 0-4m0-10a3 3 0 1 1 0 6 3 3 0 0 1 0-6m0 1a2 2 0 1 0 0 4 2 2 0 0 0 0-4"/></svg>'},{label:e("Toggle the square list style"),tooltip:e("Square"),type:"square",icon:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 44 44"><path fill-opacity=".163" d="M35 29a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1z"/><path d="M14 27v6H8v-6zm0-9v6H8v-6zm0-9v6H8V9z"/></svg>'}],o=e("Bulleted List"),r=e("Bulleted list styles toolbar"),s="bulletedList";t.ui.componentFactory.add(s,pC({editor:t,normalizedConfig:i,parentCommandName:s,buttonLabel:o,buttonIcon:Vc,styleGridAriaLabel:r,styleDefinitions:n})),t.ui.componentFactory.add(`menuBar:${s}`,bC({editor:t,normalizedConfig:i,parentCommandName:s,buttonLabel:o,styleGridAriaLabel:r,styleDefinitions:n}))}if(o.includes("numbered")||n.startIndex||n.reversed){const n=[{label:e("Toggle the decimal list style"),tooltip:e("Decimal"),type:"decimal",icon:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 44 44"><path fill-opacity=".163" d="M35 29a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1z"/><path d="M10.29 15V8.531H9.286q-.21.59-.778 1.03-.567.442-1.05.6v1.121a4.3 4.3 0 0 0 1.595-.936V15h1.235zm3.343 0v-1.235h-1.235V15zM11.3 24v-1.147H8.848q.096-.167.252-.343.156-.175.74-.712.585-.536.81-.821.338-.431.494-.824.156-.394.156-.829 0-.765-.545-1.279t-1.499-.514q-.87 0-1.45.444t-.69 1.463l1.23.124q.036-.54.264-.774.23-.233.616-.233.39 0 .613.222t.222.635q0 .374-.255.756-.19.277-1.024 1.055-1.038.962-1.389 1.544T6.971 24zm2.333 0v-1.235h-1.235V24zM9.204 34.11q.922 0 1.542-.598.62-.597.62-1.446 0-.585-.332-.997a1.5 1.5 0 0 0-.886-.532q.928-.505.928-1.353 0-.598-.453-1.073-.549-.58-1.459-.58a2.25 2.25 0 0 0-.96.2 1.6 1.6 0 0 0-.668.55q-.24.349-.358.933l1.138.194q.048-.422.272-.642t.54-.22q.322 0 .515.194c.193.194.193.302.193.518q0 .383-.263.613-.263.231-.765.218l-.136 1.006q.33-.092.567-.092.36 0 .61.272.251.273.251.739 0 .492-.261.782a.83.83 0 0 1-.644.29.84.84 0 0 1-.607-.242q-.251-.241-.307-.698l-1.196.145q.093.813.668 1.316t1.45.503zm4.43-.11v-1.235h-1.236V34h1.235z"/></svg>'},{label:e("Toggle the decimal with leading zero list style"),tooltip:e("Decimal with leading zero"),type:"decimal-leading-zero",icon:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 44 44"><path fill-opacity=".163" d="M35 29a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1z"/><path d="M5.714 15.11q.935 0 1.46-.66.632-.799.632-2.627 0-1.832-.629-2.624-.527-.668-1.463-.668t-1.459.66q-.633.8-.633 2.619 0 1.854.576 2.577.577.723 1.516.723m0-1.024a.6.6 0 0 1-.398-.14q-.173-.141-.287-.565-.115-.424-.115-1.558c0-1.134.043-1.294.128-1.613q.096-.37.272-.512a.62.62 0 0 1 .4-.143.6.6 0 0 1 .398.143q.173.143.288.567t.114 1.558c0 1.134-.043 1.292-.128 1.608q-.096.37-.272.512a.62.62 0 0 1-.4.143m6.078.914V8.531H10.79q-.21.59-.778 1.03-.567.442-1.05.6v1.121a4.3 4.3 0 0 0 1.595-.936V15zm3.344 0v-1.235h-1.235V15zm-9.422 9.11q.935 0 1.46-.66.632-.799.632-2.627 0-1.833-.629-2.624-.527-.668-1.463-.668t-1.459.66q-.633.8-.633 2.619 0 1.854.576 2.577.577.723 1.516.723m0-1.024a.6.6 0 0 1-.398-.14q-.173-.142-.287-.565-.115-.424-.115-1.558c0-1.134.043-1.294.128-1.613q.096-.37.272-.512a.62.62 0 0 1 .4-.143.6.6 0 0 1 .398.143q.173.142.288.567t.114 1.558c0 1.134-.043 1.292-.128 1.608q-.096.37-.272.512a.62.62 0 0 1-.4.143m7.088.914v-1.147H10.35q.097-.167.253-.343.155-.175.74-.712t.81-.821q.338-.431.493-.824.156-.394.156-.829 0-.765-.544-1.279-.546-.514-1.499-.514-.87 0-1.45.444t-.69 1.463l1.23.124q.036-.54.264-.774t.615-.233q.391 0 .613.222t.222.635q0 .374-.255.756-.189.277-1.024 1.055-1.037.962-1.388 1.544-.352.583-.422 1.233zm2.334 0v-1.235h-1.235V24zM5.714 34.11q.935 0 1.46-.66.632-.799.632-2.627 0-1.832-.629-2.624-.527-.668-1.463-.668t-1.459.66q-.633.8-.633 2.619 0 1.854.576 2.577.577.723 1.516.723m0-1.024a.6.6 0 0 1-.398-.14q-.173-.142-.287-.565-.115-.424-.115-1.558c0-1.134.043-1.294.128-1.613q.096-.37.272-.512a.62.62 0 0 1 .4-.143.6.6 0 0 1 .398.143q.173.142.288.567t.114 1.558c0 1.134-.043 1.292-.128 1.608q-.096.37-.272.512a.62.62 0 0 1-.4.143m4.992 1.024q.924 0 1.543-.598.62-.597.62-1.446 0-.585-.332-.997a1.5 1.5 0 0 0-.886-.532q.927-.505.927-1.353 0-.598-.452-1.073-.55-.58-1.46-.58a2.25 2.25 0 0 0-.96.2 1.6 1.6 0 0 0-.667.55q-.24.349-.359.933l1.139.194q.048-.422.272-.642t.54-.22q.321 0 .515.194c.194.194.193.302.193.518q0 .383-.264.613-.263.231-.764.218l-.136 1.006q.33-.092.566-.092.36 0 .611.272.25.273.25.739 0 .492-.26.782a.83.83 0 0 1-.644.29.84.84 0 0 1-.607-.242q-.25-.241-.308-.698l-1.195.145q.093.813.668 1.316t1.45.503m4.43-.11v-1.235h-1.235V34z"/></svg>'},{label:e("Toggle the lower–roman list style"),tooltip:e("Lower–roman"),type:"lower-roman",icon:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 44 44"><path fill-opacity=".163" d="M35 29a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1z"/><path d="M11.88 8.7V7.558h-1.234V8.7zm0 5.3V9.333h-1.234V14zm2.5 0v-1.235h-1.234V14zm-4.75 4.7v-1.142H8.395V18.7zm0 5.3v-4.667H8.395V24zm2.5-5.3v-1.142h-1.234V18.7zm0 5.3v-4.667h-1.234V24zm2.501 0v-1.235h-1.235V24zM7.38 28.7v-1.142H6.145V28.7zm0 5.3v-4.667H6.145V34zm2.5-5.3v-1.142H8.646V28.7zm0 5.3v-4.667H8.646V34zm2.5-5.3v-1.142h-1.234V28.7zm0 5.3v-4.667h-1.234V34zm2.501 0v-1.235h-1.235V34z"/></svg>'},{label:e("Toggle the upper–roman list style"),tooltip:e("Upper-roman"),type:"upper-roman",icon:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 44 44"><path fill-opacity=".163" d="M35 29a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1z"/><path d="M11.916 15V8.558h-1.301V15zm2.465 0v-1.235h-1.235V15zM9.665 25v-6.442h-1.3V25zm2.5 0v-6.442h-1.3V25zm2.466 0v-1.235h-1.235V25zm-7.216 9v-6.442h-1.3V34zm2.5 0v-6.442h-1.3V34zm2.501 0v-6.442h-1.3V34zm2.465 0v-1.235h-1.235V34z"/></svg>'},{label:e("Toggle the lower–latin list style"),tooltip:e("Lower-latin"),type:"lower-latin",icon:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 44 44"><path fill-opacity=".163" d="M35 29a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1z"/><path d="M9.62 14.105q.408 0 .768-.153c.36-.153.466-.257.677-.462q.013.036.044.145.07.242.119.365h1.221a2.7 2.7 0 0 1-.222-.626q-.06-.293-.059-.908l.013-1.441q0-.804-.165-1.105-.165-.302-.569-.497-.405-.195-1.23-.195-.91 0-1.371.325-.462.325-.65 1.002l1.12.202q.114-.326.299-.455.184-.13.514-.13.488 0 .663.152.176.151.176.508v.123q-.333.14-1.2.303-.641.123-.982.288t-.53.474a1.33 1.33 0 0 0-.188.706q0 .598.415.988.416.391 1.136.391zm.368-.87a.68.68 0 0 1-.492-.189.6.6 0 0 1-.193-.448q0-.263.241-.435.159-.105.673-.215a7 7 0 0 0 .751-.19v.247q0 .443-.048.602a.77.77 0 0 1-.295.409 1.07 1.07 0 0 1-.637.22zm4.645.765v-1.235h-1.235V14zM10.2 25.105q.813 0 1.382-.646.57-.645.57-1.84 0-1.156-.559-1.774a1.82 1.82 0 0 0-1.41-.617q-.783 0-1.354.65v-2.32H7.594V25h1.147v-.686a1.9 1.9 0 0 0 .67.592q.39.2.79.2zm-.299-.975q-.531 0-.852-.492-.23-.348-.229-1.073 0-.703.295-1.048a.93.93 0 0 1 .738-.345q.453 0 .743.354t.29 1.154q0 .751-.288 1.1t-.697.35m4.478.87v-1.235h-1.234V25zm-4.017 9.105q.9 0 1.437-.426.536-.426.725-1.261l-1.213-.207q-.092.489-.316.688a.83.83 0 0 1-.576.2.92.92 0 0 1-.75-.343q-.278-.343-.278-1.173 0-.747.274-1.066.275-.318.736-.318.348 0 .565.184t.28.55l1.216-.22q-.22-.751-.722-1.119-.504-.366-1.356-.366-1.042 0-1.653.643-.61.645-.61 1.8 0 1.143.608 1.788.609.646 1.633.646M14.633 34v-1.235h-1.235V34z"/></svg>'},{label:e("Toggle the upper–latin list style"),tooltip:e("Upper-latin"),type:"upper-latin",icon:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 44 44"><path fill-opacity=".163" d="M35 29a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1z"/><path d="m7.88 15 .532-1.463h2.575L11.549 15h1.415l-2.58-6.442H9.01L6.5 15zm2.69-2.549H8.811l.87-2.39.887 2.39zM14.88 15v-1.235h-1.234V15zM9.352 25q1.244-.009 1.569-.044.518-.057.872-.305.354-.249.558-.664t.205-.855q0-.558-.317-.97-.315-.414-.905-.585a1.5 1.5 0 0 0 .661-.567 1.5 1.5 0 0 0 .244-.83q0-.419-.197-.754a1.65 1.65 0 0 0-.495-.539 1.7 1.7 0 0 0-.672-.266q-.375-.063-1.14-.063H7.158V25zm.142-3.88H8.46v-1.49h.747q.918 0 1.112.022.325.04.49.226.165.188.165.486a.68.68 0 0 1-.192.503.86.86 0 0 1-.525.23 12 12 0 0 1-.944.023h.18zm.17 2.795H8.46v-1.723h1.05q.888 0 1.154.092.266.093.406.295a.84.84 0 0 1 .14.492q0 .342-.181.547a.8.8 0 0 1-.473.257q-.189.04-.892.04M14.88 25v-1.235h-1.234V25zm-5.018 9.11q1.037 0 1.711-.512t.965-1.567l-1.261-.4q-.163.708-.536 1.037-.375.33-.892.33-.704 0-1.143-.519-.44-.518-.44-1.74 0-1.15.447-1.665.445-.514 1.162-.514.52 0 .881.29.362.29.477.79l1.288-.307q-.22-.774-.66-1.187-.738-.698-1.92-.698-1.353 0-2.184.89-.83.89-.83 2.498 0 1.521.825 2.397.826.877 2.11.877M14.88 34v-1.235h-1.234V34z"/></svg>'}],r=e("Numbered List"),s=e("Numbered list styles toolbar"),a="numberedList";t.ui.componentFactory.add(a,pC({editor:t,normalizedConfig:i,parentCommandName:a,buttonLabel:r,buttonIcon:qc,styleGridAriaLabel:s,styleDefinitions:n})),o.includes("numbered")&&t.ui.componentFactory.add(`menuBar:${a}`,bC({editor:t,normalizedConfig:i,parentCommandName:a,buttonLabel:r,styleGridAriaLabel:s,styleDefinitions:n}))}}}function pC({editor:t,normalizedConfig:e,parentCommandName:n,buttonLabel:i,buttonIcon:o,styleGridAriaLabel:r,styleDefinitions:s}){const a=t.commands.get(n);return l=>{const c=Bh(l,Dh),d=c.buttonView;return c.bind("isEnabled").to(a),c.class="ck-list-styles-dropdown",d.on("execute",()=>{t.execute(n),t.editing.view.focus()}),d.set({label:i,icon:o,tooltip:!0,isToggleable:!0}),d.bind("isOn").to(a,"value",t=>!!t),c.once("change:isOpen",()=>{const i=function({editor:t,normalizedConfig:e,dropdownView:n,parentCommandName:i,styleDefinitions:o,styleGridAriaLabel:r}){const s=t.locale,a={...e,..."numberedList"!=i?{startIndex:!1,reversed:!1}:null},l=i.replace("List","");let c=null;if(e.styles.listTypes.includes(l)){const n=t.commands.get("listStyle"),r=fC({editor:t,parentCommandName:i,listStyleCommand:n}),s=e.styles.listStyleTypes;let a=o;if(s){const t=s[l];t&&(a=o.filter(e=>t.includes(e.type)))}const d=kC(n);c=a.filter(d).map(r)}const d=new gC(s,{styleGridAriaLabel:r,enabledProperties:a,styleButtonViews:c});if(e.styles.listTypes.includes(l)&&$h(n,()=>d.stylesView.children.find(t=>t.isOn)),a.startIndex){const e=t.commands.get("listStart");d.startIndexFieldView.bind("isEnabled").to(e),d.startIndexFieldView.fieldView.bind("value").to(e),d.on("listStart",(e,n)=>t.execute("listStart",n))}if(a.reversed){const e=t.commands.get("listReversed");d.reversedSwitchButtonView.bind("isEnabled").to(e),d.reversedSwitchButtonView.bind("isOn").to(e,"value",t=>!!t),d.on("listReversed",()=>{const n=e.value;t.execute("listReversed",{reversed:!n})})}return d.delegate("execute").to(n),d}({editor:t,normalizedConfig:e,dropdownView:c,parentCommandName:n,styleGridAriaLabel:r,styleDefinitions:s});c.panelView.children.add(i)}),c.on("execute",()=>{t.editing.view.focus()}),c}}function fC({editor:t,listStyleCommand:e,parentCommandName:n}){const i=t.locale,o=t.commands.get(n);return({label:r,type:s,icon:a,tooltip:l})=>{const c=new Lu(i);return c.set({label:r,icon:a,tooltip:l}),c.bind("isOn").to(e,"value",t=>t===s),c.on("execute",()=>{o.value?e.value===s?t.execute(n):e.value!==s&&t.execute("listStyle",{type:s}):t.model.change(()=>{t.execute("listStyle",{type:s})})}),c}}function bC({editor:t,normalizedConfig:e,parentCommandName:n,buttonLabel:i,styleGridAriaLabel:o,styleDefinitions:r}){return s=>{const a=new Jg(s),l=t.commands.get(n),c=t.commands.get("listStyle"),d=kC(c),u=fC({editor:t,parentCommandName:n,listStyleCommand:c}),h=e.styles.listStyleTypes;let g=r;if(h){const t=h[l.type];t&&(g=r.filter(e=>t.includes(e.type)))}const m=g.filter(d).map(u),p=new gC(s,{styleGridAriaLabel:o,enabledProperties:{...e,startIndex:!1,reversed:!1},styleButtonViews:m});return p.delegate("execute").to(a),a.buttonView.set({label:i,icon:"bulletedList"===n?Vc:qc}),a.panelView.children.add(p),a.bind("isEnabled").to(l,"isEnabled"),a.on("execute",()=>{t.editing.view.focus()}),a}}function kC(t){return"function"==typeof t.isStyleTypeSupported?e=>t.isStyleTypeSupported(e.type):()=>!0}class wC extends nc{static get requires(){return[hC,mC]}static get pluginName(){return"ListProperties"}static get isOfficialPlugin(){return!0}}class _C extends oc{constructor(t){super(t),this.on("execute",()=>{this.refresh()},{priority:"highest"})}refresh(){const t=this._getSelectedItems();this.value=this._getValue(t),this.isEnabled=!!t.length}execute(t={}){this.editor.model.change(e=>{const n=this._getSelectedItems(),i=void 0===t.forceValue?!this._getValue(n):t.forceValue;for(const t of n)i?e.setAttribute("todoListChecked",!0,t):e.removeAttribute("todoListChecked",t)})}_getValue(t){return t.every(t=>t.getAttribute("todoListChecked"))}_getSelectedItems(){const t=this.editor.model,e=t.schema,n=t.document.selection.getFirstRange(),i=n.start.parent,o=[];e.checkAttribute(i,"todoListChecked")&&o.push(...Xv(i));for(const t of n.getItems({shallow:!0}))e.checkAttribute(t,"todoListChecked")&&!o.includes(t)&&o.push(...Xv(t));return o}}class vC extends Ko{domEventType=["change"];onDomEvent(t){if(t.target){const e=this.view.domConverter.mapDomToView(t.target);e&&e.is("element","input")&&"checkbox"==e.getAttribute("type")&&e.findAncestor({classes:"todo-list__label"})&&this.fire("todoCheckboxChange",t)}}}const yC=dn("Ctrl+Enter");class CC extends nc{static get pluginName(){return"TodoListEditing"}static get isOfficialPlugin(){return!0}static get requires(){return[$y]}init(){const t=this.editor,e=t.model,n=t.editing,i=t.plugins.get($y),o=t.config.get("list.multiBlock")?"paragraph":"listItem";t.commands.add("todoList",new ky(t,"todo")),t.commands.add("checkTodoList",new _C(t)),n.view.addObserver(vC),e.schema.extend("$listItem",{allowAttributes:"todoListChecked"}),e.schema.addAttributeCheck(t=>{const e=t.last;if(!e.getAttribute("listItemId")||"todo"!=e.getAttribute("listType"))return!1},"todoListChecked"),t.conversion.for("upcast").add(t=>{t.on("element:input",(t,e,n)=>{const i=e.modelCursor,o=i.parent,r=e.viewItem;if(!n.consumable.test(r,{name:!0}))return;if("checkbox"!=r.getAttribute("type")||!i.isAtStart||!o.hasAttribute("listType"))return;n.consumable.consume(r,{name:!0});const s=n.writer;s.setAttribute("listType","todo",o),e.viewItem.hasAttribute("checked")&&s.setAttribute("todoListChecked",!0,o),e.modelRange=s.createRange(i)}),t.on("element:li",(t,e,n)=>{const{writer:i,schema:o}=n;if(!e.modelRange)return;const r=Array.from(e.modelRange.getItems({shallow:!0})).filter(t=>"todo"===t.getAttribute("listType")&&o.checkAttribute(t,"listItemId")).reduce((t,e)=>{const n=e.getAttribute("listItemId");return t.has(n)||t.set(n,Xv(e)),t},new Map);for(const[,t]of r.entries())if(t.some(t=>t.getAttribute("todoListChecked")))for(const e of t)i.setAttribute("todoListChecked",!0,e)},{priority:"low"}),t.on("element:label",xC({name:"label",classes:"todo-list__label"})),t.on("element:label",xC({name:"label",classes:["todo-list__label","todo-list__label_without-description"]})),t.on("element:span",xC({name:"span",classes:"todo-list__label__description"})),t.on("element:ul",function(){const t=new vi({name:"ul",classes:"todo-list"});return(e,n,i)=>{const o=t.match(n.viewItem);if(!o)return;const r=o.match;r.name=!1,i.consumable.consume(n.viewItem,r)}}())}),t.conversion.for("downcast").elementToElement({model:o,view:(t,{writer:e})=>{if(AC(t,i.getListAttributeNames()))return e.createContainerElement("span",{class:"todo-list__label__description"})},converterPriority:"highest"}),i.registerDowncastStrategy({scope:"list",attributeName:"listType",setAttributeOnDowncast(t,e,n){"todo"==e?t.addClass("todo-list",n):t.removeClass("todo-list",n)}}),i.registerDowncastStrategy({scope:"itemMarker",attributeName:"todoListChecked",createElement(t,e,{dataPipeline:n}){if("todo"!=e.getAttribute("listType"))return null;const i=t.createUIElement("input",{type:"checkbox",...e.getAttribute("todoListChecked")?{checked:"checked"}:null,...n?{disabled:"disabled"}:{tabindex:"-1"}});if(n)return i;const o=t.createContainerElement("span",{contenteditable:"false"},i);return o.getFillerOffset=()=>null,o},canWrapElement:t=>AC(t,i.getListAttributeNames()),createWrapperElement(t,e,{dataPipeline:n}){const o=["todo-list__label"];return AC(e,i.getListAttributeNames())||o.push("todo-list__label_without-description"),t.createAttributeElement(n?"label":"span",{class:o.join(" ")})}}),i.on("checkElement",(t,{modelElement:e,viewElement:n})=>{const o=AC(e,i.getListAttributeNames());n.hasClass("todo-list__label__description")!=o&&(t.return=!0,t.stop())}),i.on("checkElement",(e,{modelElement:n,viewElement:i})=>{const o="todo"==n.getAttribute("listType")&&ny(n);let r=!1;const s=t.editing.view.createPositionBefore(i).getWalker({direction:"backward"});for(const{item:e}of s){if(e.is("element")&&t.editing.mapper.toModelElement(e))break;e.is("element","input")&&"checkbox"==e.getAttribute("type")&&(r=!0)}r!=o&&(e.return=!0,e.stop())}),i.on("postFixer",(t,{listNodes:e,writer:n})=>{for(const{node:i,previousNodeInList:o}of e){if(!o)continue;if(o.getAttribute("listItemId")!=i.getAttribute("listItemId"))continue;const e=o.hasAttribute("todoListChecked"),r=i.hasAttribute("todoListChecked");r&&!e?(n.removeAttribute("todoListChecked",i),t.return=!0):!r&&e&&(n.setAttribute("todoListChecked",!0,i),t.return=!0)}}),e.document.registerPostFixer(t=>{const n=e.document.differ.getChanges();let i=!1;for(const e of n)if("attribute"==e.type&&"listType"==e.attributeKey){const n=e.range.start.nodeAfter;"todo"==e.attributeOldValue&&n.hasAttribute("todoListChecked")&&(t.removeAttribute("todoListChecked",n),i=!0)}else if("insert"==e.type&&"$text"!=e.name)for(const{item:n}of t.createRangeOn(e.position.nodeAfter))n.is("element")&&"todo"!=n.getAttribute("listType")&&n.hasAttribute("todoListChecked")&&(t.removeAttribute("todoListChecked",n),i=!0);return i}),this.listenTo(n.view.document,"keydown",(e,n)=>{cn(n)===yC&&(t.execute("checkTodoList"),e.stop())},{priority:"high"}),this.listenTo(n.view.document,"todoCheckboxChange",(t,e)=>{const i=e.target;if(!i||!i.is("element","input"))return;const o=n.view.createPositionAfter(i),r=n.mapper.toModelPosition(o).parent;r&&Zv(r)&&"todo"==r.getAttribute("listType")&&this._handleCheckmarkChange(r)}),this.listenTo(n.view.document,"arrowKey",function(t,e){return(n,i)=>{const o=hn(i.keyCode,e.contentLanguageDirection),r=t.schema,s=t.document.selection;if(!s.isCollapsed)return;const a=s.getFirstPosition(),l=a.parent;if("right"==o&&a.isAtEnd){const e=r.getNearestSelectionRange(t.createPositionAfter(l),"forward");if(!e)return;const o=e.start.parent;o&&Zv(o)&&"todo"==o.getAttribute("listType")&&(t.change(t=>t.setSelection(e)),i.preventDefault(),i.stopPropagation(),n.stop())}else if("left"==o&&a.isAtStart&&Zv(l)&&"todo"==l.getAttribute("listType")){const e=r.getNearestSelectionRange(t.createPositionBefore(l),"backward");if(!e)return;t.change(t=>t.setSelection(e)),i.preventDefault(),i.stopPropagation(),n.stop()}}}(e,t.locale),{context:"$text"}),this.listenTo(n.mapper,"viewToModelPosition",(t,n)=>{const i=n.viewPosition.parent,o=i.is("attributeElement","li")&&0==n.viewPosition.offset,r=EC(i)&&n.viewPosition.offset<=1,s=i.is("element","span")&&"false"==i.getAttribute("contenteditable")&&EC(i.parent);if(!o&&!r&&!s)return;const a=n.modelPosition.nodeAfter;a&&"todo"==a.getAttribute("listType")&&(n.modelPosition=e.createPositionAt(a,0))},{priority:"low"}),this._initAriaAnnouncements()}_handleCheckmarkChange(t){const e=this.editor,n=e.model,i=Array.from(n.document.selection.getRanges());n.change(n=>{n.setSelection(t,"end"),e.execute("checkTodoList"),n.setSelection(i)})}_initAriaAnnouncements(){const{model:t,ui:e,t:n}=this.editor;let i=null;e&&t.document.selection.on("change:range",()=>{const o=t.document.selection.focus.parent,r=SC(i),s=SC(o);r&&!s?e.ariaLiveAnnouncer.announce(n("Leaving a to-do list")):!r&&s&&e.ariaLiveAnnouncer.announce(n("Entering a to-do list")),i=o})}}function xC(t){const e=new vi(t);return(t,n,i)=>{const o=e.match(n.viewItem);o&&i.consumable.consume(n.viewItem,o.match)&&Object.assign(n,i.convertChildren(n.viewItem,n.modelCursor))}}function AC(t,e){return(t.is("element","paragraph")||t.is("element","listItem"))&&"todo"==t.getAttribute("listType")&&ny(t)&&function(t,e){for(const n of t.getAttributeKeys())if(!n.startsWith("selection:")&&!e.includes(n))return!1;return!0}(t,e)}function EC(t){return!!t&&t.is("attributeElement")&&t.hasClass("todo-list__label")}function SC(t){return!(!t||!t.is("element","paragraph")&&!t.is("element","listItem")||"todo"!=t.getAttribute("listType"))}class TC extends nc{static get pluginName(){return"TodoListUI"}static get isOfficialPlugin(){return!0}init(){const t=this.editor.t;qy(this.editor,"todoList",t("To-do List"),'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="m2.315 14.705 2.224-2.24a.69.69 0 0 1 .963 0 .664.664 0 0 1 0 .949L2.865 16.07a.7.7 0 0 1-.112.089.65.65 0 0 1-.852-.051L.688 14.886a.635.635 0 0 1 0-.903.647.647 0 0 1 .91 0zm5.185.045a.75.75 0 0 1 .75-.75h9.5a.75.75 0 1 1 0 1.5h-9.5a.75.75 0 0 1-.75-.75M2.329 5.745l2.21-2.226a.69.69 0 0 1 .963 0 .664.664 0 0 1 0 .95L2.865 7.125a.7.7 0 0 1-.496.196.64.64 0 0 1-.468-.187L.688 5.912a.635.635 0 0 1 0-.903.647.647 0 0 1 .91 0l.73.736zM7.5 5.75A.75.75 0 0 1 8.25 5h9.5a.75.75 0 1 1 0 1.5h-9.5a.75.75 0 0 1-.75-.75"/></svg>')}}class IC extends nc{static get requires(){return[CC,TC]}static get pluginName(){return"TodoList"}static get isOfficialPlugin(){return!0}}function PC(t,e){const n=(n,i,o)=>{if(!o.consumable.consume(i.item,n.name))return;const r=i.attributeNewValue,s=o.writer,a=o.mapper.toViewElement(i.item),l=[...a.getChildren()].find(t=>t.getCustomProperty("media-content"));s.remove(l);const c=t.getMediaViewElement(s,r,e);s.insert(s.createPositionAt(a,0),c)};return t=>{t.on("attribute:url:media",n)}}function MC(t,e,n,i){return t.createContainerElement("figure",{class:"media"},[e.getMediaViewElement(t,n,i),t.createSlot()])}function NC(t){const e=t.getSelectedElement();return e&&e.is("element","media")?e:null}function LC(t,e,n,i){t.change(o=>{const r=o.createElement("media",{url:e});t.insertObject(r,n,null,{setSelection:"on",findOptimalPosition:i?"auto":void 0})})}class VC extends oc{refresh(){const t=this.editor.model,e=t.document.selection,n=NC(e);this.value=n?n.getAttribute("url"):void 0,this.isEnabled=function(t){const e=t.getSelectedElement();return!!e&&"media"===e.name}(e)||function(t,e){let n=nf(t,e).start.parent;return n.isEmpty&&!e.schema.isLimit(n)&&(n=n.parent),e.schema.checkChild(n,"media")}(e,t)}execute(t){const e=this.editor.model,n=e.document.selection,i=NC(n);i?e.change(e=>{e.setAttribute("url",t,i)}):LC(e,t,n,!0)}}class zC{locale;providerDefinitions;constructor(t,e){const n=e.providers,i=e.extraProviders||[],o=new Set(e.removeProviders),r=n.concat(i).filter(t=>{const e=t.name;return e?!o.has(e):(zt("media-embed-no-provider-name",{provider:t}),!1)});this.locale=t,this.providerDefinitions=r}hasMedia(t){return!!this._getMedia(t)}getMediaViewElement(t,e,n){return this._getMedia(e).getViewElement(t,n)}_getMedia(t){if(!t)return new OC(this.locale);t=t.trim();for(const e of this.providerDefinitions){const n=e.html,i=fn(e.url);for(const e of i){const i=this._getUrlMatches(t,e);if(i)return new OC(this.locale,t,i,n)}}return null}_getUrlMatches(t,e){let n=t.match(e);if(n)return n;let i=t.replace(/^https?:\/\//,"");return n=i.match(e),n||(i=i.replace(/^www\./,""),n=i.match(e),n||null)}}class OC{url;_locale;_match;_previewRenderer;constructor(t,e,n,i){this.url=this._getValidUrl(e),this._locale=t,this._match=n,this._previewRenderer=i}getViewElement(t,e){const n={};let i;if(e.renderForEditingView||e.renderMediaPreview&&this.url&&this._previewRenderer){this.url&&(n["data-oembed-url"]=this.url),e.renderForEditingView&&(n.class="ck-media__wrapper");const o=this._getPreviewHtml(e);i=t.createRawElement("div",n,(t,e)=>{e.setContentOf(t,o)})}else this.url&&(n.url=this.url),i=t.createEmptyElement(e.elementName,n);return t.setCustomProperty("media-content",!0,i),i}_getPreviewHtml(t){return this._previewRenderer?this._previewRenderer(this._match):this.url&&t.renderForEditingView?this._getPlaceholderHtml():""}_getPlaceholderHtml(){const t=new Mu,e=this._locale.t;return t.content='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 64 42"><path d="M47.426 17V3.713L63.102 0v19.389h-.001l.001.272c0 1.595-2.032 3.43-4.538 4.098s-4.538-.083-4.538-1.678 2.032-3.43 4.538-4.098c.914-.244 2.032-.565 2.888-.603V4.516L49.076 7.447v9.556L49 17zM29.5 17h-8.343a7.073 7.073 0 1 0-4.657 4.06v3.781H3.3a2.803 2.803 0 0 1-2.8-2.804V8.63a2.803 2.803 0 0 1 2.8-2.805h4.082L8.58 2.768A1.99 1.99 0 0 1 10.435 1.5h8.985c.773 0 1.477.448 1.805 1.149l1.488 3.177H26.7c1.546 0 2.8 1.256 2.8 2.805zm-11.637 0H17.5a1 1 0 0 0-1 1v.05A4.244 4.244 0 1 1 17.863 17m29.684 2c.97 0 .953-.048.953.889v20.743c0 .953.016.905-.953.905H19.453c-.97 0-.953.048-.953-.905V19.89c0-.937-.016-.889.97-.889h28.077zm-4.701 19.338V22.183H24.154v16.155zM20.6 21.375v1.616h1.616v-1.616zm0 3.231v1.616h1.616v-1.616zm0 3.231v1.616h1.616v-1.616zm0 3.231v1.616h1.616v-1.616zm0 3.231v1.616h1.616v-1.616zm0 3.231v1.616h1.616V37.53zm24.233-16.155v1.616h1.615v-1.616zm0 3.231v1.616h1.615v-1.616zm0 3.231v1.616h1.615v-1.616zm0 3.231v1.616h1.615v-1.616zm0 3.231v1.616h1.615v-1.616zm0 3.231v1.616h1.615V37.53zM29.485 25.283a.4.4 0 0 1 .593-.35l9.05 4.977a.4.4 0 0 1 0 .701l-9.05 4.978a.4.4 0 0 1-.593-.35z"/></svg>',t.viewBox="0 0 64 42",new Yd({tag:"div",attributes:{class:"ck ck-reset_all ck-media__placeholder"},children:[{tag:"div",attributes:{class:"ck-media__placeholder__icon"},children:[t]},{tag:"a",attributes:{class:"ck-media__placeholder__url",target:"_blank",rel:"noopener noreferrer",href:this.url,"data-cke-tooltip-text":e("Open media in new tab")},children:[{tag:"span",attributes:{class:"ck-media__placeholder__url__text"},children:[this.url]}]}]}).render().outerHTML}_getValidUrl(t){return t?t.match(/^https?/)?t:"https://"+t:null}}class RC extends nc{static get pluginName(){return"MediaEmbedEditing"}static get isOfficialPlugin(){return!0}registry;constructor(t){super(t),t.config.define("mediaEmbed",{elementName:"oembed",providers:[{name:"dailymotion",url:[/^dailymotion\.com\/video\/(\w+)/,/^dai.ly\/(\w+)/],html:t=>`<div style="position: relative; padding-bottom: 100%; height: 0; "><iframe src="https://www.dailymotion.com/embed/video/${t[1]}" style="position: absolute; width: 100%; height: 100%; top: 0; left: 0;" frameborder="0" width="480" height="270" allowfullscreen allow="autoplay"></iframe></div>`},{name:"spotify",url:[/^open\.spotify\.com\/(artist\/\w+)/,/^open\.spotify\.com\/(album\/\w+)/,/^open\.spotify\.com\/(track\/\w+)/],html:t=>`<div style="position: relative; padding-bottom: 100%; height: 0; padding-bottom: 126%;"><iframe src="https://open.spotify.com/embed/${t[1]}" style="position: absolute; width: 100%; height: 100%; top: 0; left: 0;" frameborder="0" allowtransparency="true" allow="encrypted-media"></iframe></div>`},{name:"youtube",url:[/^(?:m\.)?youtube\.com\/watch\?v=([\w-]+)(?:&t=(\d+))?/,/^(?:m\.)?youtube\.com\/shorts\/([\w-]+)(?:\?t=(\d+))?/,/^(?:m\.)?youtube\.com\/v\/([\w-]+)(?:\?t=(\d+))?/,/^youtube\.com\/embed\/([\w-]+)(?:\?start=(\d+))?/,/^youtu\.be\/([\w-]+)(?:\?t=(\d+))?/],html:t=>{const e=t[1],n=t[2];return`<div style="position: relative; padding-bottom: 100%; height: 0; padding-bottom: 56.2493%;"><iframe src="https://www.youtube.com/embed/${e}${n?`?start=${n}`:""}" style="position: absolute; width: 100%; height: 100%; top: 0; left: 0;" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div>`}},{name:"vimeo",url:[/^vimeo\.com\/(\d+)/,/^vimeo\.com\/[^/]+\/[^/]+\/video\/(\d+)/,/^vimeo\.com\/album\/[^/]+\/video\/(\d+)/,/^vimeo\.com\/channels\/[^/]+\/(\d+)/,/^vimeo\.com\/groups\/[^/]+\/videos\/(\d+)/,/^vimeo\.com\/ondemand\/[^/]+\/(\d+)/,/^player\.vimeo\.com\/video\/(\d+)/],html:t=>`<div style="position: relative; padding-bottom: 100%; height: 0; padding-bottom: 56.2493%;"><iframe src="https://player.vimeo.com/video/${t[1]}" style="position: absolute; width: 100%; height: 100%; top: 0; left: 0;" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe></div>`},{name:"instagram",url:[/^instagram\.com\/p\/(\w+)/,/^instagram\.com\/reel\/(\w+)/]},{name:"twitter",url:[/^twitter\.com/,/^x\.com/]},{name:"googleMaps",url:[/^google\.com\/maps/,/^goo\.gl\/maps/,/^maps\.google\.com/,/^maps\.app\.goo\.gl/]},{name:"flickr",url:/^flickr\.com/},{name:"facebook",url:/^facebook\.com/}]}),this.registry=new zC(t.locale,t.config.get("mediaEmbed"))}init(){const t=this.editor,e=t.model.schema,n=t.t,i=t.conversion,o=t.config.get("mediaEmbed.previewsInData"),r=t.config.get("mediaEmbed.elementName"),s=this.registry;t.commands.add("mediaEmbed",new VC(t)),e.register("media",{inheritAllFrom:"$blockObject",allowAttributes:["url"]}),i.for("dataDowncast").elementToStructure({model:"media",view:(t,{writer:e})=>{const n=t.getAttribute("url");return MC(e,s,n,{elementName:r,renderMediaPreview:!!n&&o})}}),i.for("dataDowncast").add(PC(s,{elementName:r,renderMediaPreview:o})),i.for("editingDowncast").elementToStructure({model:"media",view:(t,{writer:e})=>{const i=t.getAttribute("url");return function(t,e,n){return e.setCustomProperty("media",!0,t),Jp(t,e,{label:n})}(MC(e,s,i,{elementName:r,renderForEditingView:!0}),e,n("media widget"))}}),i.for("editingDowncast").add(PC(s,{elementName:r,renderForEditingView:!0})),i.for("upcast").elementToElement({view:t=>["oembed",r].includes(t.name)&&t.getAttribute("url")?{name:!0}:null,model:(t,{writer:e})=>{const n=t.getAttribute("url");return s.hasMedia(n)?e.createElement("media",{url:n}):null}}).elementToElement({view:{name:"div",attributes:{"data-oembed-url":!0}},model:(t,{writer:e})=>{const n=t.getAttribute("data-oembed-url");return s.hasMedia(n)?e.createElement("media",{url:n}):null}}).add(t=>{t.on("element:figure",(t,e,n)=>{if(!n.consumable.consume(e.viewItem,{name:!0,classes:"media"}))return;const{modelRange:i,modelCursor:o}=n.convertChildren(e.viewItem,e.modelCursor);e.modelRange=i,e.modelCursor=o,wn(i.getItems())||n.consumable.revert(e.viewItem,{name:!0,classes:"media"})})})}}const DC=/^(?:http(s)?:\/\/)?[\w-]+\.[\w-.~:/?#[\]@!$&'()*+,;=%]+$/;class BC extends nc{static get requires(){return[Xf,Im,Ob]}static get pluginName(){return"AutoMediaEmbed"}static get isOfficialPlugin(){return!0}_timeoutId;_positionToInsert;constructor(t){super(t),this._timeoutId=null,this._positionToInsert=null}init(){const t=this.editor,e=t.model.document,n=t.plugins.get("ClipboardPipeline");this.listenTo(n,"inputTransformation",()=>{const t=e.selection.getFirstRange(),n=ma.fromPosition(t.start);n.stickiness="toPrevious";const i=ma.fromPosition(t.end);i.stickiness="toNext",e.once("change:data",()=>{this._embedMediaBetweenPositions(n,i),n.detach(),i.detach()},{priority:"high"})}),t.commands.get("undo").on("execute",()=>{this._timeoutId&&(gt.window.clearTimeout(this._timeoutId),this._positionToInsert.detach(),this._timeoutId=null,this._positionToInsert=null)},{priority:"high"})}_embedMediaBetweenPositions(t,e){const n=this.editor,i=n.plugins.get(RC).registry,o=new Lr(t,e),r=o.getWalker({ignoreElementEnd:!0});let s="";for(const t of r)t.item.is("$textProxy")&&(s+=t.item.data);s=s.trim(),s.match(DC)&&i.hasMedia(s)&&n.commands.get("mediaEmbed").isEnabled?(this._positionToInsert=ma.fromPosition(t),this._timeoutId=gt.window.setTimeout(()=>{n.model.change(t=>{this._timeoutId=null,t.remove(o),o.detach();let e=null;"$graveyard"!==this._positionToInsert.root.rootName&&(e=this._positionToInsert),LC(n.model,s,e,!1),this._positionToInsert.detach(),this._positionToInsert=null}),n.plugins.get(Im).requestUndoOnBackspace()},100)):o.detach()}}class FC extends ku{focusTracker;keystrokes;urlInputView;_validators;_urlInputViewInfoDefault;_urlInputViewInfoTip;constructor(t,e){super(e),this.focusTracker=new _n,this.keystrokes=new xn,this.set("mediaURLInputValue",""),this.urlInputView=this._createUrlInput(),this._validators=t,this.setTemplate({tag:"form",attributes:{class:["ck","ck-media-form","ck-responsive-form"],tabindex:"-1"},children:[this.urlInputView]})}render(){super.render(),Eu({view:this}),this.focusTracker.add(this.urlInputView.element),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){this.urlInputView.focus()}get url(){return this.urlInputView.fieldView.element.value.trim()}set url(t){this.urlInputView.fieldView.value=t.trim()}isValid(){this.resetFormStatus();for(const t of this._validators){const e=t(this);if(e)return this.urlInputView.errorText=e,!1}return!0}resetFormStatus(){this.urlInputView.errorText=null,this.urlInputView.infoText=this._urlInputViewInfoDefault}_createUrlInput(){const t=this.locale.t,e=new kh(this.locale,Kh),n=e.fieldView;return this._urlInputViewInfoDefault=t("Paste the media URL in the input."),this._urlInputViewInfoTip=t("Tip: Paste the URL into the content to embed faster."),e.label=t("Media URL"),e.infoText=this._urlInputViewInfoDefault,n.inputMode="url",n.on("input",()=>{e.infoText=n.element.value?this._urlInputViewInfoTip:this._urlInputViewInfoDefault,this.mediaURLInputValue=n.element.value.trim()}),e}}class jC extends nc{static get requires(){return[RC,Wu]}static get pluginName(){return"MediaEmbedUI"}static get isOfficialPlugin(){return!0}_formView;init(){const t=this.editor;t.ui.componentFactory.add("mediaEmbed",()=>{const t=this.editor.locale.t,e=this._createDialogButton(Lu);return e.tooltip=!0,e.label=t("Insert media"),e}),t.ui.componentFactory.add("menuBar:mediaEmbed",()=>{const t=this.editor.locale.t,e=this._createDialogButton(Gu);return e.label=t("Media"),e})}_createDialogButton(t){const e=this.editor,n=new t(e.locale),i=e.commands.get("mediaEmbed"),o=this.editor.plugins.get("Dialog");return n.icon='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 22 20"><path d="M1.587 1.5c-.612 0-.601-.029-.601.551v14.84c0 .59-.01.559.591.559h18.846c.602 0 .591.03.591-.56V2.052c0-.58.01-.55-.591-.55H1.587Zm.701.971h1.003v1H2.288zm16.448 0h1.003v1h-1.003zm-14.24 1h13.008v12H4.467zm-2.208 1h1.003v1H2.288zm16.448 0h1.003v1h-1.003zm-16.448 2h1.003v1H2.288zm16.448 0h1.003v1h-1.003zm-16.448 2h1.003v1H2.288zm16.448 0h1.003v1h-1.003zm-16.448 2h1.003v1H2.288zm16.448 0h1.003v1h-1.003zm-16.448 2h1.003l-.029 1h-.974zm16.448 0h1.003v1h-1.003zm-16.448 2h.974v1h-.974zm16.448 0h1.003v1h-1.003z"/><path d="M8.374 6.648a.4.4 0 0 1 .395-.4.4.4 0 0 1 .2.049l5.148 2.824a.4.4 0 0 1 0 .7l-5.148 2.824a.403.403 0 0 1-.595-.35z"/></svg>',n.bind("isEnabled").to(i,"isEnabled"),n.on("execute",()=>{"mediaEmbed"===o.id?o.hide():this._showDialog()}),n}_showDialog(){const t=this.editor,e=t.plugins.get("Dialog"),n=t.commands.get("mediaEmbed"),i=t.locale.t,o=void 0!==n.value;if(!this._formView){const e=t.plugins.get(RC).registry;this._formView=new(xu(FC))(function(t,e){return[e=>{if(!e.url.length)return t("The URL must not be empty.")},n=>{if(!e.hasMedia(n.url))return t("This media URL is not supported.")}]}(t.t,e),t.locale),this._formView.on("submit",()=>this._handleSubmitForm())}e.show({id:"mediaEmbed",title:i("Media embed"),content:this._formView,isModal:!0,onShow:()=>{this._formView.url=n.value||"",this._formView.resetFormStatus(),this._formView.urlInputView.fieldView.select()},actionButtons:[{label:i("Cancel"),withText:!0,onExecute:()=>e.hide()},{label:i(o?"Save":"Insert"),class:"ck-button-action",withText:!0,onExecute:()=>this._handleSubmitForm()}]})}_handleSubmitForm(){const t=this.editor,e=t.plugins.get("Dialog");this._formView.isValid()&&(t.execute("mediaEmbed",this._formView.url),e.hide(),t.editing.view.focus())}}class HC extends nc{static get requires(){return[RC,jC,BC,pf]}static get pluginName(){return"MediaEmbed"}static get isOfficialPlugin(){return!0}}an.arrowup,an.arrowdown,an.esc,an.enter,an.tab;class UC extends oc{refresh(){const t=this.editor.model,e=t.schema,n=t.document.selection;this.isEnabled=function(t,e,n){const i=function(t,e){const n=nf(t,e).start.parent;return n.isEmpty&&!n.is("element","$root")?n.parent:n}(t,n);return e.checkChild(i,"pageBreak")}(n,e,t)}execute(){const t=this.editor.model;t.change(e=>{const n=e.createElement("pageBreak");t.insertObject(n,null,null,{setSelection:"after"})})}}class $C extends nc{static get pluginName(){return"PageBreakEditing"}static get isOfficialPlugin(){return!0}init(){const t=this.editor,e=t.model.schema,n=t.t,i=t.conversion;e.register("pageBreak",{inheritAllFrom:"$blockObject"}),i.for("dataDowncast").elementToStructure({model:"pageBreak",view:(t,{writer:e})=>e.createContainerElement("div",{class:"page-break",style:"page-break-after: always"},e.createContainerElement("span",{style:"display: none"}))}),i.for("editingDowncast").elementToStructure({model:"pageBreak",view:(t,{writer:e})=>{const i=n("Page break"),o=e.createContainerElement("div"),r=e.createRawElement("span",{class:"page-break__label"},function(t){t.innerText=n("Page break")});return e.addClass("page-break",o),e.insert(e.createPositionAt(o,0),r),function(t,e,n){return e.setCustomProperty("pageBreak",!0,t),Jp(t,e,{label:n})}(o,e,i)}}),i.for("upcast").elementToElement({view:t=>{const e="always"==t.getStyle("page-break-before"),n="always"==t.getStyle("page-break-after");if(!e&&!n)return null;if(1==t.childCount){const e=t.getChild(0);if(!e.is("element","span")||"none"!=e.getStyle("display"))return null}else if(t.childCount>1)return null;return{name:!0,styles:[...e?["page-break-before"]:[],...n?["page-break-after"]:[]],...t.hasClass("page-break")&&{classes:["page-break"]}}},model:"pageBreak",converterPriority:"high"}),t.commands.add("pageBreak",new UC(t))}}class WC extends nc{static get pluginName(){return"PageBreakUI"}static get isOfficialPlugin(){return!0}init(){const t=this.editor;t.ui.componentFactory.add("pageBreak",()=>{const t=this._createButton(Lu);return t.set({tooltip:!0}),t}),t.ui.componentFactory.add("menuBar:pageBreak",()=>this._createButton(Gu))}_createButton(t){const e=this.editor,n=e.locale,i=e.commands.get("pageBreak"),o=new t(e.locale),r=n.t;return o.set({label:r("Page break"),icon:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M3.598.687h1.5v5h-1.5zm14.5 0h1.5v5h-1.5z"/><path d="M19.598 4.187v1.5h-16v-1.5zm-16 14.569h1.5v-5h-1.5zm14.5 0h1.5v-5h-1.5z"/><path d="M19.598 15.256v-1.5h-16v1.5zM5.081 9h6v2h-6zm8 0h6v2h-6zm-9.483 1L0 12.5v-5z"/></svg>'}),o.bind("isEnabled").to(i,"isEnabled"),this.listenTo(o,"execute",()=>{e.execute("pageBreak"),e.editing.view.focus()}),o}}class qC extends nc{static get requires(){return[$C,WC,pf]}static get pluginName(){return"PageBreak"}static get isOfficialPlugin(){return!0}}class KC extends oc{constructor(t){super(t),this.affectsData=!1,this.value=!1}execute(){const t="ck-show-blocks",e=this.editor.editing.view;e.change(n=>{for(const i of e.document.roots)i.hasClass(t)?(n.removeClass(t,i),this.value=!1):(n.addClass(t,i),this.value=!0)})}}class GC extends nc{static get pluginName(){return"ShowBlocksEditing"}static get isOfficialPlugin(){return!0}init(){const{editor:t}=this;t.commands.add("showBlocks",new KC(t))}}class QC extends nc{static get pluginName(){return"ShowBlocksUI"}static get isOfficialPlugin(){return!0}init(){const t=this.editor;t.ui.componentFactory.add("showBlocks",()=>{const t=this._createButton(Lu);return t.set({tooltip:!0,icon:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="m6.395 9.196 2.545-.007V6.498a.6.6 0 0 1 .598-.598h.299a.6.6 0 0 1 .598.598v6.877a.6.6 0 0 1-.598.598h-.299a.6.6 0 0 1-.598-.598v-2.691l-2.545.007v2.691a.6.6 0 0 1-.598.598h-.299a.6.6 0 0 1-.598-.598V6.505a.6.6 0 0 1 .598-.598h.299a.6.6 0 0 1 .598.598zm8.699 4.221V6.462a.56.56 0 0 0-.562-.562h-.782a1 1 0 0 0-.39.08l-1.017.43a.56.56 0 0 0-.343.517v.197c0 .4.406.67.775.519l.819-.337v6.111c0 .31.251.562.561.562h.377c.31 0 .562-.251.562-.562M0 15.417v1.5h1.5v-1.5zm18.5 0v1.5H20v-1.5zm0-3.084v1.5H20v-1.5zm0-3.083v1.5H20v-1.5zm0-3.083v1.5H20v-1.5zM0 18.5v.5a1 1 0 0 0 1 1h.5v-1.5zm3.083 0V20h1.5v-1.5zm3.084 0V20h1.5v-1.5zm3.083 0V20h1.5v-1.5zm3.083 0V20h1.5v-1.5zm3.084 0V20h1.5v-1.5zm3.083 0V20h.5a1 1 0 0 0 1-1v-.5z"/><path d="M0 1a1 1 0 0 1 1-1h18a1 1 0 0 1 1 1v3.583h-1.5V1.5h-17v12.333H0z" clip-rule="evenodd"/></svg>'}),t}),t.ui.componentFactory.add("menuBar:showBlocks",()=>this._createButton(Gu))}_createButton(t){const e=this.editor,n=e.locale,i=e.commands.get("showBlocks"),o=new t(n),r=n.t;return o.set({label:r("Show blocks"),isToggleable:!0,role:"menuitemcheckbox"}),o.bind("isEnabled").to(i),o.bind("isOn").to(i,"value",i,"isEnabled",(t,e)=>t&&e),this.listenTo(o,"execute",()=>{e.execute("showBlocks"),e.editing.view.focus()}),o}}class YC extends nc{static get pluginName(){return"ShowBlocks"}static get isOfficialPlugin(){return!0}static get requires(){return[GC,QC]}}const JC="SourceEditingMode";class ZC extends nc{static get pluginName(){return"SourceEditing"}static get isOfficialPlugin(){return!0}static get requires(){return[vc]}_elementReplacer;_replacedRoots;_dataFromRoots;constructor(t){super(t),this.set("isSourceEditingMode",!1),this._elementReplacer=new ce,this._replacedRoots=new Map,this._dataFromRoots=new Map,t.config.define("sourceEditing.allowCollaborationFeatures",!1)}init(){this._checkCompatibility();const t=this.editor,e=t.locale.t;t.ui.componentFactory.add("sourceEditing",()=>{const t=this._createButton(Lu);return t.set({label:e("Source"),icon:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="m12.5 0 5 4.5v15.003h-16V0zM3 1.5v3.25l-1.497 1-.003 8 1.5 1v3.254L7.685 18l-.001 1.504H17.5V8.002L16 9.428l-.004-4.22-4.222-3.692z"/><path d="M4.06 6.64a.75.75 0 0 1 .958 1.15l-.085.07L2.29 9.75l2.646 1.89c.302.216.4.62.232.951l-.058.095a.75.75 0 0 1-.951.232l-.095-.058-3.5-2.5V9.14zm4.194 6.22a.75.75 0 0 1-.958-1.149l.085-.07 2.643-1.89-2.646-1.89a.75.75 0 0 1-.232-.952l.058-.095a.75.75 0 0 1 .95-.232l.096.058 3.5 2.5v1.22zm7.644-.836 2.122 2.122-5.825 5.809-2.125-.005.003-2.116zm2.539-1.847 1.414 1.414a.5.5 0 0 1 0 .707l-1.06 1.06-2.122-2.12 1.061-1.061a.5.5 0 0 1 .707 0"/></svg>',tooltip:!0,class:"ck-source-editing-button"}),t}),t.ui.componentFactory.add("menuBar:sourceEditing",()=>{const t=this._createButton(Gu);return t.set({label:e("Show source"),role:"menuitemcheckbox"}),t}),this._isAllowedToHandleSourceEditingMode()&&(this.on("change:isSourceEditingMode",(t,e,n)=>{n?(this._hideVisibleDialog(),this._showSourceEditing(),this._disableCommands()):(this._hideSourceEditing(),this._enableCommands())}),this.on("change:isEnabled",(t,e,n)=>this._handleReadOnlyMode(!n)),this.listenTo(t,"change:isReadOnly",(t,e,n)=>this._handleReadOnlyMode(n))),t.data.on("get",()=>{this.isSourceEditingMode&&this.updateEditorData()},{priority:"high"})}updateEditorData(){const t=this.editor,e={};for(const[t,n]of this._replacedRoots){const i=this._dataFromRoots.get(t),o=n.dataset.value;i!==o&&(e[t]=o,this._dataFromRoots.set(t,o))}Object.keys(e).length&&t.data.set(e,{batchType:{isUndoable:!0},suppressErrorInCollaboration:!0})}_checkCompatibility(){const t=this.editor,e=t.config.get("sourceEditing.allowCollaborationFeatures");if(!e&&t.plugins.has("RealTimeCollaborativeEditing"))throw new Vt("source-editing-incompatible-with-real-time-collaboration",null);!e&&["CommentsEditing","TrackChangesEditing","RevisionHistory"].some(e=>t.plugins.has(e))&&console.warn("You initialized the editor with the source editing feature and at least one of the collaboration features. Please be advised that the source editing feature may not work, and be careful when editing document source that contains markers created by the collaboration features."),t.plugins.has("RestrictedEditingModeEditing")&&console.warn("You initialized the editor with the source editing feature and restricted editing feature. Please be advised that the source editing feature may not work, and be careful when editing document source that contains markers created by the restricted editing feature.")}_showSourceEditing(){const t=this.editor,e=t.editing.view,n=t.model;n.change(t=>{t.setSelection(null),t.removeSelectionAttribute(n.document.selection.getAttributeKeys())});for(const[n,i]of e.domRoots){const o=XC(t.data.get({rootName:n})),r=ge(i.ownerDocument,"textarea",{rows:"1","aria-label":"Source code editing area"}),s=ge(i.ownerDocument,"div",{class:"ck-source-editing-area","data-value":o},[r]);r.value=o,r.setSelectionRange(0,0),r.addEventListener("input",()=>{s.dataset.value=r.value,t.ui.update()}),e.change(t=>{const i=e.document.getRoot(n);t.addClass("ck-hidden",i)}),t.ui.setEditableElement("sourceEditing:"+n,r),this._replacedRoots.set(n,s),this._elementReplacer.replace(i,s),this._dataFromRoots.set(n,o)}this._hideDocumentOutline(),this._refreshAnnotationsVisibility(),this._focusSourceEditing()}_hideSourceEditing(){const t=this.editor.editing.view;this.updateEditorData(),t.change(e=>{for(const[n]of this._replacedRoots)e.removeClass("ck-hidden",t.document.getRoot(n))}),this._elementReplacer.restore(),this._replacedRoots.clear(),this._dataFromRoots.clear(),this._showDocumentOutline(),this._refreshAnnotationsVisibility(),t.focus()}_hideDocumentOutline(){this.editor.plugins.has("DocumentOutlineUI")&&(this.editor.plugins.get("DocumentOutlineUI").view.element.style.display="none")}_showDocumentOutline(){this.editor.plugins.has("DocumentOutlineUI")&&(this.editor.plugins.get("DocumentOutlineUI").view.element.style.display="")}_refreshAnnotationsVisibility(){this.editor.plugins.has("Annotations")&&this.editor.plugins.get("Annotations").refreshVisibility()}_focusSourceEditing(){const t=this.editor,[e]=this._replacedRoots.values(),n=e.querySelector("textarea");t.editing.view.document.isFocused=!1,n.focus()}_disableCommands(){const t=this.editor;for(const e of t.commands.commands())e.forceDisabled(JC);t.plugins.has("CommentsArchiveUI")&&t.plugins.get("CommentsArchiveUI").forceDisabled(JC)}_enableCommands(){const t=this.editor;for(const e of t.commands.commands())e.clearForceDisabled(JC);t.plugins.has("CommentsArchiveUI")&&t.plugins.get("CommentsArchiveUI").clearForceDisabled(JC)}_handleReadOnlyMode(t){if(this.isSourceEditingMode)for(const[,e]of this._replacedRoots)e.querySelector("textarea").readOnly=t}_isAllowedToHandleSourceEditingMode(){const t=this.editor.ui.view.editable;return t&&!t.hasExternalElement}_hideVisibleDialog(){if(this.editor.plugins.has("Dialog")){const t=this.editor.plugins.get("Dialog");t.isOpen&&t.hide()}}_createButton(t){const e=this.editor,n=new t(e.locale);return n.set({withText:!0,isToggleable:!0}),n.bind("isOn").to(this,"isSourceEditingMode"),n.bind("isEnabled").to(this,"isEnabled",e,"isReadOnly",e.plugins.get(vc),"hasAny",(t,e,n)=>!!t&&!e&&!n),this.listenTo(n,"execute",()=>{this.isSourceEditingMode=!this.isSourceEditingMode}),n}}function XC(t){return function(t){return t.startsWith("<")}(t)?function(t){const e=[{name:"address",isVoid:!1},{name:"article",isVoid:!1},{name:"aside",isVoid:!1},{name:"blockquote",isVoid:!1},{name:"details",isVoid:!1},{name:"dialog",isVoid:!1},{name:"dd",isVoid:!1},{name:"div",isVoid:!1},{name:"dl",isVoid:!1},{name:"dt",isVoid:!1},{name:"fieldset",isVoid:!1},{name:"figcaption",isVoid:!1},{name:"figure",isVoid:!1},{name:"footer",isVoid:!1},{name:"form",isVoid:!1},{name:"h1",isVoid:!1},{name:"h2",isVoid:!1},{name:"h3",isVoid:!1},{name:"h4",isVoid:!1},{name:"h5",isVoid:!1},{name:"h6",isVoid:!1},{name:"header",isVoid:!1},{name:"hgroup",isVoid:!1},{name:"hr",isVoid:!0},{name:"li",isVoid:!1},{name:"main",isVoid:!1},{name:"nav",isVoid:!1},{name:"ol",isVoid:!1},{name:"p",isVoid:!1},{name:"section",isVoid:!1},{name:"table",isVoid:!1},{name:"tbody",isVoid:!1},{name:"td",isVoid:!1},{name:"th",isVoid:!1},{name:"thead",isVoid:!1},{name:"tr",isVoid:!1},{name:"ul",isVoid:!1}],n=e.map(t=>t.name).join("|"),i=t.replace(new RegExp(`</?(${n})( .*?)?>`,"g"),"\n$&\n").replace(/<br[^>]*>/g,"$&\n").split("\n");let o=0,r=!1;return i.map(t=>(r=function(t,e){const n=/<pre( .*?)?>/.test(t),i=/<\/pre>/.test(t);return(!n||!i)&&(n?"first":i?"last":("first"===e||"middle"===e)&&"middle")}(t,r),t.length||r?function(t,e){return e.some(e=>!e.isVoid&&!!new RegExp(`<${e.name}( .*?)?>`).test(t))}(t,e)?In(t,o++):function(t,e){return e.some(e=>new RegExp(`</${e.name}>`).test(t))}(t,e)?In(t,--o):In(t,"middle"===r||"last"===r?0:o):"")).join("").trimEnd()}(t):t}function tx(t,e){const{modelAttribute:n,styleName:i,attributeName:o,attributeType:r,viewElement:s,defaultValue:a,shouldUpcast:l=()=>!0,reduceBoxSides:c=!1}=e;t.for("upcast").attributeToAttribute({view:{name:s,styles:{[i]:/[\s\S]+/}},model:{key:n,value:(t,e,n)=>{if(!l(t))return;const o=ox(a,"",n),r=t.getNormalizedStyle(i),s=c?rx(r):r;if(o!==s)return s;e.consumable.consume(t,{styles:i})}}}),o&&t.for("upcast").attributeToAttribute({view:{name:s,attributes:{[o]:/.+/}},model:{key:n,value:(t,e,n)=>{if("figure"==t.name||t.hasStyle(i)||"table"==t.name&&"figure"==t.parent.name&&t.parent.hasStyle(i))return;const s=ox(a,"",n);let l=t.getAttribute(o);if(l&&"length"==r&&!l.endsWith("px")&&(l+="px"),s!==l)return l;e.consumable.consume(t,{attributes:o})}}})}function ex(t,e,n,i){t.for("upcast").add(t=>t.on("element:"+e,(t,e,o)=>{if(!e.modelRange)return;const r=["border-top-width","border-top-color","border-top-style","border-bottom-width","border-bottom-color","border-bottom-style","border-right-width","border-right-color","border-right-style","border-left-width","border-left-color","border-left-style"].filter(t=>e.viewItem.hasStyle(t));if(!r.length)return;const s={styles:r};if(!o.consumable.test(e.viewItem,s))return;const a=[...e.modelRange.getItems({shallow:!0})].pop(),l=a.findAncestor("table",{includeSelf:!0});let c=i;l&&"layout"==l.getAttribute("tableType")&&(c={style:"none",color:"",width:""}),o.consumable.consume(e.viewItem,s);const d={style:e.viewItem.getNormalizedStyle("border-style"),color:e.viewItem.getNormalizedStyle("border-color"),width:e.viewItem.getNormalizedStyle("border-width")},u={style:rx(d.style),color:rx(d.color),width:rx(d.width)};u.style!==c.style&&o.writer.setAttribute(n.style,u.style,a),u.color!==c.color&&o.writer.setAttribute(n.color,u.color,a),u.width!==c.width&&o.writer.setAttribute(n.width,u.width,a)}))}function nx(t,e){const{modelElement:n,modelAttribute:i,styleName:o}=e;t.for("downcast").attributeToAttribute({model:{name:n,key:i},view:t=>({key:"style",value:{[o]:t}})})}function ix(t,e){const{modelAttribute:n,styleName:i}=e;t.for("downcast").add(t=>t.on(`attribute:${n}:table`,(t,e,n)=>{const{item:o,attributeNewValue:r}=e,{mapper:s,writer:a}=n;if(!n.consumable.consume(e.item,t.name))return;const l=[...s.toViewElement(o).getChildren()].find(t=>t.is("element","table"));r?a.setStyle(i,r,l):a.removeStyle(i,l)}))}function ox(t,e,n){const i=n.modelRange&&wn(n.modelRange.getItems({shallow:!0})),o=i&&i.is("element")&&i.findAncestor("table",{includeSelf:!0});return o&&"layout"===o.getAttribute("tableType")?e:t}function rx(t){if(!t)return;const e=["top","right","bottom","left"];if(!e.every(e=>t[e]))return t;const n=t.top;return e.every(e=>t[e]===n)?n:t}function sx(t,e,n,i,o=1){null!=e&&null!=o&&e>o?i.setAttribute(t,e,n):i.removeAttribute(t,n)}function ax(t,e,n={}){const i=t.createElement("tableCell",n);return t.insertElement("paragraph",i),t.insert(i,e),i}function lx(t,e){const n=e.parent.parent,i=parseInt(n.getAttribute("headingColumns")||"0"),{column:o}=t.getCellLocation(e);return!!i&&o<i}function cx(t,e,n){const{modelAttribute:i}=n;t.extend("tableCell",{allowAttributes:[i]}),t.setAttributeProperties(i,{isFormatting:!0}),tx(e,{viewElement:/^(td|th)$/,...n}),nx(e,{modelElement:"tableCell",...n})}function dx(t){const e=t.getSelectedElement();return e&&e.is("element","table")?e:t.getFirstPosition().findAncestor("table")}function ux(t){return e=>{e.on(`element:${t}`,(t,e,{writer:n})=>{if(!e.modelRange)return;const i=e.modelRange.start.nodeAfter,o=n.createPositionAt(i,0);if(e.viewItem.isEmpty)return void n.insertElement("paragraph",o);const r=Array.from(i.getChildren());if(r.every(t=>t.is("element","$marker"))){const t=n.createElement("paragraph");n.insert(t,n.createPositionAt(i,0));for(const e of r)n.move(n.createRangeOn(e),n.createPositionAt(t,"end"))}},{priority:"low"})}}function hx(t){let e=0,n=0;const i=Array.from(t.getChildren()).filter(t=>"th"===t.name||"td"===t.name);for(;n<i.length&&"th"===i[n].name;){const t=i[n];e+=parseInt(t.getAttribute("colspan")||"1"),n++}return e}class gx{_table;_startRow;_endRow;_startColumn;_endColumn;_includeAllSlots;_skipRows;_row;_rowIndex;_column;_cellIndex;_spannedCells;_nextCellAtColumn;_jumpedToStartRow=!1;constructor(t,e={}){this._table=t,this._startRow=void 0!==e.row?e.row:e.startRow||0,this._endRow=void 0!==e.row?e.row:e.endRow,this._startColumn=void 0!==e.column?e.column:e.startColumn||0,this._endColumn=void 0!==e.column?e.column:e.endColumn,this._includeAllSlots=!!e.includeAllSlots,this._skipRows=new Set,this._row=0,this._rowIndex=0,this._column=0,this._cellIndex=0,this._spannedCells=new Map,this._nextCellAtColumn=-1}[Symbol.iterator](){return this}next(){this._canJumpToStartRow()&&this._jumpToNonSpannedRowClosestToStartRow();const t=this._table.getChild(this._rowIndex);if(!t||this._isOverEndRow())return{done:!0,value:void 0};if(!t.is("element","tableRow"))return this._rowIndex++,this.next();if(this._isOverEndColumn())return this._advanceToNextRow();let e=null;const n=this._getSpanned();if(n)this._includeAllSlots&&!this._shouldSkipSlot()&&(e=this._formatOutValue(n.cell,n.row,n.column));else{const n=t.getChild(this._cellIndex);if(!n)return this._advanceToNextRow();const i=parseInt(n.getAttribute("colspan")||"1"),o=parseInt(n.getAttribute("rowspan")||"1");(i>1||o>1)&&this._recordSpans(n,o,i),this._shouldSkipSlot()||(e=this._formatOutValue(n)),this._nextCellAtColumn=this._column+i}return this._column++,this._column==this._nextCellAtColumn&&this._cellIndex++,e||this.next()}skipRow(t){this._skipRows.add(t)}_advanceToNextRow(){return this._row++,this._rowIndex++,this._column=0,this._cellIndex=0,this._nextCellAtColumn=-1,this.next()}_isOverEndRow(){return void 0!==this._endRow&&this._row>this._endRow}_isOverEndColumn(){return void 0!==this._endColumn&&this._column>this._endColumn}_formatOutValue(t,e=this._row,n=this._column){return{done:!1,value:new mx(this,t,e,n)}}_shouldSkipSlot(){const t=this._skipRows.has(this._row),e=this._row<this._startRow,n=this._column<this._startColumn,i=void 0!==this._endColumn&&this._column>this._endColumn;return t||e||n||i}_getSpanned(){const t=this._spannedCells.get(this._row);return t&&t.get(this._column)||null}_recordSpans(t,e,n){const i={cell:t,row:this._row,column:this._column};for(let t=this._row;t<this._row+e;t++)for(let e=this._column;e<this._column+n;e++)t==this._row&&e==this._column||this._markSpannedCell(t,e,i)}_markSpannedCell(t,e,n){this._spannedCells.has(t)||this._spannedCells.set(t,new Map),this._spannedCells.get(t).set(e,n)}_canJumpToStartRow(){return!!this._startRow&&this._startRow>0&&!this._jumpedToStartRow}_jumpToNonSpannedRowClosestToStartRow(){const t=this._getRowLength(0);for(let e=this._startRow;!this._jumpedToStartRow;e--)t===this._getRowLength(e)&&(this._row=e,this._rowIndex=e,this._jumpedToStartRow=!0)}_getRowLength(t){return[...this._table.getChild(t).getChildren()].reduce((t,e)=>t+parseInt(e.getAttribute("colspan")||"1"),0)}}class mx{cell;row;column;cellAnchorRow;cellAnchorColumn;_cellIndex;_rowIndex;_table;constructor(t,e,n,i){this.cell=e,this.row=t._row,this.column=t._column,this.cellAnchorRow=n,this.cellAnchorColumn=i,this._cellIndex=t._cellIndex,this._rowIndex=t._rowIndex,this._table=t._table}get isAnchor(){return this.row===this.cellAnchorRow&&this.column===this.cellAnchorColumn}get cellWidth(){return parseInt(this.cell.getAttribute("colspan")||"1")}get cellHeight(){return parseInt(this.cell.getAttribute("rowspan")||"1")}get rowIndex(){return this._rowIndex}getPositionBefore(){return this._table.root.document.model.createPositionAt(this._table.getChild(this.row),this._cellIndex)}}function px(t,e){return(n,{writer:i})=>{const o=n.getAttribute("headingRows")||0,r=i.createContainerElement("table",null,[]),s=i.createContainerElement("figure",{class:"table"},r);o>0&&i.insert(i.createPositionAt(r,"end"),i.createContainerElement("thead",null,i.createSlot(t=>t.is("element","tableRow")&&t.index<o))),o<t.getRows(n)&&i.insert(i.createPositionAt(r,"end"),i.createContainerElement("tbody",null,i.createSlot(t=>t.is("element","tableRow")&&t.index>=o)));for(const{positionOffset:t,filter:n}of e.additionalSlots)i.insert(i.createPositionAt(r,t),i.createSlot(n));return i.insert(i.createPositionAt(r,"after"),i.createSlot(t=>!t.is("element","tableRow")&&!e.additionalSlots.some(({filter:e})=>e(t)))),e.asWidget?function(t,e){return e.setCustomProperty("table",!0,t),Jp(t,e,{hasSelectionHandle:!0})}(s,i):s}}function fx(t={}){return(e,{writer:n})=>{const i=e.parent,o=i.parent,r=o.getChildIndex(i),s=new gx(o,{row:r}),a=o.getAttribute("headingRows")||0,l=o.getAttribute("headingColumns")||0;let c=null;for(const i of s)if(i.cell==e){const e=i.row<a||i.column<l?"th":"td";c=t.asWidget?ef(n.createEditableElement(e),n,{withAriaRole:!1}):n.createContainerElement(e);break}return c}}function bx(t={}){return(e,{writer:n})=>{if(!e.parent.is("element","tableCell"))return null;if(!kx(e))return null;if(t.asWidget)return n.createContainerElement("span",{class:"ck-table-bogus-paragraph"});{const t=n.createContainerElement("p");return n.setCustomProperty("dataPipeline:transparentRendering",!0,t),t}}}function kx(t){return 1==t.parent.childCount&&!function(t){for(const e of t.getAttributeKeys())if(!e.startsWith("selection:")&&"htmlEmptyBlock"!=e)return!0;return!1}(t)}class wx extends oc{refresh(){const t=this.editor.model,e=t.document.selection,n=t.schema;this.isEnabled=function(t,e){const n=t.getFirstPosition().parent,i=n===n.root?n:n.parent;return e.checkChild(i,"table")}(e,n)}execute(t={}){const e=this.editor,n=e.model,i=e.plugins.get("TableUtils"),o=e.config.get("table.defaultHeadings.rows"),r=e.config.get("table.defaultHeadings.columns");void 0===t.headingRows&&o&&(t.headingRows=o),void 0===t.headingColumns&&r&&(t.headingColumns=r),n.change(e=>{const o=i.createTable(e,t);n.insertObject(o,null,null,{findOptimalPosition:"auto"}),e.setSelection(e.createPositionAt(o.getNodeByPath([0,0,0]),0))})}}class _x extends oc{order;constructor(t,e={}){super(t),this.order=e.order||"below"}refresh(){const t=this.editor.model.document.selection,e=!!this.editor.plugins.get("TableUtils").getSelectionAffectedTableCells(t).length;this.isEnabled=e}execute(){const t=this.editor,e=t.model.document.selection,n=t.plugins.get("TableUtils"),i="above"===this.order,o=n.getSelectionAffectedTableCells(e),r=n.getRowIndexes(o),s=i?r.first:r.last,a=o[0].findAncestor("table");n.insertRows(a,{at:i?s:s+1,copyStructureFromAbove:!i})}}class vx extends oc{order;constructor(t,e={}){super(t),this.order=e.order||"right"}refresh(){const t=this.editor.model.document.selection,e=!!this.editor.plugins.get("TableUtils").getSelectionAffectedTableCells(t).length;this.isEnabled=e}execute(){const t=this.editor,e=t.model.document.selection,n=t.plugins.get("TableUtils"),i="left"===this.order,o=n.getSelectionAffectedTableCells(e),r=n.getColumnIndexes(o),s=i?r.first:r.last,a=o[0].findAncestor("table");n.insertColumns(a,{columns:1,at:i?s:s+1})}}class yx extends oc{direction;constructor(t,e={}){super(t),this.direction=e.direction||"horizontally"}refresh(){const t=this.editor.plugins.get("TableUtils").getSelectionAffectedTableCells(this.editor.model.document.selection);this.isEnabled=1===t.length}execute(){const t=this.editor.plugins.get("TableUtils"),e=t.getSelectionAffectedTableCells(this.editor.model.document.selection)[0];"horizontally"===this.direction?t.splitCellHorizontally(e,2):t.splitCellVertically(e,2)}}function Cx(t,e,n){const{startRow:i,startColumn:o,endRow:r,endColumn:s}=e,a=n.createElement("table"),l=t.getAttribute("tableType");l&&n.setAttribute("tableType",l,a);const c=r-i+1;for(let t=0;t<c;t++)n.insertElement("tableRow",a,"end");const d=[...new gx(t,{startRow:i,endRow:r,startColumn:o,endColumn:s,includeAllSlots:!0})];for(const{row:t,column:e,cell:l,isAnchor:c,cellAnchorRow:u,cellAnchorColumn:h}of d){const d=t-i,g=a.getChild(d);if(c){const i=n.cloneElement(l);n.append(i,g),Tx(i,t,e,r,s,n)}else(u<i||h<o)&&ax(n,n.createPositionAt(g,"end"))}return function(t,e,n,i,o){const r=parseInt(e.getAttribute("headingRows")||"0");r>0&&sx("headingRows",r-n,t,o,0);const s=parseInt(e.getAttribute("headingColumns")||"0");s>0&&sx("headingColumns",s-i,t,o,0)}(a,t,i,o,n),a}function xx(t,e,n=0){const i=[],o=new gx(t,{startRow:n,endRow:e-1});for(const t of o){const{row:n,cellHeight:o}=t;n<e&&e<=n+o-1&&i.push(t)}return i}function Ax(t,e,n){const i=t.parent,o=i.parent,r=i.index,s=e-r,a={},l=parseInt(t.getAttribute("rowspan"))-s;l>1&&(a.rowspan=l);const c=parseInt(t.getAttribute("colspan")||"1");c>1&&(a.colspan=c);const d=r+s,u=[...new gx(o,{startRow:r,endRow:d,includeAllSlots:!0})];let h,g=null;for(const e of u){const{row:i,column:o,cell:r}=e;r===t&&void 0===h&&(h=o),void 0!==h&&h===o&&i===d&&(g=ax(n,e.getPositionBefore(),a))}return sx("rowspan",s,t,n),g}function Ex(t,e){const n=[],i=new gx(t);for(const t of i){const{column:i,cellWidth:o}=t;i<e&&e<=i+o-1&&n.push(t)}return n}function Sx(t,e,n,i){const o=n-e,r={},s=parseInt(t.getAttribute("colspan"))-o;s>1&&(r.colspan=s);const a=parseInt(t.getAttribute("rowspan")||"1");a>1&&(r.rowspan=a);const l=ax(i,i.createPositionAfter(t),r);return sx("colspan",o,t,i),l}function Tx(t,e,n,i,o,r){const s=parseInt(t.getAttribute("colspan")||"1"),a=parseInt(t.getAttribute("rowspan")||"1");n+s-1>o&&sx("colspan",o-n+1,t,r,1),e+a-1>i&&sx("rowspan",i-e+1,t,r,1)}function Ix(t,e){const n=e.getColumns(t),i=new Array(n).fill(0);for(const{column:e}of new gx(t))i[e]++;const o=i.reduce((t,e,n)=>e?t:[...t,n],[]);if(o.length>0){const n=o[o.length-1];return e.removeColumns(t,{at:n}),!0}return!1}function Px(t,e){const n=[],i=e.getRows(t);for(let e=0;e<i;e++)t.getChild(e).isEmpty&&n.push(e);if(n.length>0){const i=n[n.length-1];return e.removeRows(t,{at:i}),!0}return!1}function Mx(t,e){Ix(t,e)||Px(t,e)}function Nx(t,e){const n=Array.from(new gx(t,{startColumn:e.firstColumn,endColumn:e.lastColumn,row:e.lastRow}));if(n.every(({cellHeight:t})=>1===t))return e.lastRow;const i=n[0].cellHeight-1;return e.lastRow+i}function Lx(t,e){const n=Array.from(new gx(t,{startRow:e.firstRow,endRow:e.lastRow,column:e.lastColumn}));if(n.every(({cellWidth:t})=>1===t))return e.lastColumn;const i=n[0].cellWidth-1;return e.lastColumn+i}class Vx extends oc{direction;isHorizontal;constructor(t,e){super(t),this.direction=e.direction,this.isHorizontal="right"==this.direction||"left"==this.direction}refresh(){const t=this._getMergeableCell();this.value=t,this.isEnabled=!!t}execute(){const t=this.editor.model,e=t.document,n=this.editor.plugins.get("TableUtils").getTableCellsContainingSelection(e.selection)[0],i=this.value,o=this.direction;t.change(t=>{const e="right"==o||"down"==o,r=e?n:i,s=e?i:n,a=s.parent;!function(t,e,n){zx(t)||(zx(e)&&n.remove(n.createRangeIn(e)),n.move(n.createRangeIn(t),n.createPositionAt(e,"end"))),n.remove(t)}(s,r,t);const l=this.isHorizontal?"colspan":"rowspan",c=parseInt(n.getAttribute(l)||"1"),d=parseInt(i.getAttribute(l)||"1");t.setAttribute(l,c+d,r),t.setSelection(t.createRangeIn(r));const u=this.editor.plugins.get("TableUtils");Mx(a.findAncestor("table"),u)})}_getMergeableCell(){const t=this.editor.model.document,e=this.editor.plugins.get("TableUtils"),n=e.getTableCellsContainingSelection(t.selection)[0];if(!n)return;const i=this.isHorizontal?function(t,e,n){const i=t.parent.parent,o="right"==e?t.nextSibling:t.previousSibling,r=(i.getAttribute("headingColumns")||0)>0;if(!o)return;const s="right"==e?t:o,a="right"==e?o:t,{column:l}=n.getCellLocation(s),{column:c}=n.getCellLocation(a),d=parseInt(s.getAttribute("colspan")||"1"),u=lx(n,s),h=lx(n,a);return r&&u!=h?void 0:l+d===c?o:void 0}(n,this.direction,e):function(t,e,n){const i=t.parent,o=i.parent,r=o.getChildIndex(i);if("down"==e&&r===n.getRows(o)-1||"up"==e&&0===r)return null;const s=parseInt(t.getAttribute("rowspan")||"1"),a=o.getAttribute("headingRows")||0;if(a&&("down"==e&&r+s===a||"up"==e&&r===a))return null;const l=parseInt(t.getAttribute("rowspan")||"1"),c="down"==e?r+l:r,d=[...new gx(o,{endRow:c})],u=d.find(e=>e.cell===t).column,h=d.find(({row:t,cellHeight:n,column:i})=>i===u&&("down"==e?t===c:c===t+n));return h&&h.cell?h.cell:null}(n,this.direction,e);if(!i)return;const o=this.isHorizontal?"rowspan":"colspan",r=parseInt(n.getAttribute(o)||"1");return parseInt(i.getAttribute(o)||"1")===r?i:void 0}}function zx(t){const e=t.getChild(0);return 1==t.childCount&&e.is("element","paragraph")&&e.isEmpty}class Ox extends oc{refresh(){const t=this.editor.plugins.get("TableUtils"),e=t.getSelectionAffectedTableCells(this.editor.model.document.selection),n=e[0];if(n){const i=n.findAncestor("table"),o=t.getRows(i)-1,r=t.getRowIndexes(e),s=0===r.first&&r.last===o;this.isEnabled=!s}else this.isEnabled=!1}execute(){const t=this.editor.model,e=this.editor.plugins.get("TableUtils"),n=e.getSelectionAffectedTableCells(t.document.selection),i=e.getRowIndexes(n),o=n[0],r=o.findAncestor("table"),s=e.getCellLocation(o).column;t.change(t=>{const n=i.last-i.first+1;e.removeRows(r,{at:i.first,rows:n});const o=function(t,e,n,i){const o=t.getChild(Math.min(e,i-1));let r=o.getChild(0),s=0;for(const t of o.getChildren()){if(s>n)return r;r=t,s+=parseInt(t.getAttribute("colspan")||"1")}return r}(r,i.first,s,e.getRows(r));t.setSelection(t.createPositionAt(o,0))})}}class Rx extends oc{refresh(){const t=this.editor.plugins.get("TableUtils"),e=t.getSelectionAffectedTableCells(this.editor.model.document.selection),n=e[0];if(n){const i=n.findAncestor("table"),o=t.getColumns(i),{first:r,last:s}=t.getColumnIndexes(e);this.isEnabled=s-r<o-1}else this.isEnabled=!1}execute(){const t=this.editor.plugins.get("TableUtils"),[e,n]=function(t,e){const n=e.getSelectionAffectedTableCells(t),i=n[0],o=n.pop(),r=[i,o];return i.isBefore(o)?r:r.reverse()}(this.editor.model.document.selection,t),i=e.parent.parent,o=[...new gx(i)],r={first:o.find(t=>t.cell===e).column,last:o.find(t=>t.cell===n).column},s=function(t,e,n,i){return parseInt(n.getAttribute("colspan")||"1")>1?n:e.previousSibling||n.nextSibling?n.nextSibling||e.previousSibling:i.first?t.reverse().find(({column:t})=>t<i.first).cell:t.reverse().find(({column:t})=>t>i.last).cell}(o,e,n,r);this.editor.model.change(e=>{const n=r.last-r.first+1;t.removeColumns(i,{at:r.first,columns:n}),e.setSelection(e.createPositionAt(s,0))})}}class Dx extends oc{refresh(){const t=this.editor.plugins.get("TableUtils"),e=this.editor.model,n=t.getSelectionAffectedTableCells(e.document.selection);if(0===n.length)return this.isEnabled=!1,void(this.value=!1);const i=n[0].findAncestor("table");this.isEnabled=e.schema.checkAttribute(i,"headingRows"),this.value=n.every(t=>this._isInHeading(t,t.parent.parent))}execute(t={}){if(t.forceValue===this.value)return;const e=this.editor.plugins.get("TableUtils"),n=this.editor.model,i=e.getSelectionAffectedTableCells(n.document.selection),o=i[0].findAncestor("table"),{first:r,last:s}=e.getRowIndexes(i),a=this.value?r:s+1,l=o.getAttribute("headingRows")||0;n.change(t=>{if(a){const e=xx(o,a,a>l?l:0);for(const{cell:n}of e)Ax(n,a,t)}sx("headingRows",a,o,t,0)})}_isInHeading(t,e){const n=parseInt(e.getAttribute("headingRows")||"0");return!!n&&t.parent.index<n}}class Bx extends oc{refresh(){const t=this.editor.plugins.get("TableUtils"),e=this.editor.model,n=t.getSelectionAffectedTableCells(e.document.selection);if(0===n.length)return this.isEnabled=!1,void(this.value=!1);const i=n[0].findAncestor("table");this.isEnabled=e.schema.checkAttribute(i,"headingColumns"),this.value=n.every(e=>lx(t,e))}execute(t={}){if(t.forceValue===this.value)return;const e=this.editor.plugins.get("TableUtils"),n=this.editor.model,i=e.getSelectionAffectedTableCells(n.document.selection),o=i[0].findAncestor("table"),{first:r,last:s}=e.getColumnIndexes(i),a=this.value?r:s+1;n.change(t=>{if(a){const e=Ex(o,a);for(const{cell:n,column:i}of e)Sx(n,i,a,t)}sx("headingColumns",a,o,t,0)})}}function Fx(t,e){return 4e3/jx(t,e)}function jx(t,e){const n=Hx(t,"tbody",e)||Hx(t,"thead",e);return Ux(e.editing.view.domConverter.mapViewToDom(n))}function Hx(t,e,n){return[...[...n.editing.mapper.toViewElement(t).getChildren()].find(t=>t.is("element","table")).getChildren()].find(t=>t.is("element",e))}function Ux(t){const e=gt.window.getComputedStyle(t);return"border-box"===e.boxSizing?parseFloat(e.width)-parseFloat(e.paddingLeft)-parseFloat(e.paddingRight)-parseFloat(e.borderLeftWidth)-parseFloat(e.borderRightWidth):parseFloat(e.width)}function $x(t){const e=Math.pow(10,2),n="number"==typeof t?t:parseFloat(t);return Math.round(n*e)/e}function Wx(t,e){return Array(t).fill(e)}function qx(t){return t.map(t=>"number"==typeof t?t:parseFloat(t)).filter(t=>!Number.isNaN(t)).reduce((t,e)=>t+e,0)}function Kx(t){let e=function(t){const e=t.filter(t=>"auto"===t).length;if(0===e)return t.map(t=>$x(t));const n=qx(t),i=Math.max((100-n)/e,5);return t.map(t=>"auto"===t?i:t).map(t=>$x(t))}(t.map(t=>"auto"===t||void 0===t?"auto":parseFloat(t.replace("%",""))));const n=qx(e);return 100!==n&&(e=e.map(t=>$x(100*t/n)).map((t,e,n)=>e!==n.length-1?t:$x(t+100-qx(n)))),e.map(t=>t+"%")}function Gx(t){const e=gt.window.getComputedStyle(t);return"border-box"===e.boxSizing?parseInt(e.width):parseFloat(e.width)+parseFloat(e.paddingLeft)+parseFloat(e.paddingRight)+parseFloat(e.borderWidth)}function Qx(t,e,n,i){for(let o=0;o<Math.max(n.length,t.length);o++){const r=t[o],s=n[o];s?r?i.setAttribute("columnWidth",s,r):i.appendElement("tableColumn",{columnWidth:s},e):i.remove(r)}}function Yx(t){if(t.is("element","tableColumnGroup"))return t;const e=t.getChildren();return Array.from(e).find(t=>t.is("element","tableColumnGroup"))}function Jx(t){const e=Yx(t);return e?Array.from(e.getChildren()):[]}class Zx extends nc{static get pluginName(){return"TableUtils"}static get isOfficialPlugin(){return!0}init(){this.decorate("insertColumns"),this.decorate("insertRows")}getCellLocation(t){const e=t.parent,n=e.parent,i=n.getChildIndex(e),o=new gx(n,{row:i});for(const{cell:e,row:n,column:i}of o)if(e===t)return{row:n,column:i}}createTable(t,e){const n=t.createElement("table"),i=e.rows||2,o=e.columns||2;return Xx(t,n,0,i,o),e.headingRows&&sx("headingRows",Math.min(e.headingRows,i),n,t,0),e.headingColumns&&sx("headingColumns",Math.min(e.headingColumns,o),n,t,0),n}insertRows(t,e={}){const n=this.editor.model,i=e.at||0,o=e.rows||1,r=void 0!==e.copyStructureFromAbove,s=e.copyStructureFromAbove?i-1:i,a=this.getRows(t),l=this.getColumns(t);if(i>a)throw new Vt("tableutils-insertrows-insert-out-of-range",this,{options:e});n.change(e=>{const n=t.getAttribute("headingRows")||0;if(n>i&&sx("headingRows",n+o,t,e,0),!r&&(0===i||i===a))return void Xx(e,t,i,o,l);const c=r?Math.max(i,s):i,d=new gx(t,{endRow:c}),u=new Array(l).fill(1);for(const{row:t,column:n,cellHeight:a,cellWidth:l,cell:c}of d){const d=t+a-1,h=t<=s&&s<=d;t<i&&i<=d?(e.setAttribute("rowspan",a+o,c),u[n]=-l):r&&h&&(u[n]=l)}for(let n=0;n<o;n++){const n=e.createElement("tableRow");e.insert(n,t,i);for(let t=0;t<u.length;t++){const i=u[t],o=e.createPositionAt(n,"end");i>0&&ax(e,o,i>1?{colspan:i}:void 0),t+=Math.abs(i)-1}}})}insertColumns(t,e={}){const n=this.editor.model,i=e.at||0,o=e.columns||1;n.change(e=>{const n=t.getAttribute("headingColumns");i<n&&e.setAttribute("headingColumns",n+o,t);const r=this.getColumns(t);if(0===i||r===i){for(const n of t.getChildren())n.is("element","tableRow")&&tA(o,e,e.createPositionAt(n,i?"end":0));return}const s=new gx(t,{column:i,includeAllSlots:!0});for(const t of s){const{row:n,cell:r,cellAnchorColumn:a,cellAnchorRow:l,cellWidth:c,cellHeight:d}=t;if(a<i){e.setAttribute("colspan",c+o,r);const t=l+d-1;for(let e=n;e<=t;e++)s.skipRow(e)}else tA(o,e,t.getPositionBefore())}})}removeRows(t,e){const n=this.editor.model,i=e.rows||1,o=this.getRows(t),r=e.at,s=r+i-1;if(s>o-1)throw new Vt("tableutils-removerows-row-index-out-of-range",this,{table:t,options:e});n.change(e=>{const n={first:r,last:s},{cellsToMove:i,cellsToTrim:o}=function(t,{first:e,last:n}){const i=new Map,o=[];for(const{row:r,column:s,cellHeight:a,cell:l}of new gx(t,{endRow:n})){const t=r+a-1;if(r>=e&&r<=n&&t>n){const t=a-(n-r+1);i.set(s,{cell:l,rowspan:t})}if(r<e&&t>=e){let i;i=t>=n?n-e+1:t-e+1,o.push({cell:l,rowspan:a-i})}}return{cellsToMove:i,cellsToTrim:o}}(t,n);i.size&&function(t,e,n,i){const o=[...new gx(t,{includeAllSlots:!0,row:e})],r=t.getChild(e);let s;for(const{column:t,cell:e,isAnchor:a}of o)if(n.has(t)){const{cell:e,rowspan:o}=n.get(t),a=s?i.createPositionAfter(s):i.createPositionAt(r,0);i.move(i.createRangeOn(e),a),sx("rowspan",o,e,i),s=e}else a&&(s=e)}(t,s+1,i,e);for(let n=s;n>=r;n--)e.remove(t.getChild(n));for(const{rowspan:t,cell:n}of o)sx("rowspan",t,n,e);!function(t,{first:e,last:n},i){const o=t.getAttribute("headingRows")||0;e<o&&sx("headingRows",n<o?o-(n-e+1):e,t,i,0)}(t,n,e),Ix(t,this)||Px(t,this)})}removeColumns(t,e){const n=this.editor.model,i=e.at,o=e.columns||1,r=e.at+o-1;n.change(e=>{!function(t,e,n){const i=t.getAttribute("headingColumns")||0;if(i&&e.first<i){const o=Math.min(i-1,e.last)-e.first+1;n.setAttribute("headingColumns",i-o,t)}}(t,{first:i,last:r},e);const n=Jx(t);for(let o=r;o>=i;o--){for(const{cell:n,column:i,cellWidth:r}of[...new gx(t)])i<=o&&r>1&&i+r>o?sx("colspan",r-1,n,e):i===o&&e.remove(n);if(n[o]){const t=0===o?n[1]:n[o-1],i=parseFloat(n[o].getAttribute("columnWidth")),r=parseFloat(t.getAttribute("columnWidth"));e.remove(n[o]),e.setAttribute("columnWidth",i+r+"%",t)}}Px(t,this)||Ix(t,this)})}splitCellVertically(t,e=2){const n=this.editor.model,i=t.parent.parent,o=parseInt(t.getAttribute("rowspan")||"1"),r=parseInt(t.getAttribute("colspan")||"1");n.change(n=>{if(r>1){const{newCellsSpan:i,updatedSpan:s}=eA(r,e);sx("colspan",s,t,n);const a={};i>1&&(a.colspan=i),o>1&&(a.rowspan=o),tA(r>e?e-1:r-1,n,n.createPositionAfter(t),a)}if(r<e){const s=e-r,a=[...new gx(i)],{column:l}=a.find(({cell:e})=>e===t),c=a.filter(({cell:e,cellWidth:n,column:i})=>e!==t&&i===l||i<l&&i+n>l);for(const{cell:t,cellWidth:e}of c)n.setAttribute("colspan",e+s,t);const d={};o>1&&(d.rowspan=o),tA(s,n,n.createPositionAfter(t),d);const u=i.getAttribute("headingColumns")||0;u>l&&sx("headingColumns",u+s,i,n)}})}splitCellHorizontally(t,e=2){const n=this.editor.model,i=t.parent,o=i.parent,r=o.getChildIndex(i),s=parseInt(t.getAttribute("rowspan")||"1"),a=parseInt(t.getAttribute("colspan")||"1");n.change(n=>{if(s>1){const i=[...new gx(o,{startRow:r,endRow:r+s-1,includeAllSlots:!0})],{newCellsSpan:l,updatedSpan:c}=eA(s,e);sx("rowspan",c,t,n);const{column:d}=i.find(({cell:e})=>e===t),u={};l>1&&(u.rowspan=l),a>1&&(u.colspan=a);let h=0;for(const t of i){const{column:e,row:i}=t,o=e===d;h>=l&&o&&(h=0),i>=r+c&&o&&(h||tA(1,n,t.getPositionBefore(),u),h++)}}if(s<e){const i=e-s,l=[...new gx(o,{startRow:0,endRow:r})];for(const{cell:e,cellHeight:o,row:s}of l)if(e!==t&&s+o>r){const t=o+i;n.setAttribute("rowspan",t,e)}const c={};a>1&&(c.colspan=a),Xx(n,o,r+1,i,1,c);const d=o.getAttribute("headingRows")||0;d>r&&sx("headingRows",d+i,o,n)}})}getColumns(t){return[...t.getChild(0).getChildren()].filter(t=>t.is("element","tableCell")).reduce((t,e)=>t+parseInt(e.getAttribute("colspan")||"1"),0)}getRows(t){return Array.from(t.getChildren()).reduce((t,e)=>e.is("element","tableRow")?t+1:t,0)}createTableWalker(t,e={}){return new gx(t,e)}getSelectedTableCells(t){const e=[];for(const n of this.sortRanges(t.getRanges())){const t=n.getContainedElement();t&&t.is("element","tableCell")&&e.push(t)}return e}getTableCellsContainingSelection(t){const e=[];for(const n of t.getRanges()){const t=n.start.findAncestor("tableCell");t&&e.push(t)}return e}getSelectionAffectedTableCells(t){const e=this.getSelectedTableCells(t);return e.length?e:this.getTableCellsContainingSelection(t)}getRowIndexes(t){const e=t.map(t=>t.parent.index);return this._getFirstLastIndexesObject(e)}getColumnIndexes(t){const e=t[0].findAncestor("table"),n=[...new gx(e)].filter(e=>t.includes(e.cell)).map(t=>t.column);return this._getFirstLastIndexesObject(n)}isSelectionRectangular(t){if(t.length<2||!this._areCellInTheSameTableSection(t))return!1;const e=new Set,n=new Set;let i=0;for(const o of t){const{row:t,column:r}=this.getCellLocation(o),s=parseInt(o.getAttribute("rowspan"))||1,a=parseInt(o.getAttribute("colspan"))||1;e.add(t),n.add(r),s>1&&e.add(t+s-1),a>1&&n.add(r+a-1),i+=s*a}const o=function(t,e){const n=Array.from(t.values()),i=Array.from(e.values());return(Math.max(...n)-Math.min(...n)+1)*(Math.max(...i)-Math.min(...i)+1)}(e,n);return o==i}sortRanges(t){return Array.from(t).sort(nA)}_getFirstLastIndexesObject(t){const e=t.sort((t,e)=>t-e);return{first:e[0],last:e[e.length-1]}}_areCellInTheSameTableSection(t){const e=t[0].findAncestor("table"),n=this.getRowIndexes(t),i=parseInt(e.getAttribute("headingRows"))||0;if(!this._areIndexesInSameSection(n,i))return!1;const o=this.getColumnIndexes(t),r=parseInt(e.getAttribute("headingColumns"))||0;return this._areIndexesInSameSection(o,r)}_areIndexesInSameSection({first:t,last:e},n){return t<n==e<n}}function Xx(t,e,n,i,o,r={}){for(let s=0;s<i;s++){const i=t.createElement("tableRow");t.insert(i,e,n),tA(o,t,t.createPositionAt(i,"end"),r)}}function tA(t,e,n,i={}){for(let o=0;o<t;o++)ax(e,n,i)}function eA(t,e){if(t<e)return{newCellsSpan:1,updatedSpan:1};const n=Math.floor(t/e);return{newCellsSpan:n,updatedSpan:t-n*e+n}}function nA(t,e){const n=t.start,i=e.start;return n.isBefore(i)?-1:1}class iA extends oc{refresh(){const t=this.editor.plugins.get(Zx),e=t.getSelectedTableCells(this.editor.model.document.selection);this.isEnabled=t.isSelectionRectangular(e)}execute(){const t=this.editor.model,e=this.editor.plugins.get(Zx);t.change(n=>{const i=e.getSelectedTableCells(t.document.selection),o=i.shift(),{mergeWidth:r,mergeHeight:s}=function(t,e,n){let i=0,o=0;for(const t of e){const{row:e,column:r}=n.getCellLocation(t);i=sA(t,r,i,"colspan"),o=sA(t,e,o,"rowspan")}const{row:r,column:s}=n.getCellLocation(t);return{mergeWidth:i-s,mergeHeight:o-r}}(o,i,e);sx("colspan",r,o,n),sx("rowspan",s,o,n);for(const t of i)oA(t,o,n);Mx(o.findAncestor("table"),e),n.setSelection(o,"in")})}}function oA(t,e,n){rA(t)||(rA(e)&&n.remove(n.createRangeIn(e)),n.move(n.createRangeIn(t),n.createPositionAt(e,"end"))),n.remove(t)}function rA(t){const e=t.getChild(0);return 1==t.childCount&&e.is("element","paragraph")&&e.isEmpty}function sA(t,e,n,i){const o=parseInt(t.getAttribute(i)||"1");return Math.max(n,e+o)}class aA extends oc{constructor(t){super(t),this.affectsData=!1}refresh(){const t=this.editor.plugins.get("TableUtils").getSelectionAffectedTableCells(this.editor.model.document.selection);this.isEnabled=t.length>0}execute(){const t=this.editor.model,e=this.editor.plugins.get("TableUtils"),n=e.getSelectionAffectedTableCells(t.document.selection),i=e.getRowIndexes(n),o=n[0].findAncestor("table"),r=[];for(let e=i.first;e<=i.last;e++)for(const n of o.getChild(e).getChildren())r.push(t.createRangeOn(n));t.change(t=>{t.setSelection(r)})}}class lA extends oc{constructor(t){super(t),this.affectsData=!1}refresh(){const t=this.editor.plugins.get("TableUtils").getSelectionAffectedTableCells(this.editor.model.document.selection);this.isEnabled=t.length>0}execute(){const t=this.editor.plugins.get("TableUtils"),e=this.editor.model,n=t.getSelectionAffectedTableCells(e.document.selection),i=n[0],o=n.pop(),r=i.findAncestor("table"),s=t.getCellLocation(i),a=t.getCellLocation(o),l=Math.min(s.column,a.column),c=Math.max(s.column,a.column),d=[];for(const t of new gx(r,{startColumn:l,endColumn:c}))d.push(e.createRangeOn(t.cell));e.change(t=>{t.setSelection(d)})}}function cA(t,e){let n=!1;const i=function(t){const e=parseInt(t.getAttribute("headingRows")||"0"),n=Array.from(t.getChildren()).reduce((t,e)=>e.is("element","tableRow")?t+1:t,0),i=[];for(const{row:o,cell:r,cellHeight:s}of new gx(t)){if(s<2)continue;const t=o<e?e:n;if(o+s>t){const e=t-o;i.push({cell:r,rowspan:e})}}return i}(t);if(i.length){n=!0;for(const t of i)sx("rowspan",t.rowspan,t.cell,e,1)}return n}function dA(t,e){let n=!1;const i=function(t){const e=new Array(t.childCount).fill(0);for(const{rowIndex:n}of new gx(t,{includeAllSlots:!0}))e[n]++;return e}(t),o=[];for(const[e,n]of i.entries())!n&&t.getChild(e).is("element","tableRow")&&o.push(e);if(o.length){n=!0;for(const n of o.reverse())e.remove(t.getChild(n)),i.splice(n,1)}const r=i.filter((e,n)=>t.getChild(n).is("element","tableRow")),s=r[0];if(!r.every(t=>t===s)){const i=r.reduce((t,e)=>e>t?e:t,0);for(const[o,s]of r.entries()){const r=i-s;if(r){for(let n=0;n<r;n++)ax(e,e.createPositionAt(t.getChild(o),"end"));n=!0}}}return n}function uA(t){if("attribute"!==t.type)return!1;const e=t.attributeKey;return"headingRows"===e||"colspan"===e||"rowspan"===e}function hA(t,e){let n=!1;for(const i of t.getChildren())i.is("element","tableRow")&&(n=gA(i,e)||n);return n}function gA(t,e){let n=!1;for(const i of t.getChildren())n=mA(i,e)||n;return n}function mA(t,e){if(0==t.childCount)return e.insertElement("paragraph",t),!0;const n=Array.from(t.getChildren()).filter(t=>t.is("$text"));for(const t of n)e.wrap(e.createRangeOn(t),"paragraph");return!!n.length}function pA(t){return!!t.position.parent.is("element","tableCell")&&("insert"==t.type&&"$text"==t.name||"remove"==t.type)}function fA(t,e){if(!t.is("element","paragraph"))return!1;const n=e.toViewElement(t);return!!n&&kx(t)!==n.is("element","span")}class bA extends nc{_additionalSlots;static get pluginName(){return"TableEditing"}static get isOfficialPlugin(){return!0}static get requires(){return[Zx]}constructor(t){super(t),this._additionalSlots=[]}init(){const t=this.editor,e=t.model,n=e.schema,i=t.conversion,o=t.plugins.get(Zx);n.register("table",{inheritAllFrom:"$blockObject",allowAttributes:["headingRows","headingColumns"]}),n.register("tableRow",{allowIn:"table",isLimit:!0}),n.register("tableCell",{allowContentOf:"$container",allowIn:"tableRow",allowAttributes:["colspan","rowspan"],isLimit:!0,isSelectable:!0}),i.for("upcast").add(t=>{t.on("element:figure",(t,e,n)=>{if(!n.consumable.test(e.viewItem,{name:!0,classes:"table"}))return;const i=function(t){for(const e of t.getChildren())if(e.is("element","table"))return e}(e.viewItem);if(!i||!n.consumable.test(i,{name:!0}))return;n.consumable.consume(e.viewItem,{name:!0,classes:"table"});const o=wn(n.convertItem(i,e.modelCursor).modelRange.getItems());o?(n.convertChildren(e.viewItem,n.writer.createPositionAt(o,"end")),n.updateConversionResult(o,e)):n.consumable.revert(e.viewItem,{name:!0,classes:"table"})})}),i.for("upcast").add(t=>{t.on("element:table",(t,e,n)=>{const i=e.viewItem;if(!n.consumable.test(i,{name:!0}))return;const{rows:o,headingRows:r,headingColumns:s}=function(t){let e,n=0;const i=[],o=[];let r;for(const s of Array.from(t.getChildren())){if("tbody"!==s.name&&"thead"!==s.name&&"tfoot"!==s.name)continue;"thead"!==s.name||r||(r=s);const t=Array.from(s.getChildren()).filter(t=>t.is("element","tr"));let a=null;for(const l of t){const t=Array.from(l.getChildren()).filter(t=>t.is("element","td")||t.is("element","th"));if(r&&s===r||"tbody"===s.name&&t.length>0&&(null===a||t.length===a)&&t.every(t=>t.is("element","th")))n++,i.push(l);else{o.push(l);const t=hx(l);(!e||t<e)&&(e=t)}a=Math.max(a||0,t.length)}}return{headingRows:n,headingColumns:e||0,rows:[...i,...o]}}(i),a={};s&&(a.headingColumns=s),r&&(a.headingRows=r);const l=n.writer.createElement("table",a);if(n.safeInsert(l,e.modelCursor)){if(n.consumable.consume(i,{name:!0}),o.forEach(t=>n.convertItem(t,n.writer.createPositionAt(l,"end"))),n.convertChildren(i,n.writer.createPositionAt(l,"end")),l.isEmpty){const t=n.writer.createElement("tableRow");n.writer.insert(t,n.writer.createPositionAt(l,"end")),ax(n.writer,n.writer.createPositionAt(t,"end"))}n.updateConversionResult(l,e)}})}),i.for("editingDowncast").elementToStructure({model:{name:"table",attributes:["headingRows"]},view:px(o,{asWidget:!0,additionalSlots:this._additionalSlots})}),i.for("dataDowncast").elementToStructure({model:{name:"table",attributes:["headingRows"]},view:px(o,{additionalSlots:this._additionalSlots})}),i.for("upcast").elementToElement({model:"tableRow",view:"tr"}),i.for("upcast").add(t=>{t.on("element:tr",(t,e)=>{e.viewItem.isEmpty&&0==e.modelCursor.index&&t.stop()},{priority:"high"})}),i.for("downcast").elementToElement({model:"tableRow",view:(t,{writer:e})=>t.isEmpty?e.createEmptyElement("tr"):e.createContainerElement("tr")}),i.for("upcast").elementToElement({model:"tableCell",view:"td"}),i.for("upcast").elementToElement({model:"tableCell",view:"th"}),i.for("upcast").add(ux("td")),i.for("upcast").add(ux("th")),i.for("editingDowncast").elementToElement({model:"tableCell",view:fx({asWidget:!0})}),i.for("dataDowncast").elementToElement({model:"tableCell",view:fx()}),i.for("editingDowncast").elementToElement({model:"paragraph",view:bx({asWidget:!0}),converterPriority:"high"}),i.for("dataDowncast").elementToElement({model:"paragraph",view:bx(),converterPriority:"high"}),i.for("downcast").attributeToAttribute({model:"colspan",view:"colspan"}),i.for("upcast").attributeToAttribute({model:{key:"colspan",value:kA("colspan")},view:"colspan"}),i.for("downcast").attributeToAttribute({model:"rowspan",view:"rowspan"}),i.for("upcast").attributeToAttribute({model:{key:"rowspan",value:kA("rowspan")},view:"rowspan"}),t.config.define("table.defaultHeadings.rows",0),t.config.define("table.defaultHeadings.columns",0),t.commands.add("insertTable",new wx(t)),t.commands.add("insertTableRowAbove",new _x(t,{order:"above"})),t.commands.add("insertTableRowBelow",new _x(t,{order:"below"})),t.commands.add("insertTableColumnLeft",new vx(t,{order:"left"})),t.commands.add("insertTableColumnRight",new vx(t,{order:"right"})),t.commands.add("removeTableRow",new Ox(t)),t.commands.add("removeTableColumn",new Rx(t)),t.commands.add("splitTableCellVertically",new yx(t,{direction:"vertically"})),t.commands.add("splitTableCellHorizontally",new yx(t,{direction:"horizontally"})),t.commands.add("mergeTableCells",new iA(t)),t.commands.add("mergeTableCellRight",new Vx(t,{direction:"right"})),t.commands.add("mergeTableCellLeft",new Vx(t,{direction:"left"})),t.commands.add("mergeTableCellDown",new Vx(t,{direction:"down"})),t.commands.add("mergeTableCellUp",new Vx(t,{direction:"up"})),t.commands.add("setTableColumnHeader",new Bx(t)),t.commands.add("setTableRowHeader",new Dx(t)),t.commands.add("selectTableRow",new aA(t)),t.commands.add("selectTableColumn",new lA(t)),function(t){t.document.registerPostFixer(e=>function(t,e){const n=e.document.differ.getChanges();let i=!1;const o=new Set;for(const e of n){let n=null;"insert"==e.type&&"table"==e.name&&(n=e.position.nodeAfter),"insert"!=e.type&&"remove"!=e.type||"tableRow"!=e.name&&"tableCell"!=e.name||(n=e.position.findAncestor("table")),uA(e)&&(n=e.range.start.findAncestor("table")),n&&!o.has(n)&&(i=cA(n,t)||i,i=dA(n,t)||i,o.add(n))}return i}(e,t))}(e),function(t){t.document.registerPostFixer(e=>function(t,e){const n=e.document.differ.getChanges();let i=!1;for(const e of n)"insert"==e.type&&"table"==e.name&&(i=hA(e.position.nodeAfter,t)||i),"insert"==e.type&&"tableRow"==e.name&&(i=gA(e.position.nodeAfter,t)||i),"insert"==e.type&&"tableCell"==e.name&&(i=mA(e.position.nodeAfter,t)||i),"remove"!=e.type&&"insert"!=e.type||!pA(e)||(i=mA(e.position.parent,t)||i);return i}(e,t))}(e),this.listenTo(e.document,"change:data",()=>{!function(t,e){const n=t.document.differ;for(const t of n.getChanges()){let n,i=!1;if("attribute"==t.type){const e=t.range.start.nodeAfter;if(!e||!e.is("element","table"))continue;if("headingRows"!=t.attributeKey&&"headingColumns"!=t.attributeKey)continue;n=e,i="headingRows"==t.attributeKey}else"tableRow"!=t.name&&"tableCell"!=t.name||(n=t.position.findAncestor("table"),i="tableRow"==t.name);if(!n)continue;const o=n.getAttribute("headingRows")||0,r=n.getAttribute("headingColumns")||0,s=new gx(n);for(const t of s){const n=t.row<o||t.column<r?"th":"td",s=e.mapper.toViewElement(t.cell);s&&s.is("element")&&s.name!=n&&e.reconvertItem(i?t.cell.parent:t.cell)}}}(e,t.editing),function(t,e){const n=t.document.differ,i=new Set;for(const t of n.getChanges()){const e="attribute"==t.type?t.range.start.parent:t.position.parent;e.is("element","tableCell")&&i.add(e)}for(const t of i.values()){const n=Array.from(t.getChildren()).filter(t=>fA(t,e.mapper));for(const t of n)e.reconvertItem(t)}}(e,t.editing)})}registerAdditionalSlot(t){this._additionalSlots.push(t)}}function kA(t){return e=>{const n=parseInt(e.getAttribute(t));return Number.isNaN(n)||n<=0?null:n}}class wA extends ku{items;keystrokes;focusTracker;constructor(t){super(t);const e=this.bindTemplate;this.items=this._createGridCollection(),this.keystrokes=new xn,this.focusTracker=new _n,this.set("rows",0),this.set("columns",0),this.bind("label").to(this,"columns",this,"rows",(t,e)=>`${e} × ${t}`),this.setTemplate({tag:"div",attributes:{class:["ck"]},children:[{tag:"div",attributes:{class:["ck-insert-table-dropdown__grid"]},on:{"mouseover@.ck-insert-table-dropdown-grid-box":e.to("boxover")},children:this.items},{tag:"div",attributes:{class:["ck","ck-insert-table-dropdown__label"],"aria-hidden":!0},children:[{text:e.to("label")}]}],on:{mousedown:e.to(t=>{t.preventDefault()}),click:e.to(()=>{this.fire("execute")})}}),this.on("boxover",(t,e)=>{const{row:n,column:i}=e.target.dataset;this.items.get(10*(parseInt(n,10)-1)+(parseInt(i,10)-1)).focus()}),this.focusTracker.on("change:focusedElement",(t,e,n)=>{if(!n)return;const{row:i,column:o}=n.dataset;this.set({rows:parseInt(i),columns:parseInt(o)})}),this.on("change:columns",()=>this._highlightGridBoxes()),this.on("change:rows",()=>this._highlightGridBoxes())}render(){super.render(),Su({keystrokeHandler:this.keystrokes,focusTracker:this.focusTracker,gridItems:this.items,numberOfColumns:10,uiLanguageDirection:this.locale&&this.locale.uiLanguageDirection});for(const t of this.items)this.focusTracker.add(t.element);this.keystrokes.listenTo(this.element)}reset(){this.set({rows:1,columns:1})}focus(){this.items.get(0).focus()}focusLast(){this.items.get(0).focus()}_highlightGridBoxes(){const t=this.rows,e=this.columns;this.items.map((n,i)=>{const o=Math.floor(i/10)<t&&i%10<e;n.set("isOn",o)})}_createGridButton(t,e,n,i){const o=new Lu(t);return o.set({label:i,class:"ck-insert-table-dropdown-grid-box"}),o.extendTemplate({attributes:{"data-row":e,"data-column":n}}),o}_createGridCollection(){const t=[];for(let e=0;e<100;e++){const n=Math.floor(e/10),i=e%10,o=`${n+1} × ${i+1}`;t.push(this._createGridButton(this.locale,n+1,i+1,o))}return this.createCollection(t)}}class _A extends nc{static get pluginName(){return"TableUI"}static get isOfficialPlugin(){return!0}init(){const t=this.editor,e=this.editor.t,n="ltr"===t.locale.contentLanguageDirection;t.ui.componentFactory.add("insertTable",n=>{const i=t.commands.get("insertTable"),o=Bh(n);let r;return o.bind("isEnabled").to(i),o.buttonView.set({icon:id,label:e("Insert table"),tooltip:!0}),o.on("change:isOpen",()=>{r||(r=new wA(n),o.panelView.children.add(r),r.delegate("execute").to(o),o.on("execute",()=>{t.execute("insertTable",{rows:r.rows,columns:r.columns}),t.editing.view.focus()}))}),o}),t.ui.componentFactory.add("menuBar:insertTable",n=>{const i=t.commands.get("insertTable"),o=new Jg(n),r=new wA(n);return r.delegate("execute").to(o),o.on("change:isOpen",(t,e,n)=>{n||r.reset()}),r.on("execute",()=>{t.execute("insertTable",{rows:r.rows,columns:r.columns}),t.editing.view.focus()}),o.buttonView.set({label:e("Table"),icon:id}),o.panelView.children.add(r),o.bind("isEnabled").to(i),o}),t.ui.componentFactory.add("tableColumn",t=>{const i=[{type:"switchbutton",model:{commandName:"setTableColumnHeader",label:e("Header column"),bindIsOn:!0}},{type:"separator"},{type:"button",model:{commandName:n?"insertTableColumnLeft":"insertTableColumnRight",label:e("Insert column left")}},{type:"button",model:{commandName:n?"insertTableColumnRight":"insertTableColumnLeft",label:e("Insert column right")}},{type:"button",model:{commandName:"removeTableColumn",label:e("Delete column")}},{type:"button",model:{commandName:"selectTableColumn",label:e("Select column")}}];return this._prepareDropdown(e("Column"),'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M2.5 1h15A1.5 1.5 0 0 1 19 2.5v15a1.5 1.5 0 0 1-1.5 1.5h-15A1.5 1.5 0 0 1 1 17.5v-15A1.5 1.5 0 0 1 2.5 1M2 2v16h16V2z" opacity=".6"/><path d="M18 7v1H2V7zm0 5v1H2v-1z" opacity=".6"/><path d="M14 1v18a1 1 0 0 1-1 1H7a1 1 0 0 1-1-1V1a1 1 0 0 1 1-1h6a1 1 0 0 1 1 1m-2 1H8v4h4zm0 6H8v4h4zm0 6H8v4h4z"/></svg>',i,t)}),t.ui.componentFactory.add("tableRow",t=>{const n=[{type:"switchbutton",model:{commandName:"setTableRowHeader",label:e("Header row"),bindIsOn:!0}},{type:"separator"},{type:"button",model:{commandName:"insertTableRowAbove",label:e("Insert row above")}},{type:"button",model:{commandName:"insertTableRowBelow",label:e("Insert row below")}},{type:"button",model:{commandName:"removeTableRow",label:e("Delete row")}},{type:"button",model:{commandName:"selectTableRow",label:e("Select row")}}];return this._prepareDropdown(e("Row"),'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M2.5 1h15A1.5 1.5 0 0 1 19 2.5v15a1.5 1.5 0 0 1-1.5 1.5h-15A1.5 1.5 0 0 1 1 17.5v-15A1.5 1.5 0 0 1 2.5 1M2 2v16h16V2z" opacity=".6"/><path d="M7 2h1v16H7zm5 0h1v16h-1z" opacity=".6"/><path d="M1 6h18a1 1 0 0 1 1 1v6a1 1 0 0 1-1 1H1a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1m1 2v4h4V8zm6 0v4h4V8zm6 0v4h4V8z"/></svg>',n,t)}),t.ui.componentFactory.add("mergeTableCells",t=>{const i=[{type:"button",model:{commandName:"mergeTableCellUp",label:e("Merge cell up")}},{type:"button",model:{commandName:n?"mergeTableCellRight":"mergeTableCellLeft",label:e("Merge cell right")}},{type:"button",model:{commandName:"mergeTableCellDown",label:e("Merge cell down")}},{type:"button",model:{commandName:n?"mergeTableCellLeft":"mergeTableCellRight",label:e("Merge cell left")}},{type:"separator"},{type:"button",model:{commandName:"splitTableCellVertically",label:e("Split cell vertically")}},{type:"button",model:{commandName:"splitTableCellHorizontally",label:e("Split cell horizontally")}}];return this._prepareMergeSplitButtonDropdown(e("Merge cells"),'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M2.5 1h15A1.5 1.5 0 0 1 19 2.5v15a1.5 1.5 0 0 1-1.5 1.5h-15A1.5 1.5 0 0 1 1 17.5v-15A1.5 1.5 0 0 1 2.5 1M2 2v16h16V2z" opacity=".6"/><path d="M7 2h1v16H7zm5 0h1v7h-1zm6 5v1H2V7zM8 12v1H2v-1z" opacity=".6"/><path d="M7 7h12a1 1 0 0 1 1 1v11a1 1 0 0 1-1 1H7a1 1 0 0 1-1-1V8a1 1 0 0 1 1-1m1 2v9h10V9z"/></svg>',i,t)})}_prepareDropdown(t,e,n,i){const o=this.editor,r=Bh(i),s=this._fillDropdownWithListOptions(r,n);return r.buttonView.set({label:t,icon:e,tooltip:!0}),r.bind("isEnabled").toMany(s,"isEnabled",(...t)=>t.some(t=>t)),this.listenTo(r,"execute",t=>{o.execute(t.source.commandName),t.source instanceof rh||o.editing.view.focus()}),r}_prepareMergeSplitButtonDropdown(t,e,n,i){const o=this.editor,r=Bh(i,Dh),s="mergeTableCells",a=o.commands.get(s),l=this._fillDropdownWithListOptions(r,n);return r.buttonView.set({label:t,icon:e,tooltip:!0,isEnabled:!0}),r.bind("isEnabled").toMany([a,...l],"isEnabled",(...t)=>t.some(t=>t)),this.listenTo(r.buttonView,"execute",()=>{o.execute(s),o.editing.view.focus()}),this.listenTo(r,"execute",t=>{o.execute(t.source.commandName),o.editing.view.focus()}),r}_fillDropdownWithListOptions(t,e){const n=this.editor,i=[],o=new kn;for(const t of e)vA(t,n,i,o);return Hh(t,o),i}}function vA(t,e,n,i){if("button"===t.type||"switchbutton"===t.type){const i=t.model=new Fg(t.model),{commandName:o,bindIsOn:r}=t.model,s=e.commands.get(o);n.push(s),i.set({commandName:o}),i.bind("isEnabled").to(s),r&&i.bind("isOn").to(s,"value"),i.set({withText:!0})}i.add(t)}class yA extends nc{static get pluginName(){return"TableSelection"}static get isOfficialPlugin(){return!0}static get requires(){return[Zx,Zx]}init(){const t=this.editor,e=t.model,n=t.editing.view;this.listenTo(e,"deleteContent",(t,e)=>this._handleDeleteContent(t,e),{priority:"high"}),this.listenTo(n.document,"insertText",(t,e)=>this._handleInsertTextEvent(t,e),{priority:"high"}),this._defineSelectionConverter(),this._enablePluginDisabling()}getSelectedTableCells(){const t=this.editor.plugins.get(Zx),e=this.editor.model.document.selection,n=t.getSelectedTableCells(e);return 0==n.length?null:n}getSelectionAsFragment(){const t=this.editor.plugins.get(Zx),e=this.getSelectedTableCells();return e?this.editor.model.change(n=>{const i=n.createDocumentFragment(),{first:o,last:r}=t.getColumnIndexes(e),{first:s,last:a}=t.getRowIndexes(e),l=e[0].findAncestor("table");let c=a,d=r;if(t.isSelectionRectangular(e)){const t={firstColumn:o,lastColumn:r,firstRow:s,lastRow:a};c=Nx(l,t),d=Lx(l,t)}const u=Cx(l,{startRow:s,startColumn:o,endRow:c,endColumn:d},n);return n.insert(u,i,0),i}):null}setCellSelection(t,e){const n=this._getCellsToSelect(t,e);this.editor.model.change(t=>{t.setSelection(n.cells.map(e=>t.createRangeOn(e)),{backward:n.backward})})}getFocusCell(){const t=[...this.editor.model.document.selection.getRanges()].pop().getContainedElement();return t&&t.is("element","tableCell")?t:null}getAnchorCell(){const t=wn(this.editor.model.document.selection.getRanges()).getContainedElement();return t&&t.is("element","tableCell")?t:null}_defineSelectionConverter(){const t=this.editor,e=new Set;t.conversion.for("editingDowncast").add(t=>t.on("selection",(t,n,i)=>{const o=i.writer;!function(t){for(const n of e)t.removeClass("ck-editor__editable_selected",n);e.clear()}(o);const r=this.getSelectedTableCells();if(!r)return;for(const t of r){const n=i.mapper.toViewElement(t);o.addClass("ck-editor__editable_selected",n),e.add(n)}const s=i.mapper.toViewElement(r[r.length-1]);o.setSelection(s,0)},{priority:"lowest"}))}_enablePluginDisabling(){const t=this.editor;this.on("change:isEnabled",()=>{if(!this.isEnabled){const e=this.getSelectedTableCells();if(!e)return;t.model.change(n=>{const i=n.createPositionAt(e[0],0),o=t.model.schema.getNearestSelectionRange(i);n.setSelection(o)})}})}_handleDeleteContent(t,e){const n=this.editor.plugins.get(Zx),i=e[0],o=e[1],r=this.editor.model,s=!o||"backward"==o.direction,a=n.getSelectedTableCells(i);a.length&&(t.stop(),r.change(t=>{const e=a[s?a.length-1:0];r.change(t=>{for(const e of a)r.deleteContent(t.createSelection(e,"in"))});const n=r.schema.getNearestSelectionRange(t.createPositionAt(e,0));i.is("documentSelection")?t.setSelection(n):i.setTo(n)}))}_handleInsertTextEvent(t,e){const n=this.editor,i=this.getSelectedTableCells();if(!i)return;const o=n.editing.view,r=n.editing.mapper,s=i.map(t=>o.createRangeOn(r.toViewElement(t)));e.selection=o.createSelection(s),e.preventDefault()}_getCellsToSelect(t,e){const n=this.editor.plugins.get("TableUtils"),i=n.getCellLocation(t),o=n.getCellLocation(e),r=Math.min(i.row,o.row),s=Math.max(i.row,o.row),a=Math.min(i.column,o.column),l=parseInt(e.getAttribute("colspan")||"1")-1,c=Math.max(i.column,o.column+l),d=new Array(s-r+1).fill(null).map(()=>[]),u={startRow:r,endRow:s,startColumn:a,endColumn:c};for(const{row:e,cell:n}of new gx(t.findAncestor("table"),u))d[e-r].push(n);const h=o.row<i.row,g=o.column<i.column;return h&&d.reverse(),g&&d.forEach(t=>t.reverse()),{cells:d.flat(),backward:h||g}}}class CA extends nc{static get pluginName(){return"TableClipboard"}static get isOfficialPlugin(){return!0}static get requires(){return[Rf,Df,yA,Zx]}init(){const t=this.editor.editing.view.document;this.listenTo(t,"copy",(t,e)=>this._onCopyCut(t,e)),this.listenTo(t,"cut",(t,e)=>this._onCopyCut(t,e)),this._listenToContentInsertion(),this.decorate("_replaceTableSlotCell")}_listenToContentInsertion(){const{editor:t}=this,e=t.plugins.get(Df),n=t.plugins.get(yA);let i=!1;e.on("contentInsertion",(t,e)=>{i="paste"===e.method}),this.listenTo(t.model,"insertContent",(t,[e,o])=>{(i||null!==n.getSelectedTableCells())&&this._onInsertContent(t,e,o)},{priority:"high"}),e.on("contentInsertion",()=>{i=!1},{priority:"lowest"})}_onCopyCut(t,e){const n=this.editor.editing.view,i=this.editor.plugins.get(yA),o=this.editor.plugins.get(Rf);i.getSelectedTableCells()&&("cut"!=t.name||this.editor.model.canEditAt(this.editor.model.document.selection))&&(e.preventDefault(),t.stop(),this.editor.model.enqueueChange({isUndoable:"cut"===t.name},()=>{const r=o._copySelectedFragmentWithMarkers(t.name,this.editor.model.document.selection,()=>i.getSelectionAsFragment());n.document.fire("clipboardOutput",{dataTransfer:e.dataTransfer,content:this.editor.data.toView(r),method:t.name})}))}_onInsertContent(t,e,n){if(n&&!n.is("documentSelection"))return;const i=this.editor.model,o=this.editor.plugins.get(Zx),r=this.editor.plugins.get(Rf),s=this.getTableIfOnlyTableInContent(e,i);if(!s)return;const a=o.getSelectionAffectedTableCells(i.document.selection);a.length?(t.stop(),e.is("documentFragment")?r._pasteMarkersIntoTransformedElement(e.markers,t=>this._replaceSelectedCells(s,a,t)):this.editor.model.change(t=>{this._replaceSelectedCells(s,a,t)})):Mx(s,o)}_replaceSelectedCells(t,e,n){const i=this.editor.plugins.get(Zx),o={width:i.getColumns(t),height:i.getRows(t)},r=function(t,e,n,i){const o=t[0].findAncestor("table"),r=i.getColumnIndexes(t),s=i.getRowIndexes(t),a={firstColumn:r.first,lastColumn:r.last,firstRow:s.first,lastRow:s.last},l=1===t.length;return l&&(a.lastRow+=e.height-1,a.lastColumn+=e.width-1,function(t,e,n,i){const o=i.getColumns(t),r=i.getRows(t);n>o&&i.insertColumns(t,{at:o,columns:n-o}),e>r&&i.insertRows(t,{at:r,rows:e-r})}(o,a.lastRow+1,a.lastColumn+1,i)),l||!i.isSelectionRectangular(t)?function(t,e,n){const{firstRow:i,lastRow:o,firstColumn:r,lastColumn:s}=e,a={first:i,last:o},l={first:r,last:s};AA(t,r,a,n),AA(t,s+1,a,n),xA(t,i,l,n),xA(t,o+1,l,n,i)}(o,a,n):(a.lastRow=Nx(o,a),a.lastColumn=Lx(o,a)),a}(e,o,n,i),s=r.lastRow-r.firstRow+1,a=r.lastColumn-r.firstColumn+1;t=Cx(t,{startRow:0,startColumn:0,endRow:Math.min(s,o.height)-1,endColumn:Math.min(a,o.width)-1},n);const l=e[0].findAncestor("table"),c=this._replaceSelectedCellsWithPasted(t,o,l,r,n);if(this.editor.plugins.get("TableSelection").isEnabled){const t=i.sortRanges(c.map(t=>n.createRangeOn(t)));n.setSelection(t)}else n.setSelection(c[0],0);return l}_replaceSelectedCellsWithPasted(t,e,n,i,o){const{width:r,height:s}=e,a=function(t,e,n){const i=new Array(n).fill(null).map(()=>new Array(e).fill(null));for(const{column:e,row:n,cell:o}of new gx(t))i[n][e]=o;return i}(t,r,s),l=[...new gx(n,{startRow:i.firstRow,endRow:i.lastRow,startColumn:i.firstColumn,endColumn:i.lastColumn,includeAllSlots:!0})],c=[];let d;for(const t of l){const{row:e,column:n}=t;n===i.firstColumn&&(d=t.getPositionBefore());const l=e-i.firstRow,u=n-i.firstColumn,h=a[l%s][u%r],g=h?o.cloneElement(h):null,m=this._replaceTableSlotCell(t,g,d,o);m&&(Tx(m,e,n,i.lastRow,i.lastColumn,o),c.push(m),d=o.createPositionAfter(m))}const u=parseInt(n.getAttribute("headingRows")||"0"),h=parseInt(n.getAttribute("headingColumns")||"0"),g=i.firstRow<u&&u<=i.lastRow,m=i.firstColumn<h&&h<=i.lastColumn;if(g){const t=xA(n,u,{first:i.firstColumn,last:i.lastColumn},o,i.firstRow);c.push(...t)}if(m){const t=AA(n,h,{first:i.firstRow,last:i.lastRow},o);c.push(...t)}return c}_replaceTableSlotCell(t,e,n,i){const{cell:o,isAnchor:r}=t;return r&&i.remove(o),e?(i.insert(e,n),e):null}getTableIfOnlyTableInContent(t,e){if(!t.is("documentFragment")&&!t.is("element"))return null;if(t.is("element","table"))return t;if(1==t.childCount&&t.getChild(0).is("element","table"))return t.getChild(0);const n=e.createRangeIn(t);for(const t of n.getItems())if(t.is("element","table")){const i=e.createRange(n.start,e.createPositionBefore(t));if(e.hasContent(i,{ignoreWhitespaces:!0}))return null;const o=e.createRange(e.createPositionAfter(t),n.end);return e.hasContent(o,{ignoreWhitespaces:!0})?null:t}return null}}function xA(t,e,n,i,o=0){if(!(e<1))return xx(t,e,o).filter(({column:t,cellWidth:e})=>EA(t,e,n)).map(({cell:t})=>Ax(t,e,i))}function AA(t,e,n,i){if(!(e<1))return Ex(t,e).filter(({row:t,cellHeight:e})=>EA(t,e,n)).map(({cell:t,column:n})=>Sx(t,n,e,i))}function EA(t,e,n){const i=t+e-1,{first:o,last:r}=n;return t>=o&&t<=r||t<o&&i>=o}class SA extends nc{static get pluginName(){return"TableKeyboard"}static get isOfficialPlugin(){return!0}static get requires(){return[yA,Zx]}init(){const t=this.editor,e=t.editing.view.document,n=t.t;this.listenTo(e,"arrowKey",(...t)=>this._onArrowKey(...t),{context:"table"}),this.listenTo(e,"tab",(...t)=>this._handleTabOnSelectedTable(...t),{context:"figure"}),this.listenTo(e,"tab",(...t)=>this._handleTab(...t),{context:["th","td"]}),t.accessibility.addKeystrokeInfoGroup({id:"table",label:n("Keystrokes that can be used in a table cell"),keystrokes:[{label:n("Move the selection to the next cell"),keystroke:"Tab"},{label:n("Move the selection to the previous cell"),keystroke:"Shift+Tab"},{label:n("Insert a new table row (when in the last cell of a table)"),keystroke:"Tab"},{label:n("Navigate through the table"),keystroke:[["arrowup"],["arrowright"],["arrowdown"],["arrowleft"]]}]})}_handleTabOnSelectedTable(t,e){const n=this.editor,i=n.model.document.selection.getSelectedElement();i&&i.is("element","table")&&(e.preventDefault(),e.stopPropagation(),t.stop(),n.model.change(t=>{t.setSelection(t.createRangeIn(i.getChild(0).getChild(0)))}))}_handleTab(t,e){const n=this.editor,i=this.editor.plugins.get(Zx),o=this.editor.plugins.get("TableSelection"),r=n.model.document.selection,s=!e.shiftKey;let a=i.getTableCellsContainingSelection(r)[0];if(a||(a=o.getFocusCell()),!a)return;e.preventDefault(),e.stopPropagation(),t.stop();const l=a.parent,c=l.parent,d=c.getChildIndex(l),u=l.getChildIndex(a),h=0===u;if(!s&&h&&0===d)return void n.model.change(t=>{t.setSelection(t.createRangeOn(c))});const g=u===l.childCount-1,m=d===i.getRows(c)-1;if(s&&m&&g&&(n.execute("insertTableRowBelow"),d===i.getRows(c)-1))return void n.model.change(t=>{t.setSelection(t.createRangeOn(c))});let p;if(s&&g){const t=c.getChild(d+1);p=t.getChild(0)}else if(!s&&h){const t=c.getChild(d-1);p=t.getChild(t.childCount-1)}else p=l.getChild(u+(s?1:-1));n.model.change(t=>{t.setSelection(t.createRangeIn(p))})}_onArrowKey(t,e){const n=this.editor,i=hn(e.keyCode,n.locale.contentLanguageDirection);this._handleArrowKeys(i,e.shiftKey)&&(e.preventDefault(),e.stopPropagation(),t.stop())}_handleArrowKeys(t,e){const n=this.editor.plugins.get(Zx),i=this.editor.plugins.get("TableSelection"),o=this.editor.model,r=o.document.selection,s=["right","down"].includes(t),a=n.getSelectedTableCells(r);if(a.length){let n;return n=e?i.getFocusCell():s?a[a.length-1]:a[0],this._navigateFromCellInDirection(n,t,e),!0}const l=r.focus.findAncestor("tableCell");if(!l)return!1;if(!r.isCollapsed)if(e){if(r.isBackward==s&&!r.containsEntireContent(l))return!1}else{const t=r.getSelectedElement();if(!t||!o.schema.isObject(t))return!1}return!!this._isSelectionAtCellEdge(r,l,s)&&(this._navigateFromCellInDirection(l,t,e),!0)}_isSelectionAtCellEdge(t,e,n){const i=this.editor.model,o=this.editor.model.schema,r=n?t.getLastPosition():t.getFirstPosition();if(!o.getLimitElement(r).is("element","tableCell"))return i.createPositionAt(e,n?"end":0).isTouching(r);const s=i.createSelection(r);return i.modifySelection(s,{direction:n?"forward":"backward"}),r.isEqual(s.focus)}_navigateFromCellInDirection(t,e,n=!1){const i=this.editor.model,o=t.findAncestor("table"),r=[...new gx(o,{includeAllSlots:!0})],{row:s,column:a}=r[r.length-1],l=r.find(({cell:e})=>e==t);let{row:c,column:d}=l;switch(e){case"left":d--;break;case"up":c--;break;case"right":d+=l.cellWidth;break;case"down":c+=l.cellHeight}if(c<0||c>s||d<0&&c<=0||d>a&&c>=s)return void i.change(t=>{t.setSelection(t.createRangeOn(o))});d<0?(d=n?0:a,c--):d>a&&(d=n?a:0,c++);const u=r.find(t=>t.row==c&&t.column==d).cell,h=["right","down"].includes(e),g=this.editor.plugins.get("TableSelection");if(n&&g.isEnabled){const e=g.getAnchorCell()||t;g.setCellSelection(e,u)}else{const t=i.createPositionAt(u,h?0:"end");i.change(e=>{e.setSelection(t)})}}}class TA extends Ko{domEventType=["mousemove","mouseleave"];onDomEvent(t){this.fire(t.type,t)}}class IA extends nc{static get pluginName(){return"TableMouse"}static get isOfficialPlugin(){return!0}static get requires(){return[yA,Zx]}init(){this.editor.editing.view.addObserver(TA),this._enableShiftClickSelection(),this._enableMouseDragSelection()}_enableShiftClickSelection(){const t=this.editor,e=t.plugins.get(Zx);let n=!1;const i=t.plugins.get(yA);this.listenTo(t.editing.view.document,"mousedown",(o,r)=>{const s=t.model.document.selection;if(!this.isEnabled||!i.isEnabled)return;if(!r.domEvent.shiftKey)return;const a=i.getAnchorCell()||e.getTableCellsContainingSelection(s)[0];if(!a)return;const l=this._getModelTableCellFromDomEvent(r);l&&PA(a,l)&&(n=!0,i.setCellSelection(a,l),r.preventDefault())}),this.listenTo(t.editing.view.document,"mouseup",()=>{n=!1}),this.listenTo(t.editing.view.document,"selectionChange",t=>{n&&t.stop()},{priority:"highest"})}_enableMouseDragSelection(){const t=this.editor;let e,n,i=!1,o=!1;const r=t.plugins.get(yA);this.listenTo(t.editing.view.document,"mousedown",(t,n)=>{this.isEnabled&&r.isEnabled&&(n.domEvent.shiftKey||n.domEvent.ctrlKey||n.domEvent.altKey||(e=this._getModelTableCellFromDomEvent(n)))}),this.listenTo(t.editing.view.document,"mousemove",(t,s)=>{if(!s.domEvent.buttons)return;if(!e)return;const a=this._getModelTableCellFromDomEvent(s);a&&PA(e,a)&&(n=a,i||n==e||(i=!0)),i&&(o=!0,r.setCellSelection(e,n),s.preventDefault())}),this.listenTo(t.editing.view.document,"mouseup",()=>{i=!1,o=!1,e=null,n=null}),this.listenTo(t.editing.view.document,"selectionChange",t=>{o&&t.stop()},{priority:"highest"})}_getModelTableCellFromDomEvent(t){const e=t.target,n=this.editor.editing.view.createPositionAt(e,0);return this.editor.editing.mapper.toModelPosition(n).parent.findAncestor("tableCell",{includeSelf:!0})}}function PA(t,e){return t.parent.parent==e.parent.parent}class MA extends nc{static get requires(){return[bA,_A,yA,IA,SA,CA,pf]}static get pluginName(){return"Table"}static get isOfficialPlugin(){return!0}}function NA(t){return LA(t)||VA(t)}function LA(t){const e=t.getSelectedElement();return e&&zA(e)?e:null}function VA(t){const e=t.getFirstPosition();if(!e)return null;let n=e.parent;for(;n;){if(n.is("element")&&zA(n))return n;n=n.parent}return null}function zA(t){return!!t.getCustomProperty("table")&&Yp(t)}class OA extends nc{static get requires(){return[bf]}static get pluginName(){return"TableToolbar"}static get isOfficialPlugin(){return!0}afterInit(){const t=this.editor,e=t.t,n=t.plugins.get(bf),i=t.config.get("table.contentToolbar"),o=t.config.get("table.tableToolbar");i&&n.register("tableContent",{ariaLabel:e("Table toolbar"),items:i,getRelatedElement:VA}),o&&n.register("table",{ariaLabel:e("Table toolbar"),items:o,getRelatedElement:LA})}}class RA extends ku{options;focusTracker;focusCycler;_focusables;dropdownView;inputView;keystrokes;_stillTyping;constructor(t,e){super(t),this.set("value",""),this.set("isReadOnly",!1),this.set("isFocused",!1),this.set("isEmpty",!0),this.options=e,this.focusTracker=new _n,this._focusables=new Qd,this.dropdownView=this._createDropdownView(),this.inputView=this._createInputTextView(),this.keystrokes=new xn,this._stillTyping=!1,this.focusCycler=new Ou({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.setTemplate({tag:"div",attributes:{class:["ck","ck-input-color"]},children:[this.dropdownView,this.inputView]}),this.on("change:value",(t,e,n)=>this._setInputValue(n))}render(){super.render(),[this.inputView,this.dropdownView.buttonView].forEach(t=>{this.focusTracker.add(t.element),this._focusables.add(t)}),this.keystrokes.listenTo(this.element)}focus(t){-1===t?this.focusCycler.focusLast():this.focusCycler.focusFirst()}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}_createDropdownView(){const t=this.locale,e=t.t,n=this.bindTemplate,i=this._createColorSelector(t),o=Bh(t),r=new ku;return r.setTemplate({tag:"span",attributes:{class:["ck","ck-input-color__button__preview"],style:{backgroundColor:n.to("value")}},children:[{tag:"span",attributes:{class:["ck","ck-input-color__button__preview__no-color-indicator",n.if("value","ck-hidden",t=>""!=t)]}}]}),o.buttonView.extendTemplate({attributes:{class:"ck-input-color__button"}}),o.buttonView.children.add(r),o.buttonView.label=e("Color picker"),o.buttonView.tooltip=!0,o.panelPosition="rtl"===t.uiLanguageDirection?"se":"sw",o.panelView.children.add(i),o.bind("isEnabled").to(this,"isReadOnly",t=>!t),o.on("change:isOpen",(t,e,n)=>{n&&(i.updateSelectedColors(),i.showColorGridsFragment())}),o}_createInputTextView(){const t=this.locale,e=new vh(t);return e.extendTemplate({on:{blur:e.bindTemplate.to("blur")}}),e.value=this.value,e.bind("isReadOnly","hasError").to(this),this.bind("isFocused","isEmpty").to(e),e.on("input",()=>{const t=e.element.value,n=this.options.colorDefinitions.find(e=>t===e.label);this._stillTyping=!0,this.value=n&&n.color||t}),e.on("blur",()=>{this._stillTyping=!1,this._setInputValue(e.element.value)}),e.delegate("input").to(this),e}_createColorSelector(t){const e=t.t,n=this.options.defaultColorValue||"",i=e(n?"Restore default":"Remove color"),o=new rg(t,{colors:this.options.colorDefinitions,columns:this.options.columns,removeButtonLabel:i,colorPickerLabel:e("Color picker"),colorPickerViewConfig:!1!==this.options.colorPickerConfig&&{...this.options.colorPickerConfig,hideInput:!0}});o.appendUI(),o.on("execute",(t,e)=>{"colorPickerSaveButton"!==e.source?(this.value=e.value||n,this.fire("input"),"colorPicker"!==e.source&&(this.dropdownView.isOpen=!1)):this.dropdownView.isOpen=!1});let r=this.value;return o.on("colorPicker:cancel",()=>{this.value=r,this.fire("input"),this.dropdownView.isOpen=!1}),o.colorGridsFragmentView.colorPickerButtonView.on("execute",()=>{r=this.value}),o.bind("selectedColor").to(this,"value"),o}_setInputValue(t){if(!this._stillTyping){const e=DA(t),n=this.options.colorDefinitions.find(t=>e===DA(t.color));this.inputView.value=n?n.label:t||""}}}function DA(t){return t.replace(/([(,])\s+/g,"$1").replace(/^\s+|\s+(?=[),\s]|$)/g,"").replace(/,|\s/g," ")}const BA=t=>""===t;function FA(t){return{none:t("None"),solid:t("Solid"),dotted:t("Dotted"),dashed:t("Dashed"),double:t("Double"),groove:t("Groove"),ridge:t("Ridge"),inset:t("Inset"),outset:t("Outset")}}function jA(t){return t('The color is invalid. Try "#FF0000" or "rgb(255,0,0)" or "red".')}function HA(t){return t('The value is invalid. Try "10px" or "2em" or simply "2".')}function UA(t){return t=t.trim().toLowerCase(),BA(t)||hl(t)}function $A(t){return t=t.trim(),BA(t)||YA(t)||fl(t)||kl(t)}function WA(t){return t=t.trim(),BA(t)||YA(t)||fl(t)}function qA(t,e){const n=new kn,i=FA(t.t);for(const o in i){const r={type:"button",model:new Fg({_borderStyleValue:o,label:i[o],role:"menuitemradio",withText:!0})};"none"===o?r.model.bind("isOn").to(t,"borderStyle",t=>"none"===e?!t:t===o):r.model.bind("isOn").to(t,"borderStyle",t=>t===o),n.add(r)}return n}function KA(t){const{view:e,icons:n,toolbar:i,labels:o,propertyName:r,nameToValue:s,defaultValue:a}=t;for(const t in o){const l=new Lu(e.locale);l.set({role:"radio",isToggleable:!0,label:o[t],icon:n[t],tooltip:o[t]});const c=s?s(t):t;l.bind("isOn").to(e,r,t=>{let e=t;return""===t&&a&&(e=a),c===e}),l.on("execute",()=>{!a&&c&&e[r]===c?e[r]=void 0:e[r]=c}),i.items.add(l)}}const GA=[{color:"hsl(0, 0%, 0%)",label:"Black"},{color:"hsl(0, 0%, 30%)",label:"Dim grey"},{color:"hsl(0, 0%, 60%)",label:"Grey"},{color:"hsl(0, 0%, 90%)",label:"Light grey"},{color:"hsl(0, 0%, 100%)",label:"White",hasBorder:!0},{color:"hsl(0, 75%, 60%)",label:"Red"},{color:"hsl(30, 75%, 60%)",label:"Orange"},{color:"hsl(60, 75%, 60%)",label:"Yellow"},{color:"hsl(90, 75%, 60%)",label:"Light green"},{color:"hsl(120, 75%, 60%)",label:"Green"},{color:"hsl(150, 75%, 60%)",label:"Aquamarine"},{color:"hsl(180, 75%, 60%)",label:"Turquoise"},{color:"hsl(210, 75%, 60%)",label:"Light blue"},{color:"hsl(240, 75%, 60%)",label:"Blue"},{color:"hsl(270, 75%, 60%)",label:"Purple"}];function QA(t){return(e,n,i)=>{const o=new RA(e.locale,{colorDefinitions:(r=t.colorConfig,r.map(t=>({color:t.model,label:t.label,options:{hasBorder:t.hasBorder}}))),columns:t.columns,defaultColorValue:t.defaultColorValue,colorPickerConfig:t.colorPickerConfig});var r;return o.inputView.set({id:n,ariaDescribedById:i}),o.bind("isReadOnly").to(e,"isEnabled",t=>!t),o.bind("hasError").to(e,"errorText",t=>!!t),o.on("input",()=>{e.errorText=null}),e.bind("isEmpty","isFocused").to(o),o}}function YA(t){const e=parseFloat(t);return!Number.isNaN(e)&&t===String(e)}class JA extends ku{options;focusTracker;keystrokes;children;borderStyleDropdown;borderWidthInput;borderColorInput;backgroundInput;paddingInput;widthInput;heightInput;horizontalAlignmentToolbar;verticalAlignmentToolbar;saveButtonView;cancelButtonView;_focusables;_focusCycler;constructor(t,e){super(t),this.set({borderStyle:"",borderWidth:"",borderColor:"",padding:"",backgroundColor:"",width:"",height:"",horizontalAlignment:"",verticalAlignment:""}),this.options=e;const{borderStyleDropdown:n,borderWidthInput:i,borderColorInput:o,borderRowLabel:r}=this._createBorderFields(),{backgroundRowLabel:s,backgroundInput:a}=this._createBackgroundFields(),{widthInput:l,operatorLabel:c,heightInput:d,dimensionsLabel:u}=this._createDimensionFields(),{horizontalAlignmentToolbar:h,verticalAlignmentToolbar:g,alignmentLabel:m}=this._createAlignmentFields();this.focusTracker=new _n,this.keystrokes=new xn,this.children=this.createCollection(),this.borderStyleDropdown=n,this.borderWidthInput=i,this.borderColorInput=o,this.backgroundInput=a,this.paddingInput=this._createPaddingField(),this.widthInput=l,this.heightInput=d,this.horizontalAlignmentToolbar=h,this.verticalAlignmentToolbar=g;const{saveButtonView:p,cancelButtonView:f}=this._createActionButtons();this.saveButtonView=p,this.cancelButtonView=f,this._focusables=new Qd,this._focusCycler=new Ou({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.children.add(new zu(t,{label:this.t("Cell properties")})),this.children.add(new Dg(t,{labelView:r,children:[r,n,o,i],class:"ck-table-form__border-row"})),this.children.add(new Dg(t,{labelView:s,children:[s,a],class:"ck-table-form__background-row"})),this.children.add(new Dg(t,{children:[new Dg(t,{labelView:u,children:[u,l,c,d],class:"ck-table-form__dimensions-row"}),new Dg(t,{children:[this.paddingInput],class:"ck-table-cell-properties-form__padding-row"})]})),this.children.add(new Dg(t,{labelView:m,children:[m,h,g],class:"ck-table-cell-properties-form__alignment-row"})),this.children.add(new Dg(t,{children:[this.saveButtonView,this.cancelButtonView],class:"ck-table-form__action-row"})),this.setTemplate({tag:"form",attributes:{class:["ck","ck-form","ck-table-form","ck-table-cell-properties-form"],tabindex:"-1"},children:this.children})}render(){super.render(),Eu({view:this}),[this.borderColorInput,this.backgroundInput].forEach(t=>{this._focusCycler.chain(t.fieldView.focusCycler)}),[this.borderStyleDropdown,this.borderColorInput,this.borderWidthInput,this.backgroundInput,this.widthInput,this.heightInput,this.paddingInput,this.horizontalAlignmentToolbar,this.verticalAlignmentToolbar,this.saveButtonView,this.cancelButtonView].forEach(t=>{this._focusables.add(t),this.focusTracker.add(t.element)}),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){this._focusCycler.focusFirst()}_createBorderFields(){const t=this.options.defaultTableCellProperties,e={style:t.borderStyle,width:t.borderWidth,color:t.borderColor},n=QA({colorConfig:this.options.borderColors,columns:5,defaultColorValue:e.color,colorPickerConfig:this.options.colorPickerConfig}),i=this.locale,o=this.t,r=o("Style"),s=new Tu(i);s.text=o("Border");const a=FA(o),l=new kh(i,Qh);l.set({label:r,class:"ck-table-form__border-style"}),l.fieldView.buttonView.set({ariaLabel:r,ariaLabelledBy:void 0,isOn:!1,withText:!0,tooltip:r}),l.fieldView.buttonView.bind("label").to(this,"borderStyle",t=>a[t||"none"]),l.fieldView.on("execute",t=>{this.borderStyle=t.source._borderStyleValue}),l.bind("isEmpty").to(this,"borderStyle",t=>!t),Hh(l.fieldView,qA(this,e.style),{role:"menu",ariaLabel:r});const c=new kh(i,Kh);c.set({label:o("Width"),class:"ck-table-form__border-width"}),c.fieldView.bind("value").to(this,"borderWidth"),c.bind("isEnabled").to(this,"borderStyle",ZA),c.fieldView.on("input",()=>{this.borderWidth=c.fieldView.element.value});const d=new kh(i,n);return d.set({label:o("Color"),class:"ck-table-form__border-color"}),d.fieldView.bind("value").to(this,"borderColor"),d.bind("isEnabled").to(this,"borderStyle",ZA),d.fieldView.on("input",()=>{this.borderColor=d.fieldView.value}),this.on("change:borderStyle",(t,n,i,o)=>{ZA(i)||(this.borderColor="",this.borderWidth=""),ZA(o)||(this.borderColor=e.color,this.borderWidth=e.width)}),{borderRowLabel:s,borderStyleDropdown:l,borderColorInput:d,borderWidthInput:c}}_createBackgroundFields(){const t=this.locale,e=this.t,n=new Tu(t);n.text=e("Background");const i=QA({colorConfig:this.options.backgroundColors,columns:5,defaultColorValue:this.options.defaultTableCellProperties.backgroundColor,colorPickerConfig:this.options.colorPickerConfig}),o=new kh(t,i);return o.set({label:e("Color"),class:"ck-table-cell-properties-form__background"}),o.fieldView.bind("value").to(this,"backgroundColor"),o.fieldView.on("input",()=>{this.backgroundColor=o.fieldView.value}),{backgroundRowLabel:n,backgroundInput:o}}_createDimensionFields(){const t=this.locale,e=this.t,n=new Tu(t);n.text=e("Dimensions");const i=new kh(t,Kh);i.set({label:e("Width"),class:"ck-table-form__dimensions-row__width"}),i.fieldView.bind("value").to(this,"width"),i.fieldView.on("input",()=>{this.width=i.fieldView.element.value});const o=new ku(t);o.setTemplate({tag:"span",attributes:{class:["ck-table-form__dimension-operator"]},children:[{text:"×"}]});const r=new kh(t,Kh);return r.set({label:e("Height"),class:"ck-table-form__dimensions-row__height"}),r.fieldView.bind("value").to(this,"height"),r.fieldView.on("input",()=>{this.height=r.fieldView.element.value}),{dimensionsLabel:n,widthInput:i,operatorLabel:o,heightInput:r}}_createPaddingField(){const t=this.locale,e=this.t,n=new kh(t,Kh);return n.set({label:e("Padding"),class:"ck-table-cell-properties-form__padding"}),n.fieldView.bind("value").to(this,"padding"),n.fieldView.on("input",()=>{this.padding=n.fieldView.element.value}),n}_createAlignmentFields(){const t=this.locale,e=this.t,n=new Tu(t),i={left:Mc,center:Ic,right:Nc,justify:Pc,top:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="m10.261 7.062 2.88 1.663a.75.75 0 0 1-.75 1.3L10.5 8.933v7.317a.75.75 0 1 1-1.5 0V8.932l-1.89 1.093a.75.75 0 0 1-.75-1.3l2.879-1.663a.75.75 0 0 1 .511-.187.75.75 0 0 1 .511.187M15.25 4a.75.75 0 1 1 0 1.5H4.75a.75.75 0 0 1 0-1.5z"/></svg>',middle:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M9.75 11.875a.75.75 0 0 1 .508.184l2.883 1.666a.75.75 0 0 1-.659 1.344l-.091-.044-1.892-1.093.001 4.318a.75.75 0 1 1-1.5 0v-4.317l-1.89 1.092a.75.75 0 0 1-.75-1.3l2.879-1.663a.75.75 0 0 1 .51-.187zM15.25 9a.75.75 0 1 1 0 1.5H4.75a.75.75 0 1 1 0-1.5zM9.75.375a.75.75 0 0 1 .75.75v4.318l1.89-1.093.092-.045a.75.75 0 0 1 .659 1.344l-2.883 1.667a.75.75 0 0 1-.508.184.75.75 0 0 1-.511-.187L6.359 5.65a.75.75 0 0 1 .75-1.299L9 5.442V1.125a.75.75 0 0 1 .75-.75"/></svg>',bottom:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="m9.239 13.938-2.88-1.663a.75.75 0 0 1 .75-1.3L9 12.067V4.75a.75.75 0 1 1 1.5 0v7.318l1.89-1.093a.75.75 0 0 1 .75 1.3l-2.879 1.663a.75.75 0 0 1-.511.187.75.75 0 0 1-.511-.187M4.25 17a.75.75 0 1 1 0-1.5h10.5a.75.75 0 0 1 0 1.5z"/></svg>'};n.text=e("Table cell text alignment");const o=new Vh(t),r="rtl"===t.contentLanguageDirection;o.set({isCompact:!0,role:"radiogroup",ariaLabel:e("Horizontal text alignment toolbar")}),KA({view:this,icons:i,toolbar:o,labels:this._horizontalAlignmentLabels,propertyName:"horizontalAlignment",nameToValue:t=>{if(r){if("left"===t)return"right";if("right"===t)return"left"}return t},defaultValue:this.options.defaultTableCellProperties.horizontalAlignment});const s=new Vh(t);return s.set({isCompact:!0,role:"radiogroup",ariaLabel:e("Vertical text alignment toolbar")}),KA({view:this,icons:i,toolbar:s,labels:this._verticalAlignmentLabels,propertyName:"verticalAlignment",defaultValue:this.options.defaultTableCellProperties.verticalAlignment}),{horizontalAlignmentToolbar:o,verticalAlignmentToolbar:s,alignmentLabel:n}}_createActionButtons(){const t=this.locale,e=this.t,n=new Lu(t),i=new Lu(t),o=[this.borderWidthInput,this.borderColorInput,this.backgroundInput,this.paddingInput];return n.set({label:e("Save"),icon:Rc,class:"ck-button-save",type:"submit",withText:!0}),n.bind("isEnabled").toMany(o,"errorText",(...t)=>t.every(t=>!t)),i.set({label:e("Cancel"),icon:zc,class:"ck-button-cancel",withText:!0}),i.delegate("execute").to(this,"cancel"),{saveButtonView:n,cancelButtonView:i}}get _horizontalAlignmentLabels(){const t=this.locale,e=this.t,n=e("Align cell text to the left"),i=e("Align cell text to the center"),o=e("Align cell text to the right"),r=e("Justify cell text");return"rtl"===t.uiLanguageDirection?{right:o,center:i,left:n,justify:r}:{left:n,center:i,right:o,justify:r}}get _verticalAlignmentLabels(){const t=this.t;return{top:t("Align cell text to the top"),middle:t("Align cell text to the middle"),bottom:t("Align cell text to the bottom")}}}function ZA(t){return"none"!==t}const XA=(()=>[Xu.defaultPositions.northArrowSouth,Xu.defaultPositions.northArrowSouthWest,Xu.defaultPositions.northArrowSouthEast,Xu.defaultPositions.southArrowNorth,Xu.defaultPositions.southArrowNorthWest,Xu.defaultPositions.southArrowNorthEast,Xu.defaultPositions.viewportStickyNorth])();function tE(t,e){const n=t.plugins.get("ContextualBalloon"),i=t.editing.view.document.selection;let o;"cell"===e?VA(i)&&(o=nE(t)):NA(i)&&(o=eE(t)),o&&n.updatePosition(o)}function eE(t){const e=dx(t.model.document.selection),n=t.editing.mapper.toViewElement(e);return{target:t.editing.view.domConverter.mapViewToDom(n),positions:XA}}function nE(t){const e=t.editing.mapper,n=t.editing.view.domConverter,i=t.model.document.selection;if(i.rangeCount>1)return{target:()=>function(t,e){const n=e.editing.mapper,i=e.editing.view.domConverter,o=Array.from(t).map(t=>{const e=iE(t.start),o=n.toViewElement(e);return new Ie(i.mapViewToDom(o))});return Ie.getBoundingRect(o)}(i.getRanges(),t),positions:XA};const o=iE(i.getFirstPosition()),r=e.toViewElement(o);return{target:n.mapViewToDom(r),positions:XA}}function iE(t){return t.nodeAfter&&t.nodeAfter.is("element","tableCell")?t.nodeAfter:t.findAncestor("tableCell")}function oE(t){if(!t||!x(t))return t;const{top:e,right:n,bottom:i,left:o}=t;return e==n&&n==i&&i==o?e:void 0}function rE(t,e){const n=parseFloat(t);return Number.isNaN(n)||String(n)!==String(t)?t:`${n}${e}`}function sE(t,e={}){const n={borderStyle:"none",borderWidth:"",borderColor:"",backgroundColor:"",width:"",height:"",...t};return e.includeAlignmentProperty&&!n.alignment&&(n.alignment="center"),e.includePaddingProperty&&!n.padding&&(n.padding=""),e.includeVerticalAlignmentProperty&&!n.verticalAlignment&&(n.verticalAlignment="middle"),e.includeHorizontalAlignmentProperty&&!n.horizontalAlignment&&(n.horizontalAlignment=e.isRightToLeftContent?"right":"left"),n}function aE(t,e){return sE({borderStyle:"double",borderColor:"hsl(0, 0%, 70%)",borderWidth:"1px",...t},e)}function lE(t,e){return sE({borderStyle:"solid",borderColor:"hsl(0, 0%, 75%)",borderWidth:"1px",...t},e)}const cE={borderStyle:"tableCellBorderStyle",borderColor:"tableCellBorderColor",borderWidth:"tableCellBorderWidth",height:"tableCellHeight",width:"tableCellWidth",padding:"tableCellPadding",backgroundColor:"tableCellBackgroundColor",horizontalAlignment:"tableCellHorizontalAlignment",verticalAlignment:"tableCellVerticalAlignment"};class dE extends nc{_defaultContentTableCellProperties;_defaultLayoutTableCellProperties;_balloon;view;_viewWithContentTableDefaults;_viewWithLayoutTableDefaults;_undoStepBatch;_isReady;static get requires(){return[Hg]}static get pluginName(){return"TableCellPropertiesUI"}static get isOfficialPlugin(){return!0}constructor(t){super(t),t.config.define("table.tableCellProperties",{borderColors:GA,backgroundColors:GA})}init(){const t=this.editor,e=t.t;this._defaultContentTableCellProperties=lE(t.config.get("table.tableCellProperties.defaultProperties"),{includeVerticalAlignmentProperty:!0,includeHorizontalAlignmentProperty:!0,includePaddingProperty:!0,isRightToLeftContent:"rtl"===t.locale.contentLanguageDirection}),this._defaultLayoutTableCellProperties=sE(void 0,{includeVerticalAlignmentProperty:!0,includeHorizontalAlignmentProperty:!0,isRightToLeftContent:"rtl"===t.locale.contentLanguageDirection}),this._balloon=t.plugins.get(Hg),this.view=null,this._isReady=!1,t.ui.componentFactory.add("tableCellProperties",n=>{const i=new Lu(n);i.set({label:e("Cell properties"),icon:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="m11.105 18-.17 1H2.5A1.5 1.5 0 0 1 1 17.5v-15A1.5 1.5 0 0 1 2.5 1h15A1.5 1.5 0 0 1 19 2.5v9.975l-.85-.124-.15-.302V8h-5v4h.021l-.172.351-1.916.28-.151.027c-.287.063-.54.182-.755.341L8 13v5zM2 12h5V8H2zm10-4H8v4h4zM2 2v5h5V2zm0 16h5v-5H2zM13 7h5V2h-5zM8 2v5h4V2z" opacity=".6"/><path d="m15.5 11.5 1.323 2.68 2.957.43-2.14 2.085.505 2.946L15.5 18.25l-2.645 1.39.505-2.945-2.14-2.086 2.957-.43zM13 6a1 1 0 0 1 1 1v3.172a2 2 0 0 0-.293.443l-.858 1.736-1.916.28-.151.027A1.98 1.98 0 0 0 9.315 14H7a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1zm-1 2H8v4h4z"/></svg>',tooltip:!0}),this.listenTo(i,"execute",()=>this._showView());const o=Object.values(cE).map(e=>t.commands.get(e));return i.bind("isEnabled").toMany(o,"isEnabled",(...t)=>t.some(t=>t)),i})}destroy(){super.destroy(),this.view&&this.view.destroy()}_createPropertiesView(t){const e=this.editor,n=e.config.get("table.tableCellProperties"),i=hh(n.borderColors),o=uh(e.locale,i),r=hh(n.backgroundColors),s=uh(e.locale,r),a=!1!==n.colorPicker,l=new JA(e.locale,{borderColors:o,backgroundColors:s,defaultTableCellProperties:t,colorPickerConfig:!!a&&(n.colorPicker||{})}),c=e.t;l.render(),this.listenTo(l,"submit",()=>{this._hideView()}),this.listenTo(l,"cancel",()=>{this._undoStepBatch.operations.length&&e.execute("undo",this._undoStepBatch),this._hideView()}),l.keystrokes.set("Esc",(t,e)=>{this._hideView(),e()}),Cu({emitter:l,activator:()=>this._isViewInBalloon,contextElements:[this._balloon.view.element],callback:()=>this._hideView()});const d=jA(c),u=HA(c);return l.on("change:borderStyle",this._getPropertyChangeCallback("tableCellBorderStyle")),l.on("change:borderColor",this._getValidatedPropertyChangeCallback({viewField:l.borderColorInput,commandName:"tableCellBorderColor",errorText:d,validator:UA})),l.on("change:borderWidth",this._getValidatedPropertyChangeCallback({viewField:l.borderWidthInput,commandName:"tableCellBorderWidth",errorText:u,validator:WA})),l.on("change:padding",this._getValidatedPropertyChangeCallback({viewField:l.paddingInput,commandName:"tableCellPadding",errorText:u,validator:$A})),l.on("change:width",this._getValidatedPropertyChangeCallback({viewField:l.widthInput,commandName:"tableCellWidth",errorText:u,validator:$A})),l.on("change:height",this._getValidatedPropertyChangeCallback({viewField:l.heightInput,commandName:"tableCellHeight",errorText:u,validator:$A})),l.on("change:backgroundColor",this._getValidatedPropertyChangeCallback({viewField:l.backgroundInput,commandName:"tableCellBackgroundColor",errorText:d,validator:UA})),l.on("change:horizontalAlignment",this._getPropertyChangeCallback("tableCellHorizontalAlignment")),l.on("change:verticalAlignment",this._getPropertyChangeCallback("tableCellVerticalAlignment")),l}_fillViewFormFromCommandValues(){const t=this.editor.commands,e=t.get("tableCellBorderStyle");Object.entries(cE).map(([e,n])=>{const i=e,o=this.view===this._viewWithContentTableDefaults?this._defaultContentTableCellProperties[i]||"":this._defaultLayoutTableCellProperties[i]||"";return[e,t.get(n).value||o]}).forEach(([t,n])=>{("borderColor"!==t&&"borderWidth"!==t||"none"!==e.value)&&this.view.set(t,n)}),this._isReady=!0}_showView(){const t=this.editor,e=NA(t.editing.view.document.selection),n=e&&t.editing.mapper.toModelElement(e),i=!n||"layout"!==n.getAttribute("tableType");i&&!this._viewWithContentTableDefaults?this._viewWithContentTableDefaults=this._createPropertiesView(this._defaultContentTableCellProperties):i||this._viewWithLayoutTableDefaults||(this._viewWithLayoutTableDefaults=this._createPropertiesView(this._defaultLayoutTableCellProperties)),this.view=i?this._viewWithContentTableDefaults:this._viewWithLayoutTableDefaults,this.listenTo(t.ui,"update",()=>{this._updateView()}),this._fillViewFormFromCommandValues(),this._balloon.add({view:this.view,position:nE(t)}),this._undoStepBatch=t.model.createBatch(),this.view.focus()}_hideView(){const t=this.editor;this.stopListening(t.ui,"update"),this._isReady=!1,this.view.saveButtonView.focus(),this._balloon.remove(this.view),this.editor.editing.view.focus()}_updateView(){const t=this.editor;VA(t.editing.view.document.selection)?this._isViewVisible&&tE(t,"cell"):this._hideView()}get _isViewVisible(){return!!this.view&&this._balloon.visibleView===this.view}get _isViewInBalloon(){return!!this.view&&this._balloon.hasView(this.view)}_getPropertyChangeCallback(t){return(e,n,i)=>{this._isReady&&this.editor.execute(t,{value:i,batch:this._undoStepBatch})}}_getValidatedPropertyChangeCallback(t){const{commandName:e,viewField:n,validator:i,errorText:o}=t,r=ti(()=>{n.errorText=o},500);return(t,o,s)=>{r.cancel(),this._isReady&&(i(s)?(this.editor.execute(e,{value:s,batch:this._undoStepBatch}),n.errorText=null):r())}}}class uE extends oc{attributeName;_defaultValue;_defaultContentTableValue;_defaultLayoutTableValue;constructor(t,e,n){switch(super(t),this.attributeName=e,this._defaultContentTableValue=n,e){case"tableCellBorderStyle":this._defaultLayoutTableValue="none";break;case"tableCellHorizontalAlignment":this._defaultLayoutTableValue="left";break;case"tableCellVerticalAlignment":this._defaultLayoutTableValue="middle";break;default:this._defaultLayoutTableValue=void 0}}refresh(){const t=this.editor.model.document.selection,e=this.editor.plugins.get("TableUtils").getSelectionAffectedTableCells(t),n=dx(t);this._defaultValue=n&&"layout"===n.getAttribute("tableType")?this._defaultLayoutTableValue:this._defaultContentTableValue,this.isEnabled=!!e.length,this.value=this._getSingleValue(e)}execute(t={}){const{value:e,batch:n}=t,i=this.editor.model,o=this.editor.plugins.get("TableUtils").getSelectionAffectedTableCells(i.document.selection),r=this._getValueToSet(e);i.enqueueChange(n,t=>{r?o.forEach(e=>t.setAttribute(this.attributeName,r,e)):o.forEach(e=>t.removeAttribute(this.attributeName,e))})}_getAttribute(t){if(!t)return;const e=t.getAttribute(this.attributeName);return e!==this._defaultValue?e:void 0}_getValueToSet(t){if(t!==this._defaultValue)return t}_getSingleValue(t){const e=this._getAttribute(t[0]);return t.every(t=>this._getAttribute(t)===e)?e:void 0}}class hE extends uE{constructor(t,e){super(t,"tableCellWidth",e)}_getValueToSet(t){if((t=rE(t,"px"))!==this._defaultValue)return t}}class gE extends nc{static get pluginName(){return"TableCellWidthEditing"}static get isOfficialPlugin(){return!0}static get requires(){return[bA]}init(){const t=this.editor,e=lE(t.config.get("table.tableCellProperties.defaultProperties"));cx(t.model.schema,t.conversion,{modelAttribute:"tableCellWidth",styleName:"width",attributeName:"width",attributeType:"length",defaultValue:e.width}),t.commands.add("tableCellWidth",new hE(t,e.width))}}class mE extends uE{constructor(t,e){super(t,"tableCellPadding",e)}_getAttribute(t){if(!t)return;const e=oE(t.getAttribute(this.attributeName));return e!==this._defaultValue?e:void 0}_getValueToSet(t){const e=rE(t,"px");if(e!==this._defaultValue)return e}}class pE extends uE{constructor(t,e){super(t,"tableCellHeight",e)}_getValueToSet(t){const e=rE(t,"px");if(e!==this._defaultValue)return e}}class fE extends uE{constructor(t,e){super(t,"tableCellBackgroundColor",e)}}class bE extends uE{constructor(t,e){super(t,"tableCellVerticalAlignment",e)}}class kE extends uE{constructor(t,e){super(t,"tableCellHorizontalAlignment",e)}}class wE extends uE{constructor(t,e){super(t,"tableCellBorderStyle",e)}_getAttribute(t){if(!t)return;const e=oE(t.getAttribute(this.attributeName));return e!==this._defaultValue?e:void 0}}class _E extends uE{constructor(t,e){super(t,"tableCellBorderColor",e)}_getAttribute(t){if(!t)return;const e=oE(t.getAttribute(this.attributeName));return e!==this._defaultValue?e:void 0}}class vE extends uE{constructor(t,e){super(t,"tableCellBorderWidth",e)}_getAttribute(t){if(!t)return;const e=oE(t.getAttribute(this.attributeName));return e!==this._defaultValue?e:void 0}_getValueToSet(t){const e=rE(t,"px");if(e!==this._defaultValue)return e}}const yE=/^(top|middle|bottom)$/,CE=/^(left|center|right|justify)$/;class xE extends nc{static get pluginName(){return"TableCellPropertiesEditing"}static get isOfficialPlugin(){return!0}static get requires(){return[bA,gE]}init(){const t=this.editor,e=t.model.schema,n=t.conversion;t.config.define("table.tableCellProperties.defaultProperties",{});const i=lE(t.config.get("table.tableCellProperties.defaultProperties"),{includeVerticalAlignmentProperty:!0,includeHorizontalAlignmentProperty:!0,includePaddingProperty:!0,isRightToLeftContent:"rtl"===t.locale.contentLanguageDirection});t.data.addStyleProcessorRules(Ll),function(t,e,n){const i={width:"tableCellBorderWidth",color:"tableCellBorderColor",style:"tableCellBorderStyle"};t.extend("tableCell",{allowAttributes:Object.values(i)});for(const e of Object.values(i))t.setAttributeProperties(e,{isFormatting:!0});ex(e,"td",i,n),ex(e,"th",i,n),nx(e,{modelElement:"tableCell",modelAttribute:i.style,styleName:"border-style"}),nx(e,{modelElement:"tableCell",modelAttribute:i.color,styleName:"border-color"}),nx(e,{modelElement:"tableCell",modelAttribute:i.width,styleName:"border-width"})}(e,n,{color:i.borderColor,style:i.borderStyle,width:i.borderWidth}),t.commands.add("tableCellBorderStyle",new wE(t,i.borderStyle)),t.commands.add("tableCellBorderColor",new _E(t,i.borderColor)),t.commands.add("tableCellBorderWidth",new vE(t,i.borderWidth)),cx(e,n,{modelAttribute:"tableCellHeight",styleName:"height",attributeName:"height",attributeType:"length",defaultValue:i.height}),t.commands.add("tableCellHeight",new pE(t,i.height)),t.data.addStyleProcessorRules($l),cx(e,n,{modelAttribute:"tableCellPadding",styleName:"padding",reduceBoxSides:!0,defaultValue:i.padding}),t.commands.add("tableCellPadding",new mE(t,i.padding)),t.data.addStyleProcessorRules(Nl),cx(e,n,{modelAttribute:"tableCellBackgroundColor",styleName:"background-color",attributeName:"bgcolor",attributeType:"color",defaultValue:i.backgroundColor}),t.commands.add("tableCellBackgroundColor",new fE(t,i.backgroundColor)),function(t,e,n){t.extend("tableCell",{allowAttributes:["tableCellHorizontalAlignment"]}),t.setAttributeProperties("tableCellHorizontalAlignment",{isFormatting:!0}),e.for("downcast").attributeToAttribute({model:{name:"tableCell",key:"tableCellHorizontalAlignment"},view:t=>({key:"style",value:{"text-align":t}})}),e.for("upcast").attributeToAttribute({view:{name:/^(td|th)$/,styles:{"text-align":CE}},model:{key:"tableCellHorizontalAlignment",value:(t,e,i)=>{const o=ox(n,"left",i),r=t.getStyle("text-align");if(r!==o)return r;e.consumable.consume(t,{styles:"text-align"})}}}).attributeToAttribute({view:{name:/^(td|th)$/,attributes:{align:CE}},model:{key:"tableCellHorizontalAlignment",value:(t,e,i)=>{const o=ox(n,"left",i),r=t.getAttribute("align");if(r!==o)return r;e.consumable.consume(t,{attributes:"align"})}}})}(e,n,i.horizontalAlignment),t.commands.add("tableCellHorizontalAlignment",new kE(t,i.horizontalAlignment)),function(t,e,n){t.extend("tableCell",{allowAttributes:["tableCellVerticalAlignment"]}),t.setAttributeProperties("tableCellVerticalAlignment",{isFormatting:!0}),e.for("downcast").attributeToAttribute({model:{name:"tableCell",key:"tableCellVerticalAlignment"},view:t=>({key:"style",value:{"vertical-align":t}})}),e.for("upcast").attributeToAttribute({view:{name:/^(td|th)$/,styles:{"vertical-align":yE}},model:{key:"tableCellVerticalAlignment",value:(t,e,i)=>{const o=ox(n,"middle",i),r=t.getStyle("vertical-align");if(r!==o)return r;e.consumable.consume(t,{styles:"vertical-align"})}}}).attributeToAttribute({view:{name:/^(td|th)$/,attributes:{valign:yE}},model:{key:"tableCellVerticalAlignment",value:(t,e,i)=>{const o=ox(n,"middle",i),r=t.getAttribute("valign");if(r!==o)return r;e.consumable.consume(t,{attributes:"valign"})}}})}(e,n,i.verticalAlignment),t.commands.add("tableCellVerticalAlignment",new bE(t,i.verticalAlignment))}}class AE extends nc{static get pluginName(){return"TableCellProperties"}static get isOfficialPlugin(){return!0}static get requires(){return[xE,dE]}}class EE extends oc{refresh(){this.isEnabled=!0}execute(t={}){const{model:e,plugins:n}=this.editor;let{table:i=e.document.selection.getSelectedElement(),columnWidths:o,tableWidth:r}=t;o&&(o=Array.isArray(o)?o:o.split(",")),e.change(t=>{r?t.setAttribute("tableWidth",r,i):t.removeAttribute("tableWidth",i);const e=n.get("TableColumnResizeEditing").getColumnGroupElement(i);if(!o&&!e)return;if(!o)return t.remove(e);const s=Kx(o);if(e)Array.from(e.getChildren()).forEach((e,n)=>t.setAttribute("columnWidth",s[n],e));else{const e=t.createElement("tableColumnGroup");s.forEach(n=>t.appendElement("tableColumn",{columnWidth:n},e)),t.append(e,i)}})}}const SE=Re("px");class TE extends nc{_isResizingActive;_resizingData;_domEmitter;_tableUtilsPlugin;_initialMouseEventData=null;static get requires(){return[bA,Zx]}static get pluginName(){return"TableColumnResizeEditing"}static get isOfficialPlugin(){return!0}constructor(t){super(t),this._isResizingActive=!1,this.set("_isResizingAllowed",!0),this._resizingData=null,this._domEmitter=new(_e()),this._tableUtilsPlugin=t.plugins.get("TableUtils"),this.on("change:_isResizingAllowed",(e,n,i)=>{const o=i?"removeClass":"addClass";t.editing.view.change(e=>{for(const n of t.editing.view.document.roots)e[o]("ck-column-resize_disabled",t.editing.view.document.getRoot(n.rootName))})})}init(){this._extendSchema(),this._registerPostFixer(),this._registerConverters(),this._registerResizingListeners(),this._registerResizerInserter();const t=this.editor,e=t.plugins.get("TableColumnResize");t.plugins.get("TableEditing").registerAdditionalSlot({filter:t=>t.is("element","tableColumnGroup"),positionOffset:0});const n=new EE(t);t.commands.add("resizeTableWidth",n),t.commands.add("resizeColumnWidths",n),this.bind("_isResizingAllowed").to(t,"isReadOnly",e,"isEnabled",n,"isEnabled",(t,e,n)=>!t&&e&&n)}destroy(){this._domEmitter.stopListening(),super.destroy()}getColumnGroupElement(t){return Yx(t)}getTableColumnElements(t){return Jx(t)}getTableColumnsWidths(t){return function(t){return Jx(t).map(t=>t.getAttribute("columnWidth"))}(t)}_extendSchema(){const t=this.editor.model.schema;t.extend("table",{allowAttributes:["tableWidth"]}),t.register("tableColumnGroup",{allowIn:"table",isLimit:!0}),t.register("tableColumn",{allowIn:"tableColumnGroup",allowAttributes:["columnWidth","colSpan"],isLimit:!0}),t.setAttributeProperties("columnWidth",{isFormatting:!0})}_registerPostFixer(){const t=this.editor.model;function e(t,e,n){const i=n._tableUtilsPlugin.getColumns(e);if(0===i-t.length)return t;const o=t.map(t=>Number(t.replace("%",""))),r=function(t,e){const n=new Set;for(const i of t.getChanges())if("insert"==i.type&&i.position.nodeAfter&&"tableCell"==i.position.nodeAfter.name&&i.position.nodeAfter.getAncestors().includes(e))n.add(i.position.nodeAfter);else if("remove"==i.type){const t=i.position.nodeBefore||i.position.nodeAfter;"tableCell"==t.name&&t.getAncestors().includes(e)&&n.add(t)}return n}(n.editor.model.document.differ,e);for(const t of r){const r=i-o.length;if(0===r)continue;const s=r>0,a=n._tableUtilsPlugin.getCellLocation(t).column;if(s){const t=Wx(r,Fx(e,n.editor));o.splice(a,0,...t)}else{const t=o.splice(a,Math.abs(r));o[a]+=qx(t)}}return o.map(t=>t+"%")}t.document.registerPostFixer(n=>{let i=!1;for(const o of function(t){const e=new Set;for(const n of t.document.differ.getChanges()){let i=null;switch(n.type){case"insert":i=["table","tableRow","tableCell"].includes(n.name)?n.position:null;break;case"remove":i=["tableRow","tableCell"].includes(n.name)?n.position:null;break;case"attribute":n.range.start.nodeAfter&&(i=["table","tableRow","tableCell"].includes(n.range.start.nodeAfter.name)?n.range.start:null)}if(!i)continue;const o=i.nodeAfter&&i.nodeAfter.is("element","table")?i.nodeAfter:i.findAncestor("table");for(const n of t.createRangeOn(o).getItems())n.is("element","table")&&Yx(n)&&e.add(n)}return e}(t)){const t=this.getColumnGroupElement(o),r=this.getTableColumnElements(t),s=this.getTableColumnsWidths(t);let a=Kx(s);a=e(a,o,this),si(s,a)||(Qx(r,t,a,n),i=!0)}return i})}_registerConverters(){const t=this.editor.conversion;var e;t.for("upcast").attributeToAttribute({view:{name:/^(figure|table)$/,styles:{width:/[\s\S]+/}},model:{key:"tableWidth",value:t=>{if(!t.parent.is("element","figure"))return t.getStyle("width")}}}),t.for("downcast").attributeToAttribute({model:{name:"table",key:"tableWidth"},view:t=>({name:"figure",key:"style",value:{width:t}})}),t.elementToElement({model:"tableColumnGroup",view:"colgroup"}),t.elementToElement({model:"tableColumn",view:"col"}),t.for("downcast").add(t=>t.on("insert:table",(t,e,n)=>{const i=n.writer,o=e.item,r=n.mapper.toViewElement(o),s=r.is("element","table")?r:Array.from(r.getChildren()).find(t=>t.is("element","table"));Yx(o)?i.addClass("ck-table-resized",s):i.removeClass("ck-table-resized",s)},{priority:"low"})),t.for("upcast").add(t=>{t.on("element:table",(t,e,n)=>{n.consumable.consume(e.viewItem,{classes:"ck-table-resized"})})}),t.for("upcast").add((e=this._tableUtilsPlugin,t=>t.on("element:colgroup",(t,n,i)=>{const o=n.modelCursor.findAncestor("table"),r=Yx(o);if(!r)return;const s=Jx(r),a=e.getColumns(o);let l=(c=r,d=i.writer,Jx(c).reduce((t,e)=>{const n=e.getAttribute("columnWidth"),i=e.getAttribute("colSpan");if(!i)return t.push(n),t;for(let e=0;e<i;e++)t.push(n);return d.removeAttribute("colSpan",e),t},[]));var c,d;l=Array.from({length:a},(t,e)=>l[e]||"auto"),(l.length!=s.length||l.includes("auto"))&&Qx(s,r,Kx(l),i.writer)},{priority:"low"}))),t.for("upcast").attributeToAttribute({view:{name:"col",styles:{width:/.*/}},model:{key:"columnWidth",value:t=>{const e=t.getStyle("width");return e&&(e.endsWith("%")||e.endsWith("pt"))?e:"auto"}}}),t.for("upcast").attributeToAttribute({view:{name:"col",key:"span"},model:"colSpan"}),t.for("downcast").attributeToAttribute({model:{name:"tableColumn",key:"columnWidth"},view:t=>({key:"style",value:{width:t}})})}_registerResizingListeners(){const t=this.editor.editing.view;t.addObserver(TA),t.document.on("mouseover",this._onMouseOverHandler.bind(this),{priority:"high"}),t.document.on("mousedown",this._onMouseDownHandler.bind(this),{priority:"high"}),t.document.on("mouseout",this._onMouseOutHandler.bind(this),{priority:"high"}),this._domEmitter.listenTo(gt.window.document,"mousemove",Wl(this._onMouseMoveHandler.bind(this),50)),this._domEmitter.listenTo(gt.window.document,"mouseup",this._onMouseUpHandler.bind(this))}_recalculateResizerElement(t){const e=this.editor,n=e.editing.view.domConverter,i=n.mapViewToDom(t.findAncestor("table")),o=n.mapViewToDom(t.findAncestor(t=>["td","th"].includes(t.name))),r=new Ie(i),s=new Ie(o),a=SE(Number((r.top-s.top).toFixed(4))),l=SE(Number((s.bottom-r.bottom).toFixed(4)));e.editing.view.change(e=>{e.setStyle("top",a,t),e.setStyle("bottom",l,t)})}_resetResizerStyles(t){this.editor.editing.view.change(e=>{e.removeStyle("top",t),e.removeStyle("bottom",t)})}_onMouseOverHandler(t,e){const n=e.target;n.hasClass("ck-table-column-resizer")&&this._isResizingAllowed&&this._recalculateResizerElement(n)}_onMouseOutHandler(t,e){const n=e.target;n.hasClass("ck-table-column-resizer")&&this._isResizingAllowed&&(this._isResizingActive||this._resetResizerStyles(n))}_onMouseDownHandler(t,e){const n=e.target;if(!n.hasClass("ck-table-column-resizer"))return;if(!this._isResizingAllowed)return;const i=this.editor,o=i.editing.mapper.toModelElement(n.findAncestor("figure"));i.model.canEditAt(o)&&(e.preventDefault(),t.stop(),this._initialMouseEventData=e)}_startResizingAfterThreshold(){const t=this._initialMouseEventData,{target:e}=t,n=this.editor.editing.mapper.toModelElement(e.findAncestor("figure")),i=e.findAncestor("table"),o=function(t,e,n){const i=Array(e.getColumns(t)),o=new gx(t);for(const t of o){const e=n.editing.mapper.toViewElement(t.cell),o=Gx(n.editing.view.domConverter.mapViewToDom(e));(!i[t.column]||o<i[t.column])&&(i[t.column]=$x(o))}return i}(n,this._tableUtilsPlugin,this.editor);Array.from(i.getChildren()).find(t=>t.is("element","colgroup"))||this.editor.editing.view.change(t=>{!function(t,e,n){const i=t.createContainerElement("colgroup");for(let n=0;n<e.length;n++){const o=t.createEmptyElement("col"),r=`${$x(e[n]/qx(e)*100)}%`;t.setStyle("width",r,o),t.insert(t.createPositionAt(i,"end"),o)}t.insert(t.createPositionAt(n,0),i)}(t,o,i)}),this._isResizingActive=!0,this._resizingData=this._getResizingData(t,o),this.editor.editing.view.change(t=>function(t,e,n){const i=n.widths.viewFigureWidth/n.widths.viewFigureParentWidth;t.addClass("ck-table-resized",e),t.addClass("ck-table-column-resizer__active",n.elements.viewResizer),t.setStyle("width",`${$x(100*i)}%`,e.findAncestor("figure"))}(t,i,this._resizingData))}_onMouseMoveHandler(t,e){if(this._initialMouseEventData){const t=this._initialMouseEventData.domEvent;if(!(Math.abs(e.clientX-t.clientX)>=3))return;this._startResizingAfterThreshold(),this._initialMouseEventData=null}if(!this._isResizingActive)return;if(!this._isResizingAllowed)return void this._onMouseUpHandler();const{columnPosition:n,flags:{isRightEdge:i,isTableCentered:o,isLtrContent:r},elements:{viewFigure:s,viewLeftColumn:a,viewRightColumn:l,viewResizer:c},widths:{viewFigureParentWidth:d,tableWidth:u,leftColumnWidth:h,rightColumnWidth:g}}=this._resizingData,m=40-h,p=i?d-u:g-40,f=(r?1:-1)*(i&&o?2:1),b=(k=(e.clientX-n)*f,w=Math.min(m,0),_=Math.max(p,0),$x(k<=w?w:k>=_?_:k));var k,w,_;0!==b&&(this.editor.editing.view.change(t=>{const e=$x(100*(h+b)/u);if(t.setStyle("width",`${e}%`,a),i){const e=$x(100*(u+b)/d);t.setStyle("width",`${e}%`,s)}else{const e=$x(100*(g-b)/u);t.setStyle("width",`${e}%`,l)}}),this._recalculateResizerElement(c))}_onMouseUpHandler(){if(this._initialMouseEventData=null,!this._isResizingActive)return;const{viewResizer:t,modelTable:e,viewFigure:n,viewColgroup:i}=this._resizingData.elements,o=this.editor,r=o.editing.view,s=this.getColumnGroupElement(e),a=Array.from(i.getChildren()).filter(t=>t.is("view:element")),l=s?this.getTableColumnsWidths(s):null,c=a.map(t=>t.getStyle("width")),d=!si(l,c),u=e.getAttribute("tableWidth"),h=n.getStyle("width"),g=u!==h;(d||g)&&(this._isResizingAllowed?o.execute("resizeTableWidth",{table:e,tableWidth:`${$x(h)}%`,columnWidths:c}):r.change(t=>{if(l)for(const e of a)t.setStyle("width",l.shift(),e);else t.remove(i);g&&(u?t.setStyle("width",u,n):t.removeStyle("width",n)),l||u||t.removeClass("ck-table-resized",[...n.getChildren()].find(t=>"table"===t.name))})),r.change(e=>{e.removeClass("ck-table-column-resizer__active",t)}),r.domConverter.mapViewToDom(t).matches(":hover")||this._resetResizerStyles(t),this._isResizingActive=!1,this._resizingData=null}_getResizingData(t,e){const n=this.editor,i=t.domEvent.clientX,o=t.target,r=o.findAncestor("td")||o.findAncestor("th"),s=n.editing.mapper.toModelElement(r),a=s.findAncestor("table"),l=function(t,e){const n=e.getCellLocation(t).column;return{leftEdge:n,rightEdge:n+(t.getAttribute("colspan")||1)-1}}(s,this._tableUtilsPlugin).rightEdge,c=l===this._tableUtilsPlugin.getColumns(a)-1,d=!a.hasAttribute("tableAlignment"),u="rtl"!==n.locale.contentLanguageDirection,h=r.findAncestor("table"),g=h.findAncestor("figure"),m=[...h.getChildren()].find(t=>t.is("element","colgroup")),p=m.getChild(l),f=c?void 0:m.getChild(l+1);return{columnPosition:i,flags:{isRightEdge:c,isTableCentered:d,isLtrContent:u},elements:{viewResizer:o,modelTable:a,viewFigure:g,viewColgroup:m,viewLeftColumn:p,viewRightColumn:f},widths:{viewFigureParentWidth:Ux(n.editing.view.domConverter.mapViewToDom(g.parent)),viewFigureWidth:Ux(n.editing.view.domConverter.mapViewToDom(g)),tableWidth:jx(a,n),leftColumnWidth:e[l],rightColumnWidth:c?void 0:e[l+1]}}}_registerResizerInserter(){this.editor.conversion.for("editingDowncast").add(t=>{t.on("insert:tableCell",(t,e,n)=>{const i=e.item,o=n.mapper.toViewElement(i),r=n.writer;r.insert(r.createPositionAt(o,"end"),r.createUIElement("div",{class:"ck-table-column-resizer"}))},{priority:"lowest"})})}}class IE extends nc{static get requires(){return[TE,gE]}static get pluginName(){return"TableColumnResize"}static get isOfficialPlugin(){return!0}}class PE extends oc{attributeName;_defaultValue;_defaultContentTableValue;_defaultLayoutTableValue;constructor(t,e,n){super(t),this.attributeName=e,this._defaultContentTableValue=n,this._defaultLayoutTableValue="tableBorderStyle"===e?"none":void 0}refresh(){const t=dx(this.editor.model.document.selection);this._defaultValue=t&&"layout"===t.getAttribute("tableType")?this._defaultLayoutTableValue:this._defaultContentTableValue,this.isEnabled=!!t,this.value=this._getValue(t)}execute(t={}){const e=this.editor.model,n=e.document.selection,{value:i,batch:o}=t,r=dx(n),s=this._getValueToSet(i);e.enqueueChange(o,t=>{s?t.setAttribute(this.attributeName,s,r):t.removeAttribute(this.attributeName,r)})}_getValue(t){if(!t)return;const e=t.getAttribute(this.attributeName);return e!==this._defaultValue?e:void 0}_getValueToSet(t){if(t!==this._defaultValue)return t}}class ME extends PE{constructor(t,e){super(t,"tableBackgroundColor",e)}}class NE extends PE{constructor(t,e){super(t,"tableBorderColor",e)}_getValue(t){if(!t)return;const e=oE(t.getAttribute(this.attributeName));return e!==this._defaultValue?e:void 0}}class LE extends PE{constructor(t,e){super(t,"tableBorderStyle",e)}_getValue(t){if(!t)return;const e=oE(t.getAttribute(this.attributeName));return e!==this._defaultValue?e:void 0}}class VE extends PE{constructor(t,e){super(t,"tableBorderWidth",e)}_getValue(t){if(!t)return;const e=oE(t.getAttribute(this.attributeName));return e!==this._defaultValue?e:void 0}_getValueToSet(t){const e=rE(t,"px");if(e!==this._defaultValue)return e}}class zE extends PE{constructor(t,e){super(t,"tableWidth",e)}_getValueToSet(t){if((t=rE(t,"px"))!==this._defaultValue)return t}}class OE extends PE{constructor(t,e){super(t,"tableHeight",e)}_getValueToSet(t){if((t=rE(t,"px"))!==this._defaultValue)return t}}class RE extends PE{constructor(t,e){super(t,"tableAlignment",e)}}const DE=/^(left|center|right)$/,BE=/^(left|none|right)$/;class FE extends nc{static get pluginName(){return"TablePropertiesEditing"}static get isOfficialPlugin(){return!0}static get requires(){return[bA]}init(){const t=this.editor,e=t.model.schema,n=t.conversion;t.config.define("table.tableProperties.defaultProperties",{});const i=aE(t.config.get("table.tableProperties.defaultProperties"),{includeAlignmentProperty:!0});t.data.addStyleProcessorRules(Ll),function(t,e,n){const i={width:"tableBorderWidth",color:"tableBorderColor",style:"tableBorderStyle"};t.extend("table",{allowAttributes:Object.values(i)});for(const e of Object.values(i))t.setAttributeProperties(e,{isFormatting:!0});ex(e,"table",i,n),ix(e,{modelAttribute:i.color,styleName:"border-color"}),ix(e,{modelAttribute:i.style,styleName:"border-style"}),ix(e,{modelAttribute:i.width,styleName:"border-width"})}(e,n,{color:i.borderColor,style:i.borderStyle,width:i.borderWidth}),t.commands.add("tableBorderColor",new NE(t,i.borderColor)),t.commands.add("tableBorderStyle",new LE(t,i.borderStyle)),t.commands.add("tableBorderWidth",new VE(t,i.borderWidth)),function(t,e,n){t.extend("table",{allowAttributes:["tableAlignment"]}),t.setAttributeProperties("tableAlignment",{isFormatting:!0}),e.for("downcast").attributeToAttribute({model:{name:"table",key:"tableAlignment",values:["left","center","right"]},view:{left:{key:"style",value:{float:"left"}},right:{key:"style",value:{float:"right"}},center:(t,e,n)=>({key:"style",value:"layout"!==n.item.getAttribute("tableType")?{float:"none"}:{"margin-left":"auto","margin-right":"auto"}})},converterPriority:"high"}),e.for("upcast").attributeToAttribute({view:{name:/^(table|figure)$/,styles:{float:BE}},model:{key:"tableAlignment",value:(t,e,i)=>{if("figure"==t.name&&!t.hasClass("table"))return;const o=ox(n,"",i);let r=t.getStyle("float");if("none"===r&&(r="center"),r!==o)return r;e.consumable.consume(t,{styles:"float"})}}}).attributeToAttribute({view:{name:/^(table|figure)$/,styles:{"margin-left":"auto","margin-right":"auto"}},model:{key:"tableAlignment",value:(t,e,i)=>{if("figure"==t.name&&!t.hasClass("table"))return;const o="center";if(o!==ox(n,"",i))return o;e.consumable.consume(t,{styles:["margin-left","margin-right"]})}}}).attributeToAttribute({view:{name:"table",attributes:{align:DE}},model:{key:"tableAlignment",value:(t,e,i)=>{const o=ox(n,"",i),r=t.getAttribute("align");if(r!==o)return r;e.consumable.consume(t,{attributes:"align"})}}})}(e,n,i.alignment),t.commands.add("tableAlignment",new RE(t,i.alignment)),jE(e,n,{modelAttribute:"tableWidth",styleName:"width",attributeName:"width",attributeType:"length",defaultValue:i.width}),t.commands.add("tableWidth",new zE(t,i.width)),jE(e,n,{modelAttribute:"tableHeight",styleName:"height",attributeName:"height",attributeType:"length",defaultValue:i.height}),t.commands.add("tableHeight",new OE(t,i.height)),t.data.addStyleProcessorRules(Nl),function(t,e,n){const{modelAttribute:i}=n;t.extend("table",{allowAttributes:[i]}),t.setAttributeProperties(i,{isFormatting:!0}),tx(e,{viewElement:"table",...n}),ix(e,n)}(e,n,{modelAttribute:"tableBackgroundColor",styleName:"background-color",attributeName:"bgcolor",attributeType:"color",defaultValue:i.backgroundColor}),t.commands.add("tableBackgroundColor",new ME(t,i.backgroundColor))}}function jE(t,e,n){const{modelAttribute:i}=n;t.extend("table",{allowAttributes:[i]}),t.setAttributeProperties(i,{isFormatting:!0}),tx(e,{viewElement:/^(table|figure)$/,shouldUpcast:t=>!("table"==t.name&&"figure"==t.parent.name||"figure"==t.name&&!t.hasClass("table")),...n}),nx(e,{modelElement:"table",...n})}class HE extends ku{options;focusTracker;keystrokes;children;borderStyleDropdown;borderWidthInput;borderColorInput;backgroundInput;widthInput;heightInput;alignmentToolbar;saveButtonView;cancelButtonView;_focusables;_focusCycler;constructor(t,e){super(t),this.set({borderStyle:"",borderWidth:"",borderColor:"",backgroundColor:"",width:"",height:"",alignment:""}),this.options=e;const{borderStyleDropdown:n,borderWidthInput:i,borderColorInput:o,borderRowLabel:r}=this._createBorderFields(),{backgroundRowLabel:s,backgroundInput:a}=this._createBackgroundFields(),{widthInput:l,operatorLabel:c,heightInput:d,dimensionsLabel:u}=this._createDimensionFields(),{alignmentToolbar:h,alignmentLabel:g}=this._createAlignmentFields();this.focusTracker=new _n,this.keystrokes=new xn,this.children=this.createCollection(),this.borderStyleDropdown=n,this.borderWidthInput=i,this.borderColorInput=o,this.backgroundInput=a,this.widthInput=l,this.heightInput=d,this.alignmentToolbar=h;const{saveButtonView:m,cancelButtonView:p}=this._createActionButtons();this.saveButtonView=m,this.cancelButtonView=p,this._focusables=new Qd,this._focusCycler=new Ou({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.children.add(new zu(t,{label:this.t("Table properties")})),this.children.add(new Dg(t,{labelView:r,children:[r,n,o,i],class:"ck-table-form__border-row"})),this.children.add(new Dg(t,{labelView:s,children:[s,a],class:"ck-table-form__background-row"})),this.children.add(new Dg(t,{children:[new Dg(t,{labelView:u,children:[u,l,c,d],class:"ck-table-form__dimensions-row"}),new Dg(t,{labelView:g,children:[g,h],class:"ck-table-properties-form__alignment-row"})]})),this.children.add(new Dg(t,{children:[this.saveButtonView,this.cancelButtonView],class:"ck-table-form__action-row"})),this.setTemplate({tag:"form",attributes:{class:["ck","ck-form","ck-table-form","ck-table-properties-form"],tabindex:"-1"},children:this.children})}render(){super.render(),Eu({view:this}),[this.borderColorInput,this.backgroundInput].forEach(t=>{this._focusCycler.chain(t.fieldView.focusCycler)}),[this.borderStyleDropdown,this.borderColorInput,this.borderWidthInput,this.backgroundInput,this.widthInput,this.heightInput,this.alignmentToolbar,this.saveButtonView,this.cancelButtonView].forEach(t=>{this._focusables.add(t),this.focusTracker.add(t.element)}),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){this._focusCycler.focusFirst()}_createBorderFields(){const t=this.options.defaultTableProperties,e={style:t.borderStyle,width:t.borderWidth,color:t.borderColor},n=QA({colorConfig:this.options.borderColors,columns:5,defaultColorValue:e.color,colorPickerConfig:this.options.colorPickerConfig}),i=this.locale,o=this.t,r=o("Style"),s=new Tu(i);s.text=o("Border");const a=FA(o),l=new kh(i,Qh);l.set({label:r,class:"ck-table-form__border-style"}),l.fieldView.buttonView.set({ariaLabel:r,ariaLabelledBy:void 0,isOn:!1,withText:!0,tooltip:r}),l.fieldView.buttonView.bind("label").to(this,"borderStyle",t=>a[t||"none"]),l.fieldView.on("execute",t=>{this.borderStyle=t.source._borderStyleValue}),l.bind("isEmpty").to(this,"borderStyle",t=>!t),Hh(l.fieldView,qA(this,e.style),{role:"menu",ariaLabel:r});const c=new kh(i,Kh);c.set({label:o("Width"),class:"ck-table-form__border-width"}),c.fieldView.bind("value").to(this,"borderWidth"),c.bind("isEnabled").to(this,"borderStyle",UE),c.fieldView.on("input",()=>{this.borderWidth=c.fieldView.element.value});const d=new kh(i,n);return d.set({label:o("Color"),class:"ck-table-form__border-color"}),d.fieldView.bind("value").to(this,"borderColor"),d.bind("isEnabled").to(this,"borderStyle",UE),d.fieldView.on("input",()=>{this.borderColor=d.fieldView.value}),this.on("change:borderStyle",(t,n,i,o)=>{UE(i)||(this.borderColor="",this.borderWidth=""),UE(o)||(this.borderColor=e.color,this.borderWidth=e.width)}),{borderRowLabel:s,borderStyleDropdown:l,borderColorInput:d,borderWidthInput:c}}_createBackgroundFields(){const t=this.locale,e=this.t,n=new Tu(t);n.text=e("Background");const i=QA({colorConfig:this.options.backgroundColors,columns:5,defaultColorValue:this.options.defaultTableProperties.backgroundColor,colorPickerConfig:this.options.colorPickerConfig}),o=new kh(t,i);return o.set({label:e("Color"),class:"ck-table-properties-form__background"}),o.fieldView.bind("value").to(this,"backgroundColor"),o.fieldView.on("input",()=>{this.backgroundColor=o.fieldView.value}),{backgroundRowLabel:n,backgroundInput:o}}_createDimensionFields(){const t=this.locale,e=this.t,n=new Tu(t);n.text=e("Dimensions");const i=new kh(t,Kh);i.set({label:e("Width"),class:"ck-table-form__dimensions-row__width"}),i.fieldView.bind("value").to(this,"width"),i.fieldView.on("input",()=>{this.width=i.fieldView.element.value});const o=new ku(t);o.setTemplate({tag:"span",attributes:{class:["ck-table-form__dimension-operator"]},children:[{text:"×"}]});const r=new kh(t,Kh);return r.set({label:e("Height"),class:"ck-table-form__dimensions-row__height"}),r.fieldView.bind("value").to(this,"height"),r.fieldView.on("input",()=>{this.height=r.fieldView.element.value}),{dimensionsLabel:n,widthInput:i,operatorLabel:o,heightInput:r}}_createAlignmentFields(){const t=this.locale,e=this.t,n=new Tu(t);n.text=e("Alignment");const i=new Vh(t);return i.set({role:"radiogroup",isCompact:!0,ariaLabel:e("Table alignment toolbar")}),KA({view:this,icons:{left:Gc,center:Kc,right:Qc},toolbar:i,labels:this._alignmentLabels,propertyName:"alignment",defaultValue:this.options.defaultTableProperties.alignment}),{alignmentLabel:n,alignmentToolbar:i}}_createActionButtons(){const t=this.locale,e=this.t,n=new Lu(t),i=new Lu(t),o=[this.borderWidthInput,this.borderColorInput,this.backgroundInput,this.widthInput,this.heightInput];return n.set({label:e("Save"),icon:Rc,class:"ck-button-save",type:"submit",withText:!0}),n.bind("isEnabled").toMany(o,"errorText",(...t)=>t.every(t=>!t)),i.set({label:e("Cancel"),icon:zc,class:"ck-button-cancel",withText:!0}),i.delegate("execute").to(this,"cancel"),{saveButtonView:n,cancelButtonView:i}}get _alignmentLabels(){const t=this.locale,e=this.t,n=e("Align table to the left"),i=e("Center table"),o=e("Align table to the right");return"rtl"===t.uiLanguageDirection?{right:o,center:i,left:n}:{left:n,center:i,right:o}}}function UE(t){return"none"!==t}const $E={borderStyle:"tableBorderStyle",borderColor:"tableBorderColor",borderWidth:"tableBorderWidth",backgroundColor:"tableBackgroundColor",width:"tableWidth",height:"tableHeight",alignment:"tableAlignment"};class WE extends nc{_defaultContentTableProperties;_defaultLayoutTableProperties;_balloon;view=null;_viewWithContentTableDefaults=null;_viewWithLayoutTableDefaults=null;_undoStepBatch;_isReady;static get requires(){return[Hg]}static get pluginName(){return"TablePropertiesUI"}static get isOfficialPlugin(){return!0}constructor(t){super(t),t.config.define("table.tableProperties",{borderColors:GA,backgroundColors:GA})}init(){const t=this.editor;this._defaultContentTableProperties=aE(t.config.get("table.tableProperties.defaultProperties"),{includeAlignmentProperty:!0}),this._defaultLayoutTableProperties=sE(),this._balloon=t.plugins.get(Hg),t.ui.componentFactory.add("tableProperties",()=>this._createTablePropertiesButton())}_createTablePropertiesButton(){const t=this.editor,e=t.t,n=new Lu(t.locale);n.set({label:e("Table properties"),icon:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M8 2v5h4V2h1v5h5v1h-5v4h.021l-.172.351-1.916.28-.151.027c-.287.063-.54.182-.755.341L8 13v5H7v-5H2v-1h5V8H2V7h5V2zm4 6H8v4h4z" opacity=".6"/><path d="m15.5 11.5 1.323 2.68 2.957.43-2.14 2.085.505 2.946L15.5 18.25l-2.645 1.39.505-2.945-2.14-2.086 2.957-.43zM17 1a2 2 0 0 1 2 2v9.475l-.85-.124-.857-1.736a2 2 0 0 0-.292-.44L17 3H3v14h7.808l.402.392L10.935 19H3a2 2 0 0 1-2-2V3a2 2 0 0 1 2-2z"/></svg>',tooltip:!0}),this.listenTo(n,"execute",()=>this._showView());const i=Object.values($E).map(e=>t.commands.get(e));return n.bind("isEnabled").toMany(i,"isEnabled",(...t)=>t.some(t=>t)),n}destroy(){super.destroy(),this.view&&this.view.destroy()}_createPropertiesView(t){const e=this.editor,n=e.config.get("table.tableProperties"),i=hh(n.borderColors),o=uh(e.locale,i),r=hh(n.backgroundColors),s=uh(e.locale,r),a=!1!==n.colorPicker,l=new HE(e.locale,{borderColors:o,backgroundColors:s,defaultTableProperties:t,colorPickerConfig:!!a&&(n.colorPicker||{})}),c=e.t;l.render(),this.listenTo(l,"submit",()=>{this._hideView()}),this.listenTo(l,"cancel",()=>{this._undoStepBatch.operations.length&&e.execute("undo",this._undoStepBatch),this._hideView()}),l.keystrokes.set("Esc",(t,e)=>{this._hideView(),e()}),Cu({emitter:l,activator:()=>this._isViewInBalloon,contextElements:[this._balloon.view.element],callback:()=>this._hideView()});const d=jA(c),u=HA(c);return l.on("change:borderStyle",this._getPropertyChangeCallback("tableBorderStyle")),l.on("change:borderColor",this._getValidatedPropertyChangeCallback({viewField:l.borderColorInput,commandName:"tableBorderColor",errorText:d,validator:UA})),l.on("change:borderWidth",this._getValidatedPropertyChangeCallback({viewField:l.borderWidthInput,commandName:"tableBorderWidth",errorText:u,validator:WA})),l.on("change:backgroundColor",this._getValidatedPropertyChangeCallback({viewField:l.backgroundInput,commandName:"tableBackgroundColor",errorText:d,validator:UA})),l.on("change:width",this._getValidatedPropertyChangeCallback({viewField:l.widthInput,commandName:"tableWidth",errorText:u,validator:$A})),l.on("change:height",this._getValidatedPropertyChangeCallback({viewField:l.heightInput,commandName:"tableHeight",errorText:u,validator:$A})),l.on("change:alignment",this._getPropertyChangeCallback("tableAlignment")),l}_fillViewFormFromCommandValues(){const t=this.editor.commands,e=t.get("tableBorderStyle");Object.entries($E).map(([e,n])=>{const i=e,o=this.view===this._viewWithContentTableDefaults?this._defaultContentTableProperties[i]||"":this._defaultLayoutTableProperties[i]||"";return[i,t.get(n).value||o]}).forEach(([t,n])=>{("borderColor"!==t&&"borderWidth"!==t||"none"!==e.value)&&this.view.set(t,n)}),this._isReady=!0}_showView(){const t=this.editor,e=NA(t.editing.view.document.selection),n=e&&t.editing.mapper.toModelElement(e),i=!n||"layout"!==n.getAttribute("tableType");i&&!this._viewWithContentTableDefaults?this._viewWithContentTableDefaults=this._createPropertiesView(this._defaultContentTableProperties):i||this._viewWithLayoutTableDefaults||(this._viewWithLayoutTableDefaults=this._createPropertiesView(this._defaultLayoutTableProperties)),this.view=i?this._viewWithContentTableDefaults:this._viewWithLayoutTableDefaults,this.listenTo(t.ui,"update",()=>{this._updateView()}),this._fillViewFormFromCommandValues(),this._balloon.add({view:this.view,position:eE(t)}),this._undoStepBatch=t.model.createBatch(),this.view.focus()}_hideView(){const t=this.editor;this.stopListening(t.ui,"update"),this._isReady=!1,this.view.saveButtonView.focus(),this._balloon.remove(this.view),this.editor.editing.view.focus()}_updateView(){const t=this.editor;NA(t.editing.view.document.selection)?this._isViewVisible&&tE(t,"table"):this._hideView()}get _isViewVisible(){return!!this.view&&this._balloon.visibleView===this.view}get _isViewInBalloon(){return!!this.view&&this._balloon.hasView(this.view)}_getPropertyChangeCallback(t){return(e,n,i)=>{this._isReady&&this.editor.execute(t,{value:i,batch:this._undoStepBatch})}}_getValidatedPropertyChangeCallback(t){const{commandName:e,viewField:n,validator:i,errorText:o}=t,r=ti(()=>{n.errorText=o},500);return(t,o,s)=>{r.cancel(),this._isReady&&(i(s)?(this.editor.execute(e,{value:s,batch:this._undoStepBatch}),n.errorText=null):r())}}}class qE extends nc{static get pluginName(){return"TableProperties"}static get isOfficialPlugin(){return!0}static get requires(){return[FE,WE]}}function KE(t){return!!t&&t.is("element","table")}function GE(t){for(const e of t.getChildren())if(e.is("element","caption"))return e;return null}function QE(t){const e=t.parent;return"figcaption"==t.name&&e&&e.is("element","figure")&&e.hasClass("table")||"caption"==t.name&&e&&e.is("element","table")?{name:!0}:null}class YE extends oc{refresh(){const t=this.editor,e=dx(t.model.document.selection);this.isEnabled=!!e&&t.model.schema.checkChild(e,"caption"),this.isEnabled?this.value=!!GE(e):this.value=!1}execute({focusCaptionOnShow:t=!1}={}){this.editor.model.change(e=>{this.value?this._hideTableCaption(e):this._showTableCaption(e,t)})}_showTableCaption(t,e){const n=this.editor.model,i=dx(n.document.selection),o=this.editor.plugins.get("TableCaptionEditing")._getSavedCaption(i)||t.createElement("caption");n.insertContent(o,i,"end"),e&&t.setSelection(o,"in")}_hideTableCaption(t){const e=this.editor.model,n=dx(e.document.selection),i=this.editor.plugins.get("TableCaptionEditing"),o=GE(n);i._saveCaption(n,o),e.deleteContent(t.createSelection(o,"on"))}}class JE extends nc{_savedCaptionsMap;static get pluginName(){return"TableCaptionEditing"}static get isOfficialPlugin(){return!0}constructor(t){super(t),this._savedCaptionsMap=new WeakMap}init(){const t=this.editor,e=t.model.schema,n=t.editing.view,i=t.t;var o;e.isRegistered("caption")?e.extend("caption",{allowIn:"table"}):e.register("caption",{allowIn:"table",allowContentOf:"$block",isLimit:!0}),t.commands.add("toggleTableCaption",new YE(this.editor)),t.conversion.for("upcast").elementToElement({view:QE,model:"caption"}),t.conversion.for("dataDowncast").elementToElement({model:"caption",view:(t,{writer:e})=>KE(t.parent)?e.createContainerElement("figcaption"):null}),t.conversion.for("editingDowncast").elementToElement({model:"caption",view:(t,{writer:e})=>{if(!KE(t.parent))return null;const o=e.createEditableElement("figcaption");return e.setCustomProperty("tableCaption",!0,o),o.placeholder=i("Enter table caption"),ci({view:n,element:o,keepOnFocus:!0}),ef(o,e)}}),(o=t.model).document.registerPostFixer(t=>function(t,e){const n=e.document.differ.getChanges();let i=!1;for(const e of n){if("insert"!=e.type)continue;const n=e.position.parent;if(n.is("element","table")||"table"==e.name){const o="table"==e.name?e.position.nodeAfter:n,r=Array.from(o.getChildren()).filter(t=>t.is("element","caption")),s=r.shift();if(!s)continue;for(const e of r)t.move(t.createRangeIn(e),s,"end"),t.remove(e);s.nextSibling&&(t.move(t.createRangeOn(s),o,"end"),i=!0),i=!!r.length||i}}return i}(t,o))}_getSavedCaption(t){const e=this._savedCaptionsMap.get(t);return e?Hr.fromJSON(e):null}_saveCaption(t,e){this._savedCaptionsMap.set(t,e.toJSON())}}class ZE extends nc{static get pluginName(){return"TableCaptionUI"}static get isOfficialPlugin(){return!0}init(){const t=this.editor,e=t.editing.view,n=t.t;t.ui.componentFactory.add("toggleTableCaption",i=>{const o=t.commands.get("toggleTableCaption"),r=new Lu(i);return r.set({icon:Oc,tooltip:!0,isToggleable:!0}),r.bind("isOn","isEnabled").to(o,"value","isEnabled"),r.bind("label").to(o,"value",t=>n(t?"Toggle caption off":"Toggle caption on")),this.listenTo(r,"execute",()=>{if(t.execute("toggleTableCaption",{focusCaptionOnShow:!0}),o.value){const n=function(t){const e=dx(t);return e?GE(e):null}(t.model.document.selection),i=t.editing.mapper.toViewElement(n);if(!i)return;e.scrollToTheSelection(),e.change(t=>{t.addClass("table__caption_highlighted",i)})}t.editing.view.focus()}),r})}}class XE extends nc{static get pluginName(){return"TableCaption"}static get isOfficialPlugin(){return!0}static get requires(){return[JE,ZE]}}var tS=n(72),eS=n.n(tS),nS=n(825),iS=n.n(nS),oS=n(659),rS=n.n(oS),sS=n(56),aS=n.n(sS),lS=n(159),cS=n.n(lS),dS=n(113),uS=n.n(dS),hS=n(371),gS={};gS.styleTagTransform=uS(),gS.setAttributes=aS(),gS.insert=rS().bind(null,"head"),gS.domAPI=iS(),gS.insertStyleElement=cS(),eS()(hS.A,gS),hS.A&&hS.A.locals&&hS.A.locals;var mS=n(626),pS={};function fS(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=Array(e);n<e;n++)i[n]=t[n];return i}pS.styleTagTransform=uS(),pS.setAttributes=aS(),pS.insert=rS().bind(null,"head"),pS.domAPI=iS(),pS.insertStyleElement=cS(),eS()(mS.A,pS),mS.A&&mS.A.locals&&mS.A.locals;var bS="GPL";function kS(){var t,e,n=(0,o.useRef)(null),i=(0,o.useRef)(null),r=(t=(0,o.useState)(!1),e=2,function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var i,o,r,s,a=[],l=!0,c=!1;try{if(r=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;l=!1}else for(;!(l=(i=r.call(n)).done)&&(a.push(i.value),a.length!==e);l=!0);}catch(t){c=!0,o=t}finally{try{if(!l&&null!=n.return&&(s=n.return(),Object(s)!==s))return}finally{if(c)throw o}}return a}}(t,e)||function(t,e){if(t){if("string"==typeof t)return fS(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?fS(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),s=r[0],a=r[1];(0,o.useEffect)(function(){return a(!0),function(){return a(!1)}},[]);var l=(0,o.useMemo)(function(){return s?{editorConfig:{toolbar:{items:["undo","redo","|","sourceEditing","showBlocks","|","heading","|","fontSize","fontFamily","fontColor","fontBackgroundColor","|","bold","italic","underline","strikethrough","code","|","horizontalLine","pageBreak","link","insertImage","mediaEmbed","insertTable","highlight","blockQuote","codeBlock","htmlEmbed","|","alignment","|","bulletedList","numberedList","todoList","outdent","indent"],shouldNotGroupWhenFull:!1},plugins:[hm,Zm,Dw,tp,Gg,$p,ap,hp,kb,Rb,fk,hk,Xb,ak,Ew,Ek,Mk,zk,jk,i_,d_,r_,S_,E_,H_,ev,$w,nv,C_,rv,dv,bp,Hv,Kv,Qy,wC,HC,qC,_k,YC,Ac,ZC,yp,MA,XE,AE,IE,qE,OA,Um,IC,Sp],balloonToolbar:["bold","italic","|","link","insertImage","|","bulletedList","numberedList"],fontFamily:{supportAllValues:!0},fontSize:{options:[10,12,14,"default",18,20,22],supportAllValues:!0},heading:{options:[{model:"paragraph",title:"Paragraph",class:"ck-heading_paragraph"},{model:"heading1",view:"h1",title:"Heading 1",class:"ck-heading_heading1"},{model:"heading2",view:"h2",title:"Heading 2",class:"ck-heading_heading2"},{model:"heading3",view:"h3",title:"Heading 3",class:"ck-heading_heading3"},{model:"heading4",view:"h4",title:"Heading 4",class:"ck-heading_heading4"},{model:"heading5",view:"h5",title:"Heading 5",class:"ck-heading_heading5"},{model:"heading6",view:"h6",title:"Heading 6",class:"ck-heading_heading6"}]},htmlSupport:{allow:[{name:/^.*$/,styles:!0,attributes:!0,classes:!0}]},image:{toolbar:["toggleImageCaption","imageTextAlternative","|","imageStyle:inline","imageStyle:wrapText","imageStyle:breakText","|","resizeImage"]},licenseKey:bS,link:{addTargetToExternalLinks:!0,defaultProtocol:"https://",decorators:{toggleDownloadable:{mode:"manual",label:"Downloadable",attributes:{download:"file"}}}},list:{properties:{styles:!0,startIndex:!0,reversed:!0}},placeholder:"Type or paste your content here!",table:{contentToolbar:["tableColumn","tableRow","mergeTableCells","tableProperties","tableCellProperties"]}}}:{}},[s]).editorConfig;return React.createElement("div",{className:"main-container"},React.createElement("div",{className:"editor-container editor-container_classic-editor",ref:n},React.createElement("div",{className:"editor-container__editor"},React.createElement("div",{ref:i},l&&React.createElement(v,{editor:vb,config:l})))))}return i})());